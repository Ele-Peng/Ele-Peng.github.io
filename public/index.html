<!DOCTYPE html>
<html lang="zh">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme-color" content=#58b77a>
  <title>Be kind.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="EllePeng">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <script id="hexo-configurations">
  var CONFIG = {
    root: '/',
    theme: 'hexo-theme-lx',
    version: '0.3.9',
    localsearch:{
      "enable": true,
      "trigger": "auto",
      "top_n_per_article": 1,
      "unescape": false,
      "preload": false
      },
    path: 'search.xml'
  };
</script>

  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/css/main.min.css">
  <style type="text/css">
    pre,
    code {
      font-family: 'Fira Code', monospace;
    }
    html {
      font-family: sans-serif;
    }
    body {
      font-family: sans-serif;
    }
    h1, h2, h3, h4, h5, figure {
      font-family: sans-serif;
    }
    .menu-container{
      font-family: sans-serif;
    }
  </style>

  <script src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.jside.menu.js"></script>
	<script>
	$(document).ready(function(){
	$(".menu-container").jSideMenu({
	    jSidePosition: "position-right",
	    jSideSticky: true,
	    jSideSkin: "greenish",
	     });
	}); 
	</script>
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Fira Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">
<meta name="generator" content="Hexo 4.2.0"></head>
<body>
<div id="page">
<a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i></a>
<div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Search..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>

<div id="lx-aside" style="background-image: url(/images/cover.jpeg)">
  <div class="overlay">
  <div class="featured">
    <div class="avatar"><a href="/"><img src="/images/avatar.jpeg"></a></div>
    <span>EllePeng</span>
    <h1>Be kind.</h1>
    
    <div class="social-links">
    <a href="https://github.com/Ele-Peng" target="_blank"><i class="fa fa-github fa-fw"></i></a>
    <a href="mailto:EllePeng@aliyun.com" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
    <a href="https://weibo.com/3199262327/profile?topnav=1&amp;wvr=6" target="_blank"><i class="fa fa-weibo fa-fw"></i></a>
</div>
  </div>
  </div>
</div>

<div id="lx-main-content">
  <div class="lx-post">

  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/04/05/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E8%8E%B7%E5%8F%96%E5%9B%BE%E7%89%87%E4%B8%BB%E8%89%B2%E8%B0%83/">å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-04-05 | <i class="fa fa-folder-o"></i> <a class="category-link" href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">å¾®ä¿¡å°ç¨‹åº</a></span>
      <p><h4 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h4><ul>
<li>æ˜¯çš„æˆ‘è¦å¼€å§‹åšï¼šæ ¹æ®å›¾ç‰‡çš„ä¸»è‰²è°ƒæ¥æ”¹å˜ä¸€ä¸‹é¡µé¢èƒŒæ™¯é¢œè‰²äº†ğŸ™†</li>
<li>è®°å½•ä¸€ä¸‹ï¼Œè‡ªå·±ç¢°åˆ°çš„é—®é¢˜ä»¥åŠæ€è€ƒ</li>
<li>æ—¶é—´å¤šçš„è¯ï¼Œä¼šè€ƒè™‘å°†ä»£ç å‘åœ¨githubï¼Œæ¬¢è¿å¤§å®¶å»starğŸ˜˜</li>
</ul>
<hr>
<h4 id="å¼€å‘å‡†å¤‡"><a href="#å¼€å‘å‡†å¤‡" class="headerlink" title="å¼€å‘å‡†å¤‡"></a>å¼€å‘å‡†å¤‡</h4><ul>
<li>ç†ä¸€ä¸‹æ€è·¯<ol>
<li>å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvas</li>
<li>é€šè¿‡canvasçš„getImageDataè·å–å›¾ç‰‡çš„åƒç´ æ•°æ®<ul>
<li><a href="https://blog.csdn.net/Elle_Peng/article/details/105030971" target="_blank" rel="noopener">canvas 2d ä¸æ—§ç‰ˆ canvas å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasçš„ä¸¤ç§æ–¹æ³•å®è·µ</a></li>
</ul>
</li>
<li>åˆ†æç›®å‰ä¸»è¦ç”¨äºè·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„ç®—æ³•ï¼Œå¹¶å®è·µ</li>
<li>å¾—åˆ°ä¸»è¦è‰²è°ƒï¼Œå†å°†rgbè½¬æ¢æˆhsbï¼Œå¹¶å¯¹bå€¼ï¼Œè¿›è¡Œä¿®æ”¹ï¼Œåˆ¶ä½œæ¸å˜ï¼Œå·¦ä¾§35ï¼Œå³ä¾§15<ul>
<li>å—¯ï¼Œç¥æˆ‘æˆåŠŸ<h4 id="é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯-å‡è‰²ç®—æ³•"><a href="#é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯-å‡è‰²ç®—æ³•" class="headerlink" title="é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•"></a>é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•</h4></li>
<li><a href="http://www.360doc.com/content/17/0417/19/41797635_646363886.shtml" target="_blank" rel="noopener">é¢œè‰²ç©ºé—´ RGB CMY HSV HSL LAB</a></li>
<li>å›¾ç‰‡é¢œè‰²é‡åŒ–ç®—æ³•</li>
</ul>
</li>
</ol>
<ul>
<li>æ¯”è¾ƒå¸¸è§çš„åº”ç”¨å°±æ˜¯ç”¨äºæå–å›¾ç‰‡çš„ä¸»è‰²è°ƒç”¨äºä¸Šè‰²é…è‰²,å½“ç„¶ä¹Ÿå¯ä»¥ç”¨äºå›¾åƒåˆ†å‰²</li>
<li>ä¸»æµç®—æ³•<ul>
<li>ä¸¤ä¸ªå¤§æ–¹å‘</li>
<li><strong>åœ¨é¢œè‰²ç©ºé—´åˆç†åœ°é€‰å–é‡‡æ ·ç‚¹æ¥æ„é€ é¢œè‰²è¡¨ï¼Œä½¿å¾—å‡è‰²åçš„å›¾åƒå’ŒåŸå›¾å°½å¯èƒ½åœ°æ¥è¿‘</strong><ul>
<li>ç›´æ¥é‡åŒ–<ul>
<li>å¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£</li>
</ul>
</li>
<li>ç»Ÿè®¡é‡åŒ–<ul>
<li>æ ¸å¿ƒï¼šè°ƒæ•´ç›´æ–¹å›¾ä½¿å¾—ç´¯ç§¯åˆ†å¸ƒæ›²çº¿å‘ˆçº¿æ€§ï¼Œä»è€Œä½¿å›¾åƒåƒç´ ç‚¹çš„äº®åº¦å€¼å°½å¯èƒ½å‡åŒ€åœ°åˆ†å¸ƒ</li>
<li>åˆ©ç”¨åŸå›¾çš„ç›´æ–¹å›¾æ¥å¼•å¯¼é‡‡æ ·ç‚¹çš„é€‰å–ï¼Œä½¿å¾—æ¯ä¸ªé‡‡æ ·ç‚¹å¯ä»¥å¤§è‡´è¦†ç›–ç›¸åŒæ•°é‡çš„åƒç´ ç‚¹</li>
<li>å¯¹æ¯ä¸ªé¢œè‰²é€šé“å»ºç«‹ç›´æ–¹å›¾ï¼Œç„¶åæ ¹æ®è¿™äº›ç›´æ–¹å›¾å¯¹å„ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡‡æ ·ï¼Œåœ¨åƒç´ å€¼åˆ†å¸ƒå¤šçš„åŒºåŸŸè¿›è¡Œå¯†é›†é‡‡æ ·ï¼Œåˆ«çš„åŒºåŸŸç¨€ç–é‡‡æ ·ï¼Œå†åˆ©ç”¨è¿™äº›é‡‡æ ·ç‚¹æ¥ç»„åˆæˆæœ€ç»ˆçš„é¢œè‰²è¡¨ï¼ŒåŸå›¾ä¸­çš„æ¯ä¸ªåƒç´ ç‚¹ç”¨é¢œè‰²è¡¨ä¸­æœ€æ¥è¿‘çš„é¢œè‰²æ›¿æ¢æ‰</li>
</ul>
</li>
<li>é¢œè‰²ç©ºé—´åˆ†å‰²(Median-Cut)<ul>
<li>æ ¸å¿ƒï¼šåœ¨é¢œè‰²ç©ºé—´å»ºç«‹ä¸€æ£µäºŒå‰æ ‘ï¼Œé€šè¿‡ä¸æ–­åœ°ç»†åŒ–è¿™æ£µæ ‘æ¥è¿‘ä¼¼å¾—åˆ°ä¸€ä¸ªé¢œè‰²ä¸‰ç»´ç›´æ–¹å›¾ï¼Œç„¶åå†æ ¹æ®è¿™æ£µæ ‘æ¥åˆ†é…é‡‡æ ·ç‚¹</li>
<li>åŸºäºå›¾åƒé¢œè‰²æ ·æœ¬åˆ†å¸ƒçš„è‡ªé€‚åº”æ–¹æ³•ï¼Œä¸è®ºå›¾åƒä¸­é¢œè‰²æ ·æœ¬çš„åˆ†å¸ƒå¦‚ä½•ï¼Œæ€»æ˜¯å¯ä»¥ç”Ÿæˆä¸€ä¸ªå’Œé¢œè‰²æ ·æœ¬åˆ†å¸ƒåŒ¹é…è‰¯å¥½çš„é¢œè‰²è¡¨ï¼šåœ¨é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸå†…é‡‡æ ·ç‚¹åˆ†å¸ƒä¹Ÿç›¸å¯¹å¯†é›†ï¼Œå…¶ä»–åŒºåŸŸåˆ™åˆ†é…äº†è¾ƒå°‘çš„é‡‡æ ·ç‚¹ã€‚ä¸”ç›¸åŒæ•°ç›®çš„é¢œè‰²æ ·æœ¬æ€»æ˜¯ç”¨åŒæ ·æ•°é‡çš„é‡‡æ ·ç‚¹æ¥ä»£è¡¨ï¼Œæ‰€ä»¥é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸï¼Œé‡‡æ ·ç‚¹çš„æ•°é‡è‡ªç„¶å°±ä¼šå¤šï¼Œåä¹‹åˆ™ç›¸åº”çš„æ¯”è¾ƒå°‘</li>
<li>æœ€é‡è¦ã€åº”ç”¨æœ€å¹¿æ³›çš„å‡è‰²ç®—æ³•ä¹‹ä¸€</li>
</ul>
</li>
<li>kå‡å€¼èšç±»(k-Means clustering)<ul>
<li>æ ¸å¿ƒï¼šå°†åƒç´ æŒ‰é¢œè‰²çš„ç›¸ä¼¼ç¨‹åº¦å½’ç±»</li>
</ul>
</li>
</ul>
</li>
<li><strong>ä»ä¸€ä¸ªåˆå§‹çš„é¢œè‰²è¡¨å‡ºå‘ï¼Œé€šè¿‡ä¸æ–­ä¿®æ”¹é¢œè‰²è¡¨æ¥æ”¹å–„å‡è‰²æ•ˆæœ</strong><ul>
<li>ç¥ç»ç½‘ç»œæ–¹æ³•(ANN)<ul>
<li>é¢œè‰²è¡¨é€šè¿‡ç¥ç»å…ƒæ¥ç¼–ç ï¼Œé€šè¿‡ç¼“æ…¢çš„è°ƒèŠ‚ç¥ç»å…ƒçš„é¢œè‰²å€¼ä»¥ä¿è¯æ•´ä¸ªç¥ç»ç½‘ç»œé€æ­¥æ”¶æ•›äºæœ€å°è¯¯å·®çŠ¶æ€ï¼ˆå³é€šè¿‡ç¥ç»ç½‘ç»œäº§ç”Ÿçš„å›¾åƒå’ŒåŸå›¾ä¹‹é—´è¯¯å·®æœ€å°ï¼‰<h4 id="ç›´æ¥é‡åŒ–å®è·µ"><a href="#ç›´æ¥é‡åŒ–å®è·µ" class="headerlink" title="ç›´æ¥é‡åŒ–å®è·µ"></a>ç›´æ¥é‡åŒ–å®è·µ</h4><ul>
<li>é¦–å…ˆæˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€çœ‹getImageDataåçš„æ•°æ®</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzljZjVjMjQzMDI0NmE0YjE0YzFlYmMzMjYwZDkwYTgwNTQzMDIucG5n?x-oss-process=image/format,png" alt="getImageDataæ•°æ®"></li>
<li>å¯ä»¥ç®€å•çœ‹ä½œæ˜¯å¤–å±‚å¾ªç¯ä¸ºrgbaçš„æ‰“å¹³äº†äºŒç»´æ•°ç»„<ul>
<li>å¦‚æœæŒ‰æ»¡è¶³éœ€æ±‚åšï¼Œåªè¦ä¸€ä¸ªä¸»è‰²è°ƒçš„è¯ï¼Œå¯ä»¥æŠŠæ•´ä¸ªgetImageDataè·å¾—çš„æ•°æ®ï¼Œè¿›è¡Œå„ä¸ªé€šé“çš„å¹³å‡å€¼æ±‚å€¼ï¼Œå†æ‹¼æ¥ï¼Œåƒè¿™æ ·<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">getUniqueColor(imageData) &#123;</span><br><span class="line">   <span class="keyword">let</span> res_r = <span class="number">0</span></span><br><span class="line">   <span class="keyword">let</span> res_g = <span class="number">0</span></span><br><span class="line">   <span class="keyword">let</span> res_b = <span class="number">0</span></span><br><span class="line">   <span class="keyword">let</span> res_a = <span class="number">0</span></span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; imageData.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">     <span class="keyword">if</span> (i % <span class="number">4</span> === <span class="number">0</span>) &#123;</span><br><span class="line">       res_r += imageData[i]</span><br><span class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i % <span class="number">4</span> === <span class="number">1</span>) &#123;</span><br><span class="line">       res_g += imageData[i]</span><br><span class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i % <span class="number">4</span> === <span class="number">2</span>) &#123;</span><br><span class="line">       res_b += imageData[i]</span><br><span class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i % <span class="number">4</span> === <span class="number">3</span>) &#123;</span><br><span class="line">       res_a += imageData[i]</span><br><span class="line">     &#125; </span><br><span class="line">   &#125;</span><br><span class="line">   res_r = <span class="built_in">Math</span>.round(res_r / (imageData.length / <span class="number">4</span>))</span><br><span class="line">   res_g =  <span class="built_in">Math</span>.round(res_g / (imageData.length / <span class="number">4</span>))</span><br><span class="line">   res_b =  <span class="built_in">Math</span>.round(res_b / (imageData.length / <span class="number">4</span>))</span><br><span class="line">   res_a =  <span class="built_in">Math</span>.round(res_a / (imageData.length / <span class="number">4</span>))</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'res_r'</span>, res_r)</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'res_g'</span>, res_g)</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'res_b'</span>, res_b)</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'res_a'</span>, res_a)</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>è¿è¡Œæˆªå›¾<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzc4NzFiOTVmYzA4NWQ3NGQwNDc4OWY0ZWI5Yzc0YThmNzQ5OTYucG5n?x-oss-process=image/format,png" alt="æš´åŠ›æ³•æ±‚ä¸»è‰²è°ƒ"></li>
<li>æ— ç›¸å…³ç‚¹è¶Šå¤šï¼Œè¯¯å·®è¶Šå¤§ğŸ‘<ul>
<li>æˆ‘ä»¬å¯ä»¥â€œå¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£â€<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> COLOR_SIZE = <span class="number">40</span> <span class="comment">// å•ä½è‰²å—çš„å¤§å°ï¼ˆåƒç´ ä¸ªæ•°ï¼Œé»˜è®¤40ï¼‰ã€‚ä»¥å•ä½è‰²å—çš„å¹³å‡åƒç´ å€¼ä¸ºä½œä¸ºç»Ÿè®¡å•ä½</span></span><br><span class="line"><span class="keyword">const</span> LEVEL = <span class="number">32</span> <span class="comment">// è‰²æ·±ï¼Œé¢œè‰²åˆ†åŒºå‚æ•°ï¼ˆ0-255ï¼‰ï¼Œæ€»256ï¼Œ2^8ï¼Œå³8bitï¼Œ4ä¸ªé€šé“ï¼ˆrgbaï¼‰ï¼Œå³é»˜è®¤è‰²æ·±4*8bitï¼Œ32bit</span></span><br><span class="line"><span class="comment">// åˆ†åŒºå—ï¼Œå¯ä»¥æ‹“å±•æ€§çš„æ±‚ä¸»è¦è‰²æ¿ï¼Œç”¨æ¥åšpalette</span></span><br><span class="line">   <span class="keyword">const</span> mapData = that.getLevelData(imageData);</span><br><span class="line">   <span class="keyword">const</span> colors = that.getMostColor(mapData);</span><br><span class="line">   <span class="keyword">if</span> (!colors) &#123;</span><br><span class="line">     <span class="keyword">return</span></span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     <span class="keyword">const</span> color = that.getAverageColor(colors)</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'color'</span>, color)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li>å°†getImageDataæ•°æ®åˆ†æˆç‰¹å®šå¤§å°çš„åŒºå—ï¼Œåˆ†åˆ«ç®—å‡ºå„ä¸ªåŒºå—çš„averageColorï¼Œå†åˆ©ç”¨mapç‰¹æ€§ï¼Œå°†averageColorä½œkeyï¼Œcountå„ä¸ªaverageColorä¸ªæ•°  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æ¯æ®µçš„é¢œè‰²æ•°æ®</span></span><br><span class="line"><span class="comment">// æ ¹æ®åƒç´ æ•°æ®ï¼ŒæŒ‰å•ä½è‰²å—è¿›è¡Œåˆ‡å‰²</span></span><br><span class="line">getLevelData(imageData) &#123;</span><br><span class="line">  <span class="keyword">const</span> len = imageData.length;</span><br><span class="line">  <span class="keyword">const</span> mapData = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i += COLOR_SIZE * <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> blockColor = <span class="keyword">this</span>.getBlockColor(imageData, i); <span class="comment">// è¯¥åŒºå—å¹³å‡rgba [&#123;r,g,b,a&#125;]æ•°æ®</span></span><br><span class="line">    <span class="comment">// è·å–å„ä¸ªåŒºå—çš„å¹³å‡rgbaæ•°æ®ï¼Œå°†å„ä¸ªé€šé“çš„é¢œè‰²è¿›è¡ŒLEVELè‰²æ·±é™çº§</span></span><br><span class="line">    <span class="comment">// æ ¹æ®r_g_b_a å»ºç«‹mapç´¢å¼•</span></span><br><span class="line">    <span class="keyword">const</span> key = <span class="keyword">this</span>.getColorLevel(blockColor);</span><br><span class="line">    !mapData[key] &amp;&amp; (mapData[key] = []);</span><br><span class="line">    mapData[key].push(blockColor);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> mapData;</span><br><span class="line">&#125;,</span><br><span class="line">		</span><br><span class="line"><span class="comment">// è·å–å•ä½å—çš„å…¨éƒ¨è‰²å€¼</span></span><br><span class="line"><span class="comment">// å¹¶æ ¹æ®å…¨éƒ¨è‰²å€¼ï¼Œè®¡ç®—å¹³å‡è‰²å€¼</span></span><br><span class="line"><span class="comment">// å¤„ç†æœ€åè¾¹ç•Œå€¼ï¼Œå°äºCOLOR_SIZE</span></span><br><span class="line">getBlockColor(imageData, start) &#123;</span><br><span class="line">  <span class="keyword">let</span> data = [],</span><br><span class="line">    count = COLOR_SIZE,</span><br><span class="line">    len = COLOR_SIZE * <span class="number">4</span>;</span><br><span class="line">  imageData.length &lt;= start + len &amp;&amp; (count = <span class="built_in">Math</span>.floor((imageData.length - start - <span class="number">1</span>) / <span class="number">4</span>));</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; count; i += <span class="number">4</span>) &#123;</span><br><span class="line">    data.push(&#123;</span><br><span class="line">      r: imageData[start + i + <span class="number">0</span>],</span><br><span class="line">      g: imageData[start + i + <span class="number">1</span>],</span><br><span class="line">      b: imageData[start + i + <span class="number">2</span>],</span><br><span class="line">      a: imageData[start + i + <span class="number">3</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.getAverageColor(data);</span><br><span class="line">&#125;,</span><br><span class="line">		</span><br><span class="line"><span class="comment">// å–å‡ºå„ä¸ªé€šé“çš„å¹³å‡å€¼ï¼Œå³ä¸ºæ”¹è‰²å—çš„å¹³å‡è‰²å€¼</span></span><br><span class="line">getAverageColor(colorArr) &#123;</span><br><span class="line">  <span class="keyword">const</span> len = colorArr.length;</span><br><span class="line">  <span class="keyword">let</span> sr = <span class="number">0</span>, sg = <span class="number">0</span>, sb = <span class="number">0</span>, sa = <span class="number">0</span>;</span><br><span class="line">  colorArr.map(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">    sr += item.r;</span><br><span class="line">    sg += item.g;</span><br><span class="line">    sb += item.b;</span><br><span class="line">    sa += item.a;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    r: <span class="built_in">Math</span>.round(sr / len),</span><br><span class="line">    g: <span class="built_in">Math</span>.round(sg / len),</span><br><span class="line">    b: <span class="built_in">Math</span>.round(sb / len),</span><br><span class="line">    a: <span class="built_in">Math</span>.round(sa / len)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">		</span><br><span class="line">getColorLevel(color) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.getLevel(color.r) + <span class="string">'_'</span> + <span class="keyword">this</span>.getLevel(color.g) + <span class="string">'_'</span> + <span class="keyword">this</span>.getLevel(color.b) + <span class="string">'_'</span> + <span class="keyword">this</span>.getLevel(color.a)</span><br><span class="line">&#125;,</span><br><span class="line">		</span><br><span class="line"><span class="comment">// è‰²æ·±é™çº§</span></span><br><span class="line">getLevel(value) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.round(value / LEVEL)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
<li>æŠŠå‡ºç°æ¬¡æ•°æœ€å¤šçš„averageColoråŒºå—ï¼Œä½œä¸ºé‡‡æ ·åŒºå—ï¼Œå†è·å–ä¸€éaverageColorï¼Œå³æ˜¯æœ€ç»ˆä¸»è‰²è°ƒ  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®è‰²å—é¢œè‰²ï¼Œè·å–</span></span><br><span class="line">getMostColor(colorData) &#123;</span><br><span class="line">  <span class="keyword">let</span> rst = <span class="literal">null</span>, len = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> colorData) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'colorData[key].length'</span>, colorData[key].length)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'colorData[key].length'</span>, colorData[key])</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'colorData[key].length'</span>, key)</span><br><span class="line">    colorData[key].length &gt; len &amp;&amp; (</span><br><span class="line">      rst = colorData[key],</span><br><span class="line">      len = colorData[key].length</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> rst;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
<li>è¿è¡Œæˆªå›¾<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2ViYzI3MmNkNzU2NjNhODUxYmM2MWQ0MDE4OWJjZGI3NzQ5NDUucG5n?x-oss-process=image/format,png" alt="åŒºå—è·å–ä¸»è‰²è°ƒ"></li>
<li>é¢œè‰²å¯ä¿¡åº¦æé«˜äº†å¾ˆå¤š<h4 id="æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ"><a href="#æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ" class="headerlink" title="æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ"></a>æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ</h4><ul>
<li>æ ¸å¿ƒï¼šå°†<strong>ä¸‰é€šé“è½¬æˆå•é€šé“</strong>å³å¯<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> greyImageData = that.greyTheImage(imageData)</span><br><span class="line">   wx.canvasPutImageData(&#123;</span><br><span class="line">     canvasId: <span class="string">'myCanvas'</span>,</span><br><span class="line">     x: <span class="number">150</span>,</span><br><span class="line">     y: <span class="number">0</span>,</span><br><span class="line">     width: <span class="number">150</span>,</span><br><span class="line">     height: <span class="number">100</span>,</span><br><span class="line">     data: greyImageData,</span><br><span class="line">     success (res) &#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'canvasPutImageData it worked!'</span>)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br><span class="line"> greyTheImage(imageData) &#123;</span><br><span class="line">     <span class="comment">// imageDataæœ‰4ä¸ªé€šé“rgba</span></span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; imageData.length; i += <span class="number">4</span>) &#123;</span><br><span class="line">       <span class="keyword">let</span> sum_rgb = <span class="number">0</span></span><br><span class="line">       <span class="comment">// ä½†æˆ‘ä»¬åªéœ€è¦rgbä¸‰é€šé“ï¼Œa-alphaé€šé“æ— ç”¨</span></span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j += <span class="number">1</span>) &#123;</span><br><span class="line">         sum_rgb = sum_rgb + imageData[i + j]</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">let</span> grey = <span class="built_in">Math</span>.round(sum_rgb / <span class="number">3</span>)</span><br><span class="line">       imageData[i] = grey</span><br><span class="line">       imageData[i + <span class="number">1</span>] = grey</span><br><span class="line">       imageData[i + <span class="number">2</span>] = grey</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> imageData</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></li>
<li>è¿è¡Œæˆªå›¾<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmNWJhNzk2OTJjOWEwOTA2MDNlMzkxMzBlMDRiZTY4MTAwNzcwLnBuZw?x-oss-process=image/format,png" alt="åŒ»å­¦ç°è‰²å½±åƒ"></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="æ ¼å¼åŒ–rgbaè¾“å‡º"><a href="#æ ¼å¼åŒ–rgbaè¾“å‡º" class="headerlink" title="æ ¼å¼åŒ–rgbaè¾“å‡º"></a>æ ¼å¼åŒ–rgbaè¾“å‡º</h4><ul>
<li>åƒè¿™æ ·<img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxNDVhYzM4YzQ1MjFkNDgzNGNkZGQ5NTNmNjQ1MWQ3NTI0NTkucG5n?x-oss-process=image/format,png" alt="æ ¼å¼åŒ–rgbaè¾“å‡º">  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹æœ€ç»ˆé¢œè‰²çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * result:&#123;</span></span><br><span class="line"><span class="comment"> *   hex:'#ffffff',            åå…­ä½å€¼</span></span><br><span class="line"><span class="comment"> *   hexa:'#ffffff00',         åå…­ä½å€¼å¸¦alphaå€¼</span></span><br><span class="line"><span class="comment"> *   rgb:'rgb(0,0,0)',         RGBå€¼</span></span><br><span class="line"><span class="comment"> *   rgba:'rgba(0,0,0,0)'      RGBå€¼å¸¦alphaå€¼</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">	</span><br><span class="line">colorStrFormat(color) &#123;</span><br><span class="line">  <span class="keyword">const</span> rgba = <span class="string">'rgba('</span> + color.r + <span class="string">','</span> + color.g + <span class="string">','</span> + color.b + <span class="string">','</span> + (color.a / <span class="number">255</span>).toFixed(<span class="number">4</span>).replace(<span class="regexp">/\.*0+$/</span>, <span class="string">''</span>) + <span class="string">')'</span>;</span><br><span class="line">  <span class="keyword">const</span> rgb = <span class="string">'rgb('</span> + color.r + <span class="string">','</span> + color.g + <span class="string">','</span> + color.b + <span class="string">')'</span>;</span><br><span class="line">  <span class="keyword">const</span> hex = <span class="string">'#'</span> + <span class="keyword">this</span>.Num2Hex(color.r) + <span class="keyword">this</span>.Num2Hex(color.g) + <span class="keyword">this</span>.Num2Hex(color.b);</span><br><span class="line">  <span class="keyword">const</span> hexa = hex + <span class="keyword">this</span>.Num2Hex(color.a);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    rgba: rgba,</span><br><span class="line">    rgb: rgb,</span><br><span class="line">    hex: hex,</span><br><span class="line">    hexa: hexa</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">	</span><br><span class="line">Num2Hex(num) &#123;</span><br><span class="line">  <span class="keyword">const</span> hex = num.toString(<span class="number">16</span>) + <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">if</span> (hex.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'0'</span> + hex;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> hex;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h4 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h4></li>
<li><a href="https://blog.csdn.net/u012843346/article/details/16839649" target="_blank" rel="noopener">phg1024 JavaScriptå›¾åƒå¤„ç†(6) - å‡è‰²ç®—æ³•(Color Reduction)</a></li>
<li><a href="https://github.com/whoiam2007s/ImgMainColor" target="_blank" rel="noopener">è·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„æ’ä»¶</a></li>
<li>å…¶å®ä¹Ÿå¯ä»¥åˆ©ç”¨ <a href="https://blog.csdn.net/nanhupatar/article/details/82793637" target="_blank" rel="noopener">CSSæ–°ç‰¹æ€§å»æ”¹å˜èƒŒæ™¯é¢œè‰²</a>ï¼Œæ¯”å¦‚é«˜æ–¯æ¨¡ç³Šç­‰æ¥è¾¾åˆ°ä¸šåŠ¡éœ€æ±‚<h4 id="å†™åœ¨åé¢"><a href="#å†™åœ¨åé¢" class="headerlink" title="å†™åœ¨åé¢"></a>å†™åœ¨åé¢</h4></li>
<li>å‘¨å…­å¬äº†ä¸€å¤© John Lennon æ­Œæ›²ã€è¿™ä¹Ÿæ˜¯æˆ‘æ‹–æ›´çš„åŸå› ğŸ˜¶ ç¾¡æ…•ä»–å’Œ Yoko é‚£æ®µä¼Šç”¸å›­èˆ¬çš„çˆ±æƒ…ï¼Œä»–å¯¹ Yoko çš„ç—´çˆ±ï¼Œä»–å’Œæ¯äº²çš„ä¸¤æ¬¡åˆ†åˆ«æ„ŸåŒèº«å—ï¼ŒBeatlesåœ¨ä¸€èµ·åšéŸ³ä¹çš„æ¬¢ä¹ï¼Œä»–å¯¹ Sean çš„å® æººçˆ¶çˆ±ï¼Œä½†ä»–çš„äººç”Ÿå´åœ¨ä¸€æ¬¡æªæ€åæˆ›ç„¶è€Œæ­¢ï¼Œå¿ƒç—› å¿ƒç—› ğŸŒ§</li>
<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>
</ul>
<hr>
</p>
      <div class="post-button"><a class="btn" href="/2020/04/05/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E8%8E%B7%E5%8F%96%E5%9B%BE%E7%89%87%E4%B8%BB%E8%89%B2%E8%B0%83/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/04/05/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-fix%20canvas%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6%E6%9C%80%E9%A1%B6%E5%B1%82/">canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-04-05 | <i class="fa fa-folder-o"></i> <a class="category-link" href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">å¾®ä¿¡å°ç¨‹åº</a></span>
      <p><h4 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h4><ul>
<li>å¤§å®¶åº”è¯¥éƒ½çŸ¥é“è¿‡ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œcanvasç­‰åŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œé¡µé¢ä¸­æ— è®ºä½ è®¾ç½®å¤šå¤§çš„z-indexéƒ½æ— æ³•è¦†ç›–åœ¨å…¶ä¹‹ä¸Šï¼Œè¿™å°±å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜</li>
<li>å°±åƒè¿™æ ·<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxYmQ5OTM2M2VkYjU1NTRmYjc5MzBlZDllMTA0ZjEwMTc2MDM0LnBuZw?x-oss-process=image/format,png" alt="canvasé¡¶å±‚é—®é¢˜æˆªå›¾"></li>
<li>æŸ±çŠ¶å›¾æ˜¯ç”¨canvasç”»çš„ï¼Œå®ƒç½®äºäº†æˆ‘çš„tooltipä¹‹ä¸Šã€‚ã€è¿™çœ‹èµ·æ¥çœŸæ˜¯ä¸€ä¸ªå¯æ€•çš„é—®é¢˜</li>
</ul>
</li>
</ul>
<hr>
<h4 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h4><ul>
<li>å¾®ä¿¡å®˜æ–¹æä¾›äº†<a href="https://developers.weixin.qq.com/miniprogram/dev/component/cover-view.html" target="_blank" rel="noopener">cover-view</a>åŸç”Ÿç»„ä»¶ï¼Œè¦†ç›–åœ¨åŸç”Ÿç»„ä»¶ä¹‹ä¸Šçš„æ–‡æœ¬è§†å›¾</li>
<li>å¾®ä¿¡å®˜æ–¹æä¾›äº†å°†canvasè½¬åŒ–ä¸ºå›¾ç‰‡çš„æ–¹å¼â€“<a href="https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html" target="_blank" rel="noopener">wx.canvasToTempFilePath</a>ï¼Œè¿™æ ·å°±å¯ä»¥â€é™çº§â€œ</li>
</ul>
<h5 id="æ–¹æ³•ä¸€ï¼šcover-view"><a href="#æ–¹æ³•ä¸€ï¼šcover-view" class="headerlink" title="æ–¹æ³•ä¸€ï¼šcover-view"></a>æ–¹æ³•ä¸€ï¼šcover-view</h5><ul>
<li>å°†tooltipç”¨cover-viewæ”¹å†™ï¼Œæ•ˆæœå¦‚ä¸‹<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2Y0MTZjZjhlMjNiZWEwMjNjYTM1M2JhOGExMDM1MDM2MzYyOTIucG5n?x-oss-process=image/format,png" alt="cover-view version0.1 æˆªå›¾"></li>
<li>çœ‹ä¸Šå»ï¼Œæ˜¯è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œä¸”tooltipåçš„ç°è‰²èƒŒæ™¯ä¸èƒ½æ»‘åŠ¨äº†ï¼Œã€å¦ˆè€¶ï¼Œå¥½æ£’ï¼</li>
<li>ä½†æ˜¯ï¼Œè¿™äº§ç”Ÿäº†ä¸€ä¸ªï¼š<strong>å½“æ–‡æœ¬è¶…å‡ºtooltipå®½åº¦æ—¶ï¼Œscroll-y: autoï¼Œå¤±æ•ˆäº†ï¼Œæº¢å‡ºéƒ¨åˆ†è¢«ç›´æ¥æˆªå–</strong></li>
<li>ç½ªé­ç¥¸é¦–å°±æ˜¯å®ƒ<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2M5ZDljYjZiZTQ0ZGY3YmJmNmRlMjAxNDM1ZmYzOTJjNDMxNDMucG5n?x-oss-process=image/format,png" alt="coverå†…ç½®æ ·å¼"></li>
</ul>
</li>
<li>é‚£æˆ‘ä»¬å¯ä»¥ï¼š<ul>
<li>åœ¨tooltipåˆ†æ®µå†…å®¹ä¸­åŠ ä¸Š  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.modal-layer-content-rule</span> &#123;</span><br><span class="line">    <span class="attribute">white-space</span>: pre-wrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>åœ¨å†…å®¹wrapperä¸­åŠ ä¸Š  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.modal-layer-content</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: scroll;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>å®Œç¾è§£å†³<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2FhZjRkMDAyODdjZGI4M2Y0NWRhMGVkOTg3Mzc5MGNhNDQxMjkucG5n?x-oss-process=image/format,png" alt="cover-viewè§£å†³å›¾"><h5 id="æ–¹æ³•äºŒï¼šwx-canvasToTempFilePath"><a href="#æ–¹æ³•äºŒï¼šwx-canvasToTempFilePath" class="headerlink" title="æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath"></a>æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath</h5></li>
</ul>
</li>
</ul>
</li>
<li>é¦–å…ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œå®˜æ–¹å…³äºcanvasç±»å‹æœ‰ä¸¤ç§<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2E4ZjJmNjA5OGYxNmQ4MzY3NWJiN2I3OWY0ZDM1NWM1MTAwMDg3LnBuZw?x-oss-process=image/format,png" alt="ä¸¤ç§canvasç±»å‹"></li>
<li>æ–°canvas 2Dæ¥å£å°è¯•  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> query = wx.createSelectorQuery().in(<span class="keyword">this</span>)</span><br><span class="line">   query.select(<span class="string">'#myCanvas'</span>)</span><br><span class="line">     .fields(&#123; <span class="attr">node</span>: <span class="literal">true</span>, <span class="attr">size</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">     .exec(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">       <span class="keyword">const</span> canvas = res[<span class="number">0</span>].node</span><br><span class="line">       <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>)</span><br><span class="line">       <span class="keyword">const</span> img = canvas.createImage()</span><br><span class="line">       img.onload = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">         ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">       &#125;</span><br><span class="line">       img.src = <span class="string">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span></span><br><span class="line">       <span class="comment">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class="line">       <span class="built_in">console</span>.log(ctx.getImageData(<span class="number">0</span>, <span class="number">0</span>, <span class="number">150</span>, <span class="number">100</span>).data)</span><br><span class="line">     &#125;)</span><br></pre></td></tr></table></figure>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">type</span>=<span class="string">"2d"</span> <span class="attr">id</span>=<span class="string">"myCanvas"</span> <span class="attr">canvas-id</span>=<span class="string">"myCanvas"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>è¿è¡Œæˆªå›¾<img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzE5ZWE3ZGYxYjg2ODUzOWFhNzVhY2E0OTAxYzI2MzU2OTk4NDYucG5n?x-oss-process=image/format,png" alt="canvas2d è¿è¡Œæˆªå›¾"></li>
<li>ç¬¬äºŒç§æ—§canvas  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ctx = wx.createCanvasContext(<span class="string">'myCanvas'</span>)</span><br><span class="line">   wx.getImageInfo(&#123;</span><br><span class="line">       src: <span class="string">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span>,</span><br><span class="line">       success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">'res'</span>, res)</span><br><span class="line">         <span class="keyword">const</span> poster = res.path                                  </span><br><span class="line">         ctx.drawImage(poster, <span class="number">0</span>, <span class="number">0</span>, <span class="number">150</span>, <span class="number">100</span>)</span><br><span class="line">         ctx.draw()</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;)</span><br><span class="line">     <span class="comment">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class="line">     wx.canvasGetImageData(&#123;</span><br><span class="line">       canvasId: <span class="string">'myCanvas'</span>,</span><br><span class="line">       x: <span class="number">0</span>,</span><br><span class="line">       y: <span class="number">0</span>,</span><br><span class="line">       width: <span class="number">150</span>,</span><br><span class="line">       height: <span class="number">100</span>,</span><br><span class="line">       success(res) &#123;</span><br><span class="line">         <span class="built_in">console</span>.log(res.width) <span class="comment">// 150</span></span><br><span class="line">         <span class="built_in">console</span>.log(res.height) <span class="comment">// 100</span></span><br><span class="line">         <span class="built_in">console</span>.log(res.data <span class="keyword">instanceof</span> <span class="built_in">Uint8ClampedArray</span>) <span class="comment">// true</span></span><br><span class="line">         <span class="built_in">console</span>.log(res.data) <span class="comment">// 150 * 100 * 4</span></span><br><span class="line">         <span class="built_in">console</span>.log(res.data.length) <span class="comment">// 150 * 100 * 4</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;)</span><br></pre></td></tr></table></figure>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"myCanvas"</span> <span class="attr">canvas-id</span>=<span class="string">"myCanvas"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>è¿è¡Œæˆªå›¾<img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzU4NTg5MzQ4MDc3Njk3OTA0OTRmZmIzOWRiNDdjMWRmNjk4ODQucG5n?x-oss-process=image/format,png" alt="æ—§canvas"></li>
<li>è™½ç„¶ä¸¤ç§æ–¹æ³•ï¼Œéƒ½èƒ½å®ç°å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œä½†æ–°ç‰ˆçš„è¿›è¡Œäº†createImageï¼Œå°†å…¶æ‰“å°çš„è¯ï¼Œå…¶å®å°±æ˜¯æ–°å»ºäº†ä¸€ä¸ªimgæ ‡ç­¾ï¼Œå¹¶å°†imgæ ‡ç­¾çš„ä¸œè¥¿ç»˜åˆ¶è¿›canvas<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzFjMjE1NzMzZTRkY2UzNGZiNzI4NDFhZWEyMDc0ZWIwMjQ1OTQucG5n?x-oss-process=image/format,png" alt="img console"></li>
<li>ä¸ºä»€ä¹ˆå¾®ä¿¡å®˜æ–¹ä¼šä»…æ”¯æŒä»¥ä¸‹æ–¹å¼è¿›è¡Œæ–°ç‰ˆcanvas2d å›¾ç‰‡çš„ç»˜åˆ¶ï¼Œè€ƒè™‘æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JhYWQ1OWRhNDI4M2FjZmViZTY1NGQ0ZWZiNTAxZDZlMjAxMjE2LnBuZw?x-oss-process=image/format,png" alt="ç»å…¸æŠ¥é”™"></li>
</ul>
</li>
<li>ç°åœ¨æˆ‘ä»¬è¦å°†canvasçš„å†…å®¹å¯¼æˆå›¾ç‰‡ï¼ŒåŒæ ·åˆ†æˆæ–°æ—§ä¸¤ç‰ˆ</li>
<li>ä¸»è¦æ€è·¯éƒ½æ˜¯ï¼šåœ¨wxmlä¸­ï¼Œå¦‚æœcanvasç»˜åˆ¶å›¾ç‰‡æ²¡æœ‰å®Œæˆï¼Œåˆ™æ˜¾ç¤ºcanvaså†…å®¹ï¼Œç»˜åˆ¶å®Œæˆåï¼Œå°±åˆ©ç”¨canvasToTempFilePathï¼Œå°†å›¾å±‚å†…å®¹ç”ŸæˆæŒ‡å®šå¤§å°å›¾ç‰‡ï¼Œæ˜¾ç¤ºimage<ul>
<li>canvas2d   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> that = <span class="keyword">this</span></span><br><span class="line">   <span class="keyword">const</span> query = wx.createSelectorQuery().in(<span class="keyword">this</span>)</span><br><span class="line">   query.select(<span class="string">'#myCanvas'</span>)</span><br><span class="line">     .fields(&#123; <span class="attr">node</span>: <span class="literal">true</span>, <span class="attr">size</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">     .exec(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">       <span class="keyword">const</span> canvas = res[<span class="number">0</span>].node</span><br><span class="line">       <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>)</span><br><span class="line">       <span class="keyword">const</span> img = canvas.createImage()</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'img'</span>, img)</span><br><span class="line">       img.onload = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">         ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">           wx.canvasToTempFilePath(&#123;</span><br><span class="line">             x: <span class="number">0</span>,</span><br><span class="line">             y: <span class="number">0</span>,</span><br><span class="line">             width: <span class="number">100</span>,</span><br><span class="line">             height: <span class="number">100</span>,</span><br><span class="line">             destWidth: <span class="number">100</span>,</span><br><span class="line">             destHeight: <span class="number">100</span>,</span><br><span class="line">             canvas: canvas,</span><br><span class="line">             success(res) &#123;</span><br><span class="line">               that.setData(&#123;</span><br><span class="line">                 imgPath: res.tempFilePath</span><br><span class="line">               &#125;)</span><br><span class="line">             &#125;,</span><br><span class="line">             fail(err) &#123;</span><br><span class="line">               <span class="built_in">console</span>.log(<span class="string">'err'</span>, err)</span><br><span class="line">             &#125;</span><br><span class="line">           &#125;)</span><br><span class="line">       &#125;</span><br><span class="line">       img.src = <span class="string">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span></span><br><span class="line">       <span class="comment">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class="line">       <span class="built_in">console</span>.log(ctx.getImageData(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>).data)</span><br><span class="line">     &#125;)</span><br></pre></td></tr></table></figure>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;!imgPath&#125;&#125;"</span> <span class="attr">type</span>=<span class="string">"2d"</span> <span class="attr">id</span>=<span class="string">"myCanvas"</span> <span class="attr">canvas-id</span>=<span class="string">"myCanvas"</span> <span class="attr">style</span>=<span class="string">"width: 330px;height: 340px;"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">wx:else</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;imgPath&#125;&#125;"</span> <span class="attr">style</span>=<span class="string">"width: 330px;height: 340px;"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>canvas2d éœ€è¦è¸©å¾—å‘æ˜¯ï¼šå®ƒçš„å®˜æ–¹æ–‡æ¡£ğŸ™ƒ<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UwM2Q1ZDg0YzYyNmI0NzlmZjBjOTlmNzA1YmRhYjg5NDc5MjcucG5n?x-oss-process=image/format,png" alt="canvas2d è½¬å›¾ç‰‡è¯¯å¯¼"></li>
<li>å°è¯•ä¸‹æ¥ï¼Œä¼š<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxMjRiY2Q3ZmNjYWI5ODBlNDdkMTk2YTMyZGQyODI4NDUzODcucG5n?x-oss-process=image/format,png" alt="ctx.drawæŠ¥é”™"></li>
</ul>
</li>
<li>é‚£æˆ‘ä»¬å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxODk5NWFiNDY4N2IwYmZlYzhjZTZkZWU2ZWQxYmZjMTA1MTY1LnBuZw?x-oss-process=image/format,png" alt="canvas2d tempathæ­£ç¡®å®åŠ›">è¿™æ‰æ˜¯ç¬¦åˆæˆ‘ä»¬éœ€è¦</li>
</ul>
</li>
</ul>
</li>
<li>è¿è¡Œæˆªå›¾<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JmMzVlMzY4YzRjMmRhYTgxNTA0NzM0YTIxZGMxM2I2NDYwNzIucG5n?x-oss-process=image/format,png" alt="canvas2dè¿è¡Œæˆªå›¾"></li>
</ul>
</li>
</ul>
</li>
<li>æ—§ç‰ˆcanvas  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ctx = wx.createCanvasContext(<span class="string">'myCanvas'</span>)</span><br><span class="line"><span class="keyword">const</span> that = <span class="keyword">this</span></span><br><span class="line">wx.getImageInfo(&#123;</span><br><span class="line">  src: <span class="string">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span>,</span><br><span class="line">  success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'res'</span>, res)</span><br><span class="line">    <span class="keyword">const</span> poster = res.path</span><br><span class="line">    ctx.drawImage(poster, <span class="number">0</span>, <span class="number">0</span>, <span class="number">150</span>, <span class="number">100</span>)</span><br><span class="line">    ctx.draw(<span class="literal">false</span>, () =&gt; &#123;</span><br><span class="line">      wx.canvasToTempFilePath(&#123;</span><br><span class="line">        x: <span class="number">0</span>,</span><br><span class="line">        y: <span class="number">0</span>,</span><br><span class="line">        width: <span class="number">100</span>,</span><br><span class="line">        height: <span class="number">100</span>,</span><br><span class="line">        destWidth: <span class="number">100</span>,</span><br><span class="line">        destHeight: <span class="number">100</span>,</span><br><span class="line">        canvasId: <span class="string">"myCanvas"</span>,</span><br><span class="line">        success(res) &#123;</span><br><span class="line">          that.setData(&#123;</span><br><span class="line">            imgPath: res.tempFilePath</span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="built_in">console</span>.log(res.tempFilePath)</span><br><span class="line">        &#125;,</span><br><span class="line">        fail(err) &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'err'</span>, err)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class="line">    wx.canvasGetImageData(&#123;</span><br><span class="line">      canvasId: <span class="string">'myCanvas'</span>,</span><br><span class="line">      x: <span class="number">0</span>,</span><br><span class="line">      y: <span class="number">0</span>,</span><br><span class="line">      width: <span class="number">150</span>,</span><br><span class="line">      height: <span class="number">100</span>,</span><br><span class="line">      success(res) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res.width) <span class="comment">// 150</span></span><br><span class="line">        <span class="built_in">console</span>.log(res.height) <span class="comment">// 100</span></span><br><span class="line">        <span class="built_in">console</span>.log(res.data <span class="keyword">instanceof</span> <span class="built_in">Uint8ClampedArray</span>) <span class="comment">// true</span></span><br><span class="line">        <span class="built_in">console</span>.log(res.data) <span class="comment">// 150 * 100 * 4</span></span><br><span class="line">        <span class="built_in">console</span>.log(res.data.length) <span class="comment">// 150 * 100 * 4</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;!imgPath&#125;&#125;"</span> <span class="attr">id</span>=<span class="string">"myCanvas"</span> <span class="attr">canvas-id</span>=<span class="string">"myCanvas"</span> <span class="attr">style</span>=<span class="string">"width: 330px;height: 340px;"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">wx:else</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;imgPath&#125;&#125;"</span> <span class="attr">style</span>=<span class="string">"width: 330px;height: 340px;"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è¿è¡Œæˆªå›¾<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2EzZTRiYTBkYzc2NDgzYTM1NTYxZDcwNDUzNzZkNjZmNDU5MTgucG5n?x-oss-process=image/format,png" alt="æ—§ç‰ˆcanvasè¿è¡Œæˆªå›¾"><h4 id="å†™åœ¨åé¢"><a href="#å†™åœ¨åé¢" class="headerlink" title="å†™åœ¨åé¢"></a>å†™åœ¨åé¢</h4></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>æ„Ÿè°¢<a href="https://github.com/skadieyes" target="_blank" rel="noopener">Skadyå®è´</a>åœ¨æ¢è®¨é—®é¢˜ä¸­ç»™äºˆçš„å¸®åŠ©ï¼Œæ¬¢è¿å¤§å®¶å»githubæ‰¾å¥¹ç©ğŸ‘ˆ</li>
<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>
</ul>
<hr>
</p>
      <div class="post-button"><a class="btn" href="/2020/04/05/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-fix%20canvas%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6%E6%9C%80%E9%A1%B6%E5%B1%82/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/04/05/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E6%B0%94%E6%B3%A1%E6%A1%86%20Popover/">Popover</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-04-05 | <i class="fa fa-folder-o"></i> <a class="category-link" href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">å¾®ä¿¡å°ç¨‹åº</a></span>
      <p><h4 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h4><ul>
<li>è®°å½•åŸºäº<a href="https://developers.weixin.qq.com/community/develop/doc/000e4e7103c3c090e517e0cdb5b806" target="_blank" rel="noopener">å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†</a>å®ç°ä¸­äº§ç”Ÿçš„é—®é¢˜åŠæ€è€ƒ</li>
</ul>
<hr>
<h4 id="é—®é¢˜æˆªå›¾"><a href="#é—®é¢˜æˆªå›¾" class="headerlink" title="é—®é¢˜æˆªå›¾"></a>é—®é¢˜æˆªå›¾</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzlkMGY1NmUxOTVkNzFjMjAyYzVkYzI0OGMxMzg0NmUxMTQ3MTQucG5n?x-oss-process=image/format,png" alt="popoveré—®é¢˜æˆªå›¾"></p>
<h4 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><ul>
<li>æ¨¡æ‹Ÿå™¨æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†åœ¨çœŸæœºä¸Šç‚¹å‡»åï¼Œæ°”æ³¡æ¡†çš„ç®­å¤´å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œä¸”ç‚¹å‡»åŒä¸€çº§åˆ«åŒºåŸŸï¼Œèƒ½åˆ©ç”¨è¦†ç›–æ¶ˆé™¤ç®­å¤´ã€‚ã€æ˜¯ä¸æ˜¯ä¸€ä¸ªå¾ˆå¯çˆ±çš„bugï¼Ÿ</li>
</ul>
<h4 id="é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•"><a href="#é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•" class="headerlink" title="é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•"></a>é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•</h4><ul>
<li><p>å®šä½é—®é¢˜å‘ç”Ÿçš„åŸå› èŒƒå›´</p>
<ul>
<li>æ ·å¼<ul>
<li>æ ·å¼åœ¨åˆ¤æ–­æ˜¾ç¤ºæ¡ä»¶(wx:if=â€â€œ)ç”Ÿæ•ˆåï¼Œä»ç„¶æ¸²æŸ“</li>
<li>å¦å®šåŸå› <ul>
<li>æŸ¥è¯¢ä»£ç å‘ç°ï¼Œæ•´ä¸ªæ ·å¼èƒŒæ™¯çš„è®¾å®šæ˜¯åœ¨::beforeä¼ªå…ƒç´ é€‰æ‹©å™¨ä¸­</li>
<li>ä¸”æ˜¾ç¤ºæ¡ä»¶ç”Ÿæ•ˆï¼Œåœ¨è°ƒè¯•å™¨ä¸­å·²æ²¡æœ‰è¯¥å…ƒç´ ï¼Œä½†ä»æ˜¾ç¤º</li>
</ul>
</li>
</ul>
</li>
<li>é€»è¾‘<ul>
<li>ä¼šä¸ä¼šæ˜¯ç»„ä»¶åœ¨æ¸²æŸ“æ—¶ï¼Œå¤šæ¸²æŸ“ä¸€ä»½ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ¤æ–­æ¡ä»¶è¿›è¡Œå¼€å…³æ—¶ï¼Œåªæ˜¯å¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œäº†æ“ä½œ</li>
<li>æ€€ç–‘ä¾æ®<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzk5ZjcwMDAwZmViM2IwYzc0MWJmNjFiYzE5YTUwMDIxMjYyMTI3LnBuZw?x-oss-process=image/format,png" alt="popoveré—®é¢˜ä¾æ®æˆªå›¾"></li>
<li>ä¸Šå›¾å¯è§ï¼šåœ¨popoverç»„ä»¶ä¸‹ï¼Œæœ‰2ä¸ªé€šè¿‡&lt;slot&gt;æ’å…¥çš„ç›¸åŒå†…å®¹</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>å¼€å§‹è§£å†³é—®é¢˜</p>
<ul>
<li>æŸ¥è¯¢å®˜æ–¹å…³äº<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html" target="_blank" rel="noopener">slot</a>æ–¹é¢çš„ä»‹ç»<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JjMTE0ZmI0YTdhOWZkY2ZlYzU3ZDE5ZWQyYWY0YzI3MzE1NTU4LnBuZw?x-oss-process=image/format,png" alt="å®˜æ–¹slotåŸºç¡€ä¾‹å­"></li>
</ul>
</li>
<li>åŸºäºå®˜æ–¹åŸºç¡€ä»£ç ï¼Œå¤ç°é—®é¢˜<ul>
<li>äº§ç”Ÿä¸€ä¸ªchild-tagç»„ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­ç¼–å†™  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/child-tag.js.js</span></span><br><span class="line">Component(&#123;</span><br><span class="line">  options: &#123;</span><br><span class="line">    multipleSlots: <span class="literal">true</span> <span class="comment">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  properties: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  relations: &#123;</span><br><span class="line">    <span class="string">'./component-tag-name'</span>: &#123;</span><br><span class="line">      type: <span class="string">'parent'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  data: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  methods: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li>ä¸component-tag-nameç»‘å®šå½¢æˆçˆ¶å­ç»„ä»¶  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/component-tag-name.js</span></span><br><span class="line">Component(&#123;</span><br><span class="line">  options: &#123;</span><br><span class="line">    multipleSlots: <span class="literal">true</span> <span class="comment">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class="line">  &#125;,</span><br><span class="line">  relations: &#123;</span><br><span class="line">    <span class="string">'./child-tag'</span>: &#123;</span><br><span class="line">      type: <span class="string">'child'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  properties: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  data: &#123;</span><br><span class="line">    visible: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li>å¹¶å°†index.htmlä¸­è¿›è¡Œè°ƒç”¨  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡ç‰ˆ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">bindtap</span>=<span class="string">"onTap"</span>&gt;</span>222<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">my-component</span> <span class="attr">id</span>=<span class="string">"component"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">view</span> <span class="attr">slot</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">			è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name="content"ä¸­çš„å†…å®¹</span><br><span class="line">			<span class="tag">&lt;<span class="name">child-component</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">view</span> <span class="attr">slot</span>=<span class="string">"child"</span>&gt;</span>è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name="child"ä¸­çš„å†…å®¹<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">child-component</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>ä½†æ˜¯å…¶ç»“æ„æ ‘ä»ç„¶éå¸¸æ­£å¸¸ï¼Œå¹¶æ²¡æœ‰å‡ºç°é‚£ä¸ªæ‰€è°“çš„â€æ‹·è´â€ç»„ä»¶<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzcwNTRhNjJkYmM2MGEyNmU5ZGI1ODYzNzNjOGY2OTgyMzg3NTI0LnBuZw?x-oss-process=image/format,png" alt="æ”¹å†™v1.1åçš„ç»“æ„æ ‘æˆªå›¾"></li>
<li>ä»”ç»†å¤ç°äº†å‡ æ¬¡ï¼Œå‘ç°ï¼šå¤šå‡ºæ¥çš„é‚£ä¸ªç»„ä»¶ä¼šæœ‰æ‰€å»¶è¿Ÿã€‚æŠ“ä½è¿™ä¸ªé—®é¢˜ï¼Œæƒ³åˆ°æˆ‘ä»¬åœ¨onReadyä¸­ï¼Œæ³¨å†Œäº†è¯¥ç»„ä»¶ï¼Œäºæ˜¯ï¼Œç»§ç»­æ¨¡æ‹Ÿ</li>
</ul>
</li>
<li>ä¿®æ”¹index.jsä»£ç ï¼Œå¹¶åœ¨component-tag-nameç»„ä»¶æ³¨å†ŒonTapæ–¹æ³•ï¼Œæ§åˆ¶æ˜¾éš  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">onReady() &#123;</span><br><span class="line">  <span class="keyword">this</span>.component = <span class="keyword">this</span>.selectComponent(<span class="string">'#component'</span>)</span><br><span class="line">&#125;,</span><br><span class="line">onTap() &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'onTap'</span>)</span><br><span class="line">  wx.createSelectorQuery().select(<span class="string">'#component'</span>).boundingClientRect(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶ popover ä¸­çš„ onDisplay æ–¹æ³•</span></span><br><span class="line">      <span class="keyword">this</span>.component.onTap();</span><br><span class="line">  &#125;).exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æœ€ç»ˆå¤ç°<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmZjQ3OTNhMjUwYTNjMzlhYjBlOGQxMGJhYTllZmI2NDc1NjIyLnBuZw?x-oss-process=image/format,png" alt="å®˜æ–¹æ¨¡æ‹Ÿæœ€ç»ˆè¿è¡Œæˆªå›¾"></li>
</ul>
</li>
</ul>
</li>
<li>å¾—å‡ºé—®é¢˜æ¥æºï¼š<ul>
<li>åœ¨ç»„ä»¶ä¸­è¿›è¡Œäº†ä¸€æ¬¡setData</li>
</ul>
</li>
<li>æ€è€ƒèƒŒåé—®é¢˜<ul>
<li>åœ¨ç»„ä»¶ä¸­setDataä¸ºä»€ä¹ˆä¼šâ€æ‹·è´â€œä¸€ä»½ç›¸åŒçš„åœ¨é¡µé¢çº§wxmlä¸­ï¼Ÿ</li>
<li>çŒœæƒ³ä¸€ï¼šä»<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88" target="_blank" rel="noopener">WXSå“åº”äº‹ä»¶</a>ä¸­ï¼Œæˆ‘éšéšå¾—åˆ°äº†ç­”æ¡ˆ</li>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzZlYWJjYjdjOTliMzAxNWMwOGQwZmM2YWM3ZmMxMGMzNDU5NDAxLnBuZw?x-oss-process=image/format,png" alt="wxsç›¸åº”äº‹ä»¶"></li>
<li>æˆ‘ä»¬åœ¨é¡µé¢çº§é€šè¿‡selectComponentå®ä¾‹åŒ–ç»„ä»¶ï¼Œå¯¹é€‰ä¸­çš„ç»„ä»¶è¿›è¡Œæ“ä½œï¼Œå®˜æ–¹å¯ä»¥é€šè¿‡æ‹·è´ä¸€ä»½ç›¸åŒçš„ç»„ä»¶ï¼Œä½¿æˆ‘ä»¬ä¾¿æ·çš„å°†äº‹ä»¶çš„å¤„ç†ä»2æ¬¡çš„é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ï¼Œå‡å°‘åˆ°ç›´æ¥å¯¹é¡µé¢ä¸Šå…ƒç´ è¿›è¡Œæ“ä½œï¼Œå³ä¸€æ¬¡é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ã€‚</li>
<li>çŒœæƒ³äºŒï¼šé—®é¢˜å±‚é¢æ˜¯åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­çš„wxmlï¼Œæ¸²æŸ“æ–¹å¼å¯¹äºè¿™ç§æƒ…å†µå°±æ˜¯è¿™æ ·å¤„ç†çš„ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>å®˜æ–¹å·²ç»™å‡ºé—®é¢˜åŸå› </p>
<ul>
<li><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzJkMWVkZmYyNWIwM2YxZDU2ZGVjYjZhM2NkYjAwMGU5NTE5ODQucG5n?x-oss-process=image/format,png" alt="wxmlé¢æ¿"></li>
</ul>
</li>
</ul>
<h4 id="å¦‚ä½•è§£å†³é—®é¢˜"><a href="#å¦‚ä½•è§£å†³é—®é¢˜" class="headerlink" title="å¦‚ä½•è§£å†³é—®é¢˜"></a>å¦‚ä½•è§£å†³é—®é¢˜</h4><ul>
<li>åœ¨popoverä»¥åŠpopover-itemåŠ å…¥  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">options: &#123;</span><br><span class="line">		    multipleSlots: <span class="literal">true</span> <span class="comment">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class="line">		  &#125;,</span><br></pre></td></tr></table></figure></li>
<li>å°±å¯ä»¥è§£å†³äº†ã€‚æœ€åå»ºè®®slotä¸­å¯ä»¥å†™ä¸Šnameè¿™æ ·ä»£ç å¯èƒ½ä¼šæ›´æ˜“è¯»ã€‚<h4 id="å†™åœ¨åé¢"><a href="#å†™åœ¨åé¢" class="headerlink" title="å†™åœ¨åé¢"></a>å†™åœ¨åé¢</h4></li>
<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>
</ul>
<hr>
</p>
      <div class="post-button"><a class="btn" href="/2020/04/05/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E6%B0%94%E6%B3%A1%E6%A1%86%20Popover/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>




<footer>
  <div>
  Copyright &copy; 2019.<a href="/">Be kind.</a><br>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme <a href="https://lx.js.org" target="_blank">Lx</a><br>Be kind.
  </div>
</footer>

  </div>
</div>
</div>

<button class="hamburger hamburger--arrow-r" type="button">
    <div class="hamburger-box">
      <div class="hamburger-inner"></div>
    </div>
</button> 
<div class="menu visibility">
  <div class="menu-head">
    <span class="layer">
      <div class="col">
        <div class="row for-pic">
          <div class="profile-pic">
            <a href="/"><img src="/images/avatar.jpeg" alt="EllePeng"/></a>
          </div>
        </div>
        <div class="row for-name">
          <p>EllePeng</p>
          <span class="tagline">stay awesome.</span>
        </div>
      </div>
    </span>
  </div>
  <nav class="menu-container">
  <ul class="menu-items">
    <li><a href="/"><i class="fa fa-home fa-fw"></i>Home</a></li>
    <li><a href="/archives/"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
    
    
    <li class="has-sub"><span class="dropdown-heading">
      <i class="fa fa-link fa-fw"></i>Friends</span>
        <ul>
          <li> <a href="https://blog.csdn.net/Elle_Peng" target="_blank">csdn</a></li>
        </ul>
    </li>
  </ul>
  </nav>
</div>

<div class="gototop js-top">
  <a href="#" class="js-gotop"><i class="fa fa-arrow-up"></i></a>
</div>
<script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.easing.min.js"></script>
<script>
(function () {
	"use strict";
	var goToTop = function() {
		$(".js-gotop").on("click", function(event){
			event.preventDefault();
			$("html, body").animate({
				scrollTop: $("html").offset().top
			}, 500, "easeInOutExpo");
			return false;
		});
		$(window).scroll(function(){
			var $win = $(window);
			if ($win.scrollTop() > 200) {
				$(".js-top").addClass("active");
			} else {
				$(".js-top").removeClass("active");
			}
		});
	};
	$(function(){
		goToTop();
	});
}());
</script>
<script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/local.search.js"></script>

</body>
</html>
