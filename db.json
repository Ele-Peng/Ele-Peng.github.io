{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"themes/landscape/source/fancybox/blank.gif","path":"fancybox/blank.gif","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_loading.gif","path":"fancybox/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_loading@2x.gif","path":"fancybox/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_overlay.png","path":"fancybox/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_sprite.png","path":"fancybox/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_sprite@2x.png","path":"fancybox/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.css","path":"fancybox/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.js","path":"fancybox/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.pack.js","path":"fancybox/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/landscape/source/js/script.js","path":"js/script.js","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.eot","path":"css/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/fancybox_buttons.png","path":"fancybox/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/fonts/FontAwesome.otf","path":"css/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.woff","path":"css/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.css","path":"fancybox/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.js","path":"fancybox/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-media.js","path":"fancybox/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.js","path":"fancybox/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.css","path":"fancybox/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.ttf","path":"css/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.svg","path":"css/fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/images/banner.jpg","path":"css/images/banner.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/favicon.ico","path":"favicon.ico","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/css/base.styl","path":"css/base.styl","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/css/main.min.css","path":"css/main.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/footer-l.jpeg","path":"images/footer-l.jpeg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/footer-r.jpeg","path":"images/footer-r.jpeg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/post_cover.jpeg","path":"images/post_cover.jpeg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/js/jquery.easing.min.js","path":"js/jquery.easing.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/js/jquery.jside.menu.js","path":"js/jquery.jside.menu.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/js/local.search.js","path":"js/local.search.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/cover.jpeg","path":"images/cover.jpeg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/css/page_style/page_style.styl","path":"css/page_style/page_style.styl","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/css/menu/button.styl","path":"css/menu/button.styl","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/css/menu/menu.styl","path":"css/menu/menu.styl","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/avatar.jpeg","path":"images/avatar.jpeg","modified":0,"renderable":1}],"Cache":[{"_id":"themes/landscape/Gruntfile.js","hash":"71adaeaac1f3cc56e36c49d549b8d8a72235c9b9","modified":1585988623725},{"_id":"themes/landscape/.gitignore","hash":"58d26d4b5f2f94c2d02a4e4a448088e4a2527c77","modified":1585988623725},{"_id":"themes/landscape/README.md","hash":"37fae88639ef60d63bd0de22314d7cc4c5d94b07","modified":1585988623726},{"_id":"themes/landscape/LICENSE","hash":"c480fce396b23997ee23cc535518ffaaf7f458f8","modified":1585988623726},{"_id":"themes/landscape/_config.yml","hash":"79ac6b9ed6a4de5a21ea53fc3f5a3de92e2475ff","modified":1585988623726},{"_id":"themes/landscape/package.json","hash":"544f21a0b2c7034998b36ae94dba6e3e0f39f228","modified":1585988623734},{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":1585988477655},{"_id":"themes/landscape/languages/de.yml","hash":"3ebf0775abbee928c8d7bda943c191d166ded0d3","modified":1585988623726},{"_id":"themes/landscape/languages/es.yml","hash":"76edb1171b86532ef12cfd15f5f2c1ac3949f061","modified":1585988623727},{"_id":"themes/landscape/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1585988623726},{"_id":"themes/landscape/languages/fr.yml","hash":"415e1c580ced8e4ce20b3b0aeedc3610341c76fb","modified":1585988623727},{"_id":"themes/landscape/languages/ja.yml","hash":"a73e1b9c80fd6e930e2628b393bfe3fb716a21a9","modified":1585988623727},{"_id":"themes/landscape/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1585988623727},{"_id":"themes/landscape/languages/ko.yml","hash":"881d6a0a101706e0452af81c580218e0bfddd9cf","modified":1585988623727},{"_id":"themes/landscape/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1585988623727},{"_id":"themes/landscape/languages/pt.yml","hash":"57d07b75d434fbfc33b0ddb543021cb5f53318a8","modified":1585988623727},{"_id":"themes/landscape/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1585988623728},{"_id":"themes/landscape/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1585988623727},{"_id":"themes/landscape/languages/zh-TW.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1585988623728},{"_id":"themes/landscape/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1585988623732},{"_id":"themes/landscape/layout/index.ejs","hash":"aa1b4456907bdb43e629be3931547e2d29ac58c8","modified":1585988623732},{"_id":"themes/landscape/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1585988623732},{"_id":"themes/landscape/layout/layout.ejs","hash":"f155824ca6130080bb057fa3e868a743c69c4cf5","modified":1585988623733},{"_id":"themes/landscape/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1585988623733},{"_id":"themes/landscape/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1585988623733},{"_id":"themes/landscape/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1585988623733},{"_id":"themes/landscape/scripts/fancybox.js","hash":"aa411cd072399df1ddc8e2181a3204678a5177d9","modified":1585988623734},{"_id":"themes/landscape/layout/_partial/after-footer.ejs","hash":"d0d753d39038284d52b10e5075979cc97db9cd20","modified":1585988623728},{"_id":"themes/landscape/layout/_partial/archive-post.ejs","hash":"c7a71425a946d05414c069ec91811b5c09a92c47","modified":1585988623728},{"_id":"themes/landscape/layout/_partial/archive.ejs","hash":"950ddd91db8718153b329b96dc14439ab8463ba5","modified":1585988623729},{"_id":"themes/landscape/layout/_partial/article.ejs","hash":"c4c835615d96a950d51fa2c3b5d64d0596534fed","modified":1585988623729},{"_id":"themes/landscape/layout/_partial/footer.ejs","hash":"93518893cf91287e797ebac543c560e2a63b8d0e","modified":1585988623729},{"_id":"themes/landscape/layout/_partial/gauges-analytics.ejs","hash":"aad6312ac197d6c5aaf2104ac863d7eba46b772a","modified":1585988623729},{"_id":"themes/landscape/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1585988623729},{"_id":"themes/landscape/layout/_partial/head.ejs","hash":"5abf77aec957d9445fc71a8310252f0013c84578","modified":1585988623729},{"_id":"themes/landscape/layout/_partial/header.ejs","hash":"7e749050be126eadbc42decfbea75124ae430413","modified":1585988623730},{"_id":"themes/landscape/layout/_partial/mobile-nav.ejs","hash":"e952a532dfc583930a666b9d4479c32d4a84b44e","modified":1585988623730},{"_id":"themes/landscape/layout/_widget/archive.ejs","hash":"beb4a86fcc82a9bdda9289b59db5a1988918bec3","modified":1585988623731},{"_id":"themes/landscape/layout/_partial/sidebar.ejs","hash":"930da35cc2d447a92e5ee8f835735e6fd2232469","modified":1585988623731},{"_id":"themes/landscape/layout/_widget/category.ejs","hash":"dd1e5af3c6af3f5d6c85dfd5ca1766faed6a0b05","modified":1585988623731},{"_id":"themes/landscape/layout/_widget/recent_posts.ejs","hash":"0d4f064733f8b9e45c0ce131fe4a689d570c883a","modified":1585988623731},{"_id":"themes/landscape/layout/_widget/tagcloud.ejs","hash":"b4a2079101643f63993dcdb32925c9b071763b46","modified":1585988623732},{"_id":"themes/landscape/layout/_widget/tag.ejs","hash":"2de380865df9ab5f577f7d3bcadf44261eb5faae","modified":1585988623732},{"_id":"themes/landscape/source/css/_extend.styl","hash":"222fbe6d222531d61c1ef0f868c90f747b1c2ced","modified":1585988623734},{"_id":"themes/landscape/source/css/_variables.styl","hash":"628e307579ea46b5928424313993f17b8d729e92","modified":1585988623738},{"_id":"themes/landscape/source/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1585988623750},{"_id":"themes/landscape/source/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1585988623750},{"_id":"themes/landscape/source/css/style.styl","hash":"a70d9c44dac348d742702f6ba87e5bb3084d65db","modified":1585988623749},{"_id":"themes/landscape/source/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1585988623750},{"_id":"themes/landscape/source/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1585988623751},{"_id":"themes/landscape/source/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1585988623751},{"_id":"themes/landscape/source/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1585988623751},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.css","hash":"aaa582fb9eb4b7092dc69fcb2d5b1c20cca58ab6","modified":1585988623753},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.js","hash":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed","modified":1585988623754},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.pack.js","hash":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1585988623754},{"_id":"themes/landscape/source/js/script.js","hash":"2876e0b19ce557fca38d7c6f49ca55922ab666a1","modified":1585988623755},{"_id":"themes/landscape/layout/_partial/post/category.ejs","hash":"c6bcd0e04271ffca81da25bcff5adf3d46f02fc0","modified":1585988623730},{"_id":"themes/landscape/layout/_partial/post/date.ejs","hash":"6197802873157656e3077c5099a7dda3d3b01c29","modified":1585988623730},{"_id":"themes/landscape/layout/_partial/post/nav.ejs","hash":"16a904de7bceccbb36b4267565f2215704db2880","modified":1585988623731},{"_id":"themes/landscape/layout/_partial/post/gallery.ejs","hash":"3d9d81a3c693ff2378ef06ddb6810254e509de5b","modified":1585988623730},{"_id":"themes/landscape/layout/_partial/post/tag.ejs","hash":"2fcb0bf9c8847a644167a27824c9bb19ac74dd14","modified":1585988623731},{"_id":"themes/landscape/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1585988623731},{"_id":"themes/landscape/source/css/_partial/archive.styl","hash":"db15f5677dc68f1730e82190bab69c24611ca292","modified":1585988623735},{"_id":"themes/landscape/source/css/_partial/footer.styl","hash":"e35a060b8512031048919709a8e7b1ec0e40bc1b","modified":1585988623736},{"_id":"themes/landscape/source/css/_partial/article.styl","hash":"10685f8787a79f79c9a26c2f943253450c498e3e","modified":1585988623735},{"_id":"themes/landscape/source/css/_partial/header.styl","hash":"85ab11e082f4dd86dde72bed653d57ec5381f30c","modified":1585988623736},{"_id":"themes/landscape/source/css/_partial/comment.styl","hash":"79d280d8d203abb3bd933ca9b8e38c78ec684987","modified":1585988623735},{"_id":"themes/landscape/source/css/_partial/highlight.styl","hash":"bf4e7be1968dad495b04e83c95eac14c4d0ad7c0","modified":1585988623736},{"_id":"themes/landscape/source/css/_partial/mobile.styl","hash":"a399cf9e1e1cec3e4269066e2948d7ae5854d745","modified":1585988623736},{"_id":"themes/landscape/source/css/_partial/sidebar-bottom.styl","hash":"8fd4f30d319542babfd31f087ddbac550f000a8a","modified":1585988623737},{"_id":"themes/landscape/source/css/_partial/sidebar.styl","hash":"404ec059dc674a48b9ab89cd83f258dec4dcb24d","modified":1585988623737},{"_id":"themes/landscape/source/css/_partial/sidebar-aside.styl","hash":"890349df5145abf46ce7712010c89237900b3713","modified":1585988623737},{"_id":"themes/landscape/source/css/_util/grid.styl","hash":"0bf55ee5d09f193e249083602ac5fcdb1e571aed","modified":1585988623737},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.eot","hash":"7619748fe34c64fb157a57f6d4ef3678f63a8f5e","modified":1585988623740},{"_id":"themes/landscape/source/css/_util/mixin.styl","hash":"44f32767d9fd3c1c08a60d91f181ee53c8f0dbb3","modified":1585988623738},{"_id":"themes/landscape/source/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1585988623752},{"_id":"themes/landscape/source/css/fonts/FontAwesome.otf","hash":"b5b4f9be85f91f10799e87a083da1d050f842734","modified":1585988623740},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.woff","hash":"04c3bf56d87a0828935bd6b4aee859995f321693","modified":1585988623745},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1585988623752},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.js","hash":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1585988623752},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-media.js","hash":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1585988623753},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1585988623753},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1585988623753},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.ttf","hash":"7f09c97f333917034ad08fa7295e916c9f72fd3f","modified":1585988623744},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.svg","hash":"46fcc0194d75a0ddac0a038aee41b23456784814","modified":1585988623743},{"_id":"themes/landscape/source/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1585988623749},{"_id":"public/2020/04/04/hello-world/index.html","hash":"c866b18d63d89b157229afce28be282d412d9dc3","modified":1586058603419},{"_id":"public/archives/index.html","hash":"caebb82ac9d859e71124885d823d2f3847d44cc8","modified":1586059761169},{"_id":"public/archives/2020/index.html","hash":"caebb82ac9d859e71124885d823d2f3847d44cc8","modified":1586059761169},{"_id":"public/archives/2020/04/index.html","hash":"caebb82ac9d859e71124885d823d2f3847d44cc8","modified":1586059761169},{"_id":"public/index.html","hash":"001470cb40645a891e99eb8b066a965d325b9c22","modified":1586059761169},{"_id":"public/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1585994247541},{"_id":"public/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1585994247541},{"_id":"public/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1585994247541},{"_id":"public/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1585994247541},{"_id":"public/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1585994247541},{"_id":"public/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1585994247541},{"_id":"public/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1585994247541},{"_id":"public/css/fonts/fontawesome-webfont.eot","hash":"7619748fe34c64fb157a57f6d4ef3678f63a8f5e","modified":1585994247541},{"_id":"public/css/fonts/fontawesome-webfont.woff","hash":"04c3bf56d87a0828935bd6b4aee859995f321693","modified":1585994247541},{"_id":"public/css/fonts/FontAwesome.otf","hash":"b5b4f9be85f91f10799e87a083da1d050f842734","modified":1585994247541},{"_id":"public/css/fonts/fontawesome-webfont.ttf","hash":"7f09c97f333917034ad08fa7295e916c9f72fd3f","modified":1585994247541},{"_id":"public/fancybox/jquery.fancybox.css","hash":"aaa582fb9eb4b7092dc69fcb2d5b1c20cca58ab6","modified":1585994247541},{"_id":"public/js/script.js","hash":"2876e0b19ce557fca38d7c6f49ca55922ab666a1","modified":1585994247541},{"_id":"public/fancybox/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1585994247541},{"_id":"public/fancybox/helpers/jquery.fancybox-media.js","hash":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1585994247541},{"_id":"public/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1585994247541},{"_id":"public/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1585994247541},{"_id":"public/fancybox/helpers/jquery.fancybox-buttons.js","hash":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1585994247541},{"_id":"public/css/style.css","hash":"5f8dadd37d0052c557061018fe6f568f64fced9b","modified":1585994247541},{"_id":"public/fancybox/jquery.fancybox.pack.js","hash":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1585994247541},{"_id":"public/css/fonts/fontawesome-webfont.svg","hash":"46fcc0194d75a0ddac0a038aee41b23456784814","modified":1585994247541},{"_id":"public/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1585994247541},{"_id":"public/fancybox/jquery.fancybox.js","hash":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed","modified":1585994247541},{"_id":"themes/hexo-theme-lx/.editorconfig","hash":"f8102695960fe708149c2e21934969700bfb0031","modified":1586055390182},{"_id":"themes/hexo-theme-lx/.gitignore","hash":"05277dd213f5ca95847c7aef888ff8255a772418","modified":1586055390183},{"_id":"themes/hexo-theme-lx/CODE_OF_CONDUCT.md","hash":"4faa826cb7049aff196edbf38e0b29c3fec2cf17","modified":1586055390183},{"_id":"themes/hexo-theme-lx/CONTRIBUTING.md","hash":"c70e994eb59d431ccaaf8b114ad74c8962cc3f45","modified":1586055390183},{"_id":"themes/hexo-theme-lx/LICENSE","hash":"2e43fe50cb85afda5cbd30aa4c056125f0e11a53","modified":1586055390184},{"_id":"themes/hexo-theme-lx/README.md","hash":"a76abaee1334d041715f639f5459187a787593bb","modified":1586055390184},{"_id":"themes/hexo-theme-lx/_config.yml","hash":"bed3cb1ac4c045d8bd4a87693eff773a5e71b1e6","modified":1586058314370},{"_id":"themes/hexo-theme-lx/package.json","hash":"7c15e6d012eee8b69d625b26f61adfd018a15f7f","modified":1586055390190},{"_id":"themes/hexo-theme-lx/README/README.zh.md","hash":"c70fee0ba91e87f711ff410313bf8325b27e0bb6","modified":1586055390184},{"_id":"themes/hexo-theme-lx/languages/zh.yml","hash":"b9a174e46bd89df7d6bf3a7863c350a62dce8a81","modified":1586055390185},{"_id":"themes/hexo-theme-lx/languages/en.yml","hash":"ec59da08e7c8dc61872b7896f167e42491965b2e","modified":1586055390185},{"_id":"themes/hexo-theme-lx/layout/archive.ejs","hash":"539ad764457af4434a6764c2044c4bbb9c34759f","modified":1586055390185},{"_id":"themes/hexo-theme-lx/layout/index.ejs","hash":"6c73bb34c29861124a0464a9a8dea95adf4fc5b0","modified":1586055390185},{"_id":"themes/hexo-theme-lx/layout/layout.ejs","hash":"a8e012724633a45c7601c38866176e11f88b0db9","modified":1586055390186},{"_id":"themes/hexo-theme-lx/layout/page.ejs","hash":"c0895bd2b63c5bba7c54686d6b7eaec9fbc520a5","modified":1586055390186},{"_id":"themes/hexo-theme-lx/layout/post.ejs","hash":"9396418ae3822ee444f44c509ec27955842c9360","modified":1586055390189},{"_id":"themes/hexo-theme-lx/source/favicon.ico","hash":"96b9a549337c2bec483c2879eeafa4d1f8748fed","modified":1586055390194},{"_id":"themes/hexo-theme-lx/.github/ISSUE_TEMPLATE/--------feature-request.md","hash":"14c1b9b0234e1930cdcb5effade695dd8ed96378","modified":1586055390182},{"_id":"themes/hexo-theme-lx/.github/ISSUE_TEMPLATE/------bug-bug-report.md","hash":"31d326cf90434637cc1223d1272f3db6913c1bc0","modified":1586055390182},{"_id":"themes/hexo-theme-lx/.github/ISSUE_TEMPLATE/------help-wanted.md","hash":"5d71620c4feb15de44248dc1bbfef0bdb83ff080","modified":1586055390182},{"_id":"themes/hexo-theme-lx/.github/workflows/greetings.yml","hash":"461379d4ffd3f2d5785cc8b20ce7369bf97f6657","modified":1586055390183},{"_id":"themes/hexo-theme-lx/layout/partials/aside.ejs","hash":"e9ea462c34f4edba0c62c5478b4a96edb66769ef","modified":1586055390186},{"_id":"themes/hexo-theme-lx/layout/partials/font.ejs","hash":"2dc65c0b4f60ed8329a296c5172aee8d42025a1e","modified":1586055390186},{"_id":"themes/hexo-theme-lx/layout/partials/config.ejs","hash":"6809577629e67dc00a2b20c2326818fa7f2c29be","modified":1586055390186},{"_id":"themes/hexo-theme-lx/layout/partials/footer.ejs","hash":"3a4cad29572a89e7c7354fe676af3997cb759bd9","modified":1586055390187},{"_id":"themes/hexo-theme-lx/layout/partials/menu.ejs","hash":"7c3d71999f233f5fb7549a472c922c8257711d5f","modified":1586055390187},{"_id":"themes/hexo-theme-lx/layout/partials/pagination.ejs","hash":"82c25643c1e3b16f0472eebfe77f4a03ad0e8824","modified":1586055390187},{"_id":"themes/hexo-theme-lx/layout/partials/post-header.ejs","hash":"adc798cf72c82a069fb354f48f65bba5f1405b45","modified":1586055390188},{"_id":"themes/hexo-theme-lx/layout/partials/post-footer.ejs","hash":"a2dbce8103bdc694439e8709c7f636f68ccc3328","modified":1586055390187},{"_id":"themes/hexo-theme-lx/layout/partials/recent-posts.ejs","hash":"889018a6df0c62b61c1c03712a2d3eb39882559c","modified":1586055390188},{"_id":"themes/hexo-theme-lx/layout/partials/search.ejs","hash":"e68af7bfc83edcf8da639982e1766c53f129128f","modified":1586055390188},{"_id":"themes/hexo-theme-lx/layout/partials/sociallinks.ejs","hash":"4460e06f88084f545b4409685644c7f101d11ba5","modified":1586055390188},{"_id":"themes/hexo-theme-lx/layout/third-party/comment.ejs","hash":"f1d1c9425059e76c8481829797de44df637c0723","modified":1586055390190},{"_id":"themes/hexo-theme-lx/layout/third-party/mathjax.ejs","hash":"e857f83195594e6ffcacf08f07df0c229806113b","modified":1586055390190},{"_id":"themes/hexo-theme-lx/source/css/base.styl","hash":"f29e3f7ab355d599d186ffc4a457169df4af3ad5","modified":1586055390192},{"_id":"themes/hexo-theme-lx/source/css/main.min.css","hash":"f92bf3eef5351215ee8bced4a40d88dab68330bf","modified":1586055390193},{"_id":"themes/hexo-theme-lx/source/css/main.styl","hash":"270db895d246e6084cb7a1a2620ded803313624b","modified":1586055390193},{"_id":"themes/hexo-theme-lx/source/images/avatar.jpeg","hash":"b6aba9aa030f22221d4a357a46a6bc6ef0cce556","modified":1586058121609},{"_id":"themes/hexo-theme-lx/source/images/footer-l.jpeg","hash":"f036edc5f66ffbcc34c3d855414c6ca5ef30a04b","modified":1586055390198},{"_id":"themes/hexo-theme-lx/source/images/footer-r.jpeg","hash":"5c7677ac85cf8a683b91e97702b7096017006b4f","modified":1586055390198},{"_id":"themes/hexo-theme-lx/source/images/post_cover.jpeg","hash":"93f216636c87dbbe635d4bb6b944851d92d84723","modified":1586055390199},{"_id":"themes/hexo-theme-lx/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1586055390200},{"_id":"themes/hexo-theme-lx/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1586055390200},{"_id":"themes/hexo-theme-lx/source/js/jquery.easing.min.js","hash":"af83a43279779fbc716f40ba8c5280782027540a","modified":1586055390200},{"_id":"themes/hexo-theme-lx/source/js/jquery.jside.menu.js","hash":"d15b40199520d22771f9a211ac4282041df2ae5a","modified":1586055390200},{"_id":"themes/hexo-theme-lx/source/js/local.search.js","hash":"3dd788d1e64431feb8faca7a7f175d25ed31f25a","modified":1586055390201},{"_id":"themes/hexo-theme-lx/scripts/helpers/font.js","hash":"0e7adebaf7bb3ba516c8f82cf26100237584bf44","modified":1586055390191},{"_id":"themes/hexo-theme-lx/scripts/tags/button.js","hash":"dd5da28768a3ed3f2e3b308a9ff220403825579f","modified":1586055390191},{"_id":"themes/hexo-theme-lx/scripts/tags/center-quote.js","hash":"e5086a9b99ac1c8006f4fa7c5568b96cc1d47cf6","modified":1586055390191},{"_id":"themes/hexo-theme-lx/scripts/tags/label.js","hash":"7247ac0f614993d4d162b14b68e924fc969581f5","modified":1586055390191},{"_id":"themes/hexo-theme-lx/scripts/tags/note.js","hash":"19dc88f867d684101e851e25fe9da661c56acc66","modified":1586055390192},{"_id":"themes/hexo-theme-lx/scripts/tags/video.js","hash":"3a70f28b9769fd308c8df7d694fb7f896f12ae58","modified":1586055390192},{"_id":"themes/hexo-theme-lx/source/images/cover.jpeg","hash":"13c52245fa1cede0083970f0facefa98017d48bc","modified":1586057417206},{"_id":"themes/hexo-theme-lx/layout/third-party/analytics/baidu-analytics.ejs","hash":"30cf8cd193777b1e071313528e06b16eca508187","modified":1586055390189},{"_id":"themes/hexo-theme-lx/layout/third-party/analytics/google-analytics.ejs","hash":"09775c366a01c656b7185ef3da4bc7b33caa2241","modified":1586055390189},{"_id":"themes/hexo-theme-lx/layout/third-party/analytics/index.ejs","hash":"c98b574b2634de33694edb40b1f9120160b81acb","modified":1586055390189},{"_id":"themes/hexo-theme-lx/source/css/page_style/page_style.styl","hash":"d10cea4992ee10e2ab88a2ae0ebe08854f55d7c6","modified":1586055390194},{"_id":"themes/hexo-theme-lx/source/css/menu/button.styl","hash":"d440d99e13b0f58edcab27bfce4e027e0e54fd77","modified":1586055390193},{"_id":"themes/hexo-theme-lx/source/css/menu/menu.styl","hash":"ebe4d6bc7e0081ad4d7659427abb98a1344c1aae","modified":1586055390194},{"_id":"public/favicon.ico","hash":"96b9a549337c2bec483c2879eeafa4d1f8748fed","modified":1586056615280},{"_id":"public/images/avatar.jpeg","hash":"b6aba9aa030f22221d4a357a46a6bc6ef0cce556","modified":1586058178217},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1586056615280},{"_id":"public/images/footer-l.jpeg","hash":"f036edc5f66ffbcc34c3d855414c6ca5ef30a04b","modified":1586056615280},{"_id":"public/images/post_cover.jpeg","hash":"93f216636c87dbbe635d4bb6b944851d92d84723","modified":1586056615280},{"_id":"public/images/footer-r.jpeg","hash":"5c7677ac85cf8a683b91e97702b7096017006b4f","modified":1586056615280},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1586056615280},{"_id":"public/images/cover.jpeg","hash":"13c52245fa1cede0083970f0facefa98017d48bc","modified":1586058178217},{"_id":"public/css/base.css","hash":"6d884ebc4f4c1a7c750e4b871ecfff6c28b47ed0","modified":1586056615280},{"_id":"public/js/jquery.easing.min.js","hash":"af83a43279779fbc716f40ba8c5280782027540a","modified":1586056615280},{"_id":"public/js/jquery.jside.menu.js","hash":"688b8b03f8590a05e35a1fbbc59f37bc36051aa1","modified":1586056615280},{"_id":"public/css/menu/button.css","hash":"ce03713a291978281b66ce9d5738c456020a8e61","modified":1586056615280},{"_id":"public/css/page_style/page_style.css","hash":"0488c30dc3e728ec5ec89bb49fe979bd84acc964","modified":1586056615280},{"_id":"public/css/menu/menu.css","hash":"70f8a5b346f4b106eebc1c5199bc4add479da3c5","modified":1586056615280},{"_id":"public/js/local.search.js","hash":"3dd788d1e64431feb8faca7a7f175d25ed31f25a","modified":1586056615280},{"_id":"public/css/main.css","hash":"0235a5e568abff3de00c0228a94f47fd4f754575","modified":1586056615280},{"_id":"public/css/main.min.css","hash":"f92bf3eef5351215ee8bced4a40d88dab68330bf","modified":1586056615280},{"_id":"themes/hexo-theme-lx/source/images/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1586057481258},{"_id":"themes/hexo-theme-lx/source/images/avatar.png","hash":"13c52245fa1cede0083970f0facefa98017d48bc","modified":1586057417206},{"_id":"public/images/avatar.png","hash":"13c52245fa1cede0083970f0facefa98017d48bc","modified":1586057641234},{"_id":"public/search.xml","hash":"e110c9f832417621f1a451c936fc7953f27fac92","modified":1586059761169},{"_id":"source/_posts/Popover.md","hash":"f90f4cbf30b2c503f6af560f4a3dff753a1c669a","modified":1586058680614},{"_id":"public/tags/å¾®ä¿¡å°ç¨‹åº/index.html","hash":"4f9f5abe58d4a4bb32a76e7ef38b6721fb0d2a82","modified":1586059761169},{"_id":"public/2020/04/05/Popover/index.html","hash":"edb6bbaff6abcf4acb73384f38129e0629c06922","modified":1586059519727},{"_id":"public/categories/å¾®ä¿¡å°ç¨‹åº/index.html","hash":"6a3d57d271bfa4d3771c0db48396a4afb7f38435","modified":1586059761169},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1586058964847},{"_id":"source/_posts/canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚.md","hash":"3049de148e5231287246a7ae6cd7ddd62aa2d16e","modified":1586059509735},{"_id":"public/2020/04/05/canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚/index.html","hash":"28b17bc7f7dd11cf1e97e38ee55aeb089add3253","modified":1586059519727},{"_id":"source/_posts/å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚.md","hash":"c5c9684b9c85ff90449cfd174e041fe76739b0d8","modified":1586059731085},{"_id":"source/_posts/å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡† Popover.md","hash":"eab6ea4da7e611be8fd0455c173faeafb0c03250","modified":1586059721972},{"_id":"source/_posts/å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ.md","hash":"e4bbc08e9fe9308a73f2168e5145e707bbb0a904","modified":1586059634441},{"_id":"public/2020/04/05/å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ/index.html","hash":"fe616d0a34c16d324b98deb53c1cf439a5056c44","modified":1586059761169},{"_id":"public/2020/04/05/å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚/index.html","hash":"4963481708add3be9caf0c0f9a22a7b33b054246","modified":1586059761169},{"_id":"public/2020/04/05/å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡† Popover/index.html","hash":"3027570b76806971abc9c986022af71783047a00","modified":1586059761169}],"Category":[{"name":"å¾®ä¿¡å°ç¨‹åº","_id":"ck8mieyr10000xbp37i8baz0y"}],"Data":[],"Page":[],"Post":[{"title":"å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ","date":"2020-04-05T04:06:48.000Z","_content":"\n#### å†™åœ¨å‰é¢\n- æ˜¯çš„æˆ‘è¦å¼€å§‹åšï¼šæ ¹æ®å›¾ç‰‡çš„ä¸»è‰²è°ƒæ¥æ”¹å˜ä¸€ä¸‹é¡µé¢èƒŒæ™¯é¢œè‰²äº†ğŸ™†\n- è®°å½•ä¸€ä¸‹ï¼Œè‡ªå·±ç¢°åˆ°çš„é—®é¢˜ä»¥åŠæ€è€ƒ\n- æ—¶é—´å¤šçš„è¯ï¼Œä¼šè€ƒè™‘å°†ä»£ç å‘åœ¨githubï¼Œæ¬¢è¿å¤§å®¶å»starğŸ˜˜\n---\n\n#### å¼€å‘å‡†å¤‡\n - ç†ä¸€ä¸‹æ€è·¯\n\t1. å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvas\n\t2. é€šè¿‡canvasçš„getImageDataè·å–å›¾ç‰‡çš„åƒç´ æ•°æ®\n\t\t-  [canvas 2d ä¸æ—§ç‰ˆ canvas å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasçš„ä¸¤ç§æ–¹æ³•å®è·µ](https://blog.csdn.net/Elle_Peng/article/details/105030971)\n\t3. åˆ†æç›®å‰ä¸»è¦ç”¨äºè·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„ç®—æ³•ï¼Œå¹¶å®è·µ\n\t4. å¾—åˆ°ä¸»è¦è‰²è°ƒï¼Œå†å°†rgbè½¬æ¢æˆhsbï¼Œå¹¶å¯¹bå€¼ï¼Œè¿›è¡Œä¿®æ”¹ï¼Œåˆ¶ä½œæ¸å˜ï¼Œå·¦ä¾§35ï¼Œå³ä¾§15\n- å—¯ï¼Œç¥æˆ‘æˆåŠŸ\n#### é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•\n- [é¢œè‰²ç©ºé—´ RGB CMY HSV HSL LAB](http://www.360doc.com/content/17/0417/19/41797635_646363886.shtml)\n- å›¾ç‰‡é¢œè‰²é‡åŒ–ç®—æ³•\n\t- æ¯”è¾ƒå¸¸è§çš„åº”ç”¨å°±æ˜¯ç”¨äºæå–å›¾ç‰‡çš„ä¸»è‰²è°ƒç”¨äºä¸Šè‰²é…è‰²,å½“ç„¶ä¹Ÿå¯ä»¥ç”¨äºå›¾åƒåˆ†å‰²\n\t- ä¸»æµç®—æ³•\n\t\t- ä¸¤ä¸ªå¤§æ–¹å‘\n\t\t- **åœ¨é¢œè‰²ç©ºé—´åˆç†åœ°é€‰å–é‡‡æ ·ç‚¹æ¥æ„é€ é¢œè‰²è¡¨ï¼Œä½¿å¾—å‡è‰²åçš„å›¾åƒå’ŒåŸå›¾å°½å¯èƒ½åœ°æ¥è¿‘**\n\t\t\t- ç›´æ¥é‡åŒ–\n\t\t\t\t- å¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£\n\t\t\t- ç»Ÿè®¡é‡åŒ–\n\t\t\t\t- æ ¸å¿ƒï¼šè°ƒæ•´ç›´æ–¹å›¾ä½¿å¾—ç´¯ç§¯åˆ†å¸ƒæ›²çº¿å‘ˆçº¿æ€§ï¼Œä»è€Œä½¿å›¾åƒåƒç´ ç‚¹çš„äº®åº¦å€¼å°½å¯èƒ½å‡åŒ€åœ°åˆ†å¸ƒ\n\t\t\t\t- åˆ©ç”¨åŸå›¾çš„ç›´æ–¹å›¾æ¥å¼•å¯¼é‡‡æ ·ç‚¹çš„é€‰å–ï¼Œä½¿å¾—æ¯ä¸ªé‡‡æ ·ç‚¹å¯ä»¥å¤§è‡´è¦†ç›–ç›¸åŒæ•°é‡çš„åƒç´ ç‚¹\n\t\t\t\t- å¯¹æ¯ä¸ªé¢œè‰²é€šé“å»ºç«‹ç›´æ–¹å›¾ï¼Œç„¶åæ ¹æ®è¿™äº›ç›´æ–¹å›¾å¯¹å„ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡‡æ ·ï¼Œåœ¨åƒç´ å€¼åˆ†å¸ƒå¤šçš„åŒºåŸŸè¿›è¡Œå¯†é›†é‡‡æ ·ï¼Œåˆ«çš„åŒºåŸŸç¨€ç–é‡‡æ ·ï¼Œå†åˆ©ç”¨è¿™äº›é‡‡æ ·ç‚¹æ¥ç»„åˆæˆæœ€ç»ˆçš„é¢œè‰²è¡¨ï¼ŒåŸå›¾ä¸­çš„æ¯ä¸ªåƒç´ ç‚¹ç”¨é¢œè‰²è¡¨ä¸­æœ€æ¥è¿‘çš„é¢œè‰²æ›¿æ¢æ‰\n\t\t\t- é¢œè‰²ç©ºé—´åˆ†å‰²(Median-Cut)\n\t\t\t\t- æ ¸å¿ƒï¼šåœ¨é¢œè‰²ç©ºé—´å»ºç«‹ä¸€æ£µäºŒå‰æ ‘ï¼Œé€šè¿‡ä¸æ–­åœ°ç»†åŒ–è¿™æ£µæ ‘æ¥è¿‘ä¼¼å¾—åˆ°ä¸€ä¸ªé¢œè‰²ä¸‰ç»´ç›´æ–¹å›¾ï¼Œç„¶åå†æ ¹æ®è¿™æ£µæ ‘æ¥åˆ†é…é‡‡æ ·ç‚¹\n\t\t\t\t- åŸºäºå›¾åƒé¢œè‰²æ ·æœ¬åˆ†å¸ƒçš„è‡ªé€‚åº”æ–¹æ³•ï¼Œä¸è®ºå›¾åƒä¸­é¢œè‰²æ ·æœ¬çš„åˆ†å¸ƒå¦‚ä½•ï¼Œæ€»æ˜¯å¯ä»¥ç”Ÿæˆä¸€ä¸ªå’Œé¢œè‰²æ ·æœ¬åˆ†å¸ƒåŒ¹é…è‰¯å¥½çš„é¢œè‰²è¡¨ï¼šåœ¨é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸå†…é‡‡æ ·ç‚¹åˆ†å¸ƒä¹Ÿç›¸å¯¹å¯†é›†ï¼Œå…¶ä»–åŒºåŸŸåˆ™åˆ†é…äº†è¾ƒå°‘çš„é‡‡æ ·ç‚¹ã€‚ä¸”ç›¸åŒæ•°ç›®çš„é¢œè‰²æ ·æœ¬æ€»æ˜¯ç”¨åŒæ ·æ•°é‡çš„é‡‡æ ·ç‚¹æ¥ä»£è¡¨ï¼Œæ‰€ä»¥é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸï¼Œé‡‡æ ·ç‚¹çš„æ•°é‡è‡ªç„¶å°±ä¼šå¤šï¼Œåä¹‹åˆ™ç›¸åº”çš„æ¯”è¾ƒå°‘\n\t\t\t\t- æœ€é‡è¦ã€åº”ç”¨æœ€å¹¿æ³›çš„å‡è‰²ç®—æ³•ä¹‹ä¸€\n\t\t\t- kå‡å€¼èšç±»(k-Means clustering)\n\t\t\t\t- æ ¸å¿ƒï¼šå°†åƒç´ æŒ‰é¢œè‰²çš„ç›¸ä¼¼ç¨‹åº¦å½’ç±»\n\t\t- **ä»ä¸€ä¸ªåˆå§‹çš„é¢œè‰²è¡¨å‡ºå‘ï¼Œé€šè¿‡ä¸æ–­ä¿®æ”¹é¢œè‰²è¡¨æ¥æ”¹å–„å‡è‰²æ•ˆæœ**\n\t\t\t- ç¥ç»ç½‘ç»œæ–¹æ³•(ANN)\n\t\t\t\t- é¢œè‰²è¡¨é€šè¿‡ç¥ç»å…ƒæ¥ç¼–ç ï¼Œé€šè¿‡ç¼“æ…¢çš„è°ƒèŠ‚ç¥ç»å…ƒçš„é¢œè‰²å€¼ä»¥ä¿è¯æ•´ä¸ªç¥ç»ç½‘ç»œé€æ­¥æ”¶æ•›äºæœ€å°è¯¯å·®çŠ¶æ€ï¼ˆå³é€šè¿‡ç¥ç»ç½‘ç»œäº§ç”Ÿçš„å›¾åƒå’ŒåŸå›¾ä¹‹é—´è¯¯å·®æœ€å°ï¼‰\n#### ç›´æ¥é‡åŒ–å®è·µ\n- é¦–å…ˆæˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€çœ‹getImageDataåçš„æ•°æ®\n\t- ![getImageDataæ•°æ®](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzljZjVjMjQzMDI0NmE0YjE0YzFlYmMzMjYwZDkwYTgwNTQzMDIucG5n?x-oss-process=image/format,png)\n\t- å¯ä»¥ç®€å•çœ‹ä½œæ˜¯å¤–å±‚å¾ªç¯ä¸ºrgbaçš„æ‰“å¹³äº†äºŒç»´æ•°ç»„\n- å¦‚æœæŒ‰æ»¡è¶³éœ€æ±‚åšï¼Œåªè¦ä¸€ä¸ªä¸»è‰²è°ƒçš„è¯ï¼Œå¯ä»¥æŠŠæ•´ä¸ªgetImageDataè·å¾—çš„æ•°æ®ï¼Œè¿›è¡Œå„ä¸ªé€šé“çš„å¹³å‡å€¼æ±‚å€¼ï¼Œå†æ‹¼æ¥ï¼Œåƒè¿™æ ·\n\t```javascript\n\tgetUniqueColor(imageData) {\n    let res_r = 0\n    let res_g = 0\n    let res_b = 0\n    let res_a = 0\n    for (let i = 0; i < imageData.length; i += 1) {\n      if (i % 4 === 0) {\n        res_r += imageData[i]\n      } else if (i % 4 === 1) {\n        res_g += imageData[i]\n      } else if (i % 4 === 2) {\n        res_b += imageData[i]\n      } else if (i % 4 === 3) {\n        res_a += imageData[i]\n      } \n    }\n    res_r = Math.round(res_r / (imageData.length / 4))\n    res_g =  Math.round(res_g / (imageData.length / 4))\n    res_b =  Math.round(res_b / (imageData.length / 4))\n    res_a =  Math.round(res_a / (imageData.length / 4))\n    console.log('res_r', res_r)\n    console.log('res_g', res_g)\n    console.log('res_b', res_b)\n    console.log('res_a', res_a)\n  },\n\t```\n\t- è¿è¡Œæˆªå›¾\n\t\t- ![æš´åŠ›æ³•æ±‚ä¸»è‰²è°ƒ](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzc4NzFiOTVmYzA4NWQ3NGQwNDc4OWY0ZWI5Yzc0YThmNzQ5OTYucG5n?x-oss-process=image/format,png)\n\t\t- æ— ç›¸å…³ç‚¹è¶Šå¤šï¼Œè¯¯å·®è¶Šå¤§ğŸ‘\n- æˆ‘ä»¬å¯ä»¥â€œå¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£â€\n\t```javascript\n\tconst COLOR_SIZE = 40 // å•ä½è‰²å—çš„å¤§å°ï¼ˆåƒç´ ä¸ªæ•°ï¼Œé»˜è®¤40ï¼‰ã€‚ä»¥å•ä½è‰²å—çš„å¹³å‡åƒç´ å€¼ä¸ºä½œä¸ºç»Ÿè®¡å•ä½\n\tconst LEVEL = 32 // è‰²æ·±ï¼Œé¢œè‰²åˆ†åŒºå‚æ•°ï¼ˆ0-255ï¼‰ï¼Œæ€»256ï¼Œ2^8ï¼Œå³8bitï¼Œ4ä¸ªé€šé“ï¼ˆrgbaï¼‰ï¼Œå³é»˜è®¤è‰²æ·±4*8bitï¼Œ32bit\n\t// åˆ†åŒºå—ï¼Œå¯ä»¥æ‹“å±•æ€§çš„æ±‚ä¸»è¦è‰²æ¿ï¼Œç”¨æ¥åšpalette\n    const mapData = that.getLevelData(imageData);\n    const colors = that.getMostColor(mapData);\n    if (!colors) {\n      return\n    } else {\n      const color = that.getAverageColor(colors)\n      console.log('color', color)\n    }\n\t```\n\t- å°†getImageDataæ•°æ®åˆ†æˆç‰¹å®šå¤§å°çš„åŒºå—ï¼Œåˆ†åˆ«ç®—å‡ºå„ä¸ªåŒºå—çš„averageColorï¼Œå†åˆ©ç”¨mapç‰¹æ€§ï¼Œå°†averageColorä½œkeyï¼Œcountå„ä¸ªaverageColorä¸ªæ•°\n\t\t```javascript\n\t\t  // è·å–æ¯æ®µçš„é¢œè‰²æ•°æ®\n\t\t  // æ ¹æ®åƒç´ æ•°æ®ï¼ŒæŒ‰å•ä½è‰²å—è¿›è¡Œåˆ‡å‰²\n\t\t  getLevelData(imageData) {\n\t\t    const len = imageData.length;\n\t\t    const mapData = {};\n\t\t    for (let i = 0; i < len; i += COLOR_SIZE * 4) {\n\t\t      const blockColor = this.getBlockColor(imageData, i); // è¯¥åŒºå—å¹³å‡rgba [{r,g,b,a}]æ•°æ®\n\t\t      // è·å–å„ä¸ªåŒºå—çš„å¹³å‡rgbaæ•°æ®ï¼Œå°†å„ä¸ªé€šé“çš„é¢œè‰²è¿›è¡ŒLEVELè‰²æ·±é™çº§\n\t\t      // æ ¹æ®r_g_b_a å»ºç«‹mapç´¢å¼•\n\t\t      const key = this.getColorLevel(blockColor);\n\t\t      !mapData[key] && (mapData[key] = []);\n\t\t      mapData[key].push(blockColor);\n\t\t    }\n\t\t    return mapData;\n\t\t  },\n\t\t\n\t\t  // è·å–å•ä½å—çš„å…¨éƒ¨è‰²å€¼\n\t\t  // å¹¶æ ¹æ®å…¨éƒ¨è‰²å€¼ï¼Œè®¡ç®—å¹³å‡è‰²å€¼\n\t\t  // å¤„ç†æœ€åè¾¹ç•Œå€¼ï¼Œå°äºCOLOR_SIZE\n\t\t  getBlockColor(imageData, start) {\n\t\t    let data = [],\n\t\t      count = COLOR_SIZE,\n\t\t      len = COLOR_SIZE * 4;\n\t\t    imageData.length <= start + len && (count = Math.floor((imageData.length - start - 1) / 4));\n\t\t    for (let i = 0; i < count; i += 4) {\n\t\t      data.push({\n\t\t        r: imageData[start + i + 0],\n\t\t        g: imageData[start + i + 1],\n\t\t        b: imageData[start + i + 2],\n\t\t        a: imageData[start + i + 3]\n\t\t      })\n\t\t    }\n\t\t    return this.getAverageColor(data);\n\t\t  },\n\t\t\n\t\t  // å–å‡ºå„ä¸ªé€šé“çš„å¹³å‡å€¼ï¼Œå³ä¸ºæ”¹è‰²å—çš„å¹³å‡è‰²å€¼\n\t\t  getAverageColor(colorArr) {\n\t\t    const len = colorArr.length;\n\t\t    let sr = 0, sg = 0, sb = 0, sa = 0;\n\t\t    colorArr.map(function (item) {\n\t\t      sr += item.r;\n\t\t      sg += item.g;\n\t\t      sb += item.b;\n\t\t      sa += item.a;\n\t\t    });\n\t\t    return {\n\t\t      r: Math.round(sr / len),\n\t\t      g: Math.round(sg / len),\n\t\t      b: Math.round(sb / len),\n\t\t      a: Math.round(sa / len)\n\t\t    }\n\t\t  },\n\t\t\n\t\t  getColorLevel(color) {\n\t\t    return this.getLevel(color.r) + '_' + this.getLevel(color.g) + '_' + this.getLevel(color.b) + '_' + this.getLevel(color.a)\n\t\t  },\n\t\t\n\t\t  // è‰²æ·±é™çº§\n\t\t  getLevel(value) {\n\t\t    return Math.round(value / LEVEL)\n\t\t  },\n\t\t```\n\t- æŠŠå‡ºç°æ¬¡æ•°æœ€å¤šçš„averageColoråŒºå—ï¼Œä½œä¸ºé‡‡æ ·åŒºå—ï¼Œå†è·å–ä¸€éaverageColorï¼Œå³æ˜¯æœ€ç»ˆä¸»è‰²è°ƒ\n\t\t```javascript\n\t\t  // æ ¹æ®è‰²å—é¢œè‰²ï¼Œè·å–\n\t\t  getMostColor(colorData) {\n\t\t    let rst = null, len = 0;\n\t\t    for (let key in colorData) {\n\t\t      console.log('colorData[key].length', colorData[key].length)\n\t\t      console.log('colorData[key].length', colorData[key])\n\t\t      console.log('colorData[key].length', key)\n\t\t      colorData[key].length > len && (\n\t\t        rst = colorData[key],\n\t\t        len = colorData[key].length\n\t\t      )\n\t\t    }\n\t\t    return rst;\n\t\t  },\n\t\t```\n\t- è¿è¡Œæˆªå›¾\n\t\t- ![åŒºå—è·å–ä¸»è‰²è°ƒ](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2ViYzI3MmNkNzU2NjNhODUxYmM2MWQ0MDE4OWJjZGI3NzQ5NDUucG5n?x-oss-process=image/format,png)\n\t\t- é¢œè‰²å¯ä¿¡åº¦æé«˜äº†å¾ˆå¤š\n#### æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\n- æ ¸å¿ƒï¼šå°†**ä¸‰é€šé“è½¬æˆå•é€šé“**å³å¯\n\t```javascript\n\tlet greyImageData = that.greyTheImage(imageData)\n    wx.canvasPutImageData({\n      canvasId: 'myCanvas',\n      x: 150,\n      y: 0,\n      width: 150,\n      height: 100,\n      data: greyImageData,\n      success (res) {\n        console.log('canvasPutImageData it worked!')\n      }\n    })\n\n  greyTheImage(imageData) {\n      // imageDataæœ‰4ä¸ªé€šé“rgba\n      for (let i = 0; i < imageData.length; i += 4) {\n        let sum_rgb = 0\n        // ä½†æˆ‘ä»¬åªéœ€è¦rgbä¸‰é€šé“ï¼Œa-alphaé€šé“æ— ç”¨\n        for (let j = 0; j < 3; j += 1) {\n          sum_rgb = sum_rgb + imageData[i + j]\n        }\n        let grey = Math.round(sum_rgb / 3)\n        imageData[i] = grey\n        imageData[i + 1] = grey\n        imageData[i + 2] = grey\n      }\n      return imageData\n  },\n\t```\n- è¿è¡Œæˆªå›¾\n![åŒ»å­¦ç°è‰²å½±åƒ](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmNWJhNzk2OTJjOWEwOTA2MDNlMzkxMzBlMDRiZTY4MTAwNzcwLnBuZw?x-oss-process=image/format,png)\n\n#### æ ¼å¼åŒ–rgbaè¾“å‡º\n- åƒè¿™æ ·![æ ¼å¼åŒ–rgbaè¾“å‡º](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxNDVhYzM4YzQ1MjFkNDgzNGNkZGQ5NTNmNjQ1MWQ3NTI0NTkucG5n?x-oss-process=image/format,png)\n\t```javascript\n\t  // å¯¹æœ€ç»ˆé¢œè‰²çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–\n\t  /**\n\t   * result:{\n\t   *   hex:'#ffffff',            åå…­ä½å€¼\n\t   *   hexa:'#ffffff00',         åå…­ä½å€¼å¸¦alphaå€¼\n\t   *   rgb:'rgb(0,0,0)',         RGBå€¼\n\t   *   rgba:'rgba(0,0,0,0)'      RGBå€¼å¸¦alphaå€¼\n\t   * }\n\t   */\n\t\n\t  colorStrFormat(color) {\n\t    const rgba = 'rgba(' + color.r + ',' + color.g + ',' + color.b + ',' + (color.a / 255).toFixed(4).replace(/\\.*0+$/, '') + ')';\n\t    const rgb = 'rgb(' + color.r + ',' + color.g + ',' + color.b + ')';\n\t    const hex = '#' + this.Num2Hex(color.r) + this.Num2Hex(color.g) + this.Num2Hex(color.b);\n\t    const hexa = hex + this.Num2Hex(color.a);\n\t    return {\n\t      rgba: rgba,\n\t      rgb: rgb,\n\t      hex: hex,\n\t      hexa: hexa\n\t    }\n\t  },\n\t\n\t  Num2Hex(num) {\n\t    const hex = num.toString(16) + '';\n\t    if (hex.length < 2) {\n\t      return '0' + hex;\n\t    } else {\n\t      return hex;\n\t    }\n\t  },\n\t```\n#### å‚è€ƒæ–‡çŒ®\n- [phg1024 JavaScriptå›¾åƒå¤„ç†(6) - å‡è‰²ç®—æ³•(Color Reduction)](https://blog.csdn.net/u012843346/article/details/16839649)\n- [è·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„æ’ä»¶](https://github.com/whoiam2007s/ImgMainColor)\n- å…¶å®ä¹Ÿå¯ä»¥åˆ©ç”¨ [CSSæ–°ç‰¹æ€§å»æ”¹å˜èƒŒæ™¯é¢œè‰²](https://blog.csdn.net/nanhupatar/article/details/82793637)ï¼Œæ¯”å¦‚é«˜æ–¯æ¨¡ç³Šç­‰æ¥è¾¾åˆ°ä¸šåŠ¡éœ€æ±‚\n#### å†™åœ¨åé¢\n- å‘¨å…­å¬äº†ä¸€å¤© John Lennon æ­Œæ›²ã€è¿™ä¹Ÿæ˜¯æˆ‘æ‹–æ›´çš„åŸå› ğŸ˜¶ ç¾¡æ…•ä»–å’Œ Yoko é‚£æ®µä¼Šç”¸å›­èˆ¬çš„çˆ±æƒ…ï¼Œä»–å¯¹ Yoko çš„ç—´çˆ±ï¼Œä»–å’Œæ¯äº²çš„ä¸¤æ¬¡åˆ†åˆ«æ„ŸåŒèº«å—ï¼ŒBeatlesåœ¨ä¸€èµ·åšéŸ³ä¹çš„æ¬¢ä¹ï¼Œä»–å¯¹ Sean çš„å® æººçˆ¶çˆ±ï¼Œä½†ä»–çš„äººç”Ÿå´åœ¨ä¸€æ¬¡æªæ€åæˆ›ç„¶è€Œæ­¢ï¼Œå¿ƒç—› å¿ƒç—› ğŸŒ§\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n---\n","source":"_posts/å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ.md","raw":"---\ntitle: å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ\ndate: 2020-04-05 12:06:48\ntags: \n- å¾®ä¿¡å°ç¨‹åº\ncategories:\n- å¾®ä¿¡å°ç¨‹åº\n\n\n---\n\n#### å†™åœ¨å‰é¢\n- æ˜¯çš„æˆ‘è¦å¼€å§‹åšï¼šæ ¹æ®å›¾ç‰‡çš„ä¸»è‰²è°ƒæ¥æ”¹å˜ä¸€ä¸‹é¡µé¢èƒŒæ™¯é¢œè‰²äº†ğŸ™†\n- è®°å½•ä¸€ä¸‹ï¼Œè‡ªå·±ç¢°åˆ°çš„é—®é¢˜ä»¥åŠæ€è€ƒ\n- æ—¶é—´å¤šçš„è¯ï¼Œä¼šè€ƒè™‘å°†ä»£ç å‘åœ¨githubï¼Œæ¬¢è¿å¤§å®¶å»starğŸ˜˜\n---\n\n#### å¼€å‘å‡†å¤‡\n - ç†ä¸€ä¸‹æ€è·¯\n\t1. å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvas\n\t2. é€šè¿‡canvasçš„getImageDataè·å–å›¾ç‰‡çš„åƒç´ æ•°æ®\n\t\t-  [canvas 2d ä¸æ—§ç‰ˆ canvas å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasçš„ä¸¤ç§æ–¹æ³•å®è·µ](https://blog.csdn.net/Elle_Peng/article/details/105030971)\n\t3. åˆ†æç›®å‰ä¸»è¦ç”¨äºè·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„ç®—æ³•ï¼Œå¹¶å®è·µ\n\t4. å¾—åˆ°ä¸»è¦è‰²è°ƒï¼Œå†å°†rgbè½¬æ¢æˆhsbï¼Œå¹¶å¯¹bå€¼ï¼Œè¿›è¡Œä¿®æ”¹ï¼Œåˆ¶ä½œæ¸å˜ï¼Œå·¦ä¾§35ï¼Œå³ä¾§15\n- å—¯ï¼Œç¥æˆ‘æˆåŠŸ\n#### é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•\n- [é¢œè‰²ç©ºé—´ RGB CMY HSV HSL LAB](http://www.360doc.com/content/17/0417/19/41797635_646363886.shtml)\n- å›¾ç‰‡é¢œè‰²é‡åŒ–ç®—æ³•\n\t- æ¯”è¾ƒå¸¸è§çš„åº”ç”¨å°±æ˜¯ç”¨äºæå–å›¾ç‰‡çš„ä¸»è‰²è°ƒç”¨äºä¸Šè‰²é…è‰²,å½“ç„¶ä¹Ÿå¯ä»¥ç”¨äºå›¾åƒåˆ†å‰²\n\t- ä¸»æµç®—æ³•\n\t\t- ä¸¤ä¸ªå¤§æ–¹å‘\n\t\t- **åœ¨é¢œè‰²ç©ºé—´åˆç†åœ°é€‰å–é‡‡æ ·ç‚¹æ¥æ„é€ é¢œè‰²è¡¨ï¼Œä½¿å¾—å‡è‰²åçš„å›¾åƒå’ŒåŸå›¾å°½å¯èƒ½åœ°æ¥è¿‘**\n\t\t\t- ç›´æ¥é‡åŒ–\n\t\t\t\t- å¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£\n\t\t\t- ç»Ÿè®¡é‡åŒ–\n\t\t\t\t- æ ¸å¿ƒï¼šè°ƒæ•´ç›´æ–¹å›¾ä½¿å¾—ç´¯ç§¯åˆ†å¸ƒæ›²çº¿å‘ˆçº¿æ€§ï¼Œä»è€Œä½¿å›¾åƒåƒç´ ç‚¹çš„äº®åº¦å€¼å°½å¯èƒ½å‡åŒ€åœ°åˆ†å¸ƒ\n\t\t\t\t- åˆ©ç”¨åŸå›¾çš„ç›´æ–¹å›¾æ¥å¼•å¯¼é‡‡æ ·ç‚¹çš„é€‰å–ï¼Œä½¿å¾—æ¯ä¸ªé‡‡æ ·ç‚¹å¯ä»¥å¤§è‡´è¦†ç›–ç›¸åŒæ•°é‡çš„åƒç´ ç‚¹\n\t\t\t\t- å¯¹æ¯ä¸ªé¢œè‰²é€šé“å»ºç«‹ç›´æ–¹å›¾ï¼Œç„¶åæ ¹æ®è¿™äº›ç›´æ–¹å›¾å¯¹å„ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡‡æ ·ï¼Œåœ¨åƒç´ å€¼åˆ†å¸ƒå¤šçš„åŒºåŸŸè¿›è¡Œå¯†é›†é‡‡æ ·ï¼Œåˆ«çš„åŒºåŸŸç¨€ç–é‡‡æ ·ï¼Œå†åˆ©ç”¨è¿™äº›é‡‡æ ·ç‚¹æ¥ç»„åˆæˆæœ€ç»ˆçš„é¢œè‰²è¡¨ï¼ŒåŸå›¾ä¸­çš„æ¯ä¸ªåƒç´ ç‚¹ç”¨é¢œè‰²è¡¨ä¸­æœ€æ¥è¿‘çš„é¢œè‰²æ›¿æ¢æ‰\n\t\t\t- é¢œè‰²ç©ºé—´åˆ†å‰²(Median-Cut)\n\t\t\t\t- æ ¸å¿ƒï¼šåœ¨é¢œè‰²ç©ºé—´å»ºç«‹ä¸€æ£µäºŒå‰æ ‘ï¼Œé€šè¿‡ä¸æ–­åœ°ç»†åŒ–è¿™æ£µæ ‘æ¥è¿‘ä¼¼å¾—åˆ°ä¸€ä¸ªé¢œè‰²ä¸‰ç»´ç›´æ–¹å›¾ï¼Œç„¶åå†æ ¹æ®è¿™æ£µæ ‘æ¥åˆ†é…é‡‡æ ·ç‚¹\n\t\t\t\t- åŸºäºå›¾åƒé¢œè‰²æ ·æœ¬åˆ†å¸ƒçš„è‡ªé€‚åº”æ–¹æ³•ï¼Œä¸è®ºå›¾åƒä¸­é¢œè‰²æ ·æœ¬çš„åˆ†å¸ƒå¦‚ä½•ï¼Œæ€»æ˜¯å¯ä»¥ç”Ÿæˆä¸€ä¸ªå’Œé¢œè‰²æ ·æœ¬åˆ†å¸ƒåŒ¹é…è‰¯å¥½çš„é¢œè‰²è¡¨ï¼šåœ¨é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸå†…é‡‡æ ·ç‚¹åˆ†å¸ƒä¹Ÿç›¸å¯¹å¯†é›†ï¼Œå…¶ä»–åŒºåŸŸåˆ™åˆ†é…äº†è¾ƒå°‘çš„é‡‡æ ·ç‚¹ã€‚ä¸”ç›¸åŒæ•°ç›®çš„é¢œè‰²æ ·æœ¬æ€»æ˜¯ç”¨åŒæ ·æ•°é‡çš„é‡‡æ ·ç‚¹æ¥ä»£è¡¨ï¼Œæ‰€ä»¥é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸï¼Œé‡‡æ ·ç‚¹çš„æ•°é‡è‡ªç„¶å°±ä¼šå¤šï¼Œåä¹‹åˆ™ç›¸åº”çš„æ¯”è¾ƒå°‘\n\t\t\t\t- æœ€é‡è¦ã€åº”ç”¨æœ€å¹¿æ³›çš„å‡è‰²ç®—æ³•ä¹‹ä¸€\n\t\t\t- kå‡å€¼èšç±»(k-Means clustering)\n\t\t\t\t- æ ¸å¿ƒï¼šå°†åƒç´ æŒ‰é¢œè‰²çš„ç›¸ä¼¼ç¨‹åº¦å½’ç±»\n\t\t- **ä»ä¸€ä¸ªåˆå§‹çš„é¢œè‰²è¡¨å‡ºå‘ï¼Œé€šè¿‡ä¸æ–­ä¿®æ”¹é¢œè‰²è¡¨æ¥æ”¹å–„å‡è‰²æ•ˆæœ**\n\t\t\t- ç¥ç»ç½‘ç»œæ–¹æ³•(ANN)\n\t\t\t\t- é¢œè‰²è¡¨é€šè¿‡ç¥ç»å…ƒæ¥ç¼–ç ï¼Œé€šè¿‡ç¼“æ…¢çš„è°ƒèŠ‚ç¥ç»å…ƒçš„é¢œè‰²å€¼ä»¥ä¿è¯æ•´ä¸ªç¥ç»ç½‘ç»œé€æ­¥æ”¶æ•›äºæœ€å°è¯¯å·®çŠ¶æ€ï¼ˆå³é€šè¿‡ç¥ç»ç½‘ç»œäº§ç”Ÿçš„å›¾åƒå’ŒåŸå›¾ä¹‹é—´è¯¯å·®æœ€å°ï¼‰\n#### ç›´æ¥é‡åŒ–å®è·µ\n- é¦–å…ˆæˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€çœ‹getImageDataåçš„æ•°æ®\n\t- ![getImageDataæ•°æ®](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzljZjVjMjQzMDI0NmE0YjE0YzFlYmMzMjYwZDkwYTgwNTQzMDIucG5n?x-oss-process=image/format,png)\n\t- å¯ä»¥ç®€å•çœ‹ä½œæ˜¯å¤–å±‚å¾ªç¯ä¸ºrgbaçš„æ‰“å¹³äº†äºŒç»´æ•°ç»„\n- å¦‚æœæŒ‰æ»¡è¶³éœ€æ±‚åšï¼Œåªè¦ä¸€ä¸ªä¸»è‰²è°ƒçš„è¯ï¼Œå¯ä»¥æŠŠæ•´ä¸ªgetImageDataè·å¾—çš„æ•°æ®ï¼Œè¿›è¡Œå„ä¸ªé€šé“çš„å¹³å‡å€¼æ±‚å€¼ï¼Œå†æ‹¼æ¥ï¼Œåƒè¿™æ ·\n\t```javascript\n\tgetUniqueColor(imageData) {\n    let res_r = 0\n    let res_g = 0\n    let res_b = 0\n    let res_a = 0\n    for (let i = 0; i < imageData.length; i += 1) {\n      if (i % 4 === 0) {\n        res_r += imageData[i]\n      } else if (i % 4 === 1) {\n        res_g += imageData[i]\n      } else if (i % 4 === 2) {\n        res_b += imageData[i]\n      } else if (i % 4 === 3) {\n        res_a += imageData[i]\n      } \n    }\n    res_r = Math.round(res_r / (imageData.length / 4))\n    res_g =  Math.round(res_g / (imageData.length / 4))\n    res_b =  Math.round(res_b / (imageData.length / 4))\n    res_a =  Math.round(res_a / (imageData.length / 4))\n    console.log('res_r', res_r)\n    console.log('res_g', res_g)\n    console.log('res_b', res_b)\n    console.log('res_a', res_a)\n  },\n\t```\n\t- è¿è¡Œæˆªå›¾\n\t\t- ![æš´åŠ›æ³•æ±‚ä¸»è‰²è°ƒ](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzc4NzFiOTVmYzA4NWQ3NGQwNDc4OWY0ZWI5Yzc0YThmNzQ5OTYucG5n?x-oss-process=image/format,png)\n\t\t- æ— ç›¸å…³ç‚¹è¶Šå¤šï¼Œè¯¯å·®è¶Šå¤§ğŸ‘\n- æˆ‘ä»¬å¯ä»¥â€œå¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£â€\n\t```javascript\n\tconst COLOR_SIZE = 40 // å•ä½è‰²å—çš„å¤§å°ï¼ˆåƒç´ ä¸ªæ•°ï¼Œé»˜è®¤40ï¼‰ã€‚ä»¥å•ä½è‰²å—çš„å¹³å‡åƒç´ å€¼ä¸ºä½œä¸ºç»Ÿè®¡å•ä½\n\tconst LEVEL = 32 // è‰²æ·±ï¼Œé¢œè‰²åˆ†åŒºå‚æ•°ï¼ˆ0-255ï¼‰ï¼Œæ€»256ï¼Œ2^8ï¼Œå³8bitï¼Œ4ä¸ªé€šé“ï¼ˆrgbaï¼‰ï¼Œå³é»˜è®¤è‰²æ·±4*8bitï¼Œ32bit\n\t// åˆ†åŒºå—ï¼Œå¯ä»¥æ‹“å±•æ€§çš„æ±‚ä¸»è¦è‰²æ¿ï¼Œç”¨æ¥åšpalette\n    const mapData = that.getLevelData(imageData);\n    const colors = that.getMostColor(mapData);\n    if (!colors) {\n      return\n    } else {\n      const color = that.getAverageColor(colors)\n      console.log('color', color)\n    }\n\t```\n\t- å°†getImageDataæ•°æ®åˆ†æˆç‰¹å®šå¤§å°çš„åŒºå—ï¼Œåˆ†åˆ«ç®—å‡ºå„ä¸ªåŒºå—çš„averageColorï¼Œå†åˆ©ç”¨mapç‰¹æ€§ï¼Œå°†averageColorä½œkeyï¼Œcountå„ä¸ªaverageColorä¸ªæ•°\n\t\t```javascript\n\t\t  // è·å–æ¯æ®µçš„é¢œè‰²æ•°æ®\n\t\t  // æ ¹æ®åƒç´ æ•°æ®ï¼ŒæŒ‰å•ä½è‰²å—è¿›è¡Œåˆ‡å‰²\n\t\t  getLevelData(imageData) {\n\t\t    const len = imageData.length;\n\t\t    const mapData = {};\n\t\t    for (let i = 0; i < len; i += COLOR_SIZE * 4) {\n\t\t      const blockColor = this.getBlockColor(imageData, i); // è¯¥åŒºå—å¹³å‡rgba [{r,g,b,a}]æ•°æ®\n\t\t      // è·å–å„ä¸ªåŒºå—çš„å¹³å‡rgbaæ•°æ®ï¼Œå°†å„ä¸ªé€šé“çš„é¢œè‰²è¿›è¡ŒLEVELè‰²æ·±é™çº§\n\t\t      // æ ¹æ®r_g_b_a å»ºç«‹mapç´¢å¼•\n\t\t      const key = this.getColorLevel(blockColor);\n\t\t      !mapData[key] && (mapData[key] = []);\n\t\t      mapData[key].push(blockColor);\n\t\t    }\n\t\t    return mapData;\n\t\t  },\n\t\t\n\t\t  // è·å–å•ä½å—çš„å…¨éƒ¨è‰²å€¼\n\t\t  // å¹¶æ ¹æ®å…¨éƒ¨è‰²å€¼ï¼Œè®¡ç®—å¹³å‡è‰²å€¼\n\t\t  // å¤„ç†æœ€åè¾¹ç•Œå€¼ï¼Œå°äºCOLOR_SIZE\n\t\t  getBlockColor(imageData, start) {\n\t\t    let data = [],\n\t\t      count = COLOR_SIZE,\n\t\t      len = COLOR_SIZE * 4;\n\t\t    imageData.length <= start + len && (count = Math.floor((imageData.length - start - 1) / 4));\n\t\t    for (let i = 0; i < count; i += 4) {\n\t\t      data.push({\n\t\t        r: imageData[start + i + 0],\n\t\t        g: imageData[start + i + 1],\n\t\t        b: imageData[start + i + 2],\n\t\t        a: imageData[start + i + 3]\n\t\t      })\n\t\t    }\n\t\t    return this.getAverageColor(data);\n\t\t  },\n\t\t\n\t\t  // å–å‡ºå„ä¸ªé€šé“çš„å¹³å‡å€¼ï¼Œå³ä¸ºæ”¹è‰²å—çš„å¹³å‡è‰²å€¼\n\t\t  getAverageColor(colorArr) {\n\t\t    const len = colorArr.length;\n\t\t    let sr = 0, sg = 0, sb = 0, sa = 0;\n\t\t    colorArr.map(function (item) {\n\t\t      sr += item.r;\n\t\t      sg += item.g;\n\t\t      sb += item.b;\n\t\t      sa += item.a;\n\t\t    });\n\t\t    return {\n\t\t      r: Math.round(sr / len),\n\t\t      g: Math.round(sg / len),\n\t\t      b: Math.round(sb / len),\n\t\t      a: Math.round(sa / len)\n\t\t    }\n\t\t  },\n\t\t\n\t\t  getColorLevel(color) {\n\t\t    return this.getLevel(color.r) + '_' + this.getLevel(color.g) + '_' + this.getLevel(color.b) + '_' + this.getLevel(color.a)\n\t\t  },\n\t\t\n\t\t  // è‰²æ·±é™çº§\n\t\t  getLevel(value) {\n\t\t    return Math.round(value / LEVEL)\n\t\t  },\n\t\t```\n\t- æŠŠå‡ºç°æ¬¡æ•°æœ€å¤šçš„averageColoråŒºå—ï¼Œä½œä¸ºé‡‡æ ·åŒºå—ï¼Œå†è·å–ä¸€éaverageColorï¼Œå³æ˜¯æœ€ç»ˆä¸»è‰²è°ƒ\n\t\t```javascript\n\t\t  // æ ¹æ®è‰²å—é¢œè‰²ï¼Œè·å–\n\t\t  getMostColor(colorData) {\n\t\t    let rst = null, len = 0;\n\t\t    for (let key in colorData) {\n\t\t      console.log('colorData[key].length', colorData[key].length)\n\t\t      console.log('colorData[key].length', colorData[key])\n\t\t      console.log('colorData[key].length', key)\n\t\t      colorData[key].length > len && (\n\t\t        rst = colorData[key],\n\t\t        len = colorData[key].length\n\t\t      )\n\t\t    }\n\t\t    return rst;\n\t\t  },\n\t\t```\n\t- è¿è¡Œæˆªå›¾\n\t\t- ![åŒºå—è·å–ä¸»è‰²è°ƒ](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2ViYzI3MmNkNzU2NjNhODUxYmM2MWQ0MDE4OWJjZGI3NzQ5NDUucG5n?x-oss-process=image/format,png)\n\t\t- é¢œè‰²å¯ä¿¡åº¦æé«˜äº†å¾ˆå¤š\n#### æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\n- æ ¸å¿ƒï¼šå°†**ä¸‰é€šé“è½¬æˆå•é€šé“**å³å¯\n\t```javascript\n\tlet greyImageData = that.greyTheImage(imageData)\n    wx.canvasPutImageData({\n      canvasId: 'myCanvas',\n      x: 150,\n      y: 0,\n      width: 150,\n      height: 100,\n      data: greyImageData,\n      success (res) {\n        console.log('canvasPutImageData it worked!')\n      }\n    })\n\n  greyTheImage(imageData) {\n      // imageDataæœ‰4ä¸ªé€šé“rgba\n      for (let i = 0; i < imageData.length; i += 4) {\n        let sum_rgb = 0\n        // ä½†æˆ‘ä»¬åªéœ€è¦rgbä¸‰é€šé“ï¼Œa-alphaé€šé“æ— ç”¨\n        for (let j = 0; j < 3; j += 1) {\n          sum_rgb = sum_rgb + imageData[i + j]\n        }\n        let grey = Math.round(sum_rgb / 3)\n        imageData[i] = grey\n        imageData[i + 1] = grey\n        imageData[i + 2] = grey\n      }\n      return imageData\n  },\n\t```\n- è¿è¡Œæˆªå›¾\n![åŒ»å­¦ç°è‰²å½±åƒ](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmNWJhNzk2OTJjOWEwOTA2MDNlMzkxMzBlMDRiZTY4MTAwNzcwLnBuZw?x-oss-process=image/format,png)\n\n#### æ ¼å¼åŒ–rgbaè¾“å‡º\n- åƒè¿™æ ·![æ ¼å¼åŒ–rgbaè¾“å‡º](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxNDVhYzM4YzQ1MjFkNDgzNGNkZGQ5NTNmNjQ1MWQ3NTI0NTkucG5n?x-oss-process=image/format,png)\n\t```javascript\n\t  // å¯¹æœ€ç»ˆé¢œè‰²çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–\n\t  /**\n\t   * result:{\n\t   *   hex:'#ffffff',            åå…­ä½å€¼\n\t   *   hexa:'#ffffff00',         åå…­ä½å€¼å¸¦alphaå€¼\n\t   *   rgb:'rgb(0,0,0)',         RGBå€¼\n\t   *   rgba:'rgba(0,0,0,0)'      RGBå€¼å¸¦alphaå€¼\n\t   * }\n\t   */\n\t\n\t  colorStrFormat(color) {\n\t    const rgba = 'rgba(' + color.r + ',' + color.g + ',' + color.b + ',' + (color.a / 255).toFixed(4).replace(/\\.*0+$/, '') + ')';\n\t    const rgb = 'rgb(' + color.r + ',' + color.g + ',' + color.b + ')';\n\t    const hex = '#' + this.Num2Hex(color.r) + this.Num2Hex(color.g) + this.Num2Hex(color.b);\n\t    const hexa = hex + this.Num2Hex(color.a);\n\t    return {\n\t      rgba: rgba,\n\t      rgb: rgb,\n\t      hex: hex,\n\t      hexa: hexa\n\t    }\n\t  },\n\t\n\t  Num2Hex(num) {\n\t    const hex = num.toString(16) + '';\n\t    if (hex.length < 2) {\n\t      return '0' + hex;\n\t    } else {\n\t      return hex;\n\t    }\n\t  },\n\t```\n#### å‚è€ƒæ–‡çŒ®\n- [phg1024 JavaScriptå›¾åƒå¤„ç†(6) - å‡è‰²ç®—æ³•(Color Reduction)](https://blog.csdn.net/u012843346/article/details/16839649)\n- [è·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„æ’ä»¶](https://github.com/whoiam2007s/ImgMainColor)\n- å…¶å®ä¹Ÿå¯ä»¥åˆ©ç”¨ [CSSæ–°ç‰¹æ€§å»æ”¹å˜èƒŒæ™¯é¢œè‰²](https://blog.csdn.net/nanhupatar/article/details/82793637)ï¼Œæ¯”å¦‚é«˜æ–¯æ¨¡ç³Šç­‰æ¥è¾¾åˆ°ä¸šåŠ¡éœ€æ±‚\n#### å†™åœ¨åé¢\n- å‘¨å…­å¬äº†ä¸€å¤© John Lennon æ­Œæ›²ã€è¿™ä¹Ÿæ˜¯æˆ‘æ‹–æ›´çš„åŸå› ğŸ˜¶ ç¾¡æ…•ä»–å’Œ Yoko é‚£æ®µä¼Šç”¸å›­èˆ¬çš„çˆ±æƒ…ï¼Œä»–å¯¹ Yoko çš„ç—´çˆ±ï¼Œä»–å’Œæ¯äº²çš„ä¸¤æ¬¡åˆ†åˆ«æ„ŸåŒèº«å—ï¼ŒBeatlesåœ¨ä¸€èµ·åšéŸ³ä¹çš„æ¬¢ä¹ï¼Œä»–å¯¹ Sean çš„å® æººçˆ¶çˆ±ï¼Œä½†ä»–çš„äººç”Ÿå´åœ¨ä¸€æ¬¡æªæ€åæˆ›ç„¶è€Œæ­¢ï¼Œå¿ƒç—› å¿ƒç—› ğŸŒ§\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n---\n","slug":"å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ","published":1,"updated":"2020-04-05T04:07:14.441Z","_id":"ck8mixuo50000e6p35ux42r40","comments":1,"layout":"post","photos":[],"link":"","content":"<h4 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h4><ul>\n<li>æ˜¯çš„æˆ‘è¦å¼€å§‹åšï¼šæ ¹æ®å›¾ç‰‡çš„ä¸»è‰²è°ƒæ¥æ”¹å˜ä¸€ä¸‹é¡µé¢èƒŒæ™¯é¢œè‰²äº†ğŸ™†</li>\n<li>è®°å½•ä¸€ä¸‹ï¼Œè‡ªå·±ç¢°åˆ°çš„é—®é¢˜ä»¥åŠæ€è€ƒ</li>\n<li>æ—¶é—´å¤šçš„è¯ï¼Œä¼šè€ƒè™‘å°†ä»£ç å‘åœ¨githubï¼Œæ¬¢è¿å¤§å®¶å»starğŸ˜˜</li>\n</ul>\n<hr>\n<h4 id=\"å¼€å‘å‡†å¤‡\"><a href=\"#å¼€å‘å‡†å¤‡\" class=\"headerlink\" title=\"å¼€å‘å‡†å¤‡\"></a>å¼€å‘å‡†å¤‡</h4><ul>\n<li>ç†ä¸€ä¸‹æ€è·¯<ol>\n<li>å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvas</li>\n<li>é€šè¿‡canvasçš„getImageDataè·å–å›¾ç‰‡çš„åƒç´ æ•°æ®<ul>\n<li><a href=\"https://blog.csdn.net/Elle_Peng/article/details/105030971\" target=\"_blank\" rel=\"noopener\">canvas 2d ä¸æ—§ç‰ˆ canvas å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasçš„ä¸¤ç§æ–¹æ³•å®è·µ</a></li>\n</ul>\n</li>\n<li>åˆ†æç›®å‰ä¸»è¦ç”¨äºè·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„ç®—æ³•ï¼Œå¹¶å®è·µ</li>\n<li>å¾—åˆ°ä¸»è¦è‰²è°ƒï¼Œå†å°†rgbè½¬æ¢æˆhsbï¼Œå¹¶å¯¹bå€¼ï¼Œè¿›è¡Œä¿®æ”¹ï¼Œåˆ¶ä½œæ¸å˜ï¼Œå·¦ä¾§35ï¼Œå³ä¾§15<ul>\n<li>å—¯ï¼Œç¥æˆ‘æˆåŠŸ<h4 id=\"é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯-å‡è‰²ç®—æ³•\"><a href=\"#é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯-å‡è‰²ç®—æ³•\" class=\"headerlink\" title=\"é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•\"></a>é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•</h4></li>\n<li><a href=\"http://www.360doc.com/content/17/0417/19/41797635_646363886.shtml\" target=\"_blank\" rel=\"noopener\">é¢œè‰²ç©ºé—´ RGB CMY HSV HSL LAB</a></li>\n<li>å›¾ç‰‡é¢œè‰²é‡åŒ–ç®—æ³•</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>æ¯”è¾ƒå¸¸è§çš„åº”ç”¨å°±æ˜¯ç”¨äºæå–å›¾ç‰‡çš„ä¸»è‰²è°ƒç”¨äºä¸Šè‰²é…è‰²,å½“ç„¶ä¹Ÿå¯ä»¥ç”¨äºå›¾åƒåˆ†å‰²</li>\n<li>ä¸»æµç®—æ³•<ul>\n<li>ä¸¤ä¸ªå¤§æ–¹å‘</li>\n<li><strong>åœ¨é¢œè‰²ç©ºé—´åˆç†åœ°é€‰å–é‡‡æ ·ç‚¹æ¥æ„é€ é¢œè‰²è¡¨ï¼Œä½¿å¾—å‡è‰²åçš„å›¾åƒå’ŒåŸå›¾å°½å¯èƒ½åœ°æ¥è¿‘</strong><ul>\n<li>ç›´æ¥é‡åŒ–<ul>\n<li>å¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£</li>\n</ul>\n</li>\n<li>ç»Ÿè®¡é‡åŒ–<ul>\n<li>æ ¸å¿ƒï¼šè°ƒæ•´ç›´æ–¹å›¾ä½¿å¾—ç´¯ç§¯åˆ†å¸ƒæ›²çº¿å‘ˆçº¿æ€§ï¼Œä»è€Œä½¿å›¾åƒåƒç´ ç‚¹çš„äº®åº¦å€¼å°½å¯èƒ½å‡åŒ€åœ°åˆ†å¸ƒ</li>\n<li>åˆ©ç”¨åŸå›¾çš„ç›´æ–¹å›¾æ¥å¼•å¯¼é‡‡æ ·ç‚¹çš„é€‰å–ï¼Œä½¿å¾—æ¯ä¸ªé‡‡æ ·ç‚¹å¯ä»¥å¤§è‡´è¦†ç›–ç›¸åŒæ•°é‡çš„åƒç´ ç‚¹</li>\n<li>å¯¹æ¯ä¸ªé¢œè‰²é€šé“å»ºç«‹ç›´æ–¹å›¾ï¼Œç„¶åæ ¹æ®è¿™äº›ç›´æ–¹å›¾å¯¹å„ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡‡æ ·ï¼Œåœ¨åƒç´ å€¼åˆ†å¸ƒå¤šçš„åŒºåŸŸè¿›è¡Œå¯†é›†é‡‡æ ·ï¼Œåˆ«çš„åŒºåŸŸç¨€ç–é‡‡æ ·ï¼Œå†åˆ©ç”¨è¿™äº›é‡‡æ ·ç‚¹æ¥ç»„åˆæˆæœ€ç»ˆçš„é¢œè‰²è¡¨ï¼ŒåŸå›¾ä¸­çš„æ¯ä¸ªåƒç´ ç‚¹ç”¨é¢œè‰²è¡¨ä¸­æœ€æ¥è¿‘çš„é¢œè‰²æ›¿æ¢æ‰</li>\n</ul>\n</li>\n<li>é¢œè‰²ç©ºé—´åˆ†å‰²(Median-Cut)<ul>\n<li>æ ¸å¿ƒï¼šåœ¨é¢œè‰²ç©ºé—´å»ºç«‹ä¸€æ£µäºŒå‰æ ‘ï¼Œé€šè¿‡ä¸æ–­åœ°ç»†åŒ–è¿™æ£µæ ‘æ¥è¿‘ä¼¼å¾—åˆ°ä¸€ä¸ªé¢œè‰²ä¸‰ç»´ç›´æ–¹å›¾ï¼Œç„¶åå†æ ¹æ®è¿™æ£µæ ‘æ¥åˆ†é…é‡‡æ ·ç‚¹</li>\n<li>åŸºäºå›¾åƒé¢œè‰²æ ·æœ¬åˆ†å¸ƒçš„è‡ªé€‚åº”æ–¹æ³•ï¼Œä¸è®ºå›¾åƒä¸­é¢œè‰²æ ·æœ¬çš„åˆ†å¸ƒå¦‚ä½•ï¼Œæ€»æ˜¯å¯ä»¥ç”Ÿæˆä¸€ä¸ªå’Œé¢œè‰²æ ·æœ¬åˆ†å¸ƒåŒ¹é…è‰¯å¥½çš„é¢œè‰²è¡¨ï¼šåœ¨é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸå†…é‡‡æ ·ç‚¹åˆ†å¸ƒä¹Ÿç›¸å¯¹å¯†é›†ï¼Œå…¶ä»–åŒºåŸŸåˆ™åˆ†é…äº†è¾ƒå°‘çš„é‡‡æ ·ç‚¹ã€‚ä¸”ç›¸åŒæ•°ç›®çš„é¢œè‰²æ ·æœ¬æ€»æ˜¯ç”¨åŒæ ·æ•°é‡çš„é‡‡æ ·ç‚¹æ¥ä»£è¡¨ï¼Œæ‰€ä»¥é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸï¼Œé‡‡æ ·ç‚¹çš„æ•°é‡è‡ªç„¶å°±ä¼šå¤šï¼Œåä¹‹åˆ™ç›¸åº”çš„æ¯”è¾ƒå°‘</li>\n<li>æœ€é‡è¦ã€åº”ç”¨æœ€å¹¿æ³›çš„å‡è‰²ç®—æ³•ä¹‹ä¸€</li>\n</ul>\n</li>\n<li>kå‡å€¼èšç±»(k-Means clustering)<ul>\n<li>æ ¸å¿ƒï¼šå°†åƒç´ æŒ‰é¢œè‰²çš„ç›¸ä¼¼ç¨‹åº¦å½’ç±»</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>ä»ä¸€ä¸ªåˆå§‹çš„é¢œè‰²è¡¨å‡ºå‘ï¼Œé€šè¿‡ä¸æ–­ä¿®æ”¹é¢œè‰²è¡¨æ¥æ”¹å–„å‡è‰²æ•ˆæœ</strong><ul>\n<li>ç¥ç»ç½‘ç»œæ–¹æ³•(ANN)<ul>\n<li>é¢œè‰²è¡¨é€šè¿‡ç¥ç»å…ƒæ¥ç¼–ç ï¼Œé€šè¿‡ç¼“æ…¢çš„è°ƒèŠ‚ç¥ç»å…ƒçš„é¢œè‰²å€¼ä»¥ä¿è¯æ•´ä¸ªç¥ç»ç½‘ç»œé€æ­¥æ”¶æ•›äºæœ€å°è¯¯å·®çŠ¶æ€ï¼ˆå³é€šè¿‡ç¥ç»ç½‘ç»œäº§ç”Ÿçš„å›¾åƒå’ŒåŸå›¾ä¹‹é—´è¯¯å·®æœ€å°ï¼‰<h4 id=\"ç›´æ¥é‡åŒ–å®è·µ\"><a href=\"#ç›´æ¥é‡åŒ–å®è·µ\" class=\"headerlink\" title=\"ç›´æ¥é‡åŒ–å®è·µ\"></a>ç›´æ¥é‡åŒ–å®è·µ</h4><ul>\n<li>é¦–å…ˆæˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€çœ‹getImageDataåçš„æ•°æ®</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzljZjVjMjQzMDI0NmE0YjE0YzFlYmMzMjYwZDkwYTgwNTQzMDIucG5n?x-oss-process=image/format,png\" alt=\"getImageDataæ•°æ®\"></li>\n<li>å¯ä»¥ç®€å•çœ‹ä½œæ˜¯å¤–å±‚å¾ªç¯ä¸ºrgbaçš„æ‰“å¹³äº†äºŒç»´æ•°ç»„<ul>\n<li>å¦‚æœæŒ‰æ»¡è¶³éœ€æ±‚åšï¼Œåªè¦ä¸€ä¸ªä¸»è‰²è°ƒçš„è¯ï¼Œå¯ä»¥æŠŠæ•´ä¸ªgetImageDataè·å¾—çš„æ•°æ®ï¼Œè¿›è¡Œå„ä¸ªé€šé“çš„å¹³å‡å€¼æ±‚å€¼ï¼Œå†æ‹¼æ¥ï¼Œåƒè¿™æ ·<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getUniqueColor(imageData) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_r = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_g = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_b = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_a = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; imageData.length; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">       res_r += imageData[i]</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">       res_g += imageData[i]</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">       res_b += imageData[i]</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">       res_a += imageData[i]</span><br><span class=\"line\">     &#125; </span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   res_r = <span class=\"built_in\">Math</span>.round(res_r / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   res_g =  <span class=\"built_in\">Math</span>.round(res_g / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   res_b =  <span class=\"built_in\">Math</span>.round(res_b / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   res_a =  <span class=\"built_in\">Math</span>.round(res_a / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_r'</span>, res_r)</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_g'</span>, res_g)</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_b'</span>, res_b)</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_a'</span>, res_a)</span><br><span class=\"line\"> &#125;,</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzc4NzFiOTVmYzA4NWQ3NGQwNDc4OWY0ZWI5Yzc0YThmNzQ5OTYucG5n?x-oss-process=image/format,png\" alt=\"æš´åŠ›æ³•æ±‚ä¸»è‰²è°ƒ\"></li>\n<li>æ— ç›¸å…³ç‚¹è¶Šå¤šï¼Œè¯¯å·®è¶Šå¤§ğŸ‘<ul>\n<li>æˆ‘ä»¬å¯ä»¥â€œå¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£â€<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> COLOR_SIZE = <span class=\"number\">40</span> <span class=\"comment\">// å•ä½è‰²å—çš„å¤§å°ï¼ˆåƒç´ ä¸ªæ•°ï¼Œé»˜è®¤40ï¼‰ã€‚ä»¥å•ä½è‰²å—çš„å¹³å‡åƒç´ å€¼ä¸ºä½œä¸ºç»Ÿè®¡å•ä½</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> LEVEL = <span class=\"number\">32</span> <span class=\"comment\">// è‰²æ·±ï¼Œé¢œè‰²åˆ†åŒºå‚æ•°ï¼ˆ0-255ï¼‰ï¼Œæ€»256ï¼Œ2^8ï¼Œå³8bitï¼Œ4ä¸ªé€šé“ï¼ˆrgbaï¼‰ï¼Œå³é»˜è®¤è‰²æ·±4*8bitï¼Œ32bit</span></span><br><span class=\"line\"><span class=\"comment\">// åˆ†åŒºå—ï¼Œå¯ä»¥æ‹“å±•æ€§çš„æ±‚ä¸»è¦è‰²æ¿ï¼Œç”¨æ¥åšpalette</span></span><br><span class=\"line\">   <span class=\"keyword\">const</span> mapData = that.getLevelData(imageData);</span><br><span class=\"line\">   <span class=\"keyword\">const</span> colors = that.getMostColor(mapData);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!colors) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">return</span></span><br><span class=\"line\">   &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">     <span class=\"keyword\">const</span> color = that.getAverageColor(colors)</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(<span class=\"string\">'color'</span>, color)</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å°†getImageDataæ•°æ®åˆ†æˆç‰¹å®šå¤§å°çš„åŒºå—ï¼Œåˆ†åˆ«ç®—å‡ºå„ä¸ªåŒºå—çš„averageColorï¼Œå†åˆ©ç”¨mapç‰¹æ€§ï¼Œå°†averageColorä½œkeyï¼Œcountå„ä¸ªaverageColorä¸ªæ•°  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è·å–æ¯æ®µçš„é¢œè‰²æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">// æ ¹æ®åƒç´ æ•°æ®ï¼ŒæŒ‰å•ä½è‰²å—è¿›è¡Œåˆ‡å‰²</span></span><br><span class=\"line\">getLevelData(imageData) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> len = imageData.length;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> mapData = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; len; i += COLOR_SIZE * <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> blockColor = <span class=\"keyword\">this</span>.getBlockColor(imageData, i); <span class=\"comment\">// è¯¥åŒºå—å¹³å‡rgba [&#123;r,g,b,a&#125;]æ•°æ®</span></span><br><span class=\"line\">    <span class=\"comment\">// è·å–å„ä¸ªåŒºå—çš„å¹³å‡rgbaæ•°æ®ï¼Œå°†å„ä¸ªé€šé“çš„é¢œè‰²è¿›è¡ŒLEVELè‰²æ·±é™çº§</span></span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®r_g_b_a å»ºç«‹mapç´¢å¼•</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> key = <span class=\"keyword\">this</span>.getColorLevel(blockColor);</span><br><span class=\"line\">    !mapData[key] &amp;&amp; (mapData[key] = []);</span><br><span class=\"line\">    mapData[key].push(blockColor);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> mapData;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">// è·å–å•ä½å—çš„å…¨éƒ¨è‰²å€¼</span></span><br><span class=\"line\"><span class=\"comment\">// å¹¶æ ¹æ®å…¨éƒ¨è‰²å€¼ï¼Œè®¡ç®—å¹³å‡è‰²å€¼</span></span><br><span class=\"line\"><span class=\"comment\">// å¤„ç†æœ€åè¾¹ç•Œå€¼ï¼Œå°äºCOLOR_SIZE</span></span><br><span class=\"line\">getBlockColor(imageData, start) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> data = [],</span><br><span class=\"line\">    count = COLOR_SIZE,</span><br><span class=\"line\">    len = COLOR_SIZE * <span class=\"number\">4</span>;</span><br><span class=\"line\">  imageData.length &lt;= start + len &amp;&amp; (count = <span class=\"built_in\">Math</span>.floor((imageData.length - start - <span class=\"number\">1</span>) / <span class=\"number\">4</span>));</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; count; i += <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">    data.push(&#123;</span><br><span class=\"line\">      r: imageData[start + i + <span class=\"number\">0</span>],</span><br><span class=\"line\">      g: imageData[start + i + <span class=\"number\">1</span>],</span><br><span class=\"line\">      b: imageData[start + i + <span class=\"number\">2</span>],</span><br><span class=\"line\">      a: imageData[start + i + <span class=\"number\">3</span>]</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.getAverageColor(data);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">// å–å‡ºå„ä¸ªé€šé“çš„å¹³å‡å€¼ï¼Œå³ä¸ºæ”¹è‰²å—çš„å¹³å‡è‰²å€¼</span></span><br><span class=\"line\">getAverageColor(colorArr) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> len = colorArr.length;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sr = <span class=\"number\">0</span>, sg = <span class=\"number\">0</span>, sb = <span class=\"number\">0</span>, sa = <span class=\"number\">0</span>;</span><br><span class=\"line\">  colorArr.map(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">item</span>) </span>&#123;</span><br><span class=\"line\">    sr += item.r;</span><br><span class=\"line\">    sg += item.g;</span><br><span class=\"line\">    sb += item.b;</span><br><span class=\"line\">    sa += item.a;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    r: <span class=\"built_in\">Math</span>.round(sr / len),</span><br><span class=\"line\">    g: <span class=\"built_in\">Math</span>.round(sg / len),</span><br><span class=\"line\">    b: <span class=\"built_in\">Math</span>.round(sb / len),</span><br><span class=\"line\">    a: <span class=\"built_in\">Math</span>.round(sa / len)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">getColorLevel(color) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.getLevel(color.r) + <span class=\"string\">'_'</span> + <span class=\"keyword\">this</span>.getLevel(color.g) + <span class=\"string\">'_'</span> + <span class=\"keyword\">this</span>.getLevel(color.b) + <span class=\"string\">'_'</span> + <span class=\"keyword\">this</span>.getLevel(color.a)</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">// è‰²æ·±é™çº§</span></span><br><span class=\"line\">getLevel(value) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.round(value / LEVEL)</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></li>\n<li>æŠŠå‡ºç°æ¬¡æ•°æœ€å¤šçš„averageColoråŒºå—ï¼Œä½œä¸ºé‡‡æ ·åŒºå—ï¼Œå†è·å–ä¸€éaverageColorï¼Œå³æ˜¯æœ€ç»ˆä¸»è‰²è°ƒ  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ ¹æ®è‰²å—é¢œè‰²ï¼Œè·å–</span></span><br><span class=\"line\">getMostColor(colorData) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> rst = <span class=\"literal\">null</span>, len = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> colorData) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'colorData[key].length'</span>, colorData[key].length)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'colorData[key].length'</span>, colorData[key])</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'colorData[key].length'</span>, key)</span><br><span class=\"line\">    colorData[key].length &gt; len &amp;&amp; (</span><br><span class=\"line\">      rst = colorData[key],</span><br><span class=\"line\">      len = colorData[key].length</span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rst;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2ViYzI3MmNkNzU2NjNhODUxYmM2MWQ0MDE4OWJjZGI3NzQ5NDUucG5n?x-oss-process=image/format,png\" alt=\"åŒºå—è·å–ä¸»è‰²è°ƒ\"></li>\n<li>é¢œè‰²å¯ä¿¡åº¦æé«˜äº†å¾ˆå¤š<h4 id=\"æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\"><a href=\"#æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\" class=\"headerlink\" title=\"æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\"></a>æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ</h4><ul>\n<li>æ ¸å¿ƒï¼šå°†<strong>ä¸‰é€šé“è½¬æˆå•é€šé“</strong>å³å¯<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> greyImageData = that.greyTheImage(imageData)</span><br><span class=\"line\">   wx.canvasPutImageData(&#123;</span><br><span class=\"line\">     canvasId: <span class=\"string\">'myCanvas'</span>,</span><br><span class=\"line\">     x: <span class=\"number\">150</span>,</span><br><span class=\"line\">     y: <span class=\"number\">0</span>,</span><br><span class=\"line\">     width: <span class=\"number\">150</span>,</span><br><span class=\"line\">     height: <span class=\"number\">100</span>,</span><br><span class=\"line\">     data: greyImageData,</span><br><span class=\"line\">     success (res) &#123;</span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(<span class=\"string\">'canvasPutImageData it worked!'</span>)</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"> greyTheImage(imageData) &#123;</span><br><span class=\"line\">     <span class=\"comment\">// imageDataæœ‰4ä¸ªé€šé“rgba</span></span><br><span class=\"line\">     <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; imageData.length; i += <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">let</span> sum_rgb = <span class=\"number\">0</span></span><br><span class=\"line\">       <span class=\"comment\">// ä½†æˆ‘ä»¬åªéœ€è¦rgbä¸‰é€šé“ï¼Œa-alphaé€šé“æ— ç”¨</span></span><br><span class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">3</span>; j += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">         sum_rgb = sum_rgb + imageData[i + j]</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">let</span> grey = <span class=\"built_in\">Math</span>.round(sum_rgb / <span class=\"number\">3</span>)</span><br><span class=\"line\">       imageData[i] = grey</span><br><span class=\"line\">       imageData[i + <span class=\"number\">1</span>] = grey</span><br><span class=\"line\">       imageData[i + <span class=\"number\">2</span>] = grey</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> imageData</span><br><span class=\"line\"> &#125;,</span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<br><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmNWJhNzk2OTJjOWEwOTA2MDNlMzkxMzBlMDRiZTY4MTAwNzcwLnBuZw?x-oss-process=image/format,png\" alt=\"åŒ»å­¦ç°è‰²å½±åƒ\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"æ ¼å¼åŒ–rgbaè¾“å‡º\"><a href=\"#æ ¼å¼åŒ–rgbaè¾“å‡º\" class=\"headerlink\" title=\"æ ¼å¼åŒ–rgbaè¾“å‡º\"></a>æ ¼å¼åŒ–rgbaè¾“å‡º</h4><ul>\n<li>åƒè¿™æ ·<img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxNDVhYzM4YzQ1MjFkNDgzNGNkZGQ5NTNmNjQ1MWQ3NTI0NTkucG5n?x-oss-process=image/format,png\" alt=\"æ ¼å¼åŒ–rgbaè¾“å‡º\">  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¯¹æœ€ç»ˆé¢œè‰²çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * result:&#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *   hex:'#ffffff',            åå…­ä½å€¼</span></span><br><span class=\"line\"><span class=\"comment\"> *   hexa:'#ffffff00',         åå…­ä½å€¼å¸¦alphaå€¼</span></span><br><span class=\"line\"><span class=\"comment\"> *   rgb:'rgb(0,0,0)',         RGBå€¼</span></span><br><span class=\"line\"><span class=\"comment\"> *   rgba:'rgba(0,0,0,0)'      RGBå€¼å¸¦alphaå€¼</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">colorStrFormat(color) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> rgba = <span class=\"string\">'rgba('</span> + color.r + <span class=\"string\">','</span> + color.g + <span class=\"string\">','</span> + color.b + <span class=\"string\">','</span> + (color.a / <span class=\"number\">255</span>).toFixed(<span class=\"number\">4</span>).replace(<span class=\"regexp\">/\\.*0+$/</span>, <span class=\"string\">''</span>) + <span class=\"string\">')'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> rgb = <span class=\"string\">'rgb('</span> + color.r + <span class=\"string\">','</span> + color.g + <span class=\"string\">','</span> + color.b + <span class=\"string\">')'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> hex = <span class=\"string\">'#'</span> + <span class=\"keyword\">this</span>.Num2Hex(color.r) + <span class=\"keyword\">this</span>.Num2Hex(color.g) + <span class=\"keyword\">this</span>.Num2Hex(color.b);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> hexa = hex + <span class=\"keyword\">this</span>.Num2Hex(color.a);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    rgba: rgba,</span><br><span class=\"line\">    rgb: rgb,</span><br><span class=\"line\">    hex: hex,</span><br><span class=\"line\">    hexa: hexa</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t</span><br><span class=\"line\">Num2Hex(num) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> hex = num.toString(<span class=\"number\">16</span>) + <span class=\"string\">''</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (hex.length &lt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'0'</span> + hex;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> hex;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h4 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h4></li>\n<li><a href=\"https://blog.csdn.net/u012843346/article/details/16839649\" target=\"_blank\" rel=\"noopener\">phg1024 JavaScriptå›¾åƒå¤„ç†(6) - å‡è‰²ç®—æ³•(Color Reduction)</a></li>\n<li><a href=\"https://github.com/whoiam2007s/ImgMainColor\" target=\"_blank\" rel=\"noopener\">è·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„æ’ä»¶</a></li>\n<li>å…¶å®ä¹Ÿå¯ä»¥åˆ©ç”¨ <a href=\"https://blog.csdn.net/nanhupatar/article/details/82793637\" target=\"_blank\" rel=\"noopener\">CSSæ–°ç‰¹æ€§å»æ”¹å˜èƒŒæ™¯é¢œè‰²</a>ï¼Œæ¯”å¦‚é«˜æ–¯æ¨¡ç³Šç­‰æ¥è¾¾åˆ°ä¸šåŠ¡éœ€æ±‚<h4 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h4></li>\n<li>å‘¨å…­å¬äº†ä¸€å¤© John Lennon æ­Œæ›²ã€è¿™ä¹Ÿæ˜¯æˆ‘æ‹–æ›´çš„åŸå› ğŸ˜¶ ç¾¡æ…•ä»–å’Œ Yoko é‚£æ®µä¼Šç”¸å›­èˆ¬çš„çˆ±æƒ…ï¼Œä»–å¯¹ Yoko çš„ç—´çˆ±ï¼Œä»–å’Œæ¯äº²çš„ä¸¤æ¬¡åˆ†åˆ«æ„ŸåŒèº«å—ï¼ŒBeatlesåœ¨ä¸€èµ·åšéŸ³ä¹çš„æ¬¢ä¹ï¼Œä»–å¯¹ Sean çš„å® æººçˆ¶çˆ±ï¼Œä½†ä»–çš„äººç”Ÿå´åœ¨ä¸€æ¬¡æªæ€åæˆ›ç„¶è€Œæ­¢ï¼Œå¿ƒç—› å¿ƒç—› ğŸŒ§</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h4><ul>\n<li>æ˜¯çš„æˆ‘è¦å¼€å§‹åšï¼šæ ¹æ®å›¾ç‰‡çš„ä¸»è‰²è°ƒæ¥æ”¹å˜ä¸€ä¸‹é¡µé¢èƒŒæ™¯é¢œè‰²äº†ğŸ™†</li>\n<li>è®°å½•ä¸€ä¸‹ï¼Œè‡ªå·±ç¢°åˆ°çš„é—®é¢˜ä»¥åŠæ€è€ƒ</li>\n<li>æ—¶é—´å¤šçš„è¯ï¼Œä¼šè€ƒè™‘å°†ä»£ç å‘åœ¨githubï¼Œæ¬¢è¿å¤§å®¶å»starğŸ˜˜</li>\n</ul>\n<hr>\n<h4 id=\"å¼€å‘å‡†å¤‡\"><a href=\"#å¼€å‘å‡†å¤‡\" class=\"headerlink\" title=\"å¼€å‘å‡†å¤‡\"></a>å¼€å‘å‡†å¤‡</h4><ul>\n<li>ç†ä¸€ä¸‹æ€è·¯<ol>\n<li>å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvas</li>\n<li>é€šè¿‡canvasçš„getImageDataè·å–å›¾ç‰‡çš„åƒç´ æ•°æ®<ul>\n<li><a href=\"https://blog.csdn.net/Elle_Peng/article/details/105030971\" target=\"_blank\" rel=\"noopener\">canvas 2d ä¸æ—§ç‰ˆ canvas å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasçš„ä¸¤ç§æ–¹æ³•å®è·µ</a></li>\n</ul>\n</li>\n<li>åˆ†æç›®å‰ä¸»è¦ç”¨äºè·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„ç®—æ³•ï¼Œå¹¶å®è·µ</li>\n<li>å¾—åˆ°ä¸»è¦è‰²è°ƒï¼Œå†å°†rgbè½¬æ¢æˆhsbï¼Œå¹¶å¯¹bå€¼ï¼Œè¿›è¡Œä¿®æ”¹ï¼Œåˆ¶ä½œæ¸å˜ï¼Œå·¦ä¾§35ï¼Œå³ä¾§15<ul>\n<li>å—¯ï¼Œç¥æˆ‘æˆåŠŸ<h4 id=\"é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯-å‡è‰²ç®—æ³•\"><a href=\"#é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯-å‡è‰²ç®—æ³•\" class=\"headerlink\" title=\"é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•\"></a>é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•</h4></li>\n<li><a href=\"http://www.360doc.com/content/17/0417/19/41797635_646363886.shtml\" target=\"_blank\" rel=\"noopener\">é¢œè‰²ç©ºé—´ RGB CMY HSV HSL LAB</a></li>\n<li>å›¾ç‰‡é¢œè‰²é‡åŒ–ç®—æ³•</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>æ¯”è¾ƒå¸¸è§çš„åº”ç”¨å°±æ˜¯ç”¨äºæå–å›¾ç‰‡çš„ä¸»è‰²è°ƒç”¨äºä¸Šè‰²é…è‰²,å½“ç„¶ä¹Ÿå¯ä»¥ç”¨äºå›¾åƒåˆ†å‰²</li>\n<li>ä¸»æµç®—æ³•<ul>\n<li>ä¸¤ä¸ªå¤§æ–¹å‘</li>\n<li><strong>åœ¨é¢œè‰²ç©ºé—´åˆç†åœ°é€‰å–é‡‡æ ·ç‚¹æ¥æ„é€ é¢œè‰²è¡¨ï¼Œä½¿å¾—å‡è‰²åçš„å›¾åƒå’ŒåŸå›¾å°½å¯èƒ½åœ°æ¥è¿‘</strong><ul>\n<li>ç›´æ¥é‡åŒ–<ul>\n<li>å¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£</li>\n</ul>\n</li>\n<li>ç»Ÿè®¡é‡åŒ–<ul>\n<li>æ ¸å¿ƒï¼šè°ƒæ•´ç›´æ–¹å›¾ä½¿å¾—ç´¯ç§¯åˆ†å¸ƒæ›²çº¿å‘ˆçº¿æ€§ï¼Œä»è€Œä½¿å›¾åƒåƒç´ ç‚¹çš„äº®åº¦å€¼å°½å¯èƒ½å‡åŒ€åœ°åˆ†å¸ƒ</li>\n<li>åˆ©ç”¨åŸå›¾çš„ç›´æ–¹å›¾æ¥å¼•å¯¼é‡‡æ ·ç‚¹çš„é€‰å–ï¼Œä½¿å¾—æ¯ä¸ªé‡‡æ ·ç‚¹å¯ä»¥å¤§è‡´è¦†ç›–ç›¸åŒæ•°é‡çš„åƒç´ ç‚¹</li>\n<li>å¯¹æ¯ä¸ªé¢œè‰²é€šé“å»ºç«‹ç›´æ–¹å›¾ï¼Œç„¶åæ ¹æ®è¿™äº›ç›´æ–¹å›¾å¯¹å„ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡‡æ ·ï¼Œåœ¨åƒç´ å€¼åˆ†å¸ƒå¤šçš„åŒºåŸŸè¿›è¡Œå¯†é›†é‡‡æ ·ï¼Œåˆ«çš„åŒºåŸŸç¨€ç–é‡‡æ ·ï¼Œå†åˆ©ç”¨è¿™äº›é‡‡æ ·ç‚¹æ¥ç»„åˆæˆæœ€ç»ˆçš„é¢œè‰²è¡¨ï¼ŒåŸå›¾ä¸­çš„æ¯ä¸ªåƒç´ ç‚¹ç”¨é¢œè‰²è¡¨ä¸­æœ€æ¥è¿‘çš„é¢œè‰²æ›¿æ¢æ‰</li>\n</ul>\n</li>\n<li>é¢œè‰²ç©ºé—´åˆ†å‰²(Median-Cut)<ul>\n<li>æ ¸å¿ƒï¼šåœ¨é¢œè‰²ç©ºé—´å»ºç«‹ä¸€æ£µäºŒå‰æ ‘ï¼Œé€šè¿‡ä¸æ–­åœ°ç»†åŒ–è¿™æ£µæ ‘æ¥è¿‘ä¼¼å¾—åˆ°ä¸€ä¸ªé¢œè‰²ä¸‰ç»´ç›´æ–¹å›¾ï¼Œç„¶åå†æ ¹æ®è¿™æ£µæ ‘æ¥åˆ†é…é‡‡æ ·ç‚¹</li>\n<li>åŸºäºå›¾åƒé¢œè‰²æ ·æœ¬åˆ†å¸ƒçš„è‡ªé€‚åº”æ–¹æ³•ï¼Œä¸è®ºå›¾åƒä¸­é¢œè‰²æ ·æœ¬çš„åˆ†å¸ƒå¦‚ä½•ï¼Œæ€»æ˜¯å¯ä»¥ç”Ÿæˆä¸€ä¸ªå’Œé¢œè‰²æ ·æœ¬åˆ†å¸ƒåŒ¹é…è‰¯å¥½çš„é¢œè‰²è¡¨ï¼šåœ¨é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸå†…é‡‡æ ·ç‚¹åˆ†å¸ƒä¹Ÿç›¸å¯¹å¯†é›†ï¼Œå…¶ä»–åŒºåŸŸåˆ™åˆ†é…äº†è¾ƒå°‘çš„é‡‡æ ·ç‚¹ã€‚ä¸”ç›¸åŒæ•°ç›®çš„é¢œè‰²æ ·æœ¬æ€»æ˜¯ç”¨åŒæ ·æ•°é‡çš„é‡‡æ ·ç‚¹æ¥ä»£è¡¨ï¼Œæ‰€ä»¥é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸï¼Œé‡‡æ ·ç‚¹çš„æ•°é‡è‡ªç„¶å°±ä¼šå¤šï¼Œåä¹‹åˆ™ç›¸åº”çš„æ¯”è¾ƒå°‘</li>\n<li>æœ€é‡è¦ã€åº”ç”¨æœ€å¹¿æ³›çš„å‡è‰²ç®—æ³•ä¹‹ä¸€</li>\n</ul>\n</li>\n<li>kå‡å€¼èšç±»(k-Means clustering)<ul>\n<li>æ ¸å¿ƒï¼šå°†åƒç´ æŒ‰é¢œè‰²çš„ç›¸ä¼¼ç¨‹åº¦å½’ç±»</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>ä»ä¸€ä¸ªåˆå§‹çš„é¢œè‰²è¡¨å‡ºå‘ï¼Œé€šè¿‡ä¸æ–­ä¿®æ”¹é¢œè‰²è¡¨æ¥æ”¹å–„å‡è‰²æ•ˆæœ</strong><ul>\n<li>ç¥ç»ç½‘ç»œæ–¹æ³•(ANN)<ul>\n<li>é¢œè‰²è¡¨é€šè¿‡ç¥ç»å…ƒæ¥ç¼–ç ï¼Œé€šè¿‡ç¼“æ…¢çš„è°ƒèŠ‚ç¥ç»å…ƒçš„é¢œè‰²å€¼ä»¥ä¿è¯æ•´ä¸ªç¥ç»ç½‘ç»œé€æ­¥æ”¶æ•›äºæœ€å°è¯¯å·®çŠ¶æ€ï¼ˆå³é€šè¿‡ç¥ç»ç½‘ç»œäº§ç”Ÿçš„å›¾åƒå’ŒåŸå›¾ä¹‹é—´è¯¯å·®æœ€å°ï¼‰<h4 id=\"ç›´æ¥é‡åŒ–å®è·µ\"><a href=\"#ç›´æ¥é‡åŒ–å®è·µ\" class=\"headerlink\" title=\"ç›´æ¥é‡åŒ–å®è·µ\"></a>ç›´æ¥é‡åŒ–å®è·µ</h4><ul>\n<li>é¦–å…ˆæˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€çœ‹getImageDataåçš„æ•°æ®</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzljZjVjMjQzMDI0NmE0YjE0YzFlYmMzMjYwZDkwYTgwNTQzMDIucG5n?x-oss-process=image/format,png\" alt=\"getImageDataæ•°æ®\"></li>\n<li>å¯ä»¥ç®€å•çœ‹ä½œæ˜¯å¤–å±‚å¾ªç¯ä¸ºrgbaçš„æ‰“å¹³äº†äºŒç»´æ•°ç»„<ul>\n<li>å¦‚æœæŒ‰æ»¡è¶³éœ€æ±‚åšï¼Œåªè¦ä¸€ä¸ªä¸»è‰²è°ƒçš„è¯ï¼Œå¯ä»¥æŠŠæ•´ä¸ªgetImageDataè·å¾—çš„æ•°æ®ï¼Œè¿›è¡Œå„ä¸ªé€šé“çš„å¹³å‡å€¼æ±‚å€¼ï¼Œå†æ‹¼æ¥ï¼Œåƒè¿™æ ·<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getUniqueColor(imageData) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_r = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_g = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_b = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_a = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; imageData.length; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">       res_r += imageData[i]</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">       res_g += imageData[i]</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">       res_b += imageData[i]</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">       res_a += imageData[i]</span><br><span class=\"line\">     &#125; </span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   res_r = <span class=\"built_in\">Math</span>.round(res_r / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   res_g =  <span class=\"built_in\">Math</span>.round(res_g / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   res_b =  <span class=\"built_in\">Math</span>.round(res_b / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   res_a =  <span class=\"built_in\">Math</span>.round(res_a / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_r'</span>, res_r)</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_g'</span>, res_g)</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_b'</span>, res_b)</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_a'</span>, res_a)</span><br><span class=\"line\"> &#125;,</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzc4NzFiOTVmYzA4NWQ3NGQwNDc4OWY0ZWI5Yzc0YThmNzQ5OTYucG5n?x-oss-process=image/format,png\" alt=\"æš´åŠ›æ³•æ±‚ä¸»è‰²è°ƒ\"></li>\n<li>æ— ç›¸å…³ç‚¹è¶Šå¤šï¼Œè¯¯å·®è¶Šå¤§ğŸ‘<ul>\n<li>æˆ‘ä»¬å¯ä»¥â€œå¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£â€<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> COLOR_SIZE = <span class=\"number\">40</span> <span class=\"comment\">// å•ä½è‰²å—çš„å¤§å°ï¼ˆåƒç´ ä¸ªæ•°ï¼Œé»˜è®¤40ï¼‰ã€‚ä»¥å•ä½è‰²å—çš„å¹³å‡åƒç´ å€¼ä¸ºä½œä¸ºç»Ÿè®¡å•ä½</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> LEVEL = <span class=\"number\">32</span> <span class=\"comment\">// è‰²æ·±ï¼Œé¢œè‰²åˆ†åŒºå‚æ•°ï¼ˆ0-255ï¼‰ï¼Œæ€»256ï¼Œ2^8ï¼Œå³8bitï¼Œ4ä¸ªé€šé“ï¼ˆrgbaï¼‰ï¼Œå³é»˜è®¤è‰²æ·±4*8bitï¼Œ32bit</span></span><br><span class=\"line\"><span class=\"comment\">// åˆ†åŒºå—ï¼Œå¯ä»¥æ‹“å±•æ€§çš„æ±‚ä¸»è¦è‰²æ¿ï¼Œç”¨æ¥åšpalette</span></span><br><span class=\"line\">   <span class=\"keyword\">const</span> mapData = that.getLevelData(imageData);</span><br><span class=\"line\">   <span class=\"keyword\">const</span> colors = that.getMostColor(mapData);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!colors) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">return</span></span><br><span class=\"line\">   &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">     <span class=\"keyword\">const</span> color = that.getAverageColor(colors)</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(<span class=\"string\">'color'</span>, color)</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å°†getImageDataæ•°æ®åˆ†æˆç‰¹å®šå¤§å°çš„åŒºå—ï¼Œåˆ†åˆ«ç®—å‡ºå„ä¸ªåŒºå—çš„averageColorï¼Œå†åˆ©ç”¨mapç‰¹æ€§ï¼Œå°†averageColorä½œkeyï¼Œcountå„ä¸ªaverageColorä¸ªæ•°  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è·å–æ¯æ®µçš„é¢œè‰²æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">// æ ¹æ®åƒç´ æ•°æ®ï¼ŒæŒ‰å•ä½è‰²å—è¿›è¡Œåˆ‡å‰²</span></span><br><span class=\"line\">getLevelData(imageData) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> len = imageData.length;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> mapData = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; len; i += COLOR_SIZE * <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> blockColor = <span class=\"keyword\">this</span>.getBlockColor(imageData, i); <span class=\"comment\">// è¯¥åŒºå—å¹³å‡rgba [&#123;r,g,b,a&#125;]æ•°æ®</span></span><br><span class=\"line\">    <span class=\"comment\">// è·å–å„ä¸ªåŒºå—çš„å¹³å‡rgbaæ•°æ®ï¼Œå°†å„ä¸ªé€šé“çš„é¢œè‰²è¿›è¡ŒLEVELè‰²æ·±é™çº§</span></span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®r_g_b_a å»ºç«‹mapç´¢å¼•</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> key = <span class=\"keyword\">this</span>.getColorLevel(blockColor);</span><br><span class=\"line\">    !mapData[key] &amp;&amp; (mapData[key] = []);</span><br><span class=\"line\">    mapData[key].push(blockColor);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> mapData;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">// è·å–å•ä½å—çš„å…¨éƒ¨è‰²å€¼</span></span><br><span class=\"line\"><span class=\"comment\">// å¹¶æ ¹æ®å…¨éƒ¨è‰²å€¼ï¼Œè®¡ç®—å¹³å‡è‰²å€¼</span></span><br><span class=\"line\"><span class=\"comment\">// å¤„ç†æœ€åè¾¹ç•Œå€¼ï¼Œå°äºCOLOR_SIZE</span></span><br><span class=\"line\">getBlockColor(imageData, start) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> data = [],</span><br><span class=\"line\">    count = COLOR_SIZE,</span><br><span class=\"line\">    len = COLOR_SIZE * <span class=\"number\">4</span>;</span><br><span class=\"line\">  imageData.length &lt;= start + len &amp;&amp; (count = <span class=\"built_in\">Math</span>.floor((imageData.length - start - <span class=\"number\">1</span>) / <span class=\"number\">4</span>));</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; count; i += <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">    data.push(&#123;</span><br><span class=\"line\">      r: imageData[start + i + <span class=\"number\">0</span>],</span><br><span class=\"line\">      g: imageData[start + i + <span class=\"number\">1</span>],</span><br><span class=\"line\">      b: imageData[start + i + <span class=\"number\">2</span>],</span><br><span class=\"line\">      a: imageData[start + i + <span class=\"number\">3</span>]</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.getAverageColor(data);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">// å–å‡ºå„ä¸ªé€šé“çš„å¹³å‡å€¼ï¼Œå³ä¸ºæ”¹è‰²å—çš„å¹³å‡è‰²å€¼</span></span><br><span class=\"line\">getAverageColor(colorArr) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> len = colorArr.length;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sr = <span class=\"number\">0</span>, sg = <span class=\"number\">0</span>, sb = <span class=\"number\">0</span>, sa = <span class=\"number\">0</span>;</span><br><span class=\"line\">  colorArr.map(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">item</span>) </span>&#123;</span><br><span class=\"line\">    sr += item.r;</span><br><span class=\"line\">    sg += item.g;</span><br><span class=\"line\">    sb += item.b;</span><br><span class=\"line\">    sa += item.a;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    r: <span class=\"built_in\">Math</span>.round(sr / len),</span><br><span class=\"line\">    g: <span class=\"built_in\">Math</span>.round(sg / len),</span><br><span class=\"line\">    b: <span class=\"built_in\">Math</span>.round(sb / len),</span><br><span class=\"line\">    a: <span class=\"built_in\">Math</span>.round(sa / len)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">getColorLevel(color) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.getLevel(color.r) + <span class=\"string\">'_'</span> + <span class=\"keyword\">this</span>.getLevel(color.g) + <span class=\"string\">'_'</span> + <span class=\"keyword\">this</span>.getLevel(color.b) + <span class=\"string\">'_'</span> + <span class=\"keyword\">this</span>.getLevel(color.a)</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">// è‰²æ·±é™çº§</span></span><br><span class=\"line\">getLevel(value) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.round(value / LEVEL)</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></li>\n<li>æŠŠå‡ºç°æ¬¡æ•°æœ€å¤šçš„averageColoråŒºå—ï¼Œä½œä¸ºé‡‡æ ·åŒºå—ï¼Œå†è·å–ä¸€éaverageColorï¼Œå³æ˜¯æœ€ç»ˆä¸»è‰²è°ƒ  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ ¹æ®è‰²å—é¢œè‰²ï¼Œè·å–</span></span><br><span class=\"line\">getMostColor(colorData) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> rst = <span class=\"literal\">null</span>, len = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> colorData) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'colorData[key].length'</span>, colorData[key].length)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'colorData[key].length'</span>, colorData[key])</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'colorData[key].length'</span>, key)</span><br><span class=\"line\">    colorData[key].length &gt; len &amp;&amp; (</span><br><span class=\"line\">      rst = colorData[key],</span><br><span class=\"line\">      len = colorData[key].length</span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rst;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2ViYzI3MmNkNzU2NjNhODUxYmM2MWQ0MDE4OWJjZGI3NzQ5NDUucG5n?x-oss-process=image/format,png\" alt=\"åŒºå—è·å–ä¸»è‰²è°ƒ\"></li>\n<li>é¢œè‰²å¯ä¿¡åº¦æé«˜äº†å¾ˆå¤š<h4 id=\"æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\"><a href=\"#æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\" class=\"headerlink\" title=\"æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\"></a>æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ</h4><ul>\n<li>æ ¸å¿ƒï¼šå°†<strong>ä¸‰é€šé“è½¬æˆå•é€šé“</strong>å³å¯<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> greyImageData = that.greyTheImage(imageData)</span><br><span class=\"line\">   wx.canvasPutImageData(&#123;</span><br><span class=\"line\">     canvasId: <span class=\"string\">'myCanvas'</span>,</span><br><span class=\"line\">     x: <span class=\"number\">150</span>,</span><br><span class=\"line\">     y: <span class=\"number\">0</span>,</span><br><span class=\"line\">     width: <span class=\"number\">150</span>,</span><br><span class=\"line\">     height: <span class=\"number\">100</span>,</span><br><span class=\"line\">     data: greyImageData,</span><br><span class=\"line\">     success (res) &#123;</span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(<span class=\"string\">'canvasPutImageData it worked!'</span>)</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"> greyTheImage(imageData) &#123;</span><br><span class=\"line\">     <span class=\"comment\">// imageDataæœ‰4ä¸ªé€šé“rgba</span></span><br><span class=\"line\">     <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; imageData.length; i += <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">let</span> sum_rgb = <span class=\"number\">0</span></span><br><span class=\"line\">       <span class=\"comment\">// ä½†æˆ‘ä»¬åªéœ€è¦rgbä¸‰é€šé“ï¼Œa-alphaé€šé“æ— ç”¨</span></span><br><span class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">3</span>; j += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">         sum_rgb = sum_rgb + imageData[i + j]</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">let</span> grey = <span class=\"built_in\">Math</span>.round(sum_rgb / <span class=\"number\">3</span>)</span><br><span class=\"line\">       imageData[i] = grey</span><br><span class=\"line\">       imageData[i + <span class=\"number\">1</span>] = grey</span><br><span class=\"line\">       imageData[i + <span class=\"number\">2</span>] = grey</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> imageData</span><br><span class=\"line\"> &#125;,</span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<br><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmNWJhNzk2OTJjOWEwOTA2MDNlMzkxMzBlMDRiZTY4MTAwNzcwLnBuZw?x-oss-process=image/format,png\" alt=\"åŒ»å­¦ç°è‰²å½±åƒ\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"æ ¼å¼åŒ–rgbaè¾“å‡º\"><a href=\"#æ ¼å¼åŒ–rgbaè¾“å‡º\" class=\"headerlink\" title=\"æ ¼å¼åŒ–rgbaè¾“å‡º\"></a>æ ¼å¼åŒ–rgbaè¾“å‡º</h4><ul>\n<li>åƒè¿™æ ·<img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxNDVhYzM4YzQ1MjFkNDgzNGNkZGQ5NTNmNjQ1MWQ3NTI0NTkucG5n?x-oss-process=image/format,png\" alt=\"æ ¼å¼åŒ–rgbaè¾“å‡º\">  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¯¹æœ€ç»ˆé¢œè‰²çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * result:&#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *   hex:'#ffffff',            åå…­ä½å€¼</span></span><br><span class=\"line\"><span class=\"comment\"> *   hexa:'#ffffff00',         åå…­ä½å€¼å¸¦alphaå€¼</span></span><br><span class=\"line\"><span class=\"comment\"> *   rgb:'rgb(0,0,0)',         RGBå€¼</span></span><br><span class=\"line\"><span class=\"comment\"> *   rgba:'rgba(0,0,0,0)'      RGBå€¼å¸¦alphaå€¼</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">colorStrFormat(color) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> rgba = <span class=\"string\">'rgba('</span> + color.r + <span class=\"string\">','</span> + color.g + <span class=\"string\">','</span> + color.b + <span class=\"string\">','</span> + (color.a / <span class=\"number\">255</span>).toFixed(<span class=\"number\">4</span>).replace(<span class=\"regexp\">/\\.*0+$/</span>, <span class=\"string\">''</span>) + <span class=\"string\">')'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> rgb = <span class=\"string\">'rgb('</span> + color.r + <span class=\"string\">','</span> + color.g + <span class=\"string\">','</span> + color.b + <span class=\"string\">')'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> hex = <span class=\"string\">'#'</span> + <span class=\"keyword\">this</span>.Num2Hex(color.r) + <span class=\"keyword\">this</span>.Num2Hex(color.g) + <span class=\"keyword\">this</span>.Num2Hex(color.b);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> hexa = hex + <span class=\"keyword\">this</span>.Num2Hex(color.a);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    rgba: rgba,</span><br><span class=\"line\">    rgb: rgb,</span><br><span class=\"line\">    hex: hex,</span><br><span class=\"line\">    hexa: hexa</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t</span><br><span class=\"line\">Num2Hex(num) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> hex = num.toString(<span class=\"number\">16</span>) + <span class=\"string\">''</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (hex.length &lt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'0'</span> + hex;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> hex;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h4 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h4></li>\n<li><a href=\"https://blog.csdn.net/u012843346/article/details/16839649\" target=\"_blank\" rel=\"noopener\">phg1024 JavaScriptå›¾åƒå¤„ç†(6) - å‡è‰²ç®—æ³•(Color Reduction)</a></li>\n<li><a href=\"https://github.com/whoiam2007s/ImgMainColor\" target=\"_blank\" rel=\"noopener\">è·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„æ’ä»¶</a></li>\n<li>å…¶å®ä¹Ÿå¯ä»¥åˆ©ç”¨ <a href=\"https://blog.csdn.net/nanhupatar/article/details/82793637\" target=\"_blank\" rel=\"noopener\">CSSæ–°ç‰¹æ€§å»æ”¹å˜èƒŒæ™¯é¢œè‰²</a>ï¼Œæ¯”å¦‚é«˜æ–¯æ¨¡ç³Šç­‰æ¥è¾¾åˆ°ä¸šåŠ¡éœ€æ±‚<h4 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h4></li>\n<li>å‘¨å…­å¬äº†ä¸€å¤© John Lennon æ­Œæ›²ã€è¿™ä¹Ÿæ˜¯æˆ‘æ‹–æ›´çš„åŸå› ğŸ˜¶ ç¾¡æ…•ä»–å’Œ Yoko é‚£æ®µä¼Šç”¸å›­èˆ¬çš„çˆ±æƒ…ï¼Œä»–å¯¹ Yoko çš„ç—´çˆ±ï¼Œä»–å’Œæ¯äº²çš„ä¸¤æ¬¡åˆ†åˆ«æ„ŸåŒèº«å—ï¼ŒBeatlesåœ¨ä¸€èµ·åšéŸ³ä¹çš„æ¬¢ä¹ï¼Œä»–å¯¹ Sean çš„å® æººçˆ¶çˆ±ï¼Œä½†ä»–çš„äººç”Ÿå´åœ¨ä¸€æ¬¡æªæ€åæˆ›ç„¶è€Œæ­¢ï¼Œå¿ƒç—› å¿ƒç—› ğŸŒ§</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n<hr>\n"},{"layout":"å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚","title":"å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚","date":"2020-04-05T04:04:24.000Z","_content":"\n#### å†™åœ¨å‰é¢\n- å¤§å®¶åº”è¯¥éƒ½çŸ¥é“è¿‡ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œcanvasç­‰åŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œé¡µé¢ä¸­æ— è®ºä½ è®¾ç½®å¤šå¤§çš„z-indexéƒ½æ— æ³•è¦†ç›–åœ¨å…¶ä¹‹ä¸Šï¼Œè¿™å°±å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜\n- å°±åƒè¿™æ ·\n\t- ![canvasé¡¶å±‚é—®é¢˜æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxYmQ5OTM2M2VkYjU1NTRmYjc5MzBlZDllMTA0ZjEwMTc2MDM0LnBuZw?x-oss-process=image/format,png)\n\t- æŸ±çŠ¶å›¾æ˜¯ç”¨canvasç”»çš„ï¼Œå®ƒç½®äºäº†æˆ‘çš„tooltipä¹‹ä¸Šã€‚ã€è¿™çœ‹èµ·æ¥çœŸæ˜¯ä¸€ä¸ªå¯æ€•çš„é—®é¢˜\n---\n\n#### è§£å†³é—®é¢˜\n- å¾®ä¿¡å®˜æ–¹æä¾›äº†[cover-view](https://developers.weixin.qq.com/miniprogram/dev/component/cover-view.html)åŸç”Ÿç»„ä»¶ï¼Œè¦†ç›–åœ¨åŸç”Ÿç»„ä»¶ä¹‹ä¸Šçš„æ–‡æœ¬è§†å›¾\n- å¾®ä¿¡å®˜æ–¹æä¾›äº†å°†canvasè½¬åŒ–ä¸ºå›¾ç‰‡çš„æ–¹å¼--[wx.canvasToTempFilePath](https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html)ï¼Œè¿™æ ·å°±å¯ä»¥â€é™çº§â€œ\n\n\n##### æ–¹æ³•ä¸€ï¼šcover-view\n- å°†tooltipç”¨cover-viewæ”¹å†™ï¼Œæ•ˆæœå¦‚ä¸‹\n\t- ![cover-view version0.1 æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2Y0MTZjZjhlMjNiZWEwMjNjYTM1M2JhOGExMDM1MDM2MzYyOTIucG5n?x-oss-process=image/format,png)\n\t- çœ‹ä¸Šå»ï¼Œæ˜¯è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œä¸”tooltipåçš„ç°è‰²èƒŒæ™¯ä¸èƒ½æ»‘åŠ¨äº†ï¼Œã€å¦ˆè€¶ï¼Œå¥½æ£’ï¼\n\t- ä½†æ˜¯ï¼Œè¿™äº§ç”Ÿäº†ä¸€ä¸ªï¼š**å½“æ–‡æœ¬è¶…å‡ºtooltipå®½åº¦æ—¶ï¼Œscroll-y: autoï¼Œå¤±æ•ˆäº†ï¼Œæº¢å‡ºéƒ¨åˆ†è¢«ç›´æ¥æˆªå–**\n\t- ç½ªé­ç¥¸é¦–å°±æ˜¯å®ƒ\n\t\t- ![coverå†…ç½®æ ·å¼](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2M5ZDljYjZiZTQ0ZGY3YmJmNmRlMjAxNDM1ZmYzOTJjNDMxNDMucG5n?x-oss-process=image/format,png)\n\t- é‚£æˆ‘ä»¬å¯ä»¥ï¼š\n\t\t- åœ¨tooltipåˆ†æ®µå†…å®¹ä¸­åŠ ä¸Š\n\t\t\t```css\n\t\t\t.modal-layer-content-rule {\n\t\t\t    white-space: pre-wrap;\n\t\t\t}\n\t\t\t```\n\t\t- åœ¨å†…å®¹wrapperä¸­åŠ ä¸Š\n\t\t\t```css\n\t\t\t.modal-layer-content {\n\t\t\t    overflow: scroll;\n\t\t\t}\n\t\t\t```\n\t- å®Œç¾è§£å†³\n\t\t- ![cover-viewè§£å†³å›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2FhZjRkMDAyODdjZGI4M2Y0NWRhMGVkOTg3Mzc5MGNhNDQxMjkucG5n?x-oss-process=image/format,png)\n##### æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath\n- é¦–å…ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œå®˜æ–¹å…³äºcanvasç±»å‹æœ‰ä¸¤ç§\n![ä¸¤ç§canvasç±»å‹](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2E4ZjJmNjA5OGYxNmQ4MzY3NWJiN2I3OWY0ZDM1NWM1MTAwMDg3LnBuZw?x-oss-process=image/format,png)\n- æ–°canvas 2Dæ¥å£å°è¯•\n\t```javascript\n\tconst query = wx.createSelectorQuery().in(this)\n    query.select('#myCanvas')\n      .fields({ node: true, size: true })\n      .exec((res) => {\n        const canvas = res[0].node\n        const ctx = canvas.getContext('2d')\n        const img = canvas.createImage()\n        img.onload = () => {\n          ctx.drawImage(img, 0, 0, 100, 100)\n        }\n        img.src = 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'\n        // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n        console.log(ctx.getImageData(0, 0, 150, 100).data)\n      })\n\t```\n\t```html\n\t<canvas type=\"2d\" id=\"myCanvas\" canvas-id=\"myCanvas\"></canvas>\n\t```\n- è¿è¡Œæˆªå›¾![canvas2d è¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzE5ZWE3ZGYxYjg2ODUzOWFhNzVhY2E0OTAxYzI2MzU2OTk4NDYucG5n?x-oss-process=image/format,png)\n- ç¬¬äºŒç§æ—§canvas\n\t```javascript\n\tconst ctx = wx.createCanvasContext('myCanvas')\n    wx.getImageInfo({\n        src: 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg',\n        success: function (res) {\n          console.log('res', res)\n          const poster = res.path                                  \n          ctx.drawImage(poster, 0, 0, 150, 100)\n          ctx.draw()\n        }\n      })\n      // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n      wx.canvasGetImageData({\n        canvasId: 'myCanvas',\n        x: 0,\n        y: 0,\n        width: 150,\n        height: 100,\n        success(res) {\n          console.log(res.width) // 150\n          console.log(res.height) // 100\n          console.log(res.data instanceof Uint8ClampedArray) // true\n          console.log(res.data) // 150 * 100 * 4\n          console.log(res.data.length) // 150 * 100 * 4\n        }\n      })\n\t```\n\t```html\n\t<canvas id=\"myCanvas\" canvas-id=\"myCanvas\"></canvas>\n\t```\n- è¿è¡Œæˆªå›¾![æ—§canvas](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzU4NTg5MzQ4MDc3Njk3OTA0OTRmZmIzOWRiNDdjMWRmNjk4ODQucG5n?x-oss-process=image/format,png)\n- è™½ç„¶ä¸¤ç§æ–¹æ³•ï¼Œéƒ½èƒ½å®ç°å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œä½†æ–°ç‰ˆçš„è¿›è¡Œäº†createImageï¼Œå°†å…¶æ‰“å°çš„è¯ï¼Œå…¶å®å°±æ˜¯æ–°å»ºäº†ä¸€ä¸ªimgæ ‡ç­¾ï¼Œå¹¶å°†imgæ ‡ç­¾çš„ä¸œè¥¿ç»˜åˆ¶è¿›canvas\n\t- ![img console](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzFjMjE1NzMzZTRkY2UzNGZiNzI4NDFhZWEyMDc0ZWIwMjQ1OTQucG5n?x-oss-process=image/format,png)\n\t- ä¸ºä»€ä¹ˆå¾®ä¿¡å®˜æ–¹ä¼šä»…æ”¯æŒä»¥ä¸‹æ–¹å¼è¿›è¡Œæ–°ç‰ˆcanvas2d å›¾ç‰‡çš„ç»˜åˆ¶ï¼Œè€ƒè™‘æ˜¯ä»€ä¹ˆï¼Ÿ\n\t- ![ç»å…¸æŠ¥é”™](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JhYWQ1OWRhNDI4M2FjZmViZTY1NGQ0ZWZiNTAxZDZlMjAxMjE2LnBuZw?x-oss-process=image/format,png)\n- ç°åœ¨æˆ‘ä»¬è¦å°†canvasçš„å†…å®¹å¯¼æˆå›¾ç‰‡ï¼ŒåŒæ ·åˆ†æˆæ–°æ—§ä¸¤ç‰ˆ\n- ä¸»è¦æ€è·¯éƒ½æ˜¯ï¼šåœ¨wxmlä¸­ï¼Œå¦‚æœcanvasç»˜åˆ¶å›¾ç‰‡æ²¡æœ‰å®Œæˆï¼Œåˆ™æ˜¾ç¤ºcanvaså†…å®¹ï¼Œç»˜åˆ¶å®Œæˆåï¼Œå°±åˆ©ç”¨canvasToTempFilePathï¼Œå°†å›¾å±‚å†…å®¹ç”ŸæˆæŒ‡å®šå¤§å°å›¾ç‰‡ï¼Œæ˜¾ç¤ºimage\n\t- canvas2d \n\t\t```javascript\n\t\tconst that = this\n\t    const query = wx.createSelectorQuery().in(this)\n\t    query.select('#myCanvas')\n\t      .fields({ node: true, size: true })\n\t      .exec((res) => {\n\t        const canvas = res[0].node\n\t        const ctx = canvas.getContext('2d')\n\t        const img = canvas.createImage()\n\t        console.log('img', img)\n\t        img.onload = () => {\n\t          ctx.drawImage(img, 0, 0, 100, 100)\n\t            wx.canvasToTempFilePath({\n\t              x: 0,\n\t              y: 0,\n\t              width: 100,\n\t              height: 100,\n\t              destWidth: 100,\n\t              destHeight: 100,\n\t              canvas: canvas,\n\t              success(res) {\n\t                that.setData({\n\t                  imgPath: res.tempFilePath\n\t                })\n\t              },\n\t              fail(err) {\n\t                console.log('err', err)\n\t              }\n\t            })\n\t        }\n\t        img.src = 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'\n\t        // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n\t        console.log(ctx.getImageData(0, 0, 100, 100).data)\n\t      })\n\t\t```\n\t\t```html\n\t\t<canvas wx:if=\"{{!imgPath}}\" type=\"2d\" id=\"myCanvas\" canvas-id=\"myCanvas\" style=\"width: 330px;height: 340px;\"></canvas>\n\t\t<image wx:else src=\"{{imgPath}}\" style=\"width: 330px;height: 340px;\" />\n\t\t```\n\t\t- canvas2d éœ€è¦è¸©å¾—å‘æ˜¯ï¼šå®ƒçš„å®˜æ–¹æ–‡æ¡£ğŸ™ƒ\n\t\t\t- ![canvas2d è½¬å›¾ç‰‡è¯¯å¯¼](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UwM2Q1ZDg0YzYyNmI0NzlmZjBjOTlmNzA1YmRhYjg5NDc5MjcucG5n?x-oss-process=image/format,png)\n\t\t\t- å°è¯•ä¸‹æ¥ï¼Œä¼š\n\t\t\t\t- ![ctx.drawæŠ¥é”™](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxMjRiY2Q3ZmNjYWI5ODBlNDdkMTk2YTMyZGQyODI4NDUzODcucG5n?x-oss-process=image/format,png)\n\t\t\t- é‚£æˆ‘ä»¬å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹\n\t\t\t\t- ![canvas2d tempathæ­£ç¡®å®åŠ›](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxODk5NWFiNDY4N2IwYmZlYzhjZTZkZWU2ZWQxYmZjMTA1MTY1LnBuZw?x-oss-process=image/format,png)è¿™æ‰æ˜¯ç¬¦åˆæˆ‘ä»¬éœ€è¦\n\t\t- è¿è¡Œæˆªå›¾\n\t\t\t- ![canvas2dè¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JmMzVlMzY4YzRjMmRhYTgxNTA0NzM0YTIxZGMxM2I2NDYwNzIucG5n?x-oss-process=image/format,png)\n\t- æ—§ç‰ˆcanvas\n\t\t```javascript\n\t    const ctx = wx.createCanvasContext('myCanvas')\n\t    const that = this\n\t    wx.getImageInfo({\n\t      src: 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg',\n\t      success: function (res) {\n\t        console.log('res', res)\n\t        const poster = res.path\n\t        ctx.drawImage(poster, 0, 0, 150, 100)\n\t        ctx.draw(false, () => {\n\t          wx.canvasToTempFilePath({\n\t            x: 0,\n\t            y: 0,\n\t            width: 100,\n\t            height: 100,\n\t            destWidth: 100,\n\t            destHeight: 100,\n\t            canvasId: \"myCanvas\",\n\t            success(res) {\n\t              that.setData({\n\t                imgPath: res.tempFilePath\n\t              })\n\t              console.log(res.tempFilePath)\n\t            },\n\t            fail(err) {\n\t              console.log('err', err)\n\t            }\n\t          })\n\t        })\n\t        // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n\t        wx.canvasGetImageData({\n\t          canvasId: 'myCanvas',\n\t          x: 0,\n\t          y: 0,\n\t          width: 150,\n\t          height: 100,\n\t          success(res) {\n\t            console.log(res.width) // 150\n\t            console.log(res.height) // 100\n\t            console.log(res.data instanceof Uint8ClampedArray) // true\n\t            console.log(res.data) // 150 * 100 * 4\n\t            console.log(res.data.length) // 150 * 100 * 4\n\t          }\n\t        })\n\t      }\n\t    })\n\t\t```\n\t\t```html\n\t\t<canvas wx:if=\"{{!imgPath}}\" id=\"myCanvas\" canvas-id=\"myCanvas\" style=\"width: 330px;height: 340px;\"></canvas>\n\t\t<image wx:else src=\"{{imgPath}}\" style=\"width: 330px;height: 340px;\" />\n\t\t```\n\t\t- è¿è¡Œæˆªå›¾\n\t\t\t- ![æ—§ç‰ˆcanvasè¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2EzZTRiYTBkYzc2NDgzYTM1NTYxZDcwNDUzNzZkNjZmNDU5MTgucG5n?x-oss-process=image/format,png)\n#### å†™åœ¨åé¢\n- æ„Ÿè°¢[Skadyå®è´](https://github.com/skadieyes)åœ¨æ¢è®¨é—®é¢˜ä¸­ç»™äºˆçš„å¸®åŠ©ï¼Œæ¬¢è¿å¤§å®¶å»githubæ‰¾å¥¹ç©ğŸ‘ˆ\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n----\n\t\t\n","source":"_posts/å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚.md","raw":"---\nlayout: å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚\ntitle: å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚\ndate: 2020-04-05 12:04:24\ntags: \n- å¾®ä¿¡å°ç¨‹åº\ncategories:\n- å¾®ä¿¡å°ç¨‹åº\n\n\n---\n\n#### å†™åœ¨å‰é¢\n- å¤§å®¶åº”è¯¥éƒ½çŸ¥é“è¿‡ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œcanvasç­‰åŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œé¡µé¢ä¸­æ— è®ºä½ è®¾ç½®å¤šå¤§çš„z-indexéƒ½æ— æ³•è¦†ç›–åœ¨å…¶ä¹‹ä¸Šï¼Œè¿™å°±å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜\n- å°±åƒè¿™æ ·\n\t- ![canvasé¡¶å±‚é—®é¢˜æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxYmQ5OTM2M2VkYjU1NTRmYjc5MzBlZDllMTA0ZjEwMTc2MDM0LnBuZw?x-oss-process=image/format,png)\n\t- æŸ±çŠ¶å›¾æ˜¯ç”¨canvasç”»çš„ï¼Œå®ƒç½®äºäº†æˆ‘çš„tooltipä¹‹ä¸Šã€‚ã€è¿™çœ‹èµ·æ¥çœŸæ˜¯ä¸€ä¸ªå¯æ€•çš„é—®é¢˜\n---\n\n#### è§£å†³é—®é¢˜\n- å¾®ä¿¡å®˜æ–¹æä¾›äº†[cover-view](https://developers.weixin.qq.com/miniprogram/dev/component/cover-view.html)åŸç”Ÿç»„ä»¶ï¼Œè¦†ç›–åœ¨åŸç”Ÿç»„ä»¶ä¹‹ä¸Šçš„æ–‡æœ¬è§†å›¾\n- å¾®ä¿¡å®˜æ–¹æä¾›äº†å°†canvasè½¬åŒ–ä¸ºå›¾ç‰‡çš„æ–¹å¼--[wx.canvasToTempFilePath](https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html)ï¼Œè¿™æ ·å°±å¯ä»¥â€é™çº§â€œ\n\n\n##### æ–¹æ³•ä¸€ï¼šcover-view\n- å°†tooltipç”¨cover-viewæ”¹å†™ï¼Œæ•ˆæœå¦‚ä¸‹\n\t- ![cover-view version0.1 æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2Y0MTZjZjhlMjNiZWEwMjNjYTM1M2JhOGExMDM1MDM2MzYyOTIucG5n?x-oss-process=image/format,png)\n\t- çœ‹ä¸Šå»ï¼Œæ˜¯è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œä¸”tooltipåçš„ç°è‰²èƒŒæ™¯ä¸èƒ½æ»‘åŠ¨äº†ï¼Œã€å¦ˆè€¶ï¼Œå¥½æ£’ï¼\n\t- ä½†æ˜¯ï¼Œè¿™äº§ç”Ÿäº†ä¸€ä¸ªï¼š**å½“æ–‡æœ¬è¶…å‡ºtooltipå®½åº¦æ—¶ï¼Œscroll-y: autoï¼Œå¤±æ•ˆäº†ï¼Œæº¢å‡ºéƒ¨åˆ†è¢«ç›´æ¥æˆªå–**\n\t- ç½ªé­ç¥¸é¦–å°±æ˜¯å®ƒ\n\t\t- ![coverå†…ç½®æ ·å¼](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2M5ZDljYjZiZTQ0ZGY3YmJmNmRlMjAxNDM1ZmYzOTJjNDMxNDMucG5n?x-oss-process=image/format,png)\n\t- é‚£æˆ‘ä»¬å¯ä»¥ï¼š\n\t\t- åœ¨tooltipåˆ†æ®µå†…å®¹ä¸­åŠ ä¸Š\n\t\t\t```css\n\t\t\t.modal-layer-content-rule {\n\t\t\t    white-space: pre-wrap;\n\t\t\t}\n\t\t\t```\n\t\t- åœ¨å†…å®¹wrapperä¸­åŠ ä¸Š\n\t\t\t```css\n\t\t\t.modal-layer-content {\n\t\t\t    overflow: scroll;\n\t\t\t}\n\t\t\t```\n\t- å®Œç¾è§£å†³\n\t\t- ![cover-viewè§£å†³å›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2FhZjRkMDAyODdjZGI4M2Y0NWRhMGVkOTg3Mzc5MGNhNDQxMjkucG5n?x-oss-process=image/format,png)\n##### æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath\n- é¦–å…ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œå®˜æ–¹å…³äºcanvasç±»å‹æœ‰ä¸¤ç§\n![ä¸¤ç§canvasç±»å‹](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2E4ZjJmNjA5OGYxNmQ4MzY3NWJiN2I3OWY0ZDM1NWM1MTAwMDg3LnBuZw?x-oss-process=image/format,png)\n- æ–°canvas 2Dæ¥å£å°è¯•\n\t```javascript\n\tconst query = wx.createSelectorQuery().in(this)\n    query.select('#myCanvas')\n      .fields({ node: true, size: true })\n      .exec((res) => {\n        const canvas = res[0].node\n        const ctx = canvas.getContext('2d')\n        const img = canvas.createImage()\n        img.onload = () => {\n          ctx.drawImage(img, 0, 0, 100, 100)\n        }\n        img.src = 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'\n        // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n        console.log(ctx.getImageData(0, 0, 150, 100).data)\n      })\n\t```\n\t```html\n\t<canvas type=\"2d\" id=\"myCanvas\" canvas-id=\"myCanvas\"></canvas>\n\t```\n- è¿è¡Œæˆªå›¾![canvas2d è¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzE5ZWE3ZGYxYjg2ODUzOWFhNzVhY2E0OTAxYzI2MzU2OTk4NDYucG5n?x-oss-process=image/format,png)\n- ç¬¬äºŒç§æ—§canvas\n\t```javascript\n\tconst ctx = wx.createCanvasContext('myCanvas')\n    wx.getImageInfo({\n        src: 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg',\n        success: function (res) {\n          console.log('res', res)\n          const poster = res.path                                  \n          ctx.drawImage(poster, 0, 0, 150, 100)\n          ctx.draw()\n        }\n      })\n      // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n      wx.canvasGetImageData({\n        canvasId: 'myCanvas',\n        x: 0,\n        y: 0,\n        width: 150,\n        height: 100,\n        success(res) {\n          console.log(res.width) // 150\n          console.log(res.height) // 100\n          console.log(res.data instanceof Uint8ClampedArray) // true\n          console.log(res.data) // 150 * 100 * 4\n          console.log(res.data.length) // 150 * 100 * 4\n        }\n      })\n\t```\n\t```html\n\t<canvas id=\"myCanvas\" canvas-id=\"myCanvas\"></canvas>\n\t```\n- è¿è¡Œæˆªå›¾![æ—§canvas](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzU4NTg5MzQ4MDc3Njk3OTA0OTRmZmIzOWRiNDdjMWRmNjk4ODQucG5n?x-oss-process=image/format,png)\n- è™½ç„¶ä¸¤ç§æ–¹æ³•ï¼Œéƒ½èƒ½å®ç°å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œä½†æ–°ç‰ˆçš„è¿›è¡Œäº†createImageï¼Œå°†å…¶æ‰“å°çš„è¯ï¼Œå…¶å®å°±æ˜¯æ–°å»ºäº†ä¸€ä¸ªimgæ ‡ç­¾ï¼Œå¹¶å°†imgæ ‡ç­¾çš„ä¸œè¥¿ç»˜åˆ¶è¿›canvas\n\t- ![img console](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzFjMjE1NzMzZTRkY2UzNGZiNzI4NDFhZWEyMDc0ZWIwMjQ1OTQucG5n?x-oss-process=image/format,png)\n\t- ä¸ºä»€ä¹ˆå¾®ä¿¡å®˜æ–¹ä¼šä»…æ”¯æŒä»¥ä¸‹æ–¹å¼è¿›è¡Œæ–°ç‰ˆcanvas2d å›¾ç‰‡çš„ç»˜åˆ¶ï¼Œè€ƒè™‘æ˜¯ä»€ä¹ˆï¼Ÿ\n\t- ![ç»å…¸æŠ¥é”™](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JhYWQ1OWRhNDI4M2FjZmViZTY1NGQ0ZWZiNTAxZDZlMjAxMjE2LnBuZw?x-oss-process=image/format,png)\n- ç°åœ¨æˆ‘ä»¬è¦å°†canvasçš„å†…å®¹å¯¼æˆå›¾ç‰‡ï¼ŒåŒæ ·åˆ†æˆæ–°æ—§ä¸¤ç‰ˆ\n- ä¸»è¦æ€è·¯éƒ½æ˜¯ï¼šåœ¨wxmlä¸­ï¼Œå¦‚æœcanvasç»˜åˆ¶å›¾ç‰‡æ²¡æœ‰å®Œæˆï¼Œåˆ™æ˜¾ç¤ºcanvaså†…å®¹ï¼Œç»˜åˆ¶å®Œæˆåï¼Œå°±åˆ©ç”¨canvasToTempFilePathï¼Œå°†å›¾å±‚å†…å®¹ç”ŸæˆæŒ‡å®šå¤§å°å›¾ç‰‡ï¼Œæ˜¾ç¤ºimage\n\t- canvas2d \n\t\t```javascript\n\t\tconst that = this\n\t    const query = wx.createSelectorQuery().in(this)\n\t    query.select('#myCanvas')\n\t      .fields({ node: true, size: true })\n\t      .exec((res) => {\n\t        const canvas = res[0].node\n\t        const ctx = canvas.getContext('2d')\n\t        const img = canvas.createImage()\n\t        console.log('img', img)\n\t        img.onload = () => {\n\t          ctx.drawImage(img, 0, 0, 100, 100)\n\t            wx.canvasToTempFilePath({\n\t              x: 0,\n\t              y: 0,\n\t              width: 100,\n\t              height: 100,\n\t              destWidth: 100,\n\t              destHeight: 100,\n\t              canvas: canvas,\n\t              success(res) {\n\t                that.setData({\n\t                  imgPath: res.tempFilePath\n\t                })\n\t              },\n\t              fail(err) {\n\t                console.log('err', err)\n\t              }\n\t            })\n\t        }\n\t        img.src = 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'\n\t        // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n\t        console.log(ctx.getImageData(0, 0, 100, 100).data)\n\t      })\n\t\t```\n\t\t```html\n\t\t<canvas wx:if=\"{{!imgPath}}\" type=\"2d\" id=\"myCanvas\" canvas-id=\"myCanvas\" style=\"width: 330px;height: 340px;\"></canvas>\n\t\t<image wx:else src=\"{{imgPath}}\" style=\"width: 330px;height: 340px;\" />\n\t\t```\n\t\t- canvas2d éœ€è¦è¸©å¾—å‘æ˜¯ï¼šå®ƒçš„å®˜æ–¹æ–‡æ¡£ğŸ™ƒ\n\t\t\t- ![canvas2d è½¬å›¾ç‰‡è¯¯å¯¼](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UwM2Q1ZDg0YzYyNmI0NzlmZjBjOTlmNzA1YmRhYjg5NDc5MjcucG5n?x-oss-process=image/format,png)\n\t\t\t- å°è¯•ä¸‹æ¥ï¼Œä¼š\n\t\t\t\t- ![ctx.drawæŠ¥é”™](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxMjRiY2Q3ZmNjYWI5ODBlNDdkMTk2YTMyZGQyODI4NDUzODcucG5n?x-oss-process=image/format,png)\n\t\t\t- é‚£æˆ‘ä»¬å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹\n\t\t\t\t- ![canvas2d tempathæ­£ç¡®å®åŠ›](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxODk5NWFiNDY4N2IwYmZlYzhjZTZkZWU2ZWQxYmZjMTA1MTY1LnBuZw?x-oss-process=image/format,png)è¿™æ‰æ˜¯ç¬¦åˆæˆ‘ä»¬éœ€è¦\n\t\t- è¿è¡Œæˆªå›¾\n\t\t\t- ![canvas2dè¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JmMzVlMzY4YzRjMmRhYTgxNTA0NzM0YTIxZGMxM2I2NDYwNzIucG5n?x-oss-process=image/format,png)\n\t- æ—§ç‰ˆcanvas\n\t\t```javascript\n\t    const ctx = wx.createCanvasContext('myCanvas')\n\t    const that = this\n\t    wx.getImageInfo({\n\t      src: 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg',\n\t      success: function (res) {\n\t        console.log('res', res)\n\t        const poster = res.path\n\t        ctx.drawImage(poster, 0, 0, 150, 100)\n\t        ctx.draw(false, () => {\n\t          wx.canvasToTempFilePath({\n\t            x: 0,\n\t            y: 0,\n\t            width: 100,\n\t            height: 100,\n\t            destWidth: 100,\n\t            destHeight: 100,\n\t            canvasId: \"myCanvas\",\n\t            success(res) {\n\t              that.setData({\n\t                imgPath: res.tempFilePath\n\t              })\n\t              console.log(res.tempFilePath)\n\t            },\n\t            fail(err) {\n\t              console.log('err', err)\n\t            }\n\t          })\n\t        })\n\t        // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n\t        wx.canvasGetImageData({\n\t          canvasId: 'myCanvas',\n\t          x: 0,\n\t          y: 0,\n\t          width: 150,\n\t          height: 100,\n\t          success(res) {\n\t            console.log(res.width) // 150\n\t            console.log(res.height) // 100\n\t            console.log(res.data instanceof Uint8ClampedArray) // true\n\t            console.log(res.data) // 150 * 100 * 4\n\t            console.log(res.data.length) // 150 * 100 * 4\n\t          }\n\t        })\n\t      }\n\t    })\n\t\t```\n\t\t```html\n\t\t<canvas wx:if=\"{{!imgPath}}\" id=\"myCanvas\" canvas-id=\"myCanvas\" style=\"width: 330px;height: 340px;\"></canvas>\n\t\t<image wx:else src=\"{{imgPath}}\" style=\"width: 330px;height: 340px;\" />\n\t\t```\n\t\t- è¿è¡Œæˆªå›¾\n\t\t\t- ![æ—§ç‰ˆcanvasè¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2EzZTRiYTBkYzc2NDgzYTM1NTYxZDcwNDUzNzZkNjZmNDU5MTgucG5n?x-oss-process=image/format,png)\n#### å†™åœ¨åé¢\n- æ„Ÿè°¢[Skadyå®è´](https://github.com/skadieyes)åœ¨æ¢è®¨é—®é¢˜ä¸­ç»™äºˆçš„å¸®åŠ©ï¼Œæ¬¢è¿å¤§å®¶å»githubæ‰¾å¥¹ç©ğŸ‘ˆ\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n----\n\t\t\n","slug":"å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚","published":1,"updated":"2020-04-05T04:08:51.085Z","_id":"ck8miyppz0003e6p30ayx1mbx","comments":1,"photos":[],"link":"","content":"<h4 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h4><ul>\n<li>å¤§å®¶åº”è¯¥éƒ½çŸ¥é“è¿‡ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œcanvasç­‰åŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œé¡µé¢ä¸­æ— è®ºä½ è®¾ç½®å¤šå¤§çš„z-indexéƒ½æ— æ³•è¦†ç›–åœ¨å…¶ä¹‹ä¸Šï¼Œè¿™å°±å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜</li>\n<li>å°±åƒè¿™æ ·<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxYmQ5OTM2M2VkYjU1NTRmYjc5MzBlZDllMTA0ZjEwMTc2MDM0LnBuZw?x-oss-process=image/format,png\" alt=\"canvasé¡¶å±‚é—®é¢˜æˆªå›¾\"></li>\n<li>æŸ±çŠ¶å›¾æ˜¯ç”¨canvasç”»çš„ï¼Œå®ƒç½®äºäº†æˆ‘çš„tooltipä¹‹ä¸Šã€‚ã€è¿™çœ‹èµ·æ¥çœŸæ˜¯ä¸€ä¸ªå¯æ€•çš„é—®é¢˜</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4 id=\"è§£å†³é—®é¢˜\"><a href=\"#è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"è§£å†³é—®é¢˜\"></a>è§£å†³é—®é¢˜</h4><ul>\n<li>å¾®ä¿¡å®˜æ–¹æä¾›äº†<a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/cover-view.html\" target=\"_blank\" rel=\"noopener\">cover-view</a>åŸç”Ÿç»„ä»¶ï¼Œè¦†ç›–åœ¨åŸç”Ÿç»„ä»¶ä¹‹ä¸Šçš„æ–‡æœ¬è§†å›¾</li>\n<li>å¾®ä¿¡å®˜æ–¹æä¾›äº†å°†canvasè½¬åŒ–ä¸ºå›¾ç‰‡çš„æ–¹å¼â€“<a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html\" target=\"_blank\" rel=\"noopener\">wx.canvasToTempFilePath</a>ï¼Œè¿™æ ·å°±å¯ä»¥â€é™çº§â€œ</li>\n</ul>\n<h5 id=\"æ–¹æ³•ä¸€ï¼šcover-view\"><a href=\"#æ–¹æ³•ä¸€ï¼šcover-view\" class=\"headerlink\" title=\"æ–¹æ³•ä¸€ï¼šcover-view\"></a>æ–¹æ³•ä¸€ï¼šcover-view</h5><ul>\n<li>å°†tooltipç”¨cover-viewæ”¹å†™ï¼Œæ•ˆæœå¦‚ä¸‹<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2Y0MTZjZjhlMjNiZWEwMjNjYTM1M2JhOGExMDM1MDM2MzYyOTIucG5n?x-oss-process=image/format,png\" alt=\"cover-view version0.1 æˆªå›¾\"></li>\n<li>çœ‹ä¸Šå»ï¼Œæ˜¯è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œä¸”tooltipåçš„ç°è‰²èƒŒæ™¯ä¸èƒ½æ»‘åŠ¨äº†ï¼Œã€å¦ˆè€¶ï¼Œå¥½æ£’ï¼</li>\n<li>ä½†æ˜¯ï¼Œè¿™äº§ç”Ÿäº†ä¸€ä¸ªï¼š<strong>å½“æ–‡æœ¬è¶…å‡ºtooltipå®½åº¦æ—¶ï¼Œscroll-y: autoï¼Œå¤±æ•ˆäº†ï¼Œæº¢å‡ºéƒ¨åˆ†è¢«ç›´æ¥æˆªå–</strong></li>\n<li>ç½ªé­ç¥¸é¦–å°±æ˜¯å®ƒ<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2M5ZDljYjZiZTQ0ZGY3YmJmNmRlMjAxNDM1ZmYzOTJjNDMxNDMucG5n?x-oss-process=image/format,png\" alt=\"coverå†…ç½®æ ·å¼\"></li>\n</ul>\n</li>\n<li>é‚£æˆ‘ä»¬å¯ä»¥ï¼š<ul>\n<li>åœ¨tooltipåˆ†æ®µå†…å®¹ä¸­åŠ ä¸Š  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.modal-layer-content-rule</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">white-space</span>: pre-wrap;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>åœ¨å†…å®¹wrapperä¸­åŠ ä¸Š  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.modal-layer-content</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: scroll;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>å®Œç¾è§£å†³<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2FhZjRkMDAyODdjZGI4M2Y0NWRhMGVkOTg3Mzc5MGNhNDQxMjkucG5n?x-oss-process=image/format,png\" alt=\"cover-viewè§£å†³å›¾\"><h5 id=\"æ–¹æ³•äºŒï¼šwx-canvasToTempFilePath\"><a href=\"#æ–¹æ³•äºŒï¼šwx-canvasToTempFilePath\" class=\"headerlink\" title=\"æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath\"></a>æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath</h5></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>é¦–å…ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œå®˜æ–¹å…³äºcanvasç±»å‹æœ‰ä¸¤ç§<br><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2E4ZjJmNjA5OGYxNmQ4MzY3NWJiN2I3OWY0ZDM1NWM1MTAwMDg3LnBuZw?x-oss-process=image/format,png\" alt=\"ä¸¤ç§canvasç±»å‹\"></li>\n<li>æ–°canvas 2Dæ¥å£å°è¯•  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> query = wx.createSelectorQuery().in(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">   query.select(<span class=\"string\">'#myCanvas'</span>)</span><br><span class=\"line\">     .fields(&#123; <span class=\"attr\">node</span>: <span class=\"literal\">true</span>, <span class=\"attr\">size</span>: <span class=\"literal\">true</span> &#125;)</span><br><span class=\"line\">     .exec(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">       <span class=\"keyword\">const</span> canvas = res[<span class=\"number\">0</span>].node</span><br><span class=\"line\">       <span class=\"keyword\">const</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">const</span> img = canvas.createImage()</span><br><span class=\"line\">       img.onload = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">         ctx.drawImage(img, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       img.src = <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span></span><br><span class=\"line\">       <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(ctx.getImageData(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">150</span>, <span class=\"number\">100</span>).data)</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">type</span>=<span class=\"string\">\"2d\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzE5ZWE3ZGYxYjg2ODUzOWFhNzVhY2E0OTAxYzI2MzU2OTk4NDYucG5n?x-oss-process=image/format,png\" alt=\"canvas2d è¿è¡Œæˆªå›¾\"></li>\n<li>ç¬¬äºŒç§æ—§canvas  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ctx = wx.createCanvasContext(<span class=\"string\">'myCanvas'</span>)</span><br><span class=\"line\">   wx.getImageInfo(&#123;</span><br><span class=\"line\">       src: <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span>,</span><br><span class=\"line\">       success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(<span class=\"string\">'res'</span>, res)</span><br><span class=\"line\">         <span class=\"keyword\">const</span> poster = res.path                                  </span><br><span class=\"line\">         ctx.drawImage(poster, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">150</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">         ctx.draw()</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;)</span><br><span class=\"line\">     <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">     wx.canvasGetImageData(&#123;</span><br><span class=\"line\">       canvasId: <span class=\"string\">'myCanvas'</span>,</span><br><span class=\"line\">       x: <span class=\"number\">0</span>,</span><br><span class=\"line\">       y: <span class=\"number\">0</span>,</span><br><span class=\"line\">       width: <span class=\"number\">150</span>,</span><br><span class=\"line\">       height: <span class=\"number\">100</span>,</span><br><span class=\"line\">       success(res) &#123;</span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.width) <span class=\"comment\">// 150</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.height) <span class=\"comment\">// 100</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.data <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Uint8ClampedArray</span>) <span class=\"comment\">// true</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.data) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.data.length) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzU4NTg5MzQ4MDc3Njk3OTA0OTRmZmIzOWRiNDdjMWRmNjk4ODQucG5n?x-oss-process=image/format,png\" alt=\"æ—§canvas\"></li>\n<li>è™½ç„¶ä¸¤ç§æ–¹æ³•ï¼Œéƒ½èƒ½å®ç°å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œä½†æ–°ç‰ˆçš„è¿›è¡Œäº†createImageï¼Œå°†å…¶æ‰“å°çš„è¯ï¼Œå…¶å®å°±æ˜¯æ–°å»ºäº†ä¸€ä¸ªimgæ ‡ç­¾ï¼Œå¹¶å°†imgæ ‡ç­¾çš„ä¸œè¥¿ç»˜åˆ¶è¿›canvas<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzFjMjE1NzMzZTRkY2UzNGZiNzI4NDFhZWEyMDc0ZWIwMjQ1OTQucG5n?x-oss-process=image/format,png\" alt=\"img console\"></li>\n<li>ä¸ºä»€ä¹ˆå¾®ä¿¡å®˜æ–¹ä¼šä»…æ”¯æŒä»¥ä¸‹æ–¹å¼è¿›è¡Œæ–°ç‰ˆcanvas2d å›¾ç‰‡çš„ç»˜åˆ¶ï¼Œè€ƒè™‘æ˜¯ä»€ä¹ˆï¼Ÿ</li>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JhYWQ1OWRhNDI4M2FjZmViZTY1NGQ0ZWZiNTAxZDZlMjAxMjE2LnBuZw?x-oss-process=image/format,png\" alt=\"ç»å…¸æŠ¥é”™\"></li>\n</ul>\n</li>\n<li>ç°åœ¨æˆ‘ä»¬è¦å°†canvasçš„å†…å®¹å¯¼æˆå›¾ç‰‡ï¼ŒåŒæ ·åˆ†æˆæ–°æ—§ä¸¤ç‰ˆ</li>\n<li>ä¸»è¦æ€è·¯éƒ½æ˜¯ï¼šåœ¨wxmlä¸­ï¼Œå¦‚æœcanvasç»˜åˆ¶å›¾ç‰‡æ²¡æœ‰å®Œæˆï¼Œåˆ™æ˜¾ç¤ºcanvaså†…å®¹ï¼Œç»˜åˆ¶å®Œæˆåï¼Œå°±åˆ©ç”¨canvasToTempFilePathï¼Œå°†å›¾å±‚å†…å®¹ç”ŸæˆæŒ‡å®šå¤§å°å›¾ç‰‡ï¼Œæ˜¾ç¤ºimage<ul>\n<li>canvas2d   <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> that = <span class=\"keyword\">this</span></span><br><span class=\"line\">   <span class=\"keyword\">const</span> query = wx.createSelectorQuery().in(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">   query.select(<span class=\"string\">'#myCanvas'</span>)</span><br><span class=\"line\">     .fields(&#123; <span class=\"attr\">node</span>: <span class=\"literal\">true</span>, <span class=\"attr\">size</span>: <span class=\"literal\">true</span> &#125;)</span><br><span class=\"line\">     .exec(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">       <span class=\"keyword\">const</span> canvas = res[<span class=\"number\">0</span>].node</span><br><span class=\"line\">       <span class=\"keyword\">const</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">const</span> img = canvas.createImage()</span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(<span class=\"string\">'img'</span>, img)</span><br><span class=\"line\">       img.onload = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">         ctx.drawImage(img, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">           wx.canvasToTempFilePath(&#123;</span><br><span class=\"line\">             x: <span class=\"number\">0</span>,</span><br><span class=\"line\">             y: <span class=\"number\">0</span>,</span><br><span class=\"line\">             width: <span class=\"number\">100</span>,</span><br><span class=\"line\">             height: <span class=\"number\">100</span>,</span><br><span class=\"line\">             destWidth: <span class=\"number\">100</span>,</span><br><span class=\"line\">             destHeight: <span class=\"number\">100</span>,</span><br><span class=\"line\">             canvas: canvas,</span><br><span class=\"line\">             success(res) &#123;</span><br><span class=\"line\">               that.setData(&#123;</span><br><span class=\"line\">                 imgPath: res.tempFilePath</span><br><span class=\"line\">               &#125;)</span><br><span class=\"line\">             &#125;,</span><br><span class=\"line\">             fail(err) &#123;</span><br><span class=\"line\">               <span class=\"built_in\">console</span>.log(<span class=\"string\">'err'</span>, err)</span><br><span class=\"line\">             &#125;</span><br><span class=\"line\">           &#125;)</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       img.src = <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span></span><br><span class=\"line\">       <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(ctx.getImageData(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>).data)</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">\"&#123;&#123;!imgPath&#125;&#125;\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"2d\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">image</span> <span class=\"attr\">wx:else</span> <span class=\"attr\">src</span>=<span class=\"string\">\"&#123;&#123;imgPath&#125;&#125;\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>canvas2d éœ€è¦è¸©å¾—å‘æ˜¯ï¼šå®ƒçš„å®˜æ–¹æ–‡æ¡£ğŸ™ƒ<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UwM2Q1ZDg0YzYyNmI0NzlmZjBjOTlmNzA1YmRhYjg5NDc5MjcucG5n?x-oss-process=image/format,png\" alt=\"canvas2d è½¬å›¾ç‰‡è¯¯å¯¼\"></li>\n<li>å°è¯•ä¸‹æ¥ï¼Œä¼š<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxMjRiY2Q3ZmNjYWI5ODBlNDdkMTk2YTMyZGQyODI4NDUzODcucG5n?x-oss-process=image/format,png\" alt=\"ctx.drawæŠ¥é”™\"></li>\n</ul>\n</li>\n<li>é‚£æˆ‘ä»¬å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxODk5NWFiNDY4N2IwYmZlYzhjZTZkZWU2ZWQxYmZjMTA1MTY1LnBuZw?x-oss-process=image/format,png\" alt=\"canvas2d tempathæ­£ç¡®å®åŠ›\">è¿™æ‰æ˜¯ç¬¦åˆæˆ‘ä»¬éœ€è¦</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JmMzVlMzY4YzRjMmRhYTgxNTA0NzM0YTIxZGMxM2I2NDYwNzIucG5n?x-oss-process=image/format,png\" alt=\"canvas2dè¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>æ—§ç‰ˆcanvas  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ctx = wx.createCanvasContext(<span class=\"string\">'myCanvas'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> that = <span class=\"keyword\">this</span></span><br><span class=\"line\">wx.getImageInfo(&#123;</span><br><span class=\"line\">  src: <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span>,</span><br><span class=\"line\">  success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'res'</span>, res)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> poster = res.path</span><br><span class=\"line\">    ctx.drawImage(poster, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">150</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">    ctx.draw(<span class=\"literal\">false</span>, () =&gt; &#123;</span><br><span class=\"line\">      wx.canvasToTempFilePath(&#123;</span><br><span class=\"line\">        x: <span class=\"number\">0</span>,</span><br><span class=\"line\">        y: <span class=\"number\">0</span>,</span><br><span class=\"line\">        width: <span class=\"number\">100</span>,</span><br><span class=\"line\">        height: <span class=\"number\">100</span>,</span><br><span class=\"line\">        destWidth: <span class=\"number\">100</span>,</span><br><span class=\"line\">        destHeight: <span class=\"number\">100</span>,</span><br><span class=\"line\">        canvasId: <span class=\"string\">\"myCanvas\"</span>,</span><br><span class=\"line\">        success(res) &#123;</span><br><span class=\"line\">          that.setData(&#123;</span><br><span class=\"line\">            imgPath: res.tempFilePath</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(res.tempFilePath)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        fail(err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'err'</span>, err)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">    wx.canvasGetImageData(&#123;</span><br><span class=\"line\">      canvasId: <span class=\"string\">'myCanvas'</span>,</span><br><span class=\"line\">      x: <span class=\"number\">0</span>,</span><br><span class=\"line\">      y: <span class=\"number\">0</span>,</span><br><span class=\"line\">      width: <span class=\"number\">150</span>,</span><br><span class=\"line\">      height: <span class=\"number\">100</span>,</span><br><span class=\"line\">      success(res) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.width) <span class=\"comment\">// 150</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.height) <span class=\"comment\">// 100</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.data <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Uint8ClampedArray</span>) <span class=\"comment\">// true</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.data) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.data.length) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">\"&#123;&#123;!imgPath&#125;&#125;\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">image</span> <span class=\"attr\">wx:else</span> <span class=\"attr\">src</span>=<span class=\"string\">\"&#123;&#123;imgPath&#125;&#125;\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2EzZTRiYTBkYzc2NDgzYTM1NTYxZDcwNDUzNzZkNjZmNDU5MTgucG5n?x-oss-process=image/format,png\" alt=\"æ—§ç‰ˆcanvasè¿è¡Œæˆªå›¾\"><h4 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h4></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>æ„Ÿè°¢<a href=\"https://github.com/skadieyes\" target=\"_blank\" rel=\"noopener\">Skadyå®è´</a>åœ¨æ¢è®¨é—®é¢˜ä¸­ç»™äºˆçš„å¸®åŠ©ï¼Œæ¬¢è¿å¤§å®¶å»githubæ‰¾å¥¹ç©ğŸ‘ˆ</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h4><ul>\n<li>å¤§å®¶åº”è¯¥éƒ½çŸ¥é“è¿‡ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œcanvasç­‰åŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œé¡µé¢ä¸­æ— è®ºä½ è®¾ç½®å¤šå¤§çš„z-indexéƒ½æ— æ³•è¦†ç›–åœ¨å…¶ä¹‹ä¸Šï¼Œè¿™å°±å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜</li>\n<li>å°±åƒè¿™æ ·<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxYmQ5OTM2M2VkYjU1NTRmYjc5MzBlZDllMTA0ZjEwMTc2MDM0LnBuZw?x-oss-process=image/format,png\" alt=\"canvasé¡¶å±‚é—®é¢˜æˆªå›¾\"></li>\n<li>æŸ±çŠ¶å›¾æ˜¯ç”¨canvasç”»çš„ï¼Œå®ƒç½®äºäº†æˆ‘çš„tooltipä¹‹ä¸Šã€‚ã€è¿™çœ‹èµ·æ¥çœŸæ˜¯ä¸€ä¸ªå¯æ€•çš„é—®é¢˜</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4 id=\"è§£å†³é—®é¢˜\"><a href=\"#è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"è§£å†³é—®é¢˜\"></a>è§£å†³é—®é¢˜</h4><ul>\n<li>å¾®ä¿¡å®˜æ–¹æä¾›äº†<a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/cover-view.html\" target=\"_blank\" rel=\"noopener\">cover-view</a>åŸç”Ÿç»„ä»¶ï¼Œè¦†ç›–åœ¨åŸç”Ÿç»„ä»¶ä¹‹ä¸Šçš„æ–‡æœ¬è§†å›¾</li>\n<li>å¾®ä¿¡å®˜æ–¹æä¾›äº†å°†canvasè½¬åŒ–ä¸ºå›¾ç‰‡çš„æ–¹å¼â€“<a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html\" target=\"_blank\" rel=\"noopener\">wx.canvasToTempFilePath</a>ï¼Œè¿™æ ·å°±å¯ä»¥â€é™çº§â€œ</li>\n</ul>\n<h5 id=\"æ–¹æ³•ä¸€ï¼šcover-view\"><a href=\"#æ–¹æ³•ä¸€ï¼šcover-view\" class=\"headerlink\" title=\"æ–¹æ³•ä¸€ï¼šcover-view\"></a>æ–¹æ³•ä¸€ï¼šcover-view</h5><ul>\n<li>å°†tooltipç”¨cover-viewæ”¹å†™ï¼Œæ•ˆæœå¦‚ä¸‹<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2Y0MTZjZjhlMjNiZWEwMjNjYTM1M2JhOGExMDM1MDM2MzYyOTIucG5n?x-oss-process=image/format,png\" alt=\"cover-view version0.1 æˆªå›¾\"></li>\n<li>çœ‹ä¸Šå»ï¼Œæ˜¯è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œä¸”tooltipåçš„ç°è‰²èƒŒæ™¯ä¸èƒ½æ»‘åŠ¨äº†ï¼Œã€å¦ˆè€¶ï¼Œå¥½æ£’ï¼</li>\n<li>ä½†æ˜¯ï¼Œè¿™äº§ç”Ÿäº†ä¸€ä¸ªï¼š<strong>å½“æ–‡æœ¬è¶…å‡ºtooltipå®½åº¦æ—¶ï¼Œscroll-y: autoï¼Œå¤±æ•ˆäº†ï¼Œæº¢å‡ºéƒ¨åˆ†è¢«ç›´æ¥æˆªå–</strong></li>\n<li>ç½ªé­ç¥¸é¦–å°±æ˜¯å®ƒ<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2M5ZDljYjZiZTQ0ZGY3YmJmNmRlMjAxNDM1ZmYzOTJjNDMxNDMucG5n?x-oss-process=image/format,png\" alt=\"coverå†…ç½®æ ·å¼\"></li>\n</ul>\n</li>\n<li>é‚£æˆ‘ä»¬å¯ä»¥ï¼š<ul>\n<li>åœ¨tooltipåˆ†æ®µå†…å®¹ä¸­åŠ ä¸Š  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.modal-layer-content-rule</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">white-space</span>: pre-wrap;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>åœ¨å†…å®¹wrapperä¸­åŠ ä¸Š  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.modal-layer-content</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: scroll;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>å®Œç¾è§£å†³<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2FhZjRkMDAyODdjZGI4M2Y0NWRhMGVkOTg3Mzc5MGNhNDQxMjkucG5n?x-oss-process=image/format,png\" alt=\"cover-viewè§£å†³å›¾\"><h5 id=\"æ–¹æ³•äºŒï¼šwx-canvasToTempFilePath\"><a href=\"#æ–¹æ³•äºŒï¼šwx-canvasToTempFilePath\" class=\"headerlink\" title=\"æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath\"></a>æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath</h5></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>é¦–å…ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œå®˜æ–¹å…³äºcanvasç±»å‹æœ‰ä¸¤ç§<br><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2E4ZjJmNjA5OGYxNmQ4MzY3NWJiN2I3OWY0ZDM1NWM1MTAwMDg3LnBuZw?x-oss-process=image/format,png\" alt=\"ä¸¤ç§canvasç±»å‹\"></li>\n<li>æ–°canvas 2Dæ¥å£å°è¯•  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> query = wx.createSelectorQuery().in(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">   query.select(<span class=\"string\">'#myCanvas'</span>)</span><br><span class=\"line\">     .fields(&#123; <span class=\"attr\">node</span>: <span class=\"literal\">true</span>, <span class=\"attr\">size</span>: <span class=\"literal\">true</span> &#125;)</span><br><span class=\"line\">     .exec(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">       <span class=\"keyword\">const</span> canvas = res[<span class=\"number\">0</span>].node</span><br><span class=\"line\">       <span class=\"keyword\">const</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">const</span> img = canvas.createImage()</span><br><span class=\"line\">       img.onload = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">         ctx.drawImage(img, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       img.src = <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span></span><br><span class=\"line\">       <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(ctx.getImageData(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">150</span>, <span class=\"number\">100</span>).data)</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">type</span>=<span class=\"string\">\"2d\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzE5ZWE3ZGYxYjg2ODUzOWFhNzVhY2E0OTAxYzI2MzU2OTk4NDYucG5n?x-oss-process=image/format,png\" alt=\"canvas2d è¿è¡Œæˆªå›¾\"></li>\n<li>ç¬¬äºŒç§æ—§canvas  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ctx = wx.createCanvasContext(<span class=\"string\">'myCanvas'</span>)</span><br><span class=\"line\">   wx.getImageInfo(&#123;</span><br><span class=\"line\">       src: <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span>,</span><br><span class=\"line\">       success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(<span class=\"string\">'res'</span>, res)</span><br><span class=\"line\">         <span class=\"keyword\">const</span> poster = res.path                                  </span><br><span class=\"line\">         ctx.drawImage(poster, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">150</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">         ctx.draw()</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;)</span><br><span class=\"line\">     <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">     wx.canvasGetImageData(&#123;</span><br><span class=\"line\">       canvasId: <span class=\"string\">'myCanvas'</span>,</span><br><span class=\"line\">       x: <span class=\"number\">0</span>,</span><br><span class=\"line\">       y: <span class=\"number\">0</span>,</span><br><span class=\"line\">       width: <span class=\"number\">150</span>,</span><br><span class=\"line\">       height: <span class=\"number\">100</span>,</span><br><span class=\"line\">       success(res) &#123;</span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.width) <span class=\"comment\">// 150</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.height) <span class=\"comment\">// 100</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.data <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Uint8ClampedArray</span>) <span class=\"comment\">// true</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.data) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.data.length) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzU4NTg5MzQ4MDc3Njk3OTA0OTRmZmIzOWRiNDdjMWRmNjk4ODQucG5n?x-oss-process=image/format,png\" alt=\"æ—§canvas\"></li>\n<li>è™½ç„¶ä¸¤ç§æ–¹æ³•ï¼Œéƒ½èƒ½å®ç°å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œä½†æ–°ç‰ˆçš„è¿›è¡Œäº†createImageï¼Œå°†å…¶æ‰“å°çš„è¯ï¼Œå…¶å®å°±æ˜¯æ–°å»ºäº†ä¸€ä¸ªimgæ ‡ç­¾ï¼Œå¹¶å°†imgæ ‡ç­¾çš„ä¸œè¥¿ç»˜åˆ¶è¿›canvas<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzFjMjE1NzMzZTRkY2UzNGZiNzI4NDFhZWEyMDc0ZWIwMjQ1OTQucG5n?x-oss-process=image/format,png\" alt=\"img console\"></li>\n<li>ä¸ºä»€ä¹ˆå¾®ä¿¡å®˜æ–¹ä¼šä»…æ”¯æŒä»¥ä¸‹æ–¹å¼è¿›è¡Œæ–°ç‰ˆcanvas2d å›¾ç‰‡çš„ç»˜åˆ¶ï¼Œè€ƒè™‘æ˜¯ä»€ä¹ˆï¼Ÿ</li>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JhYWQ1OWRhNDI4M2FjZmViZTY1NGQ0ZWZiNTAxZDZlMjAxMjE2LnBuZw?x-oss-process=image/format,png\" alt=\"ç»å…¸æŠ¥é”™\"></li>\n</ul>\n</li>\n<li>ç°åœ¨æˆ‘ä»¬è¦å°†canvasçš„å†…å®¹å¯¼æˆå›¾ç‰‡ï¼ŒåŒæ ·åˆ†æˆæ–°æ—§ä¸¤ç‰ˆ</li>\n<li>ä¸»è¦æ€è·¯éƒ½æ˜¯ï¼šåœ¨wxmlä¸­ï¼Œå¦‚æœcanvasç»˜åˆ¶å›¾ç‰‡æ²¡æœ‰å®Œæˆï¼Œåˆ™æ˜¾ç¤ºcanvaså†…å®¹ï¼Œç»˜åˆ¶å®Œæˆåï¼Œå°±åˆ©ç”¨canvasToTempFilePathï¼Œå°†å›¾å±‚å†…å®¹ç”ŸæˆæŒ‡å®šå¤§å°å›¾ç‰‡ï¼Œæ˜¾ç¤ºimage<ul>\n<li>canvas2d   <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> that = <span class=\"keyword\">this</span></span><br><span class=\"line\">   <span class=\"keyword\">const</span> query = wx.createSelectorQuery().in(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">   query.select(<span class=\"string\">'#myCanvas'</span>)</span><br><span class=\"line\">     .fields(&#123; <span class=\"attr\">node</span>: <span class=\"literal\">true</span>, <span class=\"attr\">size</span>: <span class=\"literal\">true</span> &#125;)</span><br><span class=\"line\">     .exec(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">       <span class=\"keyword\">const</span> canvas = res[<span class=\"number\">0</span>].node</span><br><span class=\"line\">       <span class=\"keyword\">const</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">const</span> img = canvas.createImage()</span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(<span class=\"string\">'img'</span>, img)</span><br><span class=\"line\">       img.onload = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">         ctx.drawImage(img, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">           wx.canvasToTempFilePath(&#123;</span><br><span class=\"line\">             x: <span class=\"number\">0</span>,</span><br><span class=\"line\">             y: <span class=\"number\">0</span>,</span><br><span class=\"line\">             width: <span class=\"number\">100</span>,</span><br><span class=\"line\">             height: <span class=\"number\">100</span>,</span><br><span class=\"line\">             destWidth: <span class=\"number\">100</span>,</span><br><span class=\"line\">             destHeight: <span class=\"number\">100</span>,</span><br><span class=\"line\">             canvas: canvas,</span><br><span class=\"line\">             success(res) &#123;</span><br><span class=\"line\">               that.setData(&#123;</span><br><span class=\"line\">                 imgPath: res.tempFilePath</span><br><span class=\"line\">               &#125;)</span><br><span class=\"line\">             &#125;,</span><br><span class=\"line\">             fail(err) &#123;</span><br><span class=\"line\">               <span class=\"built_in\">console</span>.log(<span class=\"string\">'err'</span>, err)</span><br><span class=\"line\">             &#125;</span><br><span class=\"line\">           &#125;)</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       img.src = <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span></span><br><span class=\"line\">       <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(ctx.getImageData(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>).data)</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">\"&#123;&#123;!imgPath&#125;&#125;\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"2d\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">image</span> <span class=\"attr\">wx:else</span> <span class=\"attr\">src</span>=<span class=\"string\">\"&#123;&#123;imgPath&#125;&#125;\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>canvas2d éœ€è¦è¸©å¾—å‘æ˜¯ï¼šå®ƒçš„å®˜æ–¹æ–‡æ¡£ğŸ™ƒ<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UwM2Q1ZDg0YzYyNmI0NzlmZjBjOTlmNzA1YmRhYjg5NDc5MjcucG5n?x-oss-process=image/format,png\" alt=\"canvas2d è½¬å›¾ç‰‡è¯¯å¯¼\"></li>\n<li>å°è¯•ä¸‹æ¥ï¼Œä¼š<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxMjRiY2Q3ZmNjYWI5ODBlNDdkMTk2YTMyZGQyODI4NDUzODcucG5n?x-oss-process=image/format,png\" alt=\"ctx.drawæŠ¥é”™\"></li>\n</ul>\n</li>\n<li>é‚£æˆ‘ä»¬å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxODk5NWFiNDY4N2IwYmZlYzhjZTZkZWU2ZWQxYmZjMTA1MTY1LnBuZw?x-oss-process=image/format,png\" alt=\"canvas2d tempathæ­£ç¡®å®åŠ›\">è¿™æ‰æ˜¯ç¬¦åˆæˆ‘ä»¬éœ€è¦</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JmMzVlMzY4YzRjMmRhYTgxNTA0NzM0YTIxZGMxM2I2NDYwNzIucG5n?x-oss-process=image/format,png\" alt=\"canvas2dè¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>æ—§ç‰ˆcanvas  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ctx = wx.createCanvasContext(<span class=\"string\">'myCanvas'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> that = <span class=\"keyword\">this</span></span><br><span class=\"line\">wx.getImageInfo(&#123;</span><br><span class=\"line\">  src: <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span>,</span><br><span class=\"line\">  success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'res'</span>, res)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> poster = res.path</span><br><span class=\"line\">    ctx.drawImage(poster, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">150</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">    ctx.draw(<span class=\"literal\">false</span>, () =&gt; &#123;</span><br><span class=\"line\">      wx.canvasToTempFilePath(&#123;</span><br><span class=\"line\">        x: <span class=\"number\">0</span>,</span><br><span class=\"line\">        y: <span class=\"number\">0</span>,</span><br><span class=\"line\">        width: <span class=\"number\">100</span>,</span><br><span class=\"line\">        height: <span class=\"number\">100</span>,</span><br><span class=\"line\">        destWidth: <span class=\"number\">100</span>,</span><br><span class=\"line\">        destHeight: <span class=\"number\">100</span>,</span><br><span class=\"line\">        canvasId: <span class=\"string\">\"myCanvas\"</span>,</span><br><span class=\"line\">        success(res) &#123;</span><br><span class=\"line\">          that.setData(&#123;</span><br><span class=\"line\">            imgPath: res.tempFilePath</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(res.tempFilePath)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        fail(err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'err'</span>, err)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">    wx.canvasGetImageData(&#123;</span><br><span class=\"line\">      canvasId: <span class=\"string\">'myCanvas'</span>,</span><br><span class=\"line\">      x: <span class=\"number\">0</span>,</span><br><span class=\"line\">      y: <span class=\"number\">0</span>,</span><br><span class=\"line\">      width: <span class=\"number\">150</span>,</span><br><span class=\"line\">      height: <span class=\"number\">100</span>,</span><br><span class=\"line\">      success(res) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.width) <span class=\"comment\">// 150</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.height) <span class=\"comment\">// 100</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.data <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Uint8ClampedArray</span>) <span class=\"comment\">// true</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.data) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.data.length) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">\"&#123;&#123;!imgPath&#125;&#125;\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">image</span> <span class=\"attr\">wx:else</span> <span class=\"attr\">src</span>=<span class=\"string\">\"&#123;&#123;imgPath&#125;&#125;\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2EzZTRiYTBkYzc2NDgzYTM1NTYxZDcwNDUzNzZkNjZmNDU5MTgucG5n?x-oss-process=image/format,png\" alt=\"æ—§ç‰ˆcanvasè¿è¡Œæˆªå›¾\"><h4 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h4></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>æ„Ÿè°¢<a href=\"https://github.com/skadieyes\" target=\"_blank\" rel=\"noopener\">Skadyå®è´</a>åœ¨æ¢è®¨é—®é¢˜ä¸­ç»™äºˆçš„å¸®åŠ©ï¼Œæ¬¢è¿å¤§å®¶å»githubæ‰¾å¥¹ç©ğŸ‘ˆ</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n<hr>\n"},{"layout":"å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†","title":"å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†","date":"2020-04-05T03:47:05.000Z","_content":"\n####  å†™åœ¨å‰é¢\n- è®°å½•åŸºäº[å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†](https://developers.weixin.qq.com/community/develop/doc/000e4e7103c3c090e517e0cdb5b806)å®ç°ä¸­äº§ç”Ÿçš„é—®é¢˜åŠæ€è€ƒ\n- - -\n#### é—®é¢˜æˆªå›¾\n![popoveré—®é¢˜æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzlkMGY1NmUxOTVkNzFjMjAyYzVkYzI0OGMxMzg0NmUxMTQ3MTQucG5n?x-oss-process=image/format,png)\n#### é—®é¢˜æè¿°\n- æ¨¡æ‹Ÿå™¨æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†åœ¨çœŸæœºä¸Šç‚¹å‡»åï¼Œæ°”æ³¡æ¡†çš„ç®­å¤´å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œä¸”ç‚¹å‡»åŒä¸€çº§åˆ«åŒºåŸŸï¼Œèƒ½åˆ©ç”¨è¦†ç›–æ¶ˆé™¤ç®­å¤´ã€‚ã€æ˜¯ä¸æ˜¯ä¸€ä¸ªå¾ˆå¯çˆ±çš„bugï¼Ÿ\n\n#### é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\n- å®šä½é—®é¢˜å‘ç”Ÿçš„åŸå› èŒƒå›´\n\t- æ ·å¼\n\t\t- æ ·å¼åœ¨åˆ¤æ–­æ˜¾ç¤ºæ¡ä»¶(wx:if=\"{{visible}}\")ç”Ÿæ•ˆåï¼Œä»ç„¶æ¸²æŸ“\n\t\t- å¦å®šåŸå› \n\t\t\t- æŸ¥è¯¢ä»£ç å‘ç°ï¼Œæ•´ä¸ªæ ·å¼èƒŒæ™¯çš„è®¾å®šæ˜¯åœ¨::beforeä¼ªå…ƒç´ é€‰æ‹©å™¨ä¸­\n\t\t\t- ä¸”æ˜¾ç¤ºæ¡ä»¶ç”Ÿæ•ˆï¼Œåœ¨è°ƒè¯•å™¨ä¸­å·²æ²¡æœ‰è¯¥å…ƒç´ ï¼Œä½†ä»æ˜¾ç¤º\n\t- é€»è¾‘\n\t\t- ä¼šä¸ä¼šæ˜¯ç»„ä»¶åœ¨æ¸²æŸ“æ—¶ï¼Œå¤šæ¸²æŸ“ä¸€ä»½ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ¤æ–­æ¡ä»¶è¿›è¡Œå¼€å…³æ—¶ï¼Œåªæ˜¯å¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œäº†æ“ä½œ\n\t\t- æ€€ç–‘ä¾æ®\n\t\t\t- ![popoveré—®é¢˜ä¾æ®æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzk5ZjcwMDAwZmViM2IwYzc0MWJmNjFiYzE5YTUwMDIxMjYyMTI3LnBuZw?x-oss-process=image/format,png)\n\t\t\t- ä¸Šå›¾å¯è§ï¼šåœ¨popoverç»„ä»¶ä¸‹ï¼Œæœ‰2ä¸ªé€šè¿‡&lt;slot&gt;æ’å…¥çš„ç›¸åŒå†…å®¹\n\n- å¼€å§‹è§£å†³é—®é¢˜\n\t- æŸ¥è¯¢å®˜æ–¹å…³äº[slot](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html)æ–¹é¢çš„ä»‹ç»\n\t\t- ![å®˜æ–¹slotåŸºç¡€ä¾‹å­](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JjMTE0ZmI0YTdhOWZkY2ZlYzU3ZDE5ZWQyYWY0YzI3MzE1NTU4LnBuZw?x-oss-process=image/format,png)\n\t- åŸºäºå®˜æ–¹åŸºç¡€ä»£ç ï¼Œå¤ç°é—®é¢˜\n\t\t- äº§ç”Ÿä¸€ä¸ªchild-tagç»„ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­ç¼–å†™\n\t\t\t```javascript\n\t\t\t// components/child-tag.js.js\n\t\t\tComponent({\n\t\t\t  options: {\n\t\t\t    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ\n\t\t\t  },\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨\n\t\t\t   */\n\t\t\t  properties: {\n\t\t\t\n\t\t\t  },\n\t\t\t  relations: {\n\t\t\t    './component-tag-name': {\n\t\t\t      type: 'parent',\n\t\t\t    }\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„åˆå§‹æ•°æ®\n\t\t\t   */\n\t\t\t  data: {\n\t\t\t\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨\n\t\t\t   */\n\t\t\t  methods: {\n\t\t\t\n\t\t\t  }\n\t\t\t})\n\t\t\t```\n\t\t- ä¸component-tag-nameç»‘å®šå½¢æˆçˆ¶å­ç»„ä»¶\n\t\t\t```javascript\n\t\t\t// components/component-tag-name.js\n\t\t\tComponent({\n\t\t\t  options: {\n\t\t\t    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ\n\t\t\t  },\n\t\t\t  relations: {\n\t\t\t    './child-tag': {\n\t\t\t      type: 'child',\n\t\t\t    }\n\t\t\t  },\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨\n\t\t\t   */\n\t\t\t  properties: {\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„åˆå§‹æ•°æ®\n\t\t\t   */\n\t\t\t  data: {\n\t\t\t    visible: false\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨\n\t\t\t   */\n\t\t\t  methods: {\n\t\t\t  \n\t\t\t  }\n\t\t\t})\n\t\t\t```\n\t\t- å¹¶å°†index.htmlä¸­è¿›è¡Œè°ƒç”¨\n\t\t\t```html\n\t\t\t<!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡ç‰ˆ -->\n\t\t\t<view>\n\t\t\t  <button type=\"primary\" bindtap=\"onTap\">222</button>\n\t\t\t\t<my-component id=\"component\">\n\t\t\t\t\t<view slot=\"content\">\n\t\t\t\t\t\tè¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"content\"ä¸­çš„å†…å®¹\n\t\t\t\t\t\t<child-component>\n\t\t\t\t\t\t\t<view slot=\"child\">è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"child\"ä¸­çš„å†…å®¹</view>\n\t\t\t\t\t\t</child-component>\n\t\t\t\t\t</view>\n\t\t\t\t</my-component>\n\t\t\t</view>\n\t\t\t```\n\t\t- ä½†æ˜¯å…¶ç»“æ„æ ‘ä»ç„¶éå¸¸æ­£å¸¸ï¼Œå¹¶æ²¡æœ‰å‡ºç°é‚£ä¸ªæ‰€è°“çš„\"æ‹·è´\"ç»„ä»¶\n\t\t\t- ![æ”¹å†™v1.1åçš„ç»“æ„æ ‘æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzcwNTRhNjJkYmM2MGEyNmU5ZGI1ODYzNzNjOGY2OTgyMzg3NTI0LnBuZw?x-oss-process=image/format,png)\n\t\t\t- ä»”ç»†å¤ç°äº†å‡ æ¬¡ï¼Œå‘ç°ï¼šå¤šå‡ºæ¥çš„é‚£ä¸ªç»„ä»¶ä¼šæœ‰æ‰€å»¶è¿Ÿã€‚æŠ“ä½è¿™ä¸ªé—®é¢˜ï¼Œæƒ³åˆ°æˆ‘ä»¬åœ¨onReadyä¸­ï¼Œæ³¨å†Œäº†è¯¥ç»„ä»¶ï¼Œäºæ˜¯ï¼Œç»§ç»­æ¨¡æ‹Ÿ\n\t\t- ä¿®æ”¹index.jsä»£ç ï¼Œå¹¶åœ¨component-tag-nameç»„ä»¶æ³¨å†ŒonTapæ–¹æ³•ï¼Œæ§åˆ¶æ˜¾éš\n\t\t\t```javascript\n\t\t\t  onReady() {\n\t\t\t    this.component = this.selectComponent('#component')\n\t\t\t  },\n\t\t\t  onTap() {\n\t\t\t    console.log('onTap')\n\t\t\t    wx.createSelectorQuery().select('#component').boundingClientRect(res => {\n\t\t\t        // è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶ popover ä¸­çš„ onDisplay æ–¹æ³•\n\t\t\t        this.component.onTap();\n\t\t\t    }).exec();\n\t\t\t  }\n\t\t\t\t```\n\t\t- æœ€ç»ˆå¤ç°\n\t\t\t- ![å®˜æ–¹æ¨¡æ‹Ÿæœ€ç»ˆè¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmZjQ3OTNhMjUwYTNjMzlhYjBlOGQxMGJhYTllZmI2NDc1NjIyLnBuZw?x-oss-process=image/format,png)\n\t- å¾—å‡ºé—®é¢˜æ¥æºï¼š\n\t\t- åœ¨ç»„ä»¶ä¸­è¿›è¡Œäº†ä¸€æ¬¡setData\n\t- æ€è€ƒèƒŒåé—®é¢˜\n\t\t- åœ¨ç»„ä»¶ä¸­setDataä¸ºä»€ä¹ˆä¼šâ€æ‹·è´â€œä¸€ä»½ç›¸åŒçš„åœ¨é¡µé¢çº§wxmlä¸­ï¼Ÿ\n\t\t- çŒœæƒ³ä¸€ï¼šä»[WXSå“åº”äº‹ä»¶](https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88)ä¸­ï¼Œæˆ‘éšéšå¾—åˆ°äº†ç­”æ¡ˆ\n\t\t- ![wxsç›¸åº”äº‹ä»¶](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzZlYWJjYjdjOTliMzAxNWMwOGQwZmM2YWM3ZmMxMGMzNDU5NDAxLnBuZw?x-oss-process=image/format,png)\n\t\t- æˆ‘ä»¬åœ¨é¡µé¢çº§é€šè¿‡selectComponentå®ä¾‹åŒ–ç»„ä»¶ï¼Œå¯¹é€‰ä¸­çš„ç»„ä»¶è¿›è¡Œæ“ä½œï¼Œå®˜æ–¹å¯ä»¥é€šè¿‡æ‹·è´ä¸€ä»½ç›¸åŒçš„ç»„ä»¶ï¼Œä½¿æˆ‘ä»¬ä¾¿æ·çš„å°†äº‹ä»¶çš„å¤„ç†ä»2æ¬¡çš„é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ï¼Œå‡å°‘åˆ°ç›´æ¥å¯¹é¡µé¢ä¸Šå…ƒç´ è¿›è¡Œæ“ä½œï¼Œå³ä¸€æ¬¡é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ã€‚\n\t\t- çŒœæƒ³äºŒï¼šé—®é¢˜å±‚é¢æ˜¯åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­çš„wxmlï¼Œæ¸²æŸ“æ–¹å¼å¯¹äºè¿™ç§æƒ…å†µå°±æ˜¯è¿™æ ·å¤„ç†çš„ã€‚\n- å®˜æ–¹å·²ç»™å‡ºé—®é¢˜åŸå› \n\t- ![wxmlé¢æ¿](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzJkMWVkZmYyNWIwM2YxZDU2ZGVjYjZhM2NkYjAwMGU5NTE5ODQucG5n?x-oss-process=image/format,png)\n\n#### å¦‚ä½•è§£å†³é—®é¢˜\n- åœ¨popoverä»¥åŠpopover-itemåŠ å…¥\n\t```javascript\n\toptions: {\n\t\t\t    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ\n\t\t\t  },\n\t```\n- å°±å¯ä»¥è§£å†³äº†ã€‚æœ€åå»ºè®®slotä¸­å¯ä»¥å†™ä¸Šnameè¿™æ ·ä»£ç å¯èƒ½ä¼šæ›´æ˜“è¯»ã€‚\n####  å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n---","source":"_posts/å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡† Popover.md","raw":"---\nlayout: å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†\ntitle: å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†\ndate: 2020-04-05 11:47:05\ntags: \n- å¾®ä¿¡å°ç¨‹åº\ncategories:\n- å¾®ä¿¡å°ç¨‹åº\n\n\n---\n\n####  å†™åœ¨å‰é¢\n- è®°å½•åŸºäº[å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†](https://developers.weixin.qq.com/community/develop/doc/000e4e7103c3c090e517e0cdb5b806)å®ç°ä¸­äº§ç”Ÿçš„é—®é¢˜åŠæ€è€ƒ\n- - -\n#### é—®é¢˜æˆªå›¾\n![popoveré—®é¢˜æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzlkMGY1NmUxOTVkNzFjMjAyYzVkYzI0OGMxMzg0NmUxMTQ3MTQucG5n?x-oss-process=image/format,png)\n#### é—®é¢˜æè¿°\n- æ¨¡æ‹Ÿå™¨æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†åœ¨çœŸæœºä¸Šç‚¹å‡»åï¼Œæ°”æ³¡æ¡†çš„ç®­å¤´å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œä¸”ç‚¹å‡»åŒä¸€çº§åˆ«åŒºåŸŸï¼Œèƒ½åˆ©ç”¨è¦†ç›–æ¶ˆé™¤ç®­å¤´ã€‚ã€æ˜¯ä¸æ˜¯ä¸€ä¸ªå¾ˆå¯çˆ±çš„bugï¼Ÿ\n\n#### é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\n- å®šä½é—®é¢˜å‘ç”Ÿçš„åŸå› èŒƒå›´\n\t- æ ·å¼\n\t\t- æ ·å¼åœ¨åˆ¤æ–­æ˜¾ç¤ºæ¡ä»¶(wx:if=\"{{visible}}\")ç”Ÿæ•ˆåï¼Œä»ç„¶æ¸²æŸ“\n\t\t- å¦å®šåŸå› \n\t\t\t- æŸ¥è¯¢ä»£ç å‘ç°ï¼Œæ•´ä¸ªæ ·å¼èƒŒæ™¯çš„è®¾å®šæ˜¯åœ¨::beforeä¼ªå…ƒç´ é€‰æ‹©å™¨ä¸­\n\t\t\t- ä¸”æ˜¾ç¤ºæ¡ä»¶ç”Ÿæ•ˆï¼Œåœ¨è°ƒè¯•å™¨ä¸­å·²æ²¡æœ‰è¯¥å…ƒç´ ï¼Œä½†ä»æ˜¾ç¤º\n\t- é€»è¾‘\n\t\t- ä¼šä¸ä¼šæ˜¯ç»„ä»¶åœ¨æ¸²æŸ“æ—¶ï¼Œå¤šæ¸²æŸ“ä¸€ä»½ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ¤æ–­æ¡ä»¶è¿›è¡Œå¼€å…³æ—¶ï¼Œåªæ˜¯å¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œäº†æ“ä½œ\n\t\t- æ€€ç–‘ä¾æ®\n\t\t\t- ![popoveré—®é¢˜ä¾æ®æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzk5ZjcwMDAwZmViM2IwYzc0MWJmNjFiYzE5YTUwMDIxMjYyMTI3LnBuZw?x-oss-process=image/format,png)\n\t\t\t- ä¸Šå›¾å¯è§ï¼šåœ¨popoverç»„ä»¶ä¸‹ï¼Œæœ‰2ä¸ªé€šè¿‡&lt;slot&gt;æ’å…¥çš„ç›¸åŒå†…å®¹\n\n- å¼€å§‹è§£å†³é—®é¢˜\n\t- æŸ¥è¯¢å®˜æ–¹å…³äº[slot](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html)æ–¹é¢çš„ä»‹ç»\n\t\t- ![å®˜æ–¹slotåŸºç¡€ä¾‹å­](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JjMTE0ZmI0YTdhOWZkY2ZlYzU3ZDE5ZWQyYWY0YzI3MzE1NTU4LnBuZw?x-oss-process=image/format,png)\n\t- åŸºäºå®˜æ–¹åŸºç¡€ä»£ç ï¼Œå¤ç°é—®é¢˜\n\t\t- äº§ç”Ÿä¸€ä¸ªchild-tagç»„ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­ç¼–å†™\n\t\t\t```javascript\n\t\t\t// components/child-tag.js.js\n\t\t\tComponent({\n\t\t\t  options: {\n\t\t\t    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ\n\t\t\t  },\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨\n\t\t\t   */\n\t\t\t  properties: {\n\t\t\t\n\t\t\t  },\n\t\t\t  relations: {\n\t\t\t    './component-tag-name': {\n\t\t\t      type: 'parent',\n\t\t\t    }\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„åˆå§‹æ•°æ®\n\t\t\t   */\n\t\t\t  data: {\n\t\t\t\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨\n\t\t\t   */\n\t\t\t  methods: {\n\t\t\t\n\t\t\t  }\n\t\t\t})\n\t\t\t```\n\t\t- ä¸component-tag-nameç»‘å®šå½¢æˆçˆ¶å­ç»„ä»¶\n\t\t\t```javascript\n\t\t\t// components/component-tag-name.js\n\t\t\tComponent({\n\t\t\t  options: {\n\t\t\t    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ\n\t\t\t  },\n\t\t\t  relations: {\n\t\t\t    './child-tag': {\n\t\t\t      type: 'child',\n\t\t\t    }\n\t\t\t  },\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨\n\t\t\t   */\n\t\t\t  properties: {\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„åˆå§‹æ•°æ®\n\t\t\t   */\n\t\t\t  data: {\n\t\t\t    visible: false\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨\n\t\t\t   */\n\t\t\t  methods: {\n\t\t\t  \n\t\t\t  }\n\t\t\t})\n\t\t\t```\n\t\t- å¹¶å°†index.htmlä¸­è¿›è¡Œè°ƒç”¨\n\t\t\t```html\n\t\t\t<!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡ç‰ˆ -->\n\t\t\t<view>\n\t\t\t  <button type=\"primary\" bindtap=\"onTap\">222</button>\n\t\t\t\t<my-component id=\"component\">\n\t\t\t\t\t<view slot=\"content\">\n\t\t\t\t\t\tè¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"content\"ä¸­çš„å†…å®¹\n\t\t\t\t\t\t<child-component>\n\t\t\t\t\t\t\t<view slot=\"child\">è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"child\"ä¸­çš„å†…å®¹</view>\n\t\t\t\t\t\t</child-component>\n\t\t\t\t\t</view>\n\t\t\t\t</my-component>\n\t\t\t</view>\n\t\t\t```\n\t\t- ä½†æ˜¯å…¶ç»“æ„æ ‘ä»ç„¶éå¸¸æ­£å¸¸ï¼Œå¹¶æ²¡æœ‰å‡ºç°é‚£ä¸ªæ‰€è°“çš„\"æ‹·è´\"ç»„ä»¶\n\t\t\t- ![æ”¹å†™v1.1åçš„ç»“æ„æ ‘æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzcwNTRhNjJkYmM2MGEyNmU5ZGI1ODYzNzNjOGY2OTgyMzg3NTI0LnBuZw?x-oss-process=image/format,png)\n\t\t\t- ä»”ç»†å¤ç°äº†å‡ æ¬¡ï¼Œå‘ç°ï¼šå¤šå‡ºæ¥çš„é‚£ä¸ªç»„ä»¶ä¼šæœ‰æ‰€å»¶è¿Ÿã€‚æŠ“ä½è¿™ä¸ªé—®é¢˜ï¼Œæƒ³åˆ°æˆ‘ä»¬åœ¨onReadyä¸­ï¼Œæ³¨å†Œäº†è¯¥ç»„ä»¶ï¼Œäºæ˜¯ï¼Œç»§ç»­æ¨¡æ‹Ÿ\n\t\t- ä¿®æ”¹index.jsä»£ç ï¼Œå¹¶åœ¨component-tag-nameç»„ä»¶æ³¨å†ŒonTapæ–¹æ³•ï¼Œæ§åˆ¶æ˜¾éš\n\t\t\t```javascript\n\t\t\t  onReady() {\n\t\t\t    this.component = this.selectComponent('#component')\n\t\t\t  },\n\t\t\t  onTap() {\n\t\t\t    console.log('onTap')\n\t\t\t    wx.createSelectorQuery().select('#component').boundingClientRect(res => {\n\t\t\t        // è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶ popover ä¸­çš„ onDisplay æ–¹æ³•\n\t\t\t        this.component.onTap();\n\t\t\t    }).exec();\n\t\t\t  }\n\t\t\t\t```\n\t\t- æœ€ç»ˆå¤ç°\n\t\t\t- ![å®˜æ–¹æ¨¡æ‹Ÿæœ€ç»ˆè¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmZjQ3OTNhMjUwYTNjMzlhYjBlOGQxMGJhYTllZmI2NDc1NjIyLnBuZw?x-oss-process=image/format,png)\n\t- å¾—å‡ºé—®é¢˜æ¥æºï¼š\n\t\t- åœ¨ç»„ä»¶ä¸­è¿›è¡Œäº†ä¸€æ¬¡setData\n\t- æ€è€ƒèƒŒåé—®é¢˜\n\t\t- åœ¨ç»„ä»¶ä¸­setDataä¸ºä»€ä¹ˆä¼šâ€æ‹·è´â€œä¸€ä»½ç›¸åŒçš„åœ¨é¡µé¢çº§wxmlä¸­ï¼Ÿ\n\t\t- çŒœæƒ³ä¸€ï¼šä»[WXSå“åº”äº‹ä»¶](https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88)ä¸­ï¼Œæˆ‘éšéšå¾—åˆ°äº†ç­”æ¡ˆ\n\t\t- ![wxsç›¸åº”äº‹ä»¶](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzZlYWJjYjdjOTliMzAxNWMwOGQwZmM2YWM3ZmMxMGMzNDU5NDAxLnBuZw?x-oss-process=image/format,png)\n\t\t- æˆ‘ä»¬åœ¨é¡µé¢çº§é€šè¿‡selectComponentå®ä¾‹åŒ–ç»„ä»¶ï¼Œå¯¹é€‰ä¸­çš„ç»„ä»¶è¿›è¡Œæ“ä½œï¼Œå®˜æ–¹å¯ä»¥é€šè¿‡æ‹·è´ä¸€ä»½ç›¸åŒçš„ç»„ä»¶ï¼Œä½¿æˆ‘ä»¬ä¾¿æ·çš„å°†äº‹ä»¶çš„å¤„ç†ä»2æ¬¡çš„é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ï¼Œå‡å°‘åˆ°ç›´æ¥å¯¹é¡µé¢ä¸Šå…ƒç´ è¿›è¡Œæ“ä½œï¼Œå³ä¸€æ¬¡é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ã€‚\n\t\t- çŒœæƒ³äºŒï¼šé—®é¢˜å±‚é¢æ˜¯åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­çš„wxmlï¼Œæ¸²æŸ“æ–¹å¼å¯¹äºè¿™ç§æƒ…å†µå°±æ˜¯è¿™æ ·å¤„ç†çš„ã€‚\n- å®˜æ–¹å·²ç»™å‡ºé—®é¢˜åŸå› \n\t- ![wxmlé¢æ¿](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzJkMWVkZmYyNWIwM2YxZDU2ZGVjYjZhM2NkYjAwMGU5NTE5ODQucG5n?x-oss-process=image/format,png)\n\n#### å¦‚ä½•è§£å†³é—®é¢˜\n- åœ¨popoverä»¥åŠpopover-itemåŠ å…¥\n\t```javascript\n\toptions: {\n\t\t\t    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ\n\t\t\t  },\n\t```\n- å°±å¯ä»¥è§£å†³äº†ã€‚æœ€åå»ºè®®slotä¸­å¯ä»¥å†™ä¸Šnameè¿™æ ·ä»£ç å¯èƒ½ä¼šæ›´æ˜“è¯»ã€‚\n####  å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n---","slug":"å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡† Popover","published":1,"updated":"2020-04-05T04:08:41.972Z","_id":"ck8miywtf0006e6p3dpcfhzcu","comments":1,"photos":[],"link":"","content":"<h4 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h4><ul>\n<li>è®°å½•åŸºäº<a href=\"https://developers.weixin.qq.com/community/develop/doc/000e4e7103c3c090e517e0cdb5b806\" target=\"_blank\" rel=\"noopener\">å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†</a>å®ç°ä¸­äº§ç”Ÿçš„é—®é¢˜åŠæ€è€ƒ</li>\n</ul>\n<hr>\n<h4 id=\"é—®é¢˜æˆªå›¾\"><a href=\"#é—®é¢˜æˆªå›¾\" class=\"headerlink\" title=\"é—®é¢˜æˆªå›¾\"></a>é—®é¢˜æˆªå›¾</h4><p><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzlkMGY1NmUxOTVkNzFjMjAyYzVkYzI0OGMxMzg0NmUxMTQ3MTQucG5n?x-oss-process=image/format,png\" alt=\"popoveré—®é¢˜æˆªå›¾\"></p>\n<h4 id=\"é—®é¢˜æè¿°\"><a href=\"#é—®é¢˜æè¿°\" class=\"headerlink\" title=\"é—®é¢˜æè¿°\"></a>é—®é¢˜æè¿°</h4><ul>\n<li>æ¨¡æ‹Ÿå™¨æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†åœ¨çœŸæœºä¸Šç‚¹å‡»åï¼Œæ°”æ³¡æ¡†çš„ç®­å¤´å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œä¸”ç‚¹å‡»åŒä¸€çº§åˆ«åŒºåŸŸï¼Œèƒ½åˆ©ç”¨è¦†ç›–æ¶ˆé™¤ç®­å¤´ã€‚ã€æ˜¯ä¸æ˜¯ä¸€ä¸ªå¾ˆå¯çˆ±çš„bugï¼Ÿ</li>\n</ul>\n<h4 id=\"é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\"><a href=\"#é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\" class=\"headerlink\" title=\"é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\"></a>é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•</h4><ul>\n<li><p>å®šä½é—®é¢˜å‘ç”Ÿçš„åŸå› èŒƒå›´</p>\n<ul>\n<li>æ ·å¼<ul>\n<li>æ ·å¼åœ¨åˆ¤æ–­æ˜¾ç¤ºæ¡ä»¶(wx:if=â€â€œ)ç”Ÿæ•ˆåï¼Œä»ç„¶æ¸²æŸ“</li>\n<li>å¦å®šåŸå› <ul>\n<li>æŸ¥è¯¢ä»£ç å‘ç°ï¼Œæ•´ä¸ªæ ·å¼èƒŒæ™¯çš„è®¾å®šæ˜¯åœ¨::beforeä¼ªå…ƒç´ é€‰æ‹©å™¨ä¸­</li>\n<li>ä¸”æ˜¾ç¤ºæ¡ä»¶ç”Ÿæ•ˆï¼Œåœ¨è°ƒè¯•å™¨ä¸­å·²æ²¡æœ‰è¯¥å…ƒç´ ï¼Œä½†ä»æ˜¾ç¤º</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>é€»è¾‘<ul>\n<li>ä¼šä¸ä¼šæ˜¯ç»„ä»¶åœ¨æ¸²æŸ“æ—¶ï¼Œå¤šæ¸²æŸ“ä¸€ä»½ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ¤æ–­æ¡ä»¶è¿›è¡Œå¼€å…³æ—¶ï¼Œåªæ˜¯å¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œäº†æ“ä½œ</li>\n<li>æ€€ç–‘ä¾æ®<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzk5ZjcwMDAwZmViM2IwYzc0MWJmNjFiYzE5YTUwMDIxMjYyMTI3LnBuZw?x-oss-process=image/format,png\" alt=\"popoveré—®é¢˜ä¾æ®æˆªå›¾\"></li>\n<li>ä¸Šå›¾å¯è§ï¼šåœ¨popoverç»„ä»¶ä¸‹ï¼Œæœ‰2ä¸ªé€šè¿‡&lt;slot&gt;æ’å…¥çš„ç›¸åŒå†…å®¹</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å¼€å§‹è§£å†³é—®é¢˜</p>\n<ul>\n<li>æŸ¥è¯¢å®˜æ–¹å…³äº<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html\" target=\"_blank\" rel=\"noopener\">slot</a>æ–¹é¢çš„ä»‹ç»<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JjMTE0ZmI0YTdhOWZkY2ZlYzU3ZDE5ZWQyYWY0YzI3MzE1NTU4LnBuZw?x-oss-process=image/format,png\" alt=\"å®˜æ–¹slotåŸºç¡€ä¾‹å­\"></li>\n</ul>\n</li>\n<li>åŸºäºå®˜æ–¹åŸºç¡€ä»£ç ï¼Œå¤ç°é—®é¢˜<ul>\n<li>äº§ç”Ÿä¸€ä¸ªchild-tagç»„ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­ç¼–å†™  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// components/child-tag.js.js</span></span><br><span class=\"line\">Component(&#123;</span><br><span class=\"line\">  options: &#123;</span><br><span class=\"line\">    multipleSlots: <span class=\"literal\">true</span> <span class=\"comment\">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  properties: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  relations: &#123;</span><br><span class=\"line\">    <span class=\"string\">'./component-tag-name'</span>: &#123;</span><br><span class=\"line\">      type: <span class=\"string\">'parent'</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>ä¸component-tag-nameç»‘å®šå½¢æˆçˆ¶å­ç»„ä»¶  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// components/component-tag-name.js</span></span><br><span class=\"line\">Component(&#123;</span><br><span class=\"line\">  options: &#123;</span><br><span class=\"line\">    multipleSlots: <span class=\"literal\">true</span> <span class=\"comment\">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  relations: &#123;</span><br><span class=\"line\">    <span class=\"string\">'./child-tag'</span>: &#123;</span><br><span class=\"line\">      type: <span class=\"string\">'child'</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  properties: &#123;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    visible: <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>å¹¶å°†index.htmlä¸­è¿›è¡Œè°ƒç”¨  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡ç‰ˆ --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"primary\"</span> <span class=\"attr\">bindtap</span>=<span class=\"string\">\"onTap\"</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">my-component</span> <span class=\"attr\">id</span>=<span class=\"string\">\"component\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"content\"</span>&gt;</span></span><br><span class=\"line\">\t\t\tè¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"content\"ä¸­çš„å†…å®¹</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">child-component</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"child\"</span>&gt;</span>è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"child\"ä¸­çš„å†…å®¹<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">child-component</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">my-component</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>ä½†æ˜¯å…¶ç»“æ„æ ‘ä»ç„¶éå¸¸æ­£å¸¸ï¼Œå¹¶æ²¡æœ‰å‡ºç°é‚£ä¸ªæ‰€è°“çš„â€æ‹·è´â€ç»„ä»¶<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzcwNTRhNjJkYmM2MGEyNmU5ZGI1ODYzNzNjOGY2OTgyMzg3NTI0LnBuZw?x-oss-process=image/format,png\" alt=\"æ”¹å†™v1.1åçš„ç»“æ„æ ‘æˆªå›¾\"></li>\n<li>ä»”ç»†å¤ç°äº†å‡ æ¬¡ï¼Œå‘ç°ï¼šå¤šå‡ºæ¥çš„é‚£ä¸ªç»„ä»¶ä¼šæœ‰æ‰€å»¶è¿Ÿã€‚æŠ“ä½è¿™ä¸ªé—®é¢˜ï¼Œæƒ³åˆ°æˆ‘ä»¬åœ¨onReadyä¸­ï¼Œæ³¨å†Œäº†è¯¥ç»„ä»¶ï¼Œäºæ˜¯ï¼Œç»§ç»­æ¨¡æ‹Ÿ</li>\n</ul>\n</li>\n<li>ä¿®æ”¹index.jsä»£ç ï¼Œå¹¶åœ¨component-tag-nameç»„ä»¶æ³¨å†ŒonTapæ–¹æ³•ï¼Œæ§åˆ¶æ˜¾éš  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">onReady() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.component = <span class=\"keyword\">this</span>.selectComponent(<span class=\"string\">'#component'</span>)</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">onTap() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'onTap'</span>)</span><br><span class=\"line\">  wx.createSelectorQuery().select(<span class=\"string\">'#component'</span>).boundingClientRect(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶ popover ä¸­çš„ onDisplay æ–¹æ³•</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.component.onTap();</span><br><span class=\"line\">  &#125;).exec();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>æœ€ç»ˆå¤ç°<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmZjQ3OTNhMjUwYTNjMzlhYjBlOGQxMGJhYTllZmI2NDc1NjIyLnBuZw?x-oss-process=image/format,png\" alt=\"å®˜æ–¹æ¨¡æ‹Ÿæœ€ç»ˆè¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å¾—å‡ºé—®é¢˜æ¥æºï¼š<ul>\n<li>åœ¨ç»„ä»¶ä¸­è¿›è¡Œäº†ä¸€æ¬¡setData</li>\n</ul>\n</li>\n<li>æ€è€ƒèƒŒåé—®é¢˜<ul>\n<li>åœ¨ç»„ä»¶ä¸­setDataä¸ºä»€ä¹ˆä¼šâ€æ‹·è´â€œä¸€ä»½ç›¸åŒçš„åœ¨é¡µé¢çº§wxmlä¸­ï¼Ÿ</li>\n<li>çŒœæƒ³ä¸€ï¼šä»<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88\" target=\"_blank\" rel=\"noopener\">WXSå“åº”äº‹ä»¶</a>ä¸­ï¼Œæˆ‘éšéšå¾—åˆ°äº†ç­”æ¡ˆ</li>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzZlYWJjYjdjOTliMzAxNWMwOGQwZmM2YWM3ZmMxMGMzNDU5NDAxLnBuZw?x-oss-process=image/format,png\" alt=\"wxsç›¸åº”äº‹ä»¶\"></li>\n<li>æˆ‘ä»¬åœ¨é¡µé¢çº§é€šè¿‡selectComponentå®ä¾‹åŒ–ç»„ä»¶ï¼Œå¯¹é€‰ä¸­çš„ç»„ä»¶è¿›è¡Œæ“ä½œï¼Œå®˜æ–¹å¯ä»¥é€šè¿‡æ‹·è´ä¸€ä»½ç›¸åŒçš„ç»„ä»¶ï¼Œä½¿æˆ‘ä»¬ä¾¿æ·çš„å°†äº‹ä»¶çš„å¤„ç†ä»2æ¬¡çš„é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ï¼Œå‡å°‘åˆ°ç›´æ¥å¯¹é¡µé¢ä¸Šå…ƒç´ è¿›è¡Œæ“ä½œï¼Œå³ä¸€æ¬¡é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ã€‚</li>\n<li>çŒœæƒ³äºŒï¼šé—®é¢˜å±‚é¢æ˜¯åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­çš„wxmlï¼Œæ¸²æŸ“æ–¹å¼å¯¹äºè¿™ç§æƒ…å†µå°±æ˜¯è¿™æ ·å¤„ç†çš„ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å®˜æ–¹å·²ç»™å‡ºé—®é¢˜åŸå› </p>\n<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzJkMWVkZmYyNWIwM2YxZDU2ZGVjYjZhM2NkYjAwMGU5NTE5ODQucG5n?x-oss-process=image/format,png\" alt=\"wxmlé¢æ¿\"></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"å¦‚ä½•è§£å†³é—®é¢˜\"><a href=\"#å¦‚ä½•è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"å¦‚ä½•è§£å†³é—®é¢˜\"></a>å¦‚ä½•è§£å†³é—®é¢˜</h4><ul>\n<li>åœ¨popoverä»¥åŠpopover-itemåŠ å…¥  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">options: &#123;</span><br><span class=\"line\">\t\t    multipleSlots: <span class=\"literal\">true</span> <span class=\"comment\">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class=\"line\">\t\t  &#125;,</span><br></pre></td></tr></table></figure></li>\n<li>å°±å¯ä»¥è§£å†³äº†ã€‚æœ€åå»ºè®®slotä¸­å¯ä»¥å†™ä¸Šnameè¿™æ ·ä»£ç å¯èƒ½ä¼šæ›´æ˜“è¯»ã€‚<h4 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h4></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h4><ul>\n<li>è®°å½•åŸºäº<a href=\"https://developers.weixin.qq.com/community/develop/doc/000e4e7103c3c090e517e0cdb5b806\" target=\"_blank\" rel=\"noopener\">å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†</a>å®ç°ä¸­äº§ç”Ÿçš„é—®é¢˜åŠæ€è€ƒ</li>\n</ul>\n<hr>\n<h4 id=\"é—®é¢˜æˆªå›¾\"><a href=\"#é—®é¢˜æˆªå›¾\" class=\"headerlink\" title=\"é—®é¢˜æˆªå›¾\"></a>é—®é¢˜æˆªå›¾</h4><p><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzlkMGY1NmUxOTVkNzFjMjAyYzVkYzI0OGMxMzg0NmUxMTQ3MTQucG5n?x-oss-process=image/format,png\" alt=\"popoveré—®é¢˜æˆªå›¾\"></p>\n<h4 id=\"é—®é¢˜æè¿°\"><a href=\"#é—®é¢˜æè¿°\" class=\"headerlink\" title=\"é—®é¢˜æè¿°\"></a>é—®é¢˜æè¿°</h4><ul>\n<li>æ¨¡æ‹Ÿå™¨æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†åœ¨çœŸæœºä¸Šç‚¹å‡»åï¼Œæ°”æ³¡æ¡†çš„ç®­å¤´å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œä¸”ç‚¹å‡»åŒä¸€çº§åˆ«åŒºåŸŸï¼Œèƒ½åˆ©ç”¨è¦†ç›–æ¶ˆé™¤ç®­å¤´ã€‚ã€æ˜¯ä¸æ˜¯ä¸€ä¸ªå¾ˆå¯çˆ±çš„bugï¼Ÿ</li>\n</ul>\n<h4 id=\"é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\"><a href=\"#é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\" class=\"headerlink\" title=\"é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\"></a>é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•</h4><ul>\n<li><p>å®šä½é—®é¢˜å‘ç”Ÿçš„åŸå› èŒƒå›´</p>\n<ul>\n<li>æ ·å¼<ul>\n<li>æ ·å¼åœ¨åˆ¤æ–­æ˜¾ç¤ºæ¡ä»¶(wx:if=â€â€œ)ç”Ÿæ•ˆåï¼Œä»ç„¶æ¸²æŸ“</li>\n<li>å¦å®šåŸå› <ul>\n<li>æŸ¥è¯¢ä»£ç å‘ç°ï¼Œæ•´ä¸ªæ ·å¼èƒŒæ™¯çš„è®¾å®šæ˜¯åœ¨::beforeä¼ªå…ƒç´ é€‰æ‹©å™¨ä¸­</li>\n<li>ä¸”æ˜¾ç¤ºæ¡ä»¶ç”Ÿæ•ˆï¼Œåœ¨è°ƒè¯•å™¨ä¸­å·²æ²¡æœ‰è¯¥å…ƒç´ ï¼Œä½†ä»æ˜¾ç¤º</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>é€»è¾‘<ul>\n<li>ä¼šä¸ä¼šæ˜¯ç»„ä»¶åœ¨æ¸²æŸ“æ—¶ï¼Œå¤šæ¸²æŸ“ä¸€ä»½ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ¤æ–­æ¡ä»¶è¿›è¡Œå¼€å…³æ—¶ï¼Œåªæ˜¯å¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œäº†æ“ä½œ</li>\n<li>æ€€ç–‘ä¾æ®<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzk5ZjcwMDAwZmViM2IwYzc0MWJmNjFiYzE5YTUwMDIxMjYyMTI3LnBuZw?x-oss-process=image/format,png\" alt=\"popoveré—®é¢˜ä¾æ®æˆªå›¾\"></li>\n<li>ä¸Šå›¾å¯è§ï¼šåœ¨popoverç»„ä»¶ä¸‹ï¼Œæœ‰2ä¸ªé€šè¿‡&lt;slot&gt;æ’å…¥çš„ç›¸åŒå†…å®¹</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å¼€å§‹è§£å†³é—®é¢˜</p>\n<ul>\n<li>æŸ¥è¯¢å®˜æ–¹å…³äº<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html\" target=\"_blank\" rel=\"noopener\">slot</a>æ–¹é¢çš„ä»‹ç»<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JjMTE0ZmI0YTdhOWZkY2ZlYzU3ZDE5ZWQyYWY0YzI3MzE1NTU4LnBuZw?x-oss-process=image/format,png\" alt=\"å®˜æ–¹slotåŸºç¡€ä¾‹å­\"></li>\n</ul>\n</li>\n<li>åŸºäºå®˜æ–¹åŸºç¡€ä»£ç ï¼Œå¤ç°é—®é¢˜<ul>\n<li>äº§ç”Ÿä¸€ä¸ªchild-tagç»„ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­ç¼–å†™  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// components/child-tag.js.js</span></span><br><span class=\"line\">Component(&#123;</span><br><span class=\"line\">  options: &#123;</span><br><span class=\"line\">    multipleSlots: <span class=\"literal\">true</span> <span class=\"comment\">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  properties: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  relations: &#123;</span><br><span class=\"line\">    <span class=\"string\">'./component-tag-name'</span>: &#123;</span><br><span class=\"line\">      type: <span class=\"string\">'parent'</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>ä¸component-tag-nameç»‘å®šå½¢æˆçˆ¶å­ç»„ä»¶  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// components/component-tag-name.js</span></span><br><span class=\"line\">Component(&#123;</span><br><span class=\"line\">  options: &#123;</span><br><span class=\"line\">    multipleSlots: <span class=\"literal\">true</span> <span class=\"comment\">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  relations: &#123;</span><br><span class=\"line\">    <span class=\"string\">'./child-tag'</span>: &#123;</span><br><span class=\"line\">      type: <span class=\"string\">'child'</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  properties: &#123;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    visible: <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>å¹¶å°†index.htmlä¸­è¿›è¡Œè°ƒç”¨  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡ç‰ˆ --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"primary\"</span> <span class=\"attr\">bindtap</span>=<span class=\"string\">\"onTap\"</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">my-component</span> <span class=\"attr\">id</span>=<span class=\"string\">\"component\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"content\"</span>&gt;</span></span><br><span class=\"line\">\t\t\tè¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"content\"ä¸­çš„å†…å®¹</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">child-component</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"child\"</span>&gt;</span>è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"child\"ä¸­çš„å†…å®¹<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">child-component</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">my-component</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>ä½†æ˜¯å…¶ç»“æ„æ ‘ä»ç„¶éå¸¸æ­£å¸¸ï¼Œå¹¶æ²¡æœ‰å‡ºç°é‚£ä¸ªæ‰€è°“çš„â€æ‹·è´â€ç»„ä»¶<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzcwNTRhNjJkYmM2MGEyNmU5ZGI1ODYzNzNjOGY2OTgyMzg3NTI0LnBuZw?x-oss-process=image/format,png\" alt=\"æ”¹å†™v1.1åçš„ç»“æ„æ ‘æˆªå›¾\"></li>\n<li>ä»”ç»†å¤ç°äº†å‡ æ¬¡ï¼Œå‘ç°ï¼šå¤šå‡ºæ¥çš„é‚£ä¸ªç»„ä»¶ä¼šæœ‰æ‰€å»¶è¿Ÿã€‚æŠ“ä½è¿™ä¸ªé—®é¢˜ï¼Œæƒ³åˆ°æˆ‘ä»¬åœ¨onReadyä¸­ï¼Œæ³¨å†Œäº†è¯¥ç»„ä»¶ï¼Œäºæ˜¯ï¼Œç»§ç»­æ¨¡æ‹Ÿ</li>\n</ul>\n</li>\n<li>ä¿®æ”¹index.jsä»£ç ï¼Œå¹¶åœ¨component-tag-nameç»„ä»¶æ³¨å†ŒonTapæ–¹æ³•ï¼Œæ§åˆ¶æ˜¾éš  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">onReady() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.component = <span class=\"keyword\">this</span>.selectComponent(<span class=\"string\">'#component'</span>)</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">onTap() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'onTap'</span>)</span><br><span class=\"line\">  wx.createSelectorQuery().select(<span class=\"string\">'#component'</span>).boundingClientRect(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶ popover ä¸­çš„ onDisplay æ–¹æ³•</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.component.onTap();</span><br><span class=\"line\">  &#125;).exec();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>æœ€ç»ˆå¤ç°<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmZjQ3OTNhMjUwYTNjMzlhYjBlOGQxMGJhYTllZmI2NDc1NjIyLnBuZw?x-oss-process=image/format,png\" alt=\"å®˜æ–¹æ¨¡æ‹Ÿæœ€ç»ˆè¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å¾—å‡ºé—®é¢˜æ¥æºï¼š<ul>\n<li>åœ¨ç»„ä»¶ä¸­è¿›è¡Œäº†ä¸€æ¬¡setData</li>\n</ul>\n</li>\n<li>æ€è€ƒèƒŒåé—®é¢˜<ul>\n<li>åœ¨ç»„ä»¶ä¸­setDataä¸ºä»€ä¹ˆä¼šâ€æ‹·è´â€œä¸€ä»½ç›¸åŒçš„åœ¨é¡µé¢çº§wxmlä¸­ï¼Ÿ</li>\n<li>çŒœæƒ³ä¸€ï¼šä»<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88\" target=\"_blank\" rel=\"noopener\">WXSå“åº”äº‹ä»¶</a>ä¸­ï¼Œæˆ‘éšéšå¾—åˆ°äº†ç­”æ¡ˆ</li>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzZlYWJjYjdjOTliMzAxNWMwOGQwZmM2YWM3ZmMxMGMzNDU5NDAxLnBuZw?x-oss-process=image/format,png\" alt=\"wxsç›¸åº”äº‹ä»¶\"></li>\n<li>æˆ‘ä»¬åœ¨é¡µé¢çº§é€šè¿‡selectComponentå®ä¾‹åŒ–ç»„ä»¶ï¼Œå¯¹é€‰ä¸­çš„ç»„ä»¶è¿›è¡Œæ“ä½œï¼Œå®˜æ–¹å¯ä»¥é€šè¿‡æ‹·è´ä¸€ä»½ç›¸åŒçš„ç»„ä»¶ï¼Œä½¿æˆ‘ä»¬ä¾¿æ·çš„å°†äº‹ä»¶çš„å¤„ç†ä»2æ¬¡çš„é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ï¼Œå‡å°‘åˆ°ç›´æ¥å¯¹é¡µé¢ä¸Šå…ƒç´ è¿›è¡Œæ“ä½œï¼Œå³ä¸€æ¬¡é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ã€‚</li>\n<li>çŒœæƒ³äºŒï¼šé—®é¢˜å±‚é¢æ˜¯åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­çš„wxmlï¼Œæ¸²æŸ“æ–¹å¼å¯¹äºè¿™ç§æƒ…å†µå°±æ˜¯è¿™æ ·å¤„ç†çš„ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å®˜æ–¹å·²ç»™å‡ºé—®é¢˜åŸå› </p>\n<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzJkMWVkZmYyNWIwM2YxZDU2ZGVjYjZhM2NkYjAwMGU5NTE5ODQucG5n?x-oss-process=image/format,png\" alt=\"wxmlé¢æ¿\"></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"å¦‚ä½•è§£å†³é—®é¢˜\"><a href=\"#å¦‚ä½•è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"å¦‚ä½•è§£å†³é—®é¢˜\"></a>å¦‚ä½•è§£å†³é—®é¢˜</h4><ul>\n<li>åœ¨popoverä»¥åŠpopover-itemåŠ å…¥  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">options: &#123;</span><br><span class=\"line\">\t\t    multipleSlots: <span class=\"literal\">true</span> <span class=\"comment\">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class=\"line\">\t\t  &#125;,</span><br></pre></td></tr></table></figure></li>\n<li>å°±å¯ä»¥è§£å†³äº†ã€‚æœ€åå»ºè®®slotä¸­å¯ä»¥å†™ä¸Šnameè¿™æ ·ä»£ç å¯èƒ½ä¼šæ›´æ˜“è¯»ã€‚<h4 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h4></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n<hr>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ck8mixuo50000e6p35ux42r40","category_id":"ck8mieyr10000xbp37i8baz0y","_id":"ck8miyad80002e6p3ehj6foil"},{"post_id":"ck8miyppz0003e6p30ayx1mbx","category_id":"ck8mieyr10000xbp37i8baz0y","_id":"ck8miypq10005e6p3ctngajm9"},{"post_id":"ck8miywtf0006e6p3dpcfhzcu","category_id":"ck8mieyr10000xbp37i8baz0y","_id":"ck8miywtg0008e6p305f2fcx6"}],"PostTag":[{"post_id":"ck8mixuo50000e6p35ux42r40","tag_id":"ck8micb6z0001vnp37ybyh36h","_id":"ck8miyad70001e6p3eu6q7vk6"},{"post_id":"ck8miyppz0003e6p30ayx1mbx","tag_id":"ck8micb6z0001vnp37ybyh36h","_id":"ck8miypq10004e6p3hp2b7ib0"},{"post_id":"ck8miywtf0006e6p3dpcfhzcu","tag_id":"ck8micb6z0001vnp37ybyh36h","_id":"ck8miywtg0007e6p3395mbjvb"}],"Tag":[{"name":"å¾®ä¿¡å°ç¨‹åº","_id":"ck8micb6z0001vnp37ybyh36h"}]}}