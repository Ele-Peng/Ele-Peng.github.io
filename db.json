{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"themes/hexo-theme-lx/source/favicon.ico","path":"favicon.ico","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/css/base.styl","path":"css/base.styl","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/css/main.min.css","path":"css/main.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/post_cover.jpeg","path":"images/post_cover.jpeg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/footer-l.jpeg","path":"images/footer-l.jpeg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/footer-r.jpeg","path":"images/footer-r.jpeg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/js/jquery.easing.min.js","path":"js/jquery.easing.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/js/jquery.jside.menu.js","path":"js/jquery.jside.menu.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/js/local.search.js","path":"js/local.search.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/css/menu/button.styl","path":"css/menu/button.styl","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/css/menu/menu.styl","path":"css/menu/menu.styl","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/css/page_style/page_style.styl","path":"css/page_style/page_style.styl","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/avatar.jpeg","path":"images/avatar.jpeg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-lx/source/images/cover.jpeg","path":"images/cover.jpeg","modified":0,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"c0dd272f7912299f76e2878d9a7fd3e0f1805b0d","modified":1603812071259},{"_id":"themes/hexo-theme-lx/.editorconfig","hash":"f8102695960fe708149c2e21934969700bfb0031","modified":1603812071268},{"_id":"themes/hexo-theme-lx/CODE_OF_CONDUCT.md","hash":"4faa826cb7049aff196edbf38e0b29c3fec2cf17","modified":1603812071268},{"_id":"themes/hexo-theme-lx/CONTRIBUTING.md","hash":"c70e994eb59d431ccaaf8b114ad74c8962cc3f45","modified":1603812071268},{"_id":"themes/hexo-theme-lx/_config.yml","hash":"2b103b1f5527242323c4388a743907a5e45cee84","modified":1603812071269},{"_id":"themes/hexo-theme-lx/LICENSE","hash":"2e43fe50cb85afda5cbd30aa4c056125f0e11a53","modified":1603812071269},{"_id":"themes/hexo-theme-lx/package.json","hash":"7c15e6d012eee8b69d625b26f61adfd018a15f7f","modified":1603812071272},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1603812071259},{"_id":"source/_posts/CSS-åŠ¨ç”»ä¸ç»˜åˆ¶.md","hash":"8ded4738cb78d786fb9b2697a7118ef543f13468","modified":1603812071259},{"_id":"source/_posts/2020å¹´ç¬¬23å‘¨æˆ‘åœ¨è¯»ä»€ä¹ˆ.md","hash":"a63ba6398819ed38180d593397e7471d93f2d74c","modified":1603812071259},{"_id":"source/_posts/CSS-æ’ç‰ˆ.md","hash":"84fb23da1d35bdd09764d3ab6955eacf9d29f472","modified":1603812071260},{"_id":"source/_posts/CSSåŸºæœ¬è¯­æ³•-åŸºç¡€æœºåˆ¶.md","hash":"3d2d52a55efd60de64476d38f56f5d75addf63a7","modified":1603812071260},{"_id":"source/_posts/CSS-é€‰æ‹©å™¨.md","hash":"fd20c2479294a554e4f66dbe6213494a977007b1","modified":1603812071260},{"_id":"source/_posts/Elle-æŠ€èƒ½æ ‘æ¢³ç†.md","hash":"cb05c9a9fadf0553264fa1452782f02a27d95130","modified":1603812071260},{"_id":"source/_posts/Fibonacci.md","hash":"116a1d4c686284c8ed2d1067d3fe2227829befe4","modified":1603812071260},{"_id":"source/_posts/Elle-è®­ç»ƒç®—æ³•è®¡åˆ’.md","hash":"c2cc3fac9bda2919d3a5d4125c9cfeb5af3c99a9","modified":1603812071260},{"_id":"source/_posts/JS-å¼‚æ­¥.md","hash":"aa1306c78a335afffb8c4946f53cd8e86f07cffb","modified":1603812071261},{"_id":"source/_posts/Javascript-Atom+Types.md","hash":"0434895ae39487851e7645ecd43480f1a9553e02","modified":1603812071261},{"_id":"source/_posts/HTML-XMLä¸SGML.md","hash":"80d5a5efc260a4ac2534a6772106cfe20fd55975","modified":1603812071261},{"_id":"source/_posts/Javascript-Expressions.md","hash":"1cc80757a1d9e834db2f1467a969a898a929c165","modified":1603812071261},{"_id":"source/_posts/Javascript-Statement.md","hash":"4aa61a66b0cca54cdab34a63efad5d565d4d014c","modified":1603812071262},{"_id":"source/_posts/Javascript-è¿è¡Œæœºåˆ¶.md","hash":"9cc6460a4f350d89794454d0207230e7ca6adf73","modified":1603812071262},{"_id":"source/_posts/Javascrtip-è¿è¡Œæœºåˆ¶ï¼ˆäºŒï¼‰.md","hash":"7976e421485bc98e5a03608fd21f737c3752be0a","modified":1603812071262},{"_id":"source/_posts/OOP-é¢å‘å¯¹è±¡.md","hash":"6f878c6e25c369060e6b75e5734901733773d020","modified":1603812071262},{"_id":"source/_posts/Reg-Number.md","hash":"2894028fcd9a9a7d2948bd0584716e65810f7548","modified":1603812071263},{"_id":"source/_posts/Reg-String.md","hash":"6eaab718b2b6fe27899e090d63ec995f434d625d","modified":1603812071263},{"_id":"source/_posts/Realm.md","hash":"ecd472950da7edaf47efc3ba695853b7fe69fee4","modified":1603812071262},{"_id":"source/_posts/Toy-Browser-DAY1.md","hash":"74c1fba504ce2d5bbc68d8aee21c956900741e9c","modified":1603812071263},{"_id":"source/_posts/Toy-Browser-DAY3.md","hash":"b601d848ec7e823dac91a76984de623acda74c72","modified":1603812071264},{"_id":"source/_posts/Toy-Browser-DAY2.md","hash":"3a3dcf7a66b02df5ec53a63a6b3ade6386ab40f3","modified":1603812071263},{"_id":"source/_posts/Toy-Browser-DAY5.md","hash":"c19c329e8f7fec2c3e8425d1c245d5cfcc7e5cc1","modified":1603812071264},{"_id":"source/_posts/Toy-Browser-DAY4.md","hash":"c188ac364af489add061a7216d993a4401a28bda","modified":1603812071264},{"_id":"source/_posts/UTF8-Encoing.md","hash":"04743e47bfd6f9f62075dffb1dc4081608149268","modified":1603812071264},{"_id":"source/_posts/react-hooks.md","hash":"5a4f976a9f6676a18bea08c15c936389bf794fe0","modified":1603812071265},{"_id":"source/_posts/convertStringToNumber.md","hash":"b6ced6ca5d72ecb7323a431bfc5c700e17b5055b","modified":1603812071265},{"_id":"source/_posts/convertNumberToString.md","hash":"52719bcd03e170796aff1c1d9b9ed2c06c5dcc9a","modified":1603812071265},{"_id":"source/_posts/ä»URLè¾“å…¥åˆ°.md","hash":"aaa47db747f78101d7a733219b15f859f82088fa","modified":1603812071265},{"_id":"source/_posts/å‰ç«¯æ€§èƒ½ç›‘æ§.md","hash":"72f3a6a519af1270de0e6cc22a31109011f1acb6","modified":1603812071265},{"_id":"source/_posts/åŸºäºKMPçš„FSMå¤„ç†å­—ç¬¦ä¸².md","hash":"8b12dec68f8f6ae6e8130aa56d0a79da1f841089","modified":1603812071266},{"_id":"source/_posts/å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡† Popover.md","hash":"a772413e83590980e957be996e2f2c0a55b05485","modified":1603812071266},{"_id":"source/_posts/æ•°ç»„ã€é“¾è¡¨ã€è·³è¡¨.md","hash":"4f58f68cbda32f19218b45e72aeae7500b8f6e9a","modified":1603812071266},{"_id":"source/_posts/å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚.md","hash":"566bb1d0a5319be05916842f9e0bea0fe2331037","modified":1603812071266},{"_id":"source/_posts/å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ.md","hash":"51f4b69c4b314824bdcd93e3193eba41a5090447","modified":1603812071266},{"_id":"source/_posts/ç¼–ç¨‹è¯­è¨€é€šè¯†.md","hash":"57a76375d878662966bdeb08a5689bd1d9228cbb","modified":1603812071267},{"_id":"source/_posts/è‡ªå·±çš„å‰ç«¯çŸ¥è¯†ä½“ç³».md","hash":"5abc34d1cb6733afcb85b42400ea60888894a83e","modified":1603812071267},{"_id":"source/_posts/è®¡ç®—æœºå›¾å½¢å­¦åˆæ¢.md","hash":"851690f45d587242dc8e923a3a031f350e8d9914","modified":1603812071267},{"_id":"themes/hexo-theme-lx/languages/zh.yml","hash":"b9a174e46bd89df7d6bf3a7863c350a62dce8a81","modified":1603812071269},{"_id":"themes/hexo-theme-lx/languages/en.yml","hash":"ec59da08e7c8dc61872b7896f167e42491965b2e","modified":1603812071269},{"_id":"source/_posts/é¢œè‰²ç©ºé—´.md","hash":"7dccd3548cf644ccf42d8c82afba8645e3055234","modified":1603812071267},{"_id":"themes/hexo-theme-lx/layout/archive.ejs","hash":"539ad764457af4434a6764c2044c4bbb9c34759f","modified":1603812071269},{"_id":"themes/hexo-theme-lx/layout/layout.ejs","hash":"a8e012724633a45c7601c38866176e11f88b0db9","modified":1603812071269},{"_id":"themes/hexo-theme-lx/layout/index.ejs","hash":"6c73bb34c29861124a0464a9a8dea95adf4fc5b0","modified":1603812071269},{"_id":"source/_posts/ç®—æ³•æ¨¡æ¿.md","hash":"b6d3a70e54a2563e90748cb8ee8e17d5138aa32d","modified":1603984431882},{"_id":"themes/hexo-theme-lx/layout/page.ejs","hash":"c0895bd2b63c5bba7c54686d6b7eaec9fbc520a5","modified":1603812071269},{"_id":"themes/hexo-theme-lx/layout/post.ejs","hash":"9396418ae3822ee444f44c509ec27955842c9360","modified":1603812071271},{"_id":"themes/hexo-theme-lx/source/favicon.ico","hash":"96b9a549337c2bec483c2879eeafa4d1f8748fed","modified":1603812071276},{"_id":"themes/hexo-theme-lx/layout/partials/aside.ejs","hash":"52d7e28c6c44ef8ea9e2ac465abe668a21f7ec4b","modified":1603812071270},{"_id":"themes/hexo-theme-lx/layout/partials/config.ejs","hash":"6809577629e67dc00a2b20c2326818fa7f2c29be","modified":1603812071270},{"_id":"themes/hexo-theme-lx/layout/partials/font.ejs","hash":"2dc65c0b4f60ed8329a296c5172aee8d42025a1e","modified":1603812071270},{"_id":"themes/hexo-theme-lx/layout/partials/menu.ejs","hash":"7c3d71999f233f5fb7549a472c922c8257711d5f","modified":1603812071270},{"_id":"themes/hexo-theme-lx/layout/partials/footer.ejs","hash":"079fcedbca1fc74485d82510354a00a39f52b0e9","modified":1603812071270},{"_id":"themes/hexo-theme-lx/layout/partials/post-footer.ejs","hash":"a2dbce8103bdc694439e8709c7f636f68ccc3328","modified":1603812071270},{"_id":"themes/hexo-theme-lx/layout/partials/post-header.ejs","hash":"adc798cf72c82a069fb354f48f65bba5f1405b45","modified":1603812071270},{"_id":"themes/hexo-theme-lx/layout/partials/pagination.ejs","hash":"82c25643c1e3b16f0472eebfe77f4a03ad0e8824","modified":1603812071270},{"_id":"themes/hexo-theme-lx/layout/partials/search.ejs","hash":"e68af7bfc83edcf8da639982e1766c53f129128f","modified":1603812071271},{"_id":"themes/hexo-theme-lx/layout/partials/recent-posts.ejs","hash":"889018a6df0c62b61c1c03712a2d3eb39882559c","modified":1603812071271},{"_id":"themes/hexo-theme-lx/layout/partials/sociallinks.ejs","hash":"4460e06f88084f545b4409685644c7f101d11ba5","modified":1603812071271},{"_id":"themes/hexo-theme-lx/scripts/helpers/font.js","hash":"0e7adebaf7bb3ba516c8f82cf26100237584bf44","modified":1603812071273},{"_id":"themes/hexo-theme-lx/layout/third-party/comment.ejs","hash":"f1d1c9425059e76c8481829797de44df637c0723","modified":1603812071272},{"_id":"themes/hexo-theme-lx/layout/third-party/mathjax.ejs","hash":"e857f83195594e6ffcacf08f07df0c229806113b","modified":1603812071272},{"_id":"themes/hexo-theme-lx/scripts/tags/button.js","hash":"dd5da28768a3ed3f2e3b308a9ff220403825579f","modified":1603812071273},{"_id":"themes/hexo-theme-lx/scripts/tags/center-quote.js","hash":"e5086a9b99ac1c8006f4fa7c5568b96cc1d47cf6","modified":1603812071273},{"_id":"themes/hexo-theme-lx/scripts/tags/label.js","hash":"7247ac0f614993d4d162b14b68e924fc969581f5","modified":1603812071274},{"_id":"themes/hexo-theme-lx/scripts/tags/note.js","hash":"19dc88f867d684101e851e25fe9da661c56acc66","modified":1603812071274},{"_id":"themes/hexo-theme-lx/scripts/tags/video.js","hash":"3a70f28b9769fd308c8df7d694fb7f896f12ae58","modified":1603812071274},{"_id":"themes/hexo-theme-lx/source/css/base.styl","hash":"f29e3f7ab355d599d186ffc4a457169df4af3ad5","modified":1603812071274},{"_id":"themes/hexo-theme-lx/source/css/main.styl","hash":"7d306db88b0fd5e32e7b89b9c459244c1348dc87","modified":1603812071275},{"_id":"themes/hexo-theme-lx/source/css/main.min.css","hash":"f92bf3eef5351215ee8bced4a40d88dab68330bf","modified":1603812071275},{"_id":"themes/hexo-theme-lx/source/images/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1603812071276},{"_id":"themes/hexo-theme-lx/source/images/post_cover.jpeg","hash":"93f216636c87dbbe635d4bb6b944851d92d84723","modified":1603812071284},{"_id":"themes/hexo-theme-lx/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1603812071284},{"_id":"themes/hexo-theme-lx/source/images/footer-l.jpeg","hash":"f036edc5f66ffbcc34c3d855414c6ca5ef30a04b","modified":1603812071283},{"_id":"themes/hexo-theme-lx/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1603812071284},{"_id":"themes/hexo-theme-lx/source/images/footer-r.jpeg","hash":"5c7677ac85cf8a683b91e97702b7096017006b4f","modified":1603812071283},{"_id":"themes/hexo-theme-lx/source/js/jquery.easing.min.js","hash":"af83a43279779fbc716f40ba8c5280782027540a","modified":1603812071284},{"_id":"themes/hexo-theme-lx/source/js/jquery.jside.menu.js","hash":"d15b40199520d22771f9a211ac4282041df2ae5a","modified":1603812071285},{"_id":"themes/hexo-theme-lx/source/js/local.search.js","hash":"3dd788d1e64431feb8faca7a7f175d25ed31f25a","modified":1603812071285},{"_id":"themes/hexo-theme-lx/layout/third-party/analytics/baidu-analytics.ejs","hash":"30cf8cd193777b1e071313528e06b16eca508187","modified":1603812071271},{"_id":"themes/hexo-theme-lx/layout/third-party/analytics/index.ejs","hash":"c98b574b2634de33694edb40b1f9120160b81acb","modified":1603812071272},{"_id":"themes/hexo-theme-lx/layout/third-party/analytics/google-analytics.ejs","hash":"09775c366a01c656b7185ef3da4bc7b33caa2241","modified":1603812071272},{"_id":"themes/hexo-theme-lx/source/css/menu/button.styl","hash":"d440d99e13b0f58edcab27bfce4e027e0e54fd77","modified":1603812071275},{"_id":"themes/hexo-theme-lx/source/css/menu/menu.styl","hash":"ebe4d6bc7e0081ad4d7659427abb98a1344c1aae","modified":1603812071275},{"_id":"themes/hexo-theme-lx/source/css/page_style/page_style.styl","hash":"d10cea4992ee10e2ab88a2ae0ebe08854f55d7c6","modified":1603812071276},{"_id":"themes/hexo-theme-lx/source/images/avatar.jpeg","hash":"b6aba9aa030f22221d4a357a46a6bc6ef0cce556","modified":1603812071279},{"_id":"themes/hexo-theme-lx/source/images/cover.jpeg","hash":"7dbe52d0aa3c1d6d90764f9a2c19d0dc5dd479c0","modified":1603812071282},{"_id":"public/search.xml","hash":"7a41d3e270bcfb0b41e167c252393e06193fc027","modified":1603984749902},{"_id":"public/2020/09/24/ç®—æ³•æ¨¡æ¿/index.html","hash":"c8b5df84d47aefbab79838066811270fbb094453","modified":1603984755049},{"_id":"public/2020/08/27/Elle-æŠ€èƒ½æ ‘æ¢³ç†/index.html","hash":"ae96262e185b7380e3973242351306cdff336ebc","modified":1603984755049},{"_id":"public/2020/08/26/Fibonacci/index.html","hash":"44077b6c45271ab600cd9b7272ba62a1f8f687c2","modified":1603984755049},{"_id":"public/2020/08/23/é¢œè‰²ç©ºé—´/index.html","hash":"d66b706755c8d3079c7807f1573285f421256698","modified":1603984755049},{"_id":"public/2020/06/20/JS-å¼‚æ­¥/index.html","hash":"76c0edd522b349361dd80460a670f3608e4e9f95","modified":1603984755049},{"_id":"public/2020/06/06/HTML-XMLä¸SGML/index.html","hash":"c08d821e32437f695f96da2399f0d6fdbdf6fb5d","modified":1603984755049},{"_id":"public/2020/06/06/CSS-åŠ¨ç”»ä¸ç»˜åˆ¶/index.html","hash":"f37df414b1062dcc8573ca7e361695ee133ec759","modified":1603984755049},{"_id":"public/2020/06/02/2020å¹´ç¬¬23å‘¨æˆ‘åœ¨è¯»ä»€ä¹ˆ/index.html","hash":"0f4b6da9b8d076bc3b9cb26e1efedeea7d69ffa9","modified":1603984755049},{"_id":"public/2020/05/30/CSS-æ’ç‰ˆ/index.html","hash":"f2701f6024bf128cd95424c10f1133ce5c4c3641","modified":1603984755049},{"_id":"public/2020/05/29/CSS-é€‰æ‹©å™¨/index.html","hash":"08f2ffec05b7c8b24e1a12a4addd7e79ab580824","modified":1603984755049},{"_id":"public/2020/05/24/CSSåŸºæœ¬è¯­æ³•-åŸºç¡€æœºåˆ¶/index.html","hash":"4221db3d92025a3ff7b84ffe2afd268206d2e888","modified":1603984755049},{"_id":"public/2020/05/24/Toy-Browser-DAY5/index.html","hash":"a3af649932cb43671fb9b92e2561452a5a6c41a1","modified":1603984755049},{"_id":"public/2020/05/22/Toy-Browser-DAY4/index.html","hash":"d1be82d4cc86676cc2151dcd3382fd503e3b2e40","modified":1603984755049},{"_id":"public/2020/05/17/Toy-Browser-DAY3/index.html","hash":"190a1a4157db8a5d8b5551b9b2c73d3af6f49dc7","modified":1603984755049},{"_id":"public/2020/05/16/åŸºäºKMPçš„FSMå¤„ç†å­—ç¬¦ä¸²/index.html","hash":"cc05463fffdf7cb743f9cbf2298ea649e62ac62f","modified":1603984755049},{"_id":"public/2020/05/15/Toy-Browser-DAY2/index.html","hash":"bb0eea4a02eb83749d075420d492d3a5cf958d96","modified":1603984755049},{"_id":"public/2020/05/12/ä»URLè¾“å…¥åˆ°/index.html","hash":"a68aa61ebdf65c86dab3bae7744d924fb244e3c0","modified":1603984755049},{"_id":"public/2020/05/10/Toy-Browser-DAY1/index.html","hash":"e3dd2d23ac544efbf83becf7d29f8b1a3fd3ea40","modified":1603984755049},{"_id":"public/2020/05/08/Realm/index.html","hash":"217601a1ca2b1651709160d33cddf2af0941f8bb","modified":1603984755049},{"_id":"public/2020/05/02/Javascrtip-è¿è¡Œæœºåˆ¶ï¼ˆäºŒï¼‰/index.html","hash":"fdfb7d3eca5c86a2864db8cb70a5ad4a2d3eb6c6","modified":1603984755049},{"_id":"public/2020/04/30/Javascript-è¿è¡Œæœºåˆ¶/index.html","hash":"4769d43bf27be9d20d2673f2abe484910d2560a3","modified":1603984755049},{"_id":"public/2020/04/26/Javascript-Statement/index.html","hash":"4bcc9e280f38c4b120c19a1c40a386a7b5891dd0","modified":1603984755049},{"_id":"public/2020/04/25/convertNumberToString/index.html","hash":"da7901d31ffd359dab048c145486051cf049dd09","modified":1603984755049},{"_id":"public/2020/04/24/convertStringToNumber/index.html","hash":"c68f66eb708428b17657b75016d10f536f55e809","modified":1603984755049},{"_id":"public/2020/04/23/Javascript-Expressions/index.html","hash":"2590a04e3f209c054518e50a99f4e1be8e7f42bb","modified":1603984755049},{"_id":"public/2020/04/21/UTF8-Encoing/index.html","hash":"b7045c76ad18b2640dae6e11a044033524e53254","modified":1603984755049},{"_id":"public/2020/04/21/Reg-String/index.html","hash":"ed110558da9c17b889f3a031588f1318232ac485","modified":1603984755049},{"_id":"public/2020/04/20/Reg-Number/index.html","hash":"9844f44cecb03a159c455518a936cad980da8a87","modified":1603984755049},{"_id":"public/2020/04/20/Javascript-Atom+Types/index.html","hash":"d2e31c0816f3ccfb6e499bcab44fb25cdc9dd9ae","modified":1603984755049},{"_id":"public/2020/04/20/ç¼–ç¨‹è¯­è¨€é€šè¯†/index.html","hash":"b6c37105a39f72cb49ee317a7c742224e1877be7","modified":1603984755049},{"_id":"public/2020/04/15/è®¡ç®—æœºå›¾å½¢å­¦åˆæ¢/index.html","hash":"360432ade84a617d0f83b3f9bcb4618c0469381a","modified":1603984755049},{"_id":"public/2020/04/16/å‰ç«¯æ€§èƒ½ç›‘æ§/index.html","hash":"9cf14e17c7488f04f64b6e47f1e2bbf0ca80beea","modified":1603984755049},{"_id":"public/2020/04/13/react-hooks/index.html","hash":"ff3ab832d50e832a7ca398d8729971c762b8f706","modified":1603984755049},{"_id":"public/2020/04/12/è‡ªå·±çš„å‰ç«¯çŸ¥è¯†ä½“ç³»/index.html","hash":"793758cd363514d53680976d8c1c6489b76a683a","modified":1603984755049},{"_id":"public/2020/04/09/OOP-é¢å‘å¯¹è±¡/index.html","hash":"a0f9e13502db85bba8b34ec143cd3423e68865ea","modified":1603984755049},{"_id":"public/2020/04/07/æ•°ç»„ã€é“¾è¡¨ã€è·³è¡¨/index.html","hash":"c4fca915586870de349846c9493e3bb4d7841f69","modified":1603984755049},{"_id":"public/2020/04/06/Elle-è®­ç»ƒç®—æ³•è®¡åˆ’/index.html","hash":"69d4c63281e3af006d9bc34ff4dced700a78ba1b","modified":1603984755049},{"_id":"public/2020/04/05/å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ/index.html","hash":"0846bde7f657b5728e498b7de64b537066940202","modified":1603984755049},{"_id":"public/2020/04/05/å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚/index.html","hash":"c2ec300ea938d862d9a83fbdbabcace281e2575f","modified":1603984755049},{"_id":"public/2020/04/05/å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡† Popover/index.html","hash":"2e488e34b249f444234eb630fc7b9f06636cd188","modified":1603984755049},{"_id":"public/archives/index.html","hash":"a01de0569c851288ce119c46f489369371efd337","modified":1603984755049},{"_id":"public/archives/page/2/index.html","hash":"3baafea75d41040dd2839b8db77c3619dcf2a4f9","modified":1603984755049},{"_id":"public/archives/page/3/index.html","hash":"ac256a89e9fb05c99aaee82d2dc79668c9a81d05","modified":1603984755049},{"_id":"public/archives/page/4/index.html","hash":"7464aeb8e7d32839e0757c2928d4d2ec93c352dd","modified":1603984755049},{"_id":"public/archives/2020/index.html","hash":"f0e0274d4764e8ff186584ebb793a8855dfdd06a","modified":1603984755049},{"_id":"public/archives/2020/page/2/index.html","hash":"a3112449e587e93947c53810a7f7ecb14db0bfc7","modified":1603984755049},{"_id":"public/archives/2020/page/3/index.html","hash":"097f6679e7d3b5e663332a0586ef4d9604a19a4e","modified":1603984755049},{"_id":"public/archives/2020/page/4/index.html","hash":"0742dd7ebf187f1b75c59d7116553d97b2f03777","modified":1603984755049},{"_id":"public/archives/2020/04/index.html","hash":"15b1f4c00392ea19dfec8943165b9e166728a1d8","modified":1603984755049},{"_id":"public/archives/2020/04/page/2/index.html","hash":"a6c3296fb89083b93937686fb4f21b99f3ca9773","modified":1603984755049},{"_id":"public/archives/2020/05/index.html","hash":"95da46109ea604faf8f659415ec45884002c4a01","modified":1603984755049},{"_id":"public/archives/2020/05/page/2/index.html","hash":"01e7dbe207b4457c2a65ecc08a960bc727b40abf","modified":1603984755049},{"_id":"public/archives/2020/06/index.html","hash":"84c2355ad0b0a9a5aabfdd08e5bceb11fd581af5","modified":1603984755049},{"_id":"public/archives/2020/08/index.html","hash":"c7d9f78e7d6e99c69c977e17c4213dd892caa7e4","modified":1603984755049},{"_id":"public/archives/2020/09/index.html","hash":"5448b40c825b610b667cbbb92888d70627a19635","modified":1603984755049},{"_id":"public/categories/CSS/index.html","hash":"6b92c2092248782cf89a89f5fa3bd8c72f63fb4c","modified":1603984755049},{"_id":"public/categories/é˜…è¯»/index.html","hash":"261864ea4aaf5d62ac78aace62386655f335a33b","modified":1603984755049},{"_id":"public/categories/å‰ç«¯æ¦‚å¿µ/index.html","hash":"46d5bf7056847b47aa572d5771f03d445a3e0888","modified":1603984755049},{"_id":"public/categories/å‰ç«¯æ¦‚å¿µ/page/2/index.html","hash":"e320cb3ccf7f82e2828c5b06df3afa780f96d47c","modified":1603984755049},{"_id":"public/categories/ç®—æ³•/index.html","hash":"33ee52fe296e8c092e0899b4b4cee4e8ba8b67a9","modified":1603984755049},{"_id":"public/categories/Javascript/index.html","hash":"c6a10368df7844f83ea0fe4cb2a088582b128fab","modified":1603984755049},{"_id":"public/categories/HTML/index.html","hash":"d860497c044c784db801dcea071c8d625535dfc8","modified":1603984755049},{"_id":"public/categories/æµè§ˆå™¨/index.html","hash":"d7179b0d1dc63b48ea1c0efd236f9c18cbab4143","modified":1603984755049},{"_id":"public/categories/react/index.html","hash":"6bbbd1e034d443a3549ab4e644a483368d4de619","modified":1603984755049},{"_id":"public/categories/è®¡ç®—æœºç½‘ç»œ/index.html","hash":"66ec84c605b6fd2311297822308170810dd27bbf","modified":1603984755049},{"_id":"public/categories/æ€§èƒ½ç›‘æ§/index.html","hash":"996d7a00b76a78dee2c71d471b2f83066de71377","modified":1603984755049},{"_id":"public/categories/å¾®ä¿¡å°ç¨‹åº/index.html","hash":"aebc628ad10bb026172d4a3c85b33e4b8aa0c2a0","modified":1603984755049},{"_id":"public/categories/è®¡ç®—æœºå›¾å½¢å­¦/index.html","hash":"7985161e73197ab224768a077737a01732e1591b","modified":1603984755049},{"_id":"public/categories/WebGL/index.html","hash":"d4db4c5fe2b60e6ce5d7ca489132f27e2836b588","modified":1603984755049},{"_id":"public/index.html","hash":"210748b4b22b5b76d121a945a83b267e132a153d","modified":1603984755049},{"_id":"public/page/2/index.html","hash":"50bc0e115f6b3810ebf591b12d206012b8afd368","modified":1603984755049},{"_id":"public/page/3/index.html","hash":"1f9806837a29f28eade2e7a1f8f0a1a1b492884d","modified":1603984755049},{"_id":"public/page/4/index.html","hash":"716bade1abd2aaf112b06e1a986607af16821e6e","modified":1603984755049},{"_id":"public/tags/CSS/index.html","hash":"cfbd09680c64460b739694d2d07f181de0dc50ea","modified":1603984755049},{"_id":"public/tags/é˜…è¯»/index.html","hash":"916d190cf80e6de0d96368d9cc0c2a6d0d43bffa","modified":1603984755049},{"_id":"public/tags/å‰ç«¯æ¦‚å¿µ/index.html","hash":"9057baced1f611b50aa25cbb0da5b8c832d10370","modified":1603984755049},{"_id":"public/tags/å‰ç«¯æ¦‚å¿µ/page/2/index.html","hash":"f89bc8771dfb8fff40a424d894512fcad2259f19","modified":1603984755049},{"_id":"public/tags/writing/index.html","hash":"65c557b8fe82167fd175ca2ffd9b2c90361f2854","modified":1603984755049},{"_id":"public/tags/ç®—æ³•/index.html","hash":"30d4764230e1189df197cee21e51520bc8dd4465","modified":1603984755049},{"_id":"public/tags/Javascript/index.html","hash":"84e67a3a185fa7362042f640dc08325a4652bbe8","modified":1603984755049},{"_id":"public/tags/HTML/index.html","hash":"5eb9cef1e149651172583c81a73f9ebdd7735dd4","modified":1603984755049},{"_id":"public/tags/UTF-8/index.html","hash":"8fcb4277fe8c3476684e90955d86008eb4b45d3f","modified":1603984755049},{"_id":"public/tags/æ­£åˆ™è¡¨è¾¾å¼/index.html","hash":"2cc43a3127b22b13ea4254c0aa0e22d9b342cd9d","modified":1603984755049},{"_id":"public/tags/æµè§ˆå™¨/index.html","hash":"e6e31d88c2ddef277593395ae5cb3993fce05774","modified":1603984755049},{"_id":"public/tags/react/index.html","hash":"b8c4c419f393536f4249b2caafa2fbe6c0f1ee6a","modified":1603984755049},{"_id":"public/tags/è®¡ç®—æœºç½‘ç»œ/index.html","hash":"a00a628bac941b468b3aa4a82eb498bfd33ea300","modified":1603984755049},{"_id":"public/tags/æ€§èƒ½ç›‘æ§/index.html","hash":"352723cba064a7bb23b67f1ea22f2673ce3df804","modified":1603984755049},{"_id":"public/tags/å¾®ä¿¡å°ç¨‹åº/index.html","hash":"dd43847cb3bb45bb206f02afe74349b318bcd2a2","modified":1603984755049},{"_id":"public/tags/è®¡ç®—æœºå›¾å½¢å­¦/index.html","hash":"dc77ec0ea6d1566646995907b3f93fffeabc06b7","modified":1603984755049},{"_id":"public/tags/WebGL/index.html","hash":"808a301f183c192b41d84387b126cbb7dbd2b3e7","modified":1603984755049},{"_id":"public/favicon.ico","hash":"96b9a549337c2bec483c2879eeafa4d1f8748fed","modified":1603984749902},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1603984749902},{"_id":"public/images/post_cover.jpeg","hash":"93f216636c87dbbe635d4bb6b944851d92d84723","modified":1603984749902},{"_id":"public/images/footer-r.jpeg","hash":"5c7677ac85cf8a683b91e97702b7096017006b4f","modified":1603984749902},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1603984749902},{"_id":"public/images/footer-l.jpeg","hash":"f036edc5f66ffbcc34c3d855414c6ca5ef30a04b","modified":1603984749902},{"_id":"public/css/base.css","hash":"6d884ebc4f4c1a7c750e4b871ecfff6c28b47ed0","modified":1603984749902},{"_id":"public/css/main.css","hash":"48d346373c9e4c720b3853bbe0b661d75d5590db","modified":1603984749902},{"_id":"public/css/main.min.css","hash":"f92bf3eef5351215ee8bced4a40d88dab68330bf","modified":1603984749902},{"_id":"public/js/jquery.easing.min.js","hash":"af83a43279779fbc716f40ba8c5280782027540a","modified":1603984749902},{"_id":"public/js/jquery.jside.menu.js","hash":"688b8b03f8590a05e35a1fbbc59f37bc36051aa1","modified":1603984749902},{"_id":"public/css/menu/button.css","hash":"ce03713a291978281b66ce9d5738c456020a8e61","modified":1603984749902},{"_id":"public/css/menu/menu.css","hash":"70f8a5b346f4b106eebc1c5199bc4add479da3c5","modified":1603984749902},{"_id":"public/js/local.search.js","hash":"3dd788d1e64431feb8faca7a7f175d25ed31f25a","modified":1603984749902},{"_id":"public/css/page_style/page_style.css","hash":"0488c30dc3e728ec5ec89bb49fe979bd84acc964","modified":1603984749902},{"_id":"public/images/avatar.jpeg","hash":"b6aba9aa030f22221d4a357a46a6bc6ef0cce556","modified":1603984749902},{"_id":"public/images/cover.jpeg","hash":"7dbe52d0aa3c1d6d90764f9a2c19d0dc5dd479c0","modified":1603984749902}],"Category":[{"name":"CSS","_id":"ckguz3u7e0002fw9kao1q4kny"},{"name":"é˜…è¯»","_id":"ckguz3u7h0007fw9kat728nsp"},{"name":"å‰ç«¯æ¦‚å¿µ","_id":"ckguz3u7n000mfw9k4nefb8a5"},{"name":"ç®—æ³•","_id":"ckguz3u7p000tfw9kd3ukcang"},{"name":"Javascript","_id":"ckguz3u7u0019fw9k84yj9416"},{"name":"HTML","_id":"ckguz3u7x001jfw9kf8k184p3"},{"name":"æµè§ˆå™¨","_id":"ckguz3u80001vfw9k443kan23"},{"name":"react","_id":"ckguz3u88002kfw9kd4ahf71y"},{"name":"è®¡ç®—æœºç½‘ç»œ","_id":"ckguz3u8b002ufw9k69l4hswg"},{"name":"æ€§èƒ½ç›‘æ§","_id":"ckguz3u8d0033fw9k5wzjhr18"},{"name":"å¾®ä¿¡å°ç¨‹åº","_id":"ckguz3u8g003dfw9k835wd20g"},{"name":"è®¡ç®—æœºå›¾å½¢å­¦","_id":"ckguz3u8l003zfw9keg8tbrvy"},{"name":"WebGL","_id":"ckguz3u8m0046fw9k042ffki8"}],"Data":[],"Page":[],"Post":[{"title":"CSS-åŠ¨ç”»ä¸ç»˜åˆ¶","date":"2020-06-06T09:07:06.000Z","description":["CSS é€‰æ‹©å™¨"],"_content":"\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n## å†™åœ¨å‰é¢\n- CSS åŠ¨ç”»ä¸ç»˜åˆ¶\n- 3ä¸ªå°æ—¶çš„èˆè·³ä¸‹æ¥ï¼Œè¿™å‘¨ç«Ÿç„¶è¿˜ä¸ç´¯ï¼Ÿå¥½å§ï¼Œå…¶å®æ˜¯æˆ‘ä¸­é—´åˆ’æ°´äº† ğŸ™ƒ\n- ä»¥åå‘¨å…­æ—©è¯¾ï¼Œä¸€å®šè¦åœ¨8ç‚¹å‰äº«å—å®Œæ—©é¤ï¼ä»Šæ—©è·³èˆä½è¡€ç³–ï¼ŒåŒè€³ä¸€ç›´è€³é¸£\n\n<!-- more -->\n\n\n\n\n\n## åŠ¨ç”»ä¸ç»˜åˆ¶\n\n\n## Animation\n- @keyframes å®šä¹‰\n- animation: ä½¿ç”¨\n\n\t```javascript\n\t@keyframes mykf {\n\t  from {background: red;}\n\t  to {background: yellow;}\n\t}\n\t\n\tdiv {\n\t  width: 100px;\n\t  height: 100px;\n\t  animation: mykf 5s infinite;\n\t}\n\t```\n\t\n### Animation Shortcut\n- animation-name: æ—¶é—´æ›²çº¿\n- animation-duration: åŠ¨ç”»æ—¶é•¿\n- animation-timing-function: åŠ¨ç”»çš„æ—¶é—´æ›²çº¿\n\t- [cubic-bezier æ•ˆæœ](https://cubic-bezier.com/#.17,.67,.83,.67)\n\t- [wiki cubic-bezier](https://zh.wikipedia.org/wiki/%E8%B2%9D%E8%8C%B2%E6%9B%B2%E7%B7%9A)\n- animation-delay: åŠ¨ç”»å¼€å§‹å‰çš„å»¶è¿Ÿ\n- animation-iteration-count: åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°\n\t- &lt;single-animation-iteration-count&gt; = infinite | &lt;number&gt;\n- animation-direction: åŠ¨ç”»æ–¹å‘\n\t- &lt;single-animation-direction&gt; = normal | reverse | alternate | alternate-reverse\n\n\t\n\n```css\n/* @keyframes duration | timing-function | delay | \niteration-count | direction | fill-mode | play-state | name */\nanimation: 3s ease-in 1s 2 reverse both paused slidein;\n\t\n/* @keyframes name | duration | timing-function | delay */\nanimation: 3s linear 1s slidein;\n\t\n/* @keyframes name | duration */\nanimation: slidein 3s;\n```\n- [MDN CSS animation](https://developer.mozilla.org/en-US/docs/Web/CSS/animation)\n\n### è´ç‘Ÿå°”æ›²çº¿æ‹Ÿåˆ\n- [è´ç‘Ÿå°”æ›²çº¿](https://cubic-bezier.com/#.17,.67,.83,.67)\n\n\n## Transition\n### Transition Shortcut\n- transition-property: è¦å˜æ¢çš„å±æ€§\n- transition-duration: å˜æ¢çš„æ—¶é•¿\n- transition-timing-function: æ—¶é—´æ›²çº¿\n- transition-delay: å»¶è¿Ÿ\n\n```css\n/* Apply to 1 property */\n/* property name | duration */\ntransition: margin-right 4s;\n\n/* property name | duration | delay */\ntransition: margin-right 4s 1s;\n\n/* property name | duration | timing function */\ntransition: margin-right 4s ease-in-out;\n\n/* property name | duration | timing function | delay */\ntransition: margin-right 4s ease-in-out 1s;\n\n/* Apply to 2 properties */\ntransition: margin-right 4s, color 1s;\n\n/* Apply to all changed properties */\ntransition: all 0.5s ease-out;\n\n/* Global values */\ntransition: inherit;\ntransition: initial;\ntransition: unset;\n```\n- [MDN CSS transition](https://developer.mozilla.org/en-US/docs/Web/CSS/transition)\n\n\n\n## æ¸²æŸ“ä¸é¢œè‰²\n\n### é¢œè‰²\n#### CMYK ä¸ RGB\n#### HSL ä¸ HSV\n- Hue è‰²ç›¸(360åº¦) Saturaiotn é¥±å’Œåº¦ã€çº¯åº¦ Lightness æ˜åº¦\n\t- è¡¥è‰²ï¼Œå¯¹è§’è‰² --> Hue + 180\n- Hue Saturation Value\n\n### å½¢çŠ¶\n- border\n- box-shadow\n- border-radius\n\n#### data uri + svg\n- encodeUriComponent\n\n```\ndata:image/svg+xml,%3csvg%20width=%22100%25%22%20height=%22100%25%22%20version=%221.1%22%20xmlns=%22http://www.w3.org/2000/svg%22%3e%3cellipse%20cx=%22300%22%20cy=%22150%22%20rx=%22200%22%20ry=%2280%22%20style=%22fill:rgb(200,100,50);%20stroke:rgb(0,0,100);stroke-width:2%22/%3e%20%3c/svg%3e\n```\n\n\n## å°† ComputedStyle åˆ†ç±»\n- [å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/crawler.html)\n- [CSS-Property.xmind](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week09/CSS-Property.xmind)\n\n\n\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/CSS-åŠ¨ç”»ä¸ç»˜åˆ¶.md","raw":"---\ntitle: CSS-åŠ¨ç”»ä¸ç»˜åˆ¶\ndate: 2020-06-06 17:07:06\ntags: \n- CSS\ncategories:\n- CSS\ndescription:\n- CSS é€‰æ‹©å™¨\n\n\n---\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n## å†™åœ¨å‰é¢\n- CSS åŠ¨ç”»ä¸ç»˜åˆ¶\n- 3ä¸ªå°æ—¶çš„èˆè·³ä¸‹æ¥ï¼Œè¿™å‘¨ç«Ÿç„¶è¿˜ä¸ç´¯ï¼Ÿå¥½å§ï¼Œå…¶å®æ˜¯æˆ‘ä¸­é—´åˆ’æ°´äº† ğŸ™ƒ\n- ä»¥åå‘¨å…­æ—©è¯¾ï¼Œä¸€å®šè¦åœ¨8ç‚¹å‰äº«å—å®Œæ—©é¤ï¼ä»Šæ—©è·³èˆä½è¡€ç³–ï¼ŒåŒè€³ä¸€ç›´è€³é¸£\n\n<!-- more -->\n\n\n\n\n\n## åŠ¨ç”»ä¸ç»˜åˆ¶\n\n\n## Animation\n- @keyframes å®šä¹‰\n- animation: ä½¿ç”¨\n\n\t```javascript\n\t@keyframes mykf {\n\t  from {background: red;}\n\t  to {background: yellow;}\n\t}\n\t\n\tdiv {\n\t  width: 100px;\n\t  height: 100px;\n\t  animation: mykf 5s infinite;\n\t}\n\t```\n\t\n### Animation Shortcut\n- animation-name: æ—¶é—´æ›²çº¿\n- animation-duration: åŠ¨ç”»æ—¶é•¿\n- animation-timing-function: åŠ¨ç”»çš„æ—¶é—´æ›²çº¿\n\t- [cubic-bezier æ•ˆæœ](https://cubic-bezier.com/#.17,.67,.83,.67)\n\t- [wiki cubic-bezier](https://zh.wikipedia.org/wiki/%E8%B2%9D%E8%8C%B2%E6%9B%B2%E7%B7%9A)\n- animation-delay: åŠ¨ç”»å¼€å§‹å‰çš„å»¶è¿Ÿ\n- animation-iteration-count: åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°\n\t- &lt;single-animation-iteration-count&gt; = infinite | &lt;number&gt;\n- animation-direction: åŠ¨ç”»æ–¹å‘\n\t- &lt;single-animation-direction&gt; = normal | reverse | alternate | alternate-reverse\n\n\t\n\n```css\n/* @keyframes duration | timing-function | delay | \niteration-count | direction | fill-mode | play-state | name */\nanimation: 3s ease-in 1s 2 reverse both paused slidein;\n\t\n/* @keyframes name | duration | timing-function | delay */\nanimation: 3s linear 1s slidein;\n\t\n/* @keyframes name | duration */\nanimation: slidein 3s;\n```\n- [MDN CSS animation](https://developer.mozilla.org/en-US/docs/Web/CSS/animation)\n\n### è´ç‘Ÿå°”æ›²çº¿æ‹Ÿåˆ\n- [è´ç‘Ÿå°”æ›²çº¿](https://cubic-bezier.com/#.17,.67,.83,.67)\n\n\n## Transition\n### Transition Shortcut\n- transition-property: è¦å˜æ¢çš„å±æ€§\n- transition-duration: å˜æ¢çš„æ—¶é•¿\n- transition-timing-function: æ—¶é—´æ›²çº¿\n- transition-delay: å»¶è¿Ÿ\n\n```css\n/* Apply to 1 property */\n/* property name | duration */\ntransition: margin-right 4s;\n\n/* property name | duration | delay */\ntransition: margin-right 4s 1s;\n\n/* property name | duration | timing function */\ntransition: margin-right 4s ease-in-out;\n\n/* property name | duration | timing function | delay */\ntransition: margin-right 4s ease-in-out 1s;\n\n/* Apply to 2 properties */\ntransition: margin-right 4s, color 1s;\n\n/* Apply to all changed properties */\ntransition: all 0.5s ease-out;\n\n/* Global values */\ntransition: inherit;\ntransition: initial;\ntransition: unset;\n```\n- [MDN CSS transition](https://developer.mozilla.org/en-US/docs/Web/CSS/transition)\n\n\n\n## æ¸²æŸ“ä¸é¢œè‰²\n\n### é¢œè‰²\n#### CMYK ä¸ RGB\n#### HSL ä¸ HSV\n- Hue è‰²ç›¸(360åº¦) Saturaiotn é¥±å’Œåº¦ã€çº¯åº¦ Lightness æ˜åº¦\n\t- è¡¥è‰²ï¼Œå¯¹è§’è‰² --> Hue + 180\n- Hue Saturation Value\n\n### å½¢çŠ¶\n- border\n- box-shadow\n- border-radius\n\n#### data uri + svg\n- encodeUriComponent\n\n```\ndata:image/svg+xml,%3csvg%20width=%22100%25%22%20height=%22100%25%22%20version=%221.1%22%20xmlns=%22http://www.w3.org/2000/svg%22%3e%3cellipse%20cx=%22300%22%20cy=%22150%22%20rx=%22200%22%20ry=%2280%22%20style=%22fill:rgb(200,100,50);%20stroke:rgb(0,0,100);stroke-width:2%22/%3e%20%3c/svg%3e\n```\n\n\n## å°† ComputedStyle åˆ†ç±»\n- [å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/crawler.html)\n- [CSS-Property.xmind](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week09/CSS-Property.xmind)\n\n\n\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"CSS-åŠ¨ç”»ä¸ç»˜åˆ¶","published":1,"updated":"2020-10-27T15:21:11.259Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u770000fw9k06nafxd3","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>CSS åŠ¨ç”»ä¸ç»˜åˆ¶</li>\n<li>3ä¸ªå°æ—¶çš„èˆè·³ä¸‹æ¥ï¼Œè¿™å‘¨ç«Ÿç„¶è¿˜ä¸ç´¯ï¼Ÿå¥½å§ï¼Œå…¶å®æ˜¯æˆ‘ä¸­é—´åˆ’æ°´äº† ğŸ™ƒ</li>\n<li>ä»¥åå‘¨å…­æ—©è¯¾ï¼Œä¸€å®šè¦åœ¨8ç‚¹å‰äº«å—å®Œæ—©é¤ï¼ä»Šæ—©è·³èˆä½è¡€ç³–ï¼ŒåŒè€³ä¸€ç›´è€³é¸£</li>\n</ul>\n<a id=\"more\"></a>\n\n\n\n\n\n<h2 id=\"åŠ¨ç”»ä¸ç»˜åˆ¶\"><a href=\"#åŠ¨ç”»ä¸ç»˜åˆ¶\" class=\"headerlink\" title=\"åŠ¨ç”»ä¸ç»˜åˆ¶\"></a>åŠ¨ç”»ä¸ç»˜åˆ¶</h2><h2 id=\"Animation\"><a href=\"#Animation\" class=\"headerlink\" title=\"Animation\"></a>Animation</h2><ul>\n<li><p>@keyframes å®šä¹‰</p>\n</li>\n<li><p>animation: ä½¿ç”¨</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@keyframes mykf &#123;</span><br><span class=\"line\">  <span class=\"keyword\">from</span> &#123;<span class=\"attr\">background</span>: red;&#125;</span><br><span class=\"line\">  to &#123;<span class=\"attr\">background</span>: yellow;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">div &#123;</span><br><span class=\"line\">  width: <span class=\"number\">100</span>px;</span><br><span class=\"line\">  height: <span class=\"number\">100</span>px;</span><br><span class=\"line\">  animation: mykf <span class=\"number\">5</span>s infinite;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"Animation-Shortcut\"><a href=\"#Animation-Shortcut\" class=\"headerlink\" title=\"Animation Shortcut\"></a>Animation Shortcut</h3><ul>\n<li>animation-name: æ—¶é—´æ›²çº¿</li>\n<li>animation-duration: åŠ¨ç”»æ—¶é•¿</li>\n<li>animation-timing-function: åŠ¨ç”»çš„æ—¶é—´æ›²çº¿<ul>\n<li><a href=\"https://cubic-bezier.com/#.17,.67,.83,.67\" target=\"_blank\" rel=\"noopener\">cubic-bezier æ•ˆæœ</a></li>\n<li><a href=\"https://zh.wikipedia.org/wiki/%E8%B2%9D%E8%8C%B2%E6%9B%B2%E7%B7%9A\" target=\"_blank\" rel=\"noopener\">wiki cubic-bezier</a></li>\n</ul>\n</li>\n<li>animation-delay: åŠ¨ç”»å¼€å§‹å‰çš„å»¶è¿Ÿ</li>\n<li>animation-iteration-count: åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°<ul>\n<li>&lt;single-animation-iteration-count&gt; = infinite | &lt;number&gt;</li>\n</ul>\n</li>\n<li>animation-direction: åŠ¨ç”»æ–¹å‘<ul>\n<li>&lt;single-animation-direction&gt; = normal | reverse | alternate | alternate-reverse</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* @keyframes duration | timing-function | delay | </span></span><br><span class=\"line\"><span class=\"comment\">iteration-count | direction | fill-mode | play-state | name */</span></span><br><span class=\"line\"><span class=\"selector-tag\">animation</span>: 3<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">ease-in</span> 1<span class=\"selector-tag\">s</span> 2 <span class=\"selector-tag\">reverse</span> <span class=\"selector-tag\">both</span> <span class=\"selector-tag\">paused</span> <span class=\"selector-tag\">slidein</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"comment\">/* @keyframes name | duration | timing-function | delay */</span></span><br><span class=\"line\"><span class=\"selector-tag\">animation</span>: 3<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">linear</span> 1<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">slidein</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"comment\">/* @keyframes name | duration */</span></span><br><span class=\"line\"><span class=\"selector-tag\">animation</span>: <span class=\"selector-tag\">slidein</span> 3<span class=\"selector-tag\">s</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/animation\" target=\"_blank\" rel=\"noopener\">MDN CSS animation</a></li>\n</ul>\n<h3 id=\"è´ç‘Ÿå°”æ›²çº¿æ‹Ÿåˆ\"><a href=\"#è´ç‘Ÿå°”æ›²çº¿æ‹Ÿåˆ\" class=\"headerlink\" title=\"è´ç‘Ÿå°”æ›²çº¿æ‹Ÿåˆ\"></a>è´ç‘Ÿå°”æ›²çº¿æ‹Ÿåˆ</h3><ul>\n<li><a href=\"https://cubic-bezier.com/#.17,.67,.83,.67\" target=\"_blank\" rel=\"noopener\">è´ç‘Ÿå°”æ›²çº¿</a></li>\n</ul>\n<h2 id=\"Transition\"><a href=\"#Transition\" class=\"headerlink\" title=\"Transition\"></a>Transition</h2><h3 id=\"Transition-Shortcut\"><a href=\"#Transition-Shortcut\" class=\"headerlink\" title=\"Transition Shortcut\"></a>Transition Shortcut</h3><ul>\n<li>transition-property: è¦å˜æ¢çš„å±æ€§</li>\n<li>transition-duration: å˜æ¢çš„æ—¶é•¿</li>\n<li>transition-timing-function: æ—¶é—´æ›²çº¿</li>\n<li>transition-delay: å»¶è¿Ÿ</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Apply to 1 property */</span></span><br><span class=\"line\"><span class=\"comment\">/* property name | duration */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">margin-right</span> 4<span class=\"selector-tag\">s</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* property name | duration | delay */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">margin-right</span> 4<span class=\"selector-tag\">s</span> 1<span class=\"selector-tag\">s</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* property name | duration | timing function */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">margin-right</span> 4<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">ease-in-out</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* property name | duration | timing function | delay */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">margin-right</span> 4<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">ease-in-out</span> 1<span class=\"selector-tag\">s</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Apply to 2 properties */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">margin-right</span> 4<span class=\"selector-tag\">s</span>, <span class=\"selector-tag\">color</span> 1<span class=\"selector-tag\">s</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Apply to all changed properties */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">all</span> 0<span class=\"selector-class\">.5s</span> <span class=\"selector-tag\">ease-out</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Global values */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">inherit</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">initial</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">unset</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/transition\" target=\"_blank\" rel=\"noopener\">MDN CSS transition</a></li>\n</ul>\n<h2 id=\"æ¸²æŸ“ä¸é¢œè‰²\"><a href=\"#æ¸²æŸ“ä¸é¢œè‰²\" class=\"headerlink\" title=\"æ¸²æŸ“ä¸é¢œè‰²\"></a>æ¸²æŸ“ä¸é¢œè‰²</h2><h3 id=\"é¢œè‰²\"><a href=\"#é¢œè‰²\" class=\"headerlink\" title=\"é¢œè‰²\"></a>é¢œè‰²</h3><h4 id=\"CMYK-ä¸-RGB\"><a href=\"#CMYK-ä¸-RGB\" class=\"headerlink\" title=\"CMYK ä¸ RGB\"></a>CMYK ä¸ RGB</h4><h4 id=\"HSL-ä¸-HSV\"><a href=\"#HSL-ä¸-HSV\" class=\"headerlink\" title=\"HSL ä¸ HSV\"></a>HSL ä¸ HSV</h4><ul>\n<li>Hue è‰²ç›¸(360åº¦) Saturaiotn é¥±å’Œåº¦ã€çº¯åº¦ Lightness æ˜åº¦<ul>\n<li>è¡¥è‰²ï¼Œå¯¹è§’è‰² â€“&gt; Hue + 180</li>\n</ul>\n</li>\n<li>Hue Saturation Value</li>\n</ul>\n<h3 id=\"å½¢çŠ¶\"><a href=\"#å½¢çŠ¶\" class=\"headerlink\" title=\"å½¢çŠ¶\"></a>å½¢çŠ¶</h3><ul>\n<li>border</li>\n<li>box-shadow</li>\n<li>border-radius</li>\n</ul>\n<h4 id=\"data-uri-svg\"><a href=\"#data-uri-svg\" class=\"headerlink\" title=\"data uri + svg\"></a>data uri + svg</h4><ul>\n<li>encodeUriComponent</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data:image&#x2F;svg+xml,%3csvg%20width&#x3D;%22100%25%22%20height&#x3D;%22100%25%22%20version&#x3D;%221.1%22%20xmlns&#x3D;%22http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg%22%3e%3cellipse%20cx&#x3D;%22300%22%20cy&#x3D;%22150%22%20rx&#x3D;%22200%22%20ry&#x3D;%2280%22%20style&#x3D;%22fill:rgb(200,100,50);%20stroke:rgb(0,0,100);stroke-width:2%22&#x2F;%3e%20%3c&#x2F;svg%3e</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"å°†-ComputedStyle-åˆ†ç±»\"><a href=\"#å°†-ComputedStyle-åˆ†ç±»\" class=\"headerlink\" title=\"å°† ComputedStyle åˆ†ç±»\"></a>å°† ComputedStyle åˆ†ç±»</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/crawler.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week09/CSS-Property.xmind\" target=\"_blank\" rel=\"noopener\">CSS-Property.xmind</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>CSS åŠ¨ç”»ä¸ç»˜åˆ¶</li>\n<li>3ä¸ªå°æ—¶çš„èˆè·³ä¸‹æ¥ï¼Œè¿™å‘¨ç«Ÿç„¶è¿˜ä¸ç´¯ï¼Ÿå¥½å§ï¼Œå…¶å®æ˜¯æˆ‘ä¸­é—´åˆ’æ°´äº† ğŸ™ƒ</li>\n<li>ä»¥åå‘¨å…­æ—©è¯¾ï¼Œä¸€å®šè¦åœ¨8ç‚¹å‰äº«å—å®Œæ—©é¤ï¼ä»Šæ—©è·³èˆä½è¡€ç³–ï¼ŒåŒè€³ä¸€ç›´è€³é¸£</li>\n</ul>","more":"<h2 id=\"åŠ¨ç”»ä¸ç»˜åˆ¶\"><a href=\"#åŠ¨ç”»ä¸ç»˜åˆ¶\" class=\"headerlink\" title=\"åŠ¨ç”»ä¸ç»˜åˆ¶\"></a>åŠ¨ç”»ä¸ç»˜åˆ¶</h2><h2 id=\"Animation\"><a href=\"#Animation\" class=\"headerlink\" title=\"Animation\"></a>Animation</h2><ul>\n<li><p>@keyframes å®šä¹‰</p>\n</li>\n<li><p>animation: ä½¿ç”¨</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@keyframes mykf &#123;</span><br><span class=\"line\">  <span class=\"keyword\">from</span> &#123;<span class=\"attr\">background</span>: red;&#125;</span><br><span class=\"line\">  to &#123;<span class=\"attr\">background</span>: yellow;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">div &#123;</span><br><span class=\"line\">  width: <span class=\"number\">100</span>px;</span><br><span class=\"line\">  height: <span class=\"number\">100</span>px;</span><br><span class=\"line\">  animation: mykf <span class=\"number\">5</span>s infinite;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"Animation-Shortcut\"><a href=\"#Animation-Shortcut\" class=\"headerlink\" title=\"Animation Shortcut\"></a>Animation Shortcut</h3><ul>\n<li>animation-name: æ—¶é—´æ›²çº¿</li>\n<li>animation-duration: åŠ¨ç”»æ—¶é•¿</li>\n<li>animation-timing-function: åŠ¨ç”»çš„æ—¶é—´æ›²çº¿<ul>\n<li><a href=\"https://cubic-bezier.com/#.17,.67,.83,.67\" target=\"_blank\" rel=\"noopener\">cubic-bezier æ•ˆæœ</a></li>\n<li><a href=\"https://zh.wikipedia.org/wiki/%E8%B2%9D%E8%8C%B2%E6%9B%B2%E7%B7%9A\" target=\"_blank\" rel=\"noopener\">wiki cubic-bezier</a></li>\n</ul>\n</li>\n<li>animation-delay: åŠ¨ç”»å¼€å§‹å‰çš„å»¶è¿Ÿ</li>\n<li>animation-iteration-count: åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°<ul>\n<li>&lt;single-animation-iteration-count&gt; = infinite | &lt;number&gt;</li>\n</ul>\n</li>\n<li>animation-direction: åŠ¨ç”»æ–¹å‘<ul>\n<li>&lt;single-animation-direction&gt; = normal | reverse | alternate | alternate-reverse</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* @keyframes duration | timing-function | delay | </span></span><br><span class=\"line\"><span class=\"comment\">iteration-count | direction | fill-mode | play-state | name */</span></span><br><span class=\"line\"><span class=\"selector-tag\">animation</span>: 3<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">ease-in</span> 1<span class=\"selector-tag\">s</span> 2 <span class=\"selector-tag\">reverse</span> <span class=\"selector-tag\">both</span> <span class=\"selector-tag\">paused</span> <span class=\"selector-tag\">slidein</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"comment\">/* @keyframes name | duration | timing-function | delay */</span></span><br><span class=\"line\"><span class=\"selector-tag\">animation</span>: 3<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">linear</span> 1<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">slidein</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"comment\">/* @keyframes name | duration */</span></span><br><span class=\"line\"><span class=\"selector-tag\">animation</span>: <span class=\"selector-tag\">slidein</span> 3<span class=\"selector-tag\">s</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/animation\" target=\"_blank\" rel=\"noopener\">MDN CSS animation</a></li>\n</ul>\n<h3 id=\"è´ç‘Ÿå°”æ›²çº¿æ‹Ÿåˆ\"><a href=\"#è´ç‘Ÿå°”æ›²çº¿æ‹Ÿåˆ\" class=\"headerlink\" title=\"è´ç‘Ÿå°”æ›²çº¿æ‹Ÿåˆ\"></a>è´ç‘Ÿå°”æ›²çº¿æ‹Ÿåˆ</h3><ul>\n<li><a href=\"https://cubic-bezier.com/#.17,.67,.83,.67\" target=\"_blank\" rel=\"noopener\">è´ç‘Ÿå°”æ›²çº¿</a></li>\n</ul>\n<h2 id=\"Transition\"><a href=\"#Transition\" class=\"headerlink\" title=\"Transition\"></a>Transition</h2><h3 id=\"Transition-Shortcut\"><a href=\"#Transition-Shortcut\" class=\"headerlink\" title=\"Transition Shortcut\"></a>Transition Shortcut</h3><ul>\n<li>transition-property: è¦å˜æ¢çš„å±æ€§</li>\n<li>transition-duration: å˜æ¢çš„æ—¶é•¿</li>\n<li>transition-timing-function: æ—¶é—´æ›²çº¿</li>\n<li>transition-delay: å»¶è¿Ÿ</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Apply to 1 property */</span></span><br><span class=\"line\"><span class=\"comment\">/* property name | duration */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">margin-right</span> 4<span class=\"selector-tag\">s</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* property name | duration | delay */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">margin-right</span> 4<span class=\"selector-tag\">s</span> 1<span class=\"selector-tag\">s</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* property name | duration | timing function */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">margin-right</span> 4<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">ease-in-out</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* property name | duration | timing function | delay */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">margin-right</span> 4<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">ease-in-out</span> 1<span class=\"selector-tag\">s</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Apply to 2 properties */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">margin-right</span> 4<span class=\"selector-tag\">s</span>, <span class=\"selector-tag\">color</span> 1<span class=\"selector-tag\">s</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Apply to all changed properties */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">all</span> 0<span class=\"selector-class\">.5s</span> <span class=\"selector-tag\">ease-out</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Global values */</span></span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">inherit</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">initial</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">unset</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/transition\" target=\"_blank\" rel=\"noopener\">MDN CSS transition</a></li>\n</ul>\n<h2 id=\"æ¸²æŸ“ä¸é¢œè‰²\"><a href=\"#æ¸²æŸ“ä¸é¢œè‰²\" class=\"headerlink\" title=\"æ¸²æŸ“ä¸é¢œè‰²\"></a>æ¸²æŸ“ä¸é¢œè‰²</h2><h3 id=\"é¢œè‰²\"><a href=\"#é¢œè‰²\" class=\"headerlink\" title=\"é¢œè‰²\"></a>é¢œè‰²</h3><h4 id=\"CMYK-ä¸-RGB\"><a href=\"#CMYK-ä¸-RGB\" class=\"headerlink\" title=\"CMYK ä¸ RGB\"></a>CMYK ä¸ RGB</h4><h4 id=\"HSL-ä¸-HSV\"><a href=\"#HSL-ä¸-HSV\" class=\"headerlink\" title=\"HSL ä¸ HSV\"></a>HSL ä¸ HSV</h4><ul>\n<li>Hue è‰²ç›¸(360åº¦) Saturaiotn é¥±å’Œåº¦ã€çº¯åº¦ Lightness æ˜åº¦<ul>\n<li>è¡¥è‰²ï¼Œå¯¹è§’è‰² â€“&gt; Hue + 180</li>\n</ul>\n</li>\n<li>Hue Saturation Value</li>\n</ul>\n<h3 id=\"å½¢çŠ¶\"><a href=\"#å½¢çŠ¶\" class=\"headerlink\" title=\"å½¢çŠ¶\"></a>å½¢çŠ¶</h3><ul>\n<li>border</li>\n<li>box-shadow</li>\n<li>border-radius</li>\n</ul>\n<h4 id=\"data-uri-svg\"><a href=\"#data-uri-svg\" class=\"headerlink\" title=\"data uri + svg\"></a>data uri + svg</h4><ul>\n<li>encodeUriComponent</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data:image&#x2F;svg+xml,%3csvg%20width&#x3D;%22100%25%22%20height&#x3D;%22100%25%22%20version&#x3D;%221.1%22%20xmlns&#x3D;%22http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg%22%3e%3cellipse%20cx&#x3D;%22300%22%20cy&#x3D;%22150%22%20rx&#x3D;%22200%22%20ry&#x3D;%2280%22%20style&#x3D;%22fill:rgb(200,100,50);%20stroke:rgb(0,0,100);stroke-width:2%22&#x2F;%3e%20%3c&#x2F;svg%3e</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"å°†-ComputedStyle-åˆ†ç±»\"><a href=\"#å°†-ComputedStyle-åˆ†ç±»\" class=\"headerlink\" title=\"å°† ComputedStyle åˆ†ç±»\"></a>å°† ComputedStyle åˆ†ç±»</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/crawler.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week09/CSS-Property.xmind\" target=\"_blank\" rel=\"noopener\">CSS-Property.xmind</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"2020å¹´ç¬¬23å‘¨æˆ‘åœ¨è¯»ä»€ä¹ˆ","date":"2020-06-02T01:41:22.000Z","description":["2020å¹´ç¬¬23å‘¨æˆ‘åœ¨è¯»ä»€ä¹ˆ"],"_content":"\n\n## å†™åœ¨å‰é¢\n- è¿™æ˜¯ä¸€ä¸ªæ–°çš„åˆ†ç±»ï¼Œé˜…è¯»å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä»¶ç§å¯†çš„äº‹\n- ä½†å‘¨ä¸€è¯»å®Œäº†ã€Šå¥‘è¯ƒå¤«çš„ä¸€ç”Ÿã€‹æœ‰ç‚¹ç‚¹é›¶ç¢çš„æƒ…æ„Ÿ\n\n\n\n## å†™åœ¨åé¢\n","source":"_posts/2020å¹´ç¬¬23å‘¨æˆ‘åœ¨è¯»ä»€ä¹ˆ.md","raw":"---\ntitle: 2020å¹´ç¬¬23å‘¨æˆ‘åœ¨è¯»ä»€ä¹ˆ\ndate: 2020-06-02 09:41:22\ntags:\n- é˜…è¯»\ncategories:\n- é˜…è¯»\ndescription:\n- 2020å¹´ç¬¬23å‘¨æˆ‘åœ¨è¯»ä»€ä¹ˆ\n---\n\n\n## å†™åœ¨å‰é¢\n- è¿™æ˜¯ä¸€ä¸ªæ–°çš„åˆ†ç±»ï¼Œé˜…è¯»å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä»¶ç§å¯†çš„äº‹\n- ä½†å‘¨ä¸€è¯»å®Œäº†ã€Šå¥‘è¯ƒå¤«çš„ä¸€ç”Ÿã€‹æœ‰ç‚¹ç‚¹é›¶ç¢çš„æƒ…æ„Ÿ\n\n\n\n## å†™åœ¨åé¢\n","slug":"2020å¹´ç¬¬23å‘¨æˆ‘åœ¨è¯»ä»€ä¹ˆ","published":1,"updated":"2020-10-27T15:21:11.259Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7c0001fw9kgmglhsy6","content":"<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>è¿™æ˜¯ä¸€ä¸ªæ–°çš„åˆ†ç±»ï¼Œé˜…è¯»å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä»¶ç§å¯†çš„äº‹</li>\n<li>ä½†å‘¨ä¸€è¯»å®Œäº†ã€Šå¥‘è¯ƒå¤«çš„ä¸€ç”Ÿã€‹æœ‰ç‚¹ç‚¹é›¶ç¢çš„æƒ…æ„Ÿ</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>è¿™æ˜¯ä¸€ä¸ªæ–°çš„åˆ†ç±»ï¼Œé˜…è¯»å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä»¶ç§å¯†çš„äº‹</li>\n<li>ä½†å‘¨ä¸€è¯»å®Œäº†ã€Šå¥‘è¯ƒå¤«çš„ä¸€ç”Ÿã€‹æœ‰ç‚¹ç‚¹é›¶ç¢çš„æƒ…æ„Ÿ</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2>"},{"title":"CSS-æ’ç‰ˆ","date":"2020-05-30T10:45:04.000Z","description":["CSS æ’ç‰ˆ"],"_content":"\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- CSS æ’ç‰ˆç›¸å…³çŸ¥è¯†\n- CSS å±æ€§\n\t- æ’ç‰ˆ\n\t- æ¸²æŸ“\n\t- äº¤äº’\n\n<!-- more -->\n\n## ç›’ï¼ˆBoxï¼‰\n- æºä»£ç  - æ ‡ç­¾ - tag\n- è¯­ä¹‰ - å…ƒç´  - element\n- è¡¨ç° - ç›’ - box\n- åŸºæœ¬å…ƒç´  ç›’ + æ–‡å­—\n- æ’ç‰ˆå’Œæ¸²æŸ“çš„åŸºæœ¬å•ä½æ˜¯ç›’\n- CSS åœ¨æ’ç‰ˆæ—¶å¯èƒ½äº§ç”Ÿå¤šä¸ªç›’\n\n## ç›’æ¨¡å‹\n- ã€æœªå®Œã€‘box-sizing: ä¸ºä»€ä¹ˆæ²¡æœ‰ margin-box\n- ![ç›’æ¨¡å‹](http://p0.meituan.net/myvideodistribute/1ed695c617e6c1ac8ba2b6650d5bb2c5220253.png)\n\n## æ­£å¸¸æµ\n\n\n### æ­£å¸¸æµæ’ç‰ˆ\n\n\n### æ­£å¸¸æµçš„è¡Œæ¨¡å‹\n\n```html\n<div style=\"font-size:50px;line-height:100px;background-color:pink;\">\n\tHello\n    <div style=\"line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\">world!</div>\n</div>\n```\n- è¿è¡Œæˆªå›¾\n\t- ![è¿è¡Œæˆªå›¾](http://p0.meituan.net/myvideodistribute/2e8597eb317b1096396a1b7ebfa335bb188008.png)\n- å‘ç°ï¼Œå³ä½¿è¡Œé«˜ä¸ä¸€è‡´ï¼Œ Hello ä¸ worldï¼ ä¹ŸåŸºäº baseline å¯¹é½\n\n\n```html\n<div style=\"font-size:50px;line-height:100px;background-color:pink;\">\n\tHello\n    <div style=\"line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"></div>\n</div>\n```\n- è¿è¡Œæˆªå›¾\n\t- ![è¿è¡Œæˆªå›¾](http://p0.meituan.net/myvideodistribute/cdac1ebe861651fc773f462496bcaa58175250.png)\n- å‘ç°ï¼Œå½“æ²¡æœ‰å†…å®¹æ—¶ï¼Œä½¿ç”¨ç›’å­ bottom å¯¹é½ æ–‡å­— baseline\n- æ‰€ä»¥ä¸€èˆ¬è¦ç»™ç›’å­è®¾ç½® vertical-align: bottom / top\n\n```html\n<div style=\"font-size:50px;line-height:100px;background-color:pink;\">\n  <!-- <div style=\"vertical-align:baseline;overflow:visible;display: inline-block;width:1px;;height:1px;background:red;\">\n    <div style=\"width:1000px;;height:1px;background:red;\"></div>\n  </div> -->\n\tHello\n  <div style=\"vertical-align:bottom;line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"></div>\n  <div style=\"vertical-align:top;line-height:70px;width:100px;height:50px;background-color:aqua;display:inline-block\"></div>\n  <div style=\"vertical-align:bottom;line-height:70px;width:100px;height:200px;background-color:plum;display:inline-block\"></div>\n</div>\n```\n- è¿è¡Œæˆªå›¾\n\t- ![è¿è¡Œæˆªå›¾](http://p0.meituan.net/myvideodistribute/368d5d1389c38ac68370ed80b6f22cf4231244.png)\n- å¯ä»¥å‘ç° vertical-aign ä¸ line-height é«˜åº¦è®¾å®šæ— å…³ï¼Œä¸æœ€ç»ˆè¢«æ’‘å¼€çš„ç›’å­é«˜åº¦æœ‰å…³\n- æ²¡æœ‰è®¾å®š vertical-align å¦‚æœè¶…è¿‡ line-height å§‹ç»ˆä¸æœ€é«˜å…ƒç´ çš„å¯¹é½æ–¹å¼ä¿æŒä¸€è‡´\n\n\n```html\n<div style=\"font-size:50px;line-height:100px;background-color:pink;\">\n  <div style=\"vertical-align:text-bottom;overflow:visible;display:inline-block;width:1px;height:1px;background:red;\">\n    <div style=\"width:1000px;;height:1px;background:red;\"></div>\n  </div>\n  <div style=\"vertical-align:text-top;overflow:visible;display:inline-block;width:1px;height:1px;background:red;\">\n    <div style=\"width:1000px;;height:1px;background:red;\"></div>\n  </div>\n\tHello\n  <div style=\"vertical-align:text-top;line-height:70px;width:100px;height:50px;background-color:aqua;display:inline-block\"></div>\n  <div style=\"vertical-align:text-top;line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"></div>\n  <div style=\"vertical-align:text-bottom;line-height:70px;width:100px;height:200px;background-color:plum;display:inline-block\"></div>\n</div>\n```\n- è¿è¡Œæˆªå›¾\n\t- ![è¿è¡Œæˆªå›¾](http://p0.meituan.net/myvideodistribute/9b109f5fd664383e3df90e99684c3e44251251.png)\n- å½“æˆ‘ä»¬æŠŠ vertical-align è®¾ç½®æˆ text-top / text-bottom æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸Šè¾¹ç¼˜æ˜¯ç”± text-top å…ƒç´ æ’‘å¼€ï¼Œä¸‹è¾¹ç¼˜æ˜¯ç”± text-bottom å…ƒç´ æ’‘å¼€çš„\n- æ­£å¸¸æµäº¤å‰è½´çš„ crossBase = ä¸Šè¾¹ç¼˜ + ä¸‹è¾¹ç¼˜ - texté«˜åº¦\n- vertical-align: baselineï¼Œæ˜¯æ‹¿è‡ªå·±çš„ baseline å»å¯¹å…¶è¡Œçš„ baseline \n- vertical-align: topï¼Œmiddleï¼Œbottomï¼Œæ˜¯æ‹¿è‡ªå·±çš„ â€é¡¶éƒ¨â€œ â€œä¸­çº¿â€ â€åº•éƒ¨â€œ å»å¯¹å…¶è¡Œçš„ â€é¡¶éƒ¨â€œ â€œä¸­çº¿â€ â€åº•éƒ¨â€œ \n- vertical-align: text-topï¼Œtext-bottomï¼Œæ˜¯æ‹¿è‡ªå·±çš„ â€é¡¶éƒ¨â€œ â€åº•éƒ¨â€œ å»å¯¹é½è¡Œçš„ text-top å’Œ text-bottom \n- ç»“è®ºï¼š**æ­£å¸¸æµçš„è¡Œæ¨¡å‹æ¨è vertical-align: top/bottom/middle**\n![vertical-alignç›¸å…³æ¦‚å¿µ](https://static001.geekbang.org/resource/image/aa/e3/aa6611b00f71f606493f165294410ee3.png)\n\n\n\n### æ­£å¸¸æµçš„ä¸‰å¤§éš¾é¢˜\n- overflow:visible ä¸ BFC\n- margin collapse ï¼ˆä¸€ä¸ªå…ƒç´ è§„å®šäº†è‡ªèº«å‘¨å›´è‡³å°‘éœ€è¦çš„ç©ºé—´ï¼‰\n\t- [W3 BFC](https://www.w3.org/TR/CSS2/visuren.html#block-formatting)\n\t- ![BFC conception](http://p0.meituan.net/myvideodistribute/fb01ede731f8f6ceb2f700f2b73cf681228107.png)\n\t- ![BFC margin collapse](http://p0.meituan.net/myvideodistribute/9e455229b4b2a2214199f9754a4b022c290880.png)\n\t\t- æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ BFC ä¸­ å‘ç”Ÿäº† margin collapse\n\t- ![new BFC margin collapse](http://p0.meituan.net/myvideodistribute/77ea7124c4f4e610b397483990fd009c222906.png)\n\t\t- åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°† 4ã€5 ç”¨ä¸€ä¸ª div æ¡†èµ·æ¥ï¼Œè®¾ç½® overflow other than visible åœ¨æ–°çš„ div é‡Œå½¢æˆä¸€ä¸ªæ–°çš„ BFC\n\t\t- BFC ä¸ BFC ä¹‹é—´ä¸å‘ç”Ÿ margin collapse\n\t- ![BFC V3](http://p1.meituan.net/myvideodistribute/b85b5b56118aaa06c6c1eb1d67d1d565238437.png)\n\t\t- æˆ‘ä»¬åœ¨ div é‡Œæ–°å»ºçš„ BFC ,é‡Œé¢å‘ç”Ÿ margin collapseï¼Œmargin-top: 20px;\n\t\t- div æ‰€å¤„å¤–é¢åŒä¸€çº§ BFC ï¼Œä¹Ÿå‘ç”Ÿ margin collapseï¼Œ å˜æˆ 50px;\n\t- ![BFC V4](http://p0.meituan.net/myvideodistribute/a7eb565313d603a0440434d2c3aaed71220282.png)\n\t\t- å°† overflow: visible åï¼Œæ•´ä¸ª div å°±åƒä¸å­˜åœ¨ä¸€æ ·ï¼Œæ²¡æœ‰å½±å“ï¼Œäº§ç”Ÿ margin collaps\n\t- ![BFC V5](http://p1.meituan.net/myvideodistribute/ce562c00cac00a70bfa7ea23851785d2234933.png)\n\t\t- ä½†æˆ‘ä»¬å¢åŠ  margin-top: 50px åï¼Œå¥‡æ€ªçš„äº‹æƒ…å‘ç”Ÿäº†\n\t- **overflow: visible æ˜¯ç‰¹ä¾‹ï¼Œé‡Œé¢æ˜¯ block, å¤–é¢ä¹Ÿæ˜¯ block, ä¼šåˆå¹¶æˆä¸€ä¸ª block**\n\t- **Block-level boxes that are also block containers are called block boxes.**\n\t\t- flex inline-flex\n\t\t- table inline-table\n\t\t- grid inline-grid\n\t\t- block inlie-block\n\t\t- **block containers: block inline-block**\n\t\t\t- è¡¨ç¤ºå¯ä»¥å®¹çº³bfc\n\t\t- **Block-level boxes: flex table grid block**\n\t\t\t- è¡¨ç¤ºå¯ä»¥è¢«æ”¾å…¥bfc\n\t\t- **Block boxes**\n\t\t\t- block-box = block-level + block-container\n\t\t\t- block-box å¦‚æœ overflow æ˜¯ visibleï¼Œ é‚£ä¹ˆå°±è·Ÿçˆ¶bfcåˆå¹¶\n\t\t- åªè¦åŒ…å«æ­£å¸¸æµï¼Œéƒ½ä¼šäº§ç”Ÿ BFC, å‰©ä¸‹çš„éƒ½æ˜¯ç”±ä¸€äº›å¥‡æ€ªçš„ display, æœ€å­ä¸€çº§å…ƒç´ ä¹Ÿä¼šäº§ç”Ÿ BFC ï¼Œlike flex-item table-cell\n\n- float ä¸ clear\n\n## Flex\n\n### Flex æ’ç‰ˆ\n- æ”¶é›†ç›’è¿›è¡Œ\n- è®¡ç®—ç›’åœ¨ä¸»è½´æ–¹å‘çš„æ’å¸ƒ\n- è®¡ç®—ç›’åœ¨äº¤å‰è½´æ–¹å‘çš„æ’å¸ƒ\n\n\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/CSS-æ’ç‰ˆ.md","raw":"---\ntitle: CSS-æ’ç‰ˆ\ndate: 2020-05-30 18:45:04\ntags: \n- CSS\ncategories:\n- CSS\ndescription:\n- CSS æ’ç‰ˆ\n\n\n---\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- CSS æ’ç‰ˆç›¸å…³çŸ¥è¯†\n- CSS å±æ€§\n\t- æ’ç‰ˆ\n\t- æ¸²æŸ“\n\t- äº¤äº’\n\n<!-- more -->\n\n## ç›’ï¼ˆBoxï¼‰\n- æºä»£ç  - æ ‡ç­¾ - tag\n- è¯­ä¹‰ - å…ƒç´  - element\n- è¡¨ç° - ç›’ - box\n- åŸºæœ¬å…ƒç´  ç›’ + æ–‡å­—\n- æ’ç‰ˆå’Œæ¸²æŸ“çš„åŸºæœ¬å•ä½æ˜¯ç›’\n- CSS åœ¨æ’ç‰ˆæ—¶å¯èƒ½äº§ç”Ÿå¤šä¸ªç›’\n\n## ç›’æ¨¡å‹\n- ã€æœªå®Œã€‘box-sizing: ä¸ºä»€ä¹ˆæ²¡æœ‰ margin-box\n- ![ç›’æ¨¡å‹](http://p0.meituan.net/myvideodistribute/1ed695c617e6c1ac8ba2b6650d5bb2c5220253.png)\n\n## æ­£å¸¸æµ\n\n\n### æ­£å¸¸æµæ’ç‰ˆ\n\n\n### æ­£å¸¸æµçš„è¡Œæ¨¡å‹\n\n```html\n<div style=\"font-size:50px;line-height:100px;background-color:pink;\">\n\tHello\n    <div style=\"line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\">world!</div>\n</div>\n```\n- è¿è¡Œæˆªå›¾\n\t- ![è¿è¡Œæˆªå›¾](http://p0.meituan.net/myvideodistribute/2e8597eb317b1096396a1b7ebfa335bb188008.png)\n- å‘ç°ï¼Œå³ä½¿è¡Œé«˜ä¸ä¸€è‡´ï¼Œ Hello ä¸ worldï¼ ä¹ŸåŸºäº baseline å¯¹é½\n\n\n```html\n<div style=\"font-size:50px;line-height:100px;background-color:pink;\">\n\tHello\n    <div style=\"line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"></div>\n</div>\n```\n- è¿è¡Œæˆªå›¾\n\t- ![è¿è¡Œæˆªå›¾](http://p0.meituan.net/myvideodistribute/cdac1ebe861651fc773f462496bcaa58175250.png)\n- å‘ç°ï¼Œå½“æ²¡æœ‰å†…å®¹æ—¶ï¼Œä½¿ç”¨ç›’å­ bottom å¯¹é½ æ–‡å­— baseline\n- æ‰€ä»¥ä¸€èˆ¬è¦ç»™ç›’å­è®¾ç½® vertical-align: bottom / top\n\n```html\n<div style=\"font-size:50px;line-height:100px;background-color:pink;\">\n  <!-- <div style=\"vertical-align:baseline;overflow:visible;display: inline-block;width:1px;;height:1px;background:red;\">\n    <div style=\"width:1000px;;height:1px;background:red;\"></div>\n  </div> -->\n\tHello\n  <div style=\"vertical-align:bottom;line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"></div>\n  <div style=\"vertical-align:top;line-height:70px;width:100px;height:50px;background-color:aqua;display:inline-block\"></div>\n  <div style=\"vertical-align:bottom;line-height:70px;width:100px;height:200px;background-color:plum;display:inline-block\"></div>\n</div>\n```\n- è¿è¡Œæˆªå›¾\n\t- ![è¿è¡Œæˆªå›¾](http://p0.meituan.net/myvideodistribute/368d5d1389c38ac68370ed80b6f22cf4231244.png)\n- å¯ä»¥å‘ç° vertical-aign ä¸ line-height é«˜åº¦è®¾å®šæ— å…³ï¼Œä¸æœ€ç»ˆè¢«æ’‘å¼€çš„ç›’å­é«˜åº¦æœ‰å…³\n- æ²¡æœ‰è®¾å®š vertical-align å¦‚æœè¶…è¿‡ line-height å§‹ç»ˆä¸æœ€é«˜å…ƒç´ çš„å¯¹é½æ–¹å¼ä¿æŒä¸€è‡´\n\n\n```html\n<div style=\"font-size:50px;line-height:100px;background-color:pink;\">\n  <div style=\"vertical-align:text-bottom;overflow:visible;display:inline-block;width:1px;height:1px;background:red;\">\n    <div style=\"width:1000px;;height:1px;background:red;\"></div>\n  </div>\n  <div style=\"vertical-align:text-top;overflow:visible;display:inline-block;width:1px;height:1px;background:red;\">\n    <div style=\"width:1000px;;height:1px;background:red;\"></div>\n  </div>\n\tHello\n  <div style=\"vertical-align:text-top;line-height:70px;width:100px;height:50px;background-color:aqua;display:inline-block\"></div>\n  <div style=\"vertical-align:text-top;line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"></div>\n  <div style=\"vertical-align:text-bottom;line-height:70px;width:100px;height:200px;background-color:plum;display:inline-block\"></div>\n</div>\n```\n- è¿è¡Œæˆªå›¾\n\t- ![è¿è¡Œæˆªå›¾](http://p0.meituan.net/myvideodistribute/9b109f5fd664383e3df90e99684c3e44251251.png)\n- å½“æˆ‘ä»¬æŠŠ vertical-align è®¾ç½®æˆ text-top / text-bottom æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸Šè¾¹ç¼˜æ˜¯ç”± text-top å…ƒç´ æ’‘å¼€ï¼Œä¸‹è¾¹ç¼˜æ˜¯ç”± text-bottom å…ƒç´ æ’‘å¼€çš„\n- æ­£å¸¸æµäº¤å‰è½´çš„ crossBase = ä¸Šè¾¹ç¼˜ + ä¸‹è¾¹ç¼˜ - texté«˜åº¦\n- vertical-align: baselineï¼Œæ˜¯æ‹¿è‡ªå·±çš„ baseline å»å¯¹å…¶è¡Œçš„ baseline \n- vertical-align: topï¼Œmiddleï¼Œbottomï¼Œæ˜¯æ‹¿è‡ªå·±çš„ â€é¡¶éƒ¨â€œ â€œä¸­çº¿â€ â€åº•éƒ¨â€œ å»å¯¹å…¶è¡Œçš„ â€é¡¶éƒ¨â€œ â€œä¸­çº¿â€ â€åº•éƒ¨â€œ \n- vertical-align: text-topï¼Œtext-bottomï¼Œæ˜¯æ‹¿è‡ªå·±çš„ â€é¡¶éƒ¨â€œ â€åº•éƒ¨â€œ å»å¯¹é½è¡Œçš„ text-top å’Œ text-bottom \n- ç»“è®ºï¼š**æ­£å¸¸æµçš„è¡Œæ¨¡å‹æ¨è vertical-align: top/bottom/middle**\n![vertical-alignç›¸å…³æ¦‚å¿µ](https://static001.geekbang.org/resource/image/aa/e3/aa6611b00f71f606493f165294410ee3.png)\n\n\n\n### æ­£å¸¸æµçš„ä¸‰å¤§éš¾é¢˜\n- overflow:visible ä¸ BFC\n- margin collapse ï¼ˆä¸€ä¸ªå…ƒç´ è§„å®šäº†è‡ªèº«å‘¨å›´è‡³å°‘éœ€è¦çš„ç©ºé—´ï¼‰\n\t- [W3 BFC](https://www.w3.org/TR/CSS2/visuren.html#block-formatting)\n\t- ![BFC conception](http://p0.meituan.net/myvideodistribute/fb01ede731f8f6ceb2f700f2b73cf681228107.png)\n\t- ![BFC margin collapse](http://p0.meituan.net/myvideodistribute/9e455229b4b2a2214199f9754a4b022c290880.png)\n\t\t- æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ BFC ä¸­ å‘ç”Ÿäº† margin collapse\n\t- ![new BFC margin collapse](http://p0.meituan.net/myvideodistribute/77ea7124c4f4e610b397483990fd009c222906.png)\n\t\t- åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°† 4ã€5 ç”¨ä¸€ä¸ª div æ¡†èµ·æ¥ï¼Œè®¾ç½® overflow other than visible åœ¨æ–°çš„ div é‡Œå½¢æˆä¸€ä¸ªæ–°çš„ BFC\n\t\t- BFC ä¸ BFC ä¹‹é—´ä¸å‘ç”Ÿ margin collapse\n\t- ![BFC V3](http://p1.meituan.net/myvideodistribute/b85b5b56118aaa06c6c1eb1d67d1d565238437.png)\n\t\t- æˆ‘ä»¬åœ¨ div é‡Œæ–°å»ºçš„ BFC ,é‡Œé¢å‘ç”Ÿ margin collapseï¼Œmargin-top: 20px;\n\t\t- div æ‰€å¤„å¤–é¢åŒä¸€çº§ BFC ï¼Œä¹Ÿå‘ç”Ÿ margin collapseï¼Œ å˜æˆ 50px;\n\t- ![BFC V4](http://p0.meituan.net/myvideodistribute/a7eb565313d603a0440434d2c3aaed71220282.png)\n\t\t- å°† overflow: visible åï¼Œæ•´ä¸ª div å°±åƒä¸å­˜åœ¨ä¸€æ ·ï¼Œæ²¡æœ‰å½±å“ï¼Œäº§ç”Ÿ margin collaps\n\t- ![BFC V5](http://p1.meituan.net/myvideodistribute/ce562c00cac00a70bfa7ea23851785d2234933.png)\n\t\t- ä½†æˆ‘ä»¬å¢åŠ  margin-top: 50px åï¼Œå¥‡æ€ªçš„äº‹æƒ…å‘ç”Ÿäº†\n\t- **overflow: visible æ˜¯ç‰¹ä¾‹ï¼Œé‡Œé¢æ˜¯ block, å¤–é¢ä¹Ÿæ˜¯ block, ä¼šåˆå¹¶æˆä¸€ä¸ª block**\n\t- **Block-level boxes that are also block containers are called block boxes.**\n\t\t- flex inline-flex\n\t\t- table inline-table\n\t\t- grid inline-grid\n\t\t- block inlie-block\n\t\t- **block containers: block inline-block**\n\t\t\t- è¡¨ç¤ºå¯ä»¥å®¹çº³bfc\n\t\t- **Block-level boxes: flex table grid block**\n\t\t\t- è¡¨ç¤ºå¯ä»¥è¢«æ”¾å…¥bfc\n\t\t- **Block boxes**\n\t\t\t- block-box = block-level + block-container\n\t\t\t- block-box å¦‚æœ overflow æ˜¯ visibleï¼Œ é‚£ä¹ˆå°±è·Ÿçˆ¶bfcåˆå¹¶\n\t\t- åªè¦åŒ…å«æ­£å¸¸æµï¼Œéƒ½ä¼šäº§ç”Ÿ BFC, å‰©ä¸‹çš„éƒ½æ˜¯ç”±ä¸€äº›å¥‡æ€ªçš„ display, æœ€å­ä¸€çº§å…ƒç´ ä¹Ÿä¼šäº§ç”Ÿ BFC ï¼Œlike flex-item table-cell\n\n- float ä¸ clear\n\n## Flex\n\n### Flex æ’ç‰ˆ\n- æ”¶é›†ç›’è¿›è¡Œ\n- è®¡ç®—ç›’åœ¨ä¸»è½´æ–¹å‘çš„æ’å¸ƒ\n- è®¡ç®—ç›’åœ¨äº¤å‰è½´æ–¹å‘çš„æ’å¸ƒ\n\n\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"CSS-æ’ç‰ˆ","published":1,"updated":"2020-10-27T15:21:11.260Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7f0004fw9k7u2uasaw","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>CSS æ’ç‰ˆç›¸å…³çŸ¥è¯†</li>\n<li>CSS å±æ€§<ul>\n<li>æ’ç‰ˆ</li>\n<li>æ¸²æŸ“</li>\n<li>äº¤äº’</li>\n</ul>\n</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"ç›’ï¼ˆBoxï¼‰\"><a href=\"#ç›’ï¼ˆBoxï¼‰\" class=\"headerlink\" title=\"ç›’ï¼ˆBoxï¼‰\"></a>ç›’ï¼ˆBoxï¼‰</h2><ul>\n<li>æºä»£ç  - æ ‡ç­¾ - tag</li>\n<li>è¯­ä¹‰ - å…ƒç´  - element</li>\n<li>è¡¨ç° - ç›’ - box</li>\n<li>åŸºæœ¬å…ƒç´  ç›’ + æ–‡å­—</li>\n<li>æ’ç‰ˆå’Œæ¸²æŸ“çš„åŸºæœ¬å•ä½æ˜¯ç›’</li>\n<li>CSS åœ¨æ’ç‰ˆæ—¶å¯èƒ½äº§ç”Ÿå¤šä¸ªç›’</li>\n</ul>\n<h2 id=\"ç›’æ¨¡å‹\"><a href=\"#ç›’æ¨¡å‹\" class=\"headerlink\" title=\"ç›’æ¨¡å‹\"></a>ç›’æ¨¡å‹</h2><ul>\n<li>ã€æœªå®Œã€‘box-sizing: ä¸ºä»€ä¹ˆæ²¡æœ‰ margin-box</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/1ed695c617e6c1ac8ba2b6650d5bb2c5220253.png\" alt=\"ç›’æ¨¡å‹\"></li>\n</ul>\n<h2 id=\"æ­£å¸¸æµ\"><a href=\"#æ­£å¸¸æµ\" class=\"headerlink\" title=\"æ­£å¸¸æµ\"></a>æ­£å¸¸æµ</h2><h3 id=\"æ­£å¸¸æµæ’ç‰ˆ\"><a href=\"#æ­£å¸¸æµæ’ç‰ˆ\" class=\"headerlink\" title=\"æ­£å¸¸æµæ’ç‰ˆ\"></a>æ­£å¸¸æµæ’ç‰ˆ</h3><h3 id=\"æ­£å¸¸æµçš„è¡Œæ¨¡å‹\"><a href=\"#æ­£å¸¸æµçš„è¡Œæ¨¡å‹\" class=\"headerlink\" title=\"æ­£å¸¸æµçš„è¡Œæ¨¡å‹\"></a>æ­£å¸¸æµçš„è¡Œæ¨¡å‹</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"font-size:50px;line-height:100px;background-color:pink;\"</span>&gt;</span></span><br><span class=\"line\">\tHello</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"</span>&gt;</span>world!<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/2e8597eb317b1096396a1b7ebfa335bb188008.png\" alt=\"è¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n<li>å‘ç°ï¼Œå³ä½¿è¡Œé«˜ä¸ä¸€è‡´ï¼Œ Hello ä¸ worldï¼ ä¹ŸåŸºäº baseline å¯¹é½</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"font-size:50px;line-height:100px;background-color:pink;\"</span>&gt;</span></span><br><span class=\"line\">\tHello</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/cdac1ebe861651fc773f462496bcaa58175250.png\" alt=\"è¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n<li>å‘ç°ï¼Œå½“æ²¡æœ‰å†…å®¹æ—¶ï¼Œä½¿ç”¨ç›’å­ bottom å¯¹é½ æ–‡å­— baseline</li>\n<li>æ‰€ä»¥ä¸€èˆ¬è¦ç»™ç›’å­è®¾ç½® vertical-align: bottom / top</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"font-size:50px;line-height:100px;background-color:pink;\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- &lt;div style=\"vertical-align:baseline;overflow:visible;display: inline-block;width:1px;;height:1px;background:red;\"&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;div style=\"width:1000px;;height:1px;background:red;\"&gt;&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"comment\">  &lt;/div&gt; --&gt;</span></span><br><span class=\"line\">\tHello</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:bottom;line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:top;line-height:70px;width:100px;height:50px;background-color:aqua;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:bottom;line-height:70px;width:100px;height:200px;background-color:plum;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/368d5d1389c38ac68370ed80b6f22cf4231244.png\" alt=\"è¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n<li>å¯ä»¥å‘ç° vertical-aign ä¸ line-height é«˜åº¦è®¾å®šæ— å…³ï¼Œä¸æœ€ç»ˆè¢«æ’‘å¼€çš„ç›’å­é«˜åº¦æœ‰å…³</li>\n<li>æ²¡æœ‰è®¾å®š vertical-align å¦‚æœè¶…è¿‡ line-height å§‹ç»ˆä¸æœ€é«˜å…ƒç´ çš„å¯¹é½æ–¹å¼ä¿æŒä¸€è‡´</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"font-size:50px;line-height:100px;background-color:pink;\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:text-bottom;overflow:visible;display:inline-block;width:1px;height:1px;background:red;\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width:1000px;;height:1px;background:red;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:text-top;overflow:visible;display:inline-block;width:1px;height:1px;background:red;\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width:1000px;;height:1px;background:red;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\tHello</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:text-top;line-height:70px;width:100px;height:50px;background-color:aqua;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:text-top;line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:text-bottom;line-height:70px;width:100px;height:200px;background-color:plum;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/9b109f5fd664383e3df90e99684c3e44251251.png\" alt=\"è¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n<li>å½“æˆ‘ä»¬æŠŠ vertical-align è®¾ç½®æˆ text-top / text-bottom æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸Šè¾¹ç¼˜æ˜¯ç”± text-top å…ƒç´ æ’‘å¼€ï¼Œä¸‹è¾¹ç¼˜æ˜¯ç”± text-bottom å…ƒç´ æ’‘å¼€çš„</li>\n<li>æ­£å¸¸æµäº¤å‰è½´çš„ crossBase = ä¸Šè¾¹ç¼˜ + ä¸‹è¾¹ç¼˜ - texté«˜åº¦</li>\n<li>vertical-align: baselineï¼Œæ˜¯æ‹¿è‡ªå·±çš„ baseline å»å¯¹å…¶è¡Œçš„ baseline </li>\n<li>vertical-align: topï¼Œmiddleï¼Œbottomï¼Œæ˜¯æ‹¿è‡ªå·±çš„ â€é¡¶éƒ¨â€œ â€œä¸­çº¿â€ â€åº•éƒ¨â€œ å»å¯¹å…¶è¡Œçš„ â€é¡¶éƒ¨â€œ â€œä¸­çº¿â€ â€åº•éƒ¨â€œ </li>\n<li>vertical-align: text-topï¼Œtext-bottomï¼Œæ˜¯æ‹¿è‡ªå·±çš„ â€é¡¶éƒ¨â€œ â€åº•éƒ¨â€œ å»å¯¹é½è¡Œçš„ text-top å’Œ text-bottom </li>\n<li>ç»“è®ºï¼š<strong>æ­£å¸¸æµçš„è¡Œæ¨¡å‹æ¨è vertical-align: top/bottom/middle</strong><br><img src=\"https://static001.geekbang.org/resource/image/aa/e3/aa6611b00f71f606493f165294410ee3.png\" alt=\"vertical-alignç›¸å…³æ¦‚å¿µ\"></li>\n</ul>\n<h3 id=\"æ­£å¸¸æµçš„ä¸‰å¤§éš¾é¢˜\"><a href=\"#æ­£å¸¸æµçš„ä¸‰å¤§éš¾é¢˜\" class=\"headerlink\" title=\"æ­£å¸¸æµçš„ä¸‰å¤§éš¾é¢˜\"></a>æ­£å¸¸æµçš„ä¸‰å¤§éš¾é¢˜</h3><ul>\n<li><p>overflow:visible ä¸ BFC</p>\n</li>\n<li><p>margin collapse ï¼ˆä¸€ä¸ªå…ƒç´ è§„å®šäº†è‡ªèº«å‘¨å›´è‡³å°‘éœ€è¦çš„ç©ºé—´ï¼‰</p>\n<ul>\n<li><a href=\"https://www.w3.org/TR/CSS2/visuren.html#block-formatting\" target=\"_blank\" rel=\"noopener\">W3 BFC</a></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/fb01ede731f8f6ceb2f700f2b73cf681228107.png\" alt=\"BFC conception\"></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/9e455229b4b2a2214199f9754a4b022c290880.png\" alt=\"BFC margin collapse\"><ul>\n<li>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ BFC ä¸­ å‘ç”Ÿäº† margin collapse</li>\n</ul>\n</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/77ea7124c4f4e610b397483990fd009c222906.png\" alt=\"new BFC margin collapse\"><ul>\n<li>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°† 4ã€5 ç”¨ä¸€ä¸ª div æ¡†èµ·æ¥ï¼Œè®¾ç½® overflow other than visible åœ¨æ–°çš„ div é‡Œå½¢æˆä¸€ä¸ªæ–°çš„ BFC</li>\n<li>BFC ä¸ BFC ä¹‹é—´ä¸å‘ç”Ÿ margin collapse</li>\n</ul>\n</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/b85b5b56118aaa06c6c1eb1d67d1d565238437.png\" alt=\"BFC V3\"><ul>\n<li>æˆ‘ä»¬åœ¨ div é‡Œæ–°å»ºçš„ BFC ,é‡Œé¢å‘ç”Ÿ margin collapseï¼Œmargin-top: 20px;</li>\n<li>div æ‰€å¤„å¤–é¢åŒä¸€çº§ BFC ï¼Œä¹Ÿå‘ç”Ÿ margin collapseï¼Œ å˜æˆ 50px;</li>\n</ul>\n</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/a7eb565313d603a0440434d2c3aaed71220282.png\" alt=\"BFC V4\"><ul>\n<li>å°† overflow: visible åï¼Œæ•´ä¸ª div å°±åƒä¸å­˜åœ¨ä¸€æ ·ï¼Œæ²¡æœ‰å½±å“ï¼Œäº§ç”Ÿ margin collaps</li>\n</ul>\n</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/ce562c00cac00a70bfa7ea23851785d2234933.png\" alt=\"BFC V5\"><ul>\n<li>ä½†æˆ‘ä»¬å¢åŠ  margin-top: 50px åï¼Œå¥‡æ€ªçš„äº‹æƒ…å‘ç”Ÿäº†</li>\n</ul>\n</li>\n<li><strong>overflow: visible æ˜¯ç‰¹ä¾‹ï¼Œé‡Œé¢æ˜¯ block, å¤–é¢ä¹Ÿæ˜¯ block, ä¼šåˆå¹¶æˆä¸€ä¸ª block</strong></li>\n<li><strong>Block-level boxes that are also block containers are called block boxes.</strong><ul>\n<li>flex inline-flex</li>\n<li>table inline-table</li>\n<li>grid inline-grid</li>\n<li>block inlie-block</li>\n<li><strong>block containers: block inline-block</strong><ul>\n<li>è¡¨ç¤ºå¯ä»¥å®¹çº³bfc</li>\n</ul>\n</li>\n<li><strong>Block-level boxes: flex table grid block</strong><ul>\n<li>è¡¨ç¤ºå¯ä»¥è¢«æ”¾å…¥bfc</li>\n</ul>\n</li>\n<li><strong>Block boxes</strong><ul>\n<li>block-box = block-level + block-container</li>\n<li>block-box å¦‚æœ overflow æ˜¯ visibleï¼Œ é‚£ä¹ˆå°±è·Ÿçˆ¶bfcåˆå¹¶</li>\n</ul>\n</li>\n<li>åªè¦åŒ…å«æ­£å¸¸æµï¼Œéƒ½ä¼šäº§ç”Ÿ BFC, å‰©ä¸‹çš„éƒ½æ˜¯ç”±ä¸€äº›å¥‡æ€ªçš„ display, æœ€å­ä¸€çº§å…ƒç´ ä¹Ÿä¼šäº§ç”Ÿ BFC ï¼Œlike flex-item table-cell</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>float ä¸ clear</p>\n</li>\n</ul>\n<h2 id=\"Flex\"><a href=\"#Flex\" class=\"headerlink\" title=\"Flex\"></a>Flex</h2><h3 id=\"Flex-æ’ç‰ˆ\"><a href=\"#Flex-æ’ç‰ˆ\" class=\"headerlink\" title=\"Flex æ’ç‰ˆ\"></a>Flex æ’ç‰ˆ</h3><ul>\n<li>æ”¶é›†ç›’è¿›è¡Œ</li>\n<li>è®¡ç®—ç›’åœ¨ä¸»è½´æ–¹å‘çš„æ’å¸ƒ</li>\n<li>è®¡ç®—ç›’åœ¨äº¤å‰è½´æ–¹å‘çš„æ’å¸ƒ</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>CSS æ’ç‰ˆç›¸å…³çŸ¥è¯†</li>\n<li>CSS å±æ€§<ul>\n<li>æ’ç‰ˆ</li>\n<li>æ¸²æŸ“</li>\n<li>äº¤äº’</li>\n</ul>\n</li>\n</ul>","more":"<h2 id=\"ç›’ï¼ˆBoxï¼‰\"><a href=\"#ç›’ï¼ˆBoxï¼‰\" class=\"headerlink\" title=\"ç›’ï¼ˆBoxï¼‰\"></a>ç›’ï¼ˆBoxï¼‰</h2><ul>\n<li>æºä»£ç  - æ ‡ç­¾ - tag</li>\n<li>è¯­ä¹‰ - å…ƒç´  - element</li>\n<li>è¡¨ç° - ç›’ - box</li>\n<li>åŸºæœ¬å…ƒç´  ç›’ + æ–‡å­—</li>\n<li>æ’ç‰ˆå’Œæ¸²æŸ“çš„åŸºæœ¬å•ä½æ˜¯ç›’</li>\n<li>CSS åœ¨æ’ç‰ˆæ—¶å¯èƒ½äº§ç”Ÿå¤šä¸ªç›’</li>\n</ul>\n<h2 id=\"ç›’æ¨¡å‹\"><a href=\"#ç›’æ¨¡å‹\" class=\"headerlink\" title=\"ç›’æ¨¡å‹\"></a>ç›’æ¨¡å‹</h2><ul>\n<li>ã€æœªå®Œã€‘box-sizing: ä¸ºä»€ä¹ˆæ²¡æœ‰ margin-box</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/1ed695c617e6c1ac8ba2b6650d5bb2c5220253.png\" alt=\"ç›’æ¨¡å‹\"></li>\n</ul>\n<h2 id=\"æ­£å¸¸æµ\"><a href=\"#æ­£å¸¸æµ\" class=\"headerlink\" title=\"æ­£å¸¸æµ\"></a>æ­£å¸¸æµ</h2><h3 id=\"æ­£å¸¸æµæ’ç‰ˆ\"><a href=\"#æ­£å¸¸æµæ’ç‰ˆ\" class=\"headerlink\" title=\"æ­£å¸¸æµæ’ç‰ˆ\"></a>æ­£å¸¸æµæ’ç‰ˆ</h3><h3 id=\"æ­£å¸¸æµçš„è¡Œæ¨¡å‹\"><a href=\"#æ­£å¸¸æµçš„è¡Œæ¨¡å‹\" class=\"headerlink\" title=\"æ­£å¸¸æµçš„è¡Œæ¨¡å‹\"></a>æ­£å¸¸æµçš„è¡Œæ¨¡å‹</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"font-size:50px;line-height:100px;background-color:pink;\"</span>&gt;</span></span><br><span class=\"line\">\tHello</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"</span>&gt;</span>world!<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/2e8597eb317b1096396a1b7ebfa335bb188008.png\" alt=\"è¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n<li>å‘ç°ï¼Œå³ä½¿è¡Œé«˜ä¸ä¸€è‡´ï¼Œ Hello ä¸ worldï¼ ä¹ŸåŸºäº baseline å¯¹é½</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"font-size:50px;line-height:100px;background-color:pink;\"</span>&gt;</span></span><br><span class=\"line\">\tHello</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/cdac1ebe861651fc773f462496bcaa58175250.png\" alt=\"è¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n<li>å‘ç°ï¼Œå½“æ²¡æœ‰å†…å®¹æ—¶ï¼Œä½¿ç”¨ç›’å­ bottom å¯¹é½ æ–‡å­— baseline</li>\n<li>æ‰€ä»¥ä¸€èˆ¬è¦ç»™ç›’å­è®¾ç½® vertical-align: bottom / top</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"font-size:50px;line-height:100px;background-color:pink;\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- &lt;div style=\"vertical-align:baseline;overflow:visible;display: inline-block;width:1px;;height:1px;background:red;\"&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;div style=\"width:1000px;;height:1px;background:red;\"&gt;&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"comment\">  &lt;/div&gt; --&gt;</span></span><br><span class=\"line\">\tHello</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:bottom;line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:top;line-height:70px;width:100px;height:50px;background-color:aqua;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:bottom;line-height:70px;width:100px;height:200px;background-color:plum;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/368d5d1389c38ac68370ed80b6f22cf4231244.png\" alt=\"è¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n<li>å¯ä»¥å‘ç° vertical-aign ä¸ line-height é«˜åº¦è®¾å®šæ— å…³ï¼Œä¸æœ€ç»ˆè¢«æ’‘å¼€çš„ç›’å­é«˜åº¦æœ‰å…³</li>\n<li>æ²¡æœ‰è®¾å®š vertical-align å¦‚æœè¶…è¿‡ line-height å§‹ç»ˆä¸æœ€é«˜å…ƒç´ çš„å¯¹é½æ–¹å¼ä¿æŒä¸€è‡´</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"font-size:50px;line-height:100px;background-color:pink;\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:text-bottom;overflow:visible;display:inline-block;width:1px;height:1px;background:red;\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width:1000px;;height:1px;background:red;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:text-top;overflow:visible;display:inline-block;width:1px;height:1px;background:red;\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width:1000px;;height:1px;background:red;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\tHello</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:text-top;line-height:70px;width:100px;height:50px;background-color:aqua;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:text-top;line-height:70px;width:100px;height:150px;background-color:aqua;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"vertical-align:text-bottom;line-height:70px;width:100px;height:200px;background-color:plum;display:inline-block\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/9b109f5fd664383e3df90e99684c3e44251251.png\" alt=\"è¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n<li>å½“æˆ‘ä»¬æŠŠ vertical-align è®¾ç½®æˆ text-top / text-bottom æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸Šè¾¹ç¼˜æ˜¯ç”± text-top å…ƒç´ æ’‘å¼€ï¼Œä¸‹è¾¹ç¼˜æ˜¯ç”± text-bottom å…ƒç´ æ’‘å¼€çš„</li>\n<li>æ­£å¸¸æµäº¤å‰è½´çš„ crossBase = ä¸Šè¾¹ç¼˜ + ä¸‹è¾¹ç¼˜ - texté«˜åº¦</li>\n<li>vertical-align: baselineï¼Œæ˜¯æ‹¿è‡ªå·±çš„ baseline å»å¯¹å…¶è¡Œçš„ baseline </li>\n<li>vertical-align: topï¼Œmiddleï¼Œbottomï¼Œæ˜¯æ‹¿è‡ªå·±çš„ â€é¡¶éƒ¨â€œ â€œä¸­çº¿â€ â€åº•éƒ¨â€œ å»å¯¹å…¶è¡Œçš„ â€é¡¶éƒ¨â€œ â€œä¸­çº¿â€ â€åº•éƒ¨â€œ </li>\n<li>vertical-align: text-topï¼Œtext-bottomï¼Œæ˜¯æ‹¿è‡ªå·±çš„ â€é¡¶éƒ¨â€œ â€åº•éƒ¨â€œ å»å¯¹é½è¡Œçš„ text-top å’Œ text-bottom </li>\n<li>ç»“è®ºï¼š<strong>æ­£å¸¸æµçš„è¡Œæ¨¡å‹æ¨è vertical-align: top/bottom/middle</strong><br><img src=\"https://static001.geekbang.org/resource/image/aa/e3/aa6611b00f71f606493f165294410ee3.png\" alt=\"vertical-alignç›¸å…³æ¦‚å¿µ\"></li>\n</ul>\n<h3 id=\"æ­£å¸¸æµçš„ä¸‰å¤§éš¾é¢˜\"><a href=\"#æ­£å¸¸æµçš„ä¸‰å¤§éš¾é¢˜\" class=\"headerlink\" title=\"æ­£å¸¸æµçš„ä¸‰å¤§éš¾é¢˜\"></a>æ­£å¸¸æµçš„ä¸‰å¤§éš¾é¢˜</h3><ul>\n<li><p>overflow:visible ä¸ BFC</p>\n</li>\n<li><p>margin collapse ï¼ˆä¸€ä¸ªå…ƒç´ è§„å®šäº†è‡ªèº«å‘¨å›´è‡³å°‘éœ€è¦çš„ç©ºé—´ï¼‰</p>\n<ul>\n<li><a href=\"https://www.w3.org/TR/CSS2/visuren.html#block-formatting\" target=\"_blank\" rel=\"noopener\">W3 BFC</a></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/fb01ede731f8f6ceb2f700f2b73cf681228107.png\" alt=\"BFC conception\"></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/9e455229b4b2a2214199f9754a4b022c290880.png\" alt=\"BFC margin collapse\"><ul>\n<li>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ BFC ä¸­ å‘ç”Ÿäº† margin collapse</li>\n</ul>\n</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/77ea7124c4f4e610b397483990fd009c222906.png\" alt=\"new BFC margin collapse\"><ul>\n<li>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°† 4ã€5 ç”¨ä¸€ä¸ª div æ¡†èµ·æ¥ï¼Œè®¾ç½® overflow other than visible åœ¨æ–°çš„ div é‡Œå½¢æˆä¸€ä¸ªæ–°çš„ BFC</li>\n<li>BFC ä¸ BFC ä¹‹é—´ä¸å‘ç”Ÿ margin collapse</li>\n</ul>\n</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/b85b5b56118aaa06c6c1eb1d67d1d565238437.png\" alt=\"BFC V3\"><ul>\n<li>æˆ‘ä»¬åœ¨ div é‡Œæ–°å»ºçš„ BFC ,é‡Œé¢å‘ç”Ÿ margin collapseï¼Œmargin-top: 20px;</li>\n<li>div æ‰€å¤„å¤–é¢åŒä¸€çº§ BFC ï¼Œä¹Ÿå‘ç”Ÿ margin collapseï¼Œ å˜æˆ 50px;</li>\n</ul>\n</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/a7eb565313d603a0440434d2c3aaed71220282.png\" alt=\"BFC V4\"><ul>\n<li>å°† overflow: visible åï¼Œæ•´ä¸ª div å°±åƒä¸å­˜åœ¨ä¸€æ ·ï¼Œæ²¡æœ‰å½±å“ï¼Œäº§ç”Ÿ margin collaps</li>\n</ul>\n</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/ce562c00cac00a70bfa7ea23851785d2234933.png\" alt=\"BFC V5\"><ul>\n<li>ä½†æˆ‘ä»¬å¢åŠ  margin-top: 50px åï¼Œå¥‡æ€ªçš„äº‹æƒ…å‘ç”Ÿäº†</li>\n</ul>\n</li>\n<li><strong>overflow: visible æ˜¯ç‰¹ä¾‹ï¼Œé‡Œé¢æ˜¯ block, å¤–é¢ä¹Ÿæ˜¯ block, ä¼šåˆå¹¶æˆä¸€ä¸ª block</strong></li>\n<li><strong>Block-level boxes that are also block containers are called block boxes.</strong><ul>\n<li>flex inline-flex</li>\n<li>table inline-table</li>\n<li>grid inline-grid</li>\n<li>block inlie-block</li>\n<li><strong>block containers: block inline-block</strong><ul>\n<li>è¡¨ç¤ºå¯ä»¥å®¹çº³bfc</li>\n</ul>\n</li>\n<li><strong>Block-level boxes: flex table grid block</strong><ul>\n<li>è¡¨ç¤ºå¯ä»¥è¢«æ”¾å…¥bfc</li>\n</ul>\n</li>\n<li><strong>Block boxes</strong><ul>\n<li>block-box = block-level + block-container</li>\n<li>block-box å¦‚æœ overflow æ˜¯ visibleï¼Œ é‚£ä¹ˆå°±è·Ÿçˆ¶bfcåˆå¹¶</li>\n</ul>\n</li>\n<li>åªè¦åŒ…å«æ­£å¸¸æµï¼Œéƒ½ä¼šäº§ç”Ÿ BFC, å‰©ä¸‹çš„éƒ½æ˜¯ç”±ä¸€äº›å¥‡æ€ªçš„ display, æœ€å­ä¸€çº§å…ƒç´ ä¹Ÿä¼šäº§ç”Ÿ BFC ï¼Œlike flex-item table-cell</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>float ä¸ clear</p>\n</li>\n</ul>\n<h2 id=\"Flex\"><a href=\"#Flex\" class=\"headerlink\" title=\"Flex\"></a>Flex</h2><h3 id=\"Flex-æ’ç‰ˆ\"><a href=\"#Flex-æ’ç‰ˆ\" class=\"headerlink\" title=\"Flex æ’ç‰ˆ\"></a>Flex æ’ç‰ˆ</h3><ul>\n<li>æ”¶é›†ç›’è¿›è¡Œ</li>\n<li>è®¡ç®—ç›’åœ¨ä¸»è½´æ–¹å‘çš„æ’å¸ƒ</li>\n<li>è®¡ç®—ç›’åœ¨äº¤å‰è½´æ–¹å‘çš„æ’å¸ƒ</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"CSSåŸºæœ¬è¯­æ³•+åŸºç¡€æœºåˆ¶","date":"2020-05-24T13:41:08.000Z","description":["CSSåŸºæœ¬è¯­æ³•+åŸºç¡€æœºåˆ¶"],"_content":"\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- æ•´ç†ä¸€ä¸‹å¹³æ—¶æ‰€å­¦+æ‰€ç”¨åˆ°çš„ CSS åŸºæœ¬è¯­æ³•\n\n<!-- more -->\n\n\n## CSS åŸºæœ¬è¯­æ³•\n### CSS2.1 è¯­æ³•\n- [Appendix G. Grammar of CSS 2.1](https://www.w3.org/TR/CSS21/grammar.html#q25.0)\n- [CSS Syntax Module Level 3](https://www.w3.org/TR/css-syntax-3/)\n\n\n### CSS2.1 æ€»ä½“ç»“æ„\n![productions_1](http://p0.meituan.net/myvideodistribute/b9beefeab08a031d689d4e989de4c2f1197837.png)\n![productions_2](http://p0.meituan.net/myvideodistribute/7340e333e43e235776839a2c00bfb982147104.png)\n\n- ç®€åŒ–ä¸ºï¼š\n\t- @charset\n\t- @import\n\t- rules\n\t\t- @media\n\t\t- @page\n\t\t- rule\n\n\n## CSS @ Rules\n- [@charset](https://www.w3.org/TR/css-syntax-3/)\n- [@import](https://www.w3.org/TR/css-cascade-4/)\n- [@media](https://www.w3.org/TR/css3-conditional/)\n- [@page](https://www.w3.org/TR/css-page-3/)\n- [@counter-style](https://www.w3.org/TR/css-counter-styles-3/)\n- [@keyframes](https://www.w3.org/TR/css-animations-1/)\n- [@fontface](https://www.w3.org/TR/css-fonts-3/)\n- [@supports](https://www.w3.org/TR/css3-conditional/)\n- [@namespace](https://www.w3.org/TR/css-namespaces-3/)\n\n\n## CSS Qualified Rule çš„ç»“æ„\n- Selector\n\t- [selectors-3](https://www.w3.org/TR/selectors-3/)\n\t- [selectors-4](https://www.w3.org/TR/selectors-4/)\n- Key\n\t- Properties\n\t- Variables\n\t\t- [css-variables](https://www.w3.org/TR/css-variables/)\n- Value\n\t- [css-values-4](https://www.w3.org/TR/css-values-4/)\n\t- CSS å±æ€§å€¼å¯èƒ½æ˜¯ä»¥ä¸‹ç±»å‹ã€‚\n\t\t- CSS èŒƒå›´çš„å…³é”®å­—ï¼šinitialï¼Œunsetï¼Œinheritï¼Œä»»ä½•å±æ€§éƒ½å¯ä»¥çš„å…³é”®å­—ã€‚\n\t\t- å­—ç¬¦ä¸²ï¼šæ¯”å¦‚ content å±æ€§ã€‚\n\t\t- URLï¼šä½¿ç”¨ url() å‡½æ•°çš„ URL å€¼ã€‚\n\t\t- æ•´æ•° / å®æ•°ï¼šæ¯”å¦‚ flex å±æ€§ã€‚\n\t\t- ç»´åº¦ï¼šå•ä½çš„æ•´æ•° / å®æ•°ï¼Œæ¯”å¦‚ width å±æ€§ã€‚\n\t\t- ç™¾åˆ†æ¯”ï¼šå¤§éƒ¨åˆ†ç»´åº¦éƒ½æ”¯æŒã€‚\n\t\t- é¢œè‰²ï¼šæ¯”å¦‚ background-color å±æ€§ã€‚\n\t\t- å›¾ç‰‡ï¼šæ¯”å¦‚ background-image å±æ€§ã€‚\n\t\t- 2D ä½ç½®ï¼šæ¯”å¦‚ background-position å±æ€§ã€‚\n\t\t- å‡½æ•°ï¼šæ¥è‡ªå‡½æ•°çš„å€¼ï¼Œæ¯”å¦‚ transform å±æ€§ã€‚\n\t\t\t- calc()\n\t\t\t- max()\n\t\t\t- min()\n\t\t\t- clamp()\n\t\t\t- toggle()\n\t\t\t- attr()\n\n\n## åˆå»º CSS çŸ¥è¯†ä½“ç³»\n- ![CSS çŸ¥è¯†ä½“ç³»](http://p0.meituan.net/myvideodistribute/236b6afc66be8e7c1ea00a43b76d43a7259289.png)\n\n\n## æ”¶é›†æ ‡å‡†\n![CSS standards](http://p0.meituan.net/myvideodistribute/77c702cce890b37809d44d258837f1bd733569.png)\n\n\n- all standards and drafts are in the id named container of the html document.\n- so we can write a script to collect the standards.\n\n### ç¬¬ä¸€æ­¥ï¼šè·å–æ‰€æœ‰ li dom èŠ‚ç‚¹\n\t\n\t\n\t\n```javascript\nconst list = document.getElementById(\"container\").children\n  \nconsole.log('list', list)\n```\n![è·å–çš„æ‰€æœ‰ li èŠ‚ç‚¹](http://p0.meituan.net/myvideodistribute/6cb3b64a2be23ea9ffce86db74757615120112.png)\n\n### ç¬¬äºŒæ­¥ï¼šåŒ¹é…å‡º data-tag ä¸­ä¸º css çš„ standard\n- ![css standard](http://p1.meituan.net/myvideodistribute/3d1fb8e8198d5d5774cd861235d5682a314365.png)\n- è§‚å¯Ÿå¾—åˆ°ï¼Œæˆ‘ä»¬åªéœ€è¦å°† data-tag nodeValue ä¸­æœ‰ â€œcssâ€ æŠ“å‡ºæ¥å³å¯\n\n\t```javascript\n\tconst list = document.getElementById(\"container\").children\n\tconst result = []\n\tfor (let i of list) {\n\t  if (i.getAttribute('data-tag').match(/css/)) {\n\t    result.push({\n\t      name: i.children[1].innerText,\n\t      url: i.children[1].children[0].href\n\t    })\n\t  }\n\t}\n\tconsole.log(JSON.stringify(result, null, '    '))\n\t```\n\n\n## æ”¶é›† CSS å±æ€§ç›¸å…³æ ‡å‡†\n\n```javascript\nlet iframe = document.createElement(\"iframe\");\ndocument.body.innerHTML = \"\";\ndocument.body.appendChild(iframe);\n\n\n\n\nfunction happen(element, event){\n    return new Promise(function(resolve){\n        let handler = () => {\n            resolve();\n            element.removeEventListener(event, handler);\n        }\n        element.addEventListener(event, handler);\n    })\n}\n\n\n\n\nvoid async function(){\n    for(let standard of standards) {\n        iframe.src = standard.url;\n        console.log(standard.name);\n        await happen(iframe, \"load\");\n    }\n}();\n```\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","source":"_posts/CSSåŸºæœ¬è¯­æ³•-åŸºç¡€æœºåˆ¶.md","raw":"---\ntitle: CSSåŸºæœ¬è¯­æ³•+åŸºç¡€æœºåˆ¶\ndate: 2020-05-24 21:41:08\ntags: \n- CSS\ncategories:\n- CSS\ndescription:\n- CSSåŸºæœ¬è¯­æ³•+åŸºç¡€æœºåˆ¶\n\n\n---\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- æ•´ç†ä¸€ä¸‹å¹³æ—¶æ‰€å­¦+æ‰€ç”¨åˆ°çš„ CSS åŸºæœ¬è¯­æ³•\n\n<!-- more -->\n\n\n## CSS åŸºæœ¬è¯­æ³•\n### CSS2.1 è¯­æ³•\n- [Appendix G. Grammar of CSS 2.1](https://www.w3.org/TR/CSS21/grammar.html#q25.0)\n- [CSS Syntax Module Level 3](https://www.w3.org/TR/css-syntax-3/)\n\n\n### CSS2.1 æ€»ä½“ç»“æ„\n![productions_1](http://p0.meituan.net/myvideodistribute/b9beefeab08a031d689d4e989de4c2f1197837.png)\n![productions_2](http://p0.meituan.net/myvideodistribute/7340e333e43e235776839a2c00bfb982147104.png)\n\n- ç®€åŒ–ä¸ºï¼š\n\t- @charset\n\t- @import\n\t- rules\n\t\t- @media\n\t\t- @page\n\t\t- rule\n\n\n## CSS @ Rules\n- [@charset](https://www.w3.org/TR/css-syntax-3/)\n- [@import](https://www.w3.org/TR/css-cascade-4/)\n- [@media](https://www.w3.org/TR/css3-conditional/)\n- [@page](https://www.w3.org/TR/css-page-3/)\n- [@counter-style](https://www.w3.org/TR/css-counter-styles-3/)\n- [@keyframes](https://www.w3.org/TR/css-animations-1/)\n- [@fontface](https://www.w3.org/TR/css-fonts-3/)\n- [@supports](https://www.w3.org/TR/css3-conditional/)\n- [@namespace](https://www.w3.org/TR/css-namespaces-3/)\n\n\n## CSS Qualified Rule çš„ç»“æ„\n- Selector\n\t- [selectors-3](https://www.w3.org/TR/selectors-3/)\n\t- [selectors-4](https://www.w3.org/TR/selectors-4/)\n- Key\n\t- Properties\n\t- Variables\n\t\t- [css-variables](https://www.w3.org/TR/css-variables/)\n- Value\n\t- [css-values-4](https://www.w3.org/TR/css-values-4/)\n\t- CSS å±æ€§å€¼å¯èƒ½æ˜¯ä»¥ä¸‹ç±»å‹ã€‚\n\t\t- CSS èŒƒå›´çš„å…³é”®å­—ï¼šinitialï¼Œunsetï¼Œinheritï¼Œä»»ä½•å±æ€§éƒ½å¯ä»¥çš„å…³é”®å­—ã€‚\n\t\t- å­—ç¬¦ä¸²ï¼šæ¯”å¦‚ content å±æ€§ã€‚\n\t\t- URLï¼šä½¿ç”¨ url() å‡½æ•°çš„ URL å€¼ã€‚\n\t\t- æ•´æ•° / å®æ•°ï¼šæ¯”å¦‚ flex å±æ€§ã€‚\n\t\t- ç»´åº¦ï¼šå•ä½çš„æ•´æ•° / å®æ•°ï¼Œæ¯”å¦‚ width å±æ€§ã€‚\n\t\t- ç™¾åˆ†æ¯”ï¼šå¤§éƒ¨åˆ†ç»´åº¦éƒ½æ”¯æŒã€‚\n\t\t- é¢œè‰²ï¼šæ¯”å¦‚ background-color å±æ€§ã€‚\n\t\t- å›¾ç‰‡ï¼šæ¯”å¦‚ background-image å±æ€§ã€‚\n\t\t- 2D ä½ç½®ï¼šæ¯”å¦‚ background-position å±æ€§ã€‚\n\t\t- å‡½æ•°ï¼šæ¥è‡ªå‡½æ•°çš„å€¼ï¼Œæ¯”å¦‚ transform å±æ€§ã€‚\n\t\t\t- calc()\n\t\t\t- max()\n\t\t\t- min()\n\t\t\t- clamp()\n\t\t\t- toggle()\n\t\t\t- attr()\n\n\n## åˆå»º CSS çŸ¥è¯†ä½“ç³»\n- ![CSS çŸ¥è¯†ä½“ç³»](http://p0.meituan.net/myvideodistribute/236b6afc66be8e7c1ea00a43b76d43a7259289.png)\n\n\n## æ”¶é›†æ ‡å‡†\n![CSS standards](http://p0.meituan.net/myvideodistribute/77c702cce890b37809d44d258837f1bd733569.png)\n\n\n- all standards and drafts are in the id named container of the html document.\n- so we can write a script to collect the standards.\n\n### ç¬¬ä¸€æ­¥ï¼šè·å–æ‰€æœ‰ li dom èŠ‚ç‚¹\n\t\n\t\n\t\n```javascript\nconst list = document.getElementById(\"container\").children\n  \nconsole.log('list', list)\n```\n![è·å–çš„æ‰€æœ‰ li èŠ‚ç‚¹](http://p0.meituan.net/myvideodistribute/6cb3b64a2be23ea9ffce86db74757615120112.png)\n\n### ç¬¬äºŒæ­¥ï¼šåŒ¹é…å‡º data-tag ä¸­ä¸º css çš„ standard\n- ![css standard](http://p1.meituan.net/myvideodistribute/3d1fb8e8198d5d5774cd861235d5682a314365.png)\n- è§‚å¯Ÿå¾—åˆ°ï¼Œæˆ‘ä»¬åªéœ€è¦å°† data-tag nodeValue ä¸­æœ‰ â€œcssâ€ æŠ“å‡ºæ¥å³å¯\n\n\t```javascript\n\tconst list = document.getElementById(\"container\").children\n\tconst result = []\n\tfor (let i of list) {\n\t  if (i.getAttribute('data-tag').match(/css/)) {\n\t    result.push({\n\t      name: i.children[1].innerText,\n\t      url: i.children[1].children[0].href\n\t    })\n\t  }\n\t}\n\tconsole.log(JSON.stringify(result, null, '    '))\n\t```\n\n\n## æ”¶é›† CSS å±æ€§ç›¸å…³æ ‡å‡†\n\n```javascript\nlet iframe = document.createElement(\"iframe\");\ndocument.body.innerHTML = \"\";\ndocument.body.appendChild(iframe);\n\n\n\n\nfunction happen(element, event){\n    return new Promise(function(resolve){\n        let handler = () => {\n            resolve();\n            element.removeEventListener(event, handler);\n        }\n        element.addEventListener(event, handler);\n    })\n}\n\n\n\n\nvoid async function(){\n    for(let standard of standards) {\n        iframe.src = standard.url;\n        console.log(standard.name);\n        await happen(iframe, \"load\");\n    }\n}();\n```\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","slug":"CSSåŸºæœ¬è¯­æ³•-åŸºç¡€æœºåˆ¶","published":1,"updated":"2020-10-27T15:21:11.260Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7g0005fw9kd9cb0e96","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>æ•´ç†ä¸€ä¸‹å¹³æ—¶æ‰€å­¦+æ‰€ç”¨åˆ°çš„ CSS åŸºæœ¬è¯­æ³•</li>\n</ul>\n<a id=\"more\"></a>\n\n\n<h2 id=\"CSS-åŸºæœ¬è¯­æ³•\"><a href=\"#CSS-åŸºæœ¬è¯­æ³•\" class=\"headerlink\" title=\"CSS åŸºæœ¬è¯­æ³•\"></a>CSS åŸºæœ¬è¯­æ³•</h2><h3 id=\"CSS2-1-è¯­æ³•\"><a href=\"#CSS2-1-è¯­æ³•\" class=\"headerlink\" title=\"CSS2.1 è¯­æ³•\"></a>CSS2.1 è¯­æ³•</h3><ul>\n<li><a href=\"https://www.w3.org/TR/CSS21/grammar.html#q25.0\" target=\"_blank\" rel=\"noopener\">Appendix G. Grammar of CSS 2.1</a></li>\n<li><a href=\"https://www.w3.org/TR/css-syntax-3/\" target=\"_blank\" rel=\"noopener\">CSS Syntax Module Level 3</a></li>\n</ul>\n<h3 id=\"CSS2-1-æ€»ä½“ç»“æ„\"><a href=\"#CSS2-1-æ€»ä½“ç»“æ„\" class=\"headerlink\" title=\"CSS2.1 æ€»ä½“ç»“æ„\"></a>CSS2.1 æ€»ä½“ç»“æ„</h3><p><img src=\"http://p0.meituan.net/myvideodistribute/b9beefeab08a031d689d4e989de4c2f1197837.png\" alt=\"productions_1\"><br><img src=\"http://p0.meituan.net/myvideodistribute/7340e333e43e235776839a2c00bfb982147104.png\" alt=\"productions_2\"></p>\n<ul>\n<li>ç®€åŒ–ä¸ºï¼š<ul>\n<li>@charset</li>\n<li>@import</li>\n<li>rules<ul>\n<li>@media</li>\n<li>@page</li>\n<li>rule</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"CSS-Rules\"><a href=\"#CSS-Rules\" class=\"headerlink\" title=\"CSS @ Rules\"></a>CSS @ Rules</h2><ul>\n<li><a href=\"https://www.w3.org/TR/css-syntax-3/\" target=\"_blank\" rel=\"noopener\">@charset</a></li>\n<li><a href=\"https://www.w3.org/TR/css-cascade-4/\" target=\"_blank\" rel=\"noopener\">@import</a></li>\n<li><a href=\"https://www.w3.org/TR/css3-conditional/\" target=\"_blank\" rel=\"noopener\">@media</a></li>\n<li><a href=\"https://www.w3.org/TR/css-page-3/\" target=\"_blank\" rel=\"noopener\">@page</a></li>\n<li><a href=\"https://www.w3.org/TR/css-counter-styles-3/\" target=\"_blank\" rel=\"noopener\">@counter-style</a></li>\n<li><a href=\"https://www.w3.org/TR/css-animations-1/\" target=\"_blank\" rel=\"noopener\">@keyframes</a></li>\n<li><a href=\"https://www.w3.org/TR/css-fonts-3/\" target=\"_blank\" rel=\"noopener\">@fontface</a></li>\n<li><a href=\"https://www.w3.org/TR/css3-conditional/\" target=\"_blank\" rel=\"noopener\">@supports</a></li>\n<li><a href=\"https://www.w3.org/TR/css-namespaces-3/\" target=\"_blank\" rel=\"noopener\">@namespace</a></li>\n</ul>\n<h2 id=\"CSS-Qualified-Rule-çš„ç»“æ„\"><a href=\"#CSS-Qualified-Rule-çš„ç»“æ„\" class=\"headerlink\" title=\"CSS Qualified Rule çš„ç»“æ„\"></a>CSS Qualified Rule çš„ç»“æ„</h2><ul>\n<li>Selector<ul>\n<li><a href=\"https://www.w3.org/TR/selectors-3/\" target=\"_blank\" rel=\"noopener\">selectors-3</a></li>\n<li><a href=\"https://www.w3.org/TR/selectors-4/\" target=\"_blank\" rel=\"noopener\">selectors-4</a></li>\n</ul>\n</li>\n<li>Key<ul>\n<li>Properties</li>\n<li>Variables<ul>\n<li><a href=\"https://www.w3.org/TR/css-variables/\" target=\"_blank\" rel=\"noopener\">css-variables</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Value<ul>\n<li><a href=\"https://www.w3.org/TR/css-values-4/\" target=\"_blank\" rel=\"noopener\">css-values-4</a></li>\n<li>CSS å±æ€§å€¼å¯èƒ½æ˜¯ä»¥ä¸‹ç±»å‹ã€‚<ul>\n<li>CSS èŒƒå›´çš„å…³é”®å­—ï¼šinitialï¼Œunsetï¼Œinheritï¼Œä»»ä½•å±æ€§éƒ½å¯ä»¥çš„å…³é”®å­—ã€‚</li>\n<li>å­—ç¬¦ä¸²ï¼šæ¯”å¦‚ content å±æ€§ã€‚</li>\n<li>URLï¼šä½¿ç”¨ url() å‡½æ•°çš„ URL å€¼ã€‚</li>\n<li>æ•´æ•° / å®æ•°ï¼šæ¯”å¦‚ flex å±æ€§ã€‚</li>\n<li>ç»´åº¦ï¼šå•ä½çš„æ•´æ•° / å®æ•°ï¼Œæ¯”å¦‚ width å±æ€§ã€‚</li>\n<li>ç™¾åˆ†æ¯”ï¼šå¤§éƒ¨åˆ†ç»´åº¦éƒ½æ”¯æŒã€‚</li>\n<li>é¢œè‰²ï¼šæ¯”å¦‚ background-color å±æ€§ã€‚</li>\n<li>å›¾ç‰‡ï¼šæ¯”å¦‚ background-image å±æ€§ã€‚</li>\n<li>2D ä½ç½®ï¼šæ¯”å¦‚ background-position å±æ€§ã€‚</li>\n<li>å‡½æ•°ï¼šæ¥è‡ªå‡½æ•°çš„å€¼ï¼Œæ¯”å¦‚ transform å±æ€§ã€‚<ul>\n<li>calc()</li>\n<li>max()</li>\n<li>min()</li>\n<li>clamp()</li>\n<li>toggle()</li>\n<li>attr()</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"åˆå»º-CSS-çŸ¥è¯†ä½“ç³»\"><a href=\"#åˆå»º-CSS-çŸ¥è¯†ä½“ç³»\" class=\"headerlink\" title=\"åˆå»º CSS çŸ¥è¯†ä½“ç³»\"></a>åˆå»º CSS çŸ¥è¯†ä½“ç³»</h2><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/236b6afc66be8e7c1ea00a43b76d43a7259289.png\" alt=\"CSS çŸ¥è¯†ä½“ç³»\"></li>\n</ul>\n<h2 id=\"æ”¶é›†æ ‡å‡†\"><a href=\"#æ”¶é›†æ ‡å‡†\" class=\"headerlink\" title=\"æ”¶é›†æ ‡å‡†\"></a>æ”¶é›†æ ‡å‡†</h2><p><img src=\"http://p0.meituan.net/myvideodistribute/77c702cce890b37809d44d258837f1bd733569.png\" alt=\"CSS standards\"></p>\n<ul>\n<li>all standards and drafts are in the id named container of the html document.</li>\n<li>so we can write a script to collect the standards.</li>\n</ul>\n<h3 id=\"ç¬¬ä¸€æ­¥ï¼šè·å–æ‰€æœ‰-li-dom-èŠ‚ç‚¹\"><a href=\"#ç¬¬ä¸€æ­¥ï¼šè·å–æ‰€æœ‰-li-dom-èŠ‚ç‚¹\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šè·å–æ‰€æœ‰ li dom èŠ‚ç‚¹\"></a>ç¬¬ä¸€æ­¥ï¼šè·å–æ‰€æœ‰ li dom èŠ‚ç‚¹</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> list = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"container\"</span>).children</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'list'</span>, list)</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://p0.meituan.net/myvideodistribute/6cb3b64a2be23ea9ffce86db74757615120112.png\" alt=\"è·å–çš„æ‰€æœ‰ li èŠ‚ç‚¹\"></p>\n<h3 id=\"ç¬¬äºŒæ­¥ï¼šåŒ¹é…å‡º-data-tag-ä¸­ä¸º-css-çš„-standard\"><a href=\"#ç¬¬äºŒæ­¥ï¼šåŒ¹é…å‡º-data-tag-ä¸­ä¸º-css-çš„-standard\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ï¼šåŒ¹é…å‡º data-tag ä¸­ä¸º css çš„ standard\"></a>ç¬¬äºŒæ­¥ï¼šåŒ¹é…å‡º data-tag ä¸­ä¸º css çš„ standard</h3><ul>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/3d1fb8e8198d5d5774cd861235d5682a314365.png\" alt=\"css standard\"></p>\n</li>\n<li><p>è§‚å¯Ÿå¾—åˆ°ï¼Œæˆ‘ä»¬åªéœ€è¦å°† data-tag nodeValue ä¸­æœ‰ â€œcssâ€ æŠ“å‡ºæ¥å³å¯</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> list = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"container\"</span>).children</span><br><span class=\"line\"><span class=\"keyword\">const</span> result = []</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">of</span> list) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (i.getAttribute(<span class=\"string\">'data-tag'</span>).match(<span class=\"regexp\">/css/</span>)) &#123;</span><br><span class=\"line\">    result.push(&#123;</span><br><span class=\"line\">      name: i.children[<span class=\"number\">1</span>].innerText,</span><br><span class=\"line\">      url: i.children[<span class=\"number\">1</span>].children[<span class=\"number\">0</span>].href</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(result, <span class=\"literal\">null</span>, <span class=\"string\">'    '</span>))</span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n<h2 id=\"æ”¶é›†-CSS-å±æ€§ç›¸å…³æ ‡å‡†\"><a href=\"#æ”¶é›†-CSS-å±æ€§ç›¸å…³æ ‡å‡†\" class=\"headerlink\" title=\"æ”¶é›† CSS å±æ€§ç›¸å…³æ ‡å‡†\"></a>æ”¶é›† CSS å±æ€§ç›¸å…³æ ‡å‡†</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> iframe = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"iframe\"</span>);</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.innerHTML = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(iframe);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">happen</span>(<span class=\"params\">element, event</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> handler = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">            resolve();</span><br><span class=\"line\">            element.removeEventListener(event, handler);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        element.addEventListener(event, handler);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> standard <span class=\"keyword\">of</span> standards) &#123;</span><br><span class=\"line\">        iframe.src = standard.url;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(standard.name);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> happen(iframe, <span class=\"string\">\"load\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;();</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>æ•´ç†ä¸€ä¸‹å¹³æ—¶æ‰€å­¦+æ‰€ç”¨åˆ°çš„ CSS åŸºæœ¬è¯­æ³•</li>\n</ul>","more":"<h2 id=\"CSS-åŸºæœ¬è¯­æ³•\"><a href=\"#CSS-åŸºæœ¬è¯­æ³•\" class=\"headerlink\" title=\"CSS åŸºæœ¬è¯­æ³•\"></a>CSS åŸºæœ¬è¯­æ³•</h2><h3 id=\"CSS2-1-è¯­æ³•\"><a href=\"#CSS2-1-è¯­æ³•\" class=\"headerlink\" title=\"CSS2.1 è¯­æ³•\"></a>CSS2.1 è¯­æ³•</h3><ul>\n<li><a href=\"https://www.w3.org/TR/CSS21/grammar.html#q25.0\" target=\"_blank\" rel=\"noopener\">Appendix G. Grammar of CSS 2.1</a></li>\n<li><a href=\"https://www.w3.org/TR/css-syntax-3/\" target=\"_blank\" rel=\"noopener\">CSS Syntax Module Level 3</a></li>\n</ul>\n<h3 id=\"CSS2-1-æ€»ä½“ç»“æ„\"><a href=\"#CSS2-1-æ€»ä½“ç»“æ„\" class=\"headerlink\" title=\"CSS2.1 æ€»ä½“ç»“æ„\"></a>CSS2.1 æ€»ä½“ç»“æ„</h3><p><img src=\"http://p0.meituan.net/myvideodistribute/b9beefeab08a031d689d4e989de4c2f1197837.png\" alt=\"productions_1\"><br><img src=\"http://p0.meituan.net/myvideodistribute/7340e333e43e235776839a2c00bfb982147104.png\" alt=\"productions_2\"></p>\n<ul>\n<li>ç®€åŒ–ä¸ºï¼š<ul>\n<li>@charset</li>\n<li>@import</li>\n<li>rules<ul>\n<li>@media</li>\n<li>@page</li>\n<li>rule</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"CSS-Rules\"><a href=\"#CSS-Rules\" class=\"headerlink\" title=\"CSS @ Rules\"></a>CSS @ Rules</h2><ul>\n<li><a href=\"https://www.w3.org/TR/css-syntax-3/\" target=\"_blank\" rel=\"noopener\">@charset</a></li>\n<li><a href=\"https://www.w3.org/TR/css-cascade-4/\" target=\"_blank\" rel=\"noopener\">@import</a></li>\n<li><a href=\"https://www.w3.org/TR/css3-conditional/\" target=\"_blank\" rel=\"noopener\">@media</a></li>\n<li><a href=\"https://www.w3.org/TR/css-page-3/\" target=\"_blank\" rel=\"noopener\">@page</a></li>\n<li><a href=\"https://www.w3.org/TR/css-counter-styles-3/\" target=\"_blank\" rel=\"noopener\">@counter-style</a></li>\n<li><a href=\"https://www.w3.org/TR/css-animations-1/\" target=\"_blank\" rel=\"noopener\">@keyframes</a></li>\n<li><a href=\"https://www.w3.org/TR/css-fonts-3/\" target=\"_blank\" rel=\"noopener\">@fontface</a></li>\n<li><a href=\"https://www.w3.org/TR/css3-conditional/\" target=\"_blank\" rel=\"noopener\">@supports</a></li>\n<li><a href=\"https://www.w3.org/TR/css-namespaces-3/\" target=\"_blank\" rel=\"noopener\">@namespace</a></li>\n</ul>\n<h2 id=\"CSS-Qualified-Rule-çš„ç»“æ„\"><a href=\"#CSS-Qualified-Rule-çš„ç»“æ„\" class=\"headerlink\" title=\"CSS Qualified Rule çš„ç»“æ„\"></a>CSS Qualified Rule çš„ç»“æ„</h2><ul>\n<li>Selector<ul>\n<li><a href=\"https://www.w3.org/TR/selectors-3/\" target=\"_blank\" rel=\"noopener\">selectors-3</a></li>\n<li><a href=\"https://www.w3.org/TR/selectors-4/\" target=\"_blank\" rel=\"noopener\">selectors-4</a></li>\n</ul>\n</li>\n<li>Key<ul>\n<li>Properties</li>\n<li>Variables<ul>\n<li><a href=\"https://www.w3.org/TR/css-variables/\" target=\"_blank\" rel=\"noopener\">css-variables</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Value<ul>\n<li><a href=\"https://www.w3.org/TR/css-values-4/\" target=\"_blank\" rel=\"noopener\">css-values-4</a></li>\n<li>CSS å±æ€§å€¼å¯èƒ½æ˜¯ä»¥ä¸‹ç±»å‹ã€‚<ul>\n<li>CSS èŒƒå›´çš„å…³é”®å­—ï¼šinitialï¼Œunsetï¼Œinheritï¼Œä»»ä½•å±æ€§éƒ½å¯ä»¥çš„å…³é”®å­—ã€‚</li>\n<li>å­—ç¬¦ä¸²ï¼šæ¯”å¦‚ content å±æ€§ã€‚</li>\n<li>URLï¼šä½¿ç”¨ url() å‡½æ•°çš„ URL å€¼ã€‚</li>\n<li>æ•´æ•° / å®æ•°ï¼šæ¯”å¦‚ flex å±æ€§ã€‚</li>\n<li>ç»´åº¦ï¼šå•ä½çš„æ•´æ•° / å®æ•°ï¼Œæ¯”å¦‚ width å±æ€§ã€‚</li>\n<li>ç™¾åˆ†æ¯”ï¼šå¤§éƒ¨åˆ†ç»´åº¦éƒ½æ”¯æŒã€‚</li>\n<li>é¢œè‰²ï¼šæ¯”å¦‚ background-color å±æ€§ã€‚</li>\n<li>å›¾ç‰‡ï¼šæ¯”å¦‚ background-image å±æ€§ã€‚</li>\n<li>2D ä½ç½®ï¼šæ¯”å¦‚ background-position å±æ€§ã€‚</li>\n<li>å‡½æ•°ï¼šæ¥è‡ªå‡½æ•°çš„å€¼ï¼Œæ¯”å¦‚ transform å±æ€§ã€‚<ul>\n<li>calc()</li>\n<li>max()</li>\n<li>min()</li>\n<li>clamp()</li>\n<li>toggle()</li>\n<li>attr()</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"åˆå»º-CSS-çŸ¥è¯†ä½“ç³»\"><a href=\"#åˆå»º-CSS-çŸ¥è¯†ä½“ç³»\" class=\"headerlink\" title=\"åˆå»º CSS çŸ¥è¯†ä½“ç³»\"></a>åˆå»º CSS çŸ¥è¯†ä½“ç³»</h2><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/236b6afc66be8e7c1ea00a43b76d43a7259289.png\" alt=\"CSS çŸ¥è¯†ä½“ç³»\"></li>\n</ul>\n<h2 id=\"æ”¶é›†æ ‡å‡†\"><a href=\"#æ”¶é›†æ ‡å‡†\" class=\"headerlink\" title=\"æ”¶é›†æ ‡å‡†\"></a>æ”¶é›†æ ‡å‡†</h2><p><img src=\"http://p0.meituan.net/myvideodistribute/77c702cce890b37809d44d258837f1bd733569.png\" alt=\"CSS standards\"></p>\n<ul>\n<li>all standards and drafts are in the id named container of the html document.</li>\n<li>so we can write a script to collect the standards.</li>\n</ul>\n<h3 id=\"ç¬¬ä¸€æ­¥ï¼šè·å–æ‰€æœ‰-li-dom-èŠ‚ç‚¹\"><a href=\"#ç¬¬ä¸€æ­¥ï¼šè·å–æ‰€æœ‰-li-dom-èŠ‚ç‚¹\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šè·å–æ‰€æœ‰ li dom èŠ‚ç‚¹\"></a>ç¬¬ä¸€æ­¥ï¼šè·å–æ‰€æœ‰ li dom èŠ‚ç‚¹</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> list = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"container\"</span>).children</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'list'</span>, list)</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://p0.meituan.net/myvideodistribute/6cb3b64a2be23ea9ffce86db74757615120112.png\" alt=\"è·å–çš„æ‰€æœ‰ li èŠ‚ç‚¹\"></p>\n<h3 id=\"ç¬¬äºŒæ­¥ï¼šåŒ¹é…å‡º-data-tag-ä¸­ä¸º-css-çš„-standard\"><a href=\"#ç¬¬äºŒæ­¥ï¼šåŒ¹é…å‡º-data-tag-ä¸­ä¸º-css-çš„-standard\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ï¼šåŒ¹é…å‡º data-tag ä¸­ä¸º css çš„ standard\"></a>ç¬¬äºŒæ­¥ï¼šåŒ¹é…å‡º data-tag ä¸­ä¸º css çš„ standard</h3><ul>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/3d1fb8e8198d5d5774cd861235d5682a314365.png\" alt=\"css standard\"></p>\n</li>\n<li><p>è§‚å¯Ÿå¾—åˆ°ï¼Œæˆ‘ä»¬åªéœ€è¦å°† data-tag nodeValue ä¸­æœ‰ â€œcssâ€ æŠ“å‡ºæ¥å³å¯</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> list = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"container\"</span>).children</span><br><span class=\"line\"><span class=\"keyword\">const</span> result = []</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">of</span> list) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (i.getAttribute(<span class=\"string\">'data-tag'</span>).match(<span class=\"regexp\">/css/</span>)) &#123;</span><br><span class=\"line\">    result.push(&#123;</span><br><span class=\"line\">      name: i.children[<span class=\"number\">1</span>].innerText,</span><br><span class=\"line\">      url: i.children[<span class=\"number\">1</span>].children[<span class=\"number\">0</span>].href</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(result, <span class=\"literal\">null</span>, <span class=\"string\">'    '</span>))</span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n<h2 id=\"æ”¶é›†-CSS-å±æ€§ç›¸å…³æ ‡å‡†\"><a href=\"#æ”¶é›†-CSS-å±æ€§ç›¸å…³æ ‡å‡†\" class=\"headerlink\" title=\"æ”¶é›† CSS å±æ€§ç›¸å…³æ ‡å‡†\"></a>æ”¶é›† CSS å±æ€§ç›¸å…³æ ‡å‡†</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> iframe = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"iframe\"</span>);</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.innerHTML = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(iframe);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">happen</span>(<span class=\"params\">element, event</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> handler = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">            resolve();</span><br><span class=\"line\">            element.removeEventListener(event, handler);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        element.addEventListener(event, handler);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> standard <span class=\"keyword\">of</span> standards) &#123;</span><br><span class=\"line\">        iframe.src = standard.url;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(standard.name);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> happen(iframe, <span class=\"string\">\"load\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;();</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"CSS-é€‰æ‹©å™¨","date":"2020-05-29T08:19:40.000Z","description":["CSS é€‰æ‹©å™¨"],"_content":"\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n## å†™åœ¨å‰é¢\n- CSS é€‰æ‹©å™¨ç›¸å…³çŸ¥è¯†\n- æœ¬æ¥è¿™ä¸ªå¾ˆæ—©å°±èƒ½å†™å®Œçš„ï¼Œå‘¨äº”å­¦äº†ä¸ªç©ºç¿»ï¼Œå‘¨å…­å»ä¸Šäº†ä¸ªèº«ä½“å¼€å‘åŸºç¡€è¯¾ï¼Œç„¶åå…¨èº«é…¸ç—›ï¼Œé…¸ç—›åˆ°èµ·åºŠéƒ½èµ·ä¸æ¥çš„é‚£ç§ï¼Œå°±æ‹–äº†ä¸¤å¤©\n- ä½†æˆ‘è‡³å°‘æ²¡æœ‰é¸½æ‰ å˜»å˜»å˜» ã€æ‰‹åŠ¨ç‹—å¤´\n\n<!-- more -->\n\n\n## é€‰æ‹©å™¨è¯­æ³•\n\n### ç®€å•é€‰æ‹©å™¨\n- ![ç®€å•é€‰æ‹©å™¨ç»“æ„å›¾](https://static001.geekbang.org/resource/image/4c/ce/4c9ac78870342dc802137ea9c848c0ce.png)\n- é’ˆå¯¹æŸä¸€ç‰¹å¾åˆ¤æ–­æ˜¯å¦é€‰ä¸­å…ƒç´ ã€‚\n- *\n- div svg|a\n\t- [SVG](http://www.w3.org/2000/svg)\n\n\t\t```html\n\t\t<!DOCTYPE html>\n\t\t<html>\n\t\t<head>\n\t\t  <meta charset=\"utf-8\">\n\t\t  <title>JS Bin</title>\n\t\t</head>\n\t\t<body>\n\t\t<svg width=\"100\" height=\"28\" viewBox=\"0 0 100 28\" version=\"1.1\"\n\t\t     xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n\t\t  <desc>Example link01 - a link on an ellipse\n\t\t  </desc>\n\t\t  <a xlink:href=\"http://www.w3.org\">\n\t\t    <text y=\"100%\">name</text>\n\t\t  </a>\n\t\t</svg>\n\t\t<br/>\n\t\t<a href=\"javascript:void 0;\">name</a>\n\t\t</body>\n\t\t</html>\n\t\t```\n\t\t```CSS\n\t\t@namespace svg url(http://www.w3.org/2000/svg);\n\t\t@namespace html url(http://www.w3.org/1999/xhtml);\n\t\tsvg|a {\n\t\t  stroke:blue;\n\t\t  stroke-width:1;\n\t\t}\n\t\t\n\t\thtml|a {\n\t\t  font-size:40px\n\t\t}\n\t\t```\n- .cls\n- \\#id\n- [attr=value]\n\t- [attr]\n\t\t- ç›´æ¥åœ¨æ–¹æ‹¬å·ä¸­æ”¾å…¥å±æ€§åï¼Œæ˜¯æ£€æŸ¥å…ƒç´ æ˜¯å¦å…·æœ‰è¿™ä¸ªå±æ€§ï¼Œåªè¦å…ƒç´ æœ‰è¿™ä¸ªå±æ€§ï¼Œä¸è®ºå±æ€§æ˜¯ä»€ä¹ˆå€¼ï¼Œéƒ½å¯ä»¥è¢«é€‰ä¸­\n\t\t- ![[attr]](http://p0.meituan.net/myvideodistribute/ee7f5620eec48d0a237b15ed61a83404257138.png)\n\t- [attr=val]\n\t\t- ç²¾ç¡®åŒ¹é…ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ å±æ€§çš„å€¼æ˜¯å¦æ˜¯ val\n\t\t- ![[attr=val]](http://p0.meituan.net/myvideodistribute/1adfecc2daa770b4192909740af66b1d259781.png)\n\t- [att~=val]\n\t\t- å¤šç§åŒ¹é…ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ çš„å€¼æ˜¯å¦æ˜¯è‹¥å¹²å€¼ä¹‹ä¸€ï¼Œè¿™é‡Œçš„ val ä¸æ˜¯ä¸€ä¸ªå•ä¸€çš„å€¼äº†ï¼Œå¯ä»¥æ˜¯ç”¨ç©ºæ ¼åˆ†éš”çš„ä¸€ä¸ªåºåˆ—\n\t\t- ![[att~=val]](http://p0.meituan.net/myvideodistribute/b61188491bb578e4f96ef97baa6b263c264908.png)\n\t- [att|=val]\n\t\t- å¼€å¤´åŒ¹é…ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ çš„å€¼æ˜¯å¦æ˜¯ä»¥ val å¼€å¤´ï¼Œå®ƒè·Ÿç²¾ç¡®åŒ¹é…çš„åŒºåˆ«æ˜¯å±æ€§åªè¦ä»¥ val å¼€å¤´å³å¯ï¼Œåé¢å†…å®¹ä¸ç®¡ï¼ˆçº¢åœˆåœˆå‡ºçš„æ˜¯ç”Ÿæ•ˆæ ·å¼ï¼‰\n\t\t- ![[att|=val]](http://p0.meituan.net/myvideodistribute/4f1459c9d673adf7ac337f06569ec688330483.png)\n\t\t\n- ä¼ªç±»é€‰æ‹©å™¨\n\t- æ ‘ç»“æ„å…³ç³»ä¼ªç±»é€‰æ‹©å™¨\n\t\t- :root\n\t\t\t- è¡¨ç¤ºæ ‘çš„æ ¹å…ƒç´ \n\t\t- :empty\n\t\t\t- è¡¨ç¤ºæ²¡æœ‰å­èŠ‚ç‚¹çš„å…ƒç´ \n\n\t\t\t\t```html\n\t\t\t\t<div class=\"box\"><!-- I will be lime. --></div>\n\t\t\t\t<div class=\"box\">I will be pink.</div>\n\t\t\t\t<div class=\"box\">\n\t\t\t\t\t<!-- I will be pink in older browsers because of the whitespace around this comment. -->\n\t\t\t\t</div>\n\t\t\t\t<div class=\"box\">\n\t\t\t\t\t<p><!-- I will be pink in all browsers because of the non-collapsible whitespace and elements around this comment. --></p>\n\t\t\t\t</div>\n\t\t\t\t```\n\t\t\t\t```css\n\t\t\t\t.box {\n\t\t\t\t\t  background: pink;\n\t\t\t\t\t  height: 80px;\n\t\t\t\t\t  width: 80px;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.box:empty {\n\t\t\t\t\t  background: lime;\n\t\t\t\t\t}\n\t\t\t\t```\n\t\t\t- ![:empty ä¼ªç±»è¿è¡Œç»“æœ]()\n\t\t- :nth-child å’Œ :nth-last-child\n\t\t\t- ![nth-child å’Œ :nth-last-child](https://static001.geekbang.org/resource/image/1e/a9/1ebdba2978a22c13844d108318b271a9.png)\n\t\t- :nth-last-child\n\t\t\t- ä»åå¾€å‰æ•°\n\t\t- :first-child :last-child\n\t\t\t- åˆ†åˆ«è¡¨ç¤ºç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ \n\t\t- :only-child\n\t\t\t- æŒ‰å­—é¢æ„æ€ç†è§£å³å¯ï¼Œé€‰ä¸­å”¯ä¸€ä¸€ä¸ªå­å…ƒç´ \n\t- é“¾æ¥ä¸è¡Œä¸ºä¼ªç±»é€‰æ‹©å™¨ï¼ˆé“¾æ¥ä¸è¡Œä¸ºæ˜¯ç¬¬ä¸€æ‰¹è®¾è®¡å‡ºæ¥çš„ä¼ªç±»ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ä¸€æ‰¹ï¼‰\n\t\t- :any-link\n\t\t\t- è¡¨ç¤ºä»»æ„çš„é“¾æ¥ï¼ŒåŒ…æ‹¬ aã€area å’Œ link æ ‡ç­¾éƒ½å¯èƒ½åŒ¹é…åˆ°è¿™ä¸ªä¼ªç±»\n\t\t- :link\n\t\t\t- è¡¨ç¤ºæœªè®¿é—®è¿‡çš„é“¾æ¥\n\t\t- :visited\n\t\t\t- è¡¨ç¤ºå·²ç»è®¿é—®è¿‡çš„é“¾æ¥\n\t\t- :hover\n\t\t\t- è¡¨ç¤ºé¼ æ ‡æ‚¬åœåœ¨ä¸Šçš„å…ƒç´ \n\t\t- :active\n\t\t\t- è¡¨ç¤ºç”¨æˆ·æ­£åœ¨æ¿€æ´»è¿™ä¸ªå…ƒç´ ï¼Œå¦‚ç”¨æˆ·æŒ‰ä¸‹æŒ‰é’®ï¼Œé¼ æ ‡è¿˜æœªæŠ¬èµ·æ—¶ï¼Œè¿™ä¸ªæŒ‰é’®å°±å¤„äºæ¿€æ´»çŠ¶æ€\n\t\t- :focus\n\t\t\t- è¡¨ç¤ºç„¦ç‚¹è½åœ¨è¿™ä¸ªå…ƒç´ ä¹‹ä¸Š\n\t\t- :target\n\t\t\t- ç”¨äºé€‰ä¸­æµè§ˆå™¨ URL çš„ hash éƒ¨åˆ†æ‰€æŒ‡ç¤ºçš„å…ƒç´ \n\n\t- é€»è¾‘ä¼ªç±»é€‰æ‹©å™¨\n\t\t- :not\n\t\t\t- ä½†ç›®å‰è¿˜æ²¡æœ‰çœ‹åˆ°æµè§ˆå™¨å®ç°å®ƒ\n\n\t- å…¶å®ƒä¼ªç±»é€‰æ‹©å™¨\n\t\t- å›½é™…åŒ–ï¼šç”¨äºå¤„ç†å›½é™…åŒ–å’Œå¤šè¯­è¨€é—®é¢˜ã€‚\n\t\t\t- dir\n\t\t\t- lang\n\t\t- éŸ³é¢‘ / è§†é¢‘ï¼šç”¨äºåŒºåˆ†éŸ³è§†é¢‘æ’­æ”¾çŠ¶æ€ã€‚\n\t\t\t- play\n\t\t\t- pause\n\t\t- æ—¶åºï¼šç”¨äºé…åˆè¯»å±è½¯ä»¶ç­‰æ—¶åºæ€§å®¢æˆ·ç«¯çš„ä¼ªç±»ã€‚\n\t\t\t- current\n\t\t\t- past\n\t\t\t- future\n\t\t- è¡¨æ ¼ï¼šç”¨äºå¤„ç† table çš„åˆ—çš„ä¼ªç±»ã€‚\n\t\t\t- nth-col\n\t\t\t- nth-last-col\n- ä¼ªå…ƒç´ é€‰æ‹©å™¨\n\t- ::first-line\n\t\t- è¡¨ç¤ºå…ƒç´ çš„ç¬¬ä¸€è¡Œ\n\t\t- first-line è‹¥æœ‰ float ï¼Œåˆ™ä¼šè„±ç¦»æ–‡æ¡£æµå‡ºå»ï¼Œç„¶ååˆé€‰ä¸­ç¬¬ä¸€è¡Œï¼Œåˆè„±ç¦»æ–‡æ¡£æµå‡ºå»å¾ªç¯äº†\n\t- ::first-letter\n\t\t- è¡¨ç¤ºå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­—æ¯\n\t\t- CSS æ ‡å‡†åªè¦æ±‚ ::first-line å’Œ ::first-letter å®ç°æœ‰é™çš„å‡ ä¸ª CSS å±æ€§ï¼Œéƒ½æ˜¯æ–‡æœ¬ç›¸å…³ï¼Œè¿™äº›å±æ€§æ˜¯ä¸‹é¢è¿™äº›\n\t\t\t- ![å®ç°æœ‰é™çš„å‡ ä¸ª CSS å±æ€§](https://static001.geekbang.org/resource/image/6e/48/6e050ee9f7a0b1657388271cceb0c548.png)\n\t- ::before\n\t\t- è¡¨ç¤ºåœ¨å…ƒç´ å†…å®¹ä¹‹å‰æ’å…¥ä¸€ä¸ªè™šæ‹Ÿçš„å…ƒç´ \n\t- ::after\n\t\t- åˆ™è¡¨ç¤ºåœ¨å…ƒç´ å†…å®¹ä¹‹åæ’å…¥\n\n\n### å¤åˆé€‰æ‹©å™¨\n- è¿ç»­å†™åœ¨ä¸€èµ·çš„ç®€å•é€‰æ‹©å™¨ï¼Œé’ˆå¯¹å…ƒç´ è‡ªèº«ç‰¹å¾é€‰æ‹©å•ä¸ªå…ƒç´ \n- &lt;ç®€å•é€‰æ‹©å™¨&gt;&lt;ç®€å•é€‰æ‹©å™¨&gt;&lt;ç®€å•é€‰æ‹©å™¨&gt;\n- \\* æˆ–è€… div å¿…é¡»å†™åœ¨æœ€å‰é¢\n\n### å¤æ‚é€‰æ‹©å™¨\n- ç”±â€œï¼ˆç©ºæ ¼ï¼‰â€â€œ >â€â€œ ~â€â€œ +â€â€œ ||â€ç­‰ç¬¦å·è¿æ¥çš„å¤åˆé€‰æ‹©å™¨ï¼Œæ ¹æ®çˆ¶å…ƒç´ æˆ–è€…å‰åºå…ƒç´ æ£€æŸ¥å•ä¸ªå…ƒç´ \n- &lt;å¤åˆé€‰æ‹©å™¨&gt;&lt;sp&gt;&lt;å¤åˆé€‰æ‹©å™¨&gt;\n\t- å­å­™\n\t- åä»£ï¼Œè¡¨ç¤ºé€‰ä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„åä»£èŠ‚ç‚¹\n- &lt;å¤åˆé€‰æ‹©å™¨&gt;\">\"&lt;å¤åˆé€‰æ‹©å™¨&gt;\n\t- å­é€‰æ‹©å™¨ï¼Œåªèƒ½é€‰æ‹©å­ä¸€çº§\n\t- å­ä»£ï¼Œè¡¨ç¤ºé€‰ä¸­ç¬¦åˆæ¡ä»¶çš„å­èŠ‚ç‚¹\n- &lt;å¤åˆé€‰æ‹©å™¨&gt;\"~\"&lt;å¤åˆé€‰æ‹©å™¨&gt;\n\t- sibling\n\t- åç»§ï¼Œè¡¨ç¤ºé€‰ä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„åç»§èŠ‚ç‚¹ï¼Œåç»§èŠ‚ç‚¹å³è·Ÿå½“å‰èŠ‚ç‚¹å…·æœ‰åŒä¸€ä¸ªçˆ¶å…ƒç´ ï¼Œå¹¶å‡ºç°åœ¨å®ƒä¹‹åçš„èŠ‚ç‚¹\n- &lt;å¤åˆé€‰æ‹©å™¨&gt;\"+\"&lt;å¤åˆé€‰æ‹©å™¨&gt;\n\t- sibling\n\t- ç›´æ¥åç»§ï¼Œè¡¨ç¤ºé€‰ä¸­ç¬¦åˆæ¡ä»¶çš„ç›´æ¥åç»§èŠ‚ç‚¹ï¼Œç›´æ¥åç»§èŠ‚ç‚¹å³ nextSlibling\n- &lt;å¤åˆé€‰æ‹©å™¨&gt;\"||\"&lt;å¤åˆé€‰æ‹©å™¨&gt;\n\t- selectors-4\n\t- table é‡Œé€‰ä¸­ä¸€åˆ—\n\t- åˆ—é€‰æ‹©å™¨ï¼Œè¡¨ç¤ºé€‰ä¸­å¯¹åº”åˆ—ä¸­ç¬¦åˆæ¡ä»¶çš„å•å…ƒæ ¼\n\t\n### é€‰æ‹©å™¨åˆ—è¡¨\n- ä»¥ comma åˆ†éš”çš„å¤æ‚é€‰æ‹©å™¨åºåˆ—ï¼Œè¡¨ç¤ºâ€œæˆ–â€çš„å…³ç³»\n\n## é€‰æ‹©å™¨ä¼˜å…ˆçº§\n- [å›¾è§£ css-specificity](http://www.standardista.com/css3/css-specificity/)\n- [w3 css-specificity](https://www.w3.org/TR/2018/WD-selectors-4-20181121/#specificity-rules)\n- [MDN css-specificity](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity)\n- ç»“è®ºï¼š**[ inline-element,    id,    class | pseudo | attr,    type ]\n:not ä¼ªç±»ä¸å‚ä¸è®¡ç®—**\n- exercise\n\t- div#a.b .c[id=x]\n\t\t- [0,1,3,1]\n\t- \\#a:not(#b)\n\t\t- [0,2,0,0]\n\t- *.a\n\t\t- [0,0,1,0]\n\t- div.a\n\t\t- [0,0,1,1]\n\n## ä¼˜åŒ– toy-browser CSS selector match\n- é¦–å…ˆæˆ‘ä»¬å¯ä»¥å…ˆè§‚å¯Ÿ\n\t- toy-browser æ˜¯æ ¹æ® space æ‹†åˆ†é€‰æ‹©å™¨çš„ã€‚é‚£ä¹ˆé€‰æ‹©å™¨æˆ‘ä»¬éœ€è¦å¤„ç†ç‰¹æ®Šæƒ…å†µåªæœ‰ \n\t\t- \\#id.cls1.cls2.cl3\n\t\t- .cls1\\#id.cls2\n\t\t- div.cls1.cls2\n\t\t- .cls1.cls2\n\t- ç±»å‹é€‰æ‹©å™¨æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼ˆä¸€å¯¹èµ·æ­¢æ ‡ç­¾ï¼Œä¸€ä¸ªç±»å‹ä¸Šåªèƒ½æœ‰ä¸€ä¸ªå”¯ä¸€ idï¼Œè¡¨ç¤ºä¸€ä¸ªå…ƒç´ ï¼‰\n\t- idé€‰æ‹©å™¨æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼ˆä¸€å¯¹èµ·æ­¢æ ‡ç­¾ï¼Œå³ä¸€ä¸ªç±»å‹ï¼Œè¡¨ç¤ºä¸€ä¸ªå…ƒç´ ï¼‰\n\t\t- å› ä¸ºæ²¡æœ‰æ ‡è¯†ç¬¦ï¼Œåªèƒ½å‡ºç°åœ¨å¼€å¤´\n\t\t- div.cls1.cls2\n\t\t- ä¸å¯èƒ½ä¸º\n\t\t\t- .cls1div.cls2\n\t- class é€‰æ‹©å™¨å¯ä»¥æœ‰å¤šä¸ª\n- æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç¬¬ä¸€æ­¥ï¼Œå…ˆå¤„ç† id é€‰æ‹©å™¨ + ç±»å‹é€‰æ‹©å™¨ç‰¹æ®Šæƒ…å†µ\n\t\n\t```javascript\n\tfunction match(element, selector) {\n\t  if (!selector || !element.attributes) \n\t    return false\n\t\n\t  let regId = /(#\\w+)+/g\n\t  let resId = selector.match(regId)\n\t  \n\t  if (resId && resId[0].charAt(0) == \"#\") { // idé€‰æ‹©å™¨æœ‰æ ‡è¯†ç¬¦#ï¼Œå› æ­¤å¯ä»¥å‡ºç°åœ¨ä»»æ„ä½ç½®ï¼Œéœ€è¦ç”¨æ­£åˆ™å»åŒ¹é…\n\t    const attr = element.attributes.filter(attr => attr.name === \"id\")[0]\n\t    if (attr && attr.value === resId[0].replace(\"#\", '')) {\n\t      return true\n\t    } else {\n\t      return false\n\t    }\n\t  } else if(selector.charAt(0) !== \"#\" && selector.charAt(0) !== \".\"){ // åªéœ€è¦åˆ¤æ–­é€‰æ‹©å™¨å¼€å¤´æ˜¯ä¸æ˜¯ é id é€‰æ‹©å™¨æ ‡è¯†ç¬¦ # æˆ–è€… class é€‰æ‹©å™¨æ ‡è¯†ç¬¦ .\n\t    if (element.tagName === selector) {\n\t      return true\n\t    } else {\n\t      return false\n\t    }\n\t  }\n\t}\n\n\t```\n- å¤„ç†å¤š class é€‰æ‹©å™¨æƒ…å†µ\n\n\t```javascript\n\n\tfunction match(element, selector) {\n\t\n     // some code ...\n\t\n\t  let regClass = /(\\.\\w+)+/g\n\t  let resClass = selector.match(regClass)\n\t\n     // some code ...\n     \n\t\n\t  if (resClass) {\n\t    let resClassArr = [] // style class selectoræ•°ç»„\n\t    for (let i = 0; i < resClass.length; i ++) { // å¤„ç† .cls1#id.cls2 åŒ¹é…å‡ºæ¥ [\".cls1\", \".cls2\"] æƒ…å†µ\n\t      let tempArr = resClass[i].split('.')\t      for (let j = 1; j < tempArr.length; j ++) { // ç´¢å¼•ä»1å¼€å§‹ï¼Œå› ä¸º [\"\", \"cls1\", \"cls2\"]\n\t        resClassArr.push(tempArr[j])\n\t      }\n\t    }\n\t    let classAttr = element.attributes.filter(attr => attr.name === \"class\")\n\t    let classAttrRes = []\n\t    // å…ƒç´  attr class æ•°ç»„ï¼ŒclassAttr:  [ { name: 'class', value: 'c2 c3' } ]\n\t    if (classAttr && classAttr[0]) {\n\t      classAttrRes = classAttr[0][\"value\"].split(\" \")\n\t    }\n\t    let tempFlag = null\n\t    for (let i = 0; i < resClassArr.length; i ++) {\n\t      tempFlag = false\n\t      let k = 0\n\t      for (; k < classAttrRes.length; k ++) {\n\t        if (classAttrRes[k] === resClassArr[i]) { // æ‹¿ style class selector ä¸ element class attribute è¿›è¡Œæ¯”è¾ƒ\n\t          tempFlag = true\n\t          break\n\t        }\n\t      }\n\t      if (!tempFlag && k === classAttrRes.length) { // å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ï¼Œå¹¶ä¸”åŒ¹é…åˆ°æœ€åä¸€ä½\n\t        return false;\n\t      }\n\t    }\n\t  }\n\t\n     // some code ...\n     \n\t  return true\n\t}\n\n\t```\n\t\n- æœ€åæˆ‘ä»¬åˆ«å¿˜äº†ä¿®æ”¹ specificity çš„è®¡ç®—é€»è¾‘\n\n\t```javascript\n\tfunction specificity(selector) {\n\t  const p = [0, 0, 0, 0]\n\t  const selectorParts = selector.split(\" \")\n\t  let regClass = /(\\.\\w+)+/g\n\t  let resClass = selector.match(regClass)\n\t  if (resClass && resClass.length) {\n\t    for (let i = 0; i < resClass.length; i ++) {\n\t      let tempArr = resClass[i].split('.')\n\t      for (let j = 1; j < tempArr.length; j ++) {\n\t        p[2] ++\n\t      }\n\t    }\n\t  }\n\t  for (let part of selectorParts) {\n\t\n\t    let regId = /(#\\w+)+/g\n\t    let resId = part.match(regId)\n\t    if (resId && resId[0].charAt(0) == \"#\") {\n\t      p[1] += 1\n\t    } else if (part.charAt(0) !== \"#\" && part.charAt(0) !== \".\"){\n\t      p[3] += 1\n\t    }\n\t  }\n\t  console.log('selector', selector)\n\t  console.log('p', p)\n\t  return p\n\t}\n\t```\n\t\n- æµ‹è¯•ç”¨ä¾‹ä¸€\n\t\n\t```html\n\t<html maaa=a >\n\t\t<head>\n\t\t  <style>\n\t\t\t#container{\n\t\t\t  width:500px;\n\t\t\t  height:300px;\n\t\t\t  display:flex;\n\t\t\t  background-color:rgb(255,255,255);\n\t\t\t}\n\t\t\t#container #myid{\n\t\t\t\twidth:200px;\n\t\t\t\theight:100px;\n\t\t\t\tbackground-color:rgb(255,0,0)\n\t\t\t}\n\t\t\t#container .c1{\n\t\t\t\tflex:1;\n\t\t\t\tbackground-color:rgb(0,255,0)\n\t\t\t}\n\t\t\t#container .c2#myid.c3{\n\t\t\t\twidth:200px;\n\t\t\t\theight:100px;\n\t\t\t\tbackground-color:rgb(0,0,255)\n\t\t\t}\n\t\t</style>\n\t\t</head>\n\t\t<body>\n\t\t  <div id=\"container\">\n\t\t    <div id=\"myid\" class=\"c2 c3\"></div>\n\t\t    <div class=\"c1\"></div>\n\t\t  </div>\n\t\t</body>\n    </html>\n    ```\n    - è¿è¡Œæˆªå›¾\n    \t- ![è¿è¡Œæˆªå›¾](http://p0.meituan.net/myvideodistribute/4d585e3777f3371a9fd976dce2698bc6163838.png)\n    - css specificity è®¡ç®—æˆªå›¾\n    \t- ![css specificity è®¡ç®—æˆªå›¾](http://p1.meituan.net/myvideodistribute/8566a8d6a4fcb229b6a1005946fd686647911.png)\n\n    \t\n- æµ‹è¯•ç”¨ä¾‹äºŒ\n\t\n\t```javascript\n\t<html maaa=a >\n\t\t<head>\n\t\t  <style>\n\t\t\t#container{\n\t\t\t  width:500px;\n\t\t\t  height:300px;\n\t\t\t  display:flex;\n\t\t\t  background-color:rgb(255,255,255);\n\t\t\t}\n\t\t\t#container #myid{\n\t\t\t\twidth:200px;\n\t\t\t\theight:100px;\n\t\t\t\tbackground-color:rgb(255,0,0)\n\t\t\t}\n\t\t\t#container .c1{\n\t\t\t\tflex:1;\n\t\t\t\tbackground-color:rgb(0,255,0)\n\t\t\t}\n\t\t\t#container.wrapper .c3.c2{\n\t\t\t\twidth:200px;\n\t\t\t\theight:100px;\n\t\t\t\tbackground-color:rgb(0,0,255)\n\t\t\t}\n\t\t</style>\n\t\t</head>\n\t\t<body>\n\t\t  <div id=\"container\" class=\"wrapper\">\n\t\t    <div id=\"myid\" class=\"c2 c3\"></div>\n\t\t    <div class=\"c1\"></div>\n\t\t  </div>\n\t\t</body>\n    </html>\n\t```\n\t- è¿è¡Œæˆªå›¾\n\t\t- ![è¿è¡Œæˆªå›¾](http://p0.meituan.net/myvideodistribute/c73ede6bb822726ff171e2b7dbaa5fdb156331.png)\n\t- css specificity è®¡ç®—æˆªå›¾\n\t\t- ![css specificity è®¡ç®—æˆªå›¾](http://p0.meituan.net/myvideodistribute/af1f074f1e418a539ce900efdfa3498a44257.png)\n\n\n\n## å†™åœ¨åé¢\n- [å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser)\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/CSS-é€‰æ‹©å™¨.md","raw":"---\ntitle: CSS-é€‰æ‹©å™¨\ndate: 2020-05-29 16:19:40\ntags: \n- CSS\ncategories:\n- CSS\ndescription:\n- CSS é€‰æ‹©å™¨\n\n\n---\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n## å†™åœ¨å‰é¢\n- CSS é€‰æ‹©å™¨ç›¸å…³çŸ¥è¯†\n- æœ¬æ¥è¿™ä¸ªå¾ˆæ—©å°±èƒ½å†™å®Œçš„ï¼Œå‘¨äº”å­¦äº†ä¸ªç©ºç¿»ï¼Œå‘¨å…­å»ä¸Šäº†ä¸ªèº«ä½“å¼€å‘åŸºç¡€è¯¾ï¼Œç„¶åå…¨èº«é…¸ç—›ï¼Œé…¸ç—›åˆ°èµ·åºŠéƒ½èµ·ä¸æ¥çš„é‚£ç§ï¼Œå°±æ‹–äº†ä¸¤å¤©\n- ä½†æˆ‘è‡³å°‘æ²¡æœ‰é¸½æ‰ å˜»å˜»å˜» ã€æ‰‹åŠ¨ç‹—å¤´\n\n<!-- more -->\n\n\n## é€‰æ‹©å™¨è¯­æ³•\n\n### ç®€å•é€‰æ‹©å™¨\n- ![ç®€å•é€‰æ‹©å™¨ç»“æ„å›¾](https://static001.geekbang.org/resource/image/4c/ce/4c9ac78870342dc802137ea9c848c0ce.png)\n- é’ˆå¯¹æŸä¸€ç‰¹å¾åˆ¤æ–­æ˜¯å¦é€‰ä¸­å…ƒç´ ã€‚\n- *\n- div svg|a\n\t- [SVG](http://www.w3.org/2000/svg)\n\n\t\t```html\n\t\t<!DOCTYPE html>\n\t\t<html>\n\t\t<head>\n\t\t  <meta charset=\"utf-8\">\n\t\t  <title>JS Bin</title>\n\t\t</head>\n\t\t<body>\n\t\t<svg width=\"100\" height=\"28\" viewBox=\"0 0 100 28\" version=\"1.1\"\n\t\t     xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n\t\t  <desc>Example link01 - a link on an ellipse\n\t\t  </desc>\n\t\t  <a xlink:href=\"http://www.w3.org\">\n\t\t    <text y=\"100%\">name</text>\n\t\t  </a>\n\t\t</svg>\n\t\t<br/>\n\t\t<a href=\"javascript:void 0;\">name</a>\n\t\t</body>\n\t\t</html>\n\t\t```\n\t\t```CSS\n\t\t@namespace svg url(http://www.w3.org/2000/svg);\n\t\t@namespace html url(http://www.w3.org/1999/xhtml);\n\t\tsvg|a {\n\t\t  stroke:blue;\n\t\t  stroke-width:1;\n\t\t}\n\t\t\n\t\thtml|a {\n\t\t  font-size:40px\n\t\t}\n\t\t```\n- .cls\n- \\#id\n- [attr=value]\n\t- [attr]\n\t\t- ç›´æ¥åœ¨æ–¹æ‹¬å·ä¸­æ”¾å…¥å±æ€§åï¼Œæ˜¯æ£€æŸ¥å…ƒç´ æ˜¯å¦å…·æœ‰è¿™ä¸ªå±æ€§ï¼Œåªè¦å…ƒç´ æœ‰è¿™ä¸ªå±æ€§ï¼Œä¸è®ºå±æ€§æ˜¯ä»€ä¹ˆå€¼ï¼Œéƒ½å¯ä»¥è¢«é€‰ä¸­\n\t\t- ![[attr]](http://p0.meituan.net/myvideodistribute/ee7f5620eec48d0a237b15ed61a83404257138.png)\n\t- [attr=val]\n\t\t- ç²¾ç¡®åŒ¹é…ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ å±æ€§çš„å€¼æ˜¯å¦æ˜¯ val\n\t\t- ![[attr=val]](http://p0.meituan.net/myvideodistribute/1adfecc2daa770b4192909740af66b1d259781.png)\n\t- [att~=val]\n\t\t- å¤šç§åŒ¹é…ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ çš„å€¼æ˜¯å¦æ˜¯è‹¥å¹²å€¼ä¹‹ä¸€ï¼Œè¿™é‡Œçš„ val ä¸æ˜¯ä¸€ä¸ªå•ä¸€çš„å€¼äº†ï¼Œå¯ä»¥æ˜¯ç”¨ç©ºæ ¼åˆ†éš”çš„ä¸€ä¸ªåºåˆ—\n\t\t- ![[att~=val]](http://p0.meituan.net/myvideodistribute/b61188491bb578e4f96ef97baa6b263c264908.png)\n\t- [att|=val]\n\t\t- å¼€å¤´åŒ¹é…ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ çš„å€¼æ˜¯å¦æ˜¯ä»¥ val å¼€å¤´ï¼Œå®ƒè·Ÿç²¾ç¡®åŒ¹é…çš„åŒºåˆ«æ˜¯å±æ€§åªè¦ä»¥ val å¼€å¤´å³å¯ï¼Œåé¢å†…å®¹ä¸ç®¡ï¼ˆçº¢åœˆåœˆå‡ºçš„æ˜¯ç”Ÿæ•ˆæ ·å¼ï¼‰\n\t\t- ![[att|=val]](http://p0.meituan.net/myvideodistribute/4f1459c9d673adf7ac337f06569ec688330483.png)\n\t\t\n- ä¼ªç±»é€‰æ‹©å™¨\n\t- æ ‘ç»“æ„å…³ç³»ä¼ªç±»é€‰æ‹©å™¨\n\t\t- :root\n\t\t\t- è¡¨ç¤ºæ ‘çš„æ ¹å…ƒç´ \n\t\t- :empty\n\t\t\t- è¡¨ç¤ºæ²¡æœ‰å­èŠ‚ç‚¹çš„å…ƒç´ \n\n\t\t\t\t```html\n\t\t\t\t<div class=\"box\"><!-- I will be lime. --></div>\n\t\t\t\t<div class=\"box\">I will be pink.</div>\n\t\t\t\t<div class=\"box\">\n\t\t\t\t\t<!-- I will be pink in older browsers because of the whitespace around this comment. -->\n\t\t\t\t</div>\n\t\t\t\t<div class=\"box\">\n\t\t\t\t\t<p><!-- I will be pink in all browsers because of the non-collapsible whitespace and elements around this comment. --></p>\n\t\t\t\t</div>\n\t\t\t\t```\n\t\t\t\t```css\n\t\t\t\t.box {\n\t\t\t\t\t  background: pink;\n\t\t\t\t\t  height: 80px;\n\t\t\t\t\t  width: 80px;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.box:empty {\n\t\t\t\t\t  background: lime;\n\t\t\t\t\t}\n\t\t\t\t```\n\t\t\t- ![:empty ä¼ªç±»è¿è¡Œç»“æœ]()\n\t\t- :nth-child å’Œ :nth-last-child\n\t\t\t- ![nth-child å’Œ :nth-last-child](https://static001.geekbang.org/resource/image/1e/a9/1ebdba2978a22c13844d108318b271a9.png)\n\t\t- :nth-last-child\n\t\t\t- ä»åå¾€å‰æ•°\n\t\t- :first-child :last-child\n\t\t\t- åˆ†åˆ«è¡¨ç¤ºç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ \n\t\t- :only-child\n\t\t\t- æŒ‰å­—é¢æ„æ€ç†è§£å³å¯ï¼Œé€‰ä¸­å”¯ä¸€ä¸€ä¸ªå­å…ƒç´ \n\t- é“¾æ¥ä¸è¡Œä¸ºä¼ªç±»é€‰æ‹©å™¨ï¼ˆé“¾æ¥ä¸è¡Œä¸ºæ˜¯ç¬¬ä¸€æ‰¹è®¾è®¡å‡ºæ¥çš„ä¼ªç±»ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ä¸€æ‰¹ï¼‰\n\t\t- :any-link\n\t\t\t- è¡¨ç¤ºä»»æ„çš„é“¾æ¥ï¼ŒåŒ…æ‹¬ aã€area å’Œ link æ ‡ç­¾éƒ½å¯èƒ½åŒ¹é…åˆ°è¿™ä¸ªä¼ªç±»\n\t\t- :link\n\t\t\t- è¡¨ç¤ºæœªè®¿é—®è¿‡çš„é“¾æ¥\n\t\t- :visited\n\t\t\t- è¡¨ç¤ºå·²ç»è®¿é—®è¿‡çš„é“¾æ¥\n\t\t- :hover\n\t\t\t- è¡¨ç¤ºé¼ æ ‡æ‚¬åœåœ¨ä¸Šçš„å…ƒç´ \n\t\t- :active\n\t\t\t- è¡¨ç¤ºç”¨æˆ·æ­£åœ¨æ¿€æ´»è¿™ä¸ªå…ƒç´ ï¼Œå¦‚ç”¨æˆ·æŒ‰ä¸‹æŒ‰é’®ï¼Œé¼ æ ‡è¿˜æœªæŠ¬èµ·æ—¶ï¼Œè¿™ä¸ªæŒ‰é’®å°±å¤„äºæ¿€æ´»çŠ¶æ€\n\t\t- :focus\n\t\t\t- è¡¨ç¤ºç„¦ç‚¹è½åœ¨è¿™ä¸ªå…ƒç´ ä¹‹ä¸Š\n\t\t- :target\n\t\t\t- ç”¨äºé€‰ä¸­æµè§ˆå™¨ URL çš„ hash éƒ¨åˆ†æ‰€æŒ‡ç¤ºçš„å…ƒç´ \n\n\t- é€»è¾‘ä¼ªç±»é€‰æ‹©å™¨\n\t\t- :not\n\t\t\t- ä½†ç›®å‰è¿˜æ²¡æœ‰çœ‹åˆ°æµè§ˆå™¨å®ç°å®ƒ\n\n\t- å…¶å®ƒä¼ªç±»é€‰æ‹©å™¨\n\t\t- å›½é™…åŒ–ï¼šç”¨äºå¤„ç†å›½é™…åŒ–å’Œå¤šè¯­è¨€é—®é¢˜ã€‚\n\t\t\t- dir\n\t\t\t- lang\n\t\t- éŸ³é¢‘ / è§†é¢‘ï¼šç”¨äºåŒºåˆ†éŸ³è§†é¢‘æ’­æ”¾çŠ¶æ€ã€‚\n\t\t\t- play\n\t\t\t- pause\n\t\t- æ—¶åºï¼šç”¨äºé…åˆè¯»å±è½¯ä»¶ç­‰æ—¶åºæ€§å®¢æˆ·ç«¯çš„ä¼ªç±»ã€‚\n\t\t\t- current\n\t\t\t- past\n\t\t\t- future\n\t\t- è¡¨æ ¼ï¼šç”¨äºå¤„ç† table çš„åˆ—çš„ä¼ªç±»ã€‚\n\t\t\t- nth-col\n\t\t\t- nth-last-col\n- ä¼ªå…ƒç´ é€‰æ‹©å™¨\n\t- ::first-line\n\t\t- è¡¨ç¤ºå…ƒç´ çš„ç¬¬ä¸€è¡Œ\n\t\t- first-line è‹¥æœ‰ float ï¼Œåˆ™ä¼šè„±ç¦»æ–‡æ¡£æµå‡ºå»ï¼Œç„¶ååˆé€‰ä¸­ç¬¬ä¸€è¡Œï¼Œåˆè„±ç¦»æ–‡æ¡£æµå‡ºå»å¾ªç¯äº†\n\t- ::first-letter\n\t\t- è¡¨ç¤ºå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­—æ¯\n\t\t- CSS æ ‡å‡†åªè¦æ±‚ ::first-line å’Œ ::first-letter å®ç°æœ‰é™çš„å‡ ä¸ª CSS å±æ€§ï¼Œéƒ½æ˜¯æ–‡æœ¬ç›¸å…³ï¼Œè¿™äº›å±æ€§æ˜¯ä¸‹é¢è¿™äº›\n\t\t\t- ![å®ç°æœ‰é™çš„å‡ ä¸ª CSS å±æ€§](https://static001.geekbang.org/resource/image/6e/48/6e050ee9f7a0b1657388271cceb0c548.png)\n\t- ::before\n\t\t- è¡¨ç¤ºåœ¨å…ƒç´ å†…å®¹ä¹‹å‰æ’å…¥ä¸€ä¸ªè™šæ‹Ÿçš„å…ƒç´ \n\t- ::after\n\t\t- åˆ™è¡¨ç¤ºåœ¨å…ƒç´ å†…å®¹ä¹‹åæ’å…¥\n\n\n### å¤åˆé€‰æ‹©å™¨\n- è¿ç»­å†™åœ¨ä¸€èµ·çš„ç®€å•é€‰æ‹©å™¨ï¼Œé’ˆå¯¹å…ƒç´ è‡ªèº«ç‰¹å¾é€‰æ‹©å•ä¸ªå…ƒç´ \n- &lt;ç®€å•é€‰æ‹©å™¨&gt;&lt;ç®€å•é€‰æ‹©å™¨&gt;&lt;ç®€å•é€‰æ‹©å™¨&gt;\n- \\* æˆ–è€… div å¿…é¡»å†™åœ¨æœ€å‰é¢\n\n### å¤æ‚é€‰æ‹©å™¨\n- ç”±â€œï¼ˆç©ºæ ¼ï¼‰â€â€œ >â€â€œ ~â€â€œ +â€â€œ ||â€ç­‰ç¬¦å·è¿æ¥çš„å¤åˆé€‰æ‹©å™¨ï¼Œæ ¹æ®çˆ¶å…ƒç´ æˆ–è€…å‰åºå…ƒç´ æ£€æŸ¥å•ä¸ªå…ƒç´ \n- &lt;å¤åˆé€‰æ‹©å™¨&gt;&lt;sp&gt;&lt;å¤åˆé€‰æ‹©å™¨&gt;\n\t- å­å­™\n\t- åä»£ï¼Œè¡¨ç¤ºé€‰ä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„åä»£èŠ‚ç‚¹\n- &lt;å¤åˆé€‰æ‹©å™¨&gt;\">\"&lt;å¤åˆé€‰æ‹©å™¨&gt;\n\t- å­é€‰æ‹©å™¨ï¼Œåªèƒ½é€‰æ‹©å­ä¸€çº§\n\t- å­ä»£ï¼Œè¡¨ç¤ºé€‰ä¸­ç¬¦åˆæ¡ä»¶çš„å­èŠ‚ç‚¹\n- &lt;å¤åˆé€‰æ‹©å™¨&gt;\"~\"&lt;å¤åˆé€‰æ‹©å™¨&gt;\n\t- sibling\n\t- åç»§ï¼Œè¡¨ç¤ºé€‰ä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„åç»§èŠ‚ç‚¹ï¼Œåç»§èŠ‚ç‚¹å³è·Ÿå½“å‰èŠ‚ç‚¹å…·æœ‰åŒä¸€ä¸ªçˆ¶å…ƒç´ ï¼Œå¹¶å‡ºç°åœ¨å®ƒä¹‹åçš„èŠ‚ç‚¹\n- &lt;å¤åˆé€‰æ‹©å™¨&gt;\"+\"&lt;å¤åˆé€‰æ‹©å™¨&gt;\n\t- sibling\n\t- ç›´æ¥åç»§ï¼Œè¡¨ç¤ºé€‰ä¸­ç¬¦åˆæ¡ä»¶çš„ç›´æ¥åç»§èŠ‚ç‚¹ï¼Œç›´æ¥åç»§èŠ‚ç‚¹å³ nextSlibling\n- &lt;å¤åˆé€‰æ‹©å™¨&gt;\"||\"&lt;å¤åˆé€‰æ‹©å™¨&gt;\n\t- selectors-4\n\t- table é‡Œé€‰ä¸­ä¸€åˆ—\n\t- åˆ—é€‰æ‹©å™¨ï¼Œè¡¨ç¤ºé€‰ä¸­å¯¹åº”åˆ—ä¸­ç¬¦åˆæ¡ä»¶çš„å•å…ƒæ ¼\n\t\n### é€‰æ‹©å™¨åˆ—è¡¨\n- ä»¥ comma åˆ†éš”çš„å¤æ‚é€‰æ‹©å™¨åºåˆ—ï¼Œè¡¨ç¤ºâ€œæˆ–â€çš„å…³ç³»\n\n## é€‰æ‹©å™¨ä¼˜å…ˆçº§\n- [å›¾è§£ css-specificity](http://www.standardista.com/css3/css-specificity/)\n- [w3 css-specificity](https://www.w3.org/TR/2018/WD-selectors-4-20181121/#specificity-rules)\n- [MDN css-specificity](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity)\n- ç»“è®ºï¼š**[ inline-element,    id,    class | pseudo | attr,    type ]\n:not ä¼ªç±»ä¸å‚ä¸è®¡ç®—**\n- exercise\n\t- div#a.b .c[id=x]\n\t\t- [0,1,3,1]\n\t- \\#a:not(#b)\n\t\t- [0,2,0,0]\n\t- *.a\n\t\t- [0,0,1,0]\n\t- div.a\n\t\t- [0,0,1,1]\n\n## ä¼˜åŒ– toy-browser CSS selector match\n- é¦–å…ˆæˆ‘ä»¬å¯ä»¥å…ˆè§‚å¯Ÿ\n\t- toy-browser æ˜¯æ ¹æ® space æ‹†åˆ†é€‰æ‹©å™¨çš„ã€‚é‚£ä¹ˆé€‰æ‹©å™¨æˆ‘ä»¬éœ€è¦å¤„ç†ç‰¹æ®Šæƒ…å†µåªæœ‰ \n\t\t- \\#id.cls1.cls2.cl3\n\t\t- .cls1\\#id.cls2\n\t\t- div.cls1.cls2\n\t\t- .cls1.cls2\n\t- ç±»å‹é€‰æ‹©å™¨æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼ˆä¸€å¯¹èµ·æ­¢æ ‡ç­¾ï¼Œä¸€ä¸ªç±»å‹ä¸Šåªèƒ½æœ‰ä¸€ä¸ªå”¯ä¸€ idï¼Œè¡¨ç¤ºä¸€ä¸ªå…ƒç´ ï¼‰\n\t- idé€‰æ‹©å™¨æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼ˆä¸€å¯¹èµ·æ­¢æ ‡ç­¾ï¼Œå³ä¸€ä¸ªç±»å‹ï¼Œè¡¨ç¤ºä¸€ä¸ªå…ƒç´ ï¼‰\n\t\t- å› ä¸ºæ²¡æœ‰æ ‡è¯†ç¬¦ï¼Œåªèƒ½å‡ºç°åœ¨å¼€å¤´\n\t\t- div.cls1.cls2\n\t\t- ä¸å¯èƒ½ä¸º\n\t\t\t- .cls1div.cls2\n\t- class é€‰æ‹©å™¨å¯ä»¥æœ‰å¤šä¸ª\n- æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç¬¬ä¸€æ­¥ï¼Œå…ˆå¤„ç† id é€‰æ‹©å™¨ + ç±»å‹é€‰æ‹©å™¨ç‰¹æ®Šæƒ…å†µ\n\t\n\t```javascript\n\tfunction match(element, selector) {\n\t  if (!selector || !element.attributes) \n\t    return false\n\t\n\t  let regId = /(#\\w+)+/g\n\t  let resId = selector.match(regId)\n\t  \n\t  if (resId && resId[0].charAt(0) == \"#\") { // idé€‰æ‹©å™¨æœ‰æ ‡è¯†ç¬¦#ï¼Œå› æ­¤å¯ä»¥å‡ºç°åœ¨ä»»æ„ä½ç½®ï¼Œéœ€è¦ç”¨æ­£åˆ™å»åŒ¹é…\n\t    const attr = element.attributes.filter(attr => attr.name === \"id\")[0]\n\t    if (attr && attr.value === resId[0].replace(\"#\", '')) {\n\t      return true\n\t    } else {\n\t      return false\n\t    }\n\t  } else if(selector.charAt(0) !== \"#\" && selector.charAt(0) !== \".\"){ // åªéœ€è¦åˆ¤æ–­é€‰æ‹©å™¨å¼€å¤´æ˜¯ä¸æ˜¯ é id é€‰æ‹©å™¨æ ‡è¯†ç¬¦ # æˆ–è€… class é€‰æ‹©å™¨æ ‡è¯†ç¬¦ .\n\t    if (element.tagName === selector) {\n\t      return true\n\t    } else {\n\t      return false\n\t    }\n\t  }\n\t}\n\n\t```\n- å¤„ç†å¤š class é€‰æ‹©å™¨æƒ…å†µ\n\n\t```javascript\n\n\tfunction match(element, selector) {\n\t\n     // some code ...\n\t\n\t  let regClass = /(\\.\\w+)+/g\n\t  let resClass = selector.match(regClass)\n\t\n     // some code ...\n     \n\t\n\t  if (resClass) {\n\t    let resClassArr = [] // style class selectoræ•°ç»„\n\t    for (let i = 0; i < resClass.length; i ++) { // å¤„ç† .cls1#id.cls2 åŒ¹é…å‡ºæ¥ [\".cls1\", \".cls2\"] æƒ…å†µ\n\t      let tempArr = resClass[i].split('.')\t      for (let j = 1; j < tempArr.length; j ++) { // ç´¢å¼•ä»1å¼€å§‹ï¼Œå› ä¸º [\"\", \"cls1\", \"cls2\"]\n\t        resClassArr.push(tempArr[j])\n\t      }\n\t    }\n\t    let classAttr = element.attributes.filter(attr => attr.name === \"class\")\n\t    let classAttrRes = []\n\t    // å…ƒç´  attr class æ•°ç»„ï¼ŒclassAttr:  [ { name: 'class', value: 'c2 c3' } ]\n\t    if (classAttr && classAttr[0]) {\n\t      classAttrRes = classAttr[0][\"value\"].split(\" \")\n\t    }\n\t    let tempFlag = null\n\t    for (let i = 0; i < resClassArr.length; i ++) {\n\t      tempFlag = false\n\t      let k = 0\n\t      for (; k < classAttrRes.length; k ++) {\n\t        if (classAttrRes[k] === resClassArr[i]) { // æ‹¿ style class selector ä¸ element class attribute è¿›è¡Œæ¯”è¾ƒ\n\t          tempFlag = true\n\t          break\n\t        }\n\t      }\n\t      if (!tempFlag && k === classAttrRes.length) { // å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ï¼Œå¹¶ä¸”åŒ¹é…åˆ°æœ€åä¸€ä½\n\t        return false;\n\t      }\n\t    }\n\t  }\n\t\n     // some code ...\n     \n\t  return true\n\t}\n\n\t```\n\t\n- æœ€åæˆ‘ä»¬åˆ«å¿˜äº†ä¿®æ”¹ specificity çš„è®¡ç®—é€»è¾‘\n\n\t```javascript\n\tfunction specificity(selector) {\n\t  const p = [0, 0, 0, 0]\n\t  const selectorParts = selector.split(\" \")\n\t  let regClass = /(\\.\\w+)+/g\n\t  let resClass = selector.match(regClass)\n\t  if (resClass && resClass.length) {\n\t    for (let i = 0; i < resClass.length; i ++) {\n\t      let tempArr = resClass[i].split('.')\n\t      for (let j = 1; j < tempArr.length; j ++) {\n\t        p[2] ++\n\t      }\n\t    }\n\t  }\n\t  for (let part of selectorParts) {\n\t\n\t    let regId = /(#\\w+)+/g\n\t    let resId = part.match(regId)\n\t    if (resId && resId[0].charAt(0) == \"#\") {\n\t      p[1] += 1\n\t    } else if (part.charAt(0) !== \"#\" && part.charAt(0) !== \".\"){\n\t      p[3] += 1\n\t    }\n\t  }\n\t  console.log('selector', selector)\n\t  console.log('p', p)\n\t  return p\n\t}\n\t```\n\t\n- æµ‹è¯•ç”¨ä¾‹ä¸€\n\t\n\t```html\n\t<html maaa=a >\n\t\t<head>\n\t\t  <style>\n\t\t\t#container{\n\t\t\t  width:500px;\n\t\t\t  height:300px;\n\t\t\t  display:flex;\n\t\t\t  background-color:rgb(255,255,255);\n\t\t\t}\n\t\t\t#container #myid{\n\t\t\t\twidth:200px;\n\t\t\t\theight:100px;\n\t\t\t\tbackground-color:rgb(255,0,0)\n\t\t\t}\n\t\t\t#container .c1{\n\t\t\t\tflex:1;\n\t\t\t\tbackground-color:rgb(0,255,0)\n\t\t\t}\n\t\t\t#container .c2#myid.c3{\n\t\t\t\twidth:200px;\n\t\t\t\theight:100px;\n\t\t\t\tbackground-color:rgb(0,0,255)\n\t\t\t}\n\t\t</style>\n\t\t</head>\n\t\t<body>\n\t\t  <div id=\"container\">\n\t\t    <div id=\"myid\" class=\"c2 c3\"></div>\n\t\t    <div class=\"c1\"></div>\n\t\t  </div>\n\t\t</body>\n    </html>\n    ```\n    - è¿è¡Œæˆªå›¾\n    \t- ![è¿è¡Œæˆªå›¾](http://p0.meituan.net/myvideodistribute/4d585e3777f3371a9fd976dce2698bc6163838.png)\n    - css specificity è®¡ç®—æˆªå›¾\n    \t- ![css specificity è®¡ç®—æˆªå›¾](http://p1.meituan.net/myvideodistribute/8566a8d6a4fcb229b6a1005946fd686647911.png)\n\n    \t\n- æµ‹è¯•ç”¨ä¾‹äºŒ\n\t\n\t```javascript\n\t<html maaa=a >\n\t\t<head>\n\t\t  <style>\n\t\t\t#container{\n\t\t\t  width:500px;\n\t\t\t  height:300px;\n\t\t\t  display:flex;\n\t\t\t  background-color:rgb(255,255,255);\n\t\t\t}\n\t\t\t#container #myid{\n\t\t\t\twidth:200px;\n\t\t\t\theight:100px;\n\t\t\t\tbackground-color:rgb(255,0,0)\n\t\t\t}\n\t\t\t#container .c1{\n\t\t\t\tflex:1;\n\t\t\t\tbackground-color:rgb(0,255,0)\n\t\t\t}\n\t\t\t#container.wrapper .c3.c2{\n\t\t\t\twidth:200px;\n\t\t\t\theight:100px;\n\t\t\t\tbackground-color:rgb(0,0,255)\n\t\t\t}\n\t\t</style>\n\t\t</head>\n\t\t<body>\n\t\t  <div id=\"container\" class=\"wrapper\">\n\t\t    <div id=\"myid\" class=\"c2 c3\"></div>\n\t\t    <div class=\"c1\"></div>\n\t\t  </div>\n\t\t</body>\n    </html>\n\t```\n\t- è¿è¡Œæˆªå›¾\n\t\t- ![è¿è¡Œæˆªå›¾](http://p0.meituan.net/myvideodistribute/c73ede6bb822726ff171e2b7dbaa5fdb156331.png)\n\t- css specificity è®¡ç®—æˆªå›¾\n\t\t- ![css specificity è®¡ç®—æˆªå›¾](http://p0.meituan.net/myvideodistribute/af1f074f1e418a539ce900efdfa3498a44257.png)\n\n\n\n## å†™åœ¨åé¢\n- [å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser)\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"CSS-é€‰æ‹©å™¨","published":1,"updated":"2020-10-27T15:21:11.260Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7h0006fw9k7g704mj8","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>CSS é€‰æ‹©å™¨ç›¸å…³çŸ¥è¯†</li>\n<li>æœ¬æ¥è¿™ä¸ªå¾ˆæ—©å°±èƒ½å†™å®Œçš„ï¼Œå‘¨äº”å­¦äº†ä¸ªç©ºç¿»ï¼Œå‘¨å…­å»ä¸Šäº†ä¸ªèº«ä½“å¼€å‘åŸºç¡€è¯¾ï¼Œç„¶åå…¨èº«é…¸ç—›ï¼Œé…¸ç—›åˆ°èµ·åºŠéƒ½èµ·ä¸æ¥çš„é‚£ç§ï¼Œå°±æ‹–äº†ä¸¤å¤©</li>\n<li>ä½†æˆ‘è‡³å°‘æ²¡æœ‰é¸½æ‰ å˜»å˜»å˜» ã€æ‰‹åŠ¨ç‹—å¤´</li>\n</ul>\n<a id=\"more\"></a>\n\n\n<h2 id=\"é€‰æ‹©å™¨è¯­æ³•\"><a href=\"#é€‰æ‹©å™¨è¯­æ³•\" class=\"headerlink\" title=\"é€‰æ‹©å™¨è¯­æ³•\"></a>é€‰æ‹©å™¨è¯­æ³•</h2><h3 id=\"ç®€å•é€‰æ‹©å™¨\"><a href=\"#ç®€å•é€‰æ‹©å™¨\" class=\"headerlink\" title=\"ç®€å•é€‰æ‹©å™¨\"></a>ç®€å•é€‰æ‹©å™¨</h3><ul>\n<li><p><img src=\"https://static001.geekbang.org/resource/image/4c/ce/4c9ac78870342dc802137ea9c848c0ce.png\" alt=\"ç®€å•é€‰æ‹©å™¨ç»“æ„å›¾\"></p>\n</li>\n<li><p>é’ˆå¯¹æŸä¸€ç‰¹å¾åˆ¤æ–­æ˜¯å¦é€‰ä¸­å…ƒç´ ã€‚</p>\n</li>\n<li><p>*</p>\n</li>\n<li><p>div svg|a</p>\n<ul>\n<li><p><a href=\"http://www.w3.org/2000/svg\" target=\"_blank\" rel=\"noopener\">SVG</a></p>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>JS Bin<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">svg</span> <span class=\"attr\">width</span>=<span class=\"string\">\"100\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"28\"</span> <span class=\"attr\">viewBox</span>=<span class=\"string\">\"0 0 100 28\"</span> <span class=\"attr\">version</span>=<span class=\"string\">\"1.1\"</span></span></span><br><span class=\"line\"><span class=\"tag\">     <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.w3.org/2000/svg\"</span> <span class=\"attr\">xmlns:xlink</span>=<span class=\"string\">\"http://www.w3.org/1999/xlink\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">desc</span>&gt;</span>Example link01 - a link on an ellipse</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">desc</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">xlink:href</span>=<span class=\"string\">\"http://www.w3.org\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">text</span> <span class=\"attr\">y</span>=<span class=\"string\">\"100%\"</span>&gt;</span>name<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"javascript:void 0;\"</span>&gt;</span>name<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@namespace</span> svg url(<span class=\"attribute\">http:</span>//www.w3.org/<span class=\"number\">2000</span>/svg);</span><br><span class=\"line\"><span class=\"keyword\">@namespace</span> html url(<span class=\"attribute\">http:</span>//www.w3.org/<span class=\"number\">1999</span>/xhtml);</span><br><span class=\"line\">svg|a &#123;</span><br><span class=\"line\">  <span class=\"selector-tag\">stroke</span><span class=\"selector-pseudo\">:blue</span>;</span><br><span class=\"line\">  <span class=\"selector-tag\">stroke-width</span><span class=\"selector-pseudo\">:1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">html|a &#123;</span><br><span class=\"line\">  <span class=\"selector-tag\">font-size</span><span class=\"selector-pseudo\">:40px</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>.cls</p>\n</li>\n<li><p>#id</p>\n</li>\n<li><p>[attr=value]</p>\n<ul>\n<li>[attr]<ul>\n<li>ç›´æ¥åœ¨æ–¹æ‹¬å·ä¸­æ”¾å…¥å±æ€§åï¼Œæ˜¯æ£€æŸ¥å…ƒç´ æ˜¯å¦å…·æœ‰è¿™ä¸ªå±æ€§ï¼Œåªè¦å…ƒç´ æœ‰è¿™ä¸ªå±æ€§ï¼Œä¸è®ºå±æ€§æ˜¯ä»€ä¹ˆå€¼ï¼Œéƒ½å¯ä»¥è¢«é€‰ä¸­</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/ee7f5620eec48d0a237b15ed61a83404257138.png\" alt=\"[attr]\"></li>\n</ul>\n</li>\n<li>[attr=val]<ul>\n<li>ç²¾ç¡®åŒ¹é…ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ å±æ€§çš„å€¼æ˜¯å¦æ˜¯ val</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/1adfecc2daa770b4192909740af66b1d259781.png\" alt=\"[attr=val]\"></li>\n</ul>\n</li>\n<li>[att~=val]<ul>\n<li>å¤šç§åŒ¹é…ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ çš„å€¼æ˜¯å¦æ˜¯è‹¥å¹²å€¼ä¹‹ä¸€ï¼Œè¿™é‡Œçš„ val ä¸æ˜¯ä¸€ä¸ªå•ä¸€çš„å€¼äº†ï¼Œå¯ä»¥æ˜¯ç”¨ç©ºæ ¼åˆ†éš”çš„ä¸€ä¸ªåºåˆ—</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/b61188491bb578e4f96ef97baa6b263c264908.png\" alt=\"[att~=val]\"></li>\n</ul>\n</li>\n<li>[att|=val]<ul>\n<li>å¼€å¤´åŒ¹é…ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ çš„å€¼æ˜¯å¦æ˜¯ä»¥ val å¼€å¤´ï¼Œå®ƒè·Ÿç²¾ç¡®åŒ¹é…çš„åŒºåˆ«æ˜¯å±æ€§åªè¦ä»¥ val å¼€å¤´å³å¯ï¼Œåé¢å†…å®¹ä¸ç®¡ï¼ˆçº¢åœˆåœˆå‡ºçš„æ˜¯ç”Ÿæ•ˆæ ·å¼ï¼‰</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/4f1459c9d673adf7ac337f06569ec688330483.png\" alt=\"[att|=val]\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ä¼ªç±»é€‰æ‹©å™¨</p>\n<ul>\n<li><p>æ ‘ç»“æ„å…³ç³»ä¼ªç±»é€‰æ‹©å™¨</p>\n<ul>\n<li><p>:root</p>\n<ul>\n<li>è¡¨ç¤ºæ ‘çš„æ ¹å…ƒç´ </li>\n</ul>\n</li>\n<li><p>:empty</p>\n<ul>\n<li><p>è¡¨ç¤ºæ²¡æœ‰å­èŠ‚ç‚¹çš„å…ƒç´ </p>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box\"</span>&gt;</span><span class=\"comment\">&lt;!-- I will be lime. --&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box\"</span>&gt;</span>I will be pink.<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- I will be pink in older browsers because of the whitespace around this comment. --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"comment\">&lt;!-- I will be pink in all browsers because of the non-collapsible whitespace and elements around this comment. --&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">\t  <span class=\"attribute\">background</span>: pink;</span><br><span class=\"line\">\t  <span class=\"attribute\">height</span>: <span class=\"number\">80px</span>;</span><br><span class=\"line\">\t  <span class=\"attribute\">width</span>: <span class=\"number\">80px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"selector-class\">.box</span><span class=\"selector-pseudo\">:empty</span> &#123;</span><br><span class=\"line\">\t  <span class=\"attribute\">background</span>: lime;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p><img src=\"\" alt=\":empty ä¼ªç±»è¿è¡Œç»“æœ\"></p>\n</li>\n</ul>\n</li>\n<li><p>:nth-child å’Œ :nth-last-child</p>\n<ul>\n<li><img src=\"https://static001.geekbang.org/resource/image/1e/a9/1ebdba2978a22c13844d108318b271a9.png\" alt=\"nth-child å’Œ :nth-last-child\"></li>\n</ul>\n</li>\n<li><p>:nth-last-child</p>\n<ul>\n<li>ä»åå¾€å‰æ•°</li>\n</ul>\n</li>\n<li><p>:first-child :last-child</p>\n<ul>\n<li>åˆ†åˆ«è¡¨ç¤ºç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ </li>\n</ul>\n</li>\n<li><p>:only-child</p>\n<ul>\n<li>æŒ‰å­—é¢æ„æ€ç†è§£å³å¯ï¼Œé€‰ä¸­å”¯ä¸€ä¸€ä¸ªå­å…ƒç´ </li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>é“¾æ¥ä¸è¡Œä¸ºä¼ªç±»é€‰æ‹©å™¨ï¼ˆé“¾æ¥ä¸è¡Œä¸ºæ˜¯ç¬¬ä¸€æ‰¹è®¾è®¡å‡ºæ¥çš„ä¼ªç±»ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ä¸€æ‰¹ï¼‰</p>\n<ul>\n<li>:any-link<ul>\n<li>è¡¨ç¤ºä»»æ„çš„é“¾æ¥ï¼ŒåŒ…æ‹¬ aã€area å’Œ link æ ‡ç­¾éƒ½å¯èƒ½åŒ¹é…åˆ°è¿™ä¸ªä¼ªç±»</li>\n</ul>\n</li>\n<li>:link<ul>\n<li>è¡¨ç¤ºæœªè®¿é—®è¿‡çš„é“¾æ¥</li>\n</ul>\n</li>\n<li>:visited<ul>\n<li>è¡¨ç¤ºå·²ç»è®¿é—®è¿‡çš„é“¾æ¥</li>\n</ul>\n</li>\n<li>:hover<ul>\n<li>è¡¨ç¤ºé¼ æ ‡æ‚¬åœåœ¨ä¸Šçš„å…ƒç´ </li>\n</ul>\n</li>\n<li>:active<ul>\n<li>è¡¨ç¤ºç”¨æˆ·æ­£åœ¨æ¿€æ´»è¿™ä¸ªå…ƒç´ ï¼Œå¦‚ç”¨æˆ·æŒ‰ä¸‹æŒ‰é’®ï¼Œé¼ æ ‡è¿˜æœªæŠ¬èµ·æ—¶ï¼Œè¿™ä¸ªæŒ‰é’®å°±å¤„äºæ¿€æ´»çŠ¶æ€</li>\n</ul>\n</li>\n<li>:focus<ul>\n<li>è¡¨ç¤ºç„¦ç‚¹è½åœ¨è¿™ä¸ªå…ƒç´ ä¹‹ä¸Š</li>\n</ul>\n</li>\n<li>:target<ul>\n<li>ç”¨äºé€‰ä¸­æµè§ˆå™¨ URL çš„ hash éƒ¨åˆ†æ‰€æŒ‡ç¤ºçš„å…ƒç´ </li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>é€»è¾‘ä¼ªç±»é€‰æ‹©å™¨</p>\n<ul>\n<li>:not<ul>\n<li>ä½†ç›®å‰è¿˜æ²¡æœ‰çœ‹åˆ°æµè§ˆå™¨å®ç°å®ƒ</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å…¶å®ƒä¼ªç±»é€‰æ‹©å™¨</p>\n<ul>\n<li>å›½é™…åŒ–ï¼šç”¨äºå¤„ç†å›½é™…åŒ–å’Œå¤šè¯­è¨€é—®é¢˜ã€‚<ul>\n<li>dir</li>\n<li>lang</li>\n</ul>\n</li>\n<li>éŸ³é¢‘ / è§†é¢‘ï¼šç”¨äºåŒºåˆ†éŸ³è§†é¢‘æ’­æ”¾çŠ¶æ€ã€‚<ul>\n<li>play</li>\n<li>pause</li>\n</ul>\n</li>\n<li>æ—¶åºï¼šç”¨äºé…åˆè¯»å±è½¯ä»¶ç­‰æ—¶åºæ€§å®¢æˆ·ç«¯çš„ä¼ªç±»ã€‚<ul>\n<li>current</li>\n<li>past</li>\n<li>future</li>\n</ul>\n</li>\n<li>è¡¨æ ¼ï¼šç”¨äºå¤„ç† table çš„åˆ—çš„ä¼ªç±»ã€‚<ul>\n<li>nth-col</li>\n<li>nth-last-col</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ä¼ªå…ƒç´ é€‰æ‹©å™¨</p>\n<ul>\n<li>::first-line<ul>\n<li>è¡¨ç¤ºå…ƒç´ çš„ç¬¬ä¸€è¡Œ</li>\n<li>first-line è‹¥æœ‰ float ï¼Œåˆ™ä¼šè„±ç¦»æ–‡æ¡£æµå‡ºå»ï¼Œç„¶ååˆé€‰ä¸­ç¬¬ä¸€è¡Œï¼Œåˆè„±ç¦»æ–‡æ¡£æµå‡ºå»å¾ªç¯äº†</li>\n</ul>\n</li>\n<li>::first-letter<ul>\n<li>è¡¨ç¤ºå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­—æ¯</li>\n<li>CSS æ ‡å‡†åªè¦æ±‚ ::first-line å’Œ ::first-letter å®ç°æœ‰é™çš„å‡ ä¸ª CSS å±æ€§ï¼Œéƒ½æ˜¯æ–‡æœ¬ç›¸å…³ï¼Œè¿™äº›å±æ€§æ˜¯ä¸‹é¢è¿™äº›<ul>\n<li><img src=\"https://static001.geekbang.org/resource/image/6e/48/6e050ee9f7a0b1657388271cceb0c548.png\" alt=\"å®ç°æœ‰é™çš„å‡ ä¸ª CSS å±æ€§\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>::before<ul>\n<li>è¡¨ç¤ºåœ¨å…ƒç´ å†…å®¹ä¹‹å‰æ’å…¥ä¸€ä¸ªè™šæ‹Ÿçš„å…ƒç´ </li>\n</ul>\n</li>\n<li>::after<ul>\n<li>åˆ™è¡¨ç¤ºåœ¨å…ƒç´ å†…å®¹ä¹‹åæ’å…¥</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"å¤åˆé€‰æ‹©å™¨\"><a href=\"#å¤åˆé€‰æ‹©å™¨\" class=\"headerlink\" title=\"å¤åˆé€‰æ‹©å™¨\"></a>å¤åˆé€‰æ‹©å™¨</h3><ul>\n<li>è¿ç»­å†™åœ¨ä¸€èµ·çš„ç®€å•é€‰æ‹©å™¨ï¼Œé’ˆå¯¹å…ƒç´ è‡ªèº«ç‰¹å¾é€‰æ‹©å•ä¸ªå…ƒç´ </li>\n<li>&lt;ç®€å•é€‰æ‹©å™¨&gt;&lt;ç®€å•é€‰æ‹©å™¨&gt;&lt;ç®€å•é€‰æ‹©å™¨&gt;</li>\n<li>* æˆ–è€… div å¿…é¡»å†™åœ¨æœ€å‰é¢</li>\n</ul>\n<h3 id=\"å¤æ‚é€‰æ‹©å™¨\"><a href=\"#å¤æ‚é€‰æ‹©å™¨\" class=\"headerlink\" title=\"å¤æ‚é€‰æ‹©å™¨\"></a>å¤æ‚é€‰æ‹©å™¨</h3><ul>\n<li>ç”±â€œï¼ˆç©ºæ ¼ï¼‰â€â€œ &gt;â€â€œ ~â€â€œ +â€â€œ ||â€ç­‰ç¬¦å·è¿æ¥çš„å¤åˆé€‰æ‹©å™¨ï¼Œæ ¹æ®çˆ¶å…ƒç´ æˆ–è€…å‰åºå…ƒç´ æ£€æŸ¥å•ä¸ªå…ƒç´ </li>\n<li>&lt;å¤åˆé€‰æ‹©å™¨&gt;&lt;sp&gt;&lt;å¤åˆé€‰æ‹©å™¨&gt;<ul>\n<li>å­å­™</li>\n<li>åä»£ï¼Œè¡¨ç¤ºé€‰ä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„åä»£èŠ‚ç‚¹</li>\n</ul>\n</li>\n<li>&lt;å¤åˆé€‰æ‹©å™¨&gt;â€&gt;â€&lt;å¤åˆé€‰æ‹©å™¨&gt;<ul>\n<li>å­é€‰æ‹©å™¨ï¼Œåªèƒ½é€‰æ‹©å­ä¸€çº§</li>\n<li>å­ä»£ï¼Œè¡¨ç¤ºé€‰ä¸­ç¬¦åˆæ¡ä»¶çš„å­èŠ‚ç‚¹</li>\n</ul>\n</li>\n<li>&lt;å¤åˆé€‰æ‹©å™¨&gt;â€~â€&lt;å¤åˆé€‰æ‹©å™¨&gt;<ul>\n<li>sibling</li>\n<li>åç»§ï¼Œè¡¨ç¤ºé€‰ä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„åç»§èŠ‚ç‚¹ï¼Œåç»§èŠ‚ç‚¹å³è·Ÿå½“å‰èŠ‚ç‚¹å…·æœ‰åŒä¸€ä¸ªçˆ¶å…ƒç´ ï¼Œå¹¶å‡ºç°åœ¨å®ƒä¹‹åçš„èŠ‚ç‚¹</li>\n</ul>\n</li>\n<li>&lt;å¤åˆé€‰æ‹©å™¨&gt;â€+â€&lt;å¤åˆé€‰æ‹©å™¨&gt;<ul>\n<li>sibling</li>\n<li>ç›´æ¥åç»§ï¼Œè¡¨ç¤ºé€‰ä¸­ç¬¦åˆæ¡ä»¶çš„ç›´æ¥åç»§èŠ‚ç‚¹ï¼Œç›´æ¥åç»§èŠ‚ç‚¹å³ nextSlibling</li>\n</ul>\n</li>\n<li>&lt;å¤åˆé€‰æ‹©å™¨&gt;â€||â€&lt;å¤åˆé€‰æ‹©å™¨&gt;<ul>\n<li>selectors-4</li>\n<li>table é‡Œé€‰ä¸­ä¸€åˆ—</li>\n<li>åˆ—é€‰æ‹©å™¨ï¼Œè¡¨ç¤ºé€‰ä¸­å¯¹åº”åˆ—ä¸­ç¬¦åˆæ¡ä»¶çš„å•å…ƒæ ¼</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"é€‰æ‹©å™¨åˆ—è¡¨\"><a href=\"#é€‰æ‹©å™¨åˆ—è¡¨\" class=\"headerlink\" title=\"é€‰æ‹©å™¨åˆ—è¡¨\"></a>é€‰æ‹©å™¨åˆ—è¡¨</h3><ul>\n<li>ä»¥ comma åˆ†éš”çš„å¤æ‚é€‰æ‹©å™¨åºåˆ—ï¼Œè¡¨ç¤ºâ€œæˆ–â€çš„å…³ç³»</li>\n</ul>\n<h2 id=\"é€‰æ‹©å™¨ä¼˜å…ˆçº§\"><a href=\"#é€‰æ‹©å™¨ä¼˜å…ˆçº§\" class=\"headerlink\" title=\"é€‰æ‹©å™¨ä¼˜å…ˆçº§\"></a>é€‰æ‹©å™¨ä¼˜å…ˆçº§</h2><ul>\n<li><a href=\"http://www.standardista.com/css3/css-specificity/\" target=\"_blank\" rel=\"noopener\">å›¾è§£ css-specificity</a></li>\n<li><a href=\"https://www.w3.org/TR/2018/WD-selectors-4-20181121/#specificity-rules\" target=\"_blank\" rel=\"noopener\">w3 css-specificity</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity\" target=\"_blank\" rel=\"noopener\">MDN css-specificity</a></li>\n<li>ç»“è®ºï¼š<strong>[ inline-element,    id,    class | pseudo | attr,    type ]<br>:not ä¼ªç±»ä¸å‚ä¸è®¡ç®—</strong></li>\n<li>exercise<ul>\n<li>div#a.b .c[id=x]<ul>\n<li>[0,1,3,1]</li>\n</ul>\n</li>\n<li>#a:not(#b)<ul>\n<li>[0,2,0,0]</li>\n</ul>\n</li>\n<li>*.a<ul>\n<li>[0,0,1,0]</li>\n</ul>\n</li>\n<li>div.a<ul>\n<li>[0,0,1,1]</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ä¼˜åŒ–-toy-browser-CSS-selector-match\"><a href=\"#ä¼˜åŒ–-toy-browser-CSS-selector-match\" class=\"headerlink\" title=\"ä¼˜åŒ– toy-browser CSS selector match\"></a>ä¼˜åŒ– toy-browser CSS selector match</h2><ul>\n<li><p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥å…ˆè§‚å¯Ÿ</p>\n<ul>\n<li>toy-browser æ˜¯æ ¹æ® space æ‹†åˆ†é€‰æ‹©å™¨çš„ã€‚é‚£ä¹ˆé€‰æ‹©å™¨æˆ‘ä»¬éœ€è¦å¤„ç†ç‰¹æ®Šæƒ…å†µåªæœ‰ <ul>\n<li>#id.cls1.cls2.cl3</li>\n<li>.cls1#id.cls2</li>\n<li>div.cls1.cls2</li>\n<li>.cls1.cls2</li>\n</ul>\n</li>\n<li>ç±»å‹é€‰æ‹©å™¨æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼ˆä¸€å¯¹èµ·æ­¢æ ‡ç­¾ï¼Œä¸€ä¸ªç±»å‹ä¸Šåªèƒ½æœ‰ä¸€ä¸ªå”¯ä¸€ idï¼Œè¡¨ç¤ºä¸€ä¸ªå…ƒç´ ï¼‰</li>\n<li>idé€‰æ‹©å™¨æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼ˆä¸€å¯¹èµ·æ­¢æ ‡ç­¾ï¼Œå³ä¸€ä¸ªç±»å‹ï¼Œè¡¨ç¤ºä¸€ä¸ªå…ƒç´ ï¼‰<ul>\n<li>å› ä¸ºæ²¡æœ‰æ ‡è¯†ç¬¦ï¼Œåªèƒ½å‡ºç°åœ¨å¼€å¤´</li>\n<li>div.cls1.cls2</li>\n<li>ä¸å¯èƒ½ä¸º<ul>\n<li>.cls1div.cls2</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>class é€‰æ‹©å™¨å¯ä»¥æœ‰å¤šä¸ª</li>\n</ul>\n</li>\n<li><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç¬¬ä¸€æ­¥ï¼Œå…ˆå¤„ç† id é€‰æ‹©å™¨ + ç±»å‹é€‰æ‹©å™¨ç‰¹æ®Šæƒ…å†µ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">element, selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!selector || !element.attributes) </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> regId = <span class=\"regexp\">/(#\\w+)+/g</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resId = selector.match(regId)</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (resId &amp;&amp; resId[<span class=\"number\">0</span>].charAt(<span class=\"number\">0</span>) == <span class=\"string\">\"#\"</span>) &#123; <span class=\"comment\">// idé€‰æ‹©å™¨æœ‰æ ‡è¯†ç¬¦#ï¼Œå› æ­¤å¯ä»¥å‡ºç°åœ¨ä»»æ„ä½ç½®ï¼Œéœ€è¦ç”¨æ­£åˆ™å»åŒ¹é…</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> attr = element.attributes.filter(<span class=\"function\"><span class=\"params\">attr</span> =&gt;</span> attr.name === <span class=\"string\">\"id\"</span>)[<span class=\"number\">0</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (attr &amp;&amp; attr.value === resId[<span class=\"number\">0</span>].replace(<span class=\"string\">\"#\"</span>, <span class=\"string\">''</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(selector.charAt(<span class=\"number\">0</span>) !== <span class=\"string\">\"#\"</span> &amp;&amp; selector.charAt(<span class=\"number\">0</span>) !== <span class=\"string\">\".\"</span>)&#123; <span class=\"comment\">// åªéœ€è¦åˆ¤æ–­é€‰æ‹©å™¨å¼€å¤´æ˜¯ä¸æ˜¯ é id é€‰æ‹©å™¨æ ‡è¯†ç¬¦ # æˆ–è€… class é€‰æ‹©å™¨æ ‡è¯†ç¬¦ .</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (element.tagName === selector) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>å¤„ç†å¤š class é€‰æ‹©å™¨æƒ…å†µ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">element, selector</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// some code ...</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> regClass = <span class=\"regexp\">/(\\.\\w+)+/g</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resClass = selector.match(regClass)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// some code ...</span></span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (resClass) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> resClassArr = [] <span class=\"comment\">// style class selectoræ•°ç»„</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; resClass.length; i ++) &#123; <span class=\"comment\">// å¤„ç† .cls1#id.cls2 åŒ¹é…å‡ºæ¥ [\".cls1\", \".cls2\"] æƒ…å†µ</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> tempArr = resClass[i].split(<span class=\"string\">'.'</span>)\t      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">1</span>; j &lt; tempArr.length; j ++) &#123; <span class=\"comment\">// ç´¢å¼•ä»1å¼€å§‹ï¼Œå› ä¸º [\"\", \"cls1\", \"cls2\"]</span></span><br><span class=\"line\">        resClassArr.push(tempArr[j])</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> classAttr = element.attributes.filter(<span class=\"function\"><span class=\"params\">attr</span> =&gt;</span> attr.name === <span class=\"string\">\"class\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> classAttrRes = []</span><br><span class=\"line\">    <span class=\"comment\">// å…ƒç´  attr class æ•°ç»„ï¼ŒclassAttr:  [ &#123; name: 'class', value: 'c2 c3' &#125; ]</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (classAttr &amp;&amp; classAttr[<span class=\"number\">0</span>]) &#123;</span><br><span class=\"line\">      classAttrRes = classAttr[<span class=\"number\">0</span>][<span class=\"string\">\"value\"</span>].split(<span class=\"string\">\" \"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> tempFlag = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; resClassArr.length; i ++) &#123;</span><br><span class=\"line\">      tempFlag = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> k = <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"keyword\">for</span> (; k &lt; classAttrRes.length; k ++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (classAttrRes[k] === resClassArr[i]) &#123; <span class=\"comment\">// æ‹¿ style class selector ä¸ element class attribute è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class=\"line\">          tempFlag = <span class=\"literal\">true</span></span><br><span class=\"line\">          <span class=\"keyword\">break</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!tempFlag &amp;&amp; k === classAttrRes.length) &#123; <span class=\"comment\">// å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ï¼Œå¹¶ä¸”åŒ¹é…åˆ°æœ€åä¸€ä½</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// some code ...</span></span><br><span class=\"line\">    </span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>æœ€åæˆ‘ä»¬åˆ«å¿˜äº†ä¿®æ”¹ specificity çš„è®¡ç®—é€»è¾‘</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">specificity</span>(<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> selectorParts = selector.split(<span class=\"string\">\" \"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> regClass = <span class=\"regexp\">/(\\.\\w+)+/g</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resClass = selector.match(regClass)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (resClass &amp;&amp; resClass.length) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; resClass.length; i ++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> tempArr = resClass[i].split(<span class=\"string\">'.'</span>)</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">1</span>; j &lt; tempArr.length; j ++) &#123;</span><br><span class=\"line\">        p[<span class=\"number\">2</span>] ++</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> part <span class=\"keyword\">of</span> selectorParts) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> regId = <span class=\"regexp\">/(#\\w+)+/g</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> resId = part.match(regId)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (resId &amp;&amp; resId[<span class=\"number\">0</span>].charAt(<span class=\"number\">0</span>) == <span class=\"string\">\"#\"</span>) &#123;</span><br><span class=\"line\">      p[<span class=\"number\">1</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (part.charAt(<span class=\"number\">0</span>) !== <span class=\"string\">\"#\"</span> &amp;&amp; part.charAt(<span class=\"number\">0</span>) !== <span class=\"string\">\".\"</span>)&#123;</span><br><span class=\"line\">      p[<span class=\"number\">3</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'selector'</span>, selector)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'p'</span>, p)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>æµ‹è¯•ç”¨ä¾‹ä¸€</p>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">maaa</span>=<span class=\"string\">a</span> &gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-id\">#container</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t  <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t  <span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:300px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t  <span class=\"selector-tag\">display</span><span class=\"selector-pseudo\">:flex</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t  <span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(255</span>,255,255);</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-id\">#container</span> <span class=\"selector-id\">#myid</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(255</span>,0,0)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-id\">#container</span> <span class=\"selector-class\">.c1</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">flex</span><span class=\"selector-pseudo\">:1</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(0</span>,255,0)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-id\">#container</span> <span class=\"selector-class\">.c2</span><span class=\"selector-id\">#myid</span><span class=\"selector-class\">.c3</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(0</span>,0,255)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"container\"</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myid\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"c2 c3\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"c1\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/4d585e3777f3371a9fd976dce2698bc6163838.png\" alt=\"è¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n<li>css specificity è®¡ç®—æˆªå›¾<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/8566a8d6a4fcb229b6a1005946fd686647911.png\" alt=\"css specificity è®¡ç®—æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>æµ‹è¯•ç”¨ä¾‹äºŒ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html maaa=a &gt;</span><br><span class=\"line\">\t&lt;head&gt;</span><br><span class=\"line\">\t  &lt;style&gt;</span><br><span class=\"line\">\t\t#container&#123;</span><br><span class=\"line\">\t\t  width:<span class=\"number\">500</span>px;</span><br><span class=\"line\">\t\t  height:<span class=\"number\">300</span>px;</span><br><span class=\"line\">\t\t  display:flex;</span><br><span class=\"line\">\t\t  background-color:rgb(<span class=\"number\">255</span>,<span class=\"number\">255</span>,<span class=\"number\">255</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t#container #myid&#123;</span><br><span class=\"line\">\t\t\twidth:<span class=\"number\">200</span>px;</span><br><span class=\"line\">\t\t\theight:<span class=\"number\">100</span>px;</span><br><span class=\"line\">\t\t\tbackground-color:rgb(<span class=\"number\">255</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t#container .c1&#123;</span><br><span class=\"line\">\t\t\tflex:<span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\tbackground-color:rgb(<span class=\"number\">0</span>,<span class=\"number\">255</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t#container.wrapper .c3.c2&#123;</span><br><span class=\"line\">\t\t\twidth:<span class=\"number\">200</span>px;</span><br><span class=\"line\">\t\t\theight:<span class=\"number\">100</span>px;</span><br><span class=\"line\">\t\t\tbackground-color:rgb(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">255</span>)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&lt;<span class=\"regexp\">/style&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">\t&lt;/</span>head&gt;</span><br><span class=\"line\">\t&lt;body&gt;</span><br><span class=\"line\">\t  &lt;div id=<span class=\"string\">\"container\"</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"wrapper\"</span>&gt;</span><br><span class=\"line\">\t    &lt;div id=<span class=\"string\">\"myid\"</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"c2 c3\"</span>&gt;&lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">\t    &lt;div class=\"c1\"&gt;&lt;/</span>div&gt;</span><br><span class=\"line\">\t  &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">\t&lt;/</span>body&gt;</span><br><span class=\"line\">   &lt;<span class=\"regexp\">/html&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c73ede6bb822726ff171e2b7dbaa5fdb156331.png\" alt=\"è¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n<li>css specificity è®¡ç®—æˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/af1f074f1e418a539ce900efdfa3498a44257.png\" alt=\"css specificity è®¡ç®—æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>CSS é€‰æ‹©å™¨ç›¸å…³çŸ¥è¯†</li>\n<li>æœ¬æ¥è¿™ä¸ªå¾ˆæ—©å°±èƒ½å†™å®Œçš„ï¼Œå‘¨äº”å­¦äº†ä¸ªç©ºç¿»ï¼Œå‘¨å…­å»ä¸Šäº†ä¸ªèº«ä½“å¼€å‘åŸºç¡€è¯¾ï¼Œç„¶åå…¨èº«é…¸ç—›ï¼Œé…¸ç—›åˆ°èµ·åºŠéƒ½èµ·ä¸æ¥çš„é‚£ç§ï¼Œå°±æ‹–äº†ä¸¤å¤©</li>\n<li>ä½†æˆ‘è‡³å°‘æ²¡æœ‰é¸½æ‰ å˜»å˜»å˜» ã€æ‰‹åŠ¨ç‹—å¤´</li>\n</ul>","more":"<h2 id=\"é€‰æ‹©å™¨è¯­æ³•\"><a href=\"#é€‰æ‹©å™¨è¯­æ³•\" class=\"headerlink\" title=\"é€‰æ‹©å™¨è¯­æ³•\"></a>é€‰æ‹©å™¨è¯­æ³•</h2><h3 id=\"ç®€å•é€‰æ‹©å™¨\"><a href=\"#ç®€å•é€‰æ‹©å™¨\" class=\"headerlink\" title=\"ç®€å•é€‰æ‹©å™¨\"></a>ç®€å•é€‰æ‹©å™¨</h3><ul>\n<li><p><img src=\"https://static001.geekbang.org/resource/image/4c/ce/4c9ac78870342dc802137ea9c848c0ce.png\" alt=\"ç®€å•é€‰æ‹©å™¨ç»“æ„å›¾\"></p>\n</li>\n<li><p>é’ˆå¯¹æŸä¸€ç‰¹å¾åˆ¤æ–­æ˜¯å¦é€‰ä¸­å…ƒç´ ã€‚</p>\n</li>\n<li><p>*</p>\n</li>\n<li><p>div svg|a</p>\n<ul>\n<li><p><a href=\"http://www.w3.org/2000/svg\" target=\"_blank\" rel=\"noopener\">SVG</a></p>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>JS Bin<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">svg</span> <span class=\"attr\">width</span>=<span class=\"string\">\"100\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"28\"</span> <span class=\"attr\">viewBox</span>=<span class=\"string\">\"0 0 100 28\"</span> <span class=\"attr\">version</span>=<span class=\"string\">\"1.1\"</span></span></span><br><span class=\"line\"><span class=\"tag\">     <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.w3.org/2000/svg\"</span> <span class=\"attr\">xmlns:xlink</span>=<span class=\"string\">\"http://www.w3.org/1999/xlink\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">desc</span>&gt;</span>Example link01 - a link on an ellipse</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">desc</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">xlink:href</span>=<span class=\"string\">\"http://www.w3.org\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">text</span> <span class=\"attr\">y</span>=<span class=\"string\">\"100%\"</span>&gt;</span>name<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"javascript:void 0;\"</span>&gt;</span>name<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@namespace</span> svg url(<span class=\"attribute\">http:</span>//www.w3.org/<span class=\"number\">2000</span>/svg);</span><br><span class=\"line\"><span class=\"keyword\">@namespace</span> html url(<span class=\"attribute\">http:</span>//www.w3.org/<span class=\"number\">1999</span>/xhtml);</span><br><span class=\"line\">svg|a &#123;</span><br><span class=\"line\">  <span class=\"selector-tag\">stroke</span><span class=\"selector-pseudo\">:blue</span>;</span><br><span class=\"line\">  <span class=\"selector-tag\">stroke-width</span><span class=\"selector-pseudo\">:1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">html|a &#123;</span><br><span class=\"line\">  <span class=\"selector-tag\">font-size</span><span class=\"selector-pseudo\">:40px</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>.cls</p>\n</li>\n<li><p>#id</p>\n</li>\n<li><p>[attr=value]</p>\n<ul>\n<li>[attr]<ul>\n<li>ç›´æ¥åœ¨æ–¹æ‹¬å·ä¸­æ”¾å…¥å±æ€§åï¼Œæ˜¯æ£€æŸ¥å…ƒç´ æ˜¯å¦å…·æœ‰è¿™ä¸ªå±æ€§ï¼Œåªè¦å…ƒç´ æœ‰è¿™ä¸ªå±æ€§ï¼Œä¸è®ºå±æ€§æ˜¯ä»€ä¹ˆå€¼ï¼Œéƒ½å¯ä»¥è¢«é€‰ä¸­</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/ee7f5620eec48d0a237b15ed61a83404257138.png\" alt=\"[attr]\"></li>\n</ul>\n</li>\n<li>[attr=val]<ul>\n<li>ç²¾ç¡®åŒ¹é…ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ å±æ€§çš„å€¼æ˜¯å¦æ˜¯ val</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/1adfecc2daa770b4192909740af66b1d259781.png\" alt=\"[attr=val]\"></li>\n</ul>\n</li>\n<li>[att~=val]<ul>\n<li>å¤šç§åŒ¹é…ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ çš„å€¼æ˜¯å¦æ˜¯è‹¥å¹²å€¼ä¹‹ä¸€ï¼Œè¿™é‡Œçš„ val ä¸æ˜¯ä¸€ä¸ªå•ä¸€çš„å€¼äº†ï¼Œå¯ä»¥æ˜¯ç”¨ç©ºæ ¼åˆ†éš”çš„ä¸€ä¸ªåºåˆ—</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/b61188491bb578e4f96ef97baa6b263c264908.png\" alt=\"[att~=val]\"></li>\n</ul>\n</li>\n<li>[att|=val]<ul>\n<li>å¼€å¤´åŒ¹é…ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ çš„å€¼æ˜¯å¦æ˜¯ä»¥ val å¼€å¤´ï¼Œå®ƒè·Ÿç²¾ç¡®åŒ¹é…çš„åŒºåˆ«æ˜¯å±æ€§åªè¦ä»¥ val å¼€å¤´å³å¯ï¼Œåé¢å†…å®¹ä¸ç®¡ï¼ˆçº¢åœˆåœˆå‡ºçš„æ˜¯ç”Ÿæ•ˆæ ·å¼ï¼‰</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/4f1459c9d673adf7ac337f06569ec688330483.png\" alt=\"[att|=val]\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ä¼ªç±»é€‰æ‹©å™¨</p>\n<ul>\n<li><p>æ ‘ç»“æ„å…³ç³»ä¼ªç±»é€‰æ‹©å™¨</p>\n<ul>\n<li><p>:root</p>\n<ul>\n<li>è¡¨ç¤ºæ ‘çš„æ ¹å…ƒç´ </li>\n</ul>\n</li>\n<li><p>:empty</p>\n<ul>\n<li><p>è¡¨ç¤ºæ²¡æœ‰å­èŠ‚ç‚¹çš„å…ƒç´ </p>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box\"</span>&gt;</span><span class=\"comment\">&lt;!-- I will be lime. --&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box\"</span>&gt;</span>I will be pink.<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- I will be pink in older browsers because of the whitespace around this comment. --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"box\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"comment\">&lt;!-- I will be pink in all browsers because of the non-collapsible whitespace and elements around this comment. --&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">\t  <span class=\"attribute\">background</span>: pink;</span><br><span class=\"line\">\t  <span class=\"attribute\">height</span>: <span class=\"number\">80px</span>;</span><br><span class=\"line\">\t  <span class=\"attribute\">width</span>: <span class=\"number\">80px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"selector-class\">.box</span><span class=\"selector-pseudo\">:empty</span> &#123;</span><br><span class=\"line\">\t  <span class=\"attribute\">background</span>: lime;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p><img src=\"\" alt=\":empty ä¼ªç±»è¿è¡Œç»“æœ\"></p>\n</li>\n</ul>\n</li>\n<li><p>:nth-child å’Œ :nth-last-child</p>\n<ul>\n<li><img src=\"https://static001.geekbang.org/resource/image/1e/a9/1ebdba2978a22c13844d108318b271a9.png\" alt=\"nth-child å’Œ :nth-last-child\"></li>\n</ul>\n</li>\n<li><p>:nth-last-child</p>\n<ul>\n<li>ä»åå¾€å‰æ•°</li>\n</ul>\n</li>\n<li><p>:first-child :last-child</p>\n<ul>\n<li>åˆ†åˆ«è¡¨ç¤ºç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ </li>\n</ul>\n</li>\n<li><p>:only-child</p>\n<ul>\n<li>æŒ‰å­—é¢æ„æ€ç†è§£å³å¯ï¼Œé€‰ä¸­å”¯ä¸€ä¸€ä¸ªå­å…ƒç´ </li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>é“¾æ¥ä¸è¡Œä¸ºä¼ªç±»é€‰æ‹©å™¨ï¼ˆé“¾æ¥ä¸è¡Œä¸ºæ˜¯ç¬¬ä¸€æ‰¹è®¾è®¡å‡ºæ¥çš„ä¼ªç±»ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ä¸€æ‰¹ï¼‰</p>\n<ul>\n<li>:any-link<ul>\n<li>è¡¨ç¤ºä»»æ„çš„é“¾æ¥ï¼ŒåŒ…æ‹¬ aã€area å’Œ link æ ‡ç­¾éƒ½å¯èƒ½åŒ¹é…åˆ°è¿™ä¸ªä¼ªç±»</li>\n</ul>\n</li>\n<li>:link<ul>\n<li>è¡¨ç¤ºæœªè®¿é—®è¿‡çš„é“¾æ¥</li>\n</ul>\n</li>\n<li>:visited<ul>\n<li>è¡¨ç¤ºå·²ç»è®¿é—®è¿‡çš„é“¾æ¥</li>\n</ul>\n</li>\n<li>:hover<ul>\n<li>è¡¨ç¤ºé¼ æ ‡æ‚¬åœåœ¨ä¸Šçš„å…ƒç´ </li>\n</ul>\n</li>\n<li>:active<ul>\n<li>è¡¨ç¤ºç”¨æˆ·æ­£åœ¨æ¿€æ´»è¿™ä¸ªå…ƒç´ ï¼Œå¦‚ç”¨æˆ·æŒ‰ä¸‹æŒ‰é’®ï¼Œé¼ æ ‡è¿˜æœªæŠ¬èµ·æ—¶ï¼Œè¿™ä¸ªæŒ‰é’®å°±å¤„äºæ¿€æ´»çŠ¶æ€</li>\n</ul>\n</li>\n<li>:focus<ul>\n<li>è¡¨ç¤ºç„¦ç‚¹è½åœ¨è¿™ä¸ªå…ƒç´ ä¹‹ä¸Š</li>\n</ul>\n</li>\n<li>:target<ul>\n<li>ç”¨äºé€‰ä¸­æµè§ˆå™¨ URL çš„ hash éƒ¨åˆ†æ‰€æŒ‡ç¤ºçš„å…ƒç´ </li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>é€»è¾‘ä¼ªç±»é€‰æ‹©å™¨</p>\n<ul>\n<li>:not<ul>\n<li>ä½†ç›®å‰è¿˜æ²¡æœ‰çœ‹åˆ°æµè§ˆå™¨å®ç°å®ƒ</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å…¶å®ƒä¼ªç±»é€‰æ‹©å™¨</p>\n<ul>\n<li>å›½é™…åŒ–ï¼šç”¨äºå¤„ç†å›½é™…åŒ–å’Œå¤šè¯­è¨€é—®é¢˜ã€‚<ul>\n<li>dir</li>\n<li>lang</li>\n</ul>\n</li>\n<li>éŸ³é¢‘ / è§†é¢‘ï¼šç”¨äºåŒºåˆ†éŸ³è§†é¢‘æ’­æ”¾çŠ¶æ€ã€‚<ul>\n<li>play</li>\n<li>pause</li>\n</ul>\n</li>\n<li>æ—¶åºï¼šç”¨äºé…åˆè¯»å±è½¯ä»¶ç­‰æ—¶åºæ€§å®¢æˆ·ç«¯çš„ä¼ªç±»ã€‚<ul>\n<li>current</li>\n<li>past</li>\n<li>future</li>\n</ul>\n</li>\n<li>è¡¨æ ¼ï¼šç”¨äºå¤„ç† table çš„åˆ—çš„ä¼ªç±»ã€‚<ul>\n<li>nth-col</li>\n<li>nth-last-col</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ä¼ªå…ƒç´ é€‰æ‹©å™¨</p>\n<ul>\n<li>::first-line<ul>\n<li>è¡¨ç¤ºå…ƒç´ çš„ç¬¬ä¸€è¡Œ</li>\n<li>first-line è‹¥æœ‰ float ï¼Œåˆ™ä¼šè„±ç¦»æ–‡æ¡£æµå‡ºå»ï¼Œç„¶ååˆé€‰ä¸­ç¬¬ä¸€è¡Œï¼Œåˆè„±ç¦»æ–‡æ¡£æµå‡ºå»å¾ªç¯äº†</li>\n</ul>\n</li>\n<li>::first-letter<ul>\n<li>è¡¨ç¤ºå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­—æ¯</li>\n<li>CSS æ ‡å‡†åªè¦æ±‚ ::first-line å’Œ ::first-letter å®ç°æœ‰é™çš„å‡ ä¸ª CSS å±æ€§ï¼Œéƒ½æ˜¯æ–‡æœ¬ç›¸å…³ï¼Œè¿™äº›å±æ€§æ˜¯ä¸‹é¢è¿™äº›<ul>\n<li><img src=\"https://static001.geekbang.org/resource/image/6e/48/6e050ee9f7a0b1657388271cceb0c548.png\" alt=\"å®ç°æœ‰é™çš„å‡ ä¸ª CSS å±æ€§\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>::before<ul>\n<li>è¡¨ç¤ºåœ¨å…ƒç´ å†…å®¹ä¹‹å‰æ’å…¥ä¸€ä¸ªè™šæ‹Ÿçš„å…ƒç´ </li>\n</ul>\n</li>\n<li>::after<ul>\n<li>åˆ™è¡¨ç¤ºåœ¨å…ƒç´ å†…å®¹ä¹‹åæ’å…¥</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"å¤åˆé€‰æ‹©å™¨\"><a href=\"#å¤åˆé€‰æ‹©å™¨\" class=\"headerlink\" title=\"å¤åˆé€‰æ‹©å™¨\"></a>å¤åˆé€‰æ‹©å™¨</h3><ul>\n<li>è¿ç»­å†™åœ¨ä¸€èµ·çš„ç®€å•é€‰æ‹©å™¨ï¼Œé’ˆå¯¹å…ƒç´ è‡ªèº«ç‰¹å¾é€‰æ‹©å•ä¸ªå…ƒç´ </li>\n<li>&lt;ç®€å•é€‰æ‹©å™¨&gt;&lt;ç®€å•é€‰æ‹©å™¨&gt;&lt;ç®€å•é€‰æ‹©å™¨&gt;</li>\n<li>* æˆ–è€… div å¿…é¡»å†™åœ¨æœ€å‰é¢</li>\n</ul>\n<h3 id=\"å¤æ‚é€‰æ‹©å™¨\"><a href=\"#å¤æ‚é€‰æ‹©å™¨\" class=\"headerlink\" title=\"å¤æ‚é€‰æ‹©å™¨\"></a>å¤æ‚é€‰æ‹©å™¨</h3><ul>\n<li>ç”±â€œï¼ˆç©ºæ ¼ï¼‰â€â€œ &gt;â€â€œ ~â€â€œ +â€â€œ ||â€ç­‰ç¬¦å·è¿æ¥çš„å¤åˆé€‰æ‹©å™¨ï¼Œæ ¹æ®çˆ¶å…ƒç´ æˆ–è€…å‰åºå…ƒç´ æ£€æŸ¥å•ä¸ªå…ƒç´ </li>\n<li>&lt;å¤åˆé€‰æ‹©å™¨&gt;&lt;sp&gt;&lt;å¤åˆé€‰æ‹©å™¨&gt;<ul>\n<li>å­å­™</li>\n<li>åä»£ï¼Œè¡¨ç¤ºé€‰ä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„åä»£èŠ‚ç‚¹</li>\n</ul>\n</li>\n<li>&lt;å¤åˆé€‰æ‹©å™¨&gt;â€&gt;â€&lt;å¤åˆé€‰æ‹©å™¨&gt;<ul>\n<li>å­é€‰æ‹©å™¨ï¼Œåªèƒ½é€‰æ‹©å­ä¸€çº§</li>\n<li>å­ä»£ï¼Œè¡¨ç¤ºé€‰ä¸­ç¬¦åˆæ¡ä»¶çš„å­èŠ‚ç‚¹</li>\n</ul>\n</li>\n<li>&lt;å¤åˆé€‰æ‹©å™¨&gt;â€~â€&lt;å¤åˆé€‰æ‹©å™¨&gt;<ul>\n<li>sibling</li>\n<li>åç»§ï¼Œè¡¨ç¤ºé€‰ä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„åç»§èŠ‚ç‚¹ï¼Œåç»§èŠ‚ç‚¹å³è·Ÿå½“å‰èŠ‚ç‚¹å…·æœ‰åŒä¸€ä¸ªçˆ¶å…ƒç´ ï¼Œå¹¶å‡ºç°åœ¨å®ƒä¹‹åçš„èŠ‚ç‚¹</li>\n</ul>\n</li>\n<li>&lt;å¤åˆé€‰æ‹©å™¨&gt;â€+â€&lt;å¤åˆé€‰æ‹©å™¨&gt;<ul>\n<li>sibling</li>\n<li>ç›´æ¥åç»§ï¼Œè¡¨ç¤ºé€‰ä¸­ç¬¦åˆæ¡ä»¶çš„ç›´æ¥åç»§èŠ‚ç‚¹ï¼Œç›´æ¥åç»§èŠ‚ç‚¹å³ nextSlibling</li>\n</ul>\n</li>\n<li>&lt;å¤åˆé€‰æ‹©å™¨&gt;â€||â€&lt;å¤åˆé€‰æ‹©å™¨&gt;<ul>\n<li>selectors-4</li>\n<li>table é‡Œé€‰ä¸­ä¸€åˆ—</li>\n<li>åˆ—é€‰æ‹©å™¨ï¼Œè¡¨ç¤ºé€‰ä¸­å¯¹åº”åˆ—ä¸­ç¬¦åˆæ¡ä»¶çš„å•å…ƒæ ¼</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"é€‰æ‹©å™¨åˆ—è¡¨\"><a href=\"#é€‰æ‹©å™¨åˆ—è¡¨\" class=\"headerlink\" title=\"é€‰æ‹©å™¨åˆ—è¡¨\"></a>é€‰æ‹©å™¨åˆ—è¡¨</h3><ul>\n<li>ä»¥ comma åˆ†éš”çš„å¤æ‚é€‰æ‹©å™¨åºåˆ—ï¼Œè¡¨ç¤ºâ€œæˆ–â€çš„å…³ç³»</li>\n</ul>\n<h2 id=\"é€‰æ‹©å™¨ä¼˜å…ˆçº§\"><a href=\"#é€‰æ‹©å™¨ä¼˜å…ˆçº§\" class=\"headerlink\" title=\"é€‰æ‹©å™¨ä¼˜å…ˆçº§\"></a>é€‰æ‹©å™¨ä¼˜å…ˆçº§</h2><ul>\n<li><a href=\"http://www.standardista.com/css3/css-specificity/\" target=\"_blank\" rel=\"noopener\">å›¾è§£ css-specificity</a></li>\n<li><a href=\"https://www.w3.org/TR/2018/WD-selectors-4-20181121/#specificity-rules\" target=\"_blank\" rel=\"noopener\">w3 css-specificity</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity\" target=\"_blank\" rel=\"noopener\">MDN css-specificity</a></li>\n<li>ç»“è®ºï¼š<strong>[ inline-element,    id,    class | pseudo | attr,    type ]<br>:not ä¼ªç±»ä¸å‚ä¸è®¡ç®—</strong></li>\n<li>exercise<ul>\n<li>div#a.b .c[id=x]<ul>\n<li>[0,1,3,1]</li>\n</ul>\n</li>\n<li>#a:not(#b)<ul>\n<li>[0,2,0,0]</li>\n</ul>\n</li>\n<li>*.a<ul>\n<li>[0,0,1,0]</li>\n</ul>\n</li>\n<li>div.a<ul>\n<li>[0,0,1,1]</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ä¼˜åŒ–-toy-browser-CSS-selector-match\"><a href=\"#ä¼˜åŒ–-toy-browser-CSS-selector-match\" class=\"headerlink\" title=\"ä¼˜åŒ– toy-browser CSS selector match\"></a>ä¼˜åŒ– toy-browser CSS selector match</h2><ul>\n<li><p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥å…ˆè§‚å¯Ÿ</p>\n<ul>\n<li>toy-browser æ˜¯æ ¹æ® space æ‹†åˆ†é€‰æ‹©å™¨çš„ã€‚é‚£ä¹ˆé€‰æ‹©å™¨æˆ‘ä»¬éœ€è¦å¤„ç†ç‰¹æ®Šæƒ…å†µåªæœ‰ <ul>\n<li>#id.cls1.cls2.cl3</li>\n<li>.cls1#id.cls2</li>\n<li>div.cls1.cls2</li>\n<li>.cls1.cls2</li>\n</ul>\n</li>\n<li>ç±»å‹é€‰æ‹©å™¨æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼ˆä¸€å¯¹èµ·æ­¢æ ‡ç­¾ï¼Œä¸€ä¸ªç±»å‹ä¸Šåªèƒ½æœ‰ä¸€ä¸ªå”¯ä¸€ idï¼Œè¡¨ç¤ºä¸€ä¸ªå…ƒç´ ï¼‰</li>\n<li>idé€‰æ‹©å™¨æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼ˆä¸€å¯¹èµ·æ­¢æ ‡ç­¾ï¼Œå³ä¸€ä¸ªç±»å‹ï¼Œè¡¨ç¤ºä¸€ä¸ªå…ƒç´ ï¼‰<ul>\n<li>å› ä¸ºæ²¡æœ‰æ ‡è¯†ç¬¦ï¼Œåªèƒ½å‡ºç°åœ¨å¼€å¤´</li>\n<li>div.cls1.cls2</li>\n<li>ä¸å¯èƒ½ä¸º<ul>\n<li>.cls1div.cls2</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>class é€‰æ‹©å™¨å¯ä»¥æœ‰å¤šä¸ª</li>\n</ul>\n</li>\n<li><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç¬¬ä¸€æ­¥ï¼Œå…ˆå¤„ç† id é€‰æ‹©å™¨ + ç±»å‹é€‰æ‹©å™¨ç‰¹æ®Šæƒ…å†µ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">element, selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!selector || !element.attributes) </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> regId = <span class=\"regexp\">/(#\\w+)+/g</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resId = selector.match(regId)</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (resId &amp;&amp; resId[<span class=\"number\">0</span>].charAt(<span class=\"number\">0</span>) == <span class=\"string\">\"#\"</span>) &#123; <span class=\"comment\">// idé€‰æ‹©å™¨æœ‰æ ‡è¯†ç¬¦#ï¼Œå› æ­¤å¯ä»¥å‡ºç°åœ¨ä»»æ„ä½ç½®ï¼Œéœ€è¦ç”¨æ­£åˆ™å»åŒ¹é…</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> attr = element.attributes.filter(<span class=\"function\"><span class=\"params\">attr</span> =&gt;</span> attr.name === <span class=\"string\">\"id\"</span>)[<span class=\"number\">0</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (attr &amp;&amp; attr.value === resId[<span class=\"number\">0</span>].replace(<span class=\"string\">\"#\"</span>, <span class=\"string\">''</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(selector.charAt(<span class=\"number\">0</span>) !== <span class=\"string\">\"#\"</span> &amp;&amp; selector.charAt(<span class=\"number\">0</span>) !== <span class=\"string\">\".\"</span>)&#123; <span class=\"comment\">// åªéœ€è¦åˆ¤æ–­é€‰æ‹©å™¨å¼€å¤´æ˜¯ä¸æ˜¯ é id é€‰æ‹©å™¨æ ‡è¯†ç¬¦ # æˆ–è€… class é€‰æ‹©å™¨æ ‡è¯†ç¬¦ .</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (element.tagName === selector) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>å¤„ç†å¤š class é€‰æ‹©å™¨æƒ…å†µ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">element, selector</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// some code ...</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> regClass = <span class=\"regexp\">/(\\.\\w+)+/g</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resClass = selector.match(regClass)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// some code ...</span></span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (resClass) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> resClassArr = [] <span class=\"comment\">// style class selectoræ•°ç»„</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; resClass.length; i ++) &#123; <span class=\"comment\">// å¤„ç† .cls1#id.cls2 åŒ¹é…å‡ºæ¥ [\".cls1\", \".cls2\"] æƒ…å†µ</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> tempArr = resClass[i].split(<span class=\"string\">'.'</span>)\t      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">1</span>; j &lt; tempArr.length; j ++) &#123; <span class=\"comment\">// ç´¢å¼•ä»1å¼€å§‹ï¼Œå› ä¸º [\"\", \"cls1\", \"cls2\"]</span></span><br><span class=\"line\">        resClassArr.push(tempArr[j])</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> classAttr = element.attributes.filter(<span class=\"function\"><span class=\"params\">attr</span> =&gt;</span> attr.name === <span class=\"string\">\"class\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> classAttrRes = []</span><br><span class=\"line\">    <span class=\"comment\">// å…ƒç´  attr class æ•°ç»„ï¼ŒclassAttr:  [ &#123; name: 'class', value: 'c2 c3' &#125; ]</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (classAttr &amp;&amp; classAttr[<span class=\"number\">0</span>]) &#123;</span><br><span class=\"line\">      classAttrRes = classAttr[<span class=\"number\">0</span>][<span class=\"string\">\"value\"</span>].split(<span class=\"string\">\" \"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> tempFlag = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; resClassArr.length; i ++) &#123;</span><br><span class=\"line\">      tempFlag = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> k = <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"keyword\">for</span> (; k &lt; classAttrRes.length; k ++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (classAttrRes[k] === resClassArr[i]) &#123; <span class=\"comment\">// æ‹¿ style class selector ä¸ element class attribute è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class=\"line\">          tempFlag = <span class=\"literal\">true</span></span><br><span class=\"line\">          <span class=\"keyword\">break</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!tempFlag &amp;&amp; k === classAttrRes.length) &#123; <span class=\"comment\">// å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ï¼Œå¹¶ä¸”åŒ¹é…åˆ°æœ€åä¸€ä½</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// some code ...</span></span><br><span class=\"line\">    </span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>æœ€åæˆ‘ä»¬åˆ«å¿˜äº†ä¿®æ”¹ specificity çš„è®¡ç®—é€»è¾‘</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">specificity</span>(<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> selectorParts = selector.split(<span class=\"string\">\" \"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> regClass = <span class=\"regexp\">/(\\.\\w+)+/g</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resClass = selector.match(regClass)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (resClass &amp;&amp; resClass.length) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; resClass.length; i ++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> tempArr = resClass[i].split(<span class=\"string\">'.'</span>)</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">1</span>; j &lt; tempArr.length; j ++) &#123;</span><br><span class=\"line\">        p[<span class=\"number\">2</span>] ++</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> part <span class=\"keyword\">of</span> selectorParts) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> regId = <span class=\"regexp\">/(#\\w+)+/g</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> resId = part.match(regId)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (resId &amp;&amp; resId[<span class=\"number\">0</span>].charAt(<span class=\"number\">0</span>) == <span class=\"string\">\"#\"</span>) &#123;</span><br><span class=\"line\">      p[<span class=\"number\">1</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (part.charAt(<span class=\"number\">0</span>) !== <span class=\"string\">\"#\"</span> &amp;&amp; part.charAt(<span class=\"number\">0</span>) !== <span class=\"string\">\".\"</span>)&#123;</span><br><span class=\"line\">      p[<span class=\"number\">3</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'selector'</span>, selector)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'p'</span>, p)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>æµ‹è¯•ç”¨ä¾‹ä¸€</p>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">maaa</span>=<span class=\"string\">a</span> &gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-id\">#container</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t  <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t  <span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:300px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t  <span class=\"selector-tag\">display</span><span class=\"selector-pseudo\">:flex</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t  <span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(255</span>,255,255);</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-id\">#container</span> <span class=\"selector-id\">#myid</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(255</span>,0,0)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-id\">#container</span> <span class=\"selector-class\">.c1</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">flex</span><span class=\"selector-pseudo\">:1</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(0</span>,255,0)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-id\">#container</span> <span class=\"selector-class\">.c2</span><span class=\"selector-id\">#myid</span><span class=\"selector-class\">.c3</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(0</span>,0,255)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"container\"</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myid\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"c2 c3\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"c1\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/4d585e3777f3371a9fd976dce2698bc6163838.png\" alt=\"è¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n<li>css specificity è®¡ç®—æˆªå›¾<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/8566a8d6a4fcb229b6a1005946fd686647911.png\" alt=\"css specificity è®¡ç®—æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>æµ‹è¯•ç”¨ä¾‹äºŒ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html maaa=a &gt;</span><br><span class=\"line\">\t&lt;head&gt;</span><br><span class=\"line\">\t  &lt;style&gt;</span><br><span class=\"line\">\t\t#container&#123;</span><br><span class=\"line\">\t\t  width:<span class=\"number\">500</span>px;</span><br><span class=\"line\">\t\t  height:<span class=\"number\">300</span>px;</span><br><span class=\"line\">\t\t  display:flex;</span><br><span class=\"line\">\t\t  background-color:rgb(<span class=\"number\">255</span>,<span class=\"number\">255</span>,<span class=\"number\">255</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t#container #myid&#123;</span><br><span class=\"line\">\t\t\twidth:<span class=\"number\">200</span>px;</span><br><span class=\"line\">\t\t\theight:<span class=\"number\">100</span>px;</span><br><span class=\"line\">\t\t\tbackground-color:rgb(<span class=\"number\">255</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t#container .c1&#123;</span><br><span class=\"line\">\t\t\tflex:<span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\tbackground-color:rgb(<span class=\"number\">0</span>,<span class=\"number\">255</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t#container.wrapper .c3.c2&#123;</span><br><span class=\"line\">\t\t\twidth:<span class=\"number\">200</span>px;</span><br><span class=\"line\">\t\t\theight:<span class=\"number\">100</span>px;</span><br><span class=\"line\">\t\t\tbackground-color:rgb(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">255</span>)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&lt;<span class=\"regexp\">/style&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">\t&lt;/</span>head&gt;</span><br><span class=\"line\">\t&lt;body&gt;</span><br><span class=\"line\">\t  &lt;div id=<span class=\"string\">\"container\"</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"wrapper\"</span>&gt;</span><br><span class=\"line\">\t    &lt;div id=<span class=\"string\">\"myid\"</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"c2 c3\"</span>&gt;&lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">\t    &lt;div class=\"c1\"&gt;&lt;/</span>div&gt;</span><br><span class=\"line\">\t  &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">\t&lt;/</span>body&gt;</span><br><span class=\"line\">   &lt;<span class=\"regexp\">/html&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c73ede6bb822726ff171e2b7dbaa5fdb156331.png\" alt=\"è¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n<li>css specificity è®¡ç®—æˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/af1f074f1e418a539ce900efdfa3498a44257.png\" alt=\"css specificity è®¡ç®—æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Elle æŠ€èƒ½æ ‘æ¢³ç†","date":"2020-08-27T07:18:38.000Z","description":["å‰ç«¯æ¦‚å¿µ"],"_content":"\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- å¯¹è‡ªå·±çš„æŠ€èƒ½æ ‘è¿›è¡Œç®€å•æ¢³ç†\n\n<!-- more -->\n\n## ç¼–ç¨‹é€šè¯† week01 ~ 02\n- ä»äº§ç”Ÿå¼çš„è§’åº¦æ¥ç†è§£ç¼–ç¨‹è¯­è¨€\n\t- [ç¼–ç¨‹è¯­è¨€é€šè¯†](https://ele-peng.github.io/2020/04/20/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E9%80%9A%E8%AF%86/)\n- ä¾æ®äº§ç”Ÿå¼ï¼Œåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é… å­—ç¬¦ä¸²/Numberå­—é¢é‡\n\t- [Reg-Number](https://ele-peng.github.io/2020/04/20/Reg-Number/)\n\t- [Reg-String](https://ele-peng.github.io/2020/04/21/Reg-String/)\n- UTF-8 + åè¿›åˆ¶å°æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤º\n\t- [UTF-8 encode+decode, 0.1 + 0.2 â‰  0.3è§£æ](https://ele-peng.github.io/2020/04/21/UTF8-Encoing/)\n\n- [ECMA-262](https://www.ecma-international.org/publications/standards/Ecma-262.htm)\n\n## Javascript week03 ~ 05\n- ![Javascript - xmind](http://p1.meituan.net/myvideodistribute/a40944a8d5cbaf127ef177026ae1d60d108355.png)\n- [Javascript-Atom + Types](https://ele-peng.github.io/2020/04/20/Javascript-Atom+Types/)\n\t- [convert String to Number](https://ele-peng.github.io/2020/04/24/convertStringToNumber/)\n\t- [convert Number to String](https://ele-peng.github.io/2020/04/25/convertNumberToString/)\n- [Javascript-Expressions](https://ele-peng.github.io/2020/04/23/Javascript-Expressions/)\n- [Javascript-Statement](https://ele-peng.github.io/2020/04/26/Javascript-Statement/)\n- Javascript-Structure\n\t- [äº”ä¸€ Elle å¿«è¦å†™åçš„ 45é“ promiseé¢è¯•é¢˜é¢˜è§£ï¼ˆä¸€ï¼‰](https://ele-peng.github.io/2020/04/30/Javascript-%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/)\n\t- [äº”ä¸€ Elle å¿«è¦å†™åçš„ 45é“ promiseé¢è¯•é¢˜é¢˜è§£ï¼ˆäºŒï¼‰](https://ele-peng.github.io/2020/05/02/Javascrtip-%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%EF%BC%88%E4%BA%8C%EF%BC%89/)\n- Javascript-Program/Module\n- è‡ªå·±å¯¹[é¢å‘å¯¹è±¡OOPç²—ç•¥çš„ç†è§£+Javascriptæ ‡å‡†é‡Œæ‰€æœ‰çš„å¯¹è±¡](https://ele-peng.github.io/2020/04/09/OOP-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/)\n- [G6 antv å¯è§†åŒ– Realm ä¸­çš„æ‰€æœ‰å¯¹è±¡](https://ele-peng.github.io/2020/05/08/Realm/)\n\n## æµè§ˆå™¨çš„å·¥ä½œåŸç†å’ŒAPI week05 ~ 07\n### æµè§ˆå™¨çš„å·¥ä½œåŸç†\n- [URL- HTTP åè®® + è¯­æ³•ä¸è¯æ³•åˆ†æ](https://ele-peng.github.io/2020/05/10/Toy-Browser-DAY1/)\n\t- [æœªå®Œ-ä»URLè¾“å…¥åˆ°é¡µé¢å±•ç°å‘ç”Ÿäº†ä»€ä¹ˆ](https://ele-peng.github.io/2020/05/12/%E4%BB%8EURL%E8%BE%93%E5%85%A5%E5%88%B0/)\n\t- FSM\n\t\t- [åŸºäºKMPçš„FSMå¤„ç† pattern](https://ele-peng.github.io/2020/05/16/%E5%9F%BA%E4%BA%8EKMP%E7%9A%84FSM%E5%A4%84%E7%90%86%E5%AD%97%E7%AC%A6%E4%B8%B2/)\n- [HTML - Parser](https://ele-peng.github.io/2020/05/15/Toy-Browser-DAY2/)\n- [CSS - CSS Computing](https://ele-peng.github.io/2020/05/17/Toy-Browser-DAY3/)\n- [DOM with CSS - Layout](https://ele-peng.github.io/2020/05/22/Toy-Browser-DAY4/)\n\t- ä¸»è¦å®ç° flex layout\n- [DOM with position - Render](https://ele-peng.github.io/2020/05/24/Toy-Browser-DAY5/)\n- ![æµè§ˆå™¨å·¥ä½œåŸç†å›¾](http://p0.meituan.net/myvideodistribute/5c3903a71266e72d2e3f21a276c0efad94997.png)\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/toy-browser)\n\n### æµè§ˆå™¨API\n- ![Web-Apis](http://p1.meituan.net/myvideodistribute/64bf3e3fac9ab50d884671909e47b53c274299.png)\n\n\n\n## CSS week 07 ~ 09\n- ![CSS - xmind](http://p1.meituan.net/myvideodistribute/855b161fdbce05796f748906fa13987a182699.png)\n- [CSS åŸºæœ¬è¯­æ³•+åŸºç¡€æœºåˆ¶](https://ele-peng.github.io/2020/05/24/CSS%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-%E5%9F%BA%E7%A1%80%E6%9C%BA%E5%88%B6/)\n- [CSS é€‰æ‹©å™¨](https://ele-peng.github.io/2020/05/29/CSS-%E9%80%89%E6%8B%A9%E5%99%A8/)\n- [CSS æ’ç‰ˆ](https://ele-peng.github.io/2020/05/30/CSS-%E6%8E%92%E7%89%88/)\n- [CSS åŠ¨ç”»ä¸ç»˜åˆ¶](https://ele-peng.github.io/2020/06/06/CSS-%E5%8A%A8%E7%94%BB%E4%B8%8E%E7%BB%98%E5%88%B6/)\n- ![CSS property](http://p0.meituan.net/myvideodistribute/dfa2d75397034ebf8f6f854845a6729760145.png)\n\t- [è‰²å½©ç©ºé—´](https://ele-peng.github.io/2020/08/23/%E9%A2%9C%E8%89%B2%E7%A9%BA%E9%97%B4/)\n\n## HTML week 09 ~ 10\n- ![HTML - xmind](http://p1.meituan.net/myvideodistribute/3d33254e89dce4bb6e40ceefe4c40945138850.png)\n- [HTML - å…ƒç´ +è¯­è¨€+è¡¥å……æ ‡å‡†](https://ele-peng.github.io/2020/06/06/HTML-XML%E4%B8%8ESGML/)\n\n## ç¼–ç¨‹ä¸ç®—æ³•å®è·µ week 10 ~ 13\n### Tic Tac Toe\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week10/tic-tac-toe.html)\n\n\n### å¯»è·¯ç®—æ³•ï¼ˆA*ï¼Œå¯å‘å¼ç®—æ³•ï¼Œdfsï¼Œbfsï¼‰\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week11/roar-search.html)\n\n\n### å››åˆ™è¿ç®—\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/1x.html)\n\n\n### å­—ç¬¦ä¸²ç®—æ³•\n#### Trie å­—å…¸æ ‘\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/trie.html)\n\n\n#### KMP\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/KMP.html)\n\n\n#### WildCard\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/wildcard.html)\n\n### Proxy ä¸åŒå‘ç»‘å®š\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week13/proxy.html)\n\n### Range å®ç° DOM ç²¾ç¡®æ“ä½œ\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week13/dragable.html)\n\n\n\n## ç»„ä»¶åŒ– week 13 ~ 17\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/component)\n- [å¾…å†™-ç»„ä»¶åŒ–æ€è€ƒ]()\n\n\n## å·¥å…·é“¾ week 17 ~ 19\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/tool-chain)\n\n\n## å‘å¸ƒç³»ç»Ÿ week19 ~ 21\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/publish)\n\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","source":"_posts/Elle-æŠ€èƒ½æ ‘æ¢³ç†.md","raw":"---\ntitle: Elle æŠ€èƒ½æ ‘æ¢³ç†\ndate: 2020-08-27 15:18:38\ntags: \n- å‰ç«¯æ¦‚å¿µ\ncategories:\n- å‰ç«¯æ¦‚å¿µ\ndescription:\n- å‰ç«¯æ¦‚å¿µ\n\n\n\n---\n\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- å¯¹è‡ªå·±çš„æŠ€èƒ½æ ‘è¿›è¡Œç®€å•æ¢³ç†\n\n<!-- more -->\n\n## ç¼–ç¨‹é€šè¯† week01 ~ 02\n- ä»äº§ç”Ÿå¼çš„è§’åº¦æ¥ç†è§£ç¼–ç¨‹è¯­è¨€\n\t- [ç¼–ç¨‹è¯­è¨€é€šè¯†](https://ele-peng.github.io/2020/04/20/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E9%80%9A%E8%AF%86/)\n- ä¾æ®äº§ç”Ÿå¼ï¼Œåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é… å­—ç¬¦ä¸²/Numberå­—é¢é‡\n\t- [Reg-Number](https://ele-peng.github.io/2020/04/20/Reg-Number/)\n\t- [Reg-String](https://ele-peng.github.io/2020/04/21/Reg-String/)\n- UTF-8 + åè¿›åˆ¶å°æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤º\n\t- [UTF-8 encode+decode, 0.1 + 0.2 â‰  0.3è§£æ](https://ele-peng.github.io/2020/04/21/UTF8-Encoing/)\n\n- [ECMA-262](https://www.ecma-international.org/publications/standards/Ecma-262.htm)\n\n## Javascript week03 ~ 05\n- ![Javascript - xmind](http://p1.meituan.net/myvideodistribute/a40944a8d5cbaf127ef177026ae1d60d108355.png)\n- [Javascript-Atom + Types](https://ele-peng.github.io/2020/04/20/Javascript-Atom+Types/)\n\t- [convert String to Number](https://ele-peng.github.io/2020/04/24/convertStringToNumber/)\n\t- [convert Number to String](https://ele-peng.github.io/2020/04/25/convertNumberToString/)\n- [Javascript-Expressions](https://ele-peng.github.io/2020/04/23/Javascript-Expressions/)\n- [Javascript-Statement](https://ele-peng.github.io/2020/04/26/Javascript-Statement/)\n- Javascript-Structure\n\t- [äº”ä¸€ Elle å¿«è¦å†™åçš„ 45é“ promiseé¢è¯•é¢˜é¢˜è§£ï¼ˆä¸€ï¼‰](https://ele-peng.github.io/2020/04/30/Javascript-%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/)\n\t- [äº”ä¸€ Elle å¿«è¦å†™åçš„ 45é“ promiseé¢è¯•é¢˜é¢˜è§£ï¼ˆäºŒï¼‰](https://ele-peng.github.io/2020/05/02/Javascrtip-%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%EF%BC%88%E4%BA%8C%EF%BC%89/)\n- Javascript-Program/Module\n- è‡ªå·±å¯¹[é¢å‘å¯¹è±¡OOPç²—ç•¥çš„ç†è§£+Javascriptæ ‡å‡†é‡Œæ‰€æœ‰çš„å¯¹è±¡](https://ele-peng.github.io/2020/04/09/OOP-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/)\n- [G6 antv å¯è§†åŒ– Realm ä¸­çš„æ‰€æœ‰å¯¹è±¡](https://ele-peng.github.io/2020/05/08/Realm/)\n\n## æµè§ˆå™¨çš„å·¥ä½œåŸç†å’ŒAPI week05 ~ 07\n### æµè§ˆå™¨çš„å·¥ä½œåŸç†\n- [URL- HTTP åè®® + è¯­æ³•ä¸è¯æ³•åˆ†æ](https://ele-peng.github.io/2020/05/10/Toy-Browser-DAY1/)\n\t- [æœªå®Œ-ä»URLè¾“å…¥åˆ°é¡µé¢å±•ç°å‘ç”Ÿäº†ä»€ä¹ˆ](https://ele-peng.github.io/2020/05/12/%E4%BB%8EURL%E8%BE%93%E5%85%A5%E5%88%B0/)\n\t- FSM\n\t\t- [åŸºäºKMPçš„FSMå¤„ç† pattern](https://ele-peng.github.io/2020/05/16/%E5%9F%BA%E4%BA%8EKMP%E7%9A%84FSM%E5%A4%84%E7%90%86%E5%AD%97%E7%AC%A6%E4%B8%B2/)\n- [HTML - Parser](https://ele-peng.github.io/2020/05/15/Toy-Browser-DAY2/)\n- [CSS - CSS Computing](https://ele-peng.github.io/2020/05/17/Toy-Browser-DAY3/)\n- [DOM with CSS - Layout](https://ele-peng.github.io/2020/05/22/Toy-Browser-DAY4/)\n\t- ä¸»è¦å®ç° flex layout\n- [DOM with position - Render](https://ele-peng.github.io/2020/05/24/Toy-Browser-DAY5/)\n- ![æµè§ˆå™¨å·¥ä½œåŸç†å›¾](http://p0.meituan.net/myvideodistribute/5c3903a71266e72d2e3f21a276c0efad94997.png)\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/toy-browser)\n\n### æµè§ˆå™¨API\n- ![Web-Apis](http://p1.meituan.net/myvideodistribute/64bf3e3fac9ab50d884671909e47b53c274299.png)\n\n\n\n## CSS week 07 ~ 09\n- ![CSS - xmind](http://p1.meituan.net/myvideodistribute/855b161fdbce05796f748906fa13987a182699.png)\n- [CSS åŸºæœ¬è¯­æ³•+åŸºç¡€æœºåˆ¶](https://ele-peng.github.io/2020/05/24/CSS%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-%E5%9F%BA%E7%A1%80%E6%9C%BA%E5%88%B6/)\n- [CSS é€‰æ‹©å™¨](https://ele-peng.github.io/2020/05/29/CSS-%E9%80%89%E6%8B%A9%E5%99%A8/)\n- [CSS æ’ç‰ˆ](https://ele-peng.github.io/2020/05/30/CSS-%E6%8E%92%E7%89%88/)\n- [CSS åŠ¨ç”»ä¸ç»˜åˆ¶](https://ele-peng.github.io/2020/06/06/CSS-%E5%8A%A8%E7%94%BB%E4%B8%8E%E7%BB%98%E5%88%B6/)\n- ![CSS property](http://p0.meituan.net/myvideodistribute/dfa2d75397034ebf8f6f854845a6729760145.png)\n\t- [è‰²å½©ç©ºé—´](https://ele-peng.github.io/2020/08/23/%E9%A2%9C%E8%89%B2%E7%A9%BA%E9%97%B4/)\n\n## HTML week 09 ~ 10\n- ![HTML - xmind](http://p1.meituan.net/myvideodistribute/3d33254e89dce4bb6e40ceefe4c40945138850.png)\n- [HTML - å…ƒç´ +è¯­è¨€+è¡¥å……æ ‡å‡†](https://ele-peng.github.io/2020/06/06/HTML-XML%E4%B8%8ESGML/)\n\n## ç¼–ç¨‹ä¸ç®—æ³•å®è·µ week 10 ~ 13\n### Tic Tac Toe\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week10/tic-tac-toe.html)\n\n\n### å¯»è·¯ç®—æ³•ï¼ˆA*ï¼Œå¯å‘å¼ç®—æ³•ï¼Œdfsï¼Œbfsï¼‰\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week11/roar-search.html)\n\n\n### å››åˆ™è¿ç®—\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/1x.html)\n\n\n### å­—ç¬¦ä¸²ç®—æ³•\n#### Trie å­—å…¸æ ‘\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/trie.html)\n\n\n#### KMP\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/KMP.html)\n\n\n#### WildCard\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/wildcard.html)\n\n### Proxy ä¸åŒå‘ç»‘å®š\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week13/proxy.html)\n\n### Range å®ç° DOM ç²¾ç¡®æ“ä½œ\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week13/dragable.html)\n\n\n\n## ç»„ä»¶åŒ– week 13 ~ 17\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/component)\n- [å¾…å†™-ç»„ä»¶åŒ–æ€è€ƒ]()\n\n\n## å·¥å…·é“¾ week 17 ~ 19\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/tool-chain)\n\n\n## å‘å¸ƒç³»ç»Ÿ week19 ~ 21\n- [å®Œæ•´é¡¹ç›®ä»£ç ](https://github.com/Ele-Peng/publish)\n\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","slug":"Elle-æŠ€èƒ½æ ‘æ¢³ç†","published":1,"updated":"2020-10-27T15:21:11.260Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7i000afw9k32qj3r80","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å¯¹è‡ªå·±çš„æŠ€èƒ½æ ‘è¿›è¡Œç®€å•æ¢³ç†</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"ç¼–ç¨‹é€šè¯†-week01-02\"><a href=\"#ç¼–ç¨‹é€šè¯†-week01-02\" class=\"headerlink\" title=\"ç¼–ç¨‹é€šè¯† week01 ~ 02\"></a>ç¼–ç¨‹é€šè¯† week01 ~ 02</h2><ul>\n<li><p>ä»äº§ç”Ÿå¼çš„è§’åº¦æ¥ç†è§£ç¼–ç¨‹è¯­è¨€</p>\n<ul>\n<li><a href=\"https://ele-peng.github.io/2020/04/20/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E9%80%9A%E8%AF%86/\" target=\"_blank\" rel=\"noopener\">ç¼–ç¨‹è¯­è¨€é€šè¯†</a></li>\n</ul>\n</li>\n<li><p>ä¾æ®äº§ç”Ÿå¼ï¼Œåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é… å­—ç¬¦ä¸²/Numberå­—é¢é‡</p>\n<ul>\n<li><a href=\"https://ele-peng.github.io/2020/04/20/Reg-Number/\" target=\"_blank\" rel=\"noopener\">Reg-Number</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/04/21/Reg-String/\" target=\"_blank\" rel=\"noopener\">Reg-String</a></li>\n</ul>\n</li>\n<li><p>UTF-8 + åè¿›åˆ¶å°æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤º</p>\n<ul>\n<li><a href=\"https://ele-peng.github.io/2020/04/21/UTF8-Encoing/\" target=\"_blank\" rel=\"noopener\">UTF-8 encode+decode, 0.1 + 0.2 â‰  0.3è§£æ</a></li>\n</ul>\n</li>\n<li><p><a href=\"https://www.ecma-international.org/publications/standards/Ecma-262.htm\" target=\"_blank\" rel=\"noopener\">ECMA-262</a></p>\n</li>\n</ul>\n<h2 id=\"Javascript-week03-05\"><a href=\"#Javascript-week03-05\" class=\"headerlink\" title=\"Javascript week03 ~ 05\"></a>Javascript week03 ~ 05</h2><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/a40944a8d5cbaf127ef177026ae1d60d108355.png\" alt=\"Javascript - xmind\"></li>\n<li><a href=\"https://ele-peng.github.io/2020/04/20/Javascript-Atom+Types/\" target=\"_blank\" rel=\"noopener\">Javascript-Atom + Types</a><ul>\n<li><a href=\"https://ele-peng.github.io/2020/04/24/convertStringToNumber/\" target=\"_blank\" rel=\"noopener\">convert String to Number</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/04/25/convertNumberToString/\" target=\"_blank\" rel=\"noopener\">convert Number to String</a></li>\n</ul>\n</li>\n<li><a href=\"https://ele-peng.github.io/2020/04/23/Javascript-Expressions/\" target=\"_blank\" rel=\"noopener\">Javascript-Expressions</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/04/26/Javascript-Statement/\" target=\"_blank\" rel=\"noopener\">Javascript-Statement</a></li>\n<li>Javascript-Structure<ul>\n<li><a href=\"https://ele-peng.github.io/2020/04/30/Javascript-%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/\" target=\"_blank\" rel=\"noopener\">äº”ä¸€ Elle å¿«è¦å†™åçš„ 45é“ promiseé¢è¯•é¢˜é¢˜è§£ï¼ˆä¸€ï¼‰</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/02/Javascrtip-%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%EF%BC%88%E4%BA%8C%EF%BC%89/\" target=\"_blank\" rel=\"noopener\">äº”ä¸€ Elle å¿«è¦å†™åçš„ 45é“ promiseé¢è¯•é¢˜é¢˜è§£ï¼ˆäºŒï¼‰</a></li>\n</ul>\n</li>\n<li>Javascript-Program/Module</li>\n<li>è‡ªå·±å¯¹<a href=\"https://ele-peng.github.io/2020/04/09/OOP-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/\" target=\"_blank\" rel=\"noopener\">é¢å‘å¯¹è±¡OOPç²—ç•¥çš„ç†è§£+Javascriptæ ‡å‡†é‡Œæ‰€æœ‰çš„å¯¹è±¡</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/08/Realm/\" target=\"_blank\" rel=\"noopener\">G6 antv å¯è§†åŒ– Realm ä¸­çš„æ‰€æœ‰å¯¹è±¡</a></li>\n</ul>\n<h2 id=\"æµè§ˆå™¨çš„å·¥ä½œåŸç†å’ŒAPI-week05-07\"><a href=\"#æµè§ˆå™¨çš„å·¥ä½œåŸç†å’ŒAPI-week05-07\" class=\"headerlink\" title=\"æµè§ˆå™¨çš„å·¥ä½œåŸç†å’ŒAPI week05 ~ 07\"></a>æµè§ˆå™¨çš„å·¥ä½œåŸç†å’ŒAPI week05 ~ 07</h2><h3 id=\"æµè§ˆå™¨çš„å·¥ä½œåŸç†\"><a href=\"#æµè§ˆå™¨çš„å·¥ä½œåŸç†\" class=\"headerlink\" title=\"æµè§ˆå™¨çš„å·¥ä½œåŸç†\"></a>æµè§ˆå™¨çš„å·¥ä½œåŸç†</h3><ul>\n<li><a href=\"https://ele-peng.github.io/2020/05/10/Toy-Browser-DAY1/\" target=\"_blank\" rel=\"noopener\">URL- HTTP åè®® + è¯­æ³•ä¸è¯æ³•åˆ†æ</a><ul>\n<li><a href=\"https://ele-peng.github.io/2020/05/12/%E4%BB%8EURL%E8%BE%93%E5%85%A5%E5%88%B0/\" target=\"_blank\" rel=\"noopener\">æœªå®Œ-ä»URLè¾“å…¥åˆ°é¡µé¢å±•ç°å‘ç”Ÿäº†ä»€ä¹ˆ</a></li>\n<li>FSM<ul>\n<li><a href=\"https://ele-peng.github.io/2020/05/16/%E5%9F%BA%E4%BA%8EKMP%E7%9A%84FSM%E5%A4%84%E7%90%86%E5%AD%97%E7%AC%A6%E4%B8%B2/\" target=\"_blank\" rel=\"noopener\">åŸºäºKMPçš„FSMå¤„ç† pattern</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"https://ele-peng.github.io/2020/05/15/Toy-Browser-DAY2/\" target=\"_blank\" rel=\"noopener\">HTML - Parser</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/17/Toy-Browser-DAY3/\" target=\"_blank\" rel=\"noopener\">CSS - CSS Computing</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/22/Toy-Browser-DAY4/\" target=\"_blank\" rel=\"noopener\">DOM with CSS - Layout</a><ul>\n<li>ä¸»è¦å®ç° flex layout</li>\n</ul>\n</li>\n<li><a href=\"https://ele-peng.github.io/2020/05/24/Toy-Browser-DAY5/\" target=\"_blank\" rel=\"noopener\">DOM with position - Render</a></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5c3903a71266e72d2e3f21a276c0efad94997.png\" alt=\"æµè§ˆå™¨å·¥ä½œåŸç†å›¾\"></li>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h3 id=\"æµè§ˆå™¨API\"><a href=\"#æµè§ˆå™¨API\" class=\"headerlink\" title=\"æµè§ˆå™¨API\"></a>æµè§ˆå™¨API</h3><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/64bf3e3fac9ab50d884671909e47b53c274299.png\" alt=\"Web-Apis\"></li>\n</ul>\n<h2 id=\"CSS-week-07-09\"><a href=\"#CSS-week-07-09\" class=\"headerlink\" title=\"CSS week 07 ~ 09\"></a>CSS week 07 ~ 09</h2><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/855b161fdbce05796f748906fa13987a182699.png\" alt=\"CSS - xmind\"></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/24/CSS%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-%E5%9F%BA%E7%A1%80%E6%9C%BA%E5%88%B6/\" target=\"_blank\" rel=\"noopener\">CSS åŸºæœ¬è¯­æ³•+åŸºç¡€æœºåˆ¶</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/29/CSS-%E9%80%89%E6%8B%A9%E5%99%A8/\" target=\"_blank\" rel=\"noopener\">CSS é€‰æ‹©å™¨</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/30/CSS-%E6%8E%92%E7%89%88/\" target=\"_blank\" rel=\"noopener\">CSS æ’ç‰ˆ</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/06/06/CSS-%E5%8A%A8%E7%94%BB%E4%B8%8E%E7%BB%98%E5%88%B6/\" target=\"_blank\" rel=\"noopener\">CSS åŠ¨ç”»ä¸ç»˜åˆ¶</a></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/dfa2d75397034ebf8f6f854845a6729760145.png\" alt=\"CSS property\"><ul>\n<li><a href=\"https://ele-peng.github.io/2020/08/23/%E9%A2%9C%E8%89%B2%E7%A9%BA%E9%97%B4/\" target=\"_blank\" rel=\"noopener\">è‰²å½©ç©ºé—´</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"HTML-week-09-10\"><a href=\"#HTML-week-09-10\" class=\"headerlink\" title=\"HTML week 09 ~ 10\"></a>HTML week 09 ~ 10</h2><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/3d33254e89dce4bb6e40ceefe4c40945138850.png\" alt=\"HTML - xmind\"></li>\n<li><a href=\"https://ele-peng.github.io/2020/06/06/HTML-XML%E4%B8%8ESGML/\" target=\"_blank\" rel=\"noopener\">HTML - å…ƒç´ +è¯­è¨€+è¡¥å……æ ‡å‡†</a></li>\n</ul>\n<h2 id=\"ç¼–ç¨‹ä¸ç®—æ³•å®è·µ-week-10-13\"><a href=\"#ç¼–ç¨‹ä¸ç®—æ³•å®è·µ-week-10-13\" class=\"headerlink\" title=\"ç¼–ç¨‹ä¸ç®—æ³•å®è·µ week 10 ~ 13\"></a>ç¼–ç¨‹ä¸ç®—æ³•å®è·µ week 10 ~ 13</h2><h3 id=\"Tic-Tac-Toe\"><a href=\"#Tic-Tac-Toe\" class=\"headerlink\" title=\"Tic Tac Toe\"></a>Tic Tac Toe</h3><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week10/tic-tac-toe.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h3 id=\"å¯»è·¯ç®—æ³•ï¼ˆA-ï¼Œå¯å‘å¼ç®—æ³•ï¼Œdfsï¼Œbfsï¼‰\"><a href=\"#å¯»è·¯ç®—æ³•ï¼ˆA-ï¼Œå¯å‘å¼ç®—æ³•ï¼Œdfsï¼Œbfsï¼‰\" class=\"headerlink\" title=\"å¯»è·¯ç®—æ³•ï¼ˆA*ï¼Œå¯å‘å¼ç®—æ³•ï¼Œdfsï¼Œbfsï¼‰\"></a>å¯»è·¯ç®—æ³•ï¼ˆA*ï¼Œå¯å‘å¼ç®—æ³•ï¼Œdfsï¼Œbfsï¼‰</h3><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week11/roar-search.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h3 id=\"å››åˆ™è¿ç®—\"><a href=\"#å››åˆ™è¿ç®—\" class=\"headerlink\" title=\"å››åˆ™è¿ç®—\"></a>å››åˆ™è¿ç®—</h3><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/1x.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h3 id=\"å­—ç¬¦ä¸²ç®—æ³•\"><a href=\"#å­—ç¬¦ä¸²ç®—æ³•\" class=\"headerlink\" title=\"å­—ç¬¦ä¸²ç®—æ³•\"></a>å­—ç¬¦ä¸²ç®—æ³•</h3><h4 id=\"Trie-å­—å…¸æ ‘\"><a href=\"#Trie-å­—å…¸æ ‘\" class=\"headerlink\" title=\"Trie å­—å…¸æ ‘\"></a>Trie å­—å…¸æ ‘</h4><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/trie.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h4 id=\"KMP\"><a href=\"#KMP\" class=\"headerlink\" title=\"KMP\"></a>KMP</h4><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/KMP.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h4 id=\"WildCard\"><a href=\"#WildCard\" class=\"headerlink\" title=\"WildCard\"></a>WildCard</h4><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/wildcard.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h3 id=\"Proxy-ä¸åŒå‘ç»‘å®š\"><a href=\"#Proxy-ä¸åŒå‘ç»‘å®š\" class=\"headerlink\" title=\"Proxy ä¸åŒå‘ç»‘å®š\"></a>Proxy ä¸åŒå‘ç»‘å®š</h3><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week13/proxy.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h3 id=\"Range-å®ç°-DOM-ç²¾ç¡®æ“ä½œ\"><a href=\"#Range-å®ç°-DOM-ç²¾ç¡®æ“ä½œ\" class=\"headerlink\" title=\"Range å®ç° DOM ç²¾ç¡®æ“ä½œ\"></a>Range å®ç° DOM ç²¾ç¡®æ“ä½œ</h3><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week13/dragable.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h2 id=\"ç»„ä»¶åŒ–-week-13-17\"><a href=\"#ç»„ä»¶åŒ–-week-13-17\" class=\"headerlink\" title=\"ç»„ä»¶åŒ– week 13 ~ 17\"></a>ç»„ä»¶åŒ– week 13 ~ 17</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/component\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n<li><a href=\"\">å¾…å†™-ç»„ä»¶åŒ–æ€è€ƒ</a></li>\n</ul>\n<h2 id=\"å·¥å…·é“¾-week-17-19\"><a href=\"#å·¥å…·é“¾-week-17-19\" class=\"headerlink\" title=\"å·¥å…·é“¾ week 17 ~ 19\"></a>å·¥å…·é“¾ week 17 ~ 19</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/tool-chain\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h2 id=\"å‘å¸ƒç³»ç»Ÿ-week19-21\"><a href=\"#å‘å¸ƒç³»ç»Ÿ-week19-21\" class=\"headerlink\" title=\"å‘å¸ƒç³»ç»Ÿ week19 ~ 21\"></a>å‘å¸ƒç³»ç»Ÿ week19 ~ 21</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/publish\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å¯¹è‡ªå·±çš„æŠ€èƒ½æ ‘è¿›è¡Œç®€å•æ¢³ç†</li>\n</ul>","more":"<h2 id=\"ç¼–ç¨‹é€šè¯†-week01-02\"><a href=\"#ç¼–ç¨‹é€šè¯†-week01-02\" class=\"headerlink\" title=\"ç¼–ç¨‹é€šè¯† week01 ~ 02\"></a>ç¼–ç¨‹é€šè¯† week01 ~ 02</h2><ul>\n<li><p>ä»äº§ç”Ÿå¼çš„è§’åº¦æ¥ç†è§£ç¼–ç¨‹è¯­è¨€</p>\n<ul>\n<li><a href=\"https://ele-peng.github.io/2020/04/20/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E9%80%9A%E8%AF%86/\" target=\"_blank\" rel=\"noopener\">ç¼–ç¨‹è¯­è¨€é€šè¯†</a></li>\n</ul>\n</li>\n<li><p>ä¾æ®äº§ç”Ÿå¼ï¼Œåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é… å­—ç¬¦ä¸²/Numberå­—é¢é‡</p>\n<ul>\n<li><a href=\"https://ele-peng.github.io/2020/04/20/Reg-Number/\" target=\"_blank\" rel=\"noopener\">Reg-Number</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/04/21/Reg-String/\" target=\"_blank\" rel=\"noopener\">Reg-String</a></li>\n</ul>\n</li>\n<li><p>UTF-8 + åè¿›åˆ¶å°æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤º</p>\n<ul>\n<li><a href=\"https://ele-peng.github.io/2020/04/21/UTF8-Encoing/\" target=\"_blank\" rel=\"noopener\">UTF-8 encode+decode, 0.1 + 0.2 â‰  0.3è§£æ</a></li>\n</ul>\n</li>\n<li><p><a href=\"https://www.ecma-international.org/publications/standards/Ecma-262.htm\" target=\"_blank\" rel=\"noopener\">ECMA-262</a></p>\n</li>\n</ul>\n<h2 id=\"Javascript-week03-05\"><a href=\"#Javascript-week03-05\" class=\"headerlink\" title=\"Javascript week03 ~ 05\"></a>Javascript week03 ~ 05</h2><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/a40944a8d5cbaf127ef177026ae1d60d108355.png\" alt=\"Javascript - xmind\"></li>\n<li><a href=\"https://ele-peng.github.io/2020/04/20/Javascript-Atom+Types/\" target=\"_blank\" rel=\"noopener\">Javascript-Atom + Types</a><ul>\n<li><a href=\"https://ele-peng.github.io/2020/04/24/convertStringToNumber/\" target=\"_blank\" rel=\"noopener\">convert String to Number</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/04/25/convertNumberToString/\" target=\"_blank\" rel=\"noopener\">convert Number to String</a></li>\n</ul>\n</li>\n<li><a href=\"https://ele-peng.github.io/2020/04/23/Javascript-Expressions/\" target=\"_blank\" rel=\"noopener\">Javascript-Expressions</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/04/26/Javascript-Statement/\" target=\"_blank\" rel=\"noopener\">Javascript-Statement</a></li>\n<li>Javascript-Structure<ul>\n<li><a href=\"https://ele-peng.github.io/2020/04/30/Javascript-%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/\" target=\"_blank\" rel=\"noopener\">äº”ä¸€ Elle å¿«è¦å†™åçš„ 45é“ promiseé¢è¯•é¢˜é¢˜è§£ï¼ˆä¸€ï¼‰</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/02/Javascrtip-%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%EF%BC%88%E4%BA%8C%EF%BC%89/\" target=\"_blank\" rel=\"noopener\">äº”ä¸€ Elle å¿«è¦å†™åçš„ 45é“ promiseé¢è¯•é¢˜é¢˜è§£ï¼ˆäºŒï¼‰</a></li>\n</ul>\n</li>\n<li>Javascript-Program/Module</li>\n<li>è‡ªå·±å¯¹<a href=\"https://ele-peng.github.io/2020/04/09/OOP-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/\" target=\"_blank\" rel=\"noopener\">é¢å‘å¯¹è±¡OOPç²—ç•¥çš„ç†è§£+Javascriptæ ‡å‡†é‡Œæ‰€æœ‰çš„å¯¹è±¡</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/08/Realm/\" target=\"_blank\" rel=\"noopener\">G6 antv å¯è§†åŒ– Realm ä¸­çš„æ‰€æœ‰å¯¹è±¡</a></li>\n</ul>\n<h2 id=\"æµè§ˆå™¨çš„å·¥ä½œåŸç†å’ŒAPI-week05-07\"><a href=\"#æµè§ˆå™¨çš„å·¥ä½œåŸç†å’ŒAPI-week05-07\" class=\"headerlink\" title=\"æµè§ˆå™¨çš„å·¥ä½œåŸç†å’ŒAPI week05 ~ 07\"></a>æµè§ˆå™¨çš„å·¥ä½œåŸç†å’ŒAPI week05 ~ 07</h2><h3 id=\"æµè§ˆå™¨çš„å·¥ä½œåŸç†\"><a href=\"#æµè§ˆå™¨çš„å·¥ä½œåŸç†\" class=\"headerlink\" title=\"æµè§ˆå™¨çš„å·¥ä½œåŸç†\"></a>æµè§ˆå™¨çš„å·¥ä½œåŸç†</h3><ul>\n<li><a href=\"https://ele-peng.github.io/2020/05/10/Toy-Browser-DAY1/\" target=\"_blank\" rel=\"noopener\">URL- HTTP åè®® + è¯­æ³•ä¸è¯æ³•åˆ†æ</a><ul>\n<li><a href=\"https://ele-peng.github.io/2020/05/12/%E4%BB%8EURL%E8%BE%93%E5%85%A5%E5%88%B0/\" target=\"_blank\" rel=\"noopener\">æœªå®Œ-ä»URLè¾“å…¥åˆ°é¡µé¢å±•ç°å‘ç”Ÿäº†ä»€ä¹ˆ</a></li>\n<li>FSM<ul>\n<li><a href=\"https://ele-peng.github.io/2020/05/16/%E5%9F%BA%E4%BA%8EKMP%E7%9A%84FSM%E5%A4%84%E7%90%86%E5%AD%97%E7%AC%A6%E4%B8%B2/\" target=\"_blank\" rel=\"noopener\">åŸºäºKMPçš„FSMå¤„ç† pattern</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"https://ele-peng.github.io/2020/05/15/Toy-Browser-DAY2/\" target=\"_blank\" rel=\"noopener\">HTML - Parser</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/17/Toy-Browser-DAY3/\" target=\"_blank\" rel=\"noopener\">CSS - CSS Computing</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/22/Toy-Browser-DAY4/\" target=\"_blank\" rel=\"noopener\">DOM with CSS - Layout</a><ul>\n<li>ä¸»è¦å®ç° flex layout</li>\n</ul>\n</li>\n<li><a href=\"https://ele-peng.github.io/2020/05/24/Toy-Browser-DAY5/\" target=\"_blank\" rel=\"noopener\">DOM with position - Render</a></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5c3903a71266e72d2e3f21a276c0efad94997.png\" alt=\"æµè§ˆå™¨å·¥ä½œåŸç†å›¾\"></li>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h3 id=\"æµè§ˆå™¨API\"><a href=\"#æµè§ˆå™¨API\" class=\"headerlink\" title=\"æµè§ˆå™¨API\"></a>æµè§ˆå™¨API</h3><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/64bf3e3fac9ab50d884671909e47b53c274299.png\" alt=\"Web-Apis\"></li>\n</ul>\n<h2 id=\"CSS-week-07-09\"><a href=\"#CSS-week-07-09\" class=\"headerlink\" title=\"CSS week 07 ~ 09\"></a>CSS week 07 ~ 09</h2><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/855b161fdbce05796f748906fa13987a182699.png\" alt=\"CSS - xmind\"></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/24/CSS%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-%E5%9F%BA%E7%A1%80%E6%9C%BA%E5%88%B6/\" target=\"_blank\" rel=\"noopener\">CSS åŸºæœ¬è¯­æ³•+åŸºç¡€æœºåˆ¶</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/29/CSS-%E9%80%89%E6%8B%A9%E5%99%A8/\" target=\"_blank\" rel=\"noopener\">CSS é€‰æ‹©å™¨</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/05/30/CSS-%E6%8E%92%E7%89%88/\" target=\"_blank\" rel=\"noopener\">CSS æ’ç‰ˆ</a></li>\n<li><a href=\"https://ele-peng.github.io/2020/06/06/CSS-%E5%8A%A8%E7%94%BB%E4%B8%8E%E7%BB%98%E5%88%B6/\" target=\"_blank\" rel=\"noopener\">CSS åŠ¨ç”»ä¸ç»˜åˆ¶</a></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/dfa2d75397034ebf8f6f854845a6729760145.png\" alt=\"CSS property\"><ul>\n<li><a href=\"https://ele-peng.github.io/2020/08/23/%E9%A2%9C%E8%89%B2%E7%A9%BA%E9%97%B4/\" target=\"_blank\" rel=\"noopener\">è‰²å½©ç©ºé—´</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"HTML-week-09-10\"><a href=\"#HTML-week-09-10\" class=\"headerlink\" title=\"HTML week 09 ~ 10\"></a>HTML week 09 ~ 10</h2><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/3d33254e89dce4bb6e40ceefe4c40945138850.png\" alt=\"HTML - xmind\"></li>\n<li><a href=\"https://ele-peng.github.io/2020/06/06/HTML-XML%E4%B8%8ESGML/\" target=\"_blank\" rel=\"noopener\">HTML - å…ƒç´ +è¯­è¨€+è¡¥å……æ ‡å‡†</a></li>\n</ul>\n<h2 id=\"ç¼–ç¨‹ä¸ç®—æ³•å®è·µ-week-10-13\"><a href=\"#ç¼–ç¨‹ä¸ç®—æ³•å®è·µ-week-10-13\" class=\"headerlink\" title=\"ç¼–ç¨‹ä¸ç®—æ³•å®è·µ week 10 ~ 13\"></a>ç¼–ç¨‹ä¸ç®—æ³•å®è·µ week 10 ~ 13</h2><h3 id=\"Tic-Tac-Toe\"><a href=\"#Tic-Tac-Toe\" class=\"headerlink\" title=\"Tic Tac Toe\"></a>Tic Tac Toe</h3><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week10/tic-tac-toe.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h3 id=\"å¯»è·¯ç®—æ³•ï¼ˆA-ï¼Œå¯å‘å¼ç®—æ³•ï¼Œdfsï¼Œbfsï¼‰\"><a href=\"#å¯»è·¯ç®—æ³•ï¼ˆA-ï¼Œå¯å‘å¼ç®—æ³•ï¼Œdfsï¼Œbfsï¼‰\" class=\"headerlink\" title=\"å¯»è·¯ç®—æ³•ï¼ˆA*ï¼Œå¯å‘å¼ç®—æ³•ï¼Œdfsï¼Œbfsï¼‰\"></a>å¯»è·¯ç®—æ³•ï¼ˆA*ï¼Œå¯å‘å¼ç®—æ³•ï¼Œdfsï¼Œbfsï¼‰</h3><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week11/roar-search.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h3 id=\"å››åˆ™è¿ç®—\"><a href=\"#å››åˆ™è¿ç®—\" class=\"headerlink\" title=\"å››åˆ™è¿ç®—\"></a>å››åˆ™è¿ç®—</h3><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/1x.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h3 id=\"å­—ç¬¦ä¸²ç®—æ³•\"><a href=\"#å­—ç¬¦ä¸²ç®—æ³•\" class=\"headerlink\" title=\"å­—ç¬¦ä¸²ç®—æ³•\"></a>å­—ç¬¦ä¸²ç®—æ³•</h3><h4 id=\"Trie-å­—å…¸æ ‘\"><a href=\"#Trie-å­—å…¸æ ‘\" class=\"headerlink\" title=\"Trie å­—å…¸æ ‘\"></a>Trie å­—å…¸æ ‘</h4><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/trie.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h4 id=\"KMP\"><a href=\"#KMP\" class=\"headerlink\" title=\"KMP\"></a>KMP</h4><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/KMP.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h4 id=\"WildCard\"><a href=\"#WildCard\" class=\"headerlink\" title=\"WildCard\"></a>WildCard</h4><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week12/wildcard.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h3 id=\"Proxy-ä¸åŒå‘ç»‘å®š\"><a href=\"#Proxy-ä¸åŒå‘ç»‘å®š\" class=\"headerlink\" title=\"Proxy ä¸åŒå‘ç»‘å®š\"></a>Proxy ä¸åŒå‘ç»‘å®š</h3><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week13/proxy.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h3 id=\"Range-å®ç°-DOM-ç²¾ç¡®æ“ä½œ\"><a href=\"#Range-å®ç°-DOM-ç²¾ç¡®æ“ä½œ\" class=\"headerlink\" title=\"Range å®ç° DOM ç²¾ç¡®æ“ä½œ\"></a>Range å®ç° DOM ç²¾ç¡®æ“ä½œ</h3><ul>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week13/dragable.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h2 id=\"ç»„ä»¶åŒ–-week-13-17\"><a href=\"#ç»„ä»¶åŒ–-week-13-17\" class=\"headerlink\" title=\"ç»„ä»¶åŒ– week 13 ~ 17\"></a>ç»„ä»¶åŒ– week 13 ~ 17</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/component\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n<li><a href=\"\">å¾…å†™-ç»„ä»¶åŒ–æ€è€ƒ</a></li>\n</ul>\n<h2 id=\"å·¥å…·é“¾-week-17-19\"><a href=\"#å·¥å…·é“¾-week-17-19\" class=\"headerlink\" title=\"å·¥å…·é“¾ week 17 ~ 19\"></a>å·¥å…·é“¾ week 17 ~ 19</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/tool-chain\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h2 id=\"å‘å¸ƒç³»ç»Ÿ-week19-21\"><a href=\"#å‘å¸ƒç³»ç»Ÿ-week19-21\" class=\"headerlink\" title=\"å‘å¸ƒç³»ç»Ÿ week19 ~ 21\"></a>å‘å¸ƒç³»ç»Ÿ week19 ~ 21</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/publish\" target=\"_blank\" rel=\"noopener\">å®Œæ•´é¡¹ç›®ä»£ç </a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Fibonacci","date":"2020-08-26T15:50:42.000Z","description":["ç®—æ³•"],"_content":"\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- [Fibonacci numbers](https://en.wikipedia.org/wiki/Fibonacci_number)\n- æ–æ³¢é‚£å¥‘æ•°åˆ—ç‰¹ç‚¹ï¼š\n\t-  F<sub>0</sub> = 0,F<sub>1</sub> = 1;\n\t-  F<sub>n</sub> = F<sub>n-1</sub> + F<sub>n-2</sub>;\n\t-  such as:\n\t\t- 0, 1, 1, 2, 3, 5, 8, 13, 21 ...\n\n<!-- more -->\n\n## åŸºç¡€å®ç°ï¼šé€’å½’å®ç°\n\n```javascript\n// é€’å½’ Time: O(2^n) Space: O(1)\nfunction fibonacci(n) {\n  if (n <= 1) {\n    return Math.max(n, 0);\n  }\n  return fibonacci(n - 1) + fibonacci(n - 2);\n}\n```\n\n\n## åˆçº§å®ç°ï¼šç®€å• for å¾ªåŒ–å®ç°\n\n\n```javascript\n// å¾ªç¯ Time: O(n) Space: O(n)\nfunction fibonacci(n) {\n  if (n <= 1) {\n    return Math.max(n, 0);\n  }\n  let res = [0, 1]\n  for (let i = 2; i < n; i ++) {\n    res.push(res[i - 1] + res[i - 2])\n  }\n  return res[n - 1];\n}\n```\n\t\n## ä¸­çº§å®ç°ï¼šç®€å• for å¾ªåŒ–å®ç°\n\n\n```javascript\n// é€’å½’ä¼˜åŒ–ï¼Œè·³è¿‡è®¡ç®—è¿‡çš„ä¸­é—´å˜é‡ Time: O(n) Space: O(n)\n// {\n  let res = [0]\n  function fibonacci(n) {\n    if (n <= 1) {\n      return res[n] = Math.max(n, 0);\n    }\n    if (res[n]) {\n      return res[n];\n    }\n    res[n] = fibonacci(n - 1) + fibonacci(n - 2);\n    return res[n]\n  }\n  // æ±‚æ•°ç»„ç¬¬åé¡¹çš„å€¼\n  fibonacci(9)\n// }\n```\t\n\n## é«˜çº§å®ç°ï¼šçŸ©é˜µä¹˜æ³• + å¿«é€Ÿå¹‚\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n\n\n","source":"_posts/Fibonacci.md","raw":"---\ntitle: Fibonacci\ndate: 2020-08-26 23:50:42\ntags: \n- writing\n- ç®—æ³•\ncategories:\n- ç®—æ³•\ndescription:\n- ç®—æ³•\n\n\n---\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- [Fibonacci numbers](https://en.wikipedia.org/wiki/Fibonacci_number)\n- æ–æ³¢é‚£å¥‘æ•°åˆ—ç‰¹ç‚¹ï¼š\n\t-  F<sub>0</sub> = 0,F<sub>1</sub> = 1;\n\t-  F<sub>n</sub> = F<sub>n-1</sub> + F<sub>n-2</sub>;\n\t-  such as:\n\t\t- 0, 1, 1, 2, 3, 5, 8, 13, 21 ...\n\n<!-- more -->\n\n## åŸºç¡€å®ç°ï¼šé€’å½’å®ç°\n\n```javascript\n// é€’å½’ Time: O(2^n) Space: O(1)\nfunction fibonacci(n) {\n  if (n <= 1) {\n    return Math.max(n, 0);\n  }\n  return fibonacci(n - 1) + fibonacci(n - 2);\n}\n```\n\n\n## åˆçº§å®ç°ï¼šç®€å• for å¾ªåŒ–å®ç°\n\n\n```javascript\n// å¾ªç¯ Time: O(n) Space: O(n)\nfunction fibonacci(n) {\n  if (n <= 1) {\n    return Math.max(n, 0);\n  }\n  let res = [0, 1]\n  for (let i = 2; i < n; i ++) {\n    res.push(res[i - 1] + res[i - 2])\n  }\n  return res[n - 1];\n}\n```\n\t\n## ä¸­çº§å®ç°ï¼šç®€å• for å¾ªåŒ–å®ç°\n\n\n```javascript\n// é€’å½’ä¼˜åŒ–ï¼Œè·³è¿‡è®¡ç®—è¿‡çš„ä¸­é—´å˜é‡ Time: O(n) Space: O(n)\n// {\n  let res = [0]\n  function fibonacci(n) {\n    if (n <= 1) {\n      return res[n] = Math.max(n, 0);\n    }\n    if (res[n]) {\n      return res[n];\n    }\n    res[n] = fibonacci(n - 1) + fibonacci(n - 2);\n    return res[n]\n  }\n  // æ±‚æ•°ç»„ç¬¬åé¡¹çš„å€¼\n  fibonacci(9)\n// }\n```\t\n\n## é«˜çº§å®ç°ï¼šçŸ©é˜µä¹˜æ³• + å¿«é€Ÿå¹‚\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n\n\n","slug":"Fibonacci","published":1,"updated":"2020-10-27T15:21:11.260Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7j000cfw9kc35p4l47","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Fibonacci_number\" target=\"_blank\" rel=\"noopener\">Fibonacci numbers</a></li>\n<li>æ–æ³¢é‚£å¥‘æ•°åˆ—ç‰¹ç‚¹ï¼š<ul>\n<li>F<sub>0</sub> = 0,F<sub>1</sub> = 1;</li>\n<li>F<sub>n</sub> = F<sub>n-1</sub> + F<sub>n-2</sub>;</li>\n<li>such as:<ul>\n<li>0, 1, 1, 2, 3, 5, 8, 13, 21 â€¦</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"åŸºç¡€å®ç°ï¼šé€’å½’å®ç°\"><a href=\"#åŸºç¡€å®ç°ï¼šé€’å½’å®ç°\" class=\"headerlink\" title=\"åŸºç¡€å®ç°ï¼šé€’å½’å®ç°\"></a>åŸºç¡€å®ç°ï¼šé€’å½’å®ç°</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é€’å½’ Time: O(2^n) Space: O(1)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fibonacci</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (n &lt;= <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.max(n, <span class=\"number\">0</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fibonacci(n - <span class=\"number\">1</span>) + fibonacci(n - <span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"åˆçº§å®ç°ï¼šç®€å•-for-å¾ªåŒ–å®ç°\"><a href=\"#åˆçº§å®ç°ï¼šç®€å•-for-å¾ªåŒ–å®ç°\" class=\"headerlink\" title=\"åˆçº§å®ç°ï¼šç®€å• for å¾ªåŒ–å®ç°\"></a>åˆçº§å®ç°ï¼šç®€å• for å¾ªåŒ–å®ç°</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¾ªç¯ Time: O(n) Space: O(n)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fibonacci</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (n &lt;= <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.max(n, <span class=\"number\">0</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = [<span class=\"number\">0</span>, <span class=\"number\">1</span>]</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">2</span>; i &lt; n; i ++) &#123;</span><br><span class=\"line\">    res.push(res[i - <span class=\"number\">1</span>] + res[i - <span class=\"number\">2</span>])</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res[n - <span class=\"number\">1</span>];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä¸­çº§å®ç°ï¼šç®€å•-for-å¾ªåŒ–å®ç°\"><a href=\"#ä¸­çº§å®ç°ï¼šç®€å•-for-å¾ªåŒ–å®ç°\" class=\"headerlink\" title=\"ä¸­çº§å®ç°ï¼šç®€å• for å¾ªåŒ–å®ç°\"></a>ä¸­çº§å®ç°ï¼šç®€å• for å¾ªåŒ–å®ç°</h2><pre><code class=\"javascript\"><span class=\"comment\">// é€’å½’ä¼˜åŒ–ï¼Œè·³è¿‡è®¡ç®—è¿‡çš„ä¸­é—´å˜é‡ Time: O(n) Space: O(n)</span>\n<span class=\"comment\">// {</span>\n  <span class=\"keyword\">let</span> res = [<span class=\"number\">0</span>]\n  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fibonacci</span>(<span class=\"params\">n</span>) </span>{\n    <span class=\"keyword\">if</span> (n &lt;= <span class=\"number\">1</span>) {\n      <span class=\"keyword\">return</span> res[n] = <span class=\"built_in\">Math</span>.max(n, <span class=\"number\">0</span>);\n    }\n    <span class=\"keyword\">if</span> (res[n]) {\n      <span class=\"keyword\">return</span> res[n];\n    }\n    res[n] = fibonacci(n - <span class=\"number\">1</span>) + fibonacci(n - <span class=\"number\">2</span>);\n    <span class=\"keyword\">return</span> res[n]\n  }\n  <span class=\"comment\">// æ±‚æ•°ç»„ç¬¬åé¡¹çš„å€¼</span>\n  fibonacci(<span class=\"number\">9</span>)\n<span class=\"comment\">// }</span></code></pre>\n<h2 id=\"é«˜çº§å®ç°ï¼šçŸ©é˜µä¹˜æ³•-å¿«é€Ÿå¹‚\"><a href=\"#é«˜çº§å®ç°ï¼šçŸ©é˜µä¹˜æ³•-å¿«é€Ÿå¹‚\" class=\"headerlink\" title=\"é«˜çº§å®ç°ï¼šçŸ©é˜µä¹˜æ³• + å¿«é€Ÿå¹‚\"></a>é«˜çº§å®ç°ï¼šçŸ©é˜µä¹˜æ³• + å¿«é€Ÿå¹‚</h2><h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Fibonacci_number\" target=\"_blank\" rel=\"noopener\">Fibonacci numbers</a></li>\n<li>æ–æ³¢é‚£å¥‘æ•°åˆ—ç‰¹ç‚¹ï¼š<ul>\n<li>F<sub>0</sub> = 0,F<sub>1</sub> = 1;</li>\n<li>F<sub>n</sub> = F<sub>n-1</sub> + F<sub>n-2</sub>;</li>\n<li>such as:<ul>\n<li>0, 1, 1, 2, 3, 5, 8, 13, 21 â€¦</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","more":"<h2 id=\"åŸºç¡€å®ç°ï¼šé€’å½’å®ç°\"><a href=\"#åŸºç¡€å®ç°ï¼šé€’å½’å®ç°\" class=\"headerlink\" title=\"åŸºç¡€å®ç°ï¼šé€’å½’å®ç°\"></a>åŸºç¡€å®ç°ï¼šé€’å½’å®ç°</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é€’å½’ Time: O(2^n) Space: O(1)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fibonacci</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (n &lt;= <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.max(n, <span class=\"number\">0</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fibonacci(n - <span class=\"number\">1</span>) + fibonacci(n - <span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"åˆçº§å®ç°ï¼šç®€å•-for-å¾ªåŒ–å®ç°\"><a href=\"#åˆçº§å®ç°ï¼šç®€å•-for-å¾ªåŒ–å®ç°\" class=\"headerlink\" title=\"åˆçº§å®ç°ï¼šç®€å• for å¾ªåŒ–å®ç°\"></a>åˆçº§å®ç°ï¼šç®€å• for å¾ªåŒ–å®ç°</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¾ªç¯ Time: O(n) Space: O(n)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fibonacci</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (n &lt;= <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.max(n, <span class=\"number\">0</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = [<span class=\"number\">0</span>, <span class=\"number\">1</span>]</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">2</span>; i &lt; n; i ++) &#123;</span><br><span class=\"line\">    res.push(res[i - <span class=\"number\">1</span>] + res[i - <span class=\"number\">2</span>])</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res[n - <span class=\"number\">1</span>];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä¸­çº§å®ç°ï¼šç®€å•-for-å¾ªåŒ–å®ç°\"><a href=\"#ä¸­çº§å®ç°ï¼šç®€å•-for-å¾ªåŒ–å®ç°\" class=\"headerlink\" title=\"ä¸­çº§å®ç°ï¼šç®€å• for å¾ªåŒ–å®ç°\"></a>ä¸­çº§å®ç°ï¼šç®€å• for å¾ªåŒ–å®ç°</h2><pre><code class=\"javascript\"><span class=\"comment\">// é€’å½’ä¼˜åŒ–ï¼Œè·³è¿‡è®¡ç®—è¿‡çš„ä¸­é—´å˜é‡ Time: O(n) Space: O(n)</span>\n<span class=\"comment\">// {</span>\n  <span class=\"keyword\">let</span> res = [<span class=\"number\">0</span>]\n  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fibonacci</span>(<span class=\"params\">n</span>) </span>{\n    <span class=\"keyword\">if</span> (n &lt;= <span class=\"number\">1</span>) {\n      <span class=\"keyword\">return</span> res[n] = <span class=\"built_in\">Math</span>.max(n, <span class=\"number\">0</span>);\n    }\n    <span class=\"keyword\">if</span> (res[n]) {\n      <span class=\"keyword\">return</span> res[n];\n    }\n    res[n] = fibonacci(n - <span class=\"number\">1</span>) + fibonacci(n - <span class=\"number\">2</span>);\n    <span class=\"keyword\">return</span> res[n]\n  }\n  <span class=\"comment\">// æ±‚æ•°ç»„ç¬¬åé¡¹çš„å€¼</span>\n  fibonacci(<span class=\"number\">9</span>)\n<span class=\"comment\">// }</span></code></pre>\n<h2 id=\"é«˜çº§å®ç°ï¼šçŸ©é˜µä¹˜æ³•-å¿«é€Ÿå¹‚\"><a href=\"#é«˜çº§å®ç°ï¼šçŸ©é˜µä¹˜æ³•-å¿«é€Ÿå¹‚\" class=\"headerlink\" title=\"é«˜çº§å®ç°ï¼šçŸ©é˜µä¹˜æ³• + å¿«é€Ÿå¹‚\"></a>é«˜çº§å®ç°ï¼šçŸ©é˜µä¹˜æ³• + å¿«é€Ÿå¹‚</h2><h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Elle-è®­ç»ƒç®—æ³•è®¡åˆ’","date":"2020-04-06T10:37:00.000Z","description":["ç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±æ•´ä¸ªç®—æ³•è®­ç»ƒçš„åŸºç¡€æ­¥éª¤+å­¦ä¹ æ–¹æ³•"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- ç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±æ•´ä¸ªç®—æ³•è®­ç»ƒçš„åŸºç¡€æ­¥éª¤+å­¦ä¹ æ–¹æ³•\n- ä¸»è¦çš„æ•°æ®ç»“æ„å’Œç®—æ³•ä¼šå•å¼€æ–‡æ¡£æ¥å†™\n\n<!-- more -->\n## Chunk it up åˆ‡ç¢çŸ¥è¯†ç‚¹\n- æ•°æ®ç»“æ„\n\t- ä¸€ç»´æ•°æ®ç»“æ„\n\t\t- åŸºç¡€ï¼šæ•°ç»„ array(string), é“¾è¡¨ linked list\n\t\t- é«˜çº§ï¼šæ ˆ stack, é˜Ÿåˆ— queue, åŒç«¯é˜Ÿåˆ— deque, é›†åˆ set, æ˜ å°„ map (hash or map), etc\n\t- äºŒç»´æ•°æ®ç»“æ„\n\t\t- ä¸€ç»´æ³›åŒ–\n\t\t- åŸºç¡€ï¼šæ ‘ treeï¼Œå›¾ graph\n\t\t- é«˜çº§ï¼šäºŒå‰æœç´¢æ ‘ binary search tree (red-black tree, AVL)ï¼Œå † heap, å¹¶æŸ¥é›† disjoint set, å­—å…¸æ ‘ trie, etc\n\t- ç‰¹æ®Šæ•°æ®ç»“æ„\n\t\t-  ä½è¿ç®— bitwise, å¸ƒéš†è¿‡æ»¤å™¨ bloom filter\n\t\t-  LRU Cache\n- ç®—æ³•\n\t- if-else, switch --> branch\n\t- for, while loop --> iteration\n\t- é€’å½’ recursion (divide & conquer åˆ†æ²», backtrace å›æº¯)\n\t- æœç´¢ search: æ·±åº¦ä¼˜å…ˆæœç´¢ depth first search, å¹¿åº¦ä¼˜å…ˆæœç´¢ breadth first search, A* (å¯å‘å¼æœç´¢), etc\n\t- åŠ¨æ€è§„åˆ’ dynamic programing\n\t- äºŒåˆ†æŸ¥æ‰¾ binary search\n\t- è´ªå¿ƒ greedy\n\t- æ•°å­¦ math, é›†åˆ geometry\n\n## Deliberate Practicing åˆ»æ„ç»ƒä¹ \n- åˆ»æ„ç»ƒä¹ -è¿‡éæ•° (äº”éåˆ·é¢˜æ³•)\n\t- åˆ·é¢˜ç¬¬ä¸€é\n\t\t- 5åˆ†é’Ÿï¼ˆ5~15 minsï¼‰ï¼šè¯»é¢˜+æ€è€ƒ\n\t\t- ç›´æ¥çœ‹è§£æ³•ï¼šæ³¨æ„ï¼å¤šè§£æ³•ï¼Œæ¯”è¾ƒè§£ä¹ä¼˜åŠ£\n\t\t- æœ‰æ€è·¯ï¼Œç›´æ¥å†™\n\t\t- èƒŒè¯µ+é»˜å†™å¥½çš„è§£æ³•\n\t- åˆ·é¢˜ç¬¬äºŒé\n\t\t- é©¬ä¸Šè‡ªå·±å†™ --> LeetCodeæäº¤\n\t\t- å¤šç§è§£æ³•æ¯”è¾ƒã€ä½“ä¼š --> ä¼˜åŒ–\n\t\t- å¤šç§è§£æ³•è‡ªå·±å†™ä¸€éï¼Œç›´åˆ°é€šè¿‡\n\t- åˆ·é¢˜ç¬¬ä¸‰é\n\t\t- 24håï¼Œå†é‡å¤åšé¢˜\n\t\t- ä¸åŒè§£æ³•çš„ç†Ÿç»ƒç¨‹åº¦ --> ä¸“é¡¹ç»ƒä¹ \n\t- åˆ·é¢˜ç¬¬å››é\n\t\t- è¿‡äº†ä¸€å‘¨åï¼šåå¤å›æ¥ç»ƒä¹ ç›¸åŒçš„é¢˜ç›®\n\t\t- ä¸ç†Ÿç»ƒçš„é¢˜ç›® --> ä¸“é¡¹ç»ƒä¹ \n\t- åˆ·é¢˜ç¬¬äº”é\n\t\t- é¢è¯•å‰äºŒå‘¨æ¢å¤æ€§è®­ç»ƒ\n- ç»ƒä¹ ç¼ºé™·ã€å¼±ç‚¹åœ°æ–¹\n\t- ä¸­æ–‡ç«™ leetcode-cn.com åˆ·é¢˜\n\t- å›½é™…ç«™ leetcode.com çœ‹discuss-most votes\n- åˆ‡é¢˜\n\t- **Clarification å®¡é¢˜**\n\t- **Possible Solutions**\n\t\t- compare (time/space)\n\t\t- optimal (åŠ å¼º)\n\t- **Coding**\n\t- **Test cases**\n\n## Feedback åé¦ˆ\n- å³æ—¶åé¦ˆ\n- ä¸»åŠ¨å‹åé¦ˆ\n- è¢«åŠ¨å‹åé¦ˆ\n\t- code review\n\n## æŒ‡æ³•\n- top tips for vscode\n\n## è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼\n- [è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼](http://markhneedham.com/blog/2008/09/15/clean-code-book-review/)\n\n## Big O Notation\n- O(1): constant Complexity å¸¸æ•°å¤æ‚åº¦\n- O(log n): Logarithmic Complexity å¯¹æ•°å¤æ‚åº¦\n- O(n): Linear Complexity çº¿æ€§æ—¶é—´å¤æ‚åº¦\n- O(n^2): N square Complexity å¹³æ–¹\n- O(n^3): N cube Complexity ç«‹æ–¹\n- O(2^n): Exponential Growth æŒ‡æ•°\n- O(n!): Factorial é˜¶ä¹˜\n- ![æ—¶é—´å¤æ‚åº¦](http://p0.meituan.net/myvideodistribute/c88294c6a8b88448ae14e2914c7bbfd2337181.png)\n\n## master theorem\n- äºŒåˆ†æŸ¥æ‰¾\n- äºŒå‰æ ‘çš„éå†ï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½è®¿é—®ä¸€æ¬¡ï¼Œä¸”ä»…è®¿é—®ä¸€æ¬¡ï¼‰\n- äºŒç»´æœ‰åºçŸ©é˜µ\n- å½’å¹¶æ’åº O(nlogn)\n- ![ä¸»å®šç†](http://p1.meituan.net/myvideodistribute/5b978d58635ea2e9233ea5e502ab706f246540.png)","source":"_posts/Elle-è®­ç»ƒç®—æ³•è®¡åˆ’.md","raw":"---\ntitle: Elle-è®­ç»ƒç®—æ³•è®¡åˆ’\ndate: 2020-04-06 18:37:00\ntags: \n- ç®—æ³•\ncategories:\n- ç®—æ³•\ndescription:\n- ç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±æ•´ä¸ªç®—æ³•è®­ç»ƒçš„åŸºç¡€æ­¥éª¤+å­¦ä¹ æ–¹æ³•\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- ç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±æ•´ä¸ªç®—æ³•è®­ç»ƒçš„åŸºç¡€æ­¥éª¤+å­¦ä¹ æ–¹æ³•\n- ä¸»è¦çš„æ•°æ®ç»“æ„å’Œç®—æ³•ä¼šå•å¼€æ–‡æ¡£æ¥å†™\n\n<!-- more -->\n## Chunk it up åˆ‡ç¢çŸ¥è¯†ç‚¹\n- æ•°æ®ç»“æ„\n\t- ä¸€ç»´æ•°æ®ç»“æ„\n\t\t- åŸºç¡€ï¼šæ•°ç»„ array(string), é“¾è¡¨ linked list\n\t\t- é«˜çº§ï¼šæ ˆ stack, é˜Ÿåˆ— queue, åŒç«¯é˜Ÿåˆ— deque, é›†åˆ set, æ˜ å°„ map (hash or map), etc\n\t- äºŒç»´æ•°æ®ç»“æ„\n\t\t- ä¸€ç»´æ³›åŒ–\n\t\t- åŸºç¡€ï¼šæ ‘ treeï¼Œå›¾ graph\n\t\t- é«˜çº§ï¼šäºŒå‰æœç´¢æ ‘ binary search tree (red-black tree, AVL)ï¼Œå † heap, å¹¶æŸ¥é›† disjoint set, å­—å…¸æ ‘ trie, etc\n\t- ç‰¹æ®Šæ•°æ®ç»“æ„\n\t\t-  ä½è¿ç®— bitwise, å¸ƒéš†è¿‡æ»¤å™¨ bloom filter\n\t\t-  LRU Cache\n- ç®—æ³•\n\t- if-else, switch --> branch\n\t- for, while loop --> iteration\n\t- é€’å½’ recursion (divide & conquer åˆ†æ²», backtrace å›æº¯)\n\t- æœç´¢ search: æ·±åº¦ä¼˜å…ˆæœç´¢ depth first search, å¹¿åº¦ä¼˜å…ˆæœç´¢ breadth first search, A* (å¯å‘å¼æœç´¢), etc\n\t- åŠ¨æ€è§„åˆ’ dynamic programing\n\t- äºŒåˆ†æŸ¥æ‰¾ binary search\n\t- è´ªå¿ƒ greedy\n\t- æ•°å­¦ math, é›†åˆ geometry\n\n## Deliberate Practicing åˆ»æ„ç»ƒä¹ \n- åˆ»æ„ç»ƒä¹ -è¿‡éæ•° (äº”éåˆ·é¢˜æ³•)\n\t- åˆ·é¢˜ç¬¬ä¸€é\n\t\t- 5åˆ†é’Ÿï¼ˆ5~15 minsï¼‰ï¼šè¯»é¢˜+æ€è€ƒ\n\t\t- ç›´æ¥çœ‹è§£æ³•ï¼šæ³¨æ„ï¼å¤šè§£æ³•ï¼Œæ¯”è¾ƒè§£ä¹ä¼˜åŠ£\n\t\t- æœ‰æ€è·¯ï¼Œç›´æ¥å†™\n\t\t- èƒŒè¯µ+é»˜å†™å¥½çš„è§£æ³•\n\t- åˆ·é¢˜ç¬¬äºŒé\n\t\t- é©¬ä¸Šè‡ªå·±å†™ --> LeetCodeæäº¤\n\t\t- å¤šç§è§£æ³•æ¯”è¾ƒã€ä½“ä¼š --> ä¼˜åŒ–\n\t\t- å¤šç§è§£æ³•è‡ªå·±å†™ä¸€éï¼Œç›´åˆ°é€šè¿‡\n\t- åˆ·é¢˜ç¬¬ä¸‰é\n\t\t- 24håï¼Œå†é‡å¤åšé¢˜\n\t\t- ä¸åŒè§£æ³•çš„ç†Ÿç»ƒç¨‹åº¦ --> ä¸“é¡¹ç»ƒä¹ \n\t- åˆ·é¢˜ç¬¬å››é\n\t\t- è¿‡äº†ä¸€å‘¨åï¼šåå¤å›æ¥ç»ƒä¹ ç›¸åŒçš„é¢˜ç›®\n\t\t- ä¸ç†Ÿç»ƒçš„é¢˜ç›® --> ä¸“é¡¹ç»ƒä¹ \n\t- åˆ·é¢˜ç¬¬äº”é\n\t\t- é¢è¯•å‰äºŒå‘¨æ¢å¤æ€§è®­ç»ƒ\n- ç»ƒä¹ ç¼ºé™·ã€å¼±ç‚¹åœ°æ–¹\n\t- ä¸­æ–‡ç«™ leetcode-cn.com åˆ·é¢˜\n\t- å›½é™…ç«™ leetcode.com çœ‹discuss-most votes\n- åˆ‡é¢˜\n\t- **Clarification å®¡é¢˜**\n\t- **Possible Solutions**\n\t\t- compare (time/space)\n\t\t- optimal (åŠ å¼º)\n\t- **Coding**\n\t- **Test cases**\n\n## Feedback åé¦ˆ\n- å³æ—¶åé¦ˆ\n- ä¸»åŠ¨å‹åé¦ˆ\n- è¢«åŠ¨å‹åé¦ˆ\n\t- code review\n\n## æŒ‡æ³•\n- top tips for vscode\n\n## è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼\n- [è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼](http://markhneedham.com/blog/2008/09/15/clean-code-book-review/)\n\n## Big O Notation\n- O(1): constant Complexity å¸¸æ•°å¤æ‚åº¦\n- O(log n): Logarithmic Complexity å¯¹æ•°å¤æ‚åº¦\n- O(n): Linear Complexity çº¿æ€§æ—¶é—´å¤æ‚åº¦\n- O(n^2): N square Complexity å¹³æ–¹\n- O(n^3): N cube Complexity ç«‹æ–¹\n- O(2^n): Exponential Growth æŒ‡æ•°\n- O(n!): Factorial é˜¶ä¹˜\n- ![æ—¶é—´å¤æ‚åº¦](http://p0.meituan.net/myvideodistribute/c88294c6a8b88448ae14e2914c7bbfd2337181.png)\n\n## master theorem\n- äºŒåˆ†æŸ¥æ‰¾\n- äºŒå‰æ ‘çš„éå†ï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½è®¿é—®ä¸€æ¬¡ï¼Œä¸”ä»…è®¿é—®ä¸€æ¬¡ï¼‰\n- äºŒç»´æœ‰åºçŸ©é˜µ\n- å½’å¹¶æ’åº O(nlogn)\n- ![ä¸»å®šç†](http://p1.meituan.net/myvideodistribute/5b978d58635ea2e9233ea5e502ab706f246540.png)","slug":"Elle-è®­ç»ƒç®—æ³•è®¡åˆ’","published":1,"updated":"2020-10-27T15:21:11.260Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7m000hfw9k2ht63p3y","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>ç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±æ•´ä¸ªç®—æ³•è®­ç»ƒçš„åŸºç¡€æ­¥éª¤+å­¦ä¹ æ–¹æ³•</li>\n<li>ä¸»è¦çš„æ•°æ®ç»“æ„å’Œç®—æ³•ä¼šå•å¼€æ–‡æ¡£æ¥å†™</li>\n</ul>\n<a id=\"more\"></a>\n<h2 id=\"Chunk-it-up-åˆ‡ç¢çŸ¥è¯†ç‚¹\"><a href=\"#Chunk-it-up-åˆ‡ç¢çŸ¥è¯†ç‚¹\" class=\"headerlink\" title=\"Chunk it up åˆ‡ç¢çŸ¥è¯†ç‚¹\"></a>Chunk it up åˆ‡ç¢çŸ¥è¯†ç‚¹</h2><ul>\n<li>æ•°æ®ç»“æ„<ul>\n<li>ä¸€ç»´æ•°æ®ç»“æ„<ul>\n<li>åŸºç¡€ï¼šæ•°ç»„ array(string), é“¾è¡¨ linked list</li>\n<li>é«˜çº§ï¼šæ ˆ stack, é˜Ÿåˆ— queue, åŒç«¯é˜Ÿåˆ— deque, é›†åˆ set, æ˜ å°„ map (hash or map), etc</li>\n</ul>\n</li>\n<li>äºŒç»´æ•°æ®ç»“æ„<ul>\n<li>ä¸€ç»´æ³›åŒ–</li>\n<li>åŸºç¡€ï¼šæ ‘ treeï¼Œå›¾ graph</li>\n<li>é«˜çº§ï¼šäºŒå‰æœç´¢æ ‘ binary search tree (red-black tree, AVL)ï¼Œå † heap, å¹¶æŸ¥é›† disjoint set, å­—å…¸æ ‘ trie, etc</li>\n</ul>\n</li>\n<li>ç‰¹æ®Šæ•°æ®ç»“æ„<ul>\n<li>ä½è¿ç®— bitwise, å¸ƒéš†è¿‡æ»¤å™¨ bloom filter</li>\n<li>LRU Cache</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ç®—æ³•<ul>\n<li>if-else, switch â€“&gt; branch</li>\n<li>for, while loop â€“&gt; iteration</li>\n<li>é€’å½’ recursion (divide &amp; conquer åˆ†æ²», backtrace å›æº¯)</li>\n<li>æœç´¢ search: æ·±åº¦ä¼˜å…ˆæœç´¢ depth first search, å¹¿åº¦ä¼˜å…ˆæœç´¢ breadth first search, A* (å¯å‘å¼æœç´¢), etc</li>\n<li>åŠ¨æ€è§„åˆ’ dynamic programing</li>\n<li>äºŒåˆ†æŸ¥æ‰¾ binary search</li>\n<li>è´ªå¿ƒ greedy</li>\n<li>æ•°å­¦ math, é›†åˆ geometry</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Deliberate-Practicing-åˆ»æ„ç»ƒä¹ \"><a href=\"#Deliberate-Practicing-åˆ»æ„ç»ƒä¹ \" class=\"headerlink\" title=\"Deliberate Practicing åˆ»æ„ç»ƒä¹ \"></a>Deliberate Practicing åˆ»æ„ç»ƒä¹ </h2><ul>\n<li>åˆ»æ„ç»ƒä¹ -è¿‡éæ•° (äº”éåˆ·é¢˜æ³•)<ul>\n<li>åˆ·é¢˜ç¬¬ä¸€é<ul>\n<li>5åˆ†é’Ÿï¼ˆ5~15 minsï¼‰ï¼šè¯»é¢˜+æ€è€ƒ</li>\n<li>ç›´æ¥çœ‹è§£æ³•ï¼šæ³¨æ„ï¼å¤šè§£æ³•ï¼Œæ¯”è¾ƒè§£ä¹ä¼˜åŠ£</li>\n<li>æœ‰æ€è·¯ï¼Œç›´æ¥å†™</li>\n<li>èƒŒè¯µ+é»˜å†™å¥½çš„è§£æ³•</li>\n</ul>\n</li>\n<li>åˆ·é¢˜ç¬¬äºŒé<ul>\n<li>é©¬ä¸Šè‡ªå·±å†™ â€“&gt; LeetCodeæäº¤</li>\n<li>å¤šç§è§£æ³•æ¯”è¾ƒã€ä½“ä¼š â€“&gt; ä¼˜åŒ–</li>\n<li>å¤šç§è§£æ³•è‡ªå·±å†™ä¸€éï¼Œç›´åˆ°é€šè¿‡</li>\n</ul>\n</li>\n<li>åˆ·é¢˜ç¬¬ä¸‰é<ul>\n<li>24håï¼Œå†é‡å¤åšé¢˜</li>\n<li>ä¸åŒè§£æ³•çš„ç†Ÿç»ƒç¨‹åº¦ â€“&gt; ä¸“é¡¹ç»ƒä¹ </li>\n</ul>\n</li>\n<li>åˆ·é¢˜ç¬¬å››é<ul>\n<li>è¿‡äº†ä¸€å‘¨åï¼šåå¤å›æ¥ç»ƒä¹ ç›¸åŒçš„é¢˜ç›®</li>\n<li>ä¸ç†Ÿç»ƒçš„é¢˜ç›® â€“&gt; ä¸“é¡¹ç»ƒä¹ </li>\n</ul>\n</li>\n<li>åˆ·é¢˜ç¬¬äº”é<ul>\n<li>é¢è¯•å‰äºŒå‘¨æ¢å¤æ€§è®­ç»ƒ</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ç»ƒä¹ ç¼ºé™·ã€å¼±ç‚¹åœ°æ–¹<ul>\n<li>ä¸­æ–‡ç«™ leetcode-cn.com åˆ·é¢˜</li>\n<li>å›½é™…ç«™ leetcode.com çœ‹discuss-most votes</li>\n</ul>\n</li>\n<li>åˆ‡é¢˜<ul>\n<li><strong>Clarification å®¡é¢˜</strong></li>\n<li><strong>Possible Solutions</strong><ul>\n<li>compare (time/space)</li>\n<li>optimal (åŠ å¼º)</li>\n</ul>\n</li>\n<li><strong>Coding</strong></li>\n<li><strong>Test cases</strong></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Feedback-åé¦ˆ\"><a href=\"#Feedback-åé¦ˆ\" class=\"headerlink\" title=\"Feedback åé¦ˆ\"></a>Feedback åé¦ˆ</h2><ul>\n<li>å³æ—¶åé¦ˆ</li>\n<li>ä¸»åŠ¨å‹åé¦ˆ</li>\n<li>è¢«åŠ¨å‹åé¦ˆ<ul>\n<li>code review</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"æŒ‡æ³•\"><a href=\"#æŒ‡æ³•\" class=\"headerlink\" title=\"æŒ‡æ³•\"></a>æŒ‡æ³•</h2><ul>\n<li>top tips for vscode</li>\n</ul>\n<h2 id=\"è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼\"><a href=\"#è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼\" class=\"headerlink\" title=\"è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼\"></a>è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼</h2><ul>\n<li><a href=\"http://markhneedham.com/blog/2008/09/15/clean-code-book-review/\" target=\"_blank\" rel=\"noopener\">è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼</a></li>\n</ul>\n<h2 id=\"Big-O-Notation\"><a href=\"#Big-O-Notation\" class=\"headerlink\" title=\"Big O Notation\"></a>Big O Notation</h2><ul>\n<li>O(1): constant Complexity å¸¸æ•°å¤æ‚åº¦</li>\n<li>O(log n): Logarithmic Complexity å¯¹æ•°å¤æ‚åº¦</li>\n<li>O(n): Linear Complexity çº¿æ€§æ—¶é—´å¤æ‚åº¦</li>\n<li>O(n^2): N square Complexity å¹³æ–¹</li>\n<li>O(n^3): N cube Complexity ç«‹æ–¹</li>\n<li>O(2^n): Exponential Growth æŒ‡æ•°</li>\n<li>O(n!): Factorial é˜¶ä¹˜</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c88294c6a8b88448ae14e2914c7bbfd2337181.png\" alt=\"æ—¶é—´å¤æ‚åº¦\"></li>\n</ul>\n<h2 id=\"master-theorem\"><a href=\"#master-theorem\" class=\"headerlink\" title=\"master theorem\"></a>master theorem</h2><ul>\n<li>äºŒåˆ†æŸ¥æ‰¾</li>\n<li>äºŒå‰æ ‘çš„éå†ï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½è®¿é—®ä¸€æ¬¡ï¼Œä¸”ä»…è®¿é—®ä¸€æ¬¡ï¼‰</li>\n<li>äºŒç»´æœ‰åºçŸ©é˜µ</li>\n<li>å½’å¹¶æ’åº O(nlogn)</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/5b978d58635ea2e9233ea5e502ab706f246540.png\" alt=\"ä¸»å®šç†\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>ç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±æ•´ä¸ªç®—æ³•è®­ç»ƒçš„åŸºç¡€æ­¥éª¤+å­¦ä¹ æ–¹æ³•</li>\n<li>ä¸»è¦çš„æ•°æ®ç»“æ„å’Œç®—æ³•ä¼šå•å¼€æ–‡æ¡£æ¥å†™</li>\n</ul>","more":"<h2 id=\"Chunk-it-up-åˆ‡ç¢çŸ¥è¯†ç‚¹\"><a href=\"#Chunk-it-up-åˆ‡ç¢çŸ¥è¯†ç‚¹\" class=\"headerlink\" title=\"Chunk it up åˆ‡ç¢çŸ¥è¯†ç‚¹\"></a>Chunk it up åˆ‡ç¢çŸ¥è¯†ç‚¹</h2><ul>\n<li>æ•°æ®ç»“æ„<ul>\n<li>ä¸€ç»´æ•°æ®ç»“æ„<ul>\n<li>åŸºç¡€ï¼šæ•°ç»„ array(string), é“¾è¡¨ linked list</li>\n<li>é«˜çº§ï¼šæ ˆ stack, é˜Ÿåˆ— queue, åŒç«¯é˜Ÿåˆ— deque, é›†åˆ set, æ˜ å°„ map (hash or map), etc</li>\n</ul>\n</li>\n<li>äºŒç»´æ•°æ®ç»“æ„<ul>\n<li>ä¸€ç»´æ³›åŒ–</li>\n<li>åŸºç¡€ï¼šæ ‘ treeï¼Œå›¾ graph</li>\n<li>é«˜çº§ï¼šäºŒå‰æœç´¢æ ‘ binary search tree (red-black tree, AVL)ï¼Œå † heap, å¹¶æŸ¥é›† disjoint set, å­—å…¸æ ‘ trie, etc</li>\n</ul>\n</li>\n<li>ç‰¹æ®Šæ•°æ®ç»“æ„<ul>\n<li>ä½è¿ç®— bitwise, å¸ƒéš†è¿‡æ»¤å™¨ bloom filter</li>\n<li>LRU Cache</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ç®—æ³•<ul>\n<li>if-else, switch â€“&gt; branch</li>\n<li>for, while loop â€“&gt; iteration</li>\n<li>é€’å½’ recursion (divide &amp; conquer åˆ†æ²», backtrace å›æº¯)</li>\n<li>æœç´¢ search: æ·±åº¦ä¼˜å…ˆæœç´¢ depth first search, å¹¿åº¦ä¼˜å…ˆæœç´¢ breadth first search, A* (å¯å‘å¼æœç´¢), etc</li>\n<li>åŠ¨æ€è§„åˆ’ dynamic programing</li>\n<li>äºŒåˆ†æŸ¥æ‰¾ binary search</li>\n<li>è´ªå¿ƒ greedy</li>\n<li>æ•°å­¦ math, é›†åˆ geometry</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Deliberate-Practicing-åˆ»æ„ç»ƒä¹ \"><a href=\"#Deliberate-Practicing-åˆ»æ„ç»ƒä¹ \" class=\"headerlink\" title=\"Deliberate Practicing åˆ»æ„ç»ƒä¹ \"></a>Deliberate Practicing åˆ»æ„ç»ƒä¹ </h2><ul>\n<li>åˆ»æ„ç»ƒä¹ -è¿‡éæ•° (äº”éåˆ·é¢˜æ³•)<ul>\n<li>åˆ·é¢˜ç¬¬ä¸€é<ul>\n<li>5åˆ†é’Ÿï¼ˆ5~15 minsï¼‰ï¼šè¯»é¢˜+æ€è€ƒ</li>\n<li>ç›´æ¥çœ‹è§£æ³•ï¼šæ³¨æ„ï¼å¤šè§£æ³•ï¼Œæ¯”è¾ƒè§£ä¹ä¼˜åŠ£</li>\n<li>æœ‰æ€è·¯ï¼Œç›´æ¥å†™</li>\n<li>èƒŒè¯µ+é»˜å†™å¥½çš„è§£æ³•</li>\n</ul>\n</li>\n<li>åˆ·é¢˜ç¬¬äºŒé<ul>\n<li>é©¬ä¸Šè‡ªå·±å†™ â€“&gt; LeetCodeæäº¤</li>\n<li>å¤šç§è§£æ³•æ¯”è¾ƒã€ä½“ä¼š â€“&gt; ä¼˜åŒ–</li>\n<li>å¤šç§è§£æ³•è‡ªå·±å†™ä¸€éï¼Œç›´åˆ°é€šè¿‡</li>\n</ul>\n</li>\n<li>åˆ·é¢˜ç¬¬ä¸‰é<ul>\n<li>24håï¼Œå†é‡å¤åšé¢˜</li>\n<li>ä¸åŒè§£æ³•çš„ç†Ÿç»ƒç¨‹åº¦ â€“&gt; ä¸“é¡¹ç»ƒä¹ </li>\n</ul>\n</li>\n<li>åˆ·é¢˜ç¬¬å››é<ul>\n<li>è¿‡äº†ä¸€å‘¨åï¼šåå¤å›æ¥ç»ƒä¹ ç›¸åŒçš„é¢˜ç›®</li>\n<li>ä¸ç†Ÿç»ƒçš„é¢˜ç›® â€“&gt; ä¸“é¡¹ç»ƒä¹ </li>\n</ul>\n</li>\n<li>åˆ·é¢˜ç¬¬äº”é<ul>\n<li>é¢è¯•å‰äºŒå‘¨æ¢å¤æ€§è®­ç»ƒ</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ç»ƒä¹ ç¼ºé™·ã€å¼±ç‚¹åœ°æ–¹<ul>\n<li>ä¸­æ–‡ç«™ leetcode-cn.com åˆ·é¢˜</li>\n<li>å›½é™…ç«™ leetcode.com çœ‹discuss-most votes</li>\n</ul>\n</li>\n<li>åˆ‡é¢˜<ul>\n<li><strong>Clarification å®¡é¢˜</strong></li>\n<li><strong>Possible Solutions</strong><ul>\n<li>compare (time/space)</li>\n<li>optimal (åŠ å¼º)</li>\n</ul>\n</li>\n<li><strong>Coding</strong></li>\n<li><strong>Test cases</strong></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Feedback-åé¦ˆ\"><a href=\"#Feedback-åé¦ˆ\" class=\"headerlink\" title=\"Feedback åé¦ˆ\"></a>Feedback åé¦ˆ</h2><ul>\n<li>å³æ—¶åé¦ˆ</li>\n<li>ä¸»åŠ¨å‹åé¦ˆ</li>\n<li>è¢«åŠ¨å‹åé¦ˆ<ul>\n<li>code review</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"æŒ‡æ³•\"><a href=\"#æŒ‡æ³•\" class=\"headerlink\" title=\"æŒ‡æ³•\"></a>æŒ‡æ³•</h2><ul>\n<li>top tips for vscode</li>\n</ul>\n<h2 id=\"è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼\"><a href=\"#è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼\" class=\"headerlink\" title=\"è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼\"></a>è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼</h2><ul>\n<li><a href=\"http://markhneedham.com/blog/2008/09/15/clean-code-book-review/\" target=\"_blank\" rel=\"noopener\">è‡ªé¡¶å‘ä¸‹çš„ç¼–ç¨‹æ–¹å¼</a></li>\n</ul>\n<h2 id=\"Big-O-Notation\"><a href=\"#Big-O-Notation\" class=\"headerlink\" title=\"Big O Notation\"></a>Big O Notation</h2><ul>\n<li>O(1): constant Complexity å¸¸æ•°å¤æ‚åº¦</li>\n<li>O(log n): Logarithmic Complexity å¯¹æ•°å¤æ‚åº¦</li>\n<li>O(n): Linear Complexity çº¿æ€§æ—¶é—´å¤æ‚åº¦</li>\n<li>O(n^2): N square Complexity å¹³æ–¹</li>\n<li>O(n^3): N cube Complexity ç«‹æ–¹</li>\n<li>O(2^n): Exponential Growth æŒ‡æ•°</li>\n<li>O(n!): Factorial é˜¶ä¹˜</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c88294c6a8b88448ae14e2914c7bbfd2337181.png\" alt=\"æ—¶é—´å¤æ‚åº¦\"></li>\n</ul>\n<h2 id=\"master-theorem\"><a href=\"#master-theorem\" class=\"headerlink\" title=\"master theorem\"></a>master theorem</h2><ul>\n<li>äºŒåˆ†æŸ¥æ‰¾</li>\n<li>äºŒå‰æ ‘çš„éå†ï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½è®¿é—®ä¸€æ¬¡ï¼Œä¸”ä»…è®¿é—®ä¸€æ¬¡ï¼‰</li>\n<li>äºŒç»´æœ‰åºçŸ©é˜µ</li>\n<li>å½’å¹¶æ’åº O(nlogn)</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/5b978d58635ea2e9233ea5e502ab706f246540.png\" alt=\"ä¸»å®šç†\"></li>\n</ul>"},{"title":"JS: å¼‚æ­¥","date":"2020-06-20T09:38:22.000Z","description":["Javascript å¼‚æ­¥"],"_content":"\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n\n\n\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","source":"_posts/JS-å¼‚æ­¥.md","raw":"---\ntitle: 'JS: å¼‚æ­¥'\ndate: 2020-06-20 17:38:22\ntags: \n- Javascript\ncategories:\n- Javascript\ndescription:\n- Javascript å¼‚æ­¥\n---\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n\n\n\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","slug":"JS-å¼‚æ­¥","published":1,"updated":"2020-10-27T15:21:11.261Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7n000kfw9k94zs4eqo","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n"},{"title":"Javascript Types","date":"2020-04-20T03:19:06.000Z","description":["Javascript -- Atom - Types"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n# Javascript -- Atom - Types\n## Atom\n### Unicode ï¼ˆå­—ç¬¦é›†ï¼‰\n- Unicode Blocks\n\t- JSä½¿ç”¨çš„ä¸æ˜¯ASCIIå­—ç¬¦é›†ï¼Œä½†æ˜¯éƒ½è¦å…¼å®¹ASCIIå­—ç¬¦é›†\n\t\t- a ç ç‚¹ --> 97, A ç ç‚¹ --> 65\n\t- U+000A LINE FEED æ¢è¡Œ\n\t\t- Form Feed ç¿»é¡µ\n\t\t- CJK ä¸­æ–‡å­—ç¬¦ Chinese Japan Korean\n\t- U+0020 SPACE ç©ºæ ¼\n\t- BMP (Basic Multilingual Plane)åŸºæœ¬å­—ç¬¦å¹³é¢ å››ä½èƒ½è¡¨ç¤ºçš„èŒƒå›´\n\t- è¶…å‡ºBMPèŒƒå›´\n\t\t- fromCodePoint\n\t\t- codePointAt\n\t- éšæ€§éœ€æ±‚éœ€è¦å¯ä»¥ä½¿ç”¨\\uè½¬ä¹‰\n\t\t- \"å‰å®³\".codePointAt(0).toString(16)\n\t\t- \\u5389\\u5bb3\n<!-- more -->\n\n- InputElement\n\t- WhiteSpace ç©ºæ ¼\n\t\t- &lt;TAB&gt; Character Tabulation\n\t\t- &lt;VT&gt; Vertical Line\n\t\t- &lt;FF&gt; Form Feed \n\t\t- &lt;SP&gt; \n\t\t- &lt;NBSP&gt; htmlæ ¹æ®ç©ºæ ¼åˆ†è¯ï¼Œä¸æƒ³è®©è¯åˆ†æ ¹æ®ç©ºæ ¼åˆ†å¼€ï¼Œå¯ä»¥ä½¿ç”¨&nbsp;\n\t\t- &lt;ZWNBSP&gt; U+FEFF Zero WIDTH NO-BREAK SPACEï¼ŒBOM --> Bit Order Mask\n\t\t- &lt;USP&gt;\n\t- LineTerminator æ¢è¡Œç¬¦\n\t\t- &lt;LF&gt; /n\n\t\t- &lt;CR&gt; Carriage Return å›è½¦ /r\n\t\t- &lt;LS&gt; LINE SEPARATOR\n\t\t- &lt;PS&gt; PARAGRAPH SEPARATOR\n\t- Comment æ³¨é‡Š\n\t- **Token** ä¸wordä¸åŒï¼Œè®°å·æ ‡è®°ï¼ŒJSä¸­æœ‰æ•ˆçš„ä¸œè¥¿\n\t\t- è‡ªå·±å†™çš„ï¼Œä»£ç åŒ…å«çš„æœ‰æ•ˆä¿¡æ¯\n\t\t\t- **Identifier** æ ‡è¯†ç¬¦ï¼Œä»¥è‹±æ–‡å­—æ¯å¼€å¤´\n\t\t\t\t- ç”¨ä½œå˜é‡åï¼Œä¸èƒ½ä¸å…³é”®å­—é‡å¤\n\t\t\t\t\t- undefined å…¨å±€å˜é‡åï¼Œä¿®æ”¹ä¸äº†\n\t\t\t\t\t- ç¦»å¼€å…¨å±€ä½œç”¨åŸŸï¼Œä¾¿å¯ä»¥ä½¿ç”¨\n\t\t\t\t- ç”¨ä½œå±æ€§çš„éƒ¨åˆ†ï¼Œå¯ä»¥ä¸å…³é”®å­—é‡å¤\n\t\t\t\t- Future reserved Keywords : enum\n\t\t\t- **Literal** ç›´æ¥é‡\n\t\t\t\t- Number\t\n\t\t\t\t- String\n\t\t\t\t- Boolean\n\t\t\t\t- Object\n\t\t\t\t- Null\n\t\t\t\t- Undefined\n\t\t\t\t- Symbol\n\t\t- å¸®åŠ©ç¨‹åºå½¢æˆç»“æ„\n\t\t\t- **Punctuator** ç¬¦å·\n\t\t\t- **Keywords** \n\n\t\t\t\n### Types\n#### Number\n- IEEE 754 Double Float\n\t- Sign(1)\n\t- Exponent(11) æŒ‡æ•°ï¼Œç§‘å­¦è®¡æ•°æ³•\n\t- Fraction(52)\n- Grammar\n\t- DecimaLiteral\n\t\t- 0\n\t\t- 0.\n\t\t- .2\n\t\t- 1e3\n\t- BinaryIntegerLiteral\n\t\t- 0b111\n\t- OctalIntegerLiteral\n\t\t- 0o10\n\t- HexIntegerLiteral\n\t\t- 0xFF\n- æœ€ä½³å®è·µ\n\t- æµ®ç‚¹æ•°æ¯”è¾ƒæ—¶ï¼Œéœ€è¦åŠ ç²¾åº¦\n\t\n\t\t> Number.MAX\\_SAFE\\_INTEGER\n\t\t\n\t\t> Math.abs(0.1 + 0.2 - 0.3) <= Number.EPSILON\n\t\n\t\n#### String\n- Character\n- Code Point\n- Encoding\n\t\n\t> 97 .toString(2)\n\t\n\t> \"97.\" æ˜¯ä¸€ä¸ªåˆæ³•çš„Number 01100001\n\t\n\t- ASCII\n\t- Unicode\n\t- UCS U+0000 - U+FFFF\n\t- GB\n\t\t- GB2312\n\t\t- GBK(GB13000)\n\t\t- GB18030\n\t- ISO-8859\n\t- BIG5\n- Grammar\n\t- \"abc\"\n\t\t- \"\\x10\" --> 8\n\t\t- \"\\u000a\"\n\t- 'abc'\n\t- \\`abc\\`\n\t\t\n\t\t```javascript\n\t\tvar a;\n\t\t/a/g æ­£åˆ™è¡¨è¾¾å¼ç›´æ¥é‡\n\t\t(a)\n\t\t/a/g --> åˆ™è¡¨ç¤ºé™¤æ³•\n\t\t(a)/a/g\n\t\t```\n\t\t\n\t\n#### Boolean\n- true\n- false\n\n\n\n\n#### Object\n- ä¸ºä»€ä¹ˆç»™å¯¹è±¡æ·»åŠ çš„æ–¹æ³•èƒ½ç”¨åœ¨åŸºæœ¬ç±»å‹ä¸Šï¼Ÿ\n- è¿ç®—ç¬¦æä¾›äº†è£…ç®±æ“ä½œï¼Œå®ƒä¼šæ ¹æ®åŸºç¡€ç±»å‹æ„é€ ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½åœ¨åŸºç¡€ç±»å‹ä¸Šè°ƒç”¨å¯¹åº”å¯¹è±¡çš„æ–¹æ³•ã€‚\n\n#### Null\n- typeof ä¸‹ä¸º Object\n\n\n#### Undefined\n- JavaScript çš„ä»£ç  undefined æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè€Œå¹¶éæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†é¿å…æ— æ„ä¸­è¢«ç¯¡æ”¹ï¼Œå»ºè®®ä½¿ç”¨ void 0 æ¥è·å– undefined å€¼ã€‚\n- å¯¦éš›ä¸Šï¼Œes5å¾Œundefinedå·²ç¶“è¢«æ”¹ç‚ºread-onlyå±¬æ€§äº†ã€‚ ä½†åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸Šï¼Œæ˜¯æœƒè¢«ä¿®æ”¹çš„ï¼ å¦‚è€ƒæ…®ä»¥ä¸‹å‡½æ•¸ï¼š \n\n\t```javascript\n\tconst test = () =>{ var undefined = 5; console.log(typeof undefined)//è¼¸å‡ºnumber } \n\t```\n- ç‚ºäº†é¿å…ç„¡æ„ä¸­è¢«ç«„æ”¹ï¼Œä½¿ç”¨void(0)é‚„æ˜¯æ¯”è¼ƒå¥½çš„åšæ³• è€Œä¸”åœ¨é€²è¡Œä»£ç¢¼å£“ç¸®æ™‚ï¼Œundefinedä¹Ÿæœƒè¢«æ›æˆvoid(0)\n\n#### Symbol\n\n## Expression\n## Statemment\n## Structure\n## Module\n","source":"_posts/Javascript-Atom+Types.md","raw":"---\ntitle: Javascript Types\ndate: 2020-04-20 11:19:06\ntags: \n- å‰ç«¯æ¦‚å¿µ\ncategories:\n- å‰ç«¯æ¦‚å¿µ\ndescription:\n- Javascript -- Atom - Types\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n# Javascript -- Atom - Types\n## Atom\n### Unicode ï¼ˆå­—ç¬¦é›†ï¼‰\n- Unicode Blocks\n\t- JSä½¿ç”¨çš„ä¸æ˜¯ASCIIå­—ç¬¦é›†ï¼Œä½†æ˜¯éƒ½è¦å…¼å®¹ASCIIå­—ç¬¦é›†\n\t\t- a ç ç‚¹ --> 97, A ç ç‚¹ --> 65\n\t- U+000A LINE FEED æ¢è¡Œ\n\t\t- Form Feed ç¿»é¡µ\n\t\t- CJK ä¸­æ–‡å­—ç¬¦ Chinese Japan Korean\n\t- U+0020 SPACE ç©ºæ ¼\n\t- BMP (Basic Multilingual Plane)åŸºæœ¬å­—ç¬¦å¹³é¢ å››ä½èƒ½è¡¨ç¤ºçš„èŒƒå›´\n\t- è¶…å‡ºBMPèŒƒå›´\n\t\t- fromCodePoint\n\t\t- codePointAt\n\t- éšæ€§éœ€æ±‚éœ€è¦å¯ä»¥ä½¿ç”¨\\uè½¬ä¹‰\n\t\t- \"å‰å®³\".codePointAt(0).toString(16)\n\t\t- \\u5389\\u5bb3\n<!-- more -->\n\n- InputElement\n\t- WhiteSpace ç©ºæ ¼\n\t\t- &lt;TAB&gt; Character Tabulation\n\t\t- &lt;VT&gt; Vertical Line\n\t\t- &lt;FF&gt; Form Feed \n\t\t- &lt;SP&gt; \n\t\t- &lt;NBSP&gt; htmlæ ¹æ®ç©ºæ ¼åˆ†è¯ï¼Œä¸æƒ³è®©è¯åˆ†æ ¹æ®ç©ºæ ¼åˆ†å¼€ï¼Œå¯ä»¥ä½¿ç”¨&nbsp;\n\t\t- &lt;ZWNBSP&gt; U+FEFF Zero WIDTH NO-BREAK SPACEï¼ŒBOM --> Bit Order Mask\n\t\t- &lt;USP&gt;\n\t- LineTerminator æ¢è¡Œç¬¦\n\t\t- &lt;LF&gt; /n\n\t\t- &lt;CR&gt; Carriage Return å›è½¦ /r\n\t\t- &lt;LS&gt; LINE SEPARATOR\n\t\t- &lt;PS&gt; PARAGRAPH SEPARATOR\n\t- Comment æ³¨é‡Š\n\t- **Token** ä¸wordä¸åŒï¼Œè®°å·æ ‡è®°ï¼ŒJSä¸­æœ‰æ•ˆçš„ä¸œè¥¿\n\t\t- è‡ªå·±å†™çš„ï¼Œä»£ç åŒ…å«çš„æœ‰æ•ˆä¿¡æ¯\n\t\t\t- **Identifier** æ ‡è¯†ç¬¦ï¼Œä»¥è‹±æ–‡å­—æ¯å¼€å¤´\n\t\t\t\t- ç”¨ä½œå˜é‡åï¼Œä¸èƒ½ä¸å…³é”®å­—é‡å¤\n\t\t\t\t\t- undefined å…¨å±€å˜é‡åï¼Œä¿®æ”¹ä¸äº†\n\t\t\t\t\t- ç¦»å¼€å…¨å±€ä½œç”¨åŸŸï¼Œä¾¿å¯ä»¥ä½¿ç”¨\n\t\t\t\t- ç”¨ä½œå±æ€§çš„éƒ¨åˆ†ï¼Œå¯ä»¥ä¸å…³é”®å­—é‡å¤\n\t\t\t\t- Future reserved Keywords : enum\n\t\t\t- **Literal** ç›´æ¥é‡\n\t\t\t\t- Number\t\n\t\t\t\t- String\n\t\t\t\t- Boolean\n\t\t\t\t- Object\n\t\t\t\t- Null\n\t\t\t\t- Undefined\n\t\t\t\t- Symbol\n\t\t- å¸®åŠ©ç¨‹åºå½¢æˆç»“æ„\n\t\t\t- **Punctuator** ç¬¦å·\n\t\t\t- **Keywords** \n\n\t\t\t\n### Types\n#### Number\n- IEEE 754 Double Float\n\t- Sign(1)\n\t- Exponent(11) æŒ‡æ•°ï¼Œç§‘å­¦è®¡æ•°æ³•\n\t- Fraction(52)\n- Grammar\n\t- DecimaLiteral\n\t\t- 0\n\t\t- 0.\n\t\t- .2\n\t\t- 1e3\n\t- BinaryIntegerLiteral\n\t\t- 0b111\n\t- OctalIntegerLiteral\n\t\t- 0o10\n\t- HexIntegerLiteral\n\t\t- 0xFF\n- æœ€ä½³å®è·µ\n\t- æµ®ç‚¹æ•°æ¯”è¾ƒæ—¶ï¼Œéœ€è¦åŠ ç²¾åº¦\n\t\n\t\t> Number.MAX\\_SAFE\\_INTEGER\n\t\t\n\t\t> Math.abs(0.1 + 0.2 - 0.3) <= Number.EPSILON\n\t\n\t\n#### String\n- Character\n- Code Point\n- Encoding\n\t\n\t> 97 .toString(2)\n\t\n\t> \"97.\" æ˜¯ä¸€ä¸ªåˆæ³•çš„Number 01100001\n\t\n\t- ASCII\n\t- Unicode\n\t- UCS U+0000 - U+FFFF\n\t- GB\n\t\t- GB2312\n\t\t- GBK(GB13000)\n\t\t- GB18030\n\t- ISO-8859\n\t- BIG5\n- Grammar\n\t- \"abc\"\n\t\t- \"\\x10\" --> 8\n\t\t- \"\\u000a\"\n\t- 'abc'\n\t- \\`abc\\`\n\t\t\n\t\t```javascript\n\t\tvar a;\n\t\t/a/g æ­£åˆ™è¡¨è¾¾å¼ç›´æ¥é‡\n\t\t(a)\n\t\t/a/g --> åˆ™è¡¨ç¤ºé™¤æ³•\n\t\t(a)/a/g\n\t\t```\n\t\t\n\t\n#### Boolean\n- true\n- false\n\n\n\n\n#### Object\n- ä¸ºä»€ä¹ˆç»™å¯¹è±¡æ·»åŠ çš„æ–¹æ³•èƒ½ç”¨åœ¨åŸºæœ¬ç±»å‹ä¸Šï¼Ÿ\n- è¿ç®—ç¬¦æä¾›äº†è£…ç®±æ“ä½œï¼Œå®ƒä¼šæ ¹æ®åŸºç¡€ç±»å‹æ„é€ ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½åœ¨åŸºç¡€ç±»å‹ä¸Šè°ƒç”¨å¯¹åº”å¯¹è±¡çš„æ–¹æ³•ã€‚\n\n#### Null\n- typeof ä¸‹ä¸º Object\n\n\n#### Undefined\n- JavaScript çš„ä»£ç  undefined æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè€Œå¹¶éæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†é¿å…æ— æ„ä¸­è¢«ç¯¡æ”¹ï¼Œå»ºè®®ä½¿ç”¨ void 0 æ¥è·å– undefined å€¼ã€‚\n- å¯¦éš›ä¸Šï¼Œes5å¾Œundefinedå·²ç¶“è¢«æ”¹ç‚ºread-onlyå±¬æ€§äº†ã€‚ ä½†åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸Šï¼Œæ˜¯æœƒè¢«ä¿®æ”¹çš„ï¼ å¦‚è€ƒæ…®ä»¥ä¸‹å‡½æ•¸ï¼š \n\n\t```javascript\n\tconst test = () =>{ var undefined = 5; console.log(typeof undefined)//è¼¸å‡ºnumber } \n\t```\n- ç‚ºäº†é¿å…ç„¡æ„ä¸­è¢«ç«„æ”¹ï¼Œä½¿ç”¨void(0)é‚„æ˜¯æ¯”è¼ƒå¥½çš„åšæ³• è€Œä¸”åœ¨é€²è¡Œä»£ç¢¼å£“ç¸®æ™‚ï¼Œundefinedä¹Ÿæœƒè¢«æ›æˆvoid(0)\n\n#### Symbol\n\n## Expression\n## Statemment\n## Structure\n## Module\n","slug":"Javascript-Atom+Types","published":1,"updated":"2020-10-27T15:21:11.261Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7o000ofw9kcrz71f4q","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h1 id=\"Javascript-â€“-Atom-Types\"><a href=\"#Javascript-â€“-Atom-Types\" class=\"headerlink\" title=\"Javascript â€“ Atom - Types\"></a>Javascript â€“ Atom - Types</h1><h2 id=\"Atom\"><a href=\"#Atom\" class=\"headerlink\" title=\"Atom\"></a>Atom</h2><h3 id=\"Unicode-ï¼ˆå­—ç¬¦é›†ï¼‰\"><a href=\"#Unicode-ï¼ˆå­—ç¬¦é›†ï¼‰\" class=\"headerlink\" title=\"Unicode ï¼ˆå­—ç¬¦é›†ï¼‰\"></a>Unicode ï¼ˆå­—ç¬¦é›†ï¼‰</h3><ul>\n<li><p>Unicode Blocks</p>\n<ul>\n<li>JSä½¿ç”¨çš„ä¸æ˜¯ASCIIå­—ç¬¦é›†ï¼Œä½†æ˜¯éƒ½è¦å…¼å®¹ASCIIå­—ç¬¦é›†<ul>\n<li>a ç ç‚¹ â€“&gt; 97, A ç ç‚¹ â€“&gt; 65</li>\n</ul>\n</li>\n<li>U+000A LINE FEED æ¢è¡Œ<ul>\n<li>Form Feed ç¿»é¡µ</li>\n<li>CJK ä¸­æ–‡å­—ç¬¦ Chinese Japan Korean</li>\n</ul>\n</li>\n<li>U+0020 SPACE ç©ºæ ¼</li>\n<li>BMP (Basic Multilingual Plane)åŸºæœ¬å­—ç¬¦å¹³é¢ å››ä½èƒ½è¡¨ç¤ºçš„èŒƒå›´</li>\n<li>è¶…å‡ºBMPèŒƒå›´<ul>\n<li>fromCodePoint</li>\n<li>codePointAt</li>\n</ul>\n</li>\n<li>éšæ€§éœ€æ±‚éœ€è¦å¯ä»¥ä½¿ç”¨\\uè½¬ä¹‰<ul>\n<li>â€œå‰å®³â€.codePointAt(0).toString(16)</li>\n<li>\\u5389\\u5bb3<a id=\"more\"></a>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>InputElement</p>\n<ul>\n<li>WhiteSpace ç©ºæ ¼<ul>\n<li>&lt;TAB&gt; Character Tabulation</li>\n<li>&lt;VT&gt; Vertical Line</li>\n<li>&lt;FF&gt; Form Feed </li>\n<li>&lt;SP&gt; </li>\n<li>&lt;NBSP&gt; htmlæ ¹æ®ç©ºæ ¼åˆ†è¯ï¼Œä¸æƒ³è®©è¯åˆ†æ ¹æ®ç©ºæ ¼åˆ†å¼€ï¼Œå¯ä»¥ä½¿ç”¨&nbsp;</li>\n<li>&lt;ZWNBSP&gt; U+FEFF Zero WIDTH NO-BREAK SPACEï¼ŒBOM â€“&gt; Bit Order Mask</li>\n<li>&lt;USP&gt;</li>\n</ul>\n</li>\n<li>LineTerminator æ¢è¡Œç¬¦<ul>\n<li>&lt;LF&gt; /n</li>\n<li>&lt;CR&gt; Carriage Return å›è½¦ /r</li>\n<li>&lt;LS&gt; LINE SEPARATOR</li>\n<li>&lt;PS&gt; PARAGRAPH SEPARATOR</li>\n</ul>\n</li>\n<li>Comment æ³¨é‡Š</li>\n<li><strong>Token</strong> ä¸wordä¸åŒï¼Œè®°å·æ ‡è®°ï¼ŒJSä¸­æœ‰æ•ˆçš„ä¸œè¥¿<ul>\n<li>è‡ªå·±å†™çš„ï¼Œä»£ç åŒ…å«çš„æœ‰æ•ˆä¿¡æ¯<ul>\n<li><strong>Identifier</strong> æ ‡è¯†ç¬¦ï¼Œä»¥è‹±æ–‡å­—æ¯å¼€å¤´<ul>\n<li>ç”¨ä½œå˜é‡åï¼Œä¸èƒ½ä¸å…³é”®å­—é‡å¤<ul>\n<li>undefined å…¨å±€å˜é‡åï¼Œä¿®æ”¹ä¸äº†</li>\n<li>ç¦»å¼€å…¨å±€ä½œç”¨åŸŸï¼Œä¾¿å¯ä»¥ä½¿ç”¨</li>\n</ul>\n</li>\n<li>ç”¨ä½œå±æ€§çš„éƒ¨åˆ†ï¼Œå¯ä»¥ä¸å…³é”®å­—é‡å¤</li>\n<li>Future reserved Keywords : enum</li>\n</ul>\n</li>\n<li><strong>Literal</strong> ç›´æ¥é‡<ul>\n<li>Number    </li>\n<li>String</li>\n<li>Boolean</li>\n<li>Object</li>\n<li>Null</li>\n<li>Undefined</li>\n<li>Symbol</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å¸®åŠ©ç¨‹åºå½¢æˆç»“æ„<ul>\n<li><strong>Punctuator</strong> ç¬¦å·</li>\n<li><strong>Keywords</strong> </li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Types\"><a href=\"#Types\" class=\"headerlink\" title=\"Types\"></a>Types</h3><h4 id=\"Number\"><a href=\"#Number\" class=\"headerlink\" title=\"Number\"></a>Number</h4><ul>\n<li><p>IEEE 754 Double Float</p>\n<ul>\n<li>Sign(1)</li>\n<li>Exponent(11) æŒ‡æ•°ï¼Œç§‘å­¦è®¡æ•°æ³•</li>\n<li>Fraction(52)</li>\n</ul>\n</li>\n<li><p>Grammar</p>\n<ul>\n<li>DecimaLiteral<ul>\n<li>0</li>\n<li>0.</li>\n<li>.2</li>\n<li>1e3</li>\n</ul>\n</li>\n<li>BinaryIntegerLiteral<ul>\n<li>0b111</li>\n</ul>\n</li>\n<li>OctalIntegerLiteral<ul>\n<li>0o10</li>\n</ul>\n</li>\n<li>HexIntegerLiteral<ul>\n<li>0xFF</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>æœ€ä½³å®è·µ</p>\n<ul>\n<li><p>æµ®ç‚¹æ•°æ¯”è¾ƒæ—¶ï¼Œéœ€è¦åŠ ç²¾åº¦</p>\n<blockquote>\n<p>Number.MAX_SAFE_INTEGER</p>\n</blockquote>\n<blockquote>\n<p>Math.abs(0.1 + 0.2 - 0.3) &lt;= Number.EPSILON</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h4><ul>\n<li><p>Character</p>\n</li>\n<li><p>Code Point</p>\n</li>\n<li><p>Encoding</p>\n<blockquote>\n<p>97 .toString(2)</p>\n</blockquote>\n<blockquote>\n<p>â€œ97.â€ æ˜¯ä¸€ä¸ªåˆæ³•çš„Number 01100001</p>\n</blockquote>\n<ul>\n<li>ASCII</li>\n<li>Unicode</li>\n<li>UCS U+0000 - U+FFFF</li>\n<li>GB<ul>\n<li>GB2312</li>\n<li>GBK(GB13000)</li>\n<li>GB18030</li>\n</ul>\n</li>\n<li>ISO-8859</li>\n<li>BIG5</li>\n</ul>\n</li>\n<li><p>Grammar</p>\n<ul>\n<li><p>â€œabcâ€</p>\n<ul>\n<li>â€œ\\x10â€ â€“&gt; 8</li>\n<li>â€œ\\u000aâ€</li>\n</ul>\n</li>\n<li><p>â€˜abcâ€™</p>\n</li>\n<li><p>`abc`</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a;</span><br><span class=\"line\">/a/g æ­£åˆ™è¡¨è¾¾å¼ç›´æ¥é‡</span><br><span class=\"line\">(a)</span><br><span class=\"line\">/a/g --&gt; åˆ™è¡¨ç¤ºé™¤æ³•</span><br><span class=\"line\">(a)/a/g</span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Boolean\"><a href=\"#Boolean\" class=\"headerlink\" title=\"Boolean\"></a>Boolean</h4><ul>\n<li>true</li>\n<li>false</li>\n</ul>\n<h4 id=\"Object\"><a href=\"#Object\" class=\"headerlink\" title=\"Object\"></a>Object</h4><ul>\n<li>ä¸ºä»€ä¹ˆç»™å¯¹è±¡æ·»åŠ çš„æ–¹æ³•èƒ½ç”¨åœ¨åŸºæœ¬ç±»å‹ä¸Šï¼Ÿ</li>\n<li>è¿ç®—ç¬¦æä¾›äº†è£…ç®±æ“ä½œï¼Œå®ƒä¼šæ ¹æ®åŸºç¡€ç±»å‹æ„é€ ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½åœ¨åŸºç¡€ç±»å‹ä¸Šè°ƒç”¨å¯¹åº”å¯¹è±¡çš„æ–¹æ³•ã€‚</li>\n</ul>\n<h4 id=\"Null\"><a href=\"#Null\" class=\"headerlink\" title=\"Null\"></a>Null</h4><ul>\n<li>typeof ä¸‹ä¸º Object</li>\n</ul>\n<h4 id=\"Undefined\"><a href=\"#Undefined\" class=\"headerlink\" title=\"Undefined\"></a>Undefined</h4><ul>\n<li><p>JavaScript çš„ä»£ç  undefined æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè€Œå¹¶éæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†é¿å…æ— æ„ä¸­è¢«ç¯¡æ”¹ï¼Œå»ºè®®ä½¿ç”¨ void 0 æ¥è·å– undefined å€¼ã€‚</p>\n</li>\n<li><p>å¯¦éš›ä¸Šï¼Œes5å¾Œundefinedå·²ç¶“è¢«æ”¹ç‚ºread-onlyå±¬æ€§äº†ã€‚ ä½†åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸Šï¼Œæ˜¯æœƒè¢«ä¿®æ”¹çš„ï¼ å¦‚è€ƒæ…®ä»¥ä¸‹å‡½æ•¸ï¼š </p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> test = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span>&#123; <span class=\"keyword\">var</span> <span class=\"literal\">undefined</span> = <span class=\"number\">5</span>; <span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> <span class=\"literal\">undefined</span>)<span class=\"comment\">//è¼¸å‡ºnumber &#125;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>ç‚ºäº†é¿å…ç„¡æ„ä¸­è¢«ç«„æ”¹ï¼Œä½¿ç”¨void(0)é‚„æ˜¯æ¯”è¼ƒå¥½çš„åšæ³• è€Œä¸”åœ¨é€²è¡Œä»£ç¢¼å£“ç¸®æ™‚ï¼Œundefinedä¹Ÿæœƒè¢«æ›æˆvoid(0)</p>\n</li>\n</ul>\n<h4 id=\"Symbol\"><a href=\"#Symbol\" class=\"headerlink\" title=\"Symbol\"></a>Symbol</h4><h2 id=\"Expression\"><a href=\"#Expression\" class=\"headerlink\" title=\"Expression\"></a>Expression</h2><h2 id=\"Statemment\"><a href=\"#Statemment\" class=\"headerlink\" title=\"Statemment\"></a>Statemment</h2><h2 id=\"Structure\"><a href=\"#Structure\" class=\"headerlink\" title=\"Structure\"></a>Structure</h2><h2 id=\"Module\"><a href=\"#Module\" class=\"headerlink\" title=\"Module\"></a>Module</h2>","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h1 id=\"Javascript-â€“-Atom-Types\"><a href=\"#Javascript-â€“-Atom-Types\" class=\"headerlink\" title=\"Javascript â€“ Atom - Types\"></a>Javascript â€“ Atom - Types</h1><h2 id=\"Atom\"><a href=\"#Atom\" class=\"headerlink\" title=\"Atom\"></a>Atom</h2><h3 id=\"Unicode-ï¼ˆå­—ç¬¦é›†ï¼‰\"><a href=\"#Unicode-ï¼ˆå­—ç¬¦é›†ï¼‰\" class=\"headerlink\" title=\"Unicode ï¼ˆå­—ç¬¦é›†ï¼‰\"></a>Unicode ï¼ˆå­—ç¬¦é›†ï¼‰</h3><ul>\n<li><p>Unicode Blocks</p>\n<ul>\n<li>JSä½¿ç”¨çš„ä¸æ˜¯ASCIIå­—ç¬¦é›†ï¼Œä½†æ˜¯éƒ½è¦å…¼å®¹ASCIIå­—ç¬¦é›†<ul>\n<li>a ç ç‚¹ â€“&gt; 97, A ç ç‚¹ â€“&gt; 65</li>\n</ul>\n</li>\n<li>U+000A LINE FEED æ¢è¡Œ<ul>\n<li>Form Feed ç¿»é¡µ</li>\n<li>CJK ä¸­æ–‡å­—ç¬¦ Chinese Japan Korean</li>\n</ul>\n</li>\n<li>U+0020 SPACE ç©ºæ ¼</li>\n<li>BMP (Basic Multilingual Plane)åŸºæœ¬å­—ç¬¦å¹³é¢ å››ä½èƒ½è¡¨ç¤ºçš„èŒƒå›´</li>\n<li>è¶…å‡ºBMPèŒƒå›´<ul>\n<li>fromCodePoint</li>\n<li>codePointAt</li>\n</ul>\n</li>\n<li>éšæ€§éœ€æ±‚éœ€è¦å¯ä»¥ä½¿ç”¨\\uè½¬ä¹‰<ul>\n<li>â€œå‰å®³â€.codePointAt(0).toString(16)</li>\n<li>\\u5389\\u5bb3","more":"</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>InputElement</p>\n<ul>\n<li>WhiteSpace ç©ºæ ¼<ul>\n<li>&lt;TAB&gt; Character Tabulation</li>\n<li>&lt;VT&gt; Vertical Line</li>\n<li>&lt;FF&gt; Form Feed </li>\n<li>&lt;SP&gt; </li>\n<li>&lt;NBSP&gt; htmlæ ¹æ®ç©ºæ ¼åˆ†è¯ï¼Œä¸æƒ³è®©è¯åˆ†æ ¹æ®ç©ºæ ¼åˆ†å¼€ï¼Œå¯ä»¥ä½¿ç”¨&nbsp;</li>\n<li>&lt;ZWNBSP&gt; U+FEFF Zero WIDTH NO-BREAK SPACEï¼ŒBOM â€“&gt; Bit Order Mask</li>\n<li>&lt;USP&gt;</li>\n</ul>\n</li>\n<li>LineTerminator æ¢è¡Œç¬¦<ul>\n<li>&lt;LF&gt; /n</li>\n<li>&lt;CR&gt; Carriage Return å›è½¦ /r</li>\n<li>&lt;LS&gt; LINE SEPARATOR</li>\n<li>&lt;PS&gt; PARAGRAPH SEPARATOR</li>\n</ul>\n</li>\n<li>Comment æ³¨é‡Š</li>\n<li><strong>Token</strong> ä¸wordä¸åŒï¼Œè®°å·æ ‡è®°ï¼ŒJSä¸­æœ‰æ•ˆçš„ä¸œè¥¿<ul>\n<li>è‡ªå·±å†™çš„ï¼Œä»£ç åŒ…å«çš„æœ‰æ•ˆä¿¡æ¯<ul>\n<li><strong>Identifier</strong> æ ‡è¯†ç¬¦ï¼Œä»¥è‹±æ–‡å­—æ¯å¼€å¤´<ul>\n<li>ç”¨ä½œå˜é‡åï¼Œä¸èƒ½ä¸å…³é”®å­—é‡å¤<ul>\n<li>undefined å…¨å±€å˜é‡åï¼Œä¿®æ”¹ä¸äº†</li>\n<li>ç¦»å¼€å…¨å±€ä½œç”¨åŸŸï¼Œä¾¿å¯ä»¥ä½¿ç”¨</li>\n</ul>\n</li>\n<li>ç”¨ä½œå±æ€§çš„éƒ¨åˆ†ï¼Œå¯ä»¥ä¸å…³é”®å­—é‡å¤</li>\n<li>Future reserved Keywords : enum</li>\n</ul>\n</li>\n<li><strong>Literal</strong> ç›´æ¥é‡<ul>\n<li>Number    </li>\n<li>String</li>\n<li>Boolean</li>\n<li>Object</li>\n<li>Null</li>\n<li>Undefined</li>\n<li>Symbol</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å¸®åŠ©ç¨‹åºå½¢æˆç»“æ„<ul>\n<li><strong>Punctuator</strong> ç¬¦å·</li>\n<li><strong>Keywords</strong> </li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Types\"><a href=\"#Types\" class=\"headerlink\" title=\"Types\"></a>Types</h3><h4 id=\"Number\"><a href=\"#Number\" class=\"headerlink\" title=\"Number\"></a>Number</h4><ul>\n<li><p>IEEE 754 Double Float</p>\n<ul>\n<li>Sign(1)</li>\n<li>Exponent(11) æŒ‡æ•°ï¼Œç§‘å­¦è®¡æ•°æ³•</li>\n<li>Fraction(52)</li>\n</ul>\n</li>\n<li><p>Grammar</p>\n<ul>\n<li>DecimaLiteral<ul>\n<li>0</li>\n<li>0.</li>\n<li>.2</li>\n<li>1e3</li>\n</ul>\n</li>\n<li>BinaryIntegerLiteral<ul>\n<li>0b111</li>\n</ul>\n</li>\n<li>OctalIntegerLiteral<ul>\n<li>0o10</li>\n</ul>\n</li>\n<li>HexIntegerLiteral<ul>\n<li>0xFF</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>æœ€ä½³å®è·µ</p>\n<ul>\n<li><p>æµ®ç‚¹æ•°æ¯”è¾ƒæ—¶ï¼Œéœ€è¦åŠ ç²¾åº¦</p>\n<blockquote>\n<p>Number.MAX_SAFE_INTEGER</p>\n</blockquote>\n<blockquote>\n<p>Math.abs(0.1 + 0.2 - 0.3) &lt;= Number.EPSILON</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h4><ul>\n<li><p>Character</p>\n</li>\n<li><p>Code Point</p>\n</li>\n<li><p>Encoding</p>\n<blockquote>\n<p>97 .toString(2)</p>\n</blockquote>\n<blockquote>\n<p>â€œ97.â€ æ˜¯ä¸€ä¸ªåˆæ³•çš„Number 01100001</p>\n</blockquote>\n<ul>\n<li>ASCII</li>\n<li>Unicode</li>\n<li>UCS U+0000 - U+FFFF</li>\n<li>GB<ul>\n<li>GB2312</li>\n<li>GBK(GB13000)</li>\n<li>GB18030</li>\n</ul>\n</li>\n<li>ISO-8859</li>\n<li>BIG5</li>\n</ul>\n</li>\n<li><p>Grammar</p>\n<ul>\n<li><p>â€œabcâ€</p>\n<ul>\n<li>â€œ\\x10â€ â€“&gt; 8</li>\n<li>â€œ\\u000aâ€</li>\n</ul>\n</li>\n<li><p>â€˜abcâ€™</p>\n</li>\n<li><p>`abc`</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a;</span><br><span class=\"line\">/a/g æ­£åˆ™è¡¨è¾¾å¼ç›´æ¥é‡</span><br><span class=\"line\">(a)</span><br><span class=\"line\">/a/g --&gt; åˆ™è¡¨ç¤ºé™¤æ³•</span><br><span class=\"line\">(a)/a/g</span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Boolean\"><a href=\"#Boolean\" class=\"headerlink\" title=\"Boolean\"></a>Boolean</h4><ul>\n<li>true</li>\n<li>false</li>\n</ul>\n<h4 id=\"Object\"><a href=\"#Object\" class=\"headerlink\" title=\"Object\"></a>Object</h4><ul>\n<li>ä¸ºä»€ä¹ˆç»™å¯¹è±¡æ·»åŠ çš„æ–¹æ³•èƒ½ç”¨åœ¨åŸºæœ¬ç±»å‹ä¸Šï¼Ÿ</li>\n<li>è¿ç®—ç¬¦æä¾›äº†è£…ç®±æ“ä½œï¼Œå®ƒä¼šæ ¹æ®åŸºç¡€ç±»å‹æ„é€ ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½åœ¨åŸºç¡€ç±»å‹ä¸Šè°ƒç”¨å¯¹åº”å¯¹è±¡çš„æ–¹æ³•ã€‚</li>\n</ul>\n<h4 id=\"Null\"><a href=\"#Null\" class=\"headerlink\" title=\"Null\"></a>Null</h4><ul>\n<li>typeof ä¸‹ä¸º Object</li>\n</ul>\n<h4 id=\"Undefined\"><a href=\"#Undefined\" class=\"headerlink\" title=\"Undefined\"></a>Undefined</h4><ul>\n<li><p>JavaScript çš„ä»£ç  undefined æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè€Œå¹¶éæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†é¿å…æ— æ„ä¸­è¢«ç¯¡æ”¹ï¼Œå»ºè®®ä½¿ç”¨ void 0 æ¥è·å– undefined å€¼ã€‚</p>\n</li>\n<li><p>å¯¦éš›ä¸Šï¼Œes5å¾Œundefinedå·²ç¶“è¢«æ”¹ç‚ºread-onlyå±¬æ€§äº†ã€‚ ä½†åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸Šï¼Œæ˜¯æœƒè¢«ä¿®æ”¹çš„ï¼ å¦‚è€ƒæ…®ä»¥ä¸‹å‡½æ•¸ï¼š </p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> test = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span>&#123; <span class=\"keyword\">var</span> <span class=\"literal\">undefined</span> = <span class=\"number\">5</span>; <span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> <span class=\"literal\">undefined</span>)<span class=\"comment\">//è¼¸å‡ºnumber &#125;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>ç‚ºäº†é¿å…ç„¡æ„ä¸­è¢«ç«„æ”¹ï¼Œä½¿ç”¨void(0)é‚„æ˜¯æ¯”è¼ƒå¥½çš„åšæ³• è€Œä¸”åœ¨é€²è¡Œä»£ç¢¼å£“ç¸®æ™‚ï¼Œundefinedä¹Ÿæœƒè¢«æ›æˆvoid(0)</p>\n</li>\n</ul>\n<h4 id=\"Symbol\"><a href=\"#Symbol\" class=\"headerlink\" title=\"Symbol\"></a>Symbol</h4><h2 id=\"Expression\"><a href=\"#Expression\" class=\"headerlink\" title=\"Expression\"></a>Expression</h2><h2 id=\"Statemment\"><a href=\"#Statemment\" class=\"headerlink\" title=\"Statemment\"></a>Statemment</h2><h2 id=\"Structure\"><a href=\"#Structure\" class=\"headerlink\" title=\"Structure\"></a>Structure</h2><h2 id=\"Module\"><a href=\"#Module\" class=\"headerlink\" title=\"Module\"></a>Module</h2>"},{"title":"HTML-XMLä¸SGMLï¼ŒDOM & CSSOM","date":"2020-06-06T11:09:37.000Z","description":["HTML"],"_content":"\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- æ°¸ä¸å†é¸½ï¼Œæ˜¯ä¸å¯èƒ½çš„\n- è¡¥åˆ°ç¬¬äºŒå¤©çš„ 12:37\n\n<!-- more -->\n\n## HTML çš„å®šä¹‰ï¼šXML ä¸ SGML\n\n### DTD ä¸ XML namespace\n- [https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd](https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd)\n\t- [https://www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent](https://www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent)\n\t\t- \\&nbsp; \\u00A0 \"Â \" (no-break space = non-breaking space)\n\t\t- \\<!ENTITY nbspÂ Â Â Â \"\\&#160;\"\\> \\<!-- no-break space = non-breaking space, U+00A0 ISOnum --\\>\n\t- [https://www.w3.org/TR/xhtml1/DTD/xhtml-symbol.ent](https://www.w3.org/TR/xhtml1/DTD/xhtml-symbol.ent) Mathematical, Greek and Symbolic characters for XHTML\n\t- [https://www.w3.org/TR/xhtml1/DTD/xhtml-special.ent](https://www.w3.org/TR/xhtml1/DTD/xhtml-special.ent) Special characters for XHTML\n\t\t- html å±æ€§ä¸­ä¸èƒ½ä½¿ç”¨ \\\", éœ€è¦è½¬ä¹‰\n\t\t\t- \\<!ENTITY quotÂ Â Â Â \"\\&#34;\"\\> \\<!--  quotation mark, U+0022 ISOnum --\\> \\\"\n\t\t- html ä¸­ä¸èƒ½ä½¿ç”¨ \\&, éœ€è¦è½¬ä¹‰\n\t\t\t- \\<!ENTITY ampÂ Â Â Â \"\\&#38;#38;\"\\> \\<!--  ampersand, U+0026 ISOnum --\\> \\&\n\t\t- html ä¸­ä¸èƒ½ä½¿ç”¨ \\<, éœ€è¦è½¬ä¹‰\n\t\t\t- \\<!ENTITY ltÂ Â Â Â \"\\&#38;#60;\"\\> \\<!--  less-than sign, U+003C ISOnum --\\> \\<\n\t\t- html ä¸­ä¸èƒ½ä½¿ç”¨ \\>, éœ€è¦è½¬ä¹‰\n\t\t\t- <\\!ENTITY gtÂ Â Â Â \"\\&#62;\"\\> \\<!--  greater-than sign, U+003E ISOnum --\\> \\>\n- [http://www.w3.org/1999/xhtml](http://www.w3.org/1999/xhtml)\n\n\n\n\n## HTML æ ‡ç­¾ - è¯­ä¹‰\n### ä¸º wiki ç¼–å†™ HTML\n- [ç¤ºä¾‹ wiki](http://static001.geekbang.org/static/time/quote/World_Wide_Web-Wikipedia.html)\n\n\n## HTML - è¯­æ³•\n### åˆæ³•å…ƒç´ \n- Element: &lt;tagname&gt;...&lt;/tagname&gt;\n- Text: text\n- Comment: \\<!-- comments --\\>\n- DocumentType: <!Doctype html>\n- ProcessingInstruction: <?a 1?> \n\t- é¢„å¤„ç†\n- CDATA: <![CDATA[]]>\n\n### å­—ç¬¦å¼•ç”¨\n- \\&\\#160; \\&nbsp;\n- \\&amp;\n- \\&lt;\n- \\&gt;\n- \\&quot;\n\n\n\n## DOM\n\n### å¯¼èˆªç±»æ“ä½œ\n- parentNode\n- childNodes\n\t- living collection ä¼šè¢«å®æ—¶ä¿®æ”¹\n- firstChild\n- lastChild\n- nextSibling\n- previousSibling\n\n\n\n### ä¿®æ”¹æ“ä½œ\n- æ‰€æœ‰çš„ DOM é»˜è®¤æœ‰ä¸”åªæœ‰ä¸€ä¸ªçˆ¶å…ƒç´ \n\t- ä¸èƒ½è¢«ä¸¤æ¬¡æ’å…¥ DOM æ ‘ä¸­ã€‚\n\t- å°†ä¸€ä¸ª DOM å…ƒç´ ï¼Œæ’å…¥åˆ° a ä½ç½®ï¼Œå†è°ƒç”¨æ’å…¥åˆ° b ä½ç½®ï¼Œä¼šé»˜è®¤çš„å…ˆä» a ä½ç½® remove å‡ºæ¥\n\t- ![ChildNodes living collection](http://p1.meituan.net/myvideodistribute/fa6ba8388663f1d63bc4d062f05c7da8276923.png)\n- appendChild\n- insertBefore\n- removeChild\n- replaceChild\n\n### é«˜çº§æ“ä½œ\n- compareDocumentPosition æ˜¯ä¸€ä¸ªç”¨äºæ¯”è¾ƒä¸¤ä¸ªèŠ‚ç‚¹ä¸­å…³ç³»çš„å‡½æ•°\n- contains æ£€æŸ¥ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦åŒ…å«å¦ä¸€ä¸ªèŠ‚ç‚¹çš„å‡½æ•°\n- isEqualNode æ£€æŸ¥ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦å®Œå…¨ç›¸åŒ\n- isSameNode æ£€æŸ¥ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå®é™…ä¸Šåœ¨ JS ä¸­å¯ä»¥ç”¨ ===\n- cloneNode å¤åˆ¶ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¼ å…¥å‚æ•° trueï¼Œåˆ™ä¼šè¿åŒå­å…ƒç´ åšæ·±æ‹·è´\n\n\n\n## Event: å†’æ³¡ä¸æ•è·\n- [addEventListener MDN](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)\n- ![å†’æ³¡ä¸æ•è·](http://p0.meituan.net/myvideodistribute/46f706af50150735f325d6b6c7ac7c77150662.png)\n\n\n## Range API\n#### æŠŠä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ é€†åº\n\n### Range ç”¨æ³•\n- var range = new Range()\n- range.setStart(element, 9)\n- range.setEnd(element, 4)\n- var range = document.getSelection().getRangeAt(0)\n- var fragment = range.extractContents()\n- range.insertNode(document.createTextNode(\"aaa\"))\n\n### Range API\n- range.setStartBefore\n- range.setEndBefore\n- range.setStartAfter\n- range.setEndAfter\n- range.selectNode\n- range.selectNodeContents\n- ç»“è®ºï¼šrange æ›´ä¸ºç²¾ç»†æ“ä½œ DOMï¼Œæ‰¹é‡æ“ä½œ DOM\n\n\n## CSSOM\n### document.styleSheets\n- document.styleSheets\n- æ¡ˆä¾‹\n\n\n### Rules\n- document.styleSheets[0].cssRules\n- document.styleSheets[0].insertRule(\"p{color: pink;}\", 0)\n- document.styleSheets[0].removeRule(0)\n\n### Rule\n- CSSStyleRule\n\t- selectorText String\n\t- style k-v ç»“æ„\n- CSSCharsetRule\n- CSSImportRule\n- CSSMediaRule\n- CSSFontFaceRule\n- CSSPageRule\n- CSSNamespaceRule\n- CSSKeyframesRule\n- CSSKeyframeRule\n- CSSSupportRule\n- ...\n\n\n### getComputedStyle\n- window.getComputedStyle(elt, pseudoElt)\n\t- elt æƒ³è¦è·å–çš„å…ƒç´ \n\t- pseudoElt å¯é€‰ï¼Œä¼ªå…ƒç´ \n\n### CSSOM View\n#### çª—å£API\nçª—å£ API ç”¨äºæ“ä½œæµè§ˆå™¨çª—å£çš„ä½ç½®ã€å°ºå¯¸ç­‰\n\n- moveTo(x, y) çª—å£ç§»åŠ¨åˆ°å±å¹•çš„ç‰¹å®šåæ ‡ï¼›\n- moveBy(x, y) çª—å£ç§»åŠ¨ç‰¹å®šè·ç¦»ï¼›\n- resizeTo(x, y) æ”¹å˜çª—å£å¤§å°åˆ°ç‰¹å®šå°ºå¯¸ï¼›\n- resizeBy(x, y) æ”¹å˜çª—å£å¤§å°ç‰¹å®šå°ºå¯¸ã€‚\n- open()\n\n\n\t```javascript\n\tlet childWindow = window.open(\"about:blank\", \"_blank\")\n\t\n\tlet childWindow = window.open(\"about:blank\", \"_blank\", \"width=100,height=100,left=100,top=100\")\n\t\n\tchildWindow.moveBy(-50, -50)\n\t\n\tchildWindow.resizeBy(50, 50)\n\t```\n\n#### æ»šåŠ¨API\nè§†å£æ»šåŠ¨ API(å¯è§†åŒºåŸŸï¼Œç”± window å¯¹è±¡æ“ä½œ)\n\n- scrollX æ˜¯è§†å£çš„å±æ€§ï¼Œè¡¨ç¤º X æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ï¼Œæœ‰åˆ«å pageXOffsetï¼›\n- scrollY æ˜¯è§†å£çš„å±æ€§ï¼Œè¡¨ç¤º Y æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ï¼Œæœ‰åˆ«å pageYOffsetï¼›\n- scroll(x, y) ä½¿å¾—é¡µé¢æ»šåŠ¨åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæœ‰åˆ«å scrollToï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ï¼›\n- scrollBy(x, y) ä½¿å¾—é¡µé¢æ»šåŠ¨ç‰¹å®šçš„è·ç¦»ï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ã€‚\n\nå…ƒç´ æ»šåŠ¨ API(å…ƒç´ æ»šåŠ¨ APIï¼Œåœ¨ Element ç±»ä¸Š)\n\n- scrollTop å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤º Y æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ã€‚\n- scrollLeft å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤º X æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ã€‚\n- scrollWidth å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤ºå…ƒç´ å†…éƒ¨çš„æ»šåŠ¨å†…å®¹çš„å®½åº¦ï¼Œä¸€èˆ¬æ¥è¯´ä¼šå¤§äºç­‰äºå…ƒç´ å®½åº¦ã€‚\n- scrollHeight å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤ºå…ƒç´ å†…éƒ¨çš„æ»šåŠ¨å†…å®¹çš„é«˜åº¦ï¼Œä¸€èˆ¬æ¥è¯´ä¼šå¤§äºç­‰äºå…ƒç´ é«˜åº¦ã€‚\n- scroll(x, y) ä½¿å¾—å…ƒç´ æ»šåŠ¨åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæœ‰åˆ«å scrollToï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ã€‚scrollBy(x, y) ä½¿å¾—å…ƒç´ æ»šåŠ¨åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ã€‚\n- scrollIntoView(arg) æ»šåŠ¨å…ƒç´ æ‰€åœ¨çš„çˆ¶å…ƒç´ ï¼Œä½¿å¾—å…ƒç´ æ»šåŠ¨åˆ°å¯è§åŒºåŸŸï¼Œå¯ä»¥é€šè¿‡ arg æ¥æŒ‡å®šæ»šåˆ°ä¸­é—´ã€å¼€å§‹æˆ–è€…å°±è¿‘ã€‚\n\n\n\t```javascript\n\twindow.scroll(0, 0)\n\t\n\twindow.scroll(0, 50) // æ»šåŠ¨è‡³ (0, 50)\n\t\n\twindow.scrollBy(0, 50) // æ»šåŠ¨ç»å¯¹å€¼\n\t```\n\n#### å¸ƒå±€API\nå…¨å±€å°ºå¯¸ä¿¡æ¯\n\n- window.innerHeight, window.innerWidth è¿™ä¸¤ä¸ªå±æ€§è¡¨ç¤ºè§†å£çš„å¤§å°ã€‚\n- window.outerWidth, window.outerHeight è¿™ä¸¤ä¸ªå±æ€§è¡¨ç¤ºæµè§ˆå™¨çª—å£å æ®çš„å¤§å°ï¼Œå¾ˆå¤šæµè§ˆå™¨æ²¡æœ‰å®ç°ï¼Œä¸€èˆ¬æ¥è¯´è¿™ä¸¤ä¸ªå±æ€§æ— å…³ç´§è¦ã€‚\n- window.devicePixelRatio è¿™ä¸ªå±æ€§éå¸¸é‡è¦ï¼Œè¡¨ç¤ºç‰©ç†åƒç´ å’Œ CSS åƒç´ å•ä½çš„å€ç‡å…³ç³»ï¼ŒRetina å±è¿™ä¸ªå€¼æ˜¯ 2ï¼Œåæ¥ä¹Ÿå‡ºç°äº†ä¸€äº› 3 å€çš„ Android å±ã€‚\n- window.screen ï¼ˆå±å¹•å°ºå¯¸ç›¸å…³çš„ä¿¡æ¯ï¼‰\n\t- window.screen.width, window.screen.height è®¾å¤‡çš„å±å¹•å°ºå¯¸ã€‚\n\t- window.screen.availWidth, window.screen.availHeight è®¾å¤‡å±å¹•çš„å¯æ¸²æŸ“åŒºåŸŸå°ºå¯¸ï¼Œä¸€äº› Android æœºå™¨ä¼šæŠŠå±å¹•çš„ä¸€éƒ¨åˆ†é¢„ç•™åšå›ºå®šæŒ‰é’®ï¼Œæ‰€ä»¥æœ‰è¿™ä¸¤ä¸ªå±æ€§ï¼Œå®é™…ä¸Šä¸€èˆ¬æµè§ˆå™¨ä¸ä¼šå®ç°çš„è¿™ä¹ˆç»†è‡´ã€‚\n\t- window.screen.colorDepth, window.screen.pixelDepth è¿™ä¸¤ä¸ªå±æ€§æ˜¯å›ºå®šå€¼ 24ï¼Œåº”è¯¥æ˜¯ä¸ºäº†ä»¥åé¢„ç•™ã€‚\n\nå…ƒç´ çš„å¸ƒå±€ä¿¡æ¯\n\n- getClientRects(),ä¼šè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œé‡Œé¢åŒ…å«å…ƒç´ å¯¹åº”çš„æ¯ä¸€ä¸ªç›’æ‰€å æ®çš„å®¢æˆ·ç«¯çŸ©å½¢åŒºåŸŸï¼Œè¿™é‡Œæ¯ä¸€ä¸ªçŸ©å½¢åŒºåŸŸå¯ä»¥ç”¨ x, y, width, height æ¥è·å–å®ƒçš„ä½ç½®å’Œå°ºå¯¸;\n- getBoundingClientRect(),å®ƒè¿”å›å…ƒç´ å¯¹åº”çš„æ‰€æœ‰ç›’çš„åŒ…è£¹çš„çŸ©å½¢åŒºåŸŸï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™ä¸ª API è·å–çš„åŒºåŸŸä¼šåŒ…æ‹¬å½“ overflow ä¸º visible æ—¶çš„å­å…ƒç´ åŒºåŸŸã€‚\n\n\n\t```javascript\n\tgetClientRects() // ä¼ªå…ƒç´ ä¸ä¼šè¢«è®¡å…¥\n\t\n\tgetBoundingClientRect()\n\t\n\twindow.innerHeight\n\t// ç­‰åŒäº document.documentElement.getBoundingClientRect().height\n\t\n\twindow.innerWidth\n\t// ç­‰åŒäº document.documentElement.getBoundingClientRect().width\n\t\n\twindow.outerHeight\n\t\n\twindow.outerWidth\n\t\n\twindow.devicePixelRatio\n\t```\n\n\n\n## æ‰€æœ‰ API\n- [å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/html-apis.html)\n- [Web APIs](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week10/WebAPI.xmind)\n\n\n## Reference\n- [æ¨ç™»ç¨‹ CSSOM Note](https://github.com/yangdengcheng/Frontend-01-Template/blob/master/week10/NOTE.md)\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/HTML-XMLä¸SGML.md","raw":"---\ntitle: HTML-XMLä¸SGMLï¼ŒDOM & CSSOM\ndate: 2020-06-06 19:09:37\ntags: \n- HTML\ncategories:\n- HTML\ndescription:\n- HTML\n\n\n---\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- æ°¸ä¸å†é¸½ï¼Œæ˜¯ä¸å¯èƒ½çš„\n- è¡¥åˆ°ç¬¬äºŒå¤©çš„ 12:37\n\n<!-- more -->\n\n## HTML çš„å®šä¹‰ï¼šXML ä¸ SGML\n\n### DTD ä¸ XML namespace\n- [https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd](https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd)\n\t- [https://www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent](https://www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent)\n\t\t- \\&nbsp; \\u00A0 \"Â \" (no-break space = non-breaking space)\n\t\t- \\<!ENTITY nbspÂ Â Â Â \"\\&#160;\"\\> \\<!-- no-break space = non-breaking space, U+00A0 ISOnum --\\>\n\t- [https://www.w3.org/TR/xhtml1/DTD/xhtml-symbol.ent](https://www.w3.org/TR/xhtml1/DTD/xhtml-symbol.ent) Mathematical, Greek and Symbolic characters for XHTML\n\t- [https://www.w3.org/TR/xhtml1/DTD/xhtml-special.ent](https://www.w3.org/TR/xhtml1/DTD/xhtml-special.ent) Special characters for XHTML\n\t\t- html å±æ€§ä¸­ä¸èƒ½ä½¿ç”¨ \\\", éœ€è¦è½¬ä¹‰\n\t\t\t- \\<!ENTITY quotÂ Â Â Â \"\\&#34;\"\\> \\<!--  quotation mark, U+0022 ISOnum --\\> \\\"\n\t\t- html ä¸­ä¸èƒ½ä½¿ç”¨ \\&, éœ€è¦è½¬ä¹‰\n\t\t\t- \\<!ENTITY ampÂ Â Â Â \"\\&#38;#38;\"\\> \\<!--  ampersand, U+0026 ISOnum --\\> \\&\n\t\t- html ä¸­ä¸èƒ½ä½¿ç”¨ \\<, éœ€è¦è½¬ä¹‰\n\t\t\t- \\<!ENTITY ltÂ Â Â Â \"\\&#38;#60;\"\\> \\<!--  less-than sign, U+003C ISOnum --\\> \\<\n\t\t- html ä¸­ä¸èƒ½ä½¿ç”¨ \\>, éœ€è¦è½¬ä¹‰\n\t\t\t- <\\!ENTITY gtÂ Â Â Â \"\\&#62;\"\\> \\<!--  greater-than sign, U+003E ISOnum --\\> \\>\n- [http://www.w3.org/1999/xhtml](http://www.w3.org/1999/xhtml)\n\n\n\n\n## HTML æ ‡ç­¾ - è¯­ä¹‰\n### ä¸º wiki ç¼–å†™ HTML\n- [ç¤ºä¾‹ wiki](http://static001.geekbang.org/static/time/quote/World_Wide_Web-Wikipedia.html)\n\n\n## HTML - è¯­æ³•\n### åˆæ³•å…ƒç´ \n- Element: &lt;tagname&gt;...&lt;/tagname&gt;\n- Text: text\n- Comment: \\<!-- comments --\\>\n- DocumentType: <!Doctype html>\n- ProcessingInstruction: <?a 1?> \n\t- é¢„å¤„ç†\n- CDATA: <![CDATA[]]>\n\n### å­—ç¬¦å¼•ç”¨\n- \\&\\#160; \\&nbsp;\n- \\&amp;\n- \\&lt;\n- \\&gt;\n- \\&quot;\n\n\n\n## DOM\n\n### å¯¼èˆªç±»æ“ä½œ\n- parentNode\n- childNodes\n\t- living collection ä¼šè¢«å®æ—¶ä¿®æ”¹\n- firstChild\n- lastChild\n- nextSibling\n- previousSibling\n\n\n\n### ä¿®æ”¹æ“ä½œ\n- æ‰€æœ‰çš„ DOM é»˜è®¤æœ‰ä¸”åªæœ‰ä¸€ä¸ªçˆ¶å…ƒç´ \n\t- ä¸èƒ½è¢«ä¸¤æ¬¡æ’å…¥ DOM æ ‘ä¸­ã€‚\n\t- å°†ä¸€ä¸ª DOM å…ƒç´ ï¼Œæ’å…¥åˆ° a ä½ç½®ï¼Œå†è°ƒç”¨æ’å…¥åˆ° b ä½ç½®ï¼Œä¼šé»˜è®¤çš„å…ˆä» a ä½ç½® remove å‡ºæ¥\n\t- ![ChildNodes living collection](http://p1.meituan.net/myvideodistribute/fa6ba8388663f1d63bc4d062f05c7da8276923.png)\n- appendChild\n- insertBefore\n- removeChild\n- replaceChild\n\n### é«˜çº§æ“ä½œ\n- compareDocumentPosition æ˜¯ä¸€ä¸ªç”¨äºæ¯”è¾ƒä¸¤ä¸ªèŠ‚ç‚¹ä¸­å…³ç³»çš„å‡½æ•°\n- contains æ£€æŸ¥ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦åŒ…å«å¦ä¸€ä¸ªèŠ‚ç‚¹çš„å‡½æ•°\n- isEqualNode æ£€æŸ¥ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦å®Œå…¨ç›¸åŒ\n- isSameNode æ£€æŸ¥ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå®é™…ä¸Šåœ¨ JS ä¸­å¯ä»¥ç”¨ ===\n- cloneNode å¤åˆ¶ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¼ å…¥å‚æ•° trueï¼Œåˆ™ä¼šè¿åŒå­å…ƒç´ åšæ·±æ‹·è´\n\n\n\n## Event: å†’æ³¡ä¸æ•è·\n- [addEventListener MDN](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)\n- ![å†’æ³¡ä¸æ•è·](http://p0.meituan.net/myvideodistribute/46f706af50150735f325d6b6c7ac7c77150662.png)\n\n\n## Range API\n#### æŠŠä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ é€†åº\n\n### Range ç”¨æ³•\n- var range = new Range()\n- range.setStart(element, 9)\n- range.setEnd(element, 4)\n- var range = document.getSelection().getRangeAt(0)\n- var fragment = range.extractContents()\n- range.insertNode(document.createTextNode(\"aaa\"))\n\n### Range API\n- range.setStartBefore\n- range.setEndBefore\n- range.setStartAfter\n- range.setEndAfter\n- range.selectNode\n- range.selectNodeContents\n- ç»“è®ºï¼šrange æ›´ä¸ºç²¾ç»†æ“ä½œ DOMï¼Œæ‰¹é‡æ“ä½œ DOM\n\n\n## CSSOM\n### document.styleSheets\n- document.styleSheets\n- æ¡ˆä¾‹\n\n\n### Rules\n- document.styleSheets[0].cssRules\n- document.styleSheets[0].insertRule(\"p{color: pink;}\", 0)\n- document.styleSheets[0].removeRule(0)\n\n### Rule\n- CSSStyleRule\n\t- selectorText String\n\t- style k-v ç»“æ„\n- CSSCharsetRule\n- CSSImportRule\n- CSSMediaRule\n- CSSFontFaceRule\n- CSSPageRule\n- CSSNamespaceRule\n- CSSKeyframesRule\n- CSSKeyframeRule\n- CSSSupportRule\n- ...\n\n\n### getComputedStyle\n- window.getComputedStyle(elt, pseudoElt)\n\t- elt æƒ³è¦è·å–çš„å…ƒç´ \n\t- pseudoElt å¯é€‰ï¼Œä¼ªå…ƒç´ \n\n### CSSOM View\n#### çª—å£API\nçª—å£ API ç”¨äºæ“ä½œæµè§ˆå™¨çª—å£çš„ä½ç½®ã€å°ºå¯¸ç­‰\n\n- moveTo(x, y) çª—å£ç§»åŠ¨åˆ°å±å¹•çš„ç‰¹å®šåæ ‡ï¼›\n- moveBy(x, y) çª—å£ç§»åŠ¨ç‰¹å®šè·ç¦»ï¼›\n- resizeTo(x, y) æ”¹å˜çª—å£å¤§å°åˆ°ç‰¹å®šå°ºå¯¸ï¼›\n- resizeBy(x, y) æ”¹å˜çª—å£å¤§å°ç‰¹å®šå°ºå¯¸ã€‚\n- open()\n\n\n\t```javascript\n\tlet childWindow = window.open(\"about:blank\", \"_blank\")\n\t\n\tlet childWindow = window.open(\"about:blank\", \"_blank\", \"width=100,height=100,left=100,top=100\")\n\t\n\tchildWindow.moveBy(-50, -50)\n\t\n\tchildWindow.resizeBy(50, 50)\n\t```\n\n#### æ»šåŠ¨API\nè§†å£æ»šåŠ¨ API(å¯è§†åŒºåŸŸï¼Œç”± window å¯¹è±¡æ“ä½œ)\n\n- scrollX æ˜¯è§†å£çš„å±æ€§ï¼Œè¡¨ç¤º X æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ï¼Œæœ‰åˆ«å pageXOffsetï¼›\n- scrollY æ˜¯è§†å£çš„å±æ€§ï¼Œè¡¨ç¤º Y æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ï¼Œæœ‰åˆ«å pageYOffsetï¼›\n- scroll(x, y) ä½¿å¾—é¡µé¢æ»šåŠ¨åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæœ‰åˆ«å scrollToï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ï¼›\n- scrollBy(x, y) ä½¿å¾—é¡µé¢æ»šåŠ¨ç‰¹å®šçš„è·ç¦»ï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ã€‚\n\nå…ƒç´ æ»šåŠ¨ API(å…ƒç´ æ»šåŠ¨ APIï¼Œåœ¨ Element ç±»ä¸Š)\n\n- scrollTop å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤º Y æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ã€‚\n- scrollLeft å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤º X æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ã€‚\n- scrollWidth å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤ºå…ƒç´ å†…éƒ¨çš„æ»šåŠ¨å†…å®¹çš„å®½åº¦ï¼Œä¸€èˆ¬æ¥è¯´ä¼šå¤§äºç­‰äºå…ƒç´ å®½åº¦ã€‚\n- scrollHeight å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤ºå…ƒç´ å†…éƒ¨çš„æ»šåŠ¨å†…å®¹çš„é«˜åº¦ï¼Œä¸€èˆ¬æ¥è¯´ä¼šå¤§äºç­‰äºå…ƒç´ é«˜åº¦ã€‚\n- scroll(x, y) ä½¿å¾—å…ƒç´ æ»šåŠ¨åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæœ‰åˆ«å scrollToï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ã€‚scrollBy(x, y) ä½¿å¾—å…ƒç´ æ»šåŠ¨åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ã€‚\n- scrollIntoView(arg) æ»šåŠ¨å…ƒç´ æ‰€åœ¨çš„çˆ¶å…ƒç´ ï¼Œä½¿å¾—å…ƒç´ æ»šåŠ¨åˆ°å¯è§åŒºåŸŸï¼Œå¯ä»¥é€šè¿‡ arg æ¥æŒ‡å®šæ»šåˆ°ä¸­é—´ã€å¼€å§‹æˆ–è€…å°±è¿‘ã€‚\n\n\n\t```javascript\n\twindow.scroll(0, 0)\n\t\n\twindow.scroll(0, 50) // æ»šåŠ¨è‡³ (0, 50)\n\t\n\twindow.scrollBy(0, 50) // æ»šåŠ¨ç»å¯¹å€¼\n\t```\n\n#### å¸ƒå±€API\nå…¨å±€å°ºå¯¸ä¿¡æ¯\n\n- window.innerHeight, window.innerWidth è¿™ä¸¤ä¸ªå±æ€§è¡¨ç¤ºè§†å£çš„å¤§å°ã€‚\n- window.outerWidth, window.outerHeight è¿™ä¸¤ä¸ªå±æ€§è¡¨ç¤ºæµè§ˆå™¨çª—å£å æ®çš„å¤§å°ï¼Œå¾ˆå¤šæµè§ˆå™¨æ²¡æœ‰å®ç°ï¼Œä¸€èˆ¬æ¥è¯´è¿™ä¸¤ä¸ªå±æ€§æ— å…³ç´§è¦ã€‚\n- window.devicePixelRatio è¿™ä¸ªå±æ€§éå¸¸é‡è¦ï¼Œè¡¨ç¤ºç‰©ç†åƒç´ å’Œ CSS åƒç´ å•ä½çš„å€ç‡å…³ç³»ï¼ŒRetina å±è¿™ä¸ªå€¼æ˜¯ 2ï¼Œåæ¥ä¹Ÿå‡ºç°äº†ä¸€äº› 3 å€çš„ Android å±ã€‚\n- window.screen ï¼ˆå±å¹•å°ºå¯¸ç›¸å…³çš„ä¿¡æ¯ï¼‰\n\t- window.screen.width, window.screen.height è®¾å¤‡çš„å±å¹•å°ºå¯¸ã€‚\n\t- window.screen.availWidth, window.screen.availHeight è®¾å¤‡å±å¹•çš„å¯æ¸²æŸ“åŒºåŸŸå°ºå¯¸ï¼Œä¸€äº› Android æœºå™¨ä¼šæŠŠå±å¹•çš„ä¸€éƒ¨åˆ†é¢„ç•™åšå›ºå®šæŒ‰é’®ï¼Œæ‰€ä»¥æœ‰è¿™ä¸¤ä¸ªå±æ€§ï¼Œå®é™…ä¸Šä¸€èˆ¬æµè§ˆå™¨ä¸ä¼šå®ç°çš„è¿™ä¹ˆç»†è‡´ã€‚\n\t- window.screen.colorDepth, window.screen.pixelDepth è¿™ä¸¤ä¸ªå±æ€§æ˜¯å›ºå®šå€¼ 24ï¼Œåº”è¯¥æ˜¯ä¸ºäº†ä»¥åé¢„ç•™ã€‚\n\nå…ƒç´ çš„å¸ƒå±€ä¿¡æ¯\n\n- getClientRects(),ä¼šè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œé‡Œé¢åŒ…å«å…ƒç´ å¯¹åº”çš„æ¯ä¸€ä¸ªç›’æ‰€å æ®çš„å®¢æˆ·ç«¯çŸ©å½¢åŒºåŸŸï¼Œè¿™é‡Œæ¯ä¸€ä¸ªçŸ©å½¢åŒºåŸŸå¯ä»¥ç”¨ x, y, width, height æ¥è·å–å®ƒçš„ä½ç½®å’Œå°ºå¯¸;\n- getBoundingClientRect(),å®ƒè¿”å›å…ƒç´ å¯¹åº”çš„æ‰€æœ‰ç›’çš„åŒ…è£¹çš„çŸ©å½¢åŒºåŸŸï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™ä¸ª API è·å–çš„åŒºåŸŸä¼šåŒ…æ‹¬å½“ overflow ä¸º visible æ—¶çš„å­å…ƒç´ åŒºåŸŸã€‚\n\n\n\t```javascript\n\tgetClientRects() // ä¼ªå…ƒç´ ä¸ä¼šè¢«è®¡å…¥\n\t\n\tgetBoundingClientRect()\n\t\n\twindow.innerHeight\n\t// ç­‰åŒäº document.documentElement.getBoundingClientRect().height\n\t\n\twindow.innerWidth\n\t// ç­‰åŒäº document.documentElement.getBoundingClientRect().width\n\t\n\twindow.outerHeight\n\t\n\twindow.outerWidth\n\t\n\twindow.devicePixelRatio\n\t```\n\n\n\n## æ‰€æœ‰ API\n- [å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/html-apis.html)\n- [Web APIs](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week10/WebAPI.xmind)\n\n\n## Reference\n- [æ¨ç™»ç¨‹ CSSOM Note](https://github.com/yangdengcheng/Frontend-01-Template/blob/master/week10/NOTE.md)\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"HTML-XMLä¸SGML","published":1,"updated":"2020-10-27T15:21:11.261Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7p000rfw9k612tao3m","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>æ°¸ä¸å†é¸½ï¼Œæ˜¯ä¸å¯èƒ½çš„</li>\n<li>è¡¥åˆ°ç¬¬äºŒå¤©çš„ 12:37</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"HTML-çš„å®šä¹‰ï¼šXML-ä¸-SGML\"><a href=\"#HTML-çš„å®šä¹‰ï¼šXML-ä¸-SGML\" class=\"headerlink\" title=\"HTML çš„å®šä¹‰ï¼šXML ä¸ SGML\"></a>HTML çš„å®šä¹‰ï¼šXML ä¸ SGML</h2><h3 id=\"DTD-ä¸-XML-namespace\"><a href=\"#DTD-ä¸-XML-namespace\" class=\"headerlink\" title=\"DTD ä¸ XML namespace\"></a>DTD ä¸ XML namespace</h3><ul>\n<li><a href=\"https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</a><ul>\n<li><a href=\"https://www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent</a><ul>\n<li>&amp;nbsp; \\u00A0 â€œ â€œ (no-break space = non-breaking space)</li>\n<li>&lt;!ENTITY nbsp    â€œ&amp;#160;â€&gt; &lt;!â€“ no-break space = non-breaking space, U+00A0 ISOnum â€“&gt;</li>\n</ul>\n</li>\n<li><a href=\"https://www.w3.org/TR/xhtml1/DTD/xhtml-symbol.ent\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/TR/xhtml1/DTD/xhtml-symbol.ent</a> Mathematical, Greek and Symbolic characters for XHTML</li>\n<li><a href=\"https://www.w3.org/TR/xhtml1/DTD/xhtml-special.ent\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/TR/xhtml1/DTD/xhtml-special.ent</a> Special characters for XHTML<ul>\n<li>html å±æ€§ä¸­ä¸èƒ½ä½¿ç”¨ &quot;, éœ€è¦è½¬ä¹‰<ul>\n<li>&lt;!ENTITY quot    â€œ&amp;#34;â€&gt; &lt;!â€“  quotation mark, U+0022 ISOnum â€“&gt; &quot;</li>\n</ul>\n</li>\n<li>html ä¸­ä¸èƒ½ä½¿ç”¨ &amp;, éœ€è¦è½¬ä¹‰<ul>\n<li>&lt;!ENTITY amp    â€œ&amp;#38;#38;â€&gt; &lt;!â€“  ampersand, U+0026 ISOnum â€“&gt; &amp;</li>\n</ul>\n</li>\n<li>html ä¸­ä¸èƒ½ä½¿ç”¨ &lt;, éœ€è¦è½¬ä¹‰<ul>\n<li>&lt;!ENTITY lt    â€œ&amp;#38;#60;â€&gt; &lt;!â€“  less-than sign, U+003C ISOnum â€“&gt; &lt;</li>\n</ul>\n</li>\n<li>html ä¸­ä¸èƒ½ä½¿ç”¨ &gt;, éœ€è¦è½¬ä¹‰<ul>\n<li>&lt;!ENTITY gt    â€œ&amp;#62;â€&gt; &lt;!â€“  greater-than sign, U+003E ISOnum â€“&gt; &gt;</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"http://www.w3.org/1999/xhtml\" target=\"_blank\" rel=\"noopener\">http://www.w3.org/1999/xhtml</a></li>\n</ul>\n<h2 id=\"HTML-æ ‡ç­¾-è¯­ä¹‰\"><a href=\"#HTML-æ ‡ç­¾-è¯­ä¹‰\" class=\"headerlink\" title=\"HTML æ ‡ç­¾ - è¯­ä¹‰\"></a>HTML æ ‡ç­¾ - è¯­ä¹‰</h2><h3 id=\"ä¸º-wiki-ç¼–å†™-HTML\"><a href=\"#ä¸º-wiki-ç¼–å†™-HTML\" class=\"headerlink\" title=\"ä¸º wiki ç¼–å†™ HTML\"></a>ä¸º wiki ç¼–å†™ HTML</h3><ul>\n<li><a href=\"http://static001.geekbang.org/static/time/quote/World_Wide_Web-Wikipedia.html\" target=\"_blank\" rel=\"noopener\">ç¤ºä¾‹ wiki</a></li>\n</ul>\n<h2 id=\"HTML-è¯­æ³•\"><a href=\"#HTML-è¯­æ³•\" class=\"headerlink\" title=\"HTML - è¯­æ³•\"></a>HTML - è¯­æ³•</h2><h3 id=\"åˆæ³•å…ƒç´ \"><a href=\"#åˆæ³•å…ƒç´ \" class=\"headerlink\" title=\"åˆæ³•å…ƒç´ \"></a>åˆæ³•å…ƒç´ </h3><ul>\n<li>Element: &lt;tagname&gt;â€¦&lt;/tagname&gt;</li>\n<li>Text: text</li>\n<li>Comment: &lt;!â€“ comments â€“&gt;</li>\n<li>DocumentType: <!Doctype html></li>\n<li>ProcessingInstruction: <?a 1?> <ul>\n<li>é¢„å¤„ç†</li>\n</ul>\n</li>\n<li>CDATA: <![CDATA[]]></li>\n</ul>\n<h3 id=\"å­—ç¬¦å¼•ç”¨\"><a href=\"#å­—ç¬¦å¼•ç”¨\" class=\"headerlink\" title=\"å­—ç¬¦å¼•ç”¨\"></a>å­—ç¬¦å¼•ç”¨</h3><ul>\n<li>&amp;#160; &amp;nbsp;</li>\n<li>&amp;amp;</li>\n<li>&amp;lt;</li>\n<li>&amp;gt;</li>\n<li>&amp;quot;</li>\n</ul>\n<h2 id=\"DOM\"><a href=\"#DOM\" class=\"headerlink\" title=\"DOM\"></a>DOM</h2><h3 id=\"å¯¼èˆªç±»æ“ä½œ\"><a href=\"#å¯¼èˆªç±»æ“ä½œ\" class=\"headerlink\" title=\"å¯¼èˆªç±»æ“ä½œ\"></a>å¯¼èˆªç±»æ“ä½œ</h3><ul>\n<li>parentNode</li>\n<li>childNodes<ul>\n<li>living collection ä¼šè¢«å®æ—¶ä¿®æ”¹</li>\n</ul>\n</li>\n<li>firstChild</li>\n<li>lastChild</li>\n<li>nextSibling</li>\n<li>previousSibling</li>\n</ul>\n<h3 id=\"ä¿®æ”¹æ“ä½œ\"><a href=\"#ä¿®æ”¹æ“ä½œ\" class=\"headerlink\" title=\"ä¿®æ”¹æ“ä½œ\"></a>ä¿®æ”¹æ“ä½œ</h3><ul>\n<li>æ‰€æœ‰çš„ DOM é»˜è®¤æœ‰ä¸”åªæœ‰ä¸€ä¸ªçˆ¶å…ƒç´ <ul>\n<li>ä¸èƒ½è¢«ä¸¤æ¬¡æ’å…¥ DOM æ ‘ä¸­ã€‚</li>\n<li>å°†ä¸€ä¸ª DOM å…ƒç´ ï¼Œæ’å…¥åˆ° a ä½ç½®ï¼Œå†è°ƒç”¨æ’å…¥åˆ° b ä½ç½®ï¼Œä¼šé»˜è®¤çš„å…ˆä» a ä½ç½® remove å‡ºæ¥</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/fa6ba8388663f1d63bc4d062f05c7da8276923.png\" alt=\"ChildNodes living collection\"></li>\n</ul>\n</li>\n<li>appendChild</li>\n<li>insertBefore</li>\n<li>removeChild</li>\n<li>replaceChild</li>\n</ul>\n<h3 id=\"é«˜çº§æ“ä½œ\"><a href=\"#é«˜çº§æ“ä½œ\" class=\"headerlink\" title=\"é«˜çº§æ“ä½œ\"></a>é«˜çº§æ“ä½œ</h3><ul>\n<li>compareDocumentPosition æ˜¯ä¸€ä¸ªç”¨äºæ¯”è¾ƒä¸¤ä¸ªèŠ‚ç‚¹ä¸­å…³ç³»çš„å‡½æ•°</li>\n<li>contains æ£€æŸ¥ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦åŒ…å«å¦ä¸€ä¸ªèŠ‚ç‚¹çš„å‡½æ•°</li>\n<li>isEqualNode æ£€æŸ¥ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦å®Œå…¨ç›¸åŒ</li>\n<li>isSameNode æ£€æŸ¥ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå®é™…ä¸Šåœ¨ JS ä¸­å¯ä»¥ç”¨ ===</li>\n<li>cloneNode å¤åˆ¶ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¼ å…¥å‚æ•° trueï¼Œåˆ™ä¼šè¿åŒå­å…ƒç´ åšæ·±æ‹·è´</li>\n</ul>\n<h2 id=\"Event-å†’æ³¡ä¸æ•è·\"><a href=\"#Event-å†’æ³¡ä¸æ•è·\" class=\"headerlink\" title=\"Event: å†’æ³¡ä¸æ•è·\"></a>Event: å†’æ³¡ä¸æ•è·</h2><ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\" target=\"_blank\" rel=\"noopener\">addEventListener MDN</a></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/46f706af50150735f325d6b6c7ac7c77150662.png\" alt=\"å†’æ³¡ä¸æ•è·\"></li>\n</ul>\n<h2 id=\"Range-API\"><a href=\"#Range-API\" class=\"headerlink\" title=\"Range API\"></a>Range API</h2><h4 id=\"æŠŠä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ é€†åº\"><a href=\"#æŠŠä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ é€†åº\" class=\"headerlink\" title=\"æŠŠä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ é€†åº\"></a>æŠŠä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ é€†åº</h4><h3 id=\"Range-ç”¨æ³•\"><a href=\"#Range-ç”¨æ³•\" class=\"headerlink\" title=\"Range ç”¨æ³•\"></a>Range ç”¨æ³•</h3><ul>\n<li>var range = new Range()</li>\n<li>range.setStart(element, 9)</li>\n<li>range.setEnd(element, 4)</li>\n<li>var range = document.getSelection().getRangeAt(0)</li>\n<li>var fragment = range.extractContents()</li>\n<li>range.insertNode(document.createTextNode(â€œaaaâ€))</li>\n</ul>\n<h3 id=\"Range-API-1\"><a href=\"#Range-API-1\" class=\"headerlink\" title=\"Range API\"></a>Range API</h3><ul>\n<li>range.setStartBefore</li>\n<li>range.setEndBefore</li>\n<li>range.setStartAfter</li>\n<li>range.setEndAfter</li>\n<li>range.selectNode</li>\n<li>range.selectNodeContents</li>\n<li>ç»“è®ºï¼šrange æ›´ä¸ºç²¾ç»†æ“ä½œ DOMï¼Œæ‰¹é‡æ“ä½œ DOM</li>\n</ul>\n<h2 id=\"CSSOM\"><a href=\"#CSSOM\" class=\"headerlink\" title=\"CSSOM\"></a>CSSOM</h2><h3 id=\"document-styleSheets\"><a href=\"#document-styleSheets\" class=\"headerlink\" title=\"document.styleSheets\"></a>document.styleSheets</h3><ul>\n<li>document.styleSheets</li>\n<li>æ¡ˆä¾‹</li>\n</ul>\n<h3 id=\"Rules\"><a href=\"#Rules\" class=\"headerlink\" title=\"Rules\"></a>Rules</h3><ul>\n<li>document.styleSheets[0].cssRules</li>\n<li>document.styleSheets[0].insertRule(â€œp{color: pink;}â€, 0)</li>\n<li>document.styleSheets[0].removeRule(0)</li>\n</ul>\n<h3 id=\"Rule\"><a href=\"#Rule\" class=\"headerlink\" title=\"Rule\"></a>Rule</h3><ul>\n<li>CSSStyleRule<ul>\n<li>selectorText String</li>\n<li>style k-v ç»“æ„</li>\n</ul>\n</li>\n<li>CSSCharsetRule</li>\n<li>CSSImportRule</li>\n<li>CSSMediaRule</li>\n<li>CSSFontFaceRule</li>\n<li>CSSPageRule</li>\n<li>CSSNamespaceRule</li>\n<li>CSSKeyframesRule</li>\n<li>CSSKeyframeRule</li>\n<li>CSSSupportRule</li>\n<li>â€¦</li>\n</ul>\n<h3 id=\"getComputedStyle\"><a href=\"#getComputedStyle\" class=\"headerlink\" title=\"getComputedStyle\"></a>getComputedStyle</h3><ul>\n<li>window.getComputedStyle(elt, pseudoElt)<ul>\n<li>elt æƒ³è¦è·å–çš„å…ƒç´ </li>\n<li>pseudoElt å¯é€‰ï¼Œä¼ªå…ƒç´ </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"CSSOM-View\"><a href=\"#CSSOM-View\" class=\"headerlink\" title=\"CSSOM View\"></a>CSSOM View</h3><h4 id=\"çª—å£API\"><a href=\"#çª—å£API\" class=\"headerlink\" title=\"çª—å£API\"></a>çª—å£API</h4><p>çª—å£ API ç”¨äºæ“ä½œæµè§ˆå™¨çª—å£çš„ä½ç½®ã€å°ºå¯¸ç­‰</p>\n<ul>\n<li>moveTo(x, y) çª—å£ç§»åŠ¨åˆ°å±å¹•çš„ç‰¹å®šåæ ‡ï¼›</li>\n<li>moveBy(x, y) çª—å£ç§»åŠ¨ç‰¹å®šè·ç¦»ï¼›</li>\n<li>resizeTo(x, y) æ”¹å˜çª—å£å¤§å°åˆ°ç‰¹å®šå°ºå¯¸ï¼›</li>\n<li>resizeBy(x, y) æ”¹å˜çª—å£å¤§å°ç‰¹å®šå°ºå¯¸ã€‚</li>\n<li>open()</li>\n</ul>\n<pre><code><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> childWindow = <span class=\"built_in\">window</span>.open(<span class=\"string\">\"about:blank\"</span>, <span class=\"string\">\"_blank\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> childWindow = <span class=\"built_in\">window</span>.open(<span class=\"string\">\"about:blank\"</span>, <span class=\"string\">\"_blank\"</span>, <span class=\"string\">\"width=100,height=100,left=100,top=100\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">childWindow.moveBy(<span class=\"number\">-50</span>, <span class=\"number\">-50</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">childWindow.resizeBy(<span class=\"number\">50</span>, <span class=\"number\">50</span>)</span><br></pre></td></tr></table></figure></code></pre><h4 id=\"æ»šåŠ¨API\"><a href=\"#æ»šåŠ¨API\" class=\"headerlink\" title=\"æ»šåŠ¨API\"></a>æ»šåŠ¨API</h4><p>è§†å£æ»šåŠ¨ API(å¯è§†åŒºåŸŸï¼Œç”± window å¯¹è±¡æ“ä½œ)</p>\n<ul>\n<li>scrollX æ˜¯è§†å£çš„å±æ€§ï¼Œè¡¨ç¤º X æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ï¼Œæœ‰åˆ«å pageXOffsetï¼›</li>\n<li>scrollY æ˜¯è§†å£çš„å±æ€§ï¼Œè¡¨ç¤º Y æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ï¼Œæœ‰åˆ«å pageYOffsetï¼›</li>\n<li>scroll(x, y) ä½¿å¾—é¡µé¢æ»šåŠ¨åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæœ‰åˆ«å scrollToï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ï¼›</li>\n<li>scrollBy(x, y) ä½¿å¾—é¡µé¢æ»šåŠ¨ç‰¹å®šçš„è·ç¦»ï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ã€‚</li>\n</ul>\n<p>å…ƒç´ æ»šåŠ¨ API(å…ƒç´ æ»šåŠ¨ APIï¼Œåœ¨ Element ç±»ä¸Š)</p>\n<ul>\n<li>scrollTop å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤º Y æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ã€‚</li>\n<li>scrollLeft å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤º X æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ã€‚</li>\n<li>scrollWidth å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤ºå…ƒç´ å†…éƒ¨çš„æ»šåŠ¨å†…å®¹çš„å®½åº¦ï¼Œä¸€èˆ¬æ¥è¯´ä¼šå¤§äºç­‰äºå…ƒç´ å®½åº¦ã€‚</li>\n<li>scrollHeight å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤ºå…ƒç´ å†…éƒ¨çš„æ»šåŠ¨å†…å®¹çš„é«˜åº¦ï¼Œä¸€èˆ¬æ¥è¯´ä¼šå¤§äºç­‰äºå…ƒç´ é«˜åº¦ã€‚</li>\n<li>scroll(x, y) ä½¿å¾—å…ƒç´ æ»šåŠ¨åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæœ‰åˆ«å scrollToï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ã€‚scrollBy(x, y) ä½¿å¾—å…ƒç´ æ»šåŠ¨åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ã€‚</li>\n<li>scrollIntoView(arg) æ»šåŠ¨å…ƒç´ æ‰€åœ¨çš„çˆ¶å…ƒç´ ï¼Œä½¿å¾—å…ƒç´ æ»šåŠ¨åˆ°å¯è§åŒºåŸŸï¼Œå¯ä»¥é€šè¿‡ arg æ¥æŒ‡å®šæ»šåˆ°ä¸­é—´ã€å¼€å§‹æˆ–è€…å°±è¿‘ã€‚</li>\n</ul>\n<pre><code><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.scroll(<span class=\"number\">0</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.scroll(<span class=\"number\">0</span>, <span class=\"number\">50</span>) <span class=\"comment\">// æ»šåŠ¨è‡³ (0, 50)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.scrollBy(<span class=\"number\">0</span>, <span class=\"number\">50</span>) <span class=\"comment\">// æ»šåŠ¨ç»å¯¹å€¼</span></span><br></pre></td></tr></table></figure></code></pre><h4 id=\"å¸ƒå±€API\"><a href=\"#å¸ƒå±€API\" class=\"headerlink\" title=\"å¸ƒå±€API\"></a>å¸ƒå±€API</h4><p>å…¨å±€å°ºå¯¸ä¿¡æ¯</p>\n<ul>\n<li>window.innerHeight, window.innerWidth è¿™ä¸¤ä¸ªå±æ€§è¡¨ç¤ºè§†å£çš„å¤§å°ã€‚</li>\n<li>window.outerWidth, window.outerHeight è¿™ä¸¤ä¸ªå±æ€§è¡¨ç¤ºæµè§ˆå™¨çª—å£å æ®çš„å¤§å°ï¼Œå¾ˆå¤šæµè§ˆå™¨æ²¡æœ‰å®ç°ï¼Œä¸€èˆ¬æ¥è¯´è¿™ä¸¤ä¸ªå±æ€§æ— å…³ç´§è¦ã€‚</li>\n<li>window.devicePixelRatio è¿™ä¸ªå±æ€§éå¸¸é‡è¦ï¼Œè¡¨ç¤ºç‰©ç†åƒç´ å’Œ CSS åƒç´ å•ä½çš„å€ç‡å…³ç³»ï¼ŒRetina å±è¿™ä¸ªå€¼æ˜¯ 2ï¼Œåæ¥ä¹Ÿå‡ºç°äº†ä¸€äº› 3 å€çš„ Android å±ã€‚</li>\n<li>window.screen ï¼ˆå±å¹•å°ºå¯¸ç›¸å…³çš„ä¿¡æ¯ï¼‰<ul>\n<li>window.screen.width, window.screen.height è®¾å¤‡çš„å±å¹•å°ºå¯¸ã€‚</li>\n<li>window.screen.availWidth, window.screen.availHeight è®¾å¤‡å±å¹•çš„å¯æ¸²æŸ“åŒºåŸŸå°ºå¯¸ï¼Œä¸€äº› Android æœºå™¨ä¼šæŠŠå±å¹•çš„ä¸€éƒ¨åˆ†é¢„ç•™åšå›ºå®šæŒ‰é’®ï¼Œæ‰€ä»¥æœ‰è¿™ä¸¤ä¸ªå±æ€§ï¼Œå®é™…ä¸Šä¸€èˆ¬æµè§ˆå™¨ä¸ä¼šå®ç°çš„è¿™ä¹ˆç»†è‡´ã€‚</li>\n<li>window.screen.colorDepth, window.screen.pixelDepth è¿™ä¸¤ä¸ªå±æ€§æ˜¯å›ºå®šå€¼ 24ï¼Œåº”è¯¥æ˜¯ä¸ºäº†ä»¥åé¢„ç•™ã€‚</li>\n</ul>\n</li>\n</ul>\n<p>å…ƒç´ çš„å¸ƒå±€ä¿¡æ¯</p>\n<ul>\n<li>getClientRects(),ä¼šè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œé‡Œé¢åŒ…å«å…ƒç´ å¯¹åº”çš„æ¯ä¸€ä¸ªç›’æ‰€å æ®çš„å®¢æˆ·ç«¯çŸ©å½¢åŒºåŸŸï¼Œè¿™é‡Œæ¯ä¸€ä¸ªçŸ©å½¢åŒºåŸŸå¯ä»¥ç”¨ x, y, width, height æ¥è·å–å®ƒçš„ä½ç½®å’Œå°ºå¯¸;</li>\n<li>getBoundingClientRect(),å®ƒè¿”å›å…ƒç´ å¯¹åº”çš„æ‰€æœ‰ç›’çš„åŒ…è£¹çš„çŸ©å½¢åŒºåŸŸï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™ä¸ª API è·å–çš„åŒºåŸŸä¼šåŒ…æ‹¬å½“ overflow ä¸º visible æ—¶çš„å­å…ƒç´ åŒºåŸŸã€‚</li>\n</ul>\n<pre><code><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getClientRects() <span class=\"comment\">// ä¼ªå…ƒç´ ä¸ä¼šè¢«è®¡å…¥</span></span><br><span class=\"line\"></span><br><span class=\"line\">getBoundingClientRect()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.innerHeight</span><br><span class=\"line\"><span class=\"comment\">// ç­‰åŒäº document.documentElement.getBoundingClientRect().height</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.innerWidth</span><br><span class=\"line\"><span class=\"comment\">// ç­‰åŒäº document.documentElement.getBoundingClientRect().width</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.outerHeight</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.outerWidth</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.devicePixelRatio</span><br></pre></td></tr></table></figure></code></pre><h2 id=\"æ‰€æœ‰-API\"><a href=\"#æ‰€æœ‰-API\" class=\"headerlink\" title=\"æ‰€æœ‰ API\"></a>æ‰€æœ‰ API</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/html-apis.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week10/WebAPI.xmind\" target=\"_blank\" rel=\"noopener\">Web APIs</a></li>\n</ul>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><ul>\n<li><a href=\"https://github.com/yangdengcheng/Frontend-01-Template/blob/master/week10/NOTE.md\" target=\"_blank\" rel=\"noopener\">æ¨ç™»ç¨‹ CSSOM Note</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>æ°¸ä¸å†é¸½ï¼Œæ˜¯ä¸å¯èƒ½çš„</li>\n<li>è¡¥åˆ°ç¬¬äºŒå¤©çš„ 12:37</li>\n</ul>","more":"<h2 id=\"HTML-çš„å®šä¹‰ï¼šXML-ä¸-SGML\"><a href=\"#HTML-çš„å®šä¹‰ï¼šXML-ä¸-SGML\" class=\"headerlink\" title=\"HTML çš„å®šä¹‰ï¼šXML ä¸ SGML\"></a>HTML çš„å®šä¹‰ï¼šXML ä¸ SGML</h2><h3 id=\"DTD-ä¸-XML-namespace\"><a href=\"#DTD-ä¸-XML-namespace\" class=\"headerlink\" title=\"DTD ä¸ XML namespace\"></a>DTD ä¸ XML namespace</h3><ul>\n<li><a href=\"https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</a><ul>\n<li><a href=\"https://www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent</a><ul>\n<li>&amp;nbsp; \\u00A0 â€œ â€œ (no-break space = non-breaking space)</li>\n<li>&lt;!ENTITY nbsp    â€œ&amp;#160;â€&gt; &lt;!â€“ no-break space = non-breaking space, U+00A0 ISOnum â€“&gt;</li>\n</ul>\n</li>\n<li><a href=\"https://www.w3.org/TR/xhtml1/DTD/xhtml-symbol.ent\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/TR/xhtml1/DTD/xhtml-symbol.ent</a> Mathematical, Greek and Symbolic characters for XHTML</li>\n<li><a href=\"https://www.w3.org/TR/xhtml1/DTD/xhtml-special.ent\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/TR/xhtml1/DTD/xhtml-special.ent</a> Special characters for XHTML<ul>\n<li>html å±æ€§ä¸­ä¸èƒ½ä½¿ç”¨ &quot;, éœ€è¦è½¬ä¹‰<ul>\n<li>&lt;!ENTITY quot    â€œ&amp;#34;â€&gt; &lt;!â€“  quotation mark, U+0022 ISOnum â€“&gt; &quot;</li>\n</ul>\n</li>\n<li>html ä¸­ä¸èƒ½ä½¿ç”¨ &amp;, éœ€è¦è½¬ä¹‰<ul>\n<li>&lt;!ENTITY amp    â€œ&amp;#38;#38;â€&gt; &lt;!â€“  ampersand, U+0026 ISOnum â€“&gt; &amp;</li>\n</ul>\n</li>\n<li>html ä¸­ä¸èƒ½ä½¿ç”¨ &lt;, éœ€è¦è½¬ä¹‰<ul>\n<li>&lt;!ENTITY lt    â€œ&amp;#38;#60;â€&gt; &lt;!â€“  less-than sign, U+003C ISOnum â€“&gt; &lt;</li>\n</ul>\n</li>\n<li>html ä¸­ä¸èƒ½ä½¿ç”¨ &gt;, éœ€è¦è½¬ä¹‰<ul>\n<li>&lt;!ENTITY gt    â€œ&amp;#62;â€&gt; &lt;!â€“  greater-than sign, U+003E ISOnum â€“&gt; &gt;</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"http://www.w3.org/1999/xhtml\" target=\"_blank\" rel=\"noopener\">http://www.w3.org/1999/xhtml</a></li>\n</ul>\n<h2 id=\"HTML-æ ‡ç­¾-è¯­ä¹‰\"><a href=\"#HTML-æ ‡ç­¾-è¯­ä¹‰\" class=\"headerlink\" title=\"HTML æ ‡ç­¾ - è¯­ä¹‰\"></a>HTML æ ‡ç­¾ - è¯­ä¹‰</h2><h3 id=\"ä¸º-wiki-ç¼–å†™-HTML\"><a href=\"#ä¸º-wiki-ç¼–å†™-HTML\" class=\"headerlink\" title=\"ä¸º wiki ç¼–å†™ HTML\"></a>ä¸º wiki ç¼–å†™ HTML</h3><ul>\n<li><a href=\"http://static001.geekbang.org/static/time/quote/World_Wide_Web-Wikipedia.html\" target=\"_blank\" rel=\"noopener\">ç¤ºä¾‹ wiki</a></li>\n</ul>\n<h2 id=\"HTML-è¯­æ³•\"><a href=\"#HTML-è¯­æ³•\" class=\"headerlink\" title=\"HTML - è¯­æ³•\"></a>HTML - è¯­æ³•</h2><h3 id=\"åˆæ³•å…ƒç´ \"><a href=\"#åˆæ³•å…ƒç´ \" class=\"headerlink\" title=\"åˆæ³•å…ƒç´ \"></a>åˆæ³•å…ƒç´ </h3><ul>\n<li>Element: &lt;tagname&gt;â€¦&lt;/tagname&gt;</li>\n<li>Text: text</li>\n<li>Comment: &lt;!â€“ comments â€“&gt;</li>\n<li>DocumentType: <!Doctype html></li>\n<li>ProcessingInstruction: <?a 1?> <ul>\n<li>é¢„å¤„ç†</li>\n</ul>\n</li>\n<li>CDATA: <![CDATA[]]></li>\n</ul>\n<h3 id=\"å­—ç¬¦å¼•ç”¨\"><a href=\"#å­—ç¬¦å¼•ç”¨\" class=\"headerlink\" title=\"å­—ç¬¦å¼•ç”¨\"></a>å­—ç¬¦å¼•ç”¨</h3><ul>\n<li>&amp;#160; &amp;nbsp;</li>\n<li>&amp;amp;</li>\n<li>&amp;lt;</li>\n<li>&amp;gt;</li>\n<li>&amp;quot;</li>\n</ul>\n<h2 id=\"DOM\"><a href=\"#DOM\" class=\"headerlink\" title=\"DOM\"></a>DOM</h2><h3 id=\"å¯¼èˆªç±»æ“ä½œ\"><a href=\"#å¯¼èˆªç±»æ“ä½œ\" class=\"headerlink\" title=\"å¯¼èˆªç±»æ“ä½œ\"></a>å¯¼èˆªç±»æ“ä½œ</h3><ul>\n<li>parentNode</li>\n<li>childNodes<ul>\n<li>living collection ä¼šè¢«å®æ—¶ä¿®æ”¹</li>\n</ul>\n</li>\n<li>firstChild</li>\n<li>lastChild</li>\n<li>nextSibling</li>\n<li>previousSibling</li>\n</ul>\n<h3 id=\"ä¿®æ”¹æ“ä½œ\"><a href=\"#ä¿®æ”¹æ“ä½œ\" class=\"headerlink\" title=\"ä¿®æ”¹æ“ä½œ\"></a>ä¿®æ”¹æ“ä½œ</h3><ul>\n<li>æ‰€æœ‰çš„ DOM é»˜è®¤æœ‰ä¸”åªæœ‰ä¸€ä¸ªçˆ¶å…ƒç´ <ul>\n<li>ä¸èƒ½è¢«ä¸¤æ¬¡æ’å…¥ DOM æ ‘ä¸­ã€‚</li>\n<li>å°†ä¸€ä¸ª DOM å…ƒç´ ï¼Œæ’å…¥åˆ° a ä½ç½®ï¼Œå†è°ƒç”¨æ’å…¥åˆ° b ä½ç½®ï¼Œä¼šé»˜è®¤çš„å…ˆä» a ä½ç½® remove å‡ºæ¥</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/fa6ba8388663f1d63bc4d062f05c7da8276923.png\" alt=\"ChildNodes living collection\"></li>\n</ul>\n</li>\n<li>appendChild</li>\n<li>insertBefore</li>\n<li>removeChild</li>\n<li>replaceChild</li>\n</ul>\n<h3 id=\"é«˜çº§æ“ä½œ\"><a href=\"#é«˜çº§æ“ä½œ\" class=\"headerlink\" title=\"é«˜çº§æ“ä½œ\"></a>é«˜çº§æ“ä½œ</h3><ul>\n<li>compareDocumentPosition æ˜¯ä¸€ä¸ªç”¨äºæ¯”è¾ƒä¸¤ä¸ªèŠ‚ç‚¹ä¸­å…³ç³»çš„å‡½æ•°</li>\n<li>contains æ£€æŸ¥ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦åŒ…å«å¦ä¸€ä¸ªèŠ‚ç‚¹çš„å‡½æ•°</li>\n<li>isEqualNode æ£€æŸ¥ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦å®Œå…¨ç›¸åŒ</li>\n<li>isSameNode æ£€æŸ¥ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå®é™…ä¸Šåœ¨ JS ä¸­å¯ä»¥ç”¨ ===</li>\n<li>cloneNode å¤åˆ¶ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¼ å…¥å‚æ•° trueï¼Œåˆ™ä¼šè¿åŒå­å…ƒç´ åšæ·±æ‹·è´</li>\n</ul>\n<h2 id=\"Event-å†’æ³¡ä¸æ•è·\"><a href=\"#Event-å†’æ³¡ä¸æ•è·\" class=\"headerlink\" title=\"Event: å†’æ³¡ä¸æ•è·\"></a>Event: å†’æ³¡ä¸æ•è·</h2><ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\" target=\"_blank\" rel=\"noopener\">addEventListener MDN</a></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/46f706af50150735f325d6b6c7ac7c77150662.png\" alt=\"å†’æ³¡ä¸æ•è·\"></li>\n</ul>\n<h2 id=\"Range-API\"><a href=\"#Range-API\" class=\"headerlink\" title=\"Range API\"></a>Range API</h2><h4 id=\"æŠŠä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ é€†åº\"><a href=\"#æŠŠä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ é€†åº\" class=\"headerlink\" title=\"æŠŠä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ é€†åº\"></a>æŠŠä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ é€†åº</h4><h3 id=\"Range-ç”¨æ³•\"><a href=\"#Range-ç”¨æ³•\" class=\"headerlink\" title=\"Range ç”¨æ³•\"></a>Range ç”¨æ³•</h3><ul>\n<li>var range = new Range()</li>\n<li>range.setStart(element, 9)</li>\n<li>range.setEnd(element, 4)</li>\n<li>var range = document.getSelection().getRangeAt(0)</li>\n<li>var fragment = range.extractContents()</li>\n<li>range.insertNode(document.createTextNode(â€œaaaâ€))</li>\n</ul>\n<h3 id=\"Range-API-1\"><a href=\"#Range-API-1\" class=\"headerlink\" title=\"Range API\"></a>Range API</h3><ul>\n<li>range.setStartBefore</li>\n<li>range.setEndBefore</li>\n<li>range.setStartAfter</li>\n<li>range.setEndAfter</li>\n<li>range.selectNode</li>\n<li>range.selectNodeContents</li>\n<li>ç»“è®ºï¼šrange æ›´ä¸ºç²¾ç»†æ“ä½œ DOMï¼Œæ‰¹é‡æ“ä½œ DOM</li>\n</ul>\n<h2 id=\"CSSOM\"><a href=\"#CSSOM\" class=\"headerlink\" title=\"CSSOM\"></a>CSSOM</h2><h3 id=\"document-styleSheets\"><a href=\"#document-styleSheets\" class=\"headerlink\" title=\"document.styleSheets\"></a>document.styleSheets</h3><ul>\n<li>document.styleSheets</li>\n<li>æ¡ˆä¾‹</li>\n</ul>\n<h3 id=\"Rules\"><a href=\"#Rules\" class=\"headerlink\" title=\"Rules\"></a>Rules</h3><ul>\n<li>document.styleSheets[0].cssRules</li>\n<li>document.styleSheets[0].insertRule(â€œp{color: pink;}â€, 0)</li>\n<li>document.styleSheets[0].removeRule(0)</li>\n</ul>\n<h3 id=\"Rule\"><a href=\"#Rule\" class=\"headerlink\" title=\"Rule\"></a>Rule</h3><ul>\n<li>CSSStyleRule<ul>\n<li>selectorText String</li>\n<li>style k-v ç»“æ„</li>\n</ul>\n</li>\n<li>CSSCharsetRule</li>\n<li>CSSImportRule</li>\n<li>CSSMediaRule</li>\n<li>CSSFontFaceRule</li>\n<li>CSSPageRule</li>\n<li>CSSNamespaceRule</li>\n<li>CSSKeyframesRule</li>\n<li>CSSKeyframeRule</li>\n<li>CSSSupportRule</li>\n<li>â€¦</li>\n</ul>\n<h3 id=\"getComputedStyle\"><a href=\"#getComputedStyle\" class=\"headerlink\" title=\"getComputedStyle\"></a>getComputedStyle</h3><ul>\n<li>window.getComputedStyle(elt, pseudoElt)<ul>\n<li>elt æƒ³è¦è·å–çš„å…ƒç´ </li>\n<li>pseudoElt å¯é€‰ï¼Œä¼ªå…ƒç´ </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"CSSOM-View\"><a href=\"#CSSOM-View\" class=\"headerlink\" title=\"CSSOM View\"></a>CSSOM View</h3><h4 id=\"çª—å£API\"><a href=\"#çª—å£API\" class=\"headerlink\" title=\"çª—å£API\"></a>çª—å£API</h4><p>çª—å£ API ç”¨äºæ“ä½œæµè§ˆå™¨çª—å£çš„ä½ç½®ã€å°ºå¯¸ç­‰</p>\n<ul>\n<li>moveTo(x, y) çª—å£ç§»åŠ¨åˆ°å±å¹•çš„ç‰¹å®šåæ ‡ï¼›</li>\n<li>moveBy(x, y) çª—å£ç§»åŠ¨ç‰¹å®šè·ç¦»ï¼›</li>\n<li>resizeTo(x, y) æ”¹å˜çª—å£å¤§å°åˆ°ç‰¹å®šå°ºå¯¸ï¼›</li>\n<li>resizeBy(x, y) æ”¹å˜çª—å£å¤§å°ç‰¹å®šå°ºå¯¸ã€‚</li>\n<li>open()</li>\n</ul>\n<pre><code><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> childWindow = <span class=\"built_in\">window</span>.open(<span class=\"string\">\"about:blank\"</span>, <span class=\"string\">\"_blank\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> childWindow = <span class=\"built_in\">window</span>.open(<span class=\"string\">\"about:blank\"</span>, <span class=\"string\">\"_blank\"</span>, <span class=\"string\">\"width=100,height=100,left=100,top=100\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">childWindow.moveBy(<span class=\"number\">-50</span>, <span class=\"number\">-50</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">childWindow.resizeBy(<span class=\"number\">50</span>, <span class=\"number\">50</span>)</span><br></pre></td></tr></table></figure></code></pre><h4 id=\"æ»šåŠ¨API\"><a href=\"#æ»šåŠ¨API\" class=\"headerlink\" title=\"æ»šåŠ¨API\"></a>æ»šåŠ¨API</h4><p>è§†å£æ»šåŠ¨ API(å¯è§†åŒºåŸŸï¼Œç”± window å¯¹è±¡æ“ä½œ)</p>\n<ul>\n<li>scrollX æ˜¯è§†å£çš„å±æ€§ï¼Œè¡¨ç¤º X æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ï¼Œæœ‰åˆ«å pageXOffsetï¼›</li>\n<li>scrollY æ˜¯è§†å£çš„å±æ€§ï¼Œè¡¨ç¤º Y æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ï¼Œæœ‰åˆ«å pageYOffsetï¼›</li>\n<li>scroll(x, y) ä½¿å¾—é¡µé¢æ»šåŠ¨åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæœ‰åˆ«å scrollToï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ï¼›</li>\n<li>scrollBy(x, y) ä½¿å¾—é¡µé¢æ»šåŠ¨ç‰¹å®šçš„è·ç¦»ï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ã€‚</li>\n</ul>\n<p>å…ƒç´ æ»šåŠ¨ API(å…ƒç´ æ»šåŠ¨ APIï¼Œåœ¨ Element ç±»ä¸Š)</p>\n<ul>\n<li>scrollTop å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤º Y æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ã€‚</li>\n<li>scrollLeft å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤º X æ–¹å‘ä¸Šçš„å½“å‰æ»šåŠ¨è·ç¦»ã€‚</li>\n<li>scrollWidth å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤ºå…ƒç´ å†…éƒ¨çš„æ»šåŠ¨å†…å®¹çš„å®½åº¦ï¼Œä¸€èˆ¬æ¥è¯´ä¼šå¤§äºç­‰äºå…ƒç´ å®½åº¦ã€‚</li>\n<li>scrollHeight å…ƒç´ çš„å±æ€§ï¼Œè¡¨ç¤ºå…ƒç´ å†…éƒ¨çš„æ»šåŠ¨å†…å®¹çš„é«˜åº¦ï¼Œä¸€èˆ¬æ¥è¯´ä¼šå¤§äºç­‰äºå…ƒç´ é«˜åº¦ã€‚</li>\n<li>scroll(x, y) ä½¿å¾—å…ƒç´ æ»šåŠ¨åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæœ‰åˆ«å scrollToï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ã€‚scrollBy(x, y) ä½¿å¾—å…ƒç´ æ»šåŠ¨åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæ”¯æŒä¼ å…¥é…ç½®å‹å‚æ•° {top, left}ã€‚</li>\n<li>scrollIntoView(arg) æ»šåŠ¨å…ƒç´ æ‰€åœ¨çš„çˆ¶å…ƒç´ ï¼Œä½¿å¾—å…ƒç´ æ»šåŠ¨åˆ°å¯è§åŒºåŸŸï¼Œå¯ä»¥é€šè¿‡ arg æ¥æŒ‡å®šæ»šåˆ°ä¸­é—´ã€å¼€å§‹æˆ–è€…å°±è¿‘ã€‚</li>\n</ul>\n<pre><code><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.scroll(<span class=\"number\">0</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.scroll(<span class=\"number\">0</span>, <span class=\"number\">50</span>) <span class=\"comment\">// æ»šåŠ¨è‡³ (0, 50)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.scrollBy(<span class=\"number\">0</span>, <span class=\"number\">50</span>) <span class=\"comment\">// æ»šåŠ¨ç»å¯¹å€¼</span></span><br></pre></td></tr></table></figure></code></pre><h4 id=\"å¸ƒå±€API\"><a href=\"#å¸ƒå±€API\" class=\"headerlink\" title=\"å¸ƒå±€API\"></a>å¸ƒå±€API</h4><p>å…¨å±€å°ºå¯¸ä¿¡æ¯</p>\n<ul>\n<li>window.innerHeight, window.innerWidth è¿™ä¸¤ä¸ªå±æ€§è¡¨ç¤ºè§†å£çš„å¤§å°ã€‚</li>\n<li>window.outerWidth, window.outerHeight è¿™ä¸¤ä¸ªå±æ€§è¡¨ç¤ºæµè§ˆå™¨çª—å£å æ®çš„å¤§å°ï¼Œå¾ˆå¤šæµè§ˆå™¨æ²¡æœ‰å®ç°ï¼Œä¸€èˆ¬æ¥è¯´è¿™ä¸¤ä¸ªå±æ€§æ— å…³ç´§è¦ã€‚</li>\n<li>window.devicePixelRatio è¿™ä¸ªå±æ€§éå¸¸é‡è¦ï¼Œè¡¨ç¤ºç‰©ç†åƒç´ å’Œ CSS åƒç´ å•ä½çš„å€ç‡å…³ç³»ï¼ŒRetina å±è¿™ä¸ªå€¼æ˜¯ 2ï¼Œåæ¥ä¹Ÿå‡ºç°äº†ä¸€äº› 3 å€çš„ Android å±ã€‚</li>\n<li>window.screen ï¼ˆå±å¹•å°ºå¯¸ç›¸å…³çš„ä¿¡æ¯ï¼‰<ul>\n<li>window.screen.width, window.screen.height è®¾å¤‡çš„å±å¹•å°ºå¯¸ã€‚</li>\n<li>window.screen.availWidth, window.screen.availHeight è®¾å¤‡å±å¹•çš„å¯æ¸²æŸ“åŒºåŸŸå°ºå¯¸ï¼Œä¸€äº› Android æœºå™¨ä¼šæŠŠå±å¹•çš„ä¸€éƒ¨åˆ†é¢„ç•™åšå›ºå®šæŒ‰é’®ï¼Œæ‰€ä»¥æœ‰è¿™ä¸¤ä¸ªå±æ€§ï¼Œå®é™…ä¸Šä¸€èˆ¬æµè§ˆå™¨ä¸ä¼šå®ç°çš„è¿™ä¹ˆç»†è‡´ã€‚</li>\n<li>window.screen.colorDepth, window.screen.pixelDepth è¿™ä¸¤ä¸ªå±æ€§æ˜¯å›ºå®šå€¼ 24ï¼Œåº”è¯¥æ˜¯ä¸ºäº†ä»¥åé¢„ç•™ã€‚</li>\n</ul>\n</li>\n</ul>\n<p>å…ƒç´ çš„å¸ƒå±€ä¿¡æ¯</p>\n<ul>\n<li>getClientRects(),ä¼šè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œé‡Œé¢åŒ…å«å…ƒç´ å¯¹åº”çš„æ¯ä¸€ä¸ªç›’æ‰€å æ®çš„å®¢æˆ·ç«¯çŸ©å½¢åŒºåŸŸï¼Œè¿™é‡Œæ¯ä¸€ä¸ªçŸ©å½¢åŒºåŸŸå¯ä»¥ç”¨ x, y, width, height æ¥è·å–å®ƒçš„ä½ç½®å’Œå°ºå¯¸;</li>\n<li>getBoundingClientRect(),å®ƒè¿”å›å…ƒç´ å¯¹åº”çš„æ‰€æœ‰ç›’çš„åŒ…è£¹çš„çŸ©å½¢åŒºåŸŸï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™ä¸ª API è·å–çš„åŒºåŸŸä¼šåŒ…æ‹¬å½“ overflow ä¸º visible æ—¶çš„å­å…ƒç´ åŒºåŸŸã€‚</li>\n</ul>\n<pre><code><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getClientRects() <span class=\"comment\">// ä¼ªå…ƒç´ ä¸ä¼šè¢«è®¡å…¥</span></span><br><span class=\"line\"></span><br><span class=\"line\">getBoundingClientRect()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.innerHeight</span><br><span class=\"line\"><span class=\"comment\">// ç­‰åŒäº document.documentElement.getBoundingClientRect().height</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.innerWidth</span><br><span class=\"line\"><span class=\"comment\">// ç­‰åŒäº document.documentElement.getBoundingClientRect().width</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.outerHeight</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.outerWidth</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.devicePixelRatio</span><br></pre></td></tr></table></figure></code></pre><h2 id=\"æ‰€æœ‰-API\"><a href=\"#æ‰€æœ‰-API\" class=\"headerlink\" title=\"æ‰€æœ‰ API\"></a>æ‰€æœ‰ API</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/html-apis.html\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week10/WebAPI.xmind\" target=\"_blank\" rel=\"noopener\">Web APIs</a></li>\n</ul>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><ul>\n<li><a href=\"https://github.com/yangdengcheng/Frontend-01-Template/blob/master/week10/NOTE.md\" target=\"_blank\" rel=\"noopener\">æ¨ç™»ç¨‹ CSSOM Note</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Javascript-Expressions","date":"2020-04-23T15:40:40.000Z","description":["Javascript -- Expression"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n# Javascript -- Expressions\n<!-- more -->\n\n# Atom\n\n\n# Expressions è¡¨è¾¾å¼\n## Grammar\n\n\n\n\n### å¼•å¯¼ï¼šGrammar Tree vs Priority\n- \\+ -\n- \\* /\n- ()\n\n\n\n## Left Handside & Right Handside\n## Left Handside\n- ![Left Handside](http://p0.meituan.net/myvideodistribute/4fa36955e4edcb6c2ae15f638759b365164257.png)\n- æé™æ˜¯ call\n\n### Member\n- a.b\n- a[b]\n- foo\\`string\\`\n\t\n\t```javascript\n\tvar name = \"Elle\"\n\tfunction foo() {\n\t  console.log(arguments)\n\t}\n\tfoo`Hello ${name}!`\n\t```\n- super.b\n\t- åªèƒ½åœ¨ constructor é‡Œä½¿ç”¨\n- super['b']\n\n\t```javascript\n\tclass Parent {\n\t\tconstructor() {\n\t\t\tthis.a = 1\n\t\t}\n\t}\n\tclass Child extends Parent {\n\t\tconstructor() {\n\t\t\tsuper()\n\t\t\tconsole.log(this.a)\n\t\t}\n\t}\n\tParent.a = 2;\n\tnew Child\n\t```\n\t\n\t- ![super æˆªå›¾](http://p1.meituan.net/myvideodistribute/6dbc29d1a132b5099186f0f9ec8e6bd458489.png)\n\t\n- new.target\n\t- å‡½æ•°å¤–é¢ä¸èƒ½ä½¿ç”¨ï¼Œåªèƒ½åœ¨å‡½æ•°é‡Œä½¿ç”¨\n\n\t\t```javascript\n\t\tfunction foo() {\n\t\t\tconsole.log(this)\n\t\t}\n\t\t// å­˜åœ¨ä¸€ä¸ªä¼ªé€ å¯¹è±¡çš„å¯èƒ½ï¼Œæ— æ³•çŸ¥é“å¯¹è±¡æ˜¯å¦æ˜¯è¢« new è°ƒèµ·\n\t\tvar fakeObj = {}\n\t\tObject.setPrototypeOf(fakeObj, foo.prototype)\n\t\tfakeObj.constructor = foo\n\t\tfoo.apply(fakeObj)\n\t\tfakeObj instanceof foo\n\t\t\n\t\t```\n\n\t\t```javascript\n\t\tfunction foo() {\n\t\t\tconsole.log(new.target)\n\t\t}\n\t\t\n\t\tfoo()\n\t\t\n\t\tnew foo()\n\t\t\n\t\t```\n- new Foo()\n\t- high priority\n\t\n\t```javascript\n\tfunction cls1(s) {\n\t    console.log(s)\n\t}\n\tfunction cls2(s) {\n\t    console.log(\"2\", s)\n\t    return cls1\n\t}\n\t\n\tnew new cls2(\"goog\")\n\t```\n\t- ![new Foo()](http://p0.meituan.net/myvideodistribute/b94c06479581e9f07cea46eed00d5c6053648.png)\n\n- Member Expressions è¿”å›çš„æ˜¯ä¸€ä¸ª Reference ç±»å‹\n\t- Reference\n\n\t\t```javascript\n\t\tvar o = { x: 1 }\n\t\to.x + 2\n\t\t1 + 2\n\t\tdelete o.x\n\t\tdelete 1\n\t\t```\n\n### New\n- new Foo \n- new Foo() ä¼˜å…ˆçº§é«˜\n\t\n- **Example**\n\t- new a()()\n\t- new new a()\n\n\t\t```javascript\n\t\tfunction cls1(s) {\n\t\t    console.log(s)\n\t\t}\n\t\tfunction cls2(s) {\n\t\t    console.log(\"2\", s)\n\t\t    return cls1\n\t\t}\n\t\tconsole.log('-=-=-=-new cls2-=-=-=-=')\n\t\tnew cls2\n\t\tconsole.log('-=-=-=-cls2(\"good\")-=-=-=-=')\n\t\tcls2(\"good\")\n\t\tconsole.log('-=-=-=-new cls2(\"good\")-=-=-=-=')\n\t\tnew cls2(\"good\") // è¿”å›å›æ¥ cls2 å®ä¾‹ï¼Œcls1å¯¹è±¡\n\t\tconsole.log('-=-=-=-new (cls2(\"good\"))-=-=-=-=')\n\t\tnew (cls2(\"good\"))\n\t\tconsole.log('-=-=-=-new (new cls2)-=-=-=-=')\n\t\tnew (new cls2)\n\t\tconsole.log('-=-=-=-new new cls2(\"good\")-=-=-=-=')\n\t\tnew new cls2(\"good\")\n\t\t```\n\t- ![new Foo  ä¼˜å…ˆçº§](http://p0.meituan.net/myvideodistribute/0ea9dc132069ffab80fc3260feef10d8228161.png)\n\n### Call\n- foo()\n- super()\n- foo()['b']\n- foo().b\n- foo()\\`abc\\`\n\n\n\n## Right Handside\n### Update\n- UpdateExpression\n\t- no LineTerminator here\n\t- ![no LineTerminator here](http://p0.meituan.net/myvideodistribute/c0869aae45e6bd6e9e6cc8261ed8888664190.png)\n\n\t\t```javascript\n\t\tvar a = 1, b = 1, c = 1;\n\t\ta\n\t\t++\n\t\tb\n\t\t++\n\t\tc\n\t\tconsole.log([a, b, c])\n\t\ta/*\n\t\t\n\t\t*/++\n\t\tb/*\n\t\t\n\t\t*/++\n\t\tc\n\t\tconsole.log([a, b, c])\n\t\t```\n- a ++\n- a --\n- -- a\n- ++ a\n\n### Unary å•ç›®è¿ç®—ç¬¦\n- delete a.b\n- void foo() \n\t- void ä¸æ˜¯è¿”å›å€¼ï¼Œæ˜¯è¿ç®—ç¬¦åœ¨ JS ä¸­\n\t- ä¸ç®¡åé¢æ˜¯ä»€ä¹ˆï¼Œéƒ½è¿”å› undefined\n\t- IIFE ç«‹å³æ‰§è¡Œå‡½æ•°\n\t\t\n\t\t```javascript\n\t\tfor (var i = 0; i < 10; i ++) {\n\t\t\tvar button  = document.createElement('button');\n\t\t\tdocuments.body.append(button);\n\t\t\tbutton.innerHTML = 1;\n\t\t\tbutton.onClick = function () {\n\t\t\t\tconsole.log(i)\n\t\t\t}\n\t\t}\n\t\t// ç‚¹é‚£ä¸ªæŒ‰é’®ï¼Œéƒ½æ˜¯10ï¼Œä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨IIFE\n\t\tfor (var i = 0; i < 10; i ++) {\n\t\t\tvar button  = document.createElement('button');\n\t\t\tdocuments.body.append(button);\n\t\t\tbutton.innerHTML = 1;\n\t\t\t(function(i) {\n\t\t\t\tbutton.onClick = function (i) {\n\t\t\t\t\tconsole.log(i)\n\t\t\t\t}\n\t\t\t})()\n\t\t}\n\t\t// å¦‚æœå‰é¢ä¸åŠ åˆ†å·ï¼Œåœ¨ä¸€äº›å†™æ³•ä¸­ï¼Œä¼šå‘ç”Ÿç²˜èµ·æ¥é”™è¯¯\n\t    (function(i) {\n\t      button.onClick = function (i) {\n\t        console.log(i)\n\t      }\n\t    })()\n\t    \n\t    (function(i) {\n\t      button.onClick = function (i) {\n\t        console.log(i)\n\t      }\n\t    })()\n\t\t// æœ€ç¨³å¦¥çš„å°±æ˜¯ï¼Œåœ¨å‰é¢åŠ ä¸Švoid\n\t\tfor (var i = 0; i < 10; i ++) {\n\t\t\tvar button  = document.createElement('button');\n\t\t\tdocuments.body.append(button);\n\t\t\tbutton.innerHTML = 1;\n\t\t\tvoid function(i) {\n\t\t\t\tbutton.onClick = function (i) {\n\t\t\t\t\tconsole.log(i)\n\t\t\t\t}\n\t\t\t}()\n\t\t}\n\t\t// å¹¶ä¸”è¯­ä¹‰æ­£ç¡®ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦IIFEçš„è¿”å›å€¼\n\t\t```\n- typeof a\n\t\n\t```javascript\n\ttypeof null\n\ttypeof function() {}\n\t```\n\t\n\t- ![typeof](http://p0.meituan.net/myvideodistribute/c45593f796e09721d1b10701e366669620756.png)\n- \\+ a\n- \\- a\n- ~ a æŒ‰ä½å–å\n- ! a å–é\n\t- !!1\n- await a\n\n### Exponental\n- \\*\\*\n\t- 3 ** 2 ** 3\n\t- 3 ** (2 ** 3)\n\t- ![Exponental](http://p1.meituan.net/myvideodistribute/18947a64bdd8ad6c249ea3e214f5b11d17541.png)\n\n\n### Multiplicative\n- \\* / %\n\t- JS ä¸­æœ‰1ç§ä¹˜æ³•è¿ç®—ç¬¦\n\t\t- è¿è¡Œæ—¶\n\t\t\t- number\n\t\t\t- string\n\n### Additive\n- \\+ -\n\t- JS ä¸­æœ‰2ç§åŠ æ³•è¿ç®—ç¬¦\n\t\t- è¿è¡Œæ—¶\n\t\t\t- number\n\t\t\t- string\n\n### Shift å·¦å³ç§»ä½\n- << >> >>>\n\n### Relationship æ¯”è¾ƒ\n- < > <= >= instanceof in\n\n### Equality\n- ==\n- !=\n- ===\n- !==\n\n### Bitwise\n- & ^ |\n\n### Logical\n- æ²¡æœ‰ä»»ä½• boolean è½¬æ¢\n- &&\n\t- æœ‰çŸ­è·¯é€»è¾‘\n\n\t\t```javascript\n\t\tfunction foo1() {\n\t\t\tconsole.log(1)\n\t\t\treturn false\n\t\t}\n\t\tfunction foo2() {\n\t\t\tconsole.log(2)\n\t\t}\n\t\tfoo1() && foo2()\n\t\t\n\t\tfoo1() || foo2()\n\t\t```\n\t\t\n\t- ![&& çŸ­è·¯é€»è¾‘è¿è¡Œæˆªå›¾](http://p1.meituan.net/myvideodistribute/76bacd40d3b17ddaca8fa40b7df168cc49722.png)\n- ||\n\n\n\n### Conditional\n- ? :\n\t- åŒæ ·æœ‰çŸ­è·¯é€»è¾‘\n\t\t\n\t\t```javascript\n\t\tfalse ? foo1() : foo2()\n\t\t```\n\t- ![ä¸‰ç›®è¿ç®—ç¬¦çŸ­è·¯é€»è¾‘](http://p0.meituan.net/myvideodistribute/bcb065e3ae7986b5c15333ea32404e5360600.png)\n\t\t\n### ,\n\n## Runtime\n### Type Convertion\n- ![Type Convertion](http://p1.meituan.net/myvideodistribute/92ac57b25bd03ca675ef9b0d694e4415353216.png)\n- undefined --> number NAN\n\n\n#### Boxing & Unboxing\n\n```javascript\n// Number String Boolean Symbol\nnew Number(1)\nnew String('hello')\nnew String('hello').length\n\"hello\".length\ntypeof \"hello\"\ntypeof new String('hello')\n!new String('')\n!\"\"\n// Number String Boolean ä¸ä½œä¸º new è°ƒç”¨ï¼Œå°±æ˜¯è½¬æ¢æˆæ™®é€šç±»å‹\nString(1)\nnew String(1)\n```\n\n- ![Boxing & Unboxing](http://p0.meituan.net/myvideodistribute/3f64818a6b39695d9dbc489cb8bc3f6281607.png)\n\n- toPremitive()\n- toString vs valueOf\n  - toString vs valueOf\n\n\t \t```javascript\n\t \t1 + {}\n\t \t1 + {valueOf(){return 2}}\n\t \t1 + {toString(){return 2}}\n\t \t1 + {toString(){return 4}}\n\t \t1 + {toString(){return \"4\"}}\n\t \t1 + {valueOf(){return 1}, toString(){return \"2\"}}\n\t \t\"1\" + {valueOf(){return 1}, toString(){return \"2\"}}\n\t \t```\n \t\n \t- ![toString vs valueOf](http://p1.meituan.net/myvideodistribute/78cc58a640f02d8de18f21eec0c80e2f71205.png)\n\n\n\n## Reference\n### Object\n### Key\n### æ”¯æŒå†™\n- delete\n- assign\n\n\n# Statement\n\n# Structure\n\n# Program/Module\n\n#### ps. checkSign\n\n```javascript\nfunction check(number) {\n\tif (1 / number === Infinity) {\n\t\treturn 1\n\t}\n\tif (1 / number === -Infinity) {\n\t\treturn -1\n\t}\n\treturn number / Math.abs(number)\n}\n```\n- ã€æœªå®Œã€‘Infinity åˆ¤æ–­\n\n- ã€æœªå®Œã€‘ç›´æ¥ç”¨æµå–å‡ºç¬¦å·ä½\n","source":"_posts/Javascript-Expressions.md","raw":"---\ntitle: Javascript-Expressions\ndate: 2020-04-23 23:40:40\ntags: \n- å‰ç«¯æ¦‚å¿µ\ncategories:\n- å‰ç«¯æ¦‚å¿µ\ndescription:\n- Javascript -- Expression\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n# Javascript -- Expressions\n<!-- more -->\n\n# Atom\n\n\n# Expressions è¡¨è¾¾å¼\n## Grammar\n\n\n\n\n### å¼•å¯¼ï¼šGrammar Tree vs Priority\n- \\+ -\n- \\* /\n- ()\n\n\n\n## Left Handside & Right Handside\n## Left Handside\n- ![Left Handside](http://p0.meituan.net/myvideodistribute/4fa36955e4edcb6c2ae15f638759b365164257.png)\n- æé™æ˜¯ call\n\n### Member\n- a.b\n- a[b]\n- foo\\`string\\`\n\t\n\t```javascript\n\tvar name = \"Elle\"\n\tfunction foo() {\n\t  console.log(arguments)\n\t}\n\tfoo`Hello ${name}!`\n\t```\n- super.b\n\t- åªèƒ½åœ¨ constructor é‡Œä½¿ç”¨\n- super['b']\n\n\t```javascript\n\tclass Parent {\n\t\tconstructor() {\n\t\t\tthis.a = 1\n\t\t}\n\t}\n\tclass Child extends Parent {\n\t\tconstructor() {\n\t\t\tsuper()\n\t\t\tconsole.log(this.a)\n\t\t}\n\t}\n\tParent.a = 2;\n\tnew Child\n\t```\n\t\n\t- ![super æˆªå›¾](http://p1.meituan.net/myvideodistribute/6dbc29d1a132b5099186f0f9ec8e6bd458489.png)\n\t\n- new.target\n\t- å‡½æ•°å¤–é¢ä¸èƒ½ä½¿ç”¨ï¼Œåªèƒ½åœ¨å‡½æ•°é‡Œä½¿ç”¨\n\n\t\t```javascript\n\t\tfunction foo() {\n\t\t\tconsole.log(this)\n\t\t}\n\t\t// å­˜åœ¨ä¸€ä¸ªä¼ªé€ å¯¹è±¡çš„å¯èƒ½ï¼Œæ— æ³•çŸ¥é“å¯¹è±¡æ˜¯å¦æ˜¯è¢« new è°ƒèµ·\n\t\tvar fakeObj = {}\n\t\tObject.setPrototypeOf(fakeObj, foo.prototype)\n\t\tfakeObj.constructor = foo\n\t\tfoo.apply(fakeObj)\n\t\tfakeObj instanceof foo\n\t\t\n\t\t```\n\n\t\t```javascript\n\t\tfunction foo() {\n\t\t\tconsole.log(new.target)\n\t\t}\n\t\t\n\t\tfoo()\n\t\t\n\t\tnew foo()\n\t\t\n\t\t```\n- new Foo()\n\t- high priority\n\t\n\t```javascript\n\tfunction cls1(s) {\n\t    console.log(s)\n\t}\n\tfunction cls2(s) {\n\t    console.log(\"2\", s)\n\t    return cls1\n\t}\n\t\n\tnew new cls2(\"goog\")\n\t```\n\t- ![new Foo()](http://p0.meituan.net/myvideodistribute/b94c06479581e9f07cea46eed00d5c6053648.png)\n\n- Member Expressions è¿”å›çš„æ˜¯ä¸€ä¸ª Reference ç±»å‹\n\t- Reference\n\n\t\t```javascript\n\t\tvar o = { x: 1 }\n\t\to.x + 2\n\t\t1 + 2\n\t\tdelete o.x\n\t\tdelete 1\n\t\t```\n\n### New\n- new Foo \n- new Foo() ä¼˜å…ˆçº§é«˜\n\t\n- **Example**\n\t- new a()()\n\t- new new a()\n\n\t\t```javascript\n\t\tfunction cls1(s) {\n\t\t    console.log(s)\n\t\t}\n\t\tfunction cls2(s) {\n\t\t    console.log(\"2\", s)\n\t\t    return cls1\n\t\t}\n\t\tconsole.log('-=-=-=-new cls2-=-=-=-=')\n\t\tnew cls2\n\t\tconsole.log('-=-=-=-cls2(\"good\")-=-=-=-=')\n\t\tcls2(\"good\")\n\t\tconsole.log('-=-=-=-new cls2(\"good\")-=-=-=-=')\n\t\tnew cls2(\"good\") // è¿”å›å›æ¥ cls2 å®ä¾‹ï¼Œcls1å¯¹è±¡\n\t\tconsole.log('-=-=-=-new (cls2(\"good\"))-=-=-=-=')\n\t\tnew (cls2(\"good\"))\n\t\tconsole.log('-=-=-=-new (new cls2)-=-=-=-=')\n\t\tnew (new cls2)\n\t\tconsole.log('-=-=-=-new new cls2(\"good\")-=-=-=-=')\n\t\tnew new cls2(\"good\")\n\t\t```\n\t- ![new Foo  ä¼˜å…ˆçº§](http://p0.meituan.net/myvideodistribute/0ea9dc132069ffab80fc3260feef10d8228161.png)\n\n### Call\n- foo()\n- super()\n- foo()['b']\n- foo().b\n- foo()\\`abc\\`\n\n\n\n## Right Handside\n### Update\n- UpdateExpression\n\t- no LineTerminator here\n\t- ![no LineTerminator here](http://p0.meituan.net/myvideodistribute/c0869aae45e6bd6e9e6cc8261ed8888664190.png)\n\n\t\t```javascript\n\t\tvar a = 1, b = 1, c = 1;\n\t\ta\n\t\t++\n\t\tb\n\t\t++\n\t\tc\n\t\tconsole.log([a, b, c])\n\t\ta/*\n\t\t\n\t\t*/++\n\t\tb/*\n\t\t\n\t\t*/++\n\t\tc\n\t\tconsole.log([a, b, c])\n\t\t```\n- a ++\n- a --\n- -- a\n- ++ a\n\n### Unary å•ç›®è¿ç®—ç¬¦\n- delete a.b\n- void foo() \n\t- void ä¸æ˜¯è¿”å›å€¼ï¼Œæ˜¯è¿ç®—ç¬¦åœ¨ JS ä¸­\n\t- ä¸ç®¡åé¢æ˜¯ä»€ä¹ˆï¼Œéƒ½è¿”å› undefined\n\t- IIFE ç«‹å³æ‰§è¡Œå‡½æ•°\n\t\t\n\t\t```javascript\n\t\tfor (var i = 0; i < 10; i ++) {\n\t\t\tvar button  = document.createElement('button');\n\t\t\tdocuments.body.append(button);\n\t\t\tbutton.innerHTML = 1;\n\t\t\tbutton.onClick = function () {\n\t\t\t\tconsole.log(i)\n\t\t\t}\n\t\t}\n\t\t// ç‚¹é‚£ä¸ªæŒ‰é’®ï¼Œéƒ½æ˜¯10ï¼Œä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨IIFE\n\t\tfor (var i = 0; i < 10; i ++) {\n\t\t\tvar button  = document.createElement('button');\n\t\t\tdocuments.body.append(button);\n\t\t\tbutton.innerHTML = 1;\n\t\t\t(function(i) {\n\t\t\t\tbutton.onClick = function (i) {\n\t\t\t\t\tconsole.log(i)\n\t\t\t\t}\n\t\t\t})()\n\t\t}\n\t\t// å¦‚æœå‰é¢ä¸åŠ åˆ†å·ï¼Œåœ¨ä¸€äº›å†™æ³•ä¸­ï¼Œä¼šå‘ç”Ÿç²˜èµ·æ¥é”™è¯¯\n\t    (function(i) {\n\t      button.onClick = function (i) {\n\t        console.log(i)\n\t      }\n\t    })()\n\t    \n\t    (function(i) {\n\t      button.onClick = function (i) {\n\t        console.log(i)\n\t      }\n\t    })()\n\t\t// æœ€ç¨³å¦¥çš„å°±æ˜¯ï¼Œåœ¨å‰é¢åŠ ä¸Švoid\n\t\tfor (var i = 0; i < 10; i ++) {\n\t\t\tvar button  = document.createElement('button');\n\t\t\tdocuments.body.append(button);\n\t\t\tbutton.innerHTML = 1;\n\t\t\tvoid function(i) {\n\t\t\t\tbutton.onClick = function (i) {\n\t\t\t\t\tconsole.log(i)\n\t\t\t\t}\n\t\t\t}()\n\t\t}\n\t\t// å¹¶ä¸”è¯­ä¹‰æ­£ç¡®ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦IIFEçš„è¿”å›å€¼\n\t\t```\n- typeof a\n\t\n\t```javascript\n\ttypeof null\n\ttypeof function() {}\n\t```\n\t\n\t- ![typeof](http://p0.meituan.net/myvideodistribute/c45593f796e09721d1b10701e366669620756.png)\n- \\+ a\n- \\- a\n- ~ a æŒ‰ä½å–å\n- ! a å–é\n\t- !!1\n- await a\n\n### Exponental\n- \\*\\*\n\t- 3 ** 2 ** 3\n\t- 3 ** (2 ** 3)\n\t- ![Exponental](http://p1.meituan.net/myvideodistribute/18947a64bdd8ad6c249ea3e214f5b11d17541.png)\n\n\n### Multiplicative\n- \\* / %\n\t- JS ä¸­æœ‰1ç§ä¹˜æ³•è¿ç®—ç¬¦\n\t\t- è¿è¡Œæ—¶\n\t\t\t- number\n\t\t\t- string\n\n### Additive\n- \\+ -\n\t- JS ä¸­æœ‰2ç§åŠ æ³•è¿ç®—ç¬¦\n\t\t- è¿è¡Œæ—¶\n\t\t\t- number\n\t\t\t- string\n\n### Shift å·¦å³ç§»ä½\n- << >> >>>\n\n### Relationship æ¯”è¾ƒ\n- < > <= >= instanceof in\n\n### Equality\n- ==\n- !=\n- ===\n- !==\n\n### Bitwise\n- & ^ |\n\n### Logical\n- æ²¡æœ‰ä»»ä½• boolean è½¬æ¢\n- &&\n\t- æœ‰çŸ­è·¯é€»è¾‘\n\n\t\t```javascript\n\t\tfunction foo1() {\n\t\t\tconsole.log(1)\n\t\t\treturn false\n\t\t}\n\t\tfunction foo2() {\n\t\t\tconsole.log(2)\n\t\t}\n\t\tfoo1() && foo2()\n\t\t\n\t\tfoo1() || foo2()\n\t\t```\n\t\t\n\t- ![&& çŸ­è·¯é€»è¾‘è¿è¡Œæˆªå›¾](http://p1.meituan.net/myvideodistribute/76bacd40d3b17ddaca8fa40b7df168cc49722.png)\n- ||\n\n\n\n### Conditional\n- ? :\n\t- åŒæ ·æœ‰çŸ­è·¯é€»è¾‘\n\t\t\n\t\t```javascript\n\t\tfalse ? foo1() : foo2()\n\t\t```\n\t- ![ä¸‰ç›®è¿ç®—ç¬¦çŸ­è·¯é€»è¾‘](http://p0.meituan.net/myvideodistribute/bcb065e3ae7986b5c15333ea32404e5360600.png)\n\t\t\n### ,\n\n## Runtime\n### Type Convertion\n- ![Type Convertion](http://p1.meituan.net/myvideodistribute/92ac57b25bd03ca675ef9b0d694e4415353216.png)\n- undefined --> number NAN\n\n\n#### Boxing & Unboxing\n\n```javascript\n// Number String Boolean Symbol\nnew Number(1)\nnew String('hello')\nnew String('hello').length\n\"hello\".length\ntypeof \"hello\"\ntypeof new String('hello')\n!new String('')\n!\"\"\n// Number String Boolean ä¸ä½œä¸º new è°ƒç”¨ï¼Œå°±æ˜¯è½¬æ¢æˆæ™®é€šç±»å‹\nString(1)\nnew String(1)\n```\n\n- ![Boxing & Unboxing](http://p0.meituan.net/myvideodistribute/3f64818a6b39695d9dbc489cb8bc3f6281607.png)\n\n- toPremitive()\n- toString vs valueOf\n  - toString vs valueOf\n\n\t \t```javascript\n\t \t1 + {}\n\t \t1 + {valueOf(){return 2}}\n\t \t1 + {toString(){return 2}}\n\t \t1 + {toString(){return 4}}\n\t \t1 + {toString(){return \"4\"}}\n\t \t1 + {valueOf(){return 1}, toString(){return \"2\"}}\n\t \t\"1\" + {valueOf(){return 1}, toString(){return \"2\"}}\n\t \t```\n \t\n \t- ![toString vs valueOf](http://p1.meituan.net/myvideodistribute/78cc58a640f02d8de18f21eec0c80e2f71205.png)\n\n\n\n## Reference\n### Object\n### Key\n### æ”¯æŒå†™\n- delete\n- assign\n\n\n# Statement\n\n# Structure\n\n# Program/Module\n\n#### ps. checkSign\n\n```javascript\nfunction check(number) {\n\tif (1 / number === Infinity) {\n\t\treturn 1\n\t}\n\tif (1 / number === -Infinity) {\n\t\treturn -1\n\t}\n\treturn number / Math.abs(number)\n}\n```\n- ã€æœªå®Œã€‘Infinity åˆ¤æ–­\n\n- ã€æœªå®Œã€‘ç›´æ¥ç”¨æµå–å‡ºç¬¦å·ä½\n","slug":"Javascript-Expressions","published":1,"updated":"2020-10-27T15:21:11.261Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7q000wfw9k8u16116d","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h1 id=\"Javascript-â€“-Expressions\"><a href=\"#Javascript-â€“-Expressions\" class=\"headerlink\" title=\"Javascript â€“ Expressions\"></a>Javascript â€“ Expressions</h1><a id=\"more\"></a>\n\n<h1 id=\"Atom\"><a href=\"#Atom\" class=\"headerlink\" title=\"Atom\"></a>Atom</h1><h1 id=\"Expressions-è¡¨è¾¾å¼\"><a href=\"#Expressions-è¡¨è¾¾å¼\" class=\"headerlink\" title=\"Expressions è¡¨è¾¾å¼\"></a>Expressions è¡¨è¾¾å¼</h1><h2 id=\"Grammar\"><a href=\"#Grammar\" class=\"headerlink\" title=\"Grammar\"></a>Grammar</h2><h3 id=\"å¼•å¯¼ï¼šGrammar-Tree-vs-Priority\"><a href=\"#å¼•å¯¼ï¼šGrammar-Tree-vs-Priority\" class=\"headerlink\" title=\"å¼•å¯¼ï¼šGrammar Tree vs Priority\"></a>å¼•å¯¼ï¼šGrammar Tree vs Priority</h3><ul>\n<li>+ -</li>\n<li>* /</li>\n<li>()</li>\n</ul>\n<h2 id=\"Left-Handside-amp-Right-Handside\"><a href=\"#Left-Handside-amp-Right-Handside\" class=\"headerlink\" title=\"Left Handside &amp; Right Handside\"></a>Left Handside &amp; Right Handside</h2><h2 id=\"Left-Handside\"><a href=\"#Left-Handside\" class=\"headerlink\" title=\"Left Handside\"></a>Left Handside</h2><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/4fa36955e4edcb6c2ae15f638759b365164257.png\" alt=\"Left Handside\"></li>\n<li>æé™æ˜¯ call</li>\n</ul>\n<h3 id=\"Member\"><a href=\"#Member\" class=\"headerlink\" title=\"Member\"></a>Member</h3><ul>\n<li><p>a.b</p>\n</li>\n<li><p>a[b]</p>\n</li>\n<li><p>foo`string`</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">\"Elle\"</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo<span class=\"string\">`Hello <span class=\"subst\">$&#123;name&#125;</span>!`</span></span><br></pre></td></tr></table></figure></li>\n<li><p>super.b</p>\n<ul>\n<li>åªèƒ½åœ¨ constructor é‡Œä½¿ç”¨</li>\n</ul>\n</li>\n<li><p>super[â€˜bâ€™]</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Parent</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.a = <span class=\"number\">1</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Child</span> <span class=\"keyword\">extends</span> <span class=\"title\">Parent</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">super</span>()</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.a)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Parent.a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">new</span> Child</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/6dbc29d1a132b5099186f0f9ec8e6bd458489.png\" alt=\"super æˆªå›¾\"></li>\n</ul>\n</li>\n<li><p>new.target</p>\n<ul>\n<li><p>å‡½æ•°å¤–é¢ä¸èƒ½ä½¿ç”¨ï¼Œåªèƒ½åœ¨å‡½æ•°é‡Œä½¿ç”¨</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å­˜åœ¨ä¸€ä¸ªä¼ªé€ å¯¹è±¡çš„å¯èƒ½ï¼Œæ— æ³•çŸ¥é“å¯¹è±¡æ˜¯å¦æ˜¯è¢« new è°ƒèµ·</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fakeObj = &#123;&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.setPrototypeOf(fakeObj, foo.prototype)</span><br><span class=\"line\">fakeObj.constructor = foo</span><br><span class=\"line\">foo.apply(fakeObj)</span><br><span class=\"line\">fakeObj <span class=\"keyword\">instanceof</span> foo</span><br></pre></td></tr></table></figure>\n\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">new</span>.target)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> foo()</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>new Foo()</p>\n<ul>\n<li><p>high priority</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cls1</span>(<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(s)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cls2</span>(<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"2\"</span>, s)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cls1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"keyword\">new</span> cls2(<span class=\"string\">\"goog\"</span>)</span><br></pre></td></tr></table></figure></li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/b94c06479581e9f07cea46eed00d5c6053648.png\" alt=\"new Foo()\"></p>\n</li>\n</ul>\n</li>\n<li><p>Member Expressions è¿”å›çš„æ˜¯ä¸€ä¸ª Reference ç±»å‹</p>\n<ul>\n<li><p>Reference</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> o = &#123; <span class=\"attr\">x</span>: <span class=\"number\">1</span> &#125;</span><br><span class=\"line\">o.x + <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">1</span> + <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> o.x</span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"New\"><a href=\"#New\" class=\"headerlink\" title=\"New\"></a>New</h3><ul>\n<li><p>new Foo </p>\n</li>\n<li><p>new Foo() ä¼˜å…ˆçº§é«˜</p>\n</li>\n<li><p><strong>Example</strong></p>\n<ul>\n<li><p>new a()()</p>\n</li>\n<li><p>new new a()</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cls1</span>(<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(s)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cls2</span>(<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"2\"</span>, s)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cls1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'-=-=-=-new cls2-=-=-=-='</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> cls2</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'-=-=-=-cls2(\"good\")-=-=-=-='</span>)</span><br><span class=\"line\">cls2(<span class=\"string\">\"good\"</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'-=-=-=-new cls2(\"good\")-=-=-=-='</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> cls2(<span class=\"string\">\"good\"</span>) <span class=\"comment\">// è¿”å›å›æ¥ cls2 å®ä¾‹ï¼Œcls1å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'-=-=-=-new (cls2(\"good\"))-=-=-=-='</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> (cls2(<span class=\"string\">\"good\"</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'-=-=-=-new (new cls2)-=-=-=-='</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> (<span class=\"keyword\">new</span> cls2)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'-=-=-=-new new cls2(\"good\")-=-=-=-='</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"keyword\">new</span> cls2(<span class=\"string\">\"good\"</span>)</span><br></pre></td></tr></table></figure></li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/0ea9dc132069ffab80fc3260feef10d8228161.png\" alt=\"new Foo  ä¼˜å…ˆçº§\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Call\"><a href=\"#Call\" class=\"headerlink\" title=\"Call\"></a>Call</h3><ul>\n<li>foo()</li>\n<li>super()</li>\n<li>foo()[â€˜bâ€™]</li>\n<li>foo().b</li>\n<li>foo()`abc`</li>\n</ul>\n<h2 id=\"Right-Handside\"><a href=\"#Right-Handside\" class=\"headerlink\" title=\"Right Handside\"></a>Right Handside</h2><h3 id=\"Update\"><a href=\"#Update\" class=\"headerlink\" title=\"Update\"></a>Update</h3><ul>\n<li><p>UpdateExpression</p>\n<ul>\n<li><p>no LineTerminator here</p>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/c0869aae45e6bd6e9e6cc8261ed8888664190.png\" alt=\"no LineTerminator here\"></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>, b = <span class=\"number\">1</span>, c = <span class=\"number\">1</span>;</span><br><span class=\"line\">a</span><br><span class=\"line\">++</span><br><span class=\"line\">b</span><br><span class=\"line\">++</span><br><span class=\"line\">c</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([a, b, c])</span><br><span class=\"line\">a<span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">*/</span>++</span><br><span class=\"line\">b<span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">*/</span>++</span><br><span class=\"line\">c</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([a, b, c])</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>a ++</p>\n</li>\n<li><p>a â€“</p>\n</li>\n<li><p>â€“ a</p>\n</li>\n<li><p>++ a</p>\n</li>\n</ul>\n<h3 id=\"Unary-å•ç›®è¿ç®—ç¬¦\"><a href=\"#Unary-å•ç›®è¿ç®—ç¬¦\" class=\"headerlink\" title=\"Unary å•ç›®è¿ç®—ç¬¦\"></a>Unary å•ç›®è¿ç®—ç¬¦</h3><ul>\n<li><p>delete a.b</p>\n</li>\n<li><p>void foo() </p>\n<ul>\n<li><p>void ä¸æ˜¯è¿”å›å€¼ï¼Œæ˜¯è¿ç®—ç¬¦åœ¨ JS ä¸­</p>\n</li>\n<li><p>ä¸ç®¡åé¢æ˜¯ä»€ä¹ˆï¼Œéƒ½è¿”å› undefined</p>\n</li>\n<li><p>IIFE ç«‹å³æ‰§è¡Œå‡½æ•°</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i ++) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> button  = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'button'</span>);</span><br><span class=\"line\">\tdocuments.body.append(button);</span><br><span class=\"line\">\tbutton.innerHTML = <span class=\"number\">1</span>;</span><br><span class=\"line\">\tbutton.onClick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ç‚¹é‚£ä¸ªæŒ‰é’®ï¼Œéƒ½æ˜¯10ï¼Œä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨IIFE</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i ++) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> button  = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'button'</span>);</span><br><span class=\"line\">\tdocuments.body.append(button);</span><br><span class=\"line\">\tbutton.innerHTML = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">\t\tbutton.onClick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;)()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å¦‚æœå‰é¢ä¸åŠ åˆ†å·ï¼Œåœ¨ä¸€äº›å†™æ³•ä¸­ï¼Œä¼šå‘ç”Ÿç²˜èµ·æ¥é”™è¯¯</span></span><br><span class=\"line\">   (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">     button.onClick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;)()</span><br><span class=\"line\">   </span><br><span class=\"line\">   (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">     button.onClick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;)()</span><br><span class=\"line\"><span class=\"comment\">// æœ€ç¨³å¦¥çš„å°±æ˜¯ï¼Œåœ¨å‰é¢åŠ ä¸Švoid</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i ++) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> button  = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'button'</span>);</span><br><span class=\"line\">\tdocuments.body.append(button);</span><br><span class=\"line\">\tbutton.innerHTML = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">void</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">\t\tbutton.onClick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å¹¶ä¸”è¯­ä¹‰æ­£ç¡®ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦IIFEçš„è¿”å›å€¼</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>typeof a</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c45593f796e09721d1b10701e366669620756.png\" alt=\"typeof\"></li>\n</ul>\n</li>\n<li><p>+ a</p>\n</li>\n<li><p>- a</p>\n</li>\n<li><p>~ a æŒ‰ä½å–å</p>\n</li>\n<li><p>! a å–é</p>\n<ul>\n<li>!!1</li>\n</ul>\n</li>\n<li><p>await a</p>\n</li>\n</ul>\n<h3 id=\"Exponental\"><a href=\"#Exponental\" class=\"headerlink\" title=\"Exponental\"></a>Exponental</h3><ul>\n<li>**<ul>\n<li>3 ** 2 ** 3</li>\n<li>3 ** (2 ** 3)</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/18947a64bdd8ad6c249ea3e214f5b11d17541.png\" alt=\"Exponental\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Multiplicative\"><a href=\"#Multiplicative\" class=\"headerlink\" title=\"Multiplicative\"></a>Multiplicative</h3><ul>\n<li>* / %<ul>\n<li>JS ä¸­æœ‰1ç§ä¹˜æ³•è¿ç®—ç¬¦<ul>\n<li>è¿è¡Œæ—¶<ul>\n<li>number</li>\n<li>string</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Additive\"><a href=\"#Additive\" class=\"headerlink\" title=\"Additive\"></a>Additive</h3><ul>\n<li>+ -<ul>\n<li>JS ä¸­æœ‰2ç§åŠ æ³•è¿ç®—ç¬¦<ul>\n<li>è¿è¡Œæ—¶<ul>\n<li>number</li>\n<li>string</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Shift-å·¦å³ç§»ä½\"><a href=\"#Shift-å·¦å³ç§»ä½\" class=\"headerlink\" title=\"Shift å·¦å³ç§»ä½\"></a>Shift å·¦å³ç§»ä½</h3><ul>\n<li>&lt;&lt; &gt;&gt; &gt;&gt;&gt;</li>\n</ul>\n<h3 id=\"Relationship-æ¯”è¾ƒ\"><a href=\"#Relationship-æ¯”è¾ƒ\" class=\"headerlink\" title=\"Relationship æ¯”è¾ƒ\"></a>Relationship æ¯”è¾ƒ</h3><ul>\n<li>&lt; &gt; &lt;= &gt;= instanceof in</li>\n</ul>\n<h3 id=\"Equality\"><a href=\"#Equality\" class=\"headerlink\" title=\"Equality\"></a>Equality</h3><ul>\n<li>==</li>\n<li>!=</li>\n<li>===</li>\n<li>!==</li>\n</ul>\n<h3 id=\"Bitwise\"><a href=\"#Bitwise\" class=\"headerlink\" title=\"Bitwise\"></a>Bitwise</h3><ul>\n<li>&amp; ^ |</li>\n</ul>\n<h3 id=\"Logical\"><a href=\"#Logical\" class=\"headerlink\" title=\"Logical\"></a>Logical</h3><ul>\n<li><p>æ²¡æœ‰ä»»ä½• boolean è½¬æ¢</p>\n</li>\n<li><p>&amp;&amp;</p>\n<ul>\n<li><p>æœ‰çŸ­è·¯é€»è¾‘</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo1() &amp;&amp; foo2()</span><br><span class=\"line\"></span><br><span class=\"line\">foo1() || foo2()</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/76bacd40d3b17ddaca8fa40b7df168cc49722.png\" alt=\"&amp;&amp; çŸ­è·¯é€»è¾‘è¿è¡Œæˆªå›¾\"></p>\n</li>\n</ul>\n</li>\n<li><p>||</p>\n</li>\n</ul>\n<h3 id=\"Conditional\"><a href=\"#Conditional\" class=\"headerlink\" title=\"Conditional\"></a>Conditional</h3><ul>\n<li><p>? :</p>\n<ul>\n<li><p>åŒæ ·æœ‰çŸ­è·¯é€»è¾‘</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"literal\">false</span> ? foo1() : foo2()</span><br></pre></td></tr></table></figure></li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/bcb065e3ae7986b5c15333ea32404e5360600.png\" alt=\"ä¸‰ç›®è¿ç®—ç¬¦çŸ­è·¯é€»è¾‘\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\",\"></a>,</h3><h2 id=\"Runtime\"><a href=\"#Runtime\" class=\"headerlink\" title=\"Runtime\"></a>Runtime</h2><h3 id=\"Type-Convertion\"><a href=\"#Type-Convertion\" class=\"headerlink\" title=\"Type Convertion\"></a>Type Convertion</h3><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/92ac57b25bd03ca675ef9b0d694e4415353216.png\" alt=\"Type Convertion\"></li>\n<li>undefined â€“&gt; number NAN</li>\n</ul>\n<h4 id=\"Boxing-amp-Unboxing\"><a href=\"#Boxing-amp-Unboxing\" class=\"headerlink\" title=\"Boxing &amp; Unboxing\"></a>Boxing &amp; Unboxing</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Number String Boolean Symbol</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">'hello'</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">'hello'</span>).length</span><br><span class=\"line\"><span class=\"string\">\"hello\"</span>.length</span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"string\">\"hello\"</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">'hello'</span>)</span><br><span class=\"line\">!<span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">''</span>)</span><br><span class=\"line\">!<span class=\"string\">\"\"</span></span><br><span class=\"line\"><span class=\"comment\">// Number String Boolean ä¸ä½œä¸º new è°ƒç”¨ï¼Œå°±æ˜¯è½¬æ¢æˆæ™®é€šç±»å‹</span></span><br><span class=\"line\"><span class=\"built_in\">String</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/3f64818a6b39695d9dbc489cb8bc3f6281607.png\" alt=\"Boxing &amp; Unboxing\"></p>\n</li>\n<li><p>toPremitive()</p>\n</li>\n<li><p>toString vs valueOf</p>\n<ul>\n<li><p>toString vs valueOf</p>\n<pre><code><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span> + &#123;&#125;</span><br><span class=\"line\"><span class=\"number\">1</span> + &#123;valueOf()&#123;<span class=\"keyword\">return</span> <span class=\"number\">2</span>&#125;&#125;</span><br><span class=\"line\"><span class=\"number\">1</span> + &#123;toString()&#123;<span class=\"keyword\">return</span> <span class=\"number\">2</span>&#125;&#125;</span><br><span class=\"line\"><span class=\"number\">1</span> + &#123;toString()&#123;<span class=\"keyword\">return</span> <span class=\"number\">4</span>&#125;&#125;</span><br><span class=\"line\"><span class=\"number\">1</span> + &#123;toString()&#123;<span class=\"keyword\">return</span> <span class=\"string\">\"4\"</span>&#125;&#125;</span><br><span class=\"line\"><span class=\"number\">1</span> + &#123;valueOf()&#123;<span class=\"keyword\">return</span> <span class=\"number\">1</span>&#125;, toString()&#123;<span class=\"keyword\">return</span> <span class=\"string\">\"2\"</span>&#125;&#125;</span><br><span class=\"line\"><span class=\"string\">\"1\"</span> + &#123;valueOf()&#123;<span class=\"keyword\">return</span> <span class=\"number\">1</span>&#125;, toString()&#123;<span class=\"keyword\">return</span> <span class=\"string\">\"2\"</span>&#125;&#125;</span><br></pre></td></tr></table></figure></code></pre><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/78cc58a640f02d8de18f21eec0c80e2f71205.png\" alt=\"toString vs valueOf\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><h3 id=\"Object\"><a href=\"#Object\" class=\"headerlink\" title=\"Object\"></a>Object</h3><h3 id=\"Key\"><a href=\"#Key\" class=\"headerlink\" title=\"Key\"></a>Key</h3><h3 id=\"æ”¯æŒå†™\"><a href=\"#æ”¯æŒå†™\" class=\"headerlink\" title=\"æ”¯æŒå†™\"></a>æ”¯æŒå†™</h3><ul>\n<li>delete</li>\n<li>assign</li>\n</ul>\n<h1 id=\"Statement\"><a href=\"#Statement\" class=\"headerlink\" title=\"Statement\"></a>Statement</h1><h1 id=\"Structure\"><a href=\"#Structure\" class=\"headerlink\" title=\"Structure\"></a>Structure</h1><h1 id=\"Program-Module\"><a href=\"#Program-Module\" class=\"headerlink\" title=\"Program/Module\"></a>Program/Module</h1><h4 id=\"ps-checkSign\"><a href=\"#ps-checkSign\" class=\"headerlink\" title=\"ps. checkSign\"></a>ps. checkSign</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">check</span>(<span class=\"params\">number</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"number\">1</span> / number === <span class=\"literal\">Infinity</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"number\">1</span> / number === -<span class=\"literal\">Infinity</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">-1</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> number / <span class=\"built_in\">Math</span>.abs(number)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>ã€æœªå®Œã€‘Infinity åˆ¤æ–­</p>\n</li>\n<li><p>ã€æœªå®Œã€‘ç›´æ¥ç”¨æµå–å‡ºç¬¦å·ä½</p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h1 id=\"Javascript-â€“-Expressions\"><a href=\"#Javascript-â€“-Expressions\" class=\"headerlink\" title=\"Javascript â€“ Expressions\"></a>Javascript â€“ Expressions</h1>","more":"<h1 id=\"Atom\"><a href=\"#Atom\" class=\"headerlink\" title=\"Atom\"></a>Atom</h1><h1 id=\"Expressions-è¡¨è¾¾å¼\"><a href=\"#Expressions-è¡¨è¾¾å¼\" class=\"headerlink\" title=\"Expressions è¡¨è¾¾å¼\"></a>Expressions è¡¨è¾¾å¼</h1><h2 id=\"Grammar\"><a href=\"#Grammar\" class=\"headerlink\" title=\"Grammar\"></a>Grammar</h2><h3 id=\"å¼•å¯¼ï¼šGrammar-Tree-vs-Priority\"><a href=\"#å¼•å¯¼ï¼šGrammar-Tree-vs-Priority\" class=\"headerlink\" title=\"å¼•å¯¼ï¼šGrammar Tree vs Priority\"></a>å¼•å¯¼ï¼šGrammar Tree vs Priority</h3><ul>\n<li>+ -</li>\n<li>* /</li>\n<li>()</li>\n</ul>\n<h2 id=\"Left-Handside-amp-Right-Handside\"><a href=\"#Left-Handside-amp-Right-Handside\" class=\"headerlink\" title=\"Left Handside &amp; Right Handside\"></a>Left Handside &amp; Right Handside</h2><h2 id=\"Left-Handside\"><a href=\"#Left-Handside\" class=\"headerlink\" title=\"Left Handside\"></a>Left Handside</h2><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/4fa36955e4edcb6c2ae15f638759b365164257.png\" alt=\"Left Handside\"></li>\n<li>æé™æ˜¯ call</li>\n</ul>\n<h3 id=\"Member\"><a href=\"#Member\" class=\"headerlink\" title=\"Member\"></a>Member</h3><ul>\n<li><p>a.b</p>\n</li>\n<li><p>a[b]</p>\n</li>\n<li><p>foo`string`</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">\"Elle\"</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo<span class=\"string\">`Hello <span class=\"subst\">$&#123;name&#125;</span>!`</span></span><br></pre></td></tr></table></figure></li>\n<li><p>super.b</p>\n<ul>\n<li>åªèƒ½åœ¨ constructor é‡Œä½¿ç”¨</li>\n</ul>\n</li>\n<li><p>super[â€˜bâ€™]</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Parent</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.a = <span class=\"number\">1</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Child</span> <span class=\"keyword\">extends</span> <span class=\"title\">Parent</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">super</span>()</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.a)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Parent.a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">new</span> Child</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/6dbc29d1a132b5099186f0f9ec8e6bd458489.png\" alt=\"super æˆªå›¾\"></li>\n</ul>\n</li>\n<li><p>new.target</p>\n<ul>\n<li><p>å‡½æ•°å¤–é¢ä¸èƒ½ä½¿ç”¨ï¼Œåªèƒ½åœ¨å‡½æ•°é‡Œä½¿ç”¨</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å­˜åœ¨ä¸€ä¸ªä¼ªé€ å¯¹è±¡çš„å¯èƒ½ï¼Œæ— æ³•çŸ¥é“å¯¹è±¡æ˜¯å¦æ˜¯è¢« new è°ƒèµ·</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fakeObj = &#123;&#125;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.setPrototypeOf(fakeObj, foo.prototype)</span><br><span class=\"line\">fakeObj.constructor = foo</span><br><span class=\"line\">foo.apply(fakeObj)</span><br><span class=\"line\">fakeObj <span class=\"keyword\">instanceof</span> foo</span><br></pre></td></tr></table></figure>\n\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">new</span>.target)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> foo()</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>new Foo()</p>\n<ul>\n<li><p>high priority</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cls1</span>(<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(s)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cls2</span>(<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"2\"</span>, s)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cls1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"keyword\">new</span> cls2(<span class=\"string\">\"goog\"</span>)</span><br></pre></td></tr></table></figure></li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/b94c06479581e9f07cea46eed00d5c6053648.png\" alt=\"new Foo()\"></p>\n</li>\n</ul>\n</li>\n<li><p>Member Expressions è¿”å›çš„æ˜¯ä¸€ä¸ª Reference ç±»å‹</p>\n<ul>\n<li><p>Reference</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> o = &#123; <span class=\"attr\">x</span>: <span class=\"number\">1</span> &#125;</span><br><span class=\"line\">o.x + <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">1</span> + <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> o.x</span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"New\"><a href=\"#New\" class=\"headerlink\" title=\"New\"></a>New</h3><ul>\n<li><p>new Foo </p>\n</li>\n<li><p>new Foo() ä¼˜å…ˆçº§é«˜</p>\n</li>\n<li><p><strong>Example</strong></p>\n<ul>\n<li><p>new a()()</p>\n</li>\n<li><p>new new a()</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cls1</span>(<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(s)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cls2</span>(<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"2\"</span>, s)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cls1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'-=-=-=-new cls2-=-=-=-='</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> cls2</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'-=-=-=-cls2(\"good\")-=-=-=-='</span>)</span><br><span class=\"line\">cls2(<span class=\"string\">\"good\"</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'-=-=-=-new cls2(\"good\")-=-=-=-='</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> cls2(<span class=\"string\">\"good\"</span>) <span class=\"comment\">// è¿”å›å›æ¥ cls2 å®ä¾‹ï¼Œcls1å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'-=-=-=-new (cls2(\"good\"))-=-=-=-='</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> (cls2(<span class=\"string\">\"good\"</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'-=-=-=-new (new cls2)-=-=-=-='</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> (<span class=\"keyword\">new</span> cls2)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'-=-=-=-new new cls2(\"good\")-=-=-=-='</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"keyword\">new</span> cls2(<span class=\"string\">\"good\"</span>)</span><br></pre></td></tr></table></figure></li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/0ea9dc132069ffab80fc3260feef10d8228161.png\" alt=\"new Foo  ä¼˜å…ˆçº§\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Call\"><a href=\"#Call\" class=\"headerlink\" title=\"Call\"></a>Call</h3><ul>\n<li>foo()</li>\n<li>super()</li>\n<li>foo()[â€˜bâ€™]</li>\n<li>foo().b</li>\n<li>foo()`abc`</li>\n</ul>\n<h2 id=\"Right-Handside\"><a href=\"#Right-Handside\" class=\"headerlink\" title=\"Right Handside\"></a>Right Handside</h2><h3 id=\"Update\"><a href=\"#Update\" class=\"headerlink\" title=\"Update\"></a>Update</h3><ul>\n<li><p>UpdateExpression</p>\n<ul>\n<li><p>no LineTerminator here</p>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/c0869aae45e6bd6e9e6cc8261ed8888664190.png\" alt=\"no LineTerminator here\"></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>, b = <span class=\"number\">1</span>, c = <span class=\"number\">1</span>;</span><br><span class=\"line\">a</span><br><span class=\"line\">++</span><br><span class=\"line\">b</span><br><span class=\"line\">++</span><br><span class=\"line\">c</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([a, b, c])</span><br><span class=\"line\">a<span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">*/</span>++</span><br><span class=\"line\">b<span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">*/</span>++</span><br><span class=\"line\">c</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([a, b, c])</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>a ++</p>\n</li>\n<li><p>a â€“</p>\n</li>\n<li><p>â€“ a</p>\n</li>\n<li><p>++ a</p>\n</li>\n</ul>\n<h3 id=\"Unary-å•ç›®è¿ç®—ç¬¦\"><a href=\"#Unary-å•ç›®è¿ç®—ç¬¦\" class=\"headerlink\" title=\"Unary å•ç›®è¿ç®—ç¬¦\"></a>Unary å•ç›®è¿ç®—ç¬¦</h3><ul>\n<li><p>delete a.b</p>\n</li>\n<li><p>void foo() </p>\n<ul>\n<li><p>void ä¸æ˜¯è¿”å›å€¼ï¼Œæ˜¯è¿ç®—ç¬¦åœ¨ JS ä¸­</p>\n</li>\n<li><p>ä¸ç®¡åé¢æ˜¯ä»€ä¹ˆï¼Œéƒ½è¿”å› undefined</p>\n</li>\n<li><p>IIFE ç«‹å³æ‰§è¡Œå‡½æ•°</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i ++) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> button  = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'button'</span>);</span><br><span class=\"line\">\tdocuments.body.append(button);</span><br><span class=\"line\">\tbutton.innerHTML = <span class=\"number\">1</span>;</span><br><span class=\"line\">\tbutton.onClick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ç‚¹é‚£ä¸ªæŒ‰é’®ï¼Œéƒ½æ˜¯10ï¼Œä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨IIFE</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i ++) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> button  = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'button'</span>);</span><br><span class=\"line\">\tdocuments.body.append(button);</span><br><span class=\"line\">\tbutton.innerHTML = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">\t\tbutton.onClick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;)()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å¦‚æœå‰é¢ä¸åŠ åˆ†å·ï¼Œåœ¨ä¸€äº›å†™æ³•ä¸­ï¼Œä¼šå‘ç”Ÿç²˜èµ·æ¥é”™è¯¯</span></span><br><span class=\"line\">   (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">     button.onClick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;)()</span><br><span class=\"line\">   </span><br><span class=\"line\">   (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">     button.onClick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;)()</span><br><span class=\"line\"><span class=\"comment\">// æœ€ç¨³å¦¥çš„å°±æ˜¯ï¼Œåœ¨å‰é¢åŠ ä¸Švoid</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i ++) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> button  = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'button'</span>);</span><br><span class=\"line\">\tdocuments.body.append(button);</span><br><span class=\"line\">\tbutton.innerHTML = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">void</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">\t\tbutton.onClick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å¹¶ä¸”è¯­ä¹‰æ­£ç¡®ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦IIFEçš„è¿”å›å€¼</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>typeof a</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c45593f796e09721d1b10701e366669620756.png\" alt=\"typeof\"></li>\n</ul>\n</li>\n<li><p>+ a</p>\n</li>\n<li><p>- a</p>\n</li>\n<li><p>~ a æŒ‰ä½å–å</p>\n</li>\n<li><p>! a å–é</p>\n<ul>\n<li>!!1</li>\n</ul>\n</li>\n<li><p>await a</p>\n</li>\n</ul>\n<h3 id=\"Exponental\"><a href=\"#Exponental\" class=\"headerlink\" title=\"Exponental\"></a>Exponental</h3><ul>\n<li>**<ul>\n<li>3 ** 2 ** 3</li>\n<li>3 ** (2 ** 3)</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/18947a64bdd8ad6c249ea3e214f5b11d17541.png\" alt=\"Exponental\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Multiplicative\"><a href=\"#Multiplicative\" class=\"headerlink\" title=\"Multiplicative\"></a>Multiplicative</h3><ul>\n<li>* / %<ul>\n<li>JS ä¸­æœ‰1ç§ä¹˜æ³•è¿ç®—ç¬¦<ul>\n<li>è¿è¡Œæ—¶<ul>\n<li>number</li>\n<li>string</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Additive\"><a href=\"#Additive\" class=\"headerlink\" title=\"Additive\"></a>Additive</h3><ul>\n<li>+ -<ul>\n<li>JS ä¸­æœ‰2ç§åŠ æ³•è¿ç®—ç¬¦<ul>\n<li>è¿è¡Œæ—¶<ul>\n<li>number</li>\n<li>string</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Shift-å·¦å³ç§»ä½\"><a href=\"#Shift-å·¦å³ç§»ä½\" class=\"headerlink\" title=\"Shift å·¦å³ç§»ä½\"></a>Shift å·¦å³ç§»ä½</h3><ul>\n<li>&lt;&lt; &gt;&gt; &gt;&gt;&gt;</li>\n</ul>\n<h3 id=\"Relationship-æ¯”è¾ƒ\"><a href=\"#Relationship-æ¯”è¾ƒ\" class=\"headerlink\" title=\"Relationship æ¯”è¾ƒ\"></a>Relationship æ¯”è¾ƒ</h3><ul>\n<li>&lt; &gt; &lt;= &gt;= instanceof in</li>\n</ul>\n<h3 id=\"Equality\"><a href=\"#Equality\" class=\"headerlink\" title=\"Equality\"></a>Equality</h3><ul>\n<li>==</li>\n<li>!=</li>\n<li>===</li>\n<li>!==</li>\n</ul>\n<h3 id=\"Bitwise\"><a href=\"#Bitwise\" class=\"headerlink\" title=\"Bitwise\"></a>Bitwise</h3><ul>\n<li>&amp; ^ |</li>\n</ul>\n<h3 id=\"Logical\"><a href=\"#Logical\" class=\"headerlink\" title=\"Logical\"></a>Logical</h3><ul>\n<li><p>æ²¡æœ‰ä»»ä½• boolean è½¬æ¢</p>\n</li>\n<li><p>&amp;&amp;</p>\n<ul>\n<li><p>æœ‰çŸ­è·¯é€»è¾‘</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo1() &amp;&amp; foo2()</span><br><span class=\"line\"></span><br><span class=\"line\">foo1() || foo2()</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/76bacd40d3b17ddaca8fa40b7df168cc49722.png\" alt=\"&amp;&amp; çŸ­è·¯é€»è¾‘è¿è¡Œæˆªå›¾\"></p>\n</li>\n</ul>\n</li>\n<li><p>||</p>\n</li>\n</ul>\n<h3 id=\"Conditional\"><a href=\"#Conditional\" class=\"headerlink\" title=\"Conditional\"></a>Conditional</h3><ul>\n<li><p>? :</p>\n<ul>\n<li><p>åŒæ ·æœ‰çŸ­è·¯é€»è¾‘</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"literal\">false</span> ? foo1() : foo2()</span><br></pre></td></tr></table></figure></li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/bcb065e3ae7986b5c15333ea32404e5360600.png\" alt=\"ä¸‰ç›®è¿ç®—ç¬¦çŸ­è·¯é€»è¾‘\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\",\"></a>,</h3><h2 id=\"Runtime\"><a href=\"#Runtime\" class=\"headerlink\" title=\"Runtime\"></a>Runtime</h2><h3 id=\"Type-Convertion\"><a href=\"#Type-Convertion\" class=\"headerlink\" title=\"Type Convertion\"></a>Type Convertion</h3><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/92ac57b25bd03ca675ef9b0d694e4415353216.png\" alt=\"Type Convertion\"></li>\n<li>undefined â€“&gt; number NAN</li>\n</ul>\n<h4 id=\"Boxing-amp-Unboxing\"><a href=\"#Boxing-amp-Unboxing\" class=\"headerlink\" title=\"Boxing &amp; Unboxing\"></a>Boxing &amp; Unboxing</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Number String Boolean Symbol</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">'hello'</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">'hello'</span>).length</span><br><span class=\"line\"><span class=\"string\">\"hello\"</span>.length</span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"string\">\"hello\"</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">'hello'</span>)</span><br><span class=\"line\">!<span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"string\">''</span>)</span><br><span class=\"line\">!<span class=\"string\">\"\"</span></span><br><span class=\"line\"><span class=\"comment\">// Number String Boolean ä¸ä½œä¸º new è°ƒç”¨ï¼Œå°±æ˜¯è½¬æ¢æˆæ™®é€šç±»å‹</span></span><br><span class=\"line\"><span class=\"built_in\">String</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">String</span>(<span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/3f64818a6b39695d9dbc489cb8bc3f6281607.png\" alt=\"Boxing &amp; Unboxing\"></p>\n</li>\n<li><p>toPremitive()</p>\n</li>\n<li><p>toString vs valueOf</p>\n<ul>\n<li><p>toString vs valueOf</p>\n<pre><code><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span> + &#123;&#125;</span><br><span class=\"line\"><span class=\"number\">1</span> + &#123;valueOf()&#123;<span class=\"keyword\">return</span> <span class=\"number\">2</span>&#125;&#125;</span><br><span class=\"line\"><span class=\"number\">1</span> + &#123;toString()&#123;<span class=\"keyword\">return</span> <span class=\"number\">2</span>&#125;&#125;</span><br><span class=\"line\"><span class=\"number\">1</span> + &#123;toString()&#123;<span class=\"keyword\">return</span> <span class=\"number\">4</span>&#125;&#125;</span><br><span class=\"line\"><span class=\"number\">1</span> + &#123;toString()&#123;<span class=\"keyword\">return</span> <span class=\"string\">\"4\"</span>&#125;&#125;</span><br><span class=\"line\"><span class=\"number\">1</span> + &#123;valueOf()&#123;<span class=\"keyword\">return</span> <span class=\"number\">1</span>&#125;, toString()&#123;<span class=\"keyword\">return</span> <span class=\"string\">\"2\"</span>&#125;&#125;</span><br><span class=\"line\"><span class=\"string\">\"1\"</span> + &#123;valueOf()&#123;<span class=\"keyword\">return</span> <span class=\"number\">1</span>&#125;, toString()&#123;<span class=\"keyword\">return</span> <span class=\"string\">\"2\"</span>&#125;&#125;</span><br></pre></td></tr></table></figure></code></pre><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/78cc58a640f02d8de18f21eec0c80e2f71205.png\" alt=\"toString vs valueOf\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><h3 id=\"Object\"><a href=\"#Object\" class=\"headerlink\" title=\"Object\"></a>Object</h3><h3 id=\"Key\"><a href=\"#Key\" class=\"headerlink\" title=\"Key\"></a>Key</h3><h3 id=\"æ”¯æŒå†™\"><a href=\"#æ”¯æŒå†™\" class=\"headerlink\" title=\"æ”¯æŒå†™\"></a>æ”¯æŒå†™</h3><ul>\n<li>delete</li>\n<li>assign</li>\n</ul>\n<h1 id=\"Statement\"><a href=\"#Statement\" class=\"headerlink\" title=\"Statement\"></a>Statement</h1><h1 id=\"Structure\"><a href=\"#Structure\" class=\"headerlink\" title=\"Structure\"></a>Structure</h1><h1 id=\"Program-Module\"><a href=\"#Program-Module\" class=\"headerlink\" title=\"Program/Module\"></a>Program/Module</h1><h4 id=\"ps-checkSign\"><a href=\"#ps-checkSign\" class=\"headerlink\" title=\"ps. checkSign\"></a>ps. checkSign</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">check</span>(<span class=\"params\">number</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"number\">1</span> / number === <span class=\"literal\">Infinity</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"number\">1</span> / number === -<span class=\"literal\">Infinity</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">-1</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> number / <span class=\"built_in\">Math</span>.abs(number)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>ã€æœªå®Œã€‘Infinity åˆ¤æ–­</p>\n</li>\n<li><p>ã€æœªå®Œã€‘ç›´æ¥ç”¨æµå–å‡ºç¬¦å·ä½</p>\n</li>\n</ul>"},{"title":"Javascript-Statement","date":"2020-04-26T09:01:45.000Z","description":["Javascript -- Statement"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n# Atom\n\n# Expression\n\n# Statement\n\n## Grammar\n\n### ç®€å•è¯­å¥\n\n- ExpressionStatement\n\t- a = 1 + 2;\n- EmptyStatement\n\t- ;\n- DebuggerStatement\n\t- debugger\n- ThrowStatement\n\t- throw a;\n- ContinueStatement\n\t- continue ;\n\t- continue label;\n- BreakStatement\n\t- break ;\n\t- break label;\n- ReturnStatement\n\t- return ;\n\t- return expression;\n\n<!-- more -->\n\n### ç»„åˆè¯­å¥\n\n- BlockStatement\n\t- æŠŠå¤šæ¡è¯­å¥ä»è¯­æ³•ä¸Šæ‹¬èµ·æ¥ï¼Œè®©å®ƒåƒä¸€æ¡è¯­å¥ä¸€æ ·\n\t\n\t\t```javascript\n\t\t{\n\t\t  Statement...\n\t\t  Statement...\n\t\t  Statement...\n\t\t}\n\n  {\n    a: 1 // a è¢«ç†è§£ä¸º label\n  }\n\t\t```\n\t- BlockStatement ä¸­æœ‰é normal ï¼Œå°±ä¼šä¸­æ–­\n\t\t\n\t\t```javascript\n\t\t{\n\t\t  const a = 1;\n\t\t  throw 1;\n\t\t  let b = 2;\n\t\t  b = foo();\n\t\t}\n\t\t```\n\t- ä¸º const / let æä¾›ä½œç”¨åŸŸ\n\t- Completion Record\n\t\t- \\[\\[type]]: normal\n\t\t- \\[\\[value]]: --\n\t\t- \\[\\[target]]: --\n\n- IfStatement\n- SwitchStatement\n- IterationStatement\n    - <s>for await(... of ...)</s>\n\t- while(Expression...) Statement...\n\t- do Statement... while(Expression...);\n\t- for(Definition...; Expression...; Expression...) Statement...\n\t\t- Definition\n\t\t\t- var\n\t\t\t- const / let\n\t\t- for ä¼šç‹¬ç«‹äº§ç”Ÿä¸€ä¸ªä½œç”¨åŸŸï¼Œåœ¨ blockStatement ä¹‹å¤–\n\t\t\n\t\t\t```javascript\n\t\t\t{\n\t\t\t  let i = 0;\n\t\t\t  {\n\t\t\t    let i = 1;\n\t\t\t    console.log(i)\n\t\t\t  }\n\t\t\t  console.log(i)\n\t\t\t}\n\t\t\t```\n\t- for(Definition... in Expression...) Statement....\n\t\n\t\t```javascript\n\t\tfor(let i in {a: 1, b: 2}) {\n\t\t  console.log(i)\n\t\t}\n\t\t```\n\t- for(Definition...of Expression...) Statement...\n\t\n\t\t```javascript\n\t\tfor(let i of [1, 2, 3]) {\n\t\t  console.log(i)\n\t\t}\n\t\t```\n\t\t```javascript\n\t\tfunction *g() {\n\t\t  yield 0;\n\t\t  yield 1;\n\t\t  yield 4;\n\t\t}\n\t\tfor(let p  of g()){\n\t\t  console.log(p)\n\t\t}\n\t\t```\n\t\t\n\t\t> for of --> Iterator --> Generator/Array\n\t\t\n\t\t\n\n- WithStatement\n- LabelledStatement\n- TryStatement\n\n\t```javascript\n\ttry {\n\t  Statement...\n\t} catch(definition...) {\n\t  Statement...\n\t} finally {\n\t  Statement...\n\t}\n\t```\n\t```javascript\n\ttry {\n\t  throw 2;\n\t} catch(e) {\n\t  let e;\n\t  console.log(e);\n\t}\n\t```\n\t```javascript\n\tvar e = 3;\n\ttry {\n\t  throw 2;\n\t} catch(e) {\n\t  console.log(e);\n\t}\n\t```\n\t- catch ä¸­çš„å£°æ˜ï¼Œåªåœ¨ {} è¿™ä¸€ä¸ªä½œç”¨åŸŸä¸­ï¼Œä¸ for ä¸ä¸€æ ·ã€‚\n\t- è¿è¡Œæ—¶äº§ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œéƒ½æœ‰å¯èƒ½äº§ç”Ÿ throw\n\t\t\n\t\t```javascript\n\t\t1 = a;\n\t\tnull.a;\n\t\t```\n\t- Completion Record\n\t\t- \\[\\[type]]: return\n\t\t- \\[\\[value]]: --\n\t\t- \\[\\[target]]: label\n\n### æ ‡ç­¾ã€å¾ªç¯ã€breakã€continue\n- LabelledStatement\n- IterationStatement\n- ContinueStatement\n- BreakStatement\n- SwitchStatement\n- Completion Record\n\t- [[type]]: break continue\n\t- \\[\\[value]]: --\n\t- \\[\\[target]]: label\n\n### å£°æ˜æœºåˆ¶\n- FunctionDeclaration\n- GeneratorDeclaration\n- AsyncFunctionDeclaration\n\t\n\t```javascript\n\tfunction sleep(d) {\n\t  return new Promise(resolve => setTimeout(resolve, d))\n\t}\n\tvoid async function() {\n\t  var i = 0;\n\t  while(true) {\n\t    console.log(i ++);\n\t    await sleep(1000);\n\t  }\n\t}()\n\t```\n- AsyncGeneratorDeclaration\n\t\n\t```javascript\n\tfunction sleep(d) {\n\t  return new Promise(resolve => setTimeout(resolve, d))\n\t}\n\tasync function* foo() {\n\t  var i = 0;\n\t  while(true) {\n\t    yield i ++;\n\t    await sleep(1000);\n\t  }\n\t}\n\tvoid async function() {\n\t  var g = foo();\n\t  console.log(await g.next());\n\t  console.log(await g.next());\n\t  console.log(await g.next());\n\t  console.log(await g.next());\n\t  console.log(await g.next());\n\t}()\n\t// æƒ³æ— é™å¾ªç¯è¾“å‡º\n\t\n\tvoid async function() {\n\t  var g = foo();\n\t  for await(let e of g) {\n\t    console.log(e)\n\t  }\n\t}()\n\t```\n- VariableStatement\n- ClassDeclaration\n- LexicalDeclaration\n- å£°æ˜\n\t- function\n\t- function *\n\t- async function\n\t- async function*\n\t- var\n\t\t- æœ‰ var ä¸å»ºè®®å†™åœ¨ä»»ä½•è¯­å¥å­ç»“æ„é‡Œï¼Œå»ºè®®å†™åœ¨ function çš„èŒƒå›´å†…\n\n\t\t```javascript\n\t\tvar x = 0;\n\t\tfunction foo() {\n\t\t  var o = {x: 1};\n\t\t  x = 2;\n\t\t  with(o) {\n\t\t    var x = 3;\n\t\t  }\n\t\t  console.log(x); // --> 2\n\t\t  console.log(o.x); // --> 3\n\t\t}\n\t\tfoo()\n\t\tconsole.log(x); // --> 0\n\n\t\t```\n\t\t\n\t\t```javascript\n\t\tvar x = 0;\n\t\tfunction foo() {\n\t\t  var o = {x: 1};\n\t\t  x = 2;\n\t\t  with(o) {\n\t\t    x = 3;\n\t\t  }\n\t\t  console.log(x); // --> 2\n\t\t  console.log(o.x); // --> 3\n\t\t}\n\t\tfoo()\n\t\tconsole.log(x); // --> 2\n\n\t\t```\n\n\t- class\n\t- const\n\t- let\n\n## Runtime\n\n### Completion Record\n\n- \\[\\[type]]: normal, break, continue, return, throw\n- \\[\\[value]]: Types\n- \\[\\[target]]: label\n\n\n\n### Lexical Environment\n\n## é¢„å¤„ç†ï¼ˆpre-processï¼‰BoundNames\n\n\n```javascript\nvar a = 2;\nvoid function (){\n  a = 1;\n  console.log(a) \n  return ;\n  var a;\n}()\nconsole.log('a', a);\n```\n![var é¢„å¤„ç†](http://p0.meituan.net/myvideodistribute/f2ca7ffe01a1005a939392f8609685d733665.png)\n\n```javascript\nvoid a = 2;\nvoid function (){\n  a = 1;\n  return ;\n  const a;\n}();\nconsole.log(a);\n```\n![const æ— é¢„å¤„ç†](http://p1.meituan.net/myvideodistribute/172ab6a2ba78132f1dd33f2f5b64e11044523.png)\n## ä½œç”¨åŸŸ\n\n```javascript\nvar a = 2;\nvoid function (){\n  a = 1;\n  {\n    var a;\n  }\n}();\nconsole.log(a);\n```\n\n```javascript\nvar a = 2;\nvoid function (){\n  a = 1;\n  {\n    const a;\n  }\n}();\nconsole.log(a);\n```\n\n![ä½œç”¨åŸŸ](http://p0.meituan.net/myvideodistribute/8b9ac53e3ae6dfca675786084237d0d971523.png)\n\n- ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡çš„åŒºåˆ«\n\t- ä½œç”¨åŸŸå¯ä»¥ç®€å•ç†è§£ä¸ºæºä»£ç æ–‡æœ¬çš„ä½œç”¨åŒºåŸŸ\n\t- æ‰§è¡Œä¸Šä¸‹æ–‡å¯ä»¥ç†è§£ä¸ºï¼Œåœ¨ç”¨æˆ·çš„ç”µè„‘ä¸Šï¼Œå†…å­˜é‡Œçš„ï¼Œå­˜å˜é‡çš„åœ°æ–¹ï¼ŒJavaScript å¼•æ“åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦çš„å˜é‡ï¼Œå¼•æ“é‡Œçš„é‚£å—å†…å­˜ã€‚\n\n\n# Structure\n\n# Program/Module","source":"_posts/Javascript-Statement.md","raw":"---\ntitle: Javascript-Statement\ndate: 2020-04-26 17:01:45\ntags: \n- å‰ç«¯æ¦‚å¿µ\ncategories:\n- å‰ç«¯æ¦‚å¿µ\ndescription:\n- Javascript -- Statement\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n# Atom\n\n# Expression\n\n# Statement\n\n## Grammar\n\n### ç®€å•è¯­å¥\n\n- ExpressionStatement\n\t- a = 1 + 2;\n- EmptyStatement\n\t- ;\n- DebuggerStatement\n\t- debugger\n- ThrowStatement\n\t- throw a;\n- ContinueStatement\n\t- continue ;\n\t- continue label;\n- BreakStatement\n\t- break ;\n\t- break label;\n- ReturnStatement\n\t- return ;\n\t- return expression;\n\n<!-- more -->\n\n### ç»„åˆè¯­å¥\n\n- BlockStatement\n\t- æŠŠå¤šæ¡è¯­å¥ä»è¯­æ³•ä¸Šæ‹¬èµ·æ¥ï¼Œè®©å®ƒåƒä¸€æ¡è¯­å¥ä¸€æ ·\n\t\n\t\t```javascript\n\t\t{\n\t\t  Statement...\n\t\t  Statement...\n\t\t  Statement...\n\t\t}\n\n  {\n    a: 1 // a è¢«ç†è§£ä¸º label\n  }\n\t\t```\n\t- BlockStatement ä¸­æœ‰é normal ï¼Œå°±ä¼šä¸­æ–­\n\t\t\n\t\t```javascript\n\t\t{\n\t\t  const a = 1;\n\t\t  throw 1;\n\t\t  let b = 2;\n\t\t  b = foo();\n\t\t}\n\t\t```\n\t- ä¸º const / let æä¾›ä½œç”¨åŸŸ\n\t- Completion Record\n\t\t- \\[\\[type]]: normal\n\t\t- \\[\\[value]]: --\n\t\t- \\[\\[target]]: --\n\n- IfStatement\n- SwitchStatement\n- IterationStatement\n    - <s>for await(... of ...)</s>\n\t- while(Expression...) Statement...\n\t- do Statement... while(Expression...);\n\t- for(Definition...; Expression...; Expression...) Statement...\n\t\t- Definition\n\t\t\t- var\n\t\t\t- const / let\n\t\t- for ä¼šç‹¬ç«‹äº§ç”Ÿä¸€ä¸ªä½œç”¨åŸŸï¼Œåœ¨ blockStatement ä¹‹å¤–\n\t\t\n\t\t\t```javascript\n\t\t\t{\n\t\t\t  let i = 0;\n\t\t\t  {\n\t\t\t    let i = 1;\n\t\t\t    console.log(i)\n\t\t\t  }\n\t\t\t  console.log(i)\n\t\t\t}\n\t\t\t```\n\t- for(Definition... in Expression...) Statement....\n\t\n\t\t```javascript\n\t\tfor(let i in {a: 1, b: 2}) {\n\t\t  console.log(i)\n\t\t}\n\t\t```\n\t- for(Definition...of Expression...) Statement...\n\t\n\t\t```javascript\n\t\tfor(let i of [1, 2, 3]) {\n\t\t  console.log(i)\n\t\t}\n\t\t```\n\t\t```javascript\n\t\tfunction *g() {\n\t\t  yield 0;\n\t\t  yield 1;\n\t\t  yield 4;\n\t\t}\n\t\tfor(let p  of g()){\n\t\t  console.log(p)\n\t\t}\n\t\t```\n\t\t\n\t\t> for of --> Iterator --> Generator/Array\n\t\t\n\t\t\n\n- WithStatement\n- LabelledStatement\n- TryStatement\n\n\t```javascript\n\ttry {\n\t  Statement...\n\t} catch(definition...) {\n\t  Statement...\n\t} finally {\n\t  Statement...\n\t}\n\t```\n\t```javascript\n\ttry {\n\t  throw 2;\n\t} catch(e) {\n\t  let e;\n\t  console.log(e);\n\t}\n\t```\n\t```javascript\n\tvar e = 3;\n\ttry {\n\t  throw 2;\n\t} catch(e) {\n\t  console.log(e);\n\t}\n\t```\n\t- catch ä¸­çš„å£°æ˜ï¼Œåªåœ¨ {} è¿™ä¸€ä¸ªä½œç”¨åŸŸä¸­ï¼Œä¸ for ä¸ä¸€æ ·ã€‚\n\t- è¿è¡Œæ—¶äº§ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œéƒ½æœ‰å¯èƒ½äº§ç”Ÿ throw\n\t\t\n\t\t```javascript\n\t\t1 = a;\n\t\tnull.a;\n\t\t```\n\t- Completion Record\n\t\t- \\[\\[type]]: return\n\t\t- \\[\\[value]]: --\n\t\t- \\[\\[target]]: label\n\n### æ ‡ç­¾ã€å¾ªç¯ã€breakã€continue\n- LabelledStatement\n- IterationStatement\n- ContinueStatement\n- BreakStatement\n- SwitchStatement\n- Completion Record\n\t- [[type]]: break continue\n\t- \\[\\[value]]: --\n\t- \\[\\[target]]: label\n\n### å£°æ˜æœºåˆ¶\n- FunctionDeclaration\n- GeneratorDeclaration\n- AsyncFunctionDeclaration\n\t\n\t```javascript\n\tfunction sleep(d) {\n\t  return new Promise(resolve => setTimeout(resolve, d))\n\t}\n\tvoid async function() {\n\t  var i = 0;\n\t  while(true) {\n\t    console.log(i ++);\n\t    await sleep(1000);\n\t  }\n\t}()\n\t```\n- AsyncGeneratorDeclaration\n\t\n\t```javascript\n\tfunction sleep(d) {\n\t  return new Promise(resolve => setTimeout(resolve, d))\n\t}\n\tasync function* foo() {\n\t  var i = 0;\n\t  while(true) {\n\t    yield i ++;\n\t    await sleep(1000);\n\t  }\n\t}\n\tvoid async function() {\n\t  var g = foo();\n\t  console.log(await g.next());\n\t  console.log(await g.next());\n\t  console.log(await g.next());\n\t  console.log(await g.next());\n\t  console.log(await g.next());\n\t}()\n\t// æƒ³æ— é™å¾ªç¯è¾“å‡º\n\t\n\tvoid async function() {\n\t  var g = foo();\n\t  for await(let e of g) {\n\t    console.log(e)\n\t  }\n\t}()\n\t```\n- VariableStatement\n- ClassDeclaration\n- LexicalDeclaration\n- å£°æ˜\n\t- function\n\t- function *\n\t- async function\n\t- async function*\n\t- var\n\t\t- æœ‰ var ä¸å»ºè®®å†™åœ¨ä»»ä½•è¯­å¥å­ç»“æ„é‡Œï¼Œå»ºè®®å†™åœ¨ function çš„èŒƒå›´å†…\n\n\t\t```javascript\n\t\tvar x = 0;\n\t\tfunction foo() {\n\t\t  var o = {x: 1};\n\t\t  x = 2;\n\t\t  with(o) {\n\t\t    var x = 3;\n\t\t  }\n\t\t  console.log(x); // --> 2\n\t\t  console.log(o.x); // --> 3\n\t\t}\n\t\tfoo()\n\t\tconsole.log(x); // --> 0\n\n\t\t```\n\t\t\n\t\t```javascript\n\t\tvar x = 0;\n\t\tfunction foo() {\n\t\t  var o = {x: 1};\n\t\t  x = 2;\n\t\t  with(o) {\n\t\t    x = 3;\n\t\t  }\n\t\t  console.log(x); // --> 2\n\t\t  console.log(o.x); // --> 3\n\t\t}\n\t\tfoo()\n\t\tconsole.log(x); // --> 2\n\n\t\t```\n\n\t- class\n\t- const\n\t- let\n\n## Runtime\n\n### Completion Record\n\n- \\[\\[type]]: normal, break, continue, return, throw\n- \\[\\[value]]: Types\n- \\[\\[target]]: label\n\n\n\n### Lexical Environment\n\n## é¢„å¤„ç†ï¼ˆpre-processï¼‰BoundNames\n\n\n```javascript\nvar a = 2;\nvoid function (){\n  a = 1;\n  console.log(a) \n  return ;\n  var a;\n}()\nconsole.log('a', a);\n```\n![var é¢„å¤„ç†](http://p0.meituan.net/myvideodistribute/f2ca7ffe01a1005a939392f8609685d733665.png)\n\n```javascript\nvoid a = 2;\nvoid function (){\n  a = 1;\n  return ;\n  const a;\n}();\nconsole.log(a);\n```\n![const æ— é¢„å¤„ç†](http://p1.meituan.net/myvideodistribute/172ab6a2ba78132f1dd33f2f5b64e11044523.png)\n## ä½œç”¨åŸŸ\n\n```javascript\nvar a = 2;\nvoid function (){\n  a = 1;\n  {\n    var a;\n  }\n}();\nconsole.log(a);\n```\n\n```javascript\nvar a = 2;\nvoid function (){\n  a = 1;\n  {\n    const a;\n  }\n}();\nconsole.log(a);\n```\n\n![ä½œç”¨åŸŸ](http://p0.meituan.net/myvideodistribute/8b9ac53e3ae6dfca675786084237d0d971523.png)\n\n- ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡çš„åŒºåˆ«\n\t- ä½œç”¨åŸŸå¯ä»¥ç®€å•ç†è§£ä¸ºæºä»£ç æ–‡æœ¬çš„ä½œç”¨åŒºåŸŸ\n\t- æ‰§è¡Œä¸Šä¸‹æ–‡å¯ä»¥ç†è§£ä¸ºï¼Œåœ¨ç”¨æˆ·çš„ç”µè„‘ä¸Šï¼Œå†…å­˜é‡Œçš„ï¼Œå­˜å˜é‡çš„åœ°æ–¹ï¼ŒJavaScript å¼•æ“åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦çš„å˜é‡ï¼Œå¼•æ“é‡Œçš„é‚£å—å†…å­˜ã€‚\n\n\n# Structure\n\n# Program/Module","slug":"Javascript-Statement","published":1,"updated":"2020-10-27T15:21:11.262Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7r000yfw9kagfb0puk","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h1 id=\"Atom\"><a href=\"#Atom\" class=\"headerlink\" title=\"Atom\"></a>Atom</h1><h1 id=\"Expression\"><a href=\"#Expression\" class=\"headerlink\" title=\"Expression\"></a>Expression</h1><h1 id=\"Statement\"><a href=\"#Statement\" class=\"headerlink\" title=\"Statement\"></a>Statement</h1><h2 id=\"Grammar\"><a href=\"#Grammar\" class=\"headerlink\" title=\"Grammar\"></a>Grammar</h2><h3 id=\"ç®€å•è¯­å¥\"><a href=\"#ç®€å•è¯­å¥\" class=\"headerlink\" title=\"ç®€å•è¯­å¥\"></a>ç®€å•è¯­å¥</h3><ul>\n<li>ExpressionStatement<ul>\n<li>a = 1 + 2;</li>\n</ul>\n</li>\n<li>EmptyStatement<ul>\n<li>;</li>\n</ul>\n</li>\n<li>DebuggerStatement<ul>\n<li>debugger</li>\n</ul>\n</li>\n<li>ThrowStatement<ul>\n<li>throw a;</li>\n</ul>\n</li>\n<li>ContinueStatement<ul>\n<li>continue ;</li>\n<li>continue label;</li>\n</ul>\n</li>\n<li>BreakStatement<ul>\n<li>break ;</li>\n<li>break label;</li>\n</ul>\n</li>\n<li>ReturnStatement<ul>\n<li>return ;</li>\n<li>return expression;</li>\n</ul>\n</li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"ç»„åˆè¯­å¥\"><a href=\"#ç»„åˆè¯­å¥\" class=\"headerlink\" title=\"ç»„åˆè¯­å¥\"></a>ç»„åˆè¯­å¥</h3><ul>\n<li><p>BlockStatement</p>\n<ul>\n<li><p>æŠŠå¤šæ¡è¯­å¥ä»è¯­æ³•ä¸Šæ‹¬èµ·æ¥ï¼Œè®©å®ƒåƒä¸€æ¡è¯­å¥ä¸€æ ·</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  Statement...</span><br><span class=\"line\">  Statement...</span><br><span class=\"line\">  Statement...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  a: <span class=\"number\">1</span> <span class=\"comment\">// a è¢«ç†è§£ä¸º label</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>BlockStatement ä¸­æœ‰é normal ï¼Œå°±ä¼šä¸­æ–­</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\">  b = foo();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>ä¸º const / let æä¾›ä½œç”¨åŸŸ</p>\n</li>\n<li><p>Completion Record</p>\n<ul>\n<li>[[type]]: normal</li>\n<li>[[value]]: â€“</li>\n<li>[[target]]: â€“</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>IfStatement</p>\n</li>\n<li><p>SwitchStatement</p>\n</li>\n<li><p>IterationStatement</p>\n<ul>\n<li><p><s>for await(â€¦ of â€¦)</s></p>\n</li>\n<li><p>while(Expressionâ€¦) Statementâ€¦</p>\n</li>\n<li><p>do Statementâ€¦ while(Expressionâ€¦);</p>\n</li>\n<li><p>for(Definitionâ€¦; Expressionâ€¦; Expressionâ€¦) Statementâ€¦</p>\n<ul>\n<li><p>Definition</p>\n<ul>\n<li>var</li>\n<li>const / let</li>\n</ul>\n</li>\n<li><p>for ä¼šç‹¬ç«‹äº§ç”Ÿä¸€ä¸ªä½œç”¨åŸŸï¼Œåœ¨ blockStatement ä¹‹å¤–</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> i = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>for(Definitionâ€¦ in Expressionâ€¦) Statementâ€¦.</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i <span class=\"keyword\">in</span> &#123;<span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: <span class=\"number\">2</span>&#125;) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>for(Definitionâ€¦of Expressionâ€¦) Statementâ€¦</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i <span class=\"keyword\">of</span> [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> *<span class=\"title\">g</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">4</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> p  <span class=\"keyword\">of</span> g())&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(p)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>for of â€“&gt; Iterator â€“&gt; Generator/Array</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>WithStatement</p>\n</li>\n<li><p>LabelledStatement</p>\n</li>\n<li><p>TryStatement</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  Statement...</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span>(definition...) &#123;</span><br><span class=\"line\">  Statement...</span><br><span class=\"line\">&#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">  Statement...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span>(e) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> e;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(e);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> e = <span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span>(e) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(e);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>catch ä¸­çš„å£°æ˜ï¼Œåªåœ¨ {} è¿™ä¸€ä¸ªä½œç”¨åŸŸä¸­ï¼Œä¸ for ä¸ä¸€æ ·ã€‚</p>\n</li>\n<li><p>è¿è¡Œæ—¶äº§ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œéƒ½æœ‰å¯èƒ½äº§ç”Ÿ throw</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span> = a;</span><br><span class=\"line\"><span class=\"literal\">null</span>.a;</span><br></pre></td></tr></table></figure></li>\n<li><p>Completion Record</p>\n<ul>\n<li>[[type]]: return</li>\n<li>[[value]]: â€“</li>\n<li>[[target]]: label</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æ ‡ç­¾ã€å¾ªç¯ã€breakã€continue\"><a href=\"#æ ‡ç­¾ã€å¾ªç¯ã€breakã€continue\" class=\"headerlink\" title=\"æ ‡ç­¾ã€å¾ªç¯ã€breakã€continue\"></a>æ ‡ç­¾ã€å¾ªç¯ã€breakã€continue</h3><ul>\n<li>LabelledStatement</li>\n<li>IterationStatement</li>\n<li>ContinueStatement</li>\n<li>BreakStatement</li>\n<li>SwitchStatement</li>\n<li>Completion Record<ul>\n<li>[[type]]: break continue</li>\n<li>[[value]]: â€“</li>\n<li>[[target]]: label</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"å£°æ˜æœºåˆ¶\"><a href=\"#å£°æ˜æœºåˆ¶\" class=\"headerlink\" title=\"å£°æ˜æœºåˆ¶\"></a>å£°æ˜æœºåˆ¶</h3><ul>\n<li><p>FunctionDeclaration</p>\n</li>\n<li><p>GeneratorDeclaration</p>\n</li>\n<li><p>AsyncFunctionDeclaration</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sleep</span>(<span class=\"params\">d</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> setTimeout(resolve, d))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(i ++);</span><br><span class=\"line\">    <span class=\"keyword\">await</span> sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;()</span><br></pre></td></tr></table></figure></li>\n<li><p>AsyncGeneratorDeclaration</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sleep</span>(<span class=\"params\">d</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> setTimeout(resolve, d))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> i ++;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> g = foo();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">await</span> g.next());</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">await</span> g.next());</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">await</span> g.next());</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">await</span> g.next());</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">await</span> g.next());</span><br><span class=\"line\">&#125;()</span><br><span class=\"line\"><span class=\"comment\">// æƒ³æ— é™å¾ªç¯è¾“å‡º</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> g = foo();</span><br><span class=\"line\">  <span class=\"keyword\">for</span> <span class=\"keyword\">await</span>(<span class=\"keyword\">let</span> e <span class=\"keyword\">of</span> g) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(e)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;()</span><br></pre></td></tr></table></figure></li>\n<li><p>VariableStatement</p>\n</li>\n<li><p>ClassDeclaration</p>\n</li>\n<li><p>LexicalDeclaration</p>\n</li>\n<li><p>å£°æ˜</p>\n<ul>\n<li><p>function</p>\n</li>\n<li><p>function *</p>\n</li>\n<li><p>async function</p>\n</li>\n<li><p>async function*</p>\n</li>\n<li><p>var</p>\n<ul>\n<li><p>æœ‰ var ä¸å»ºè®®å†™åœ¨ä»»ä½•è¯­å¥å­ç»“æ„é‡Œï¼Œå»ºè®®å†™åœ¨ function çš„èŒƒå›´å†…</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> o = &#123;<span class=\"attr\">x</span>: <span class=\"number\">1</span>&#125;;</span><br><span class=\"line\">  x = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">with</span>(o) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> x = <span class=\"number\">3</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(x); <span class=\"comment\">// --&gt; 2</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(o.x); <span class=\"comment\">// --&gt; 3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(x); <span class=\"comment\">// --&gt; 0</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> o = &#123;<span class=\"attr\">x</span>: <span class=\"number\">1</span>&#125;;</span><br><span class=\"line\">  x = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">with</span>(o) &#123;</span><br><span class=\"line\">    x = <span class=\"number\">3</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(x); <span class=\"comment\">// --&gt; 2</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(o.x); <span class=\"comment\">// --&gt; 3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(x); <span class=\"comment\">// --&gt; 2</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>class</p>\n</li>\n<li><p>const</p>\n</li>\n<li><p>let</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Runtime\"><a href=\"#Runtime\" class=\"headerlink\" title=\"Runtime\"></a>Runtime</h2><h3 id=\"Completion-Record\"><a href=\"#Completion-Record\" class=\"headerlink\" title=\"Completion Record\"></a>Completion Record</h3><ul>\n<li>[[type]]: normal, break, continue, return, throw</li>\n<li>[[value]]: Types</li>\n<li>[[target]]: label</li>\n</ul>\n<h3 id=\"Lexical-Environment\"><a href=\"#Lexical-Environment\" class=\"headerlink\" title=\"Lexical Environment\"></a>Lexical Environment</h3><h2 id=\"é¢„å¤„ç†ï¼ˆpre-processï¼‰BoundNames\"><a href=\"#é¢„å¤„ç†ï¼ˆpre-processï¼‰BoundNames\" class=\"headerlink\" title=\"é¢„å¤„ç†ï¼ˆpre-processï¼‰BoundNames\"></a>é¢„å¤„ç†ï¼ˆpre-processï¼‰BoundNames</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(a) </span><br><span class=\"line\">  <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a;</span><br><span class=\"line\">&#125;()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'a'</span>, a);</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://p0.meituan.net/myvideodistribute/f2ca7ffe01a1005a939392f8609685d733665.png\" alt=\"var é¢„å¤„ç†\"></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a;</span><br><span class=\"line\">&#125;();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a);</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://p1.meituan.net/myvideodistribute/172ab6a2ba78132f1dd33f2f5b64e11044523.png\" alt=\"const æ— é¢„å¤„ç†\"></p>\n<h2 id=\"ä½œç”¨åŸŸ\"><a href=\"#ä½œç”¨åŸŸ\" class=\"headerlink\" title=\"ä½œç”¨åŸŸ\"></a>ä½œç”¨åŸŸ</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> a;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a);</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"http://p0.meituan.net/myvideodistribute/8b9ac53e3ae6dfca675786084237d0d971523.png\" alt=\"ä½œç”¨åŸŸ\"></p>\n<ul>\n<li>ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡çš„åŒºåˆ«<ul>\n<li>ä½œç”¨åŸŸå¯ä»¥ç®€å•ç†è§£ä¸ºæºä»£ç æ–‡æœ¬çš„ä½œç”¨åŒºåŸŸ</li>\n<li>æ‰§è¡Œä¸Šä¸‹æ–‡å¯ä»¥ç†è§£ä¸ºï¼Œåœ¨ç”¨æˆ·çš„ç”µè„‘ä¸Šï¼Œå†…å­˜é‡Œçš„ï¼Œå­˜å˜é‡çš„åœ°æ–¹ï¼ŒJavaScript å¼•æ“åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦çš„å˜é‡ï¼Œå¼•æ“é‡Œçš„é‚£å—å†…å­˜ã€‚</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"Structure\"><a href=\"#Structure\" class=\"headerlink\" title=\"Structure\"></a>Structure</h1><h1 id=\"Program-Module\"><a href=\"#Program-Module\" class=\"headerlink\" title=\"Program/Module\"></a>Program/Module</h1>","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h1 id=\"Atom\"><a href=\"#Atom\" class=\"headerlink\" title=\"Atom\"></a>Atom</h1><h1 id=\"Expression\"><a href=\"#Expression\" class=\"headerlink\" title=\"Expression\"></a>Expression</h1><h1 id=\"Statement\"><a href=\"#Statement\" class=\"headerlink\" title=\"Statement\"></a>Statement</h1><h2 id=\"Grammar\"><a href=\"#Grammar\" class=\"headerlink\" title=\"Grammar\"></a>Grammar</h2><h3 id=\"ç®€å•è¯­å¥\"><a href=\"#ç®€å•è¯­å¥\" class=\"headerlink\" title=\"ç®€å•è¯­å¥\"></a>ç®€å•è¯­å¥</h3><ul>\n<li>ExpressionStatement<ul>\n<li>a = 1 + 2;</li>\n</ul>\n</li>\n<li>EmptyStatement<ul>\n<li>;</li>\n</ul>\n</li>\n<li>DebuggerStatement<ul>\n<li>debugger</li>\n</ul>\n</li>\n<li>ThrowStatement<ul>\n<li>throw a;</li>\n</ul>\n</li>\n<li>ContinueStatement<ul>\n<li>continue ;</li>\n<li>continue label;</li>\n</ul>\n</li>\n<li>BreakStatement<ul>\n<li>break ;</li>\n<li>break label;</li>\n</ul>\n</li>\n<li>ReturnStatement<ul>\n<li>return ;</li>\n<li>return expression;</li>\n</ul>\n</li>\n</ul>","more":"<h3 id=\"ç»„åˆè¯­å¥\"><a href=\"#ç»„åˆè¯­å¥\" class=\"headerlink\" title=\"ç»„åˆè¯­å¥\"></a>ç»„åˆè¯­å¥</h3><ul>\n<li><p>BlockStatement</p>\n<ul>\n<li><p>æŠŠå¤šæ¡è¯­å¥ä»è¯­æ³•ä¸Šæ‹¬èµ·æ¥ï¼Œè®©å®ƒåƒä¸€æ¡è¯­å¥ä¸€æ ·</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  Statement...</span><br><span class=\"line\">  Statement...</span><br><span class=\"line\">  Statement...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  a: <span class=\"number\">1</span> <span class=\"comment\">// a è¢«ç†è§£ä¸º label</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>BlockStatement ä¸­æœ‰é normal ï¼Œå°±ä¼šä¸­æ–­</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\">  b = foo();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>ä¸º const / let æä¾›ä½œç”¨åŸŸ</p>\n</li>\n<li><p>Completion Record</p>\n<ul>\n<li>[[type]]: normal</li>\n<li>[[value]]: â€“</li>\n<li>[[target]]: â€“</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>IfStatement</p>\n</li>\n<li><p>SwitchStatement</p>\n</li>\n<li><p>IterationStatement</p>\n<ul>\n<li><p><s>for await(â€¦ of â€¦)</s></p>\n</li>\n<li><p>while(Expressionâ€¦) Statementâ€¦</p>\n</li>\n<li><p>do Statementâ€¦ while(Expressionâ€¦);</p>\n</li>\n<li><p>for(Definitionâ€¦; Expressionâ€¦; Expressionâ€¦) Statementâ€¦</p>\n<ul>\n<li><p>Definition</p>\n<ul>\n<li>var</li>\n<li>const / let</li>\n</ul>\n</li>\n<li><p>for ä¼šç‹¬ç«‹äº§ç”Ÿä¸€ä¸ªä½œç”¨åŸŸï¼Œåœ¨ blockStatement ä¹‹å¤–</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> i = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>for(Definitionâ€¦ in Expressionâ€¦) Statementâ€¦.</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i <span class=\"keyword\">in</span> &#123;<span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: <span class=\"number\">2</span>&#125;) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>for(Definitionâ€¦of Expressionâ€¦) Statementâ€¦</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i <span class=\"keyword\">of</span> [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> *<span class=\"title\">g</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">4</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> p  <span class=\"keyword\">of</span> g())&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(p)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>for of â€“&gt; Iterator â€“&gt; Generator/Array</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>WithStatement</p>\n</li>\n<li><p>LabelledStatement</p>\n</li>\n<li><p>TryStatement</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  Statement...</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span>(definition...) &#123;</span><br><span class=\"line\">  Statement...</span><br><span class=\"line\">&#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">  Statement...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span>(e) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> e;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(e);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> e = <span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span>(e) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(e);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>catch ä¸­çš„å£°æ˜ï¼Œåªåœ¨ {} è¿™ä¸€ä¸ªä½œç”¨åŸŸä¸­ï¼Œä¸ for ä¸ä¸€æ ·ã€‚</p>\n</li>\n<li><p>è¿è¡Œæ—¶äº§ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œéƒ½æœ‰å¯èƒ½äº§ç”Ÿ throw</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span> = a;</span><br><span class=\"line\"><span class=\"literal\">null</span>.a;</span><br></pre></td></tr></table></figure></li>\n<li><p>Completion Record</p>\n<ul>\n<li>[[type]]: return</li>\n<li>[[value]]: â€“</li>\n<li>[[target]]: label</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æ ‡ç­¾ã€å¾ªç¯ã€breakã€continue\"><a href=\"#æ ‡ç­¾ã€å¾ªç¯ã€breakã€continue\" class=\"headerlink\" title=\"æ ‡ç­¾ã€å¾ªç¯ã€breakã€continue\"></a>æ ‡ç­¾ã€å¾ªç¯ã€breakã€continue</h3><ul>\n<li>LabelledStatement</li>\n<li>IterationStatement</li>\n<li>ContinueStatement</li>\n<li>BreakStatement</li>\n<li>SwitchStatement</li>\n<li>Completion Record<ul>\n<li>[[type]]: break continue</li>\n<li>[[value]]: â€“</li>\n<li>[[target]]: label</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"å£°æ˜æœºåˆ¶\"><a href=\"#å£°æ˜æœºåˆ¶\" class=\"headerlink\" title=\"å£°æ˜æœºåˆ¶\"></a>å£°æ˜æœºåˆ¶</h3><ul>\n<li><p>FunctionDeclaration</p>\n</li>\n<li><p>GeneratorDeclaration</p>\n</li>\n<li><p>AsyncFunctionDeclaration</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sleep</span>(<span class=\"params\">d</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> setTimeout(resolve, d))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(i ++);</span><br><span class=\"line\">    <span class=\"keyword\">await</span> sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;()</span><br></pre></td></tr></table></figure></li>\n<li><p>AsyncGeneratorDeclaration</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sleep</span>(<span class=\"params\">d</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> setTimeout(resolve, d))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> i ++;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> g = foo();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">await</span> g.next());</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">await</span> g.next());</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">await</span> g.next());</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">await</span> g.next());</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">await</span> g.next());</span><br><span class=\"line\">&#125;()</span><br><span class=\"line\"><span class=\"comment\">// æƒ³æ— é™å¾ªç¯è¾“å‡º</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> g = foo();</span><br><span class=\"line\">  <span class=\"keyword\">for</span> <span class=\"keyword\">await</span>(<span class=\"keyword\">let</span> e <span class=\"keyword\">of</span> g) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(e)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;()</span><br></pre></td></tr></table></figure></li>\n<li><p>VariableStatement</p>\n</li>\n<li><p>ClassDeclaration</p>\n</li>\n<li><p>LexicalDeclaration</p>\n</li>\n<li><p>å£°æ˜</p>\n<ul>\n<li><p>function</p>\n</li>\n<li><p>function *</p>\n</li>\n<li><p>async function</p>\n</li>\n<li><p>async function*</p>\n</li>\n<li><p>var</p>\n<ul>\n<li><p>æœ‰ var ä¸å»ºè®®å†™åœ¨ä»»ä½•è¯­å¥å­ç»“æ„é‡Œï¼Œå»ºè®®å†™åœ¨ function çš„èŒƒå›´å†…</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> o = &#123;<span class=\"attr\">x</span>: <span class=\"number\">1</span>&#125;;</span><br><span class=\"line\">  x = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">with</span>(o) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> x = <span class=\"number\">3</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(x); <span class=\"comment\">// --&gt; 2</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(o.x); <span class=\"comment\">// --&gt; 3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(x); <span class=\"comment\">// --&gt; 0</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> o = &#123;<span class=\"attr\">x</span>: <span class=\"number\">1</span>&#125;;</span><br><span class=\"line\">  x = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">with</span>(o) &#123;</span><br><span class=\"line\">    x = <span class=\"number\">3</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(x); <span class=\"comment\">// --&gt; 2</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(o.x); <span class=\"comment\">// --&gt; 3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(x); <span class=\"comment\">// --&gt; 2</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>class</p>\n</li>\n<li><p>const</p>\n</li>\n<li><p>let</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Runtime\"><a href=\"#Runtime\" class=\"headerlink\" title=\"Runtime\"></a>Runtime</h2><h3 id=\"Completion-Record\"><a href=\"#Completion-Record\" class=\"headerlink\" title=\"Completion Record\"></a>Completion Record</h3><ul>\n<li>[[type]]: normal, break, continue, return, throw</li>\n<li>[[value]]: Types</li>\n<li>[[target]]: label</li>\n</ul>\n<h3 id=\"Lexical-Environment\"><a href=\"#Lexical-Environment\" class=\"headerlink\" title=\"Lexical Environment\"></a>Lexical Environment</h3><h2 id=\"é¢„å¤„ç†ï¼ˆpre-processï¼‰BoundNames\"><a href=\"#é¢„å¤„ç†ï¼ˆpre-processï¼‰BoundNames\" class=\"headerlink\" title=\"é¢„å¤„ç†ï¼ˆpre-processï¼‰BoundNames\"></a>é¢„å¤„ç†ï¼ˆpre-processï¼‰BoundNames</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(a) </span><br><span class=\"line\">  <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a;</span><br><span class=\"line\">&#125;()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'a'</span>, a);</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://p0.meituan.net/myvideodistribute/f2ca7ffe01a1005a939392f8609685d733665.png\" alt=\"var é¢„å¤„ç†\"></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a;</span><br><span class=\"line\">&#125;();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a);</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://p1.meituan.net/myvideodistribute/172ab6a2ba78132f1dd33f2f5b64e11044523.png\" alt=\"const æ— é¢„å¤„ç†\"></p>\n<h2 id=\"ä½œç”¨åŸŸ\"><a href=\"#ä½œç”¨åŸŸ\" class=\"headerlink\" title=\"ä½œç”¨åŸŸ\"></a>ä½œç”¨åŸŸ</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> a;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a);</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"http://p0.meituan.net/myvideodistribute/8b9ac53e3ae6dfca675786084237d0d971523.png\" alt=\"ä½œç”¨åŸŸ\"></p>\n<ul>\n<li>ä½œç”¨åŸŸä¸ä¸Šä¸‹æ–‡çš„åŒºåˆ«<ul>\n<li>ä½œç”¨åŸŸå¯ä»¥ç®€å•ç†è§£ä¸ºæºä»£ç æ–‡æœ¬çš„ä½œç”¨åŒºåŸŸ</li>\n<li>æ‰§è¡Œä¸Šä¸‹æ–‡å¯ä»¥ç†è§£ä¸ºï¼Œåœ¨ç”¨æˆ·çš„ç”µè„‘ä¸Šï¼Œå†…å­˜é‡Œçš„ï¼Œå­˜å˜é‡çš„åœ°æ–¹ï¼ŒJavaScript å¼•æ“åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦çš„å˜é‡ï¼Œå¼•æ“é‡Œçš„é‚£å—å†…å­˜ã€‚</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"Structure\"><a href=\"#Structure\" class=\"headerlink\" title=\"Structure\"></a>Structure</h1><h1 id=\"Program-Module\"><a href=\"#Program-Module\" class=\"headerlink\" title=\"Program/Module\"></a>Program/Module</h1>"},{"title":"Javascript-è¿è¡Œæœºåˆ¶ï¼ˆäºŒï¼‰","date":"2020-05-02T14:10:38.000Z","description":["Javascript -- Expression"],"_content":"\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- å—¯ï¼Œå‘ç° è¿è¡Œæœºåˆ¶ çš„é¢è¯•é¢˜æ˜¯çœŸçš„å¤šã€‚ã€‚ğŸ˜“\n- é‚£è¿™å°±æ˜¯ï¼Œæœ€æœ«ç¯‡å§\n- åŠ æ²¹ Elle ğŸ¤¦â€â™€ï¸\n- äº”ä¸€å€’è®¡æ—¶ 2 å¤©\n\n<!-- more -->\n\n## å®è·µè®°å½•\n\n### async / await \n\n5.1 é¢˜ç›®ä¸€\n\n```javascript\nasync function async1() {\n  console.log(\"async1 start\");\n  await async2();\n  console.log(\"async1 end\");\n}\nasync function async2() {\n  console.log(\"async2\");\n}\nasync1();\nconsole.log('start')\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t- async1();\n\t\t- console.log(\"async1 start\");\n\t\t- await async2();\n\t\t\t- ç­‰å¾…æ‰§è¡Œ async2 ç»“æœ\n\t\t\t- console.log(\"async2\");\n\t\t- console.log(\"async1 end\"); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log('start')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— \n\t- console.log(\"async1 end\");\n\n\t\n- ç»“è®º\n\t- åœ¨è¿™é‡Œï¼Œå¯ä»¥ç†è§£ä¸ºã€Œç´§è·Ÿç€awaitåé¢çš„è¯­å¥ç›¸å½“äºæ”¾åˆ°äº†new Promiseä¸­ï¼Œä¸‹ä¸€è¡ŒåŠä¹‹åçš„è¯­å¥ç›¸å½“äºæ”¾åœ¨Promise.thenä¸­ã€\n\n- ç­‰åŒäº\n\t\n\t```javascript\n\tasync function async1() {\n\t  console.log(\"async1 start\");\n\t  // åŸæ¥ä»£ç \n\t  // await async2();\n\t  // console.log(\"async1 end\");\n\t  \n\t  // è½¬æ¢åä»£ç \n\t  new Promise(resolve => {\n\t    console.log(\"async2\")\n\t    resolve()\n\t  }).then(res => console.log(\"async1 end\"))\n\t}\n\tasync function async2() {\n\t  console.log(\"async2\");\n\t}\n\tasync1();\n\tconsole.log(\"start\")\n\n\t```\n\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/f08b1b409f667c37f2a9dae1bf0b491e36782.png)\n\n5.2 é¢˜ç›®äºŒ\n\n```javascript\nasync function async1() {\n  console.log(\"async1 start\");\n  await async2();\n  console.log(\"async1 end\");\n}\nasync function async2() {\n  setTimeout(() => {\n    console.log('timer')\n  }, 0)\n  console.log(\"async2\");\n}\nasync1();\nconsole.log(\"start\")\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- async1();\n\t\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(\"async1 start\");\n\t\t- await async2();\n\t\t\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- console.log(\"async2\");\n\t\t- console.log(\"async1 end\"); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log(\"start\")\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log(\"async1 end\");\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log('timer')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/ef5bbc4448d8cf8a4e6e7eb3d481257d43632.png)\n\n\t\n5.3 é¢˜ç›®ä¸‰\n\n```javascript\nasync function async1() {\n  console.log(\"async1 start\");\n  await async2();\n  console.log(\"async1 end\");\n  setTimeout(() => {\n    console.log('timer1')\n  }, 0)\n}\nasync function async2() {\n  setTimeout(() => {\n    console.log('timer2')\n  }, 0)\n  console.log(\"async2\");\n}\nasync1();\nsetTimeout(() => {\n  console.log('timer3')\n}, 0)\nconsole.log(\"start\")\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- async1();\n\t\t- console.log(\"async1 start\");\n\t\t- await async2();\n\t\t\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- console.log(\"async2\");\n\t\t- console.log(\"async1 end\"); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- setTimeout ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log(\"start\")\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç å·²ç»æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- console.log(\"async1 end\");\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log('timer2');\n\t- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log('timer3')\n\t- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log('timer1')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/40ff5c3620b6ef956afd99a895080cee58816.png)\n\n\n5.4 é¢˜ç›®å››\n\n```javascript\nasync function fn () {\n  // return await 1234\n  // ç­‰åŒäº\n  return 123\n}\nfn().then(res => console.log(res))\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- fn()\n\t\t- return 123\n\t- console.log(res) res --> 123\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å››è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/01d7e322293346a15fd0c97cb6167dee21159.png)\n\n5.5 **é¢˜ç›®äº”**\n\n```javascript\nasync function async1 () {\n  console.log('async1 start');\n  await new Promise(resolve => {\n    console.log('promise1')\n  })\n  console.log('async1 success');\n  return 'async1 end'\n}\nconsole.log('srcipt start')\nasync1().then(res => console.log(res))\nconsole.log('srcipt end')\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- console.log('srcipt start')\n\t- async1()\n\t\t- console.log('async1 start');\n\t\t- new Promise ... ç­‰å¾…æ‰§è¡Œ\n\t\t\t- console.log('promise1')\n\t\t\t- ç”±äº promise å¹¶æ²¡æœ‰ resolvedã€rejectedï¼Œæ‰€ä»¥ä¸€ç›´å¤„åœ¨ pending çŠ¶æ€ï¼Œæ‰€ä»¥ ä¼šä¸€ç›´ await ï¼Œawait åçš„å†…å®¹ä¹ŸåŒ…æ‹¬ async1 åé¢çš„ thenï¼Œéƒ½ä¸ä¼šæ‰§è¡Œ\n\t- console.log('srcipt end')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äº”è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/6da017ef5e2bef76433a90be0f7804c343869.png)\n\n5.6 é¢˜ç›®å…­\n\n```javascript\nasync function async1 () {\n  console.log('async1 start');\n  await new Promise(resolve => {\n    console.log('promise1')\n    resolve('promise1 resolve')\n  }).then(res => console.log(res))\n  console.log('async1 success');\n  return 'async1 end'\n}\nconsole.log('srcipt start')\nasync1().then(res => console.log(res))\nconsole.log('srcipt end')\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- console.log('srcipt start')\n\t- async1()\n\t\t- console.log('async1 start');\n\t\t- await new Promise ... ç­‰å¾… promise æ‰§è¡Œ\n\t\t\t- console.log('promise1')\n\t\t\t- å…¶ä¸­ promise çŠ¶æ€å˜ä¸º resolvedï¼Œå°†å…¶çŠ¶æ€ä¿å­˜èµ·æ¥\n\t\t\t- new Promise then ... åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log('async1 success'); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- return 'async1 end'\n\t- async1().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log('srcipt end')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- .then(res => console.log(res))\n\t\t- res --> promise1 resolve\n\t- console.log('async1 success'); \n\t- res => console.log(res) res --> 'async1 end'\n\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å…­è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/478ab1a6c972bd17dab664ba479c1c2859767.png)\n\n\n5.7 é¢˜ç›®ä¸ƒ\n\n```javascript\nasync function async1 () {\n  console.log('async1 start');\n  await new Promise(resolve => {\n    console.log('promise1')\n    resolve('promise resolve')\n  })\n  console.log('async1 success');\n  return 'async1 end'\n}\nconsole.log('srcipt start')\nasync1().then(res => {\n  console.log(res)\n})\nnew Promise(resolve => {\n  console.log('promise2')\n  setTimeout(() => {\n    console.log('timer')\n  })\n})\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- console.log('srcipt start')\n\t- async1()\n\t\t- console.log('async1 start');\n\t\t- await new Promise ...\n\t\t\t- console.log('promise1')\n\t\t\t- å…¶ä¸­ promise çŠ¶æ€å˜ä¸º resolveï¼Œå°†å…¶ä¿å­˜èµ·æ¥\n\t\t- console.log('async1 success'); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- return 'async1 end'\n\t- async1().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç \n\t\t- console.log('promise2')\n\t\t- setTimeout ... åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- console.log('async1 success');\n\t- console.log(res) res --> 'async1 end'\n\t- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log('timer')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸ƒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/59c38ec9bef1877e27b64b056fd9258663945.png)\n\n5.8 é¢˜ç›®å…«\n\n```javascript\nasync function async1() {\n  console.log(\"async1 start\");\n  await async2();\n  console.log(\"async1 end\");\n}\n\nasync function async2() {\n  console.log(\"async2\");\n}\n\nconsole.log(\"script start\");\n\nsetTimeout(function() {\n  console.log(\"setTimeout\");\n}, 0);\n\nasync1();\n\nnew Promise(function(resolve) {\n  console.log(\"promise1\");\n  resolve();\n}).then(function() {\n  console.log(\"promise2\");\n});\nconsole.log('script end')\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- console.log(\"script start\");\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- async1()\n\t\t- console.log(\"async1 start\");\n\t\t- await async2();\n\t\t\t- console.log(\"async2\");\n\t\t- console.log(\"async1 end\"); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- new promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°\n\t\t- console.log(\"promise1\");\n\t\t- å…¶ä¸­ promise çŠ¶æ€æ”¹å˜ä¸º resolveï¼Œå°†å…¶ä¿å­˜\n\t- new promise then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log('script end')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- console.log(\"async1 end\");\n\t- new Promise then ... \n\t\t- console.log(\"promise2\");\n\t- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t\t- console.log(\"setTimeout\");\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å…«è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/05bcc26014cb3a56f1da38df3e28141974246.png)\n\n5.9 é¢˜ç›®ä¹\n\n```javascript\nasync function testSometing() {\n  console.log(\"æ‰§è¡ŒtestSometing\");\n  return \"testSometing\";\n}\n\nasync function testAsync() {\n  console.log(\"æ‰§è¡ŒtestAsync\");\n  return Promise.resolve(\"hello async\");\n}\n\nasync function test() {\n  console.log(\"test start...\");\n  const v1 = await testSometing();\n  console.log(v1);\n  const v2 = await testAsync();\n  console.log(v2);\n  console.log(v1, v2);\n}\n\ntest();\n\nvar promise = new Promise(resolve => {\n  console.log(\"promise start...\");\n  resolve(\"promise\");\n});\npromise.then(val => console.log(val));\n\nconsole.log(\"test end...\");\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- test()\n\t\t- console.log(\"test start...\");\n\t\t- await testSometing()\n\t\t\t- console.log(\"æ‰§è¡ŒtestSometing\");\n\t\t\t- \"testSometing\";\n\t\t\t- const v1 = \"testSometing\";\n\t\t- console.log(\"testSometing\"); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- await testAsync() å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log(v2); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log(v1, v2); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- new Promise, æ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç \n\t\t\t- console.log(\"promise start...\");\n\t\t\t- å…¶ promise çŠ¶æ€å˜ä¸º resolve,å°†å…¶ä¿å­˜\n\t\t- promise.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log(\"test end...\");\n\t\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t\t\t- console.log(\"testSometing\"); v1 --> \"testSometing\"\n\t\t\t- await testAsync() \n\t\t\t\t- console.log(\"æ‰§è¡ŒtestAsync\");\n\t\t\t\t- return Promise.resolve(\"hello async\");\n\t\t\t\t- Promise.resolve(\"hello async\") ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- console.log(v2); ... é‡æ–°å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- console.log(v1, v2); é‡æ–°å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- promise.then ... \n\t\t\t\t- console.log(val) val --> promise\n\t\t\t- Promise.resolve(\"hello async\") return \"hello async\"\n\t\t\t- v2 = \"hello async\"\n\t\t\t- console.log(v2);\n\t\t\t- console.log(\"hello async\");\n\t\t\t- console.log(v1, v2);\n\t\t\t\t- console.log(\"æ‰§è¡ŒtestAsync\", \"hello async\");\n\n\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¹è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/09e8b0ae4cadad1f803049e6545d73f091754.png)\n\n\t\n\n### async å¤„ç†é”™è¯¯\n6.1 **é¢˜ç›®ä¸€**\n\n```javascript\nasync function async1 () {\n  await async2();\n  console.log('async1');\n  return 'async1 success'\n}\nasync function async2 () {\n  return new Promise((resolve, reject) => {\n    console.log('async2')\n    reject('error')\n  })\n}\nasync1().then(res => console.log(res))\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- async1()\n\t\t- await async2();\n\t\t\t- new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°\n\t\t\t\t- console.log('async2')\n\t\t\t\t- reject('error') promise çŠ¶æ€å˜ä¸º reject,å°†å…¶ä¿å­˜èµ·æ¥ï¼Œå¹¶å‘ä¸ŠæŠ›\n\t\t\t\t- PromiseÂ {<rejected>: \"error\"}\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/b3955dc674cf405c9a60de9062b525c736256.png)\n\n\t\n6.2 é¢˜ç›®äºŒ\n\n```javascript\nasync function async1 () {\n  try {\n    await Promise.reject('error!!!')\n  } catch(e) {\n    console.log(e)\n  }\n  console.log('async1');\n  return Promise.resolve('async1 success')\n}\nasync1().then(res => console.log(res))\nconsole.log('script start')\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- async1()\n\t\t- Promise.reject('error!!!')\n\t\t\t- promise çŠ¶æ€å˜ä¸º rejectï¼Œå°†å…¶çŠ¶æ€ä¿å­˜èµ·æ¥ï¼Œå‘ä¸ŠæŠ›é”™\n\t\t- catch é”™è¯¯ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log('async1'); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- return Promise.resolve('async1 success')\n\t- async1().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log('script start')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- console.log(e) e --> 'error!!!'\n\t- console.log('async1');\n\t- console.log(res) res --> 'async1 success'\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/fc960e772e0fbca1fdf8640c8774999640316.png)\n\n\n### ç»¼åˆé¢˜\n\n7.1 é¢˜ç›®ä¸€\n\n```javascript\nconst first = () => (new Promise((resolve, reject) => {\n    console.log(3);\n    let p = new Promise((resolve, reject) => {\n        console.log(7);\n        setTimeout(() => {\n            console.log(5);\n            resolve(6);\n            console.log(p)\n        }, 0)\n        resolve(1);\n    });\n    resolve(2);\n    p.then((arg) => {\n        console.log(arg);\n    });\n}));\nfirst().then((arg) => {\n    console.log(arg);\n});\nconsole.log(4);\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- first()\n\t\t- return ä¸€ä¸ª promise å¯¹è±¡ã€‚å…ˆæ‰§è¡Œ new Promiseï¼Œè¯¥æ„é€ å‡½æ•°ä»£ç \n\t\t- console.log(3);\n\t\t- resolve(2)\n\t\t\t- è¯¥ promise çŠ¶æ€å˜ä¸º resolvedï¼Œä¿å­˜èµ·æ¥\n\t\t- p new Promise, æ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç \n\t\t\t-  console.log(7);\n\t\t\t-  setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t-  resolve(1);\n\t\t\t-  è¯¥ promise çŠ¶æ€å˜ä¸º resolve ,ä¿å­˜èµ·æ¥\n\t\t- p.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- first().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(4);\n\t- è¯¥å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç éƒ½æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- p.then\n\t- console.log(arg) arg --> 1\n\t- p.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log(arg) arg --> 2\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„ä»£ç éƒ½æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- setTimeout ...\n\t\t- console.log(5);\n\t\t- resolve(6); promise p çš„çŠ¶æ€å·²ç»æ”¹å˜ï¼Œæ— æ³•å†è¿›è¡Œæ›´æ”¹ï¼Œæ‰€ä»¥è¯¥è¡Œä»£ç ï¼Œæ— æ•ˆ\n\t\t- console.log(p) p --> 1\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/de321f1169135bf57ef98b6dd3346ada56428.png)\n\n\n7.2 é¢˜ç›®äºŒ\n\n```javascript\nconst async1 = async () => {\n  console.log('async1');\n  setTimeout(() => {\n    console.log('timer1')\n  }, 2000)\n  await new Promise(resolve => {\n    console.log('promise1')\n  })\n  console.log('async1 end')\n  return 'async1 success'\n} \nconsole.log('script start');\nasync1().then(res => console.log(res));\nconsole.log('script end');\nPromise.resolve(1)\n  .then(2)\n  .then(Promise.resolve(3))\n  .catch(4)\n  .then(res => console.log(res))\nsetTimeout(() => {\n  console.log('timer2')\n}, 1000)\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- console.log('script start');\n\t- async1()\n\t\t- console.log('async1');\n\t\t- setTimeout ... 2000å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- await new Promise\n\t\t\t- æ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç \n\t\t\t\t- console.log('promise1')\n\t\t- ç”±äºè¯¥ promise æ²¡æœ‰è¢« resolveã€rejectï¼Œä¸€ç›´å¤„åœ¨ pendingï¼Œå› æ­¤ åé¢çš„\n\t\t\t- console.log('async1 end') å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- return 'async1 success'\n\t\t\t- å‡ä¸æ‰§è¡Œ\n\t- async1().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log('script end');\n\t- Promise.resolve(1)\n\t\t- è¯¥ promie çŠ¶æ€å˜ä¸º1ï¼Œä¿å­˜èµ·æ¥\n\t- Promise.resolve(1).then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- setTimeout ... 1000å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- Promise.resolve(1).then ... \n\t\t- ç”±äº .then(2) .then(Promise.resolve(3)) .catch(4) ä¸€ä¸ªæ˜¯æ•°å­—ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡ï¼Œä¼šå‘ç”Ÿå€¼é€ä¼ ç°è±¡\n\t\t- console.log(res) res --> 1\n\t- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- setTimeout ... 1000\n\t\t- console.log('timer2')\n\t- setTimeout ... 2000\n\t\t- - console.log('timer1')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/18d87ace8b51f98e4e30f55c17d0c4ff93076.png)\n\n7.3 é¢˜ç›®ä¸‰\n\n```javascript\nconst p1 = new Promise((resolve) => {\n  setTimeout(() => {\n    resolve('resolve3');\n    console.log('timer1')\n  }, 0)\n  resolve('resovle1');\n  resolve('resolve2');\n}).then(res => {\n  console.log(res)\n  setTimeout(() => {\n    console.log(p1)\n  }, 1000)\n}).finally(res => {\n  console.log('finally', res)\n})\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç \n\t\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- resolve('resovle1');\n\t\t- promise çŠ¶æ€å˜ä¸º resolve1ï¼Œå¹¶ä¿å­˜èµ·æ¥\n\t- Promise.then ...\n\t\t- console.log(res) res --> 'resovle1'\n\t\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- Promise.finally ...\n\t\t- console.log('finally', res) res --> undefined\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- resolve('resolve3'); promise çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œæ— æ³•æ›´æ”¹\n\t- console.log('timer1')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log(p1) p1 --> .finallyçš„è¿”å›å€¼ --> undefined\n\n- ç»“è®º\n\t- **finally ä¸ç®¡ Promise çš„çŠ¶æ€æ˜¯ resolved è¿˜æ˜¯ rejected éƒ½ä¼šæ‰§è¡Œï¼Œä¸”å®ƒçš„å›è°ƒå‡½æ•°æ˜¯æ¥æ”¶ä¸åˆ° Promise çš„ç»“æœçš„**ï¼Œæ‰€ä»¥ finally() ä¸­çš„ res æ˜¯ä¸€ä¸ªè¿·æƒ‘é¡¹\n\t\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/7be692142d758f1d65ad549a1b106f4146102.png)\n\n\t\n## å‚è€ƒæ–‡çŒ®\n- [é¢˜ç›®æ¥æº](https://juejin.im/post/5e58c618e51d4526ed66b5cf)\n\t\t\t\t\n\t\t\t\t\n## å†™åœ¨åé¢\n\t\t\t\t\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","source":"_posts/Javascrtip-è¿è¡Œæœºåˆ¶ï¼ˆäºŒï¼‰.md","raw":"---\ntitle: Javascript-è¿è¡Œæœºåˆ¶ï¼ˆäºŒï¼‰\ndate: 2020-05-02 22:10:38\ntags: \n- å‰ç«¯æ¦‚å¿µ\ncategories:\n- å‰ç«¯æ¦‚å¿µ\ndescription:\n- Javascript -- Expression\n\n\n---\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- å—¯ï¼Œå‘ç° è¿è¡Œæœºåˆ¶ çš„é¢è¯•é¢˜æ˜¯çœŸçš„å¤šã€‚ã€‚ğŸ˜“\n- é‚£è¿™å°±æ˜¯ï¼Œæœ€æœ«ç¯‡å§\n- åŠ æ²¹ Elle ğŸ¤¦â€â™€ï¸\n- äº”ä¸€å€’è®¡æ—¶ 2 å¤©\n\n<!-- more -->\n\n## å®è·µè®°å½•\n\n### async / await \n\n5.1 é¢˜ç›®ä¸€\n\n```javascript\nasync function async1() {\n  console.log(\"async1 start\");\n  await async2();\n  console.log(\"async1 end\");\n}\nasync function async2() {\n  console.log(\"async2\");\n}\nasync1();\nconsole.log('start')\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t- async1();\n\t\t- console.log(\"async1 start\");\n\t\t- await async2();\n\t\t\t- ç­‰å¾…æ‰§è¡Œ async2 ç»“æœ\n\t\t\t- console.log(\"async2\");\n\t\t- console.log(\"async1 end\"); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log('start')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— \n\t- console.log(\"async1 end\");\n\n\t\n- ç»“è®º\n\t- åœ¨è¿™é‡Œï¼Œå¯ä»¥ç†è§£ä¸ºã€Œç´§è·Ÿç€awaitåé¢çš„è¯­å¥ç›¸å½“äºæ”¾åˆ°äº†new Promiseä¸­ï¼Œä¸‹ä¸€è¡ŒåŠä¹‹åçš„è¯­å¥ç›¸å½“äºæ”¾åœ¨Promise.thenä¸­ã€\n\n- ç­‰åŒäº\n\t\n\t```javascript\n\tasync function async1() {\n\t  console.log(\"async1 start\");\n\t  // åŸæ¥ä»£ç \n\t  // await async2();\n\t  // console.log(\"async1 end\");\n\t  \n\t  // è½¬æ¢åä»£ç \n\t  new Promise(resolve => {\n\t    console.log(\"async2\")\n\t    resolve()\n\t  }).then(res => console.log(\"async1 end\"))\n\t}\n\tasync function async2() {\n\t  console.log(\"async2\");\n\t}\n\tasync1();\n\tconsole.log(\"start\")\n\n\t```\n\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/f08b1b409f667c37f2a9dae1bf0b491e36782.png)\n\n5.2 é¢˜ç›®äºŒ\n\n```javascript\nasync function async1() {\n  console.log(\"async1 start\");\n  await async2();\n  console.log(\"async1 end\");\n}\nasync function async2() {\n  setTimeout(() => {\n    console.log('timer')\n  }, 0)\n  console.log(\"async2\");\n}\nasync1();\nconsole.log(\"start\")\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- async1();\n\t\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(\"async1 start\");\n\t\t- await async2();\n\t\t\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- console.log(\"async2\");\n\t\t- console.log(\"async1 end\"); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log(\"start\")\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log(\"async1 end\");\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log('timer')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/ef5bbc4448d8cf8a4e6e7eb3d481257d43632.png)\n\n\t\n5.3 é¢˜ç›®ä¸‰\n\n```javascript\nasync function async1() {\n  console.log(\"async1 start\");\n  await async2();\n  console.log(\"async1 end\");\n  setTimeout(() => {\n    console.log('timer1')\n  }, 0)\n}\nasync function async2() {\n  setTimeout(() => {\n    console.log('timer2')\n  }, 0)\n  console.log(\"async2\");\n}\nasync1();\nsetTimeout(() => {\n  console.log('timer3')\n}, 0)\nconsole.log(\"start\")\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- async1();\n\t\t- console.log(\"async1 start\");\n\t\t- await async2();\n\t\t\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- console.log(\"async2\");\n\t\t- console.log(\"async1 end\"); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- setTimeout ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log(\"start\")\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç å·²ç»æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- console.log(\"async1 end\");\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log('timer2');\n\t- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log('timer3')\n\t- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log('timer1')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/40ff5c3620b6ef956afd99a895080cee58816.png)\n\n\n5.4 é¢˜ç›®å››\n\n```javascript\nasync function fn () {\n  // return await 1234\n  // ç­‰åŒäº\n  return 123\n}\nfn().then(res => console.log(res))\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- fn()\n\t\t- return 123\n\t- console.log(res) res --> 123\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å››è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/01d7e322293346a15fd0c97cb6167dee21159.png)\n\n5.5 **é¢˜ç›®äº”**\n\n```javascript\nasync function async1 () {\n  console.log('async1 start');\n  await new Promise(resolve => {\n    console.log('promise1')\n  })\n  console.log('async1 success');\n  return 'async1 end'\n}\nconsole.log('srcipt start')\nasync1().then(res => console.log(res))\nconsole.log('srcipt end')\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- console.log('srcipt start')\n\t- async1()\n\t\t- console.log('async1 start');\n\t\t- new Promise ... ç­‰å¾…æ‰§è¡Œ\n\t\t\t- console.log('promise1')\n\t\t\t- ç”±äº promise å¹¶æ²¡æœ‰ resolvedã€rejectedï¼Œæ‰€ä»¥ä¸€ç›´å¤„åœ¨ pending çŠ¶æ€ï¼Œæ‰€ä»¥ ä¼šä¸€ç›´ await ï¼Œawait åçš„å†…å®¹ä¹ŸåŒ…æ‹¬ async1 åé¢çš„ thenï¼Œéƒ½ä¸ä¼šæ‰§è¡Œ\n\t- console.log('srcipt end')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äº”è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/6da017ef5e2bef76433a90be0f7804c343869.png)\n\n5.6 é¢˜ç›®å…­\n\n```javascript\nasync function async1 () {\n  console.log('async1 start');\n  await new Promise(resolve => {\n    console.log('promise1')\n    resolve('promise1 resolve')\n  }).then(res => console.log(res))\n  console.log('async1 success');\n  return 'async1 end'\n}\nconsole.log('srcipt start')\nasync1().then(res => console.log(res))\nconsole.log('srcipt end')\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- console.log('srcipt start')\n\t- async1()\n\t\t- console.log('async1 start');\n\t\t- await new Promise ... ç­‰å¾… promise æ‰§è¡Œ\n\t\t\t- console.log('promise1')\n\t\t\t- å…¶ä¸­ promise çŠ¶æ€å˜ä¸º resolvedï¼Œå°†å…¶çŠ¶æ€ä¿å­˜èµ·æ¥\n\t\t\t- new Promise then ... åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log('async1 success'); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- return 'async1 end'\n\t- async1().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log('srcipt end')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- .then(res => console.log(res))\n\t\t- res --> promise1 resolve\n\t- console.log('async1 success'); \n\t- res => console.log(res) res --> 'async1 end'\n\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å…­è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/478ab1a6c972bd17dab664ba479c1c2859767.png)\n\n\n5.7 é¢˜ç›®ä¸ƒ\n\n```javascript\nasync function async1 () {\n  console.log('async1 start');\n  await new Promise(resolve => {\n    console.log('promise1')\n    resolve('promise resolve')\n  })\n  console.log('async1 success');\n  return 'async1 end'\n}\nconsole.log('srcipt start')\nasync1().then(res => {\n  console.log(res)\n})\nnew Promise(resolve => {\n  console.log('promise2')\n  setTimeout(() => {\n    console.log('timer')\n  })\n})\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- console.log('srcipt start')\n\t- async1()\n\t\t- console.log('async1 start');\n\t\t- await new Promise ...\n\t\t\t- console.log('promise1')\n\t\t\t- å…¶ä¸­ promise çŠ¶æ€å˜ä¸º resolveï¼Œå°†å…¶ä¿å­˜èµ·æ¥\n\t\t- console.log('async1 success'); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- return 'async1 end'\n\t- async1().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç \n\t\t- console.log('promise2')\n\t\t- setTimeout ... åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- console.log('async1 success');\n\t- console.log(res) res --> 'async1 end'\n\t- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log('timer')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸ƒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/59c38ec9bef1877e27b64b056fd9258663945.png)\n\n5.8 é¢˜ç›®å…«\n\n```javascript\nasync function async1() {\n  console.log(\"async1 start\");\n  await async2();\n  console.log(\"async1 end\");\n}\n\nasync function async2() {\n  console.log(\"async2\");\n}\n\nconsole.log(\"script start\");\n\nsetTimeout(function() {\n  console.log(\"setTimeout\");\n}, 0);\n\nasync1();\n\nnew Promise(function(resolve) {\n  console.log(\"promise1\");\n  resolve();\n}).then(function() {\n  console.log(\"promise2\");\n});\nconsole.log('script end')\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- console.log(\"script start\");\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- async1()\n\t\t- console.log(\"async1 start\");\n\t\t- await async2();\n\t\t\t- console.log(\"async2\");\n\t\t- console.log(\"async1 end\"); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- new promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°\n\t\t- console.log(\"promise1\");\n\t\t- å…¶ä¸­ promise çŠ¶æ€æ”¹å˜ä¸º resolveï¼Œå°†å…¶ä¿å­˜\n\t- new promise then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log('script end')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- console.log(\"async1 end\");\n\t- new Promise then ... \n\t\t- console.log(\"promise2\");\n\t- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t\t- console.log(\"setTimeout\");\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å…«è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/05bcc26014cb3a56f1da38df3e28141974246.png)\n\n5.9 é¢˜ç›®ä¹\n\n```javascript\nasync function testSometing() {\n  console.log(\"æ‰§è¡ŒtestSometing\");\n  return \"testSometing\";\n}\n\nasync function testAsync() {\n  console.log(\"æ‰§è¡ŒtestAsync\");\n  return Promise.resolve(\"hello async\");\n}\n\nasync function test() {\n  console.log(\"test start...\");\n  const v1 = await testSometing();\n  console.log(v1);\n  const v2 = await testAsync();\n  console.log(v2);\n  console.log(v1, v2);\n}\n\ntest();\n\nvar promise = new Promise(resolve => {\n  console.log(\"promise start...\");\n  resolve(\"promise\");\n});\npromise.then(val => console.log(val));\n\nconsole.log(\"test end...\");\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- test()\n\t\t- console.log(\"test start...\");\n\t\t- await testSometing()\n\t\t\t- console.log(\"æ‰§è¡ŒtestSometing\");\n\t\t\t- \"testSometing\";\n\t\t\t- const v1 = \"testSometing\";\n\t\t- console.log(\"testSometing\"); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- await testAsync() å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log(v2); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log(v1, v2); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- new Promise, æ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç \n\t\t\t- console.log(\"promise start...\");\n\t\t\t- å…¶ promise çŠ¶æ€å˜ä¸º resolve,å°†å…¶ä¿å­˜\n\t\t- promise.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log(\"test end...\");\n\t\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t\t\t- console.log(\"testSometing\"); v1 --> \"testSometing\"\n\t\t\t- await testAsync() \n\t\t\t\t- console.log(\"æ‰§è¡ŒtestAsync\");\n\t\t\t\t- return Promise.resolve(\"hello async\");\n\t\t\t\t- Promise.resolve(\"hello async\") ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- console.log(v2); ... é‡æ–°å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- console.log(v1, v2); é‡æ–°å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- promise.then ... \n\t\t\t\t- console.log(val) val --> promise\n\t\t\t- Promise.resolve(\"hello async\") return \"hello async\"\n\t\t\t- v2 = \"hello async\"\n\t\t\t- console.log(v2);\n\t\t\t- console.log(\"hello async\");\n\t\t\t- console.log(v1, v2);\n\t\t\t\t- console.log(\"æ‰§è¡ŒtestAsync\", \"hello async\");\n\n\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¹è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/09e8b0ae4cadad1f803049e6545d73f091754.png)\n\n\t\n\n### async å¤„ç†é”™è¯¯\n6.1 **é¢˜ç›®ä¸€**\n\n```javascript\nasync function async1 () {\n  await async2();\n  console.log('async1');\n  return 'async1 success'\n}\nasync function async2 () {\n  return new Promise((resolve, reject) => {\n    console.log('async2')\n    reject('error')\n  })\n}\nasync1().then(res => console.log(res))\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- async1()\n\t\t- await async2();\n\t\t\t- new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°\n\t\t\t\t- console.log('async2')\n\t\t\t\t- reject('error') promise çŠ¶æ€å˜ä¸º reject,å°†å…¶ä¿å­˜èµ·æ¥ï¼Œå¹¶å‘ä¸ŠæŠ›\n\t\t\t\t- PromiseÂ {<rejected>: \"error\"}\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/b3955dc674cf405c9a60de9062b525c736256.png)\n\n\t\n6.2 é¢˜ç›®äºŒ\n\n```javascript\nasync function async1 () {\n  try {\n    await Promise.reject('error!!!')\n  } catch(e) {\n    console.log(e)\n  }\n  console.log('async1');\n  return Promise.resolve('async1 success')\n}\nasync1().then(res => console.log(res))\nconsole.log('script start')\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- async1()\n\t\t- Promise.reject('error!!!')\n\t\t\t- promise çŠ¶æ€å˜ä¸º rejectï¼Œå°†å…¶çŠ¶æ€ä¿å­˜èµ·æ¥ï¼Œå‘ä¸ŠæŠ›é”™\n\t\t- catch é”™è¯¯ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log('async1'); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- return Promise.resolve('async1 success')\n\t- async1().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log('script start')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- console.log(e) e --> 'error!!!'\n\t- console.log('async1');\n\t- console.log(res) res --> 'async1 success'\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/fc960e772e0fbca1fdf8640c8774999640316.png)\n\n\n### ç»¼åˆé¢˜\n\n7.1 é¢˜ç›®ä¸€\n\n```javascript\nconst first = () => (new Promise((resolve, reject) => {\n    console.log(3);\n    let p = new Promise((resolve, reject) => {\n        console.log(7);\n        setTimeout(() => {\n            console.log(5);\n            resolve(6);\n            console.log(p)\n        }, 0)\n        resolve(1);\n    });\n    resolve(2);\n    p.then((arg) => {\n        console.log(arg);\n    });\n}));\nfirst().then((arg) => {\n    console.log(arg);\n});\nconsole.log(4);\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- first()\n\t\t- return ä¸€ä¸ª promise å¯¹è±¡ã€‚å…ˆæ‰§è¡Œ new Promiseï¼Œè¯¥æ„é€ å‡½æ•°ä»£ç \n\t\t- console.log(3);\n\t\t- resolve(2)\n\t\t\t- è¯¥ promise çŠ¶æ€å˜ä¸º resolvedï¼Œä¿å­˜èµ·æ¥\n\t\t- p new Promise, æ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç \n\t\t\t-  console.log(7);\n\t\t\t-  setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t-  resolve(1);\n\t\t\t-  è¯¥ promise çŠ¶æ€å˜ä¸º resolve ,ä¿å­˜èµ·æ¥\n\t\t- p.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- first().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(4);\n\t- è¯¥å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç éƒ½æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- p.then\n\t- console.log(arg) arg --> 1\n\t- p.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log(arg) arg --> 2\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„ä»£ç éƒ½æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- setTimeout ...\n\t\t- console.log(5);\n\t\t- resolve(6); promise p çš„çŠ¶æ€å·²ç»æ”¹å˜ï¼Œæ— æ³•å†è¿›è¡Œæ›´æ”¹ï¼Œæ‰€ä»¥è¯¥è¡Œä»£ç ï¼Œæ— æ•ˆ\n\t\t- console.log(p) p --> 1\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/de321f1169135bf57ef98b6dd3346ada56428.png)\n\n\n7.2 é¢˜ç›®äºŒ\n\n```javascript\nconst async1 = async () => {\n  console.log('async1');\n  setTimeout(() => {\n    console.log('timer1')\n  }, 2000)\n  await new Promise(resolve => {\n    console.log('promise1')\n  })\n  console.log('async1 end')\n  return 'async1 success'\n} \nconsole.log('script start');\nasync1().then(res => console.log(res));\nconsole.log('script end');\nPromise.resolve(1)\n  .then(2)\n  .then(Promise.resolve(3))\n  .catch(4)\n  .then(res => console.log(res))\nsetTimeout(() => {\n  console.log('timer2')\n}, 1000)\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- console.log('script start');\n\t- async1()\n\t\t- console.log('async1');\n\t\t- setTimeout ... 2000å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- await new Promise\n\t\t\t- æ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç \n\t\t\t\t- console.log('promise1')\n\t\t- ç”±äºè¯¥ promise æ²¡æœ‰è¢« resolveã€rejectï¼Œä¸€ç›´å¤„åœ¨ pendingï¼Œå› æ­¤ åé¢çš„\n\t\t\t- console.log('async1 end') å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- return 'async1 success'\n\t\t\t- å‡ä¸æ‰§è¡Œ\n\t- async1().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log('script end');\n\t- Promise.resolve(1)\n\t\t- è¯¥ promie çŠ¶æ€å˜ä¸º1ï¼Œä¿å­˜èµ·æ¥\n\t- Promise.resolve(1).then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- setTimeout ... 1000å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- Promise.resolve(1).then ... \n\t\t- ç”±äº .then(2) .then(Promise.resolve(3)) .catch(4) ä¸€ä¸ªæ˜¯æ•°å­—ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡ï¼Œä¼šå‘ç”Ÿå€¼é€ä¼ ç°è±¡\n\t\t- console.log(res) res --> 1\n\t- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- setTimeout ... 1000\n\t\t- console.log('timer2')\n\t- setTimeout ... 2000\n\t\t- - console.log('timer1')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/18d87ace8b51f98e4e30f55c17d0c4ff93076.png)\n\n7.3 é¢˜ç›®ä¸‰\n\n```javascript\nconst p1 = new Promise((resolve) => {\n  setTimeout(() => {\n    resolve('resolve3');\n    console.log('timer1')\n  }, 0)\n  resolve('resovle1');\n  resolve('resolve2');\n}).then(res => {\n  console.log(res)\n  setTimeout(() => {\n    console.log(p1)\n  }, 1000)\n}).finally(res => {\n  console.log('finally', res)\n})\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç \n\t\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- resolve('resovle1');\n\t\t- promise çŠ¶æ€å˜ä¸º resolve1ï¼Œå¹¶ä¿å­˜èµ·æ¥\n\t- Promise.then ...\n\t\t- console.log(res) res --> 'resovle1'\n\t\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- Promise.finally ...\n\t\t- console.log('finally', res) res --> undefined\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- resolve('resolve3'); promise çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œæ— æ³•æ›´æ”¹\n\t- console.log('timer1')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log(p1) p1 --> .finallyçš„è¿”å›å€¼ --> undefined\n\n- ç»“è®º\n\t- **finally ä¸ç®¡ Promise çš„çŠ¶æ€æ˜¯ resolved è¿˜æ˜¯ rejected éƒ½ä¼šæ‰§è¡Œï¼Œä¸”å®ƒçš„å›è°ƒå‡½æ•°æ˜¯æ¥æ”¶ä¸åˆ° Promise çš„ç»“æœçš„**ï¼Œæ‰€ä»¥ finally() ä¸­çš„ res æ˜¯ä¸€ä¸ªè¿·æƒ‘é¡¹\n\t\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/7be692142d758f1d65ad549a1b106f4146102.png)\n\n\t\n## å‚è€ƒæ–‡çŒ®\n- [é¢˜ç›®æ¥æº](https://juejin.im/post/5e58c618e51d4526ed66b5cf)\n\t\t\t\t\n\t\t\t\t\n## å†™åœ¨åé¢\n\t\t\t\t\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","slug":"Javascrtip-è¿è¡Œæœºåˆ¶ï¼ˆäºŒï¼‰","published":1,"updated":"2020-10-27T15:21:11.262Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7s0013fw9ka0z6et1n","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å—¯ï¼Œå‘ç° è¿è¡Œæœºåˆ¶ çš„é¢è¯•é¢˜æ˜¯çœŸçš„å¤šã€‚ã€‚ğŸ˜“</li>\n<li>é‚£è¿™å°±æ˜¯ï¼Œæœ€æœ«ç¯‡å§</li>\n<li>åŠ æ²¹ Elle ğŸ¤¦â€â™€ï¸</li>\n<li>äº”ä¸€å€’è®¡æ—¶ 2 å¤©</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"å®è·µè®°å½•\"><a href=\"#å®è·µè®°å½•\" class=\"headerlink\" title=\"å®è·µè®°å½•\"></a>å®è·µè®°å½•</h2><h3 id=\"async-await\"><a href=\"#async-await\" class=\"headerlink\" title=\"async / await\"></a>async / await</h3><p>5.1 é¢˜ç›®ä¸€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 start\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> async2();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 end\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async2\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">async1();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆ†æ<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç </li>\n<li>async1();<ul>\n<li>console.log(â€œasync1 startâ€);</li>\n<li>await async2();<ul>\n<li>ç­‰å¾…æ‰§è¡Œ async2 ç»“æœ</li>\n<li>console.log(â€œasync2â€);</li>\n</ul>\n</li>\n<li>console.log(â€œasync1 endâ€); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>console.log(â€˜startâ€™)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— </li>\n<li>console.log(â€œasync1 endâ€);</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>ç»“è®º</p>\n<ul>\n<li>åœ¨è¿™é‡Œï¼Œå¯ä»¥ç†è§£ä¸ºã€Œç´§è·Ÿç€awaitåé¢çš„è¯­å¥ç›¸å½“äºæ”¾åˆ°äº†new Promiseä¸­ï¼Œä¸‹ä¸€è¡ŒåŠä¹‹åçš„è¯­å¥ç›¸å½“äºæ”¾åœ¨Promise.thenä¸­ã€</li>\n</ul>\n</li>\n<li><p>ç­‰åŒäº</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 start\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// åŸæ¥ä»£ç </span></span><br><span class=\"line\">  <span class=\"comment\">// await async2();</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(\"async1 end\");</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// è½¬æ¢åä»£ç </span></span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async2\"</span>)</span><br><span class=\"line\">    resolve()</span><br><span class=\"line\">  &#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 end\"</span>))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async2\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">async1();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"start\"</span>)</span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/f08b1b409f667c37f2a9dae1bf0b491e36782.png\" alt=\"é¢˜ç›®ä¸€è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 start\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> async2();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 end\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async2\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">async1();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"start\"</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>async1();<ul>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç </li>\n<li>console.log(â€œasync1 startâ€);</li>\n<li>await async2();<ul>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€œasync2â€);</li>\n</ul>\n</li>\n<li>console.log(â€œasync1 endâ€); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>console.log(â€œstartâ€)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—<ul>\n<li>console.log(â€œasync1 endâ€);</li>\n</ul>\n</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(â€˜timerâ€™)</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/ef5bbc4448d8cf8a4e6e7eb3d481257d43632.png\" alt=\"é¢˜ç›®äºŒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.3 é¢˜ç›®ä¸‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 start\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> async2();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 end\"</span>);</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer2'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async2\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">async1();</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer3'</span>)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"start\"</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>async1();<ul>\n<li>console.log(â€œasync1 startâ€);</li>\n<li>await async2();<ul>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€œasync2â€);</li>\n</ul>\n</li>\n<li>console.log(â€œasync1 endâ€); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€œstartâ€)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç å·²ç»æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>console.log(â€œasync1 endâ€);</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(â€˜timer2â€™);</li>\n<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(â€˜timer3â€™)</li>\n<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(â€˜timer1â€™)</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/40ff5c3620b6ef956afd99a895080cee58816.png\" alt=\"é¢˜ç›®ä¸‰è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.4 é¢˜ç›®å››</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// return await 1234</span></span><br><span class=\"line\">  <span class=\"comment\">// ç­‰åŒäº</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">123</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fn().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>fn()<ul>\n<li>return 123</li>\n</ul>\n</li>\n<li>console.log(res) res â€“&gt; 123</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/01d7e322293346a15fd0c97cb6167dee21159.png\" alt=\"é¢˜ç›®å››è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.5 <strong>é¢˜ç›®äº”</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 start'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 success'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async1 end'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'srcipt start'</span>)</span><br><span class=\"line\">async1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'srcipt end'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>console.log(â€˜srcipt startâ€™)</li>\n<li>async1()<ul>\n<li>console.log(â€˜async1 startâ€™);</li>\n<li>new Promise â€¦ ç­‰å¾…æ‰§è¡Œ<ul>\n<li>console.log(â€˜promise1â€™)</li>\n<li>ç”±äº promise å¹¶æ²¡æœ‰ resolvedã€rejectedï¼Œæ‰€ä»¥ä¸€ç›´å¤„åœ¨ pending çŠ¶æ€ï¼Œæ‰€ä»¥ ä¼šä¸€ç›´ await ï¼Œawait åçš„å†…å®¹ä¹ŸåŒ…æ‹¬ async1 åé¢çš„ thenï¼Œéƒ½ä¸ä¼šæ‰§è¡Œ</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>console.log(â€˜srcipt endâ€™)</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6da017ef5e2bef76433a90be0f7804c343869.png\" alt=\"é¢˜ç›®äº”è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.6 é¢˜ç›®å…­</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 start'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">    resolve(<span class=\"string\">'promise1 resolve'</span>)</span><br><span class=\"line\">  &#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 success'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async1 end'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'srcipt start'</span>)</span><br><span class=\"line\">async1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'srcipt end'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆ†æ<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>console.log(â€˜srcipt startâ€™)</li>\n<li>async1()<ul>\n<li>console.log(â€˜async1 startâ€™);</li>\n<li>await new Promise â€¦ ç­‰å¾… promise æ‰§è¡Œ<ul>\n<li>console.log(â€˜promise1â€™)</li>\n<li>å…¶ä¸­ promise çŠ¶æ€å˜ä¸º resolvedï¼Œå°†å…¶çŠ¶æ€ä¿å­˜èµ·æ¥</li>\n<li>new Promise then â€¦ åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>console.log(â€˜async1 successâ€™); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>return â€˜async1 endâ€™</li>\n</ul>\n</li>\n<li>async1().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€˜srcipt endâ€™)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>.then(res =&gt; console.log(res))<ul>\n<li>res â€“&gt; promise1 resolve</li>\n</ul>\n</li>\n<li>console.log(â€˜async1 successâ€™); </li>\n<li>res =&gt; console.log(res) res â€“&gt; â€˜async1 endâ€™</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/478ab1a6c972bd17dab664ba479c1c2859767.png\" alt=\"é¢˜ç›®å…­è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.7 é¢˜ç›®ä¸ƒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 start'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">    resolve(<span class=\"string\">'promise resolve'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 success'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async1 end'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'srcipt start'</span>)</span><br><span class=\"line\">async1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>)</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>console.log(â€˜srcipt startâ€™)</li>\n<li>async1()<ul>\n<li>console.log(â€˜async1 startâ€™);</li>\n<li>await new Promise â€¦<ul>\n<li>console.log(â€˜promise1â€™)</li>\n<li>å…¶ä¸­ promise çŠ¶æ€å˜ä¸º resolveï¼Œå°†å…¶ä¿å­˜èµ·æ¥</li>\n</ul>\n</li>\n<li>console.log(â€˜async1 successâ€™); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>return â€˜async1 endâ€™</li>\n</ul>\n</li>\n<li>async1().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç <ul>\n<li>console.log(â€˜promise2â€™)</li>\n<li>setTimeout â€¦ åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>console.log(â€˜async1 successâ€™);</li>\n<li>console.log(res) res â€“&gt; â€˜async1 endâ€™</li>\n<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(â€˜timerâ€™)</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/59c38ec9bef1877e27b64b056fd9258663945.png\" alt=\"é¢˜ç›®ä¸ƒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.8 é¢˜ç›®å…«</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 start\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> async2();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 end\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async2\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"script start\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"setTimeout\"</span>);</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">async1();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise1\"</span>);</span><br><span class=\"line\">  resolve();</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise2\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script end'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>console.log(â€œscript startâ€);</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>async1()<ul>\n<li>console.log(â€œasync1 startâ€);</li>\n<li>await async2();<ul>\n<li>console.log(â€œasync2â€);</li>\n</ul>\n</li>\n<li>console.log(â€œasync1 endâ€); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>new promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°<ul>\n<li>console.log(â€œpromise1â€);</li>\n<li>å…¶ä¸­ promise çŠ¶æ€æ”¹å˜ä¸º resolveï¼Œå°†å…¶ä¿å­˜</li>\n</ul>\n</li>\n<li>new promise then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€˜script endâ€™)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>console.log(â€œasync1 endâ€);</li>\n<li>new Promise then â€¦ <ul>\n<li>console.log(â€œpromise2â€);</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡<ul>\n<li>console.log(â€œsetTimeoutâ€);</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/05bcc26014cb3a56f1da38df3e28141974246.png\" alt=\"é¢˜ç›®å…«è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.9 é¢˜ç›®ä¹</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">testSometing</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"æ‰§è¡ŒtestSometing\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"testSometing\"</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">testAsync</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"æ‰§è¡ŒtestAsync\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">\"hello async\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"test start...\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> v1 = <span class=\"keyword\">await</span> testSometing();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(v1);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> v2 = <span class=\"keyword\">await</span> testAsync();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(v2);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(v1, v2);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise start...\"</span>);</span><br><span class=\"line\">  resolve(<span class=\"string\">\"promise\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">promise.then(<span class=\"function\"><span class=\"params\">val</span> =&gt;</span> <span class=\"built_in\">console</span>.log(val));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"test end...\"</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆ†æ<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>test()<ul>\n<li>console.log(â€œtest startâ€¦â€);</li>\n<li>await testSometing()<ul>\n<li>console.log(â€œæ‰§è¡ŒtestSometingâ€);</li>\n<li>â€œtestSometingâ€;</li>\n<li>const v1 = â€œtestSometingâ€;</li>\n</ul>\n</li>\n<li>console.log(â€œtestSometingâ€); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>await testAsync() å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(v2); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(v1, v2); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>new Promise, æ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç <ul>\n<li>console.log(â€œpromise startâ€¦â€);</li>\n<li>å…¶ promise çŠ¶æ€å˜ä¸º resolve,å°†å…¶ä¿å­˜</li>\n</ul>\n</li>\n<li>promise.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€œtest endâ€¦â€);</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡<ul>\n<li>console.log(â€œtestSometingâ€); v1 â€“&gt; â€œtestSometingâ€</li>\n<li>await testAsync() <ul>\n<li>console.log(â€œæ‰§è¡ŒtestAsyncâ€);</li>\n<li>return Promise.resolve(â€œhello asyncâ€);</li>\n<li>Promise.resolve(â€œhello asyncâ€) â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>console.log(v2); â€¦ é‡æ–°å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(v1, v2); é‡æ–°å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>promise.then â€¦ <ul>\n<li>console.log(val) val â€“&gt; promise</li>\n</ul>\n</li>\n<li>Promise.resolve(â€œhello asyncâ€) return â€œhello asyncâ€</li>\n<li>v2 = â€œhello asyncâ€</li>\n<li>console.log(v2);</li>\n<li>console.log(â€œhello asyncâ€);</li>\n<li>console.log(v1, v2);<ul>\n<li>console.log(â€œæ‰§è¡ŒtestAsyncâ€, â€œhello asyncâ€);</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/09e8b0ae4cadad1f803049e6545d73f091754.png\" alt=\"é¢˜ç›®ä¹è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"async-å¤„ç†é”™è¯¯\"><a href=\"#async-å¤„ç†é”™è¯¯\" class=\"headerlink\" title=\"async å¤„ç†é”™è¯¯\"></a>async å¤„ç†é”™è¯¯</h3><p>6.1 <strong>é¢˜ç›®ä¸€</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">await</span> async2();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async1 success'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'async2'</span>)</span><br><span class=\"line\">    reject(<span class=\"string\">'error'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">async1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>async1()<ul>\n<li>await async2();<ul>\n<li>new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°<ul>\n<li>console.log(â€˜async2â€™)</li>\n<li>reject(â€˜errorâ€™) promise çŠ¶æ€å˜ä¸º reject,å°†å…¶ä¿å­˜èµ·æ¥ï¼Œå¹¶å‘ä¸ŠæŠ›</li>\n<li>Promise {<rejected>: â€œerrorâ€}</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/b3955dc674cf405c9a60de9062b525c736256.png\" alt=\"é¢˜ç›®ä¸€è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>6.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.reject(<span class=\"string\">'error!!!'</span>)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span>(e) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(e)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'async1 success'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">async1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script start'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>async1()<ul>\n<li>Promise.reject(â€˜error!!!â€™)<ul>\n<li>promise çŠ¶æ€å˜ä¸º rejectï¼Œå°†å…¶çŠ¶æ€ä¿å­˜èµ·æ¥ï¼Œå‘ä¸ŠæŠ›é”™</li>\n</ul>\n</li>\n<li>catch é”™è¯¯ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€˜async1â€™); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>return Promise.resolve(â€˜async1 successâ€™)</li>\n</ul>\n</li>\n<li>async1().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€˜script startâ€™)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>console.log(e) e â€“&gt; â€˜error!!!â€™</li>\n<li>console.log(â€˜async1â€™);</li>\n<li>console.log(res) res â€“&gt; â€˜async1 successâ€™</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/fc960e772e0fbca1fdf8640c8774999640316.png\" alt=\"é¢˜ç›®äºŒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç»¼åˆé¢˜\"><a href=\"#ç»¼åˆé¢˜\" class=\"headerlink\" title=\"ç»¼åˆé¢˜\"></a>ç»¼åˆé¢˜</h3><p>7.1 é¢˜ç›®ä¸€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> first = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"function\">(<span class=\"params\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>((resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"number\">7</span>);</span><br><span class=\"line\">        setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"number\">5</span>);</span><br><span class=\"line\">            resolve(<span class=\"number\">6</span>);</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(p)</span><br><span class=\"line\">        &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">        resolve(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    resolve(<span class=\"number\">2</span>);</span><br><span class=\"line\">    p.then(<span class=\"function\">(<span class=\"params\">arg</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(arg);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;));</span><br><span class=\"line\">first().then(<span class=\"function\">(<span class=\"params\">arg</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(arg);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>first()<ul>\n<li>return ä¸€ä¸ª promise å¯¹è±¡ã€‚å…ˆæ‰§è¡Œ new Promiseï¼Œè¯¥æ„é€ å‡½æ•°ä»£ç </li>\n<li>console.log(3);</li>\n<li>resolve(2)<ul>\n<li>è¯¥ promise çŠ¶æ€å˜ä¸º resolvedï¼Œä¿å­˜èµ·æ¥</li>\n</ul>\n</li>\n<li>p new Promise, æ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç <ul>\n<li>console.log(7);</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>resolve(1);</li>\n<li>è¯¥ promise çŠ¶æ€å˜ä¸º resolve ,ä¿å­˜èµ·æ¥</li>\n</ul>\n</li>\n<li>p.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>first().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(4);</li>\n</ul>\n</li>\n<li>è¯¥å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç éƒ½æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>p.then</li>\n<li>console.log(arg) arg â€“&gt; 1</li>\n<li>p.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(arg) arg â€“&gt; 2</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„ä»£ç éƒ½æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>setTimeout â€¦<ul>\n<li>console.log(5);</li>\n<li>resolve(6); promise p çš„çŠ¶æ€å·²ç»æ”¹å˜ï¼Œæ— æ³•å†è¿›è¡Œæ›´æ”¹ï¼Œæ‰€ä»¥è¯¥è¡Œä»£ç ï¼Œæ— æ•ˆ</li>\n<li>console.log(p) p â€“&gt; 1</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/de321f1169135bf57ef98b6dd3346ada56428.png\" alt=\"é¢˜ç›®ä¸€è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>7.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> async1 = <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1'</span>);</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">2000</span>)</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 end'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async1 success'</span></span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script start'</span>);</span><br><span class=\"line\">async1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script end'</span>);</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>)</span><br><span class=\"line\">  .then(<span class=\"number\">2</span>)</span><br><span class=\"line\">  .then(<span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">3</span>))</span><br><span class=\"line\">  .catch(<span class=\"number\">4</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer2'</span>)</span><br><span class=\"line\">&#125;, <span class=\"number\">1000</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>console.log(â€˜script startâ€™);</li>\n<li>async1()<ul>\n<li>console.log(â€˜async1â€™);</li>\n<li>setTimeout â€¦ 2000å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>await new Promise<ul>\n<li>æ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç <ul>\n<li>console.log(â€˜promise1â€™)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ç”±äºè¯¥ promise æ²¡æœ‰è¢« resolveã€rejectï¼Œä¸€ç›´å¤„åœ¨ pendingï¼Œå› æ­¤ åé¢çš„<ul>\n<li>console.log(â€˜async1 endâ€™) å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>return â€˜async1 successâ€™</li>\n<li>å‡ä¸æ‰§è¡Œ</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>async1().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€˜script endâ€™);</li>\n<li>Promise.resolve(1)<ul>\n<li>è¯¥ promie çŠ¶æ€å˜ä¸º1ï¼Œä¿å­˜èµ·æ¥</li>\n</ul>\n</li>\n<li>Promise.resolve(1).then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>setTimeout â€¦ 1000å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>Promise.resolve(1).then â€¦ <ul>\n<li>ç”±äº .then(2) .then(Promise.resolve(3)) .catch(4) ä¸€ä¸ªæ˜¯æ•°å­—ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡ï¼Œä¼šå‘ç”Ÿå€¼é€ä¼ ç°è±¡</li>\n<li>console.log(res) res â€“&gt; 1</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>setTimeout â€¦ 1000<ul>\n<li>console.log(â€˜timer2â€™)</li>\n</ul>\n</li>\n<li>setTimeout â€¦ 2000<ul>\n<li><ul>\n<li>console.log(â€˜timer1â€™)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/18d87ace8b51f98e4e30f55c17d0c4ff93076.png\" alt=\"é¢˜ç›®äºŒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>7.3 é¢˜ç›®ä¸‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> p1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    resolve(<span class=\"string\">'resolve3'</span>);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">  resolve(<span class=\"string\">'resovle1'</span>);</span><br><span class=\"line\">  resolve(<span class=\"string\">'resolve2'</span>);</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(p1)</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;).finally(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'finally'</span>, res)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç <ul>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>resolve(â€˜resovle1â€™);</li>\n<li>promise çŠ¶æ€å˜ä¸º resolve1ï¼Œå¹¶ä¿å­˜èµ·æ¥</li>\n</ul>\n</li>\n<li>Promise.then â€¦<ul>\n<li>console.log(res) res â€“&gt; â€˜resovle1â€™</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>Promise.finally â€¦<ul>\n<li>console.log(â€˜finallyâ€™, res) res â€“&gt; undefined</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>resolve(â€˜resolve3â€™); promise çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œæ— æ³•æ›´æ”¹</li>\n<li>console.log(â€˜timer1â€™)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(p1) p1 â€“&gt; .finallyçš„è¿”å›å€¼ â€“&gt; undefined</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>finally ä¸ç®¡ Promise çš„çŠ¶æ€æ˜¯ resolved è¿˜æ˜¯ rejected éƒ½ä¼šæ‰§è¡Œï¼Œä¸”å®ƒçš„å›è°ƒå‡½æ•°æ˜¯æ¥æ”¶ä¸åˆ° Promise çš„ç»“æœçš„</strong>ï¼Œæ‰€ä»¥ finally() ä¸­çš„ res æ˜¯ä¸€ä¸ªè¿·æƒ‘é¡¹</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/7be692142d758f1d65ad549a1b106f4146102.png\" alt=\"é¢˜ç›®ä¸‰è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"https://juejin.im/post/5e58c618e51d4526ed66b5cf\" target=\"_blank\" rel=\"noopener\">é¢˜ç›®æ¥æº</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å—¯ï¼Œå‘ç° è¿è¡Œæœºåˆ¶ çš„é¢è¯•é¢˜æ˜¯çœŸçš„å¤šã€‚ã€‚ğŸ˜“</li>\n<li>é‚£è¿™å°±æ˜¯ï¼Œæœ€æœ«ç¯‡å§</li>\n<li>åŠ æ²¹ Elle ğŸ¤¦â€â™€ï¸</li>\n<li>äº”ä¸€å€’è®¡æ—¶ 2 å¤©</li>\n</ul>","more":"<h2 id=\"å®è·µè®°å½•\"><a href=\"#å®è·µè®°å½•\" class=\"headerlink\" title=\"å®è·µè®°å½•\"></a>å®è·µè®°å½•</h2><h3 id=\"async-await\"><a href=\"#async-await\" class=\"headerlink\" title=\"async / await\"></a>async / await</h3><p>5.1 é¢˜ç›®ä¸€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 start\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> async2();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 end\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async2\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">async1();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆ†æ<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç </li>\n<li>async1();<ul>\n<li>console.log(â€œasync1 startâ€);</li>\n<li>await async2();<ul>\n<li>ç­‰å¾…æ‰§è¡Œ async2 ç»“æœ</li>\n<li>console.log(â€œasync2â€);</li>\n</ul>\n</li>\n<li>console.log(â€œasync1 endâ€); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>console.log(â€˜startâ€™)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— </li>\n<li>console.log(â€œasync1 endâ€);</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>ç»“è®º</p>\n<ul>\n<li>åœ¨è¿™é‡Œï¼Œå¯ä»¥ç†è§£ä¸ºã€Œç´§è·Ÿç€awaitåé¢çš„è¯­å¥ç›¸å½“äºæ”¾åˆ°äº†new Promiseä¸­ï¼Œä¸‹ä¸€è¡ŒåŠä¹‹åçš„è¯­å¥ç›¸å½“äºæ”¾åœ¨Promise.thenä¸­ã€</li>\n</ul>\n</li>\n<li><p>ç­‰åŒäº</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 start\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// åŸæ¥ä»£ç </span></span><br><span class=\"line\">  <span class=\"comment\">// await async2();</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(\"async1 end\");</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// è½¬æ¢åä»£ç </span></span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async2\"</span>)</span><br><span class=\"line\">    resolve()</span><br><span class=\"line\">  &#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 end\"</span>))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async2\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">async1();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"start\"</span>)</span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/f08b1b409f667c37f2a9dae1bf0b491e36782.png\" alt=\"é¢˜ç›®ä¸€è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 start\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> async2();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 end\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async2\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">async1();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"start\"</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>async1();<ul>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç </li>\n<li>console.log(â€œasync1 startâ€);</li>\n<li>await async2();<ul>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€œasync2â€);</li>\n</ul>\n</li>\n<li>console.log(â€œasync1 endâ€); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>console.log(â€œstartâ€)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—<ul>\n<li>console.log(â€œasync1 endâ€);</li>\n</ul>\n</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(â€˜timerâ€™)</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/ef5bbc4448d8cf8a4e6e7eb3d481257d43632.png\" alt=\"é¢˜ç›®äºŒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.3 é¢˜ç›®ä¸‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 start\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> async2();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 end\"</span>);</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer2'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async2\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">async1();</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer3'</span>)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"start\"</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>async1();<ul>\n<li>console.log(â€œasync1 startâ€);</li>\n<li>await async2();<ul>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€œasync2â€);</li>\n</ul>\n</li>\n<li>console.log(â€œasync1 endâ€); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€œstartâ€)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç å·²ç»æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>console.log(â€œasync1 endâ€);</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(â€˜timer2â€™);</li>\n<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(â€˜timer3â€™)</li>\n<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(â€˜timer1â€™)</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/40ff5c3620b6ef956afd99a895080cee58816.png\" alt=\"é¢˜ç›®ä¸‰è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.4 é¢˜ç›®å››</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// return await 1234</span></span><br><span class=\"line\">  <span class=\"comment\">// ç­‰åŒäº</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">123</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fn().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>fn()<ul>\n<li>return 123</li>\n</ul>\n</li>\n<li>console.log(res) res â€“&gt; 123</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/01d7e322293346a15fd0c97cb6167dee21159.png\" alt=\"é¢˜ç›®å››è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.5 <strong>é¢˜ç›®äº”</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 start'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 success'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async1 end'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'srcipt start'</span>)</span><br><span class=\"line\">async1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'srcipt end'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>console.log(â€˜srcipt startâ€™)</li>\n<li>async1()<ul>\n<li>console.log(â€˜async1 startâ€™);</li>\n<li>new Promise â€¦ ç­‰å¾…æ‰§è¡Œ<ul>\n<li>console.log(â€˜promise1â€™)</li>\n<li>ç”±äº promise å¹¶æ²¡æœ‰ resolvedã€rejectedï¼Œæ‰€ä»¥ä¸€ç›´å¤„åœ¨ pending çŠ¶æ€ï¼Œæ‰€ä»¥ ä¼šä¸€ç›´ await ï¼Œawait åçš„å†…å®¹ä¹ŸåŒ…æ‹¬ async1 åé¢çš„ thenï¼Œéƒ½ä¸ä¼šæ‰§è¡Œ</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>console.log(â€˜srcipt endâ€™)</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6da017ef5e2bef76433a90be0f7804c343869.png\" alt=\"é¢˜ç›®äº”è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.6 é¢˜ç›®å…­</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 start'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">    resolve(<span class=\"string\">'promise1 resolve'</span>)</span><br><span class=\"line\">  &#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 success'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async1 end'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'srcipt start'</span>)</span><br><span class=\"line\">async1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'srcipt end'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆ†æ<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>console.log(â€˜srcipt startâ€™)</li>\n<li>async1()<ul>\n<li>console.log(â€˜async1 startâ€™);</li>\n<li>await new Promise â€¦ ç­‰å¾… promise æ‰§è¡Œ<ul>\n<li>console.log(â€˜promise1â€™)</li>\n<li>å…¶ä¸­ promise çŠ¶æ€å˜ä¸º resolvedï¼Œå°†å…¶çŠ¶æ€ä¿å­˜èµ·æ¥</li>\n<li>new Promise then â€¦ åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>console.log(â€˜async1 successâ€™); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>return â€˜async1 endâ€™</li>\n</ul>\n</li>\n<li>async1().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€˜srcipt endâ€™)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>.then(res =&gt; console.log(res))<ul>\n<li>res â€“&gt; promise1 resolve</li>\n</ul>\n</li>\n<li>console.log(â€˜async1 successâ€™); </li>\n<li>res =&gt; console.log(res) res â€“&gt; â€˜async1 endâ€™</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/478ab1a6c972bd17dab664ba479c1c2859767.png\" alt=\"é¢˜ç›®å…­è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.7 é¢˜ç›®ä¸ƒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 start'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">    resolve(<span class=\"string\">'promise resolve'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 success'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async1 end'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'srcipt start'</span>)</span><br><span class=\"line\">async1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>)</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>console.log(â€˜srcipt startâ€™)</li>\n<li>async1()<ul>\n<li>console.log(â€˜async1 startâ€™);</li>\n<li>await new Promise â€¦<ul>\n<li>console.log(â€˜promise1â€™)</li>\n<li>å…¶ä¸­ promise çŠ¶æ€å˜ä¸º resolveï¼Œå°†å…¶ä¿å­˜èµ·æ¥</li>\n</ul>\n</li>\n<li>console.log(â€˜async1 successâ€™); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>return â€˜async1 endâ€™</li>\n</ul>\n</li>\n<li>async1().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç <ul>\n<li>console.log(â€˜promise2â€™)</li>\n<li>setTimeout â€¦ åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>console.log(â€˜async1 successâ€™);</li>\n<li>console.log(res) res â€“&gt; â€˜async1 endâ€™</li>\n<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(â€˜timerâ€™)</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/59c38ec9bef1877e27b64b056fd9258663945.png\" alt=\"é¢˜ç›®ä¸ƒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.8 é¢˜ç›®å…«</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 start\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> async2();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async1 end\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"async2\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"script start\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"setTimeout\"</span>);</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">async1();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise1\"</span>);</span><br><span class=\"line\">  resolve();</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise2\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script end'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>console.log(â€œscript startâ€);</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>async1()<ul>\n<li>console.log(â€œasync1 startâ€);</li>\n<li>await async2();<ul>\n<li>console.log(â€œasync2â€);</li>\n</ul>\n</li>\n<li>console.log(â€œasync1 endâ€); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>new promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°<ul>\n<li>console.log(â€œpromise1â€);</li>\n<li>å…¶ä¸­ promise çŠ¶æ€æ”¹å˜ä¸º resolveï¼Œå°†å…¶ä¿å­˜</li>\n</ul>\n</li>\n<li>new promise then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€˜script endâ€™)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>console.log(â€œasync1 endâ€);</li>\n<li>new Promise then â€¦ <ul>\n<li>console.log(â€œpromise2â€);</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡<ul>\n<li>console.log(â€œsetTimeoutâ€);</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/05bcc26014cb3a56f1da38df3e28141974246.png\" alt=\"é¢˜ç›®å…«è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>5.9 é¢˜ç›®ä¹</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">testSometing</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"æ‰§è¡ŒtestSometing\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"testSometing\"</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">testAsync</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"æ‰§è¡ŒtestAsync\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">\"hello async\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"test start...\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> v1 = <span class=\"keyword\">await</span> testSometing();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(v1);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> v2 = <span class=\"keyword\">await</span> testAsync();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(v2);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(v1, v2);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise start...\"</span>);</span><br><span class=\"line\">  resolve(<span class=\"string\">\"promise\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">promise.then(<span class=\"function\"><span class=\"params\">val</span> =&gt;</span> <span class=\"built_in\">console</span>.log(val));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"test end...\"</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆ†æ<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>test()<ul>\n<li>console.log(â€œtest startâ€¦â€);</li>\n<li>await testSometing()<ul>\n<li>console.log(â€œæ‰§è¡ŒtestSometingâ€);</li>\n<li>â€œtestSometingâ€;</li>\n<li>const v1 = â€œtestSometingâ€;</li>\n</ul>\n</li>\n<li>console.log(â€œtestSometingâ€); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>await testAsync() å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(v2); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(v1, v2); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>new Promise, æ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç <ul>\n<li>console.log(â€œpromise startâ€¦â€);</li>\n<li>å…¶ promise çŠ¶æ€å˜ä¸º resolve,å°†å…¶ä¿å­˜</li>\n</ul>\n</li>\n<li>promise.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€œtest endâ€¦â€);</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡<ul>\n<li>console.log(â€œtestSometingâ€); v1 â€“&gt; â€œtestSometingâ€</li>\n<li>await testAsync() <ul>\n<li>console.log(â€œæ‰§è¡ŒtestAsyncâ€);</li>\n<li>return Promise.resolve(â€œhello asyncâ€);</li>\n<li>Promise.resolve(â€œhello asyncâ€) â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>console.log(v2); â€¦ é‡æ–°å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(v1, v2); é‡æ–°å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>promise.then â€¦ <ul>\n<li>console.log(val) val â€“&gt; promise</li>\n</ul>\n</li>\n<li>Promise.resolve(â€œhello asyncâ€) return â€œhello asyncâ€</li>\n<li>v2 = â€œhello asyncâ€</li>\n<li>console.log(v2);</li>\n<li>console.log(â€œhello asyncâ€);</li>\n<li>console.log(v1, v2);<ul>\n<li>console.log(â€œæ‰§è¡ŒtestAsyncâ€, â€œhello asyncâ€);</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/09e8b0ae4cadad1f803049e6545d73f091754.png\" alt=\"é¢˜ç›®ä¹è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"async-å¤„ç†é”™è¯¯\"><a href=\"#async-å¤„ç†é”™è¯¯\" class=\"headerlink\" title=\"async å¤„ç†é”™è¯¯\"></a>async å¤„ç†é”™è¯¯</h3><p>6.1 <strong>é¢˜ç›®ä¸€</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">await</span> async2();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async1 success'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async2</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'async2'</span>)</span><br><span class=\"line\">    reject(<span class=\"string\">'error'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">async1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>async1()<ul>\n<li>await async2();<ul>\n<li>new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°<ul>\n<li>console.log(â€˜async2â€™)</li>\n<li>reject(â€˜errorâ€™) promise çŠ¶æ€å˜ä¸º reject,å°†å…¶ä¿å­˜èµ·æ¥ï¼Œå¹¶å‘ä¸ŠæŠ›</li>\n<li>Promise {<rejected>: â€œerrorâ€}</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/b3955dc674cf405c9a60de9062b525c736256.png\" alt=\"é¢˜ç›®ä¸€è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>6.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">async1</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.reject(<span class=\"string\">'error!!!'</span>)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span>(e) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(e)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'async1 success'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">async1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script start'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>async1()<ul>\n<li>Promise.reject(â€˜error!!!â€™)<ul>\n<li>promise çŠ¶æ€å˜ä¸º rejectï¼Œå°†å…¶çŠ¶æ€ä¿å­˜èµ·æ¥ï¼Œå‘ä¸ŠæŠ›é”™</li>\n</ul>\n</li>\n<li>catch é”™è¯¯ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€˜async1â€™); å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>return Promise.resolve(â€˜async1 successâ€™)</li>\n</ul>\n</li>\n<li>async1().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€˜script startâ€™)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>console.log(e) e â€“&gt; â€˜error!!!â€™</li>\n<li>console.log(â€˜async1â€™);</li>\n<li>console.log(res) res â€“&gt; â€˜async1 successâ€™</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/fc960e772e0fbca1fdf8640c8774999640316.png\" alt=\"é¢˜ç›®äºŒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç»¼åˆé¢˜\"><a href=\"#ç»¼åˆé¢˜\" class=\"headerlink\" title=\"ç»¼åˆé¢˜\"></a>ç»¼åˆé¢˜</h3><p>7.1 é¢˜ç›®ä¸€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> first = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"function\">(<span class=\"params\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>((resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"number\">7</span>);</span><br><span class=\"line\">        setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"number\">5</span>);</span><br><span class=\"line\">            resolve(<span class=\"number\">6</span>);</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(p)</span><br><span class=\"line\">        &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">        resolve(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    resolve(<span class=\"number\">2</span>);</span><br><span class=\"line\">    p.then(<span class=\"function\">(<span class=\"params\">arg</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(arg);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;));</span><br><span class=\"line\">first().then(<span class=\"function\">(<span class=\"params\">arg</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(arg);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>first()<ul>\n<li>return ä¸€ä¸ª promise å¯¹è±¡ã€‚å…ˆæ‰§è¡Œ new Promiseï¼Œè¯¥æ„é€ å‡½æ•°ä»£ç </li>\n<li>console.log(3);</li>\n<li>resolve(2)<ul>\n<li>è¯¥ promise çŠ¶æ€å˜ä¸º resolvedï¼Œä¿å­˜èµ·æ¥</li>\n</ul>\n</li>\n<li>p new Promise, æ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç <ul>\n<li>console.log(7);</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>resolve(1);</li>\n<li>è¯¥ promise çŠ¶æ€å˜ä¸º resolve ,ä¿å­˜èµ·æ¥</li>\n</ul>\n</li>\n<li>p.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>first().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(4);</li>\n</ul>\n</li>\n<li>è¯¥å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç éƒ½æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>p.then</li>\n<li>console.log(arg) arg â€“&gt; 1</li>\n<li>p.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(arg) arg â€“&gt; 2</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„ä»£ç éƒ½æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>setTimeout â€¦<ul>\n<li>console.log(5);</li>\n<li>resolve(6); promise p çš„çŠ¶æ€å·²ç»æ”¹å˜ï¼Œæ— æ³•å†è¿›è¡Œæ›´æ”¹ï¼Œæ‰€ä»¥è¯¥è¡Œä»£ç ï¼Œæ— æ•ˆ</li>\n<li>console.log(p) p â€“&gt; 1</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/de321f1169135bf57ef98b6dd3346ada56428.png\" alt=\"é¢˜ç›®ä¸€è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>7.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> async1 = <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1'</span>);</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">2000</span>)</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'async1 end'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async1 success'</span></span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script start'</span>);</span><br><span class=\"line\">async1().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'script end'</span>);</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>)</span><br><span class=\"line\">  .then(<span class=\"number\">2</span>)</span><br><span class=\"line\">  .then(<span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">3</span>))</span><br><span class=\"line\">  .catch(<span class=\"number\">4</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer2'</span>)</span><br><span class=\"line\">&#125;, <span class=\"number\">1000</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>console.log(â€˜script startâ€™);</li>\n<li>async1()<ul>\n<li>console.log(â€˜async1â€™);</li>\n<li>setTimeout â€¦ 2000å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>await new Promise<ul>\n<li>æ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç <ul>\n<li>console.log(â€˜promise1â€™)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ç”±äºè¯¥ promise æ²¡æœ‰è¢« resolveã€rejectï¼Œä¸€ç›´å¤„åœ¨ pendingï¼Œå› æ­¤ åé¢çš„<ul>\n<li>console.log(â€˜async1 endâ€™) å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>return â€˜async1 successâ€™</li>\n<li>å‡ä¸æ‰§è¡Œ</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>async1().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€˜script endâ€™);</li>\n<li>Promise.resolve(1)<ul>\n<li>è¯¥ promie çŠ¶æ€å˜ä¸º1ï¼Œä¿å­˜èµ·æ¥</li>\n</ul>\n</li>\n<li>Promise.resolve(1).then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>setTimeout â€¦ 1000å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>Promise.resolve(1).then â€¦ <ul>\n<li>ç”±äº .then(2) .then(Promise.resolve(3)) .catch(4) ä¸€ä¸ªæ˜¯æ•°å­—ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡ï¼Œä¼šå‘ç”Ÿå€¼é€ä¼ ç°è±¡</li>\n<li>console.log(res) res â€“&gt; 1</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>setTimeout â€¦ 1000<ul>\n<li>console.log(â€˜timer2â€™)</li>\n</ul>\n</li>\n<li>setTimeout â€¦ 2000<ul>\n<li><ul>\n<li>console.log(â€˜timer1â€™)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/18d87ace8b51f98e4e30f55c17d0c4ff93076.png\" alt=\"é¢˜ç›®äºŒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>7.3 é¢˜ç›®ä¸‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> p1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    resolve(<span class=\"string\">'resolve3'</span>);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">  resolve(<span class=\"string\">'resovle1'</span>);</span><br><span class=\"line\">  resolve(<span class=\"string\">'resolve2'</span>);</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(p1)</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;).finally(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'finally'</span>, res)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä»£ç <ul>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>resolve(â€˜resovle1â€™);</li>\n<li>promise çŠ¶æ€å˜ä¸º resolve1ï¼Œå¹¶ä¿å­˜èµ·æ¥</li>\n</ul>\n</li>\n<li>Promise.then â€¦<ul>\n<li>console.log(res) res â€“&gt; â€˜resovle1â€™</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>Promise.finally â€¦<ul>\n<li>console.log(â€˜finallyâ€™, res) res â€“&gt; undefined</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>resolve(â€˜resolve3â€™); promise çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œæ— æ³•æ›´æ”¹</li>\n<li>console.log(â€˜timer1â€™)</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(p1) p1 â€“&gt; .finallyçš„è¿”å›å€¼ â€“&gt; undefined</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>finally ä¸ç®¡ Promise çš„çŠ¶æ€æ˜¯ resolved è¿˜æ˜¯ rejected éƒ½ä¼šæ‰§è¡Œï¼Œä¸”å®ƒçš„å›è°ƒå‡½æ•°æ˜¯æ¥æ”¶ä¸åˆ° Promise çš„ç»“æœçš„</strong>ï¼Œæ‰€ä»¥ finally() ä¸­çš„ res æ˜¯ä¸€ä¸ªè¿·æƒ‘é¡¹</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/7be692142d758f1d65ad549a1b106f4146102.png\" alt=\"é¢˜ç›®ä¸‰è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"https://juejin.im/post/5e58c618e51d4526ed66b5cf\" target=\"_blank\" rel=\"noopener\">é¢˜ç›®æ¥æº</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"ã€æœªå®Œã€‘Javascript-è¿è¡Œæœºåˆ¶ï¼ˆä¸€ï¼‰","date":"2020-04-30T15:55:49.000Z","description":["Javascript -- Expression"],"_content":"\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- äº”ä¸€å‡æœŸï¼Œæ¥å†™ä¸€å†™ Promise çš„é¢˜å§ï¼Œå˜¿å˜¿å˜¿ ğŸ˜ƒ\n- äº”ä¸€å€’è®¡æ—¶ 3 å¤©\n\n<!-- more -->\n\n## å®è·µå‡†å¤‡\n\n\n```Objective-C\n#import <Foundation/Foundation.h>\n#import <JavaScriptCore/JavaScriptCore.h>\n\nint main(int argx, const char * argv[]) {\n  @autoreleasepool {\n    // var context = new JSContext\n    \n    \n    // define a javascript context\n    JSContext* context = [[JSContext alloc] init];\n    // like:var result = null;\n    JSValue* result;\n    \n    while(true) {\n      char sourcecode[1024];\n      \n      scanf('%s', &sourcecode);\n      NSString* code = [NSString stringWithUTF8String: sourcecode];\n      \n      result = [context evaluateScript:code];\n      \n      NSLog(@\"%@\", [result toString]);\n      \n    }\n  \n  return 0;\n\n}\n\n```\n\n- å¦‚ä¸Šå®ç°ä¸€ä¸ªç®€å•çš„äº‹ä»¶å¾ªç¯ï¼Œç”¨æ¥è¾“å‡º console\n- ![OC æ–¹æ³•](http://p1.meituan.net/myvideodistribute/a99619da1cded49f443ded2fc219b27432778.png)\n- æˆ‘ä»¬åœ¨ Javascript ä¸­è®²çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ã€å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ˜¯ Javascript è°ƒç”¨æ–¹å»ä½¿ç”¨ Javascript çš„ä¸€ç§æ–¹å¼ï¼Œå¦‚æœä»…æ˜¯æ‰§è¡Œä¸€æ®µä»£ç ï¼Œæ˜¯ä¸éœ€è¦äº‹ä»¶å¾ªç¯çš„ã€‚é€šè¿‡è¿™æ®µä»£ç ï¼Œæ˜¯å¯ä»¥çœ‹å‡ºæ¥ï¼ŒJavascript çš„äº‹ä»¶å¾ªç¯ï¼Œæ˜¯åœ¨ JSContext ä¹‹å¤–ï¼Œäº‹ä»¶å¾ªç¯ç›¸å…³çŸ¥è¯†ï¼Œæ—¢ä¸æ˜¯ Javascript å¼•æ“çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ Javascript è¯­è¨€çš„ä¸€éƒ¨åˆ†ã€‚\n- code çš„ä¼ å…¥æ–¹å¼\n\t- &lt;script&gt;&lt;/script&gt; æ™®é€šä»£ç ç‰‡æ®µ\n\t- &lt;script type=\"module\"&gt;&lt;/script&gt;\n\t- å‡½æ•°\n\n\n```Objective-C\n#import <Foundation/Foundation.h>\n#import <JavaScriptCore/JavaScriptCore.h>\n\nint main(int argx, const char * argv[]) {\n  @autoreleasepool {\n    // var context = new JSContext\n    \n    \n    // define a javascript context\n    JSContext* context = [[JSContext alloc] init];\n    // like:var result = null;\n    JSValue* result;\n    \n    // TODO: calculate the square of arg x\n    NSString* code = @\"(function(x){ return x * x; })\";\n    \n    \n    // like: result = (function(x){ return x * x; })\n    result = [context evaluateScript:code];\n    \n    // passing the number 4 into the function\n    JSValue* arg1 = [JSValue valueWithInt32:4 inContext:context];\n    \n    // execute the function with arg of 4\n    NSLog(@\"%@\", [[result callWithArguments:@[arg1]] toString]);\n  \n  }\n  \n  return 0;\n\n}\n\n```\n\n- ä¸Šé¢çš„ Object-C ä»£ç ï¼Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬æ˜¯å°†ä¸€æ®µä¸€æ®µçš„ä»£ç ï¼Œä¼ å…¥ evaluateScript ä¸­æ‰§è¡Œã€‚\n\n\n```Objective-C\n#import <Foundation/Foundation.h>\n#import <JavaScriptCore/JavaScriptCore.h>\n\nint main(int argx, const char * argv[]) {\n  @autoreleasepool {\n    // var context = new JSContext\n    \n    \n    // define a javascript context\n    JSContext* context = [[JSContext alloc] init];\n    // like:var result = null;\n    JSValue* result;\n    \n    // TODO: calculate the square of arg x\n    NSString* code = @\"new Promise(resolve => resolve()).then(() => this.a = 3), function(){return this.a};\";\n        \n    result = [context evaluateScript:code];\n    \n    // like: result();\n    NSLog(@\"%@\", [[result callWithArguments:@[]] toString]);\n  \n  }\n  \n  return 0;\n\n}\n\n```\n\n- evaluateScript å®é™…ä¸Šæ‰§è¡Œä¸¤æ­¥ï¼š\n\t1. æ‰§è¡Œæ•´ä¸ªæ–¹æ³•\n\t\t\n\t\t> new Promise(resolve => resolve()).then(() => this.a = 3), function(){return this.a};\n\t\n\t\t- é€—å·è¡¨è¾¾å¼ï¼Œæ°¸è¿œè¿”å›åé¢çš„å€¼ï¼Œå¦‚æœè¢«è°ƒç”¨ï¼Œå‰é¢çš„ä¼šè¢«æ‰§è¡Œ\n\t2. æ‰§è¡Œ Promise ä¸­ then åé¢çš„è¯­å¥\n\t- ![evaluateScript](http://p0.meituan.net/myvideodistribute/81d945c99778450fd86a710f20355cbc269796.png)\n\t- æœ‰ then ,å¯èƒ½äº§ç”Ÿä¸€ä¸ªå®ä»»åŠ¡é‡Œé¢æœ‰å¤šä¸ªå¾®ä»»åŠ¡çš„æƒ…å†µï¼Œ ä¸€åˆ‡JS ä»£ç éƒ½æ˜¯å¾®ä»»åŠ¡ä¸­æ‰§è¡Œçš„\n\t- æ‹¿æµè§ˆå™¨ä¸¾ä¾‹ï¼šsetTimeoutã€setInterval è¿™ç§å…¶å®ä¸æ˜¯ JS è¯­æ³•æœ¬èº«çš„ APIï¼Œæ˜¯ JS çš„å®¿ä¸»æµè§ˆå™¨æä¾›çš„ APIï¼Œ æ‰€ä»¥æ˜¯å®ä»»åŠ¡ã€‚\n\t- è€Œ Promise æ˜¯ JS æœ¬èº«è‡ªå¸¦çš„ APIï¼Œè¿™ç§å°±æ˜¯å¾®ä»»åŠ¡ã€‚\n- æ€»ç»“ï¼š**å®¿ä¸»æä¾›çš„æ–¹æ³•æ˜¯å®ä»»åŠ¡ï¼ŒJS è‡ªå¸¦çš„æ˜¯å¾®ä»»åŠ¡**\n- **ä»»åŠ¡åˆ—è¡¨åˆ—é‡Œé¢æœ‰å¾ˆå¤šå®ä»»åŠ¡ï¼Œç„¶åæ¯ä¸ªå®ä»»åŠ¡é‡Œé¢æœ‰ä¸€ä¸ªå¾®ä»»åŠ¡åˆ—è¡¨ï¼Œæ¯ä¸ªå®ä»»åŠ¡æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ä¹‹å‰ä¼šæŠŠè‡ªå·±å†…éƒ¨çš„å¾®ä»»åŠ¡æ‰§è¡Œå®Œ**\n- **å®ä»»åŠ¡**åŒ…æ‹¬ï¼šscript ã€setTimeoutã€setInterval ã€setImmediate ã€I/O ã€UI renderingã€‚\n- **å¾®ä»»åŠ¡**åŒ…æ‹¬ï¼šMutationObserverã€Promise.then()æˆ–catch()ã€Promiseä¸ºåŸºç¡€å¼€å‘çš„å…¶å®ƒæŠ€æœ¯ï¼Œæ¯”å¦‚fetch APIã€V8çš„åƒåœ¾å›æ”¶è¿‡ç¨‹ã€Nodeç‹¬æœ‰çš„process.nextTickã€‚\n\t\t\n\n\n# Javascript ç»“æ„åŒ–ç¨‹åºè®¾è®¡åŸºç¡€\n\n\n## å®è·µè®°å½•\n### åŸºç¡€é¢˜\n\n1.1 é¢˜ç›®ä¸€\n\n```javascript\nconst promise1 = new Promise((resolve, reject) => {\n  console.log('promise1')\n})\nconsole.log('1', promise1);\n```\n\n- åˆ†æï¼š\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­ console.log('promise1')\n\t\n\t> console.log('1', promise1);\n\t\n\t- å†æ‰§è¡ŒåŒæ­¥ä»£ç \n\t- æ‰§è¡Œå®Œåï¼Œ promise1 ä¸­å¹¶æ²¡æœ‰ resolved, rejectedï¼Œ ä¸€ç›´å¤„åœ¨ pending çš„çŠ¶æ€\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€æ‰§è¡Œ](http://p0.meituan.net/myvideodistribute/f45e1dbe45d84e46ab2fd24703cad0c521137.png)\n\n1.2 é¢˜ç›®äºŒ\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  console.log(1);\n  resolve('success')\n  console.log(2);\n});\npromise.then(() => {\n  console.log(3);\n});\nconsole.log(4);\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­\n\t\t- console.log(1);\n\t\t- resolve('success') å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t\t- console.log(2);\n\t- promise.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å†æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç \n\t\t- console.log(4);\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸” promise ä¸ºresolvedï¼Œæ‰§è¡Œ promise.then\n\t\t- console.log(3);\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒæ‰§è¡Œ](http://p0.meituan.net/myvideodistribute/c31fd6e9ba9c9f9ac4062d6b395706f230745.png)\n\n1.3 é¢˜ç›®ä¸‰\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  console.log(1);\n  console.log(2);\n});\npromise.then(() => {\n  console.log(3);\n});\nconsole.log(4);\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­\n\t\t- console.log(1);\n\t\t- console.log(2);\n\t\t- è¯¥ promise æ²¡æœ‰ resolved, rejected, ä¸€ç›´å¤„åœ¨ pending\n\t- promise.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å†æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç \n\t\t- console.log(4);\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä½† promise ä¸ºpendingï¼Œä¸å¯èƒ½æ‰§è¡Œ promise.then ä¸­æ–¹æ³•\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰æ‰§è¡Œ](http://p0.meituan.net/myvideodistribute/b6e827ca293c65c261a83a81f1f5411227105.png)\n\n1.4 é¢˜ç›®å››\n\n```javascript\nconst promise1 = new Promise((resolve, reject) => {\n  console.log('promise1')\n  resolve('resolve1')\n})\nconst promise2 = promise1.then(res => {\n  console.log(res)\n})\nconsole.log('1', promise1);\nconsole.log('2', promise2);\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­\n\t\t- console.log('promise1')\n\t\t- resolve('resolve1') å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- promise1.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- promise2 æ˜¯ä¸€ä¸ªæ–°çŠ¶æ€ä¸º pending çš„ Promise\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('1', promise1);\n\t\t\t- promise1 ä¸­çŠ¶æ€åœ¨ä¸Šé¢å·²ç»æ›´æ”¹ä¸º resolved\n\t\t- console.log('2', promise2);\n\t\t\t- promise2 ä¸­çŠ¶æ€ä¸ºpending\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then \n\t\t- console.log(res) \n\t\t\t- å…¶ä¸­ promise1.thenï¼Œ promise1 çš„çŠ¶æ€ä¸º resolved\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å››è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/f31e7f8db309521b5252143252eaed2551272.png)\n\n\n1.5 é¢˜ç›®äº”\n\n```javascript\nconst fn = () => (new Promise((resolve, reject) => {\n  console.log(1);\n  resolve('success')\n}))\nfn().then(res => {\n  console.log(res)\n})\nconsole.log('start')\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œconst fn = () => (Promise Object) è¿”å›ä¸€ä¸ª promise å¯¹è±¡\n\t- fn()ï¼Œæ‰§è¡Œ fn æ–¹æ³•\n\t\t- console.log(1);\n\t\t- resolve('success') å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- Function.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('start')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— Function.then\n\t\t- console.log(res) å…¶ä¸­ promise çš„çŠ¶æ€ä¸º resolved\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äº”è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/955895672615c24a4eb671617d8b739829033.png)\n\n\n1.6 é¢˜ç›®å…­\n\n```javascript\nconst fn = () =>\n  new Promise((resolve, reject) => {\n    console.log(1);\n    resolve(\"success\");\n  });\nconsole.log(\"start\");\nfn().then(res => {\n  console.log(res);\n});\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œconst fn = () => (Promise Object) è¿”å›ä¸€ä¸ª promise å¯¹è±¡\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t-  console.log(\"start\");\n\t- fn(), æ‰§è¡Œ fn æ–¹æ³•\n\t\t- console.log(1);\n\t\t- resolve(\"success\"); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- Function.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— Function.then\n\t\t- console.log(res); å…¶ä¸­ promise çš„çŠ¶æ€ä¸º resolved\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å…­è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/ccd1a9148be91f5aa24847a0d4e23dfb31837.png)\n\n### Promise ç»“åˆ setTimeout\n\n2.1 é¢˜ç›®ä¸€\n\n```javascript\nconsole.log('start')\nsetTimeout(() => {\n  console.log('time')\n})\nPromise.resolve().then(() => {\n  console.log('resolve')\n})\nconsole.log('end')\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('start')\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- Promise.resolve().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('end')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— Promise.resolve().then\n\t\t- console.log('resolve')\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout ...\n\t\t- console.log('time')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/4a9c74ab2a26cc16e55ce53f6fb765d630133.png)\n\n2.2 é¢˜ç›®äºŒ\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  console.log(1);\n  setTimeout(() => {\n    console.log(\"timerStart\");\n    resolve(\"success\");\n    console.log(\"timerEnd\");\n  }, 0);\n  console.log(2);\n});\npromise.then((res) => {\n  console.log(res);\n});\nconsole.log(4);\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­\n\t\t- console.log(1);\n\t\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log(2);\n\t- promise.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(4);\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— å…¶ä¸­ promise ä¸­ï¼Œå¹¶æ²¡æœ‰ resolvedã€rejectedï¼Œä¸€ç›´åœ¨ pendingï¼Œä¸å¯èƒ½æ‰§è¡Œ promise.then ä¸­æ–¹æ³•\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout ...\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡ setTimeout ä»£ç ä»ä¸Šè‡³ä¸‹æ‰§è¡Œ\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(\"timerStart\");\n\t\t- resolve(\"success\"); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t\t- console.log(\"timerEnd\");\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/66ea5bbd68d0841ad58cac5ca771625347414.png)\n\n\t\n2.3 é¢˜ç›®ä¸‰\n\n```javascript\nsetTimeout(() => {\n  console.log('timer1');\n  setTimeout(() => {\n    console.log('timer3')\n  }, 0)\n}, 0)\nsetTimeout(() => {\n  console.log('timer2')\n}, 0)\nconsole.log('start')\n```\n\n- åˆ†æ\n\t- ä»ä¸Šæ‰§è¡Œ\n\t- setTimeout ... åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\n\t- setTimeout ... åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('start')\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout ...\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç  \n\t\t- console.log('timer1');\n\t- setTimeout ... åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('timer2')\n\t- ç¬¬ä¸‰ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('timer3')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/b5ab6578c5ba7d8d727a3bf47ba8879033812.png)\n\n```javascript\nsetTimeout(() => {\n  console.log('timer1');\n  Promise.resolve().then(() => {\n    console.log('promise')\n  })\n}, 0)\nsetTimeout(() => {\n  console.log('timer2')\n}, 0)\nconsole.log('start')\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- setTimeout ... åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\n\t- setTimeout ... åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('start')\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout ...\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('timer1');\n\t\t- Promise.resolve().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- console.log('promise')\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout ...\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('timer2')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/f65f2aa65848d2e8aaf5c3918509c6e934427.png)\n\n\n2.4 é¢˜ç›®å››\n\n```javascript\nPromise.resolve().then(() => {\n  console.log('promise1');\n  const timer2 = setTimeout(() => {\n    console.log('timer2')\n  }, 0)\n});\nconst timer1 = setTimeout(() => {\n  console.log('timer1')\n  Promise.resolve().then(() => {\n    console.log('promise2')\n  })\n}, 0)\nconsole.log('start');\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- Promise.resolve().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t- console.log('start');\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t- console.log('promise1');\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout ...\n\t- console.log('timer2')\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t- console.log('timer1')\n\t- Promise.resolve().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log('promise2')\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log('timer2')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å››è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/60a22379f31bb12de055ed83a31aca0b46969.png)\n\n2.5 é¢˜ç›®äº” ** å­˜åœ¨å’Œä¹‹å‰ä¸€æ ·çš„ï¼Œpromise resolved åï¼ŒçŠ¶æ€ä¸ŠæŠ›è‡³ä¸Šä¸€ä¸ª å®ä»»åŠ¡é˜Ÿåˆ—çš„é—®é¢˜\n\n```javascript\nconst promise1 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve('success')\n  }, 1000)\n})\nconst promise2 = promise1.then(() => {\n  throw new Error('error!!!')\n})\nconsole.log('promise1', promise1)\nconsole.log('promise2', promise2)\nsetTimeout(() => {\n  console.log('promise1', promise1)\n  console.log('promise2', promise2)\n}, 2000)\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- å…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­\n\t- setTimout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- promise1.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('promise1', promise1)\n\t\t\t- å…¶ä¸­ promise1 æ²¡æœ‰ resolvedã€rejected,ä¸€ç›´å¤„åœ¨ pending çŠ¶æ€\n\t\t\t- promise1 PromiseÂ {\\<pending\\>}\n\t\t- console.log('promise2', promise2)\n\t\t\t- å…¶ä¸­ promise1 ä¸€ç›´å¤„åœ¨ pending çŠ¶æ€ï¼Œç›´æ¥å½±å“åˆ° promise2 ä¹Ÿä¸€ç›´å¤„åœ¨ pending çŠ¶æ€\n\t\t\t- promise2 PromiseÂ {\\<pending\\>}\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then ...\n\t\t- ç”±äº promise1 ä»å¤„äº pending çŠ¶æ€ï¼Œä¸å¯èƒ½æ‰§è¡Œ promise1.then ...\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- resolve('success') å°† promise1 ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('promise1', promise1)\n\t\t\t- å…¶ä¸­ promise1 å¤„åœ¨ resolved çŠ¶æ€\n\t\t\t- promise1 PromiseÂ {\\<resolved\\>: \"success\"}\n\t\t- console.log('promise2', promise2)\n\t\t\t- promise2 Promise {\\<rejected\\>: Error: error!!! at \\<anonymous\\>:8:9}\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äº”è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/3ad654d66c66c648a058adf29154d879107368.png)\n\n\n2.6 é¢˜ç›®å…­\n\n```javascript\nconst promise1 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve(\"success\");\n    console.log(\"timer1\");\n  }, 1000);\n  console.log(\"promise1é‡Œçš„å†…å®¹\");\n});\nconst promise2 = promise1.then(() => {\n  throw new Error(\"error!!!\");\n});\nconsole.log(\"promise1\", promise1);\nconsole.log(\"promise2\", promise2);\nsetTimeout(() => {\n  console.log(\"timer2\");\n  console.log(\"promise1\", promise1);\n  console.log(\"promise2\", promise2);\n}, 2000);\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°\n\t- setTimeout å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(\"promise1é‡Œçš„å†…å®¹\");\n\t- promise1.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(\"promise1\", promise1);\n\t\t\t- å…¶ä¸­ promise1 æ²¡æœ‰ resolvedã€rejected æ‰ï¼Œä¸€ç›´å¤„åœ¨ pending çŠ¶æ€\n\t\t\t\t- promise1 PromiseÂ {\\<pending\\>}\n\t\t- console.log(\"promise2\", promise2);\n\t\t\t- primise1 çš„ pending çŠ¶æ€ï¼Œç›´æ¥å½±å“ promise2 ä¹Ÿå¤„åœ¨ pending çŠ¶æ€\n\t\t\t\t- promise2 PromiseÂ {\\<pending\\>}\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then ...\n\t\t- ç”±äº promise1 ä»å¤„äº pending çŠ¶æ€ï¼Œä¸å¯èƒ½æ‰§è¡Œ promise1.then ...\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œç¬¬äºŒä¸ªå®ä»»åŠ¡\n\t- resolve(\"success\"); å°† promise1 ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(\"timer1\");\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then ...\n\t\t- throw new Error(\"error!!!\");\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t\t- console.log(\"timer2\");\n\t\t\t- console.log(\"promise1\", promise1);\n\t\t\t\t- å…¶ä¸­ promise1 çš„çŠ¶æ€å·²ç» resloved\n\t\t\t\t- promise1 PromiseÂ {\\<resolved\\>: \"success\"}\n\t\t\t- console.log(\"promise2\", promise2);\n\t\t\t\t- promise2 Promise {\\<rejected\\>: Error: error!!! at \\<anonymous\\>:8:9}\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å…­è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/88a197ec5863fcca93b072d3baecf6a0113849.png)\n\n\n### Promise ä¸­çš„ thenã€catchã€finally\n\n3.1 é¢˜ç›®ä¸€\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  resolve(\"success1\");\n  reject(\"error\");\n  resolve(\"success2\");\n});\npromise\n.then(res => {\n    console.log(\"then: \", res);\n  }).catch(err => {\n    console.log(\"catch: \", err);\n  })\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°\n\t\t- resolve(\"success1\"); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- promise.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise.then ...\n\t\t- console then:  success1\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/448d9fb1db29ba7e76762f97a9508d1e35386.png)\n- ç»“è®º\n\t- **Promiseçš„çŠ¶æ€ä¸€ç»æ”¹å˜å°±ä¸èƒ½å†æ”¹å˜**\n\t- **æ„é€ å‡½æ•°ä¸­çš„ resolve æˆ– reject åªæœ‰ç¬¬ä¸€æ¬¡æ‰§è¡Œæœ‰æ•ˆï¼Œå¤šæ¬¡è°ƒç”¨æ²¡æœ‰ä»»ä½•ä½œç”¨**ã€‚\n\n\n3.2 é¢˜ç›®äºŒ\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  reject(\"error\");\n  resolve(\"success2\");\n});\npromise\n.then(res => {\n    console.log(\"then1: \", res);\n  }).then(res => {\n    console.log(\"then2: \", res);\n  }).catch(err => {\n    console.log(\"catch: \", err);\n  }).then(res => {\n    console.log(\"then3: \", res);\n  })\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°\n\t\t- reject(\"error\"); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º rejectedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise.then ...\n\t- ç”±äº promise çŠ¶æ€ä¸º rejectedï¼Œå› æ­¤è§¦å‘ catch ï¼Œä¸ç®¡ catch è¿æ¥åˆ°å“ªï¼Œéƒ½èƒ½æ•è·ä¸Šå±‚æœªæ•æ‰è¿‡çš„é”™è¯¯\n\t\t- console.log(\"catch: \", err);\n\t\t- return a new promise\n\t- ç”±äº æ–°çš„ promise æ²¡æœ‰è¿”å›å€¼ï¼Œå› æ­¤è¿”å› undefined\n\n- ç»“è®º\n\t- **catchä¸ç®¡è¢«è¿æ¥åˆ°å“ªé‡Œï¼Œéƒ½èƒ½æ•è·ä¸Šå±‚æœªæ•æ‰è¿‡çš„é”™è¯¯**\n\t- è‡³äº then3 ä¹Ÿä¼šè¢«æ‰§è¡Œï¼Œé‚£æ˜¯å› ä¸º**catch()ä¹Ÿä¼šè¿”å›ä¸€ä¸ª Promise **ï¼Œä¸”ç”±äºè¿™ä¸ª Promise æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥æ‰“å°å‡ºæ¥çš„æ˜¯ undefined ã€‚\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/8523408bd03cb268237e720380e1273d47036.png)\n\n\t\n3.3 é¢˜ç›®ä¸‰\n\n```javascript\nPromise.resolve(1)\n  .then(res => {\n    console.log(res);\n    return 2;\n  })\n  .catch(err => {\n    return 3;\n  })\n  .then(res => {\n    console.log(res);\n  });\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€ä¸º resolved, å› æ­¤è§¦å‘ then\n\t\t- console.log(res); res --> 1\n\t- æ²¡æœ‰æŠ¥é”™ï¼Œç•¥è¿‡ catch\n\t- è¢« then æ•æ‰\n\t\t- console.log(2); è¿”å›æ–°çš„ promiseï¼Œ promise è¿”å› resolve(2)\n\n- ç»“è®º\n\t- **Promise å¯ä»¥é“¾å¼è°ƒç”¨**ï¼Œä¸è¿‡ promise æ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œä»è€Œå®ç°äº†é“¾å¼è°ƒç”¨, å®ƒå¹¶ä¸åƒä¸€èˆ¬æˆ‘ä»¬ä»»åŠ¡çš„é“¾å¼è°ƒç”¨ä¸€æ · return thisã€‚\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/2ca378bb1952c6fbacc3028024b1b89027624.png)\n\n\n3.4 é¢˜ç›®å››\n\n```javascript\nPromise.reject(1)\n  .then(res => {\n    console.log(res);\n    return 2;\n  })\n  .catch(err => {\n    console.log(err);\n    return 3\n  })\n  .then(res => {\n    console.log(res);\n  });\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€ä¸º rejectedï¼Œå› æ­¤è§¦å‘ catch\n\t\t- console.log(err); err --> 1\n\t\t- return resolve(3)\n\t- è¢« then æ•æ‰\n\t\t- console.log(3) \n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å››è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/ed821dfd96ad96250140abdedf581fd930226.png)\n\n\n3.5 é¢˜ç›®äº”\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    console.log('timer')\n    resolve('success')\n  }, 1000)\n})\nconst start = Date.now();\npromise.then(res => {\n  console.log(res, Date.now() - start)\n})\npromise.then(res => {\n  console.log(res, Date.now() - start)\n})\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- promise.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- promise.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise.then ...\n\t- å› ä¸º promise çŠ¶æ€å¹¶æ²¡æœ‰ resolvedã€rejectedï¼Œä¸€ç›´å¤„åœ¨ pendingï¼Œå¹¶ä¸èƒ½è°ƒç”¨ then æ–¹æ³•\n\t- åŒä¸Š\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œç¬¬äºŒä¸ªå®ä»»åŠ¡ setTimeout ...\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('timer')\n\t\t- promise çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t\t\t- çŠ¶æ€å¾€ä¸ŠæŠ›\n\t\t\t- console.log(res, Date.now() - start)\n\t\t\t- console.log(res, Date.now() - start))\n\n- ç»“è®º\n\t- **Promise çš„ .then æˆ–è€… .catch å¯ä»¥è¢«è°ƒç”¨å¤šæ¬¡ï¼Œä½†è¿™é‡Œ Promise æ„é€ å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ã€‚æˆ–è€…è¯´ promise å†…éƒ¨çŠ¶æ€ä¸€ç»æ”¹å˜ï¼Œå¹¶ä¸”æœ‰äº†ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆåç»­æ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šç›´æ¥æ‹¿åˆ°è¯¥å€¼ã€‚**\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äº”è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/9ee74ca562f7c913d51c9fd5fe60680543896.png)\n\n3.6 é¢˜ç›®å…­\n\n```javascript\nPromise.resolve().then(() => {\n  return new Error('error!!!')\n}).then(res => {\n  console.log(\"then: \", res)\n}).catch(err => {\n  console.log(\"catch: \", err)\n})\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€æ›´æ”¹ä¸º resolveï¼Œå¹¶æ— è¿”å›å€¼\n\t- æ‰§è¡Œ then\n\t\t- throw new Error('error!!!')\n\t\t- return Promise.reject(new Error('error!!!'))\n\t- è¢« catch æ•æ‰\n\t\t- console.log(\"catch: \", err) err --> error\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å…­è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/a1cb4e4f5e5ec95e2215d5b7ecc6a32428525.png)\n\t\n\t\n3.7 é¢˜ç›®ä¸ƒ\n\n```javascript\nconst promise = Promise.resolve().then(() => {\n  return promise;\n})\npromise.catch(console.err)\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€æ”¹å˜ä¸º resolve ï¼Œå¹¶æ— è¿”å›å€¼\n\t- æ‰§è¡Œ then\n\t\t- return Promise.resolve(promise)\n\t\t- Chaining cycle detected for promise\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- promise.catch promise cycle\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸ƒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/70dbed986bad1d410ad7be3de8fe963d21008.png)\n\n\t\n3.8 é¢˜ç›®å…«\n\n```javascript\nPromise.resolve(1)\n  .then(2)\n  .then(Promise.resolve(3))\n  .then(console.log)\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€æ”¹å˜ä¸º resolveï¼Œ return Promise.resolve(1)\n\t- .then æˆ–è€… .catch çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿå€¼é€ä¼ \n\t- ç¬¬ä¸€ä¸ªthenå’Œç¬¬äºŒä¸ªthenä¸­ä¼ å…¥çš„éƒ½ä¸æ˜¯å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯æ•°å­—ç±»å‹ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡ç±»å‹ï¼Œå› æ­¤å‘ç”Ÿäº†é€ä¼ ï¼Œå°†resolve(1) çš„å€¼ç›´æ¥ä¼ åˆ°æœ€åä¸€ä¸ªthené‡Œ\n\n- ç»“è®º\n\t- **.then æˆ–è€… .catch çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿå€¼é€ä¼ **\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å…«è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/68c56ed26f2845300ecba0dc6dc7a3e914382.png)\n\n\n3.9 é¢˜ç›®ä¹\n\n```javascript\nPromise.reject('err!!!')\n  .then((res) => {\n    console.log('success', res)\n  }, (err) => {\n    console.log('error', err)\n  }).catch(err => {\n    console.log('catch', err)\n  })\n```\n\n- æˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹çœ‹ï¼Œå¦‚æœ catch ä½äº†é”™è¯¯ï¼Œerr ä¼šä¸€ç›´é“¾å¼ä¼ é€’ä¸‹å»è¢« catchå˜›\n- ![æ˜¯å¦ä¼šè¢«ä¸€ç›´catch](http://p1.meituan.net/myvideodistribute/f9859062c1341e2e575f952e320aba4222620.png)\n\t- ä¸€æ—¦ catch ä½å½“å‰æŠ¥é”™ï¼Œå½“å‰æŠ¥é”™å¹¶ä¸ä¼šå†å¾€ä¸‹ä¼ é€’\n- ![é€è¡Œè°ƒç”¨catchæ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„](http://p1.meituan.net/myvideodistribute/9846287852a98f322045973bf302c58f24992.png)\n\t- é€è¡Œè°ƒç”¨ then æ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„\n- é‚£æˆ‘è¿˜å¯ä»¥çœ‹çœ‹ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œres ä¼šä¸€ç›´é“¾å¼ä¼ é€’ then æ‰§è¡Œå˜›\n- ![æ˜¯å¦ä¼šè¢«ä¸€ç›´then](http://p1.meituan.net/myvideodistribute/e2e72158c05ceee7da7528ff9a20348426425.png)\n\t- å¯ä»¥çœ‹å‡º then æ˜¯ä¼šä¸€ç›´å¾€ä¸‹ä¼ é€’çš„\n- ![é€è¡Œè°ƒç”¨then æ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„](http://p0.meituan.net/myvideodistribute/abb8ccf3daffdd023ce079c86cafdfd626377.png)\n\t- é€è¡Œè°ƒç”¨ then æ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€æ”¹å˜ä¸º rejectedï¼Œreturn 'err!!!'\n\t- æ‰§è¡Œ thenï¼Œthen ä¸­ç¬¬äºŒä¸ªå‡½æ•°ï¼Œç›¸å½“äº catch\n\t- å› æ­¤æ‰§è¡Œ\n\t- console.log('error', err) err --> err!!!\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¹è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/05e3b86caaf2b9cbf0c6326020e3385327546.png)\n\n\n```javascript\nPromise.resolve()\n  .then(function success (res) {\n    throw new Error('error!!!')\n  }, function fail1 (err) {\n    console.log('fail1', err)\n  }).catch(function fail2 (err) {\n    console.log('fail2', err)\n  })\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€å˜ä¸º resolveï¼Œ\n\t- æ‰§è¡Œ then\n\t\t- throw new Error('error!!!')\n\t- è¢« catch \n\t\t- console.log('fail2', err) err --> error!!!\n\n- è¿è¡Œç»“æœ\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/c8643d8fb0fd251145befd28d635ed7e33265.png)\n\n3.10 é¢˜ç›®å\n\n```javascript\nPromise.resolve('1')\n  .then(res => {\n    console.log(res)\n  })\n  .finally(() => {\n    console.log('finally')\n  })\nPromise.resolve('2')\n  .finally(() => {\n    console.log('finally2')\n  \treturn 'æˆ‘æ˜¯finally2è¿”å›çš„å€¼'\n  })\n  .then(res => {\n    console.log('finally2åé¢çš„thenå‡½æ•°', res)\n  })\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€å˜ä¸º resolveï¼Œreturn 1\n\t- æ‰§è¡Œ then\n\t\t- console.log(res) res --> return new Promiseï¼Œ resolve(1) åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- promise çŠ¶æ€å˜ä¸º resolve, return 2\n\t\t- æ‰§è¡Œ finally\n\t\t\t- console.log('finally2')\n\t\t\t- return new Promiseï¼Œ resolve('æˆ‘æ˜¯finally2è¿”å›çš„å€¼') åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹è¿˜è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log('finally')\n\t\t- console.log('finally2åé¢çš„thenå‡½æ•°', res) res --> 2\n\n- ç»“è®º\n\t- .finally()æ–¹æ³•ä¸ç®¡Promiseå¯¹è±¡æœ€åçš„çŠ¶æ€å¦‚ä½•éƒ½ä¼šæ‰§è¡Œ\n\t- .finally()æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨.finally()å‡½æ•°ä¸­æ˜¯æ²¡æ³•çŸ¥é“Promiseæœ€ç»ˆçš„çŠ¶æ€æ˜¯resolvedè¿˜æ˜¯rejectedçš„\n\t- å®ƒæœ€ç»ˆè¿”å›çš„é»˜è®¤ä¼šæ˜¯ä¸€ä¸ª**ä¸Šä¸€æ¬¡çš„Promiseå¯¹è±¡å€¼**ï¼Œä¸è¿‡å¦‚æœæŠ›å‡ºçš„æ˜¯ä¸€ä¸ªå¼‚å¸¸åˆ™è¿”å›å¼‚å¸¸çš„Promiseå¯¹è±¡ã€‚\n\t- **promise æ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œä»è€Œå®ç°äº†é“¾å¼è°ƒç”¨** \n\t\t\n\t\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®åè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/99d8936b8c5029a6786b464868666f7d47917.png)\n\n\t\n### Promise ä¸­çš„ all å’Œ race\n\n- Promise.all(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª Promise å®ä¾‹ï¼Œæ­¤å®ä¾‹åœ¨ iterable å‚æ•°å†…æ‰€æœ‰çš„ promise éƒ½â€œå®Œæˆï¼ˆresolvedï¼‰â€æˆ–å‚æ•°ä¸­ä¸åŒ…å« promise æ—¶å›è°ƒå®Œæˆï¼ˆresolveï¼‰ï¼›å¦‚æœå‚æ•°ä¸­  promise æœ‰ä¸€ä¸ªå¤±è´¥ï¼ˆrejectedï¼‰ï¼Œæ­¤å®ä¾‹å›è°ƒå¤±è´¥ï¼ˆrejectï¼‰ï¼Œå¤±è´¥çš„åŸå› æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥ promise çš„ç»“æœã€‚\n- Promise.race(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª promiseï¼Œä¸€æ—¦è¿­ä»£å™¨ä¸­çš„æŸä¸ªpromiseè§£å†³æˆ–æ‹’ç»ï¼Œè¿”å›çš„ promiseå°±ä¼šè§£å†³æˆ–æ‹’ç»ã€‚\n\n\n4.1 é¢˜ç›®ä¸€\n\n```javascript\nfunction runAsync (x) {\n    const p = new Promise(r => setTimeout(() => r(x, console.log(x)), 1000))\n    return p\n}\nPromise.all([runAsync(1), runAsync(2), runAsync(3)])\n  .then(res => console.log(res))\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- Promise.all å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- é—´éš”ä¸€ç§’åï¼Œæ§åˆ¶å°ä¼šåŒæ—¶æ‰“å°å‡º1, 2, 3ï¼Œè¿˜æœ‰ä¸€ä¸ªæ•°ç»„[1, 2, 3]\n- ç»“è®º\n\t- **æœ‰äº†allï¼Œå°±å¯ä»¥å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå›è°ƒä¸­å¤„ç†æ‰€æœ‰çš„è¿”å›æ•°æ®**\n\t- .all()åé¢çš„.then()é‡Œçš„å›è°ƒå‡½æ•°æ¥æ”¶çš„å°±æ˜¯æ‰€æœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœã€‚\n\t- è€Œä¸”è¿™ä¸ªç»“æœä¸­æ•°ç»„çš„é¡ºåºå’ŒPromise.all()æ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºä¸€è‡´\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/d3a6d5f4f158de806b690af124fcec9431029.png)\n\n\t\n4.2 é¢˜ç›®äºŒ\n\n```javascript\nfunction runAsync (x) {\n  const p = new Promise(r => setTimeout(() => r(x, console.log(x)), 1000))\n  return p\n}\nfunction runReject (x) {\n  const p = new Promise((res, rej) => setTimeout(() => rej(`Error: ${x}`, console.log(x)), 1000 * x))\n  return p\n}\nPromise.all([runAsync(1), runReject(4), runAsync(3), runReject(2)])\n  .then(res => console.log(res))\n  .catch(err => console.log(err))\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- Promise.all å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- é—´éš”ä¸€ç§’åï¼Œæ§åˆ¶å°ä¼šåŒæ—¶æ‰“å°å‡º 1, 3\n\t- ç”±äº runReject(4) æ¯” runReject(2) æ™šå…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸” catch åªæ‰§è¡Œä¸€æ¬¡\n\t\t- å†é—´éš”ä¸€ç§’å\n\t\t\t- console.log(x) x --> 2\n\t\t\t- console.log('Error: 2')\n\t\t- å†é—´éš”2ç§’å\n\t\t\t- console.log(x) x --> 4\n\t\t\t- ä¸ä¼šå†æ‰§è¡Œ catch\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒè¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/e0e25426dc0d49c3af9acee68744760d51135.png)\n\n- ç­‰åŒäº\n\t\n\t```javascript\n\tfunction runAsync (x) {\n\t  const p = new Promise(r => setTimeout(() => r(x, console.log(x)), 1000))\n\t  return p\n\t}\n\tfunction runReject (x) {\n\t  const p = new Promise((res, rej) => setTimeout(() => rej(`Error: ${x}`, console.log(x)), 1000 * x))\n\t  return p\n\t}\n\tPromise.all([runAsync(1), runReject(4), runAsync(3), runReject(2)])\n\t  .then(res => console.log(res), \n\t  err => console.log(err);\n\t```\n- ç»“è®º\n\t- all å’Œ raceä¼ å…¥çš„æ•°ç»„ä¸­å¦‚æœæœ‰ä¼šæŠ›å‡ºå¼‚å¸¸çš„å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€å…ˆæŠ›å‡ºçš„é”™è¯¯ä¼šè¢«æ•è·ï¼Œå¹¶ä¸”æ˜¯è¢« then çš„ç¬¬äºŒä¸ªå‚æ•°æˆ–è€…åé¢çš„ catch æ•è·ï¼›ä½†å¹¶ä¸ä¼šå½±å“æ•°ç»„ä¸­å…¶å®ƒçš„å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚\n\n4.3 é¢˜ç›®ä¸‰\n\n```javascript\nfunction runAsync (x) {\n  const p = new Promise(r => setTimeout(() => r(x, console.log(x)), 1000))\n  return p\n}\nPromise.race([runAsync(1), runAsync(2), runAsync(3)])\n  .then(res => console.log('result: ', res))\n  .catch(err => console.log(err))\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- Promise.race å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- åœ¨é—´éš”æ—¶é—´éƒ½ä¸€æ ·çš„æƒ…å†µä¸‹ï¼ŒrunAsync1 æœ€å…ˆåŠ å…¥é˜Ÿåˆ—\n\t- å› æ­¤\n\t\t- console.log(x) x --> 1\n\t- ç”±äº race çš„ç‰¹æ®Šæ€§ï¼Œåªæ•æ‰æœ€å…ˆæ‰§è¡Œå®Œæˆçš„é‚£ä¸ªç»“æœ\n\t\t- console.log('result: ', res) res --> 1\n\t- å†\n\t\t- console.log(x) x --> 2\n\t\t- console.log(x) x --> 3\n\t- æ²¡æœ‰æŠ¥é”™ï¼Œä¸ä¼šè¢« catch\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/2eda438cd745e39ba934af362a80521038770.png)\n\n4.4 é¢˜ç›®å››\n\n```javascript\nfunction runAsync(x) {\n  const p = new Promise(r =>\n    setTimeout(() => r(x, console.log(x)), 1000)\n  );\n  return p;\n}\nfunction runReject(x) {\n  const p = new Promise((res, rej) =>\n    setTimeout(() => rej(`Error: ${x}`, console.log(x)), 1000 * x)\n  );\n  return p;\n}\nPromise.race([runReject(0), runAsync(1), runAsync(2), runAsync(3)])\n  .then(res => console.log(\"result: \", res))\n  .catch(err => console.log(err));\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- Promise.race å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- runReject(0) æœ€å…ˆä¼ å…¥\n\t- å› æ­¤\n\t\t- console.log(x) x --> 0\n\t\t- console.log(err) err --> Error: 0\n\t- é—´éš”å°äº1ç§’å\n\t- runAsync(1), runAsync(2), runAsync(3)\n\t\t- ä¾æ¬¡ä¸º\n\t\t- console.log(x) x --> 1\n\t\t- console.log(x) x --> 2\n\t\t- console.log(x) x --> 3\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å››](http://p1.meituan.net/myvideodistribute/89acbf32e7218b90c050526171bd1b3d53719.png)\n\n\n\n\n\t\n## å‚è€ƒæ–‡çŒ®\n- [é¢˜ç›®æ¥æº](https://juejin.im/post/5e58c618e51d4526ed66b5cf)\n\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","source":"_posts/Javascript-è¿è¡Œæœºåˆ¶.md","raw":"---\ntitle: ã€æœªå®Œã€‘Javascript-è¿è¡Œæœºåˆ¶ï¼ˆä¸€ï¼‰\ndate: 2020-04-30 23:55:49\ntags: \n- å‰ç«¯æ¦‚å¿µ\ncategories:\n- å‰ç«¯æ¦‚å¿µ\ndescription:\n- Javascript -- Expression\n\n\n---\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- äº”ä¸€å‡æœŸï¼Œæ¥å†™ä¸€å†™ Promise çš„é¢˜å§ï¼Œå˜¿å˜¿å˜¿ ğŸ˜ƒ\n- äº”ä¸€å€’è®¡æ—¶ 3 å¤©\n\n<!-- more -->\n\n## å®è·µå‡†å¤‡\n\n\n```Objective-C\n#import <Foundation/Foundation.h>\n#import <JavaScriptCore/JavaScriptCore.h>\n\nint main(int argx, const char * argv[]) {\n  @autoreleasepool {\n    // var context = new JSContext\n    \n    \n    // define a javascript context\n    JSContext* context = [[JSContext alloc] init];\n    // like:var result = null;\n    JSValue* result;\n    \n    while(true) {\n      char sourcecode[1024];\n      \n      scanf('%s', &sourcecode);\n      NSString* code = [NSString stringWithUTF8String: sourcecode];\n      \n      result = [context evaluateScript:code];\n      \n      NSLog(@\"%@\", [result toString]);\n      \n    }\n  \n  return 0;\n\n}\n\n```\n\n- å¦‚ä¸Šå®ç°ä¸€ä¸ªç®€å•çš„äº‹ä»¶å¾ªç¯ï¼Œç”¨æ¥è¾“å‡º console\n- ![OC æ–¹æ³•](http://p1.meituan.net/myvideodistribute/a99619da1cded49f443ded2fc219b27432778.png)\n- æˆ‘ä»¬åœ¨ Javascript ä¸­è®²çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ã€å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ˜¯ Javascript è°ƒç”¨æ–¹å»ä½¿ç”¨ Javascript çš„ä¸€ç§æ–¹å¼ï¼Œå¦‚æœä»…æ˜¯æ‰§è¡Œä¸€æ®µä»£ç ï¼Œæ˜¯ä¸éœ€è¦äº‹ä»¶å¾ªç¯çš„ã€‚é€šè¿‡è¿™æ®µä»£ç ï¼Œæ˜¯å¯ä»¥çœ‹å‡ºæ¥ï¼ŒJavascript çš„äº‹ä»¶å¾ªç¯ï¼Œæ˜¯åœ¨ JSContext ä¹‹å¤–ï¼Œäº‹ä»¶å¾ªç¯ç›¸å…³çŸ¥è¯†ï¼Œæ—¢ä¸æ˜¯ Javascript å¼•æ“çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ Javascript è¯­è¨€çš„ä¸€éƒ¨åˆ†ã€‚\n- code çš„ä¼ å…¥æ–¹å¼\n\t- &lt;script&gt;&lt;/script&gt; æ™®é€šä»£ç ç‰‡æ®µ\n\t- &lt;script type=\"module\"&gt;&lt;/script&gt;\n\t- å‡½æ•°\n\n\n```Objective-C\n#import <Foundation/Foundation.h>\n#import <JavaScriptCore/JavaScriptCore.h>\n\nint main(int argx, const char * argv[]) {\n  @autoreleasepool {\n    // var context = new JSContext\n    \n    \n    // define a javascript context\n    JSContext* context = [[JSContext alloc] init];\n    // like:var result = null;\n    JSValue* result;\n    \n    // TODO: calculate the square of arg x\n    NSString* code = @\"(function(x){ return x * x; })\";\n    \n    \n    // like: result = (function(x){ return x * x; })\n    result = [context evaluateScript:code];\n    \n    // passing the number 4 into the function\n    JSValue* arg1 = [JSValue valueWithInt32:4 inContext:context];\n    \n    // execute the function with arg of 4\n    NSLog(@\"%@\", [[result callWithArguments:@[arg1]] toString]);\n  \n  }\n  \n  return 0;\n\n}\n\n```\n\n- ä¸Šé¢çš„ Object-C ä»£ç ï¼Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬æ˜¯å°†ä¸€æ®µä¸€æ®µçš„ä»£ç ï¼Œä¼ å…¥ evaluateScript ä¸­æ‰§è¡Œã€‚\n\n\n```Objective-C\n#import <Foundation/Foundation.h>\n#import <JavaScriptCore/JavaScriptCore.h>\n\nint main(int argx, const char * argv[]) {\n  @autoreleasepool {\n    // var context = new JSContext\n    \n    \n    // define a javascript context\n    JSContext* context = [[JSContext alloc] init];\n    // like:var result = null;\n    JSValue* result;\n    \n    // TODO: calculate the square of arg x\n    NSString* code = @\"new Promise(resolve => resolve()).then(() => this.a = 3), function(){return this.a};\";\n        \n    result = [context evaluateScript:code];\n    \n    // like: result();\n    NSLog(@\"%@\", [[result callWithArguments:@[]] toString]);\n  \n  }\n  \n  return 0;\n\n}\n\n```\n\n- evaluateScript å®é™…ä¸Šæ‰§è¡Œä¸¤æ­¥ï¼š\n\t1. æ‰§è¡Œæ•´ä¸ªæ–¹æ³•\n\t\t\n\t\t> new Promise(resolve => resolve()).then(() => this.a = 3), function(){return this.a};\n\t\n\t\t- é€—å·è¡¨è¾¾å¼ï¼Œæ°¸è¿œè¿”å›åé¢çš„å€¼ï¼Œå¦‚æœè¢«è°ƒç”¨ï¼Œå‰é¢çš„ä¼šè¢«æ‰§è¡Œ\n\t2. æ‰§è¡Œ Promise ä¸­ then åé¢çš„è¯­å¥\n\t- ![evaluateScript](http://p0.meituan.net/myvideodistribute/81d945c99778450fd86a710f20355cbc269796.png)\n\t- æœ‰ then ,å¯èƒ½äº§ç”Ÿä¸€ä¸ªå®ä»»åŠ¡é‡Œé¢æœ‰å¤šä¸ªå¾®ä»»åŠ¡çš„æƒ…å†µï¼Œ ä¸€åˆ‡JS ä»£ç éƒ½æ˜¯å¾®ä»»åŠ¡ä¸­æ‰§è¡Œçš„\n\t- æ‹¿æµè§ˆå™¨ä¸¾ä¾‹ï¼šsetTimeoutã€setInterval è¿™ç§å…¶å®ä¸æ˜¯ JS è¯­æ³•æœ¬èº«çš„ APIï¼Œæ˜¯ JS çš„å®¿ä¸»æµè§ˆå™¨æä¾›çš„ APIï¼Œ æ‰€ä»¥æ˜¯å®ä»»åŠ¡ã€‚\n\t- è€Œ Promise æ˜¯ JS æœ¬èº«è‡ªå¸¦çš„ APIï¼Œè¿™ç§å°±æ˜¯å¾®ä»»åŠ¡ã€‚\n- æ€»ç»“ï¼š**å®¿ä¸»æä¾›çš„æ–¹æ³•æ˜¯å®ä»»åŠ¡ï¼ŒJS è‡ªå¸¦çš„æ˜¯å¾®ä»»åŠ¡**\n- **ä»»åŠ¡åˆ—è¡¨åˆ—é‡Œé¢æœ‰å¾ˆå¤šå®ä»»åŠ¡ï¼Œç„¶åæ¯ä¸ªå®ä»»åŠ¡é‡Œé¢æœ‰ä¸€ä¸ªå¾®ä»»åŠ¡åˆ—è¡¨ï¼Œæ¯ä¸ªå®ä»»åŠ¡æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ä¹‹å‰ä¼šæŠŠè‡ªå·±å†…éƒ¨çš„å¾®ä»»åŠ¡æ‰§è¡Œå®Œ**\n- **å®ä»»åŠ¡**åŒ…æ‹¬ï¼šscript ã€setTimeoutã€setInterval ã€setImmediate ã€I/O ã€UI renderingã€‚\n- **å¾®ä»»åŠ¡**åŒ…æ‹¬ï¼šMutationObserverã€Promise.then()æˆ–catch()ã€Promiseä¸ºåŸºç¡€å¼€å‘çš„å…¶å®ƒæŠ€æœ¯ï¼Œæ¯”å¦‚fetch APIã€V8çš„åƒåœ¾å›æ”¶è¿‡ç¨‹ã€Nodeç‹¬æœ‰çš„process.nextTickã€‚\n\t\t\n\n\n# Javascript ç»“æ„åŒ–ç¨‹åºè®¾è®¡åŸºç¡€\n\n\n## å®è·µè®°å½•\n### åŸºç¡€é¢˜\n\n1.1 é¢˜ç›®ä¸€\n\n```javascript\nconst promise1 = new Promise((resolve, reject) => {\n  console.log('promise1')\n})\nconsole.log('1', promise1);\n```\n\n- åˆ†æï¼š\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­ console.log('promise1')\n\t\n\t> console.log('1', promise1);\n\t\n\t- å†æ‰§è¡ŒåŒæ­¥ä»£ç \n\t- æ‰§è¡Œå®Œåï¼Œ promise1 ä¸­å¹¶æ²¡æœ‰ resolved, rejectedï¼Œ ä¸€ç›´å¤„åœ¨ pending çš„çŠ¶æ€\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€æ‰§è¡Œ](http://p0.meituan.net/myvideodistribute/f45e1dbe45d84e46ab2fd24703cad0c521137.png)\n\n1.2 é¢˜ç›®äºŒ\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  console.log(1);\n  resolve('success')\n  console.log(2);\n});\npromise.then(() => {\n  console.log(3);\n});\nconsole.log(4);\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­\n\t\t- console.log(1);\n\t\t- resolve('success') å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t\t- console.log(2);\n\t- promise.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å†æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç \n\t\t- console.log(4);\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸” promise ä¸ºresolvedï¼Œæ‰§è¡Œ promise.then\n\t\t- console.log(3);\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒæ‰§è¡Œ](http://p0.meituan.net/myvideodistribute/c31fd6e9ba9c9f9ac4062d6b395706f230745.png)\n\n1.3 é¢˜ç›®ä¸‰\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  console.log(1);\n  console.log(2);\n});\npromise.then(() => {\n  console.log(3);\n});\nconsole.log(4);\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­\n\t\t- console.log(1);\n\t\t- console.log(2);\n\t\t- è¯¥ promise æ²¡æœ‰ resolved, rejected, ä¸€ç›´å¤„åœ¨ pending\n\t- promise.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å†æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç \n\t\t- console.log(4);\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä½† promise ä¸ºpendingï¼Œä¸å¯èƒ½æ‰§è¡Œ promise.then ä¸­æ–¹æ³•\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰æ‰§è¡Œ](http://p0.meituan.net/myvideodistribute/b6e827ca293c65c261a83a81f1f5411227105.png)\n\n1.4 é¢˜ç›®å››\n\n```javascript\nconst promise1 = new Promise((resolve, reject) => {\n  console.log('promise1')\n  resolve('resolve1')\n})\nconst promise2 = promise1.then(res => {\n  console.log(res)\n})\nconsole.log('1', promise1);\nconsole.log('2', promise2);\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­\n\t\t- console.log('promise1')\n\t\t- resolve('resolve1') å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- promise1.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- promise2 æ˜¯ä¸€ä¸ªæ–°çŠ¶æ€ä¸º pending çš„ Promise\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('1', promise1);\n\t\t\t- promise1 ä¸­çŠ¶æ€åœ¨ä¸Šé¢å·²ç»æ›´æ”¹ä¸º resolved\n\t\t- console.log('2', promise2);\n\t\t\t- promise2 ä¸­çŠ¶æ€ä¸ºpending\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then \n\t\t- console.log(res) \n\t\t\t- å…¶ä¸­ promise1.thenï¼Œ promise1 çš„çŠ¶æ€ä¸º resolved\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å››è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/f31e7f8db309521b5252143252eaed2551272.png)\n\n\n1.5 é¢˜ç›®äº”\n\n```javascript\nconst fn = () => (new Promise((resolve, reject) => {\n  console.log(1);\n  resolve('success')\n}))\nfn().then(res => {\n  console.log(res)\n})\nconsole.log('start')\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œconst fn = () => (Promise Object) è¿”å›ä¸€ä¸ª promise å¯¹è±¡\n\t- fn()ï¼Œæ‰§è¡Œ fn æ–¹æ³•\n\t\t- console.log(1);\n\t\t- resolve('success') å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- Function.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('start')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— Function.then\n\t\t- console.log(res) å…¶ä¸­ promise çš„çŠ¶æ€ä¸º resolved\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äº”è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/955895672615c24a4eb671617d8b739829033.png)\n\n\n1.6 é¢˜ç›®å…­\n\n```javascript\nconst fn = () =>\n  new Promise((resolve, reject) => {\n    console.log(1);\n    resolve(\"success\");\n  });\nconsole.log(\"start\");\nfn().then(res => {\n  console.log(res);\n});\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œconst fn = () => (Promise Object) è¿”å›ä¸€ä¸ª promise å¯¹è±¡\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t-  console.log(\"start\");\n\t- fn(), æ‰§è¡Œ fn æ–¹æ³•\n\t\t- console.log(1);\n\t\t- resolve(\"success\"); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- Function.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— Function.then\n\t\t- console.log(res); å…¶ä¸­ promise çš„çŠ¶æ€ä¸º resolved\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å…­è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/ccd1a9148be91f5aa24847a0d4e23dfb31837.png)\n\n### Promise ç»“åˆ setTimeout\n\n2.1 é¢˜ç›®ä¸€\n\n```javascript\nconsole.log('start')\nsetTimeout(() => {\n  console.log('time')\n})\nPromise.resolve().then(() => {\n  console.log('resolve')\n})\nconsole.log('end')\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('start')\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- Promise.resolve().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('end')\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— Promise.resolve().then\n\t\t- console.log('resolve')\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout ...\n\t\t- console.log('time')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/4a9c74ab2a26cc16e55ce53f6fb765d630133.png)\n\n2.2 é¢˜ç›®äºŒ\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  console.log(1);\n  setTimeout(() => {\n    console.log(\"timerStart\");\n    resolve(\"success\");\n    console.log(\"timerEnd\");\n  }, 0);\n  console.log(2);\n});\npromise.then((res) => {\n  console.log(res);\n});\nconsole.log(4);\n```\n\n- åˆ†æ\n\t- ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­\n\t\t- console.log(1);\n\t\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log(2);\n\t- promise.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(4);\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— å…¶ä¸­ promise ä¸­ï¼Œå¹¶æ²¡æœ‰ resolvedã€rejectedï¼Œä¸€ç›´åœ¨ pendingï¼Œä¸å¯èƒ½æ‰§è¡Œ promise.then ä¸­æ–¹æ³•\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout ...\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡ setTimeout ä»£ç ä»ä¸Šè‡³ä¸‹æ‰§è¡Œ\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(\"timerStart\");\n\t\t- resolve(\"success\"); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t\t- console.log(\"timerEnd\");\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/66ea5bbd68d0841ad58cac5ca771625347414.png)\n\n\t\n2.3 é¢˜ç›®ä¸‰\n\n```javascript\nsetTimeout(() => {\n  console.log('timer1');\n  setTimeout(() => {\n    console.log('timer3')\n  }, 0)\n}, 0)\nsetTimeout(() => {\n  console.log('timer2')\n}, 0)\nconsole.log('start')\n```\n\n- åˆ†æ\n\t- ä»ä¸Šæ‰§è¡Œ\n\t- setTimeout ... åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\n\t- setTimeout ... åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('start')\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout ...\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç  \n\t\t- console.log('timer1');\n\t- setTimeout ... åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('timer2')\n\t- ç¬¬ä¸‰ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('timer3')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/b5ab6578c5ba7d8d727a3bf47ba8879033812.png)\n\n```javascript\nsetTimeout(() => {\n  console.log('timer1');\n  Promise.resolve().then(() => {\n    console.log('promise')\n  })\n}, 0)\nsetTimeout(() => {\n  console.log('timer2')\n}, 0)\nconsole.log('start')\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- setTimeout ... åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\n\t- setTimeout ... åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('start')\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout ...\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('timer1');\n\t\t- Promise.resolve().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t\t- console.log('promise')\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout ...\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('timer2')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/f65f2aa65848d2e8aaf5c3918509c6e934427.png)\n\n\n2.4 é¢˜ç›®å››\n\n```javascript\nPromise.resolve().then(() => {\n  console.log('promise1');\n  const timer2 = setTimeout(() => {\n    console.log('timer2')\n  }, 0)\n});\nconst timer1 = setTimeout(() => {\n  console.log('timer1')\n  Promise.resolve().then(() => {\n    console.log('promise2')\n  })\n}, 0)\nconsole.log('start');\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- Promise.resolve().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t- console.log('start');\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t- console.log('promise1');\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout ...\n\t- console.log('timer2')\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t- console.log('timer1')\n\t- Promise.resolve().then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- console.log('promise2')\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- console.log('timer2')\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å››è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/60a22379f31bb12de055ed83a31aca0b46969.png)\n\n2.5 é¢˜ç›®äº” ** å­˜åœ¨å’Œä¹‹å‰ä¸€æ ·çš„ï¼Œpromise resolved åï¼ŒçŠ¶æ€ä¸ŠæŠ›è‡³ä¸Šä¸€ä¸ª å®ä»»åŠ¡é˜Ÿåˆ—çš„é—®é¢˜\n\n```javascript\nconst promise1 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve('success')\n  }, 1000)\n})\nconst promise2 = promise1.then(() => {\n  throw new Error('error!!!')\n})\nconsole.log('promise1', promise1)\nconsole.log('promise2', promise2)\nsetTimeout(() => {\n  console.log('promise1', promise1)\n  console.log('promise2', promise2)\n}, 2000)\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- å…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­\n\t- setTimout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- promise1.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('promise1', promise1)\n\t\t\t- å…¶ä¸­ promise1 æ²¡æœ‰ resolvedã€rejected,ä¸€ç›´å¤„åœ¨ pending çŠ¶æ€\n\t\t\t- promise1 PromiseÂ {\\<pending\\>}\n\t\t- console.log('promise2', promise2)\n\t\t\t- å…¶ä¸­ promise1 ä¸€ç›´å¤„åœ¨ pending çŠ¶æ€ï¼Œç›´æ¥å½±å“åˆ° promise2 ä¹Ÿä¸€ç›´å¤„åœ¨ pending çŠ¶æ€\n\t\t\t- promise2 PromiseÂ {\\<pending\\>}\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then ...\n\t\t- ç”±äº promise1 ä»å¤„äº pending çŠ¶æ€ï¼Œä¸å¯èƒ½æ‰§è¡Œ promise1.then ...\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- resolve('success') å°† promise1 ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('promise1', promise1)\n\t\t\t- å…¶ä¸­ promise1 å¤„åœ¨ resolved çŠ¶æ€\n\t\t\t- promise1 PromiseÂ {\\<resolved\\>: \"success\"}\n\t\t- console.log('promise2', promise2)\n\t\t\t- promise2 Promise {\\<rejected\\>: Error: error!!! at \\<anonymous\\>:8:9}\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äº”è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/3ad654d66c66c648a058adf29154d879107368.png)\n\n\n2.6 é¢˜ç›®å…­\n\n```javascript\nconst promise1 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve(\"success\");\n    console.log(\"timer1\");\n  }, 1000);\n  console.log(\"promise1é‡Œçš„å†…å®¹\");\n});\nconst promise2 = promise1.then(() => {\n  throw new Error(\"error!!!\");\n});\nconsole.log(\"promise1\", promise1);\nconsole.log(\"promise2\", promise2);\nsetTimeout(() => {\n  console.log(\"timer2\");\n  console.log(\"promise1\", promise1);\n  console.log(\"promise2\", promise2);\n}, 2000);\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°\n\t- setTimeout å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(\"promise1é‡Œçš„å†…å®¹\");\n\t- promise1.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(\"promise1\", promise1);\n\t\t\t- å…¶ä¸­ promise1 æ²¡æœ‰ resolvedã€rejected æ‰ï¼Œä¸€ç›´å¤„åœ¨ pending çŠ¶æ€\n\t\t\t\t- promise1 PromiseÂ {\\<pending\\>}\n\t\t- console.log(\"promise2\", promise2);\n\t\t\t- primise1 çš„ pending çŠ¶æ€ï¼Œç›´æ¥å½±å“ promise2 ä¹Ÿå¤„åœ¨ pending çŠ¶æ€\n\t\t\t\t- promise2 PromiseÂ {\\<pending\\>}\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then ...\n\t\t- ç”±äº promise1 ä»å¤„äº pending çŠ¶æ€ï¼Œä¸å¯èƒ½æ‰§è¡Œ promise1.then ...\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œç¬¬äºŒä¸ªå®ä»»åŠ¡\n\t- resolve(\"success\"); å°† promise1 ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log(\"timer1\");\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then ...\n\t\t- throw new Error(\"error!!!\");\n\t- ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n\t\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t\t- console.log(\"timer2\");\n\t\t\t- console.log(\"promise1\", promise1);\n\t\t\t\t- å…¶ä¸­ promise1 çš„çŠ¶æ€å·²ç» resloved\n\t\t\t\t- promise1 PromiseÂ {\\<resolved\\>: \"success\"}\n\t\t\t- console.log(\"promise2\", promise2);\n\t\t\t\t- promise2 Promise {\\<rejected\\>: Error: error!!! at \\<anonymous\\>:8:9}\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å…­è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/88a197ec5863fcca93b072d3baecf6a0113849.png)\n\n\n### Promise ä¸­çš„ thenã€catchã€finally\n\n3.1 é¢˜ç›®ä¸€\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  resolve(\"success1\");\n  reject(\"error\");\n  resolve(\"success2\");\n});\npromise\n.then(res => {\n    console.log(\"then: \", res);\n  }).catch(err => {\n    console.log(\"catch: \", err);\n  })\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°\n\t\t- resolve(\"success1\"); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- promise.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise.then ...\n\t\t- console then:  success1\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/448d9fb1db29ba7e76762f97a9508d1e35386.png)\n- ç»“è®º\n\t- **Promiseçš„çŠ¶æ€ä¸€ç»æ”¹å˜å°±ä¸èƒ½å†æ”¹å˜**\n\t- **æ„é€ å‡½æ•°ä¸­çš„ resolve æˆ– reject åªæœ‰ç¬¬ä¸€æ¬¡æ‰§è¡Œæœ‰æ•ˆï¼Œå¤šæ¬¡è°ƒç”¨æ²¡æœ‰ä»»ä½•ä½œç”¨**ã€‚\n\n\n3.2 é¢˜ç›®äºŒ\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  reject(\"error\");\n  resolve(\"success2\");\n});\npromise\n.then(res => {\n    console.log(\"then1: \", res);\n  }).then(res => {\n    console.log(\"then2: \", res);\n  }).catch(err => {\n    console.log(\"catch: \", err);\n  }).then(res => {\n    console.log(\"then3: \", res);\n  })\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°\n\t\t- reject(\"error\"); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º rejectedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise.then ...\n\t- ç”±äº promise çŠ¶æ€ä¸º rejectedï¼Œå› æ­¤è§¦å‘ catch ï¼Œä¸ç®¡ catch è¿æ¥åˆ°å“ªï¼Œéƒ½èƒ½æ•è·ä¸Šå±‚æœªæ•æ‰è¿‡çš„é”™è¯¯\n\t\t- console.log(\"catch: \", err);\n\t\t- return a new promise\n\t- ç”±äº æ–°çš„ promise æ²¡æœ‰è¿”å›å€¼ï¼Œå› æ­¤è¿”å› undefined\n\n- ç»“è®º\n\t- **catchä¸ç®¡è¢«è¿æ¥åˆ°å“ªé‡Œï¼Œéƒ½èƒ½æ•è·ä¸Šå±‚æœªæ•æ‰è¿‡çš„é”™è¯¯**\n\t- è‡³äº then3 ä¹Ÿä¼šè¢«æ‰§è¡Œï¼Œé‚£æ˜¯å› ä¸º**catch()ä¹Ÿä¼šè¿”å›ä¸€ä¸ª Promise **ï¼Œä¸”ç”±äºè¿™ä¸ª Promise æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥æ‰“å°å‡ºæ¥çš„æ˜¯ undefined ã€‚\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/8523408bd03cb268237e720380e1273d47036.png)\n\n\t\n3.3 é¢˜ç›®ä¸‰\n\n```javascript\nPromise.resolve(1)\n  .then(res => {\n    console.log(res);\n    return 2;\n  })\n  .catch(err => {\n    return 3;\n  })\n  .then(res => {\n    console.log(res);\n  });\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€ä¸º resolved, å› æ­¤è§¦å‘ then\n\t\t- console.log(res); res --> 1\n\t- æ²¡æœ‰æŠ¥é”™ï¼Œç•¥è¿‡ catch\n\t- è¢« then æ•æ‰\n\t\t- console.log(2); è¿”å›æ–°çš„ promiseï¼Œ promise è¿”å› resolve(2)\n\n- ç»“è®º\n\t- **Promise å¯ä»¥é“¾å¼è°ƒç”¨**ï¼Œä¸è¿‡ promise æ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œä»è€Œå®ç°äº†é“¾å¼è°ƒç”¨, å®ƒå¹¶ä¸åƒä¸€èˆ¬æˆ‘ä»¬ä»»åŠ¡çš„é“¾å¼è°ƒç”¨ä¸€æ · return thisã€‚\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/2ca378bb1952c6fbacc3028024b1b89027624.png)\n\n\n3.4 é¢˜ç›®å››\n\n```javascript\nPromise.reject(1)\n  .then(res => {\n    console.log(res);\n    return 2;\n  })\n  .catch(err => {\n    console.log(err);\n    return 3\n  })\n  .then(res => {\n    console.log(res);\n  });\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€ä¸º rejectedï¼Œå› æ­¤è§¦å‘ catch\n\t\t- console.log(err); err --> 1\n\t\t- return resolve(3)\n\t- è¢« then æ•æ‰\n\t\t- console.log(3) \n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å››è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/ed821dfd96ad96250140abdedf581fd930226.png)\n\n\n3.5 é¢˜ç›®äº”\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    console.log('timer')\n    resolve('success')\n  }, 1000)\n})\nconst start = Date.now();\npromise.then(res => {\n  console.log(res, Date.now() - start)\n})\npromise.then(res => {\n  console.log(res, Date.now() - start)\n})\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°\n\t- setTimeout ... å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—\n\t- promise.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- promise.then ... å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise.then ...\n\t- å› ä¸º promise çŠ¶æ€å¹¶æ²¡æœ‰ resolvedã€rejectedï¼Œä¸€ç›´å¤„åœ¨ pendingï¼Œå¹¶ä¸èƒ½è°ƒç”¨ then æ–¹æ³•\n\t- åŒä¸Š\n\t- ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œç¬¬äºŒä¸ªå®ä»»åŠ¡ setTimeout ...\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- console.log('timer')\n\t\t- promise çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥\n\t\t\t- çŠ¶æ€å¾€ä¸ŠæŠ›\n\t\t\t- console.log(res, Date.now() - start)\n\t\t\t- console.log(res, Date.now() - start))\n\n- ç»“è®º\n\t- **Promise çš„ .then æˆ–è€… .catch å¯ä»¥è¢«è°ƒç”¨å¤šæ¬¡ï¼Œä½†è¿™é‡Œ Promise æ„é€ å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ã€‚æˆ–è€…è¯´ promise å†…éƒ¨çŠ¶æ€ä¸€ç»æ”¹å˜ï¼Œå¹¶ä¸”æœ‰äº†ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆåç»­æ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šç›´æ¥æ‹¿åˆ°è¯¥å€¼ã€‚**\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äº”è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/9ee74ca562f7c913d51c9fd5fe60680543896.png)\n\n3.6 é¢˜ç›®å…­\n\n```javascript\nPromise.resolve().then(() => {\n  return new Error('error!!!')\n}).then(res => {\n  console.log(\"then: \", res)\n}).catch(err => {\n  console.log(\"catch: \", err)\n})\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€æ›´æ”¹ä¸º resolveï¼Œå¹¶æ— è¿”å›å€¼\n\t- æ‰§è¡Œ then\n\t\t- throw new Error('error!!!')\n\t\t- return Promise.reject(new Error('error!!!'))\n\t- è¢« catch æ•æ‰\n\t\t- console.log(\"catch: \", err) err --> error\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å…­è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/a1cb4e4f5e5ec95e2215d5b7ecc6a32428525.png)\n\t\n\t\n3.7 é¢˜ç›®ä¸ƒ\n\n```javascript\nconst promise = Promise.resolve().then(() => {\n  return promise;\n})\npromise.catch(console.err)\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€æ”¹å˜ä¸º resolve ï¼Œå¹¶æ— è¿”å›å€¼\n\t- æ‰§è¡Œ then\n\t\t- return Promise.resolve(promise)\n\t\t- Chaining cycle detected for promise\n\t- æ‰§è¡ŒåŒæ­¥ä»£ç \n\t\t- promise.catch promise cycle\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸ƒè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/70dbed986bad1d410ad7be3de8fe963d21008.png)\n\n\t\n3.8 é¢˜ç›®å…«\n\n```javascript\nPromise.resolve(1)\n  .then(2)\n  .then(Promise.resolve(3))\n  .then(console.log)\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€æ”¹å˜ä¸º resolveï¼Œ return Promise.resolve(1)\n\t- .then æˆ–è€… .catch çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿå€¼é€ä¼ \n\t- ç¬¬ä¸€ä¸ªthenå’Œç¬¬äºŒä¸ªthenä¸­ä¼ å…¥çš„éƒ½ä¸æ˜¯å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯æ•°å­—ç±»å‹ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡ç±»å‹ï¼Œå› æ­¤å‘ç”Ÿäº†é€ä¼ ï¼Œå°†resolve(1) çš„å€¼ç›´æ¥ä¼ åˆ°æœ€åä¸€ä¸ªthené‡Œ\n\n- ç»“è®º\n\t- **.then æˆ–è€… .catch çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿå€¼é€ä¼ **\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å…«è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/68c56ed26f2845300ecba0dc6dc7a3e914382.png)\n\n\n3.9 é¢˜ç›®ä¹\n\n```javascript\nPromise.reject('err!!!')\n  .then((res) => {\n    console.log('success', res)\n  }, (err) => {\n    console.log('error', err)\n  }).catch(err => {\n    console.log('catch', err)\n  })\n```\n\n- æˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹çœ‹ï¼Œå¦‚æœ catch ä½äº†é”™è¯¯ï¼Œerr ä¼šä¸€ç›´é“¾å¼ä¼ é€’ä¸‹å»è¢« catchå˜›\n- ![æ˜¯å¦ä¼šè¢«ä¸€ç›´catch](http://p1.meituan.net/myvideodistribute/f9859062c1341e2e575f952e320aba4222620.png)\n\t- ä¸€æ—¦ catch ä½å½“å‰æŠ¥é”™ï¼Œå½“å‰æŠ¥é”™å¹¶ä¸ä¼šå†å¾€ä¸‹ä¼ é€’\n- ![é€è¡Œè°ƒç”¨catchæ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„](http://p1.meituan.net/myvideodistribute/9846287852a98f322045973bf302c58f24992.png)\n\t- é€è¡Œè°ƒç”¨ then æ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„\n- é‚£æˆ‘è¿˜å¯ä»¥çœ‹çœ‹ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œres ä¼šä¸€ç›´é“¾å¼ä¼ é€’ then æ‰§è¡Œå˜›\n- ![æ˜¯å¦ä¼šè¢«ä¸€ç›´then](http://p1.meituan.net/myvideodistribute/e2e72158c05ceee7da7528ff9a20348426425.png)\n\t- å¯ä»¥çœ‹å‡º then æ˜¯ä¼šä¸€ç›´å¾€ä¸‹ä¼ é€’çš„\n- ![é€è¡Œè°ƒç”¨then æ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„](http://p0.meituan.net/myvideodistribute/abb8ccf3daffdd023ce079c86cafdfd626377.png)\n\t- é€è¡Œè°ƒç”¨ then æ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€æ”¹å˜ä¸º rejectedï¼Œreturn 'err!!!'\n\t- æ‰§è¡Œ thenï¼Œthen ä¸­ç¬¬äºŒä¸ªå‡½æ•°ï¼Œç›¸å½“äº catch\n\t- å› æ­¤æ‰§è¡Œ\n\t- console.log('error', err) err --> err!!!\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¹è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/05e3b86caaf2b9cbf0c6326020e3385327546.png)\n\n\n```javascript\nPromise.resolve()\n  .then(function success (res) {\n    throw new Error('error!!!')\n  }, function fail1 (err) {\n    console.log('fail1', err)\n  }).catch(function fail2 (err) {\n    console.log('fail2', err)\n  })\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€å˜ä¸º resolveï¼Œ\n\t- æ‰§è¡Œ then\n\t\t- throw new Error('error!!!')\n\t- è¢« catch \n\t\t- console.log('fail2', err) err --> error!!!\n\n- è¿è¡Œç»“æœ\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/c8643d8fb0fd251145befd28d635ed7e33265.png)\n\n3.10 é¢˜ç›®å\n\n```javascript\nPromise.resolve('1')\n  .then(res => {\n    console.log(res)\n  })\n  .finally(() => {\n    console.log('finally')\n  })\nPromise.resolve('2')\n  .finally(() => {\n    console.log('finally2')\n  \treturn 'æˆ‘æ˜¯finally2è¿”å›çš„å€¼'\n  })\n  .then(res => {\n    console.log('finally2åé¢çš„thenå‡½æ•°', res)\n  })\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- promise çŠ¶æ€å˜ä¸º resolveï¼Œreturn 1\n\t- æ‰§è¡Œ then\n\t\t- console.log(res) res --> return new Promiseï¼Œ resolve(1) åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- promise çŠ¶æ€å˜ä¸º resolve, return 2\n\t\t- æ‰§è¡Œ finally\n\t\t\t- console.log('finally2')\n\t\t\t- return new Promiseï¼Œ resolve('æˆ‘æ˜¯finally2è¿”å›çš„å€¼') åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹è¿˜è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- console.log('finally')\n\t\t- console.log('finally2åé¢çš„thenå‡½æ•°', res) res --> 2\n\n- ç»“è®º\n\t- .finally()æ–¹æ³•ä¸ç®¡Promiseå¯¹è±¡æœ€åçš„çŠ¶æ€å¦‚ä½•éƒ½ä¼šæ‰§è¡Œ\n\t- .finally()æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨.finally()å‡½æ•°ä¸­æ˜¯æ²¡æ³•çŸ¥é“Promiseæœ€ç»ˆçš„çŠ¶æ€æ˜¯resolvedè¿˜æ˜¯rejectedçš„\n\t- å®ƒæœ€ç»ˆè¿”å›çš„é»˜è®¤ä¼šæ˜¯ä¸€ä¸ª**ä¸Šä¸€æ¬¡çš„Promiseå¯¹è±¡å€¼**ï¼Œä¸è¿‡å¦‚æœæŠ›å‡ºçš„æ˜¯ä¸€ä¸ªå¼‚å¸¸åˆ™è¿”å›å¼‚å¸¸çš„Promiseå¯¹è±¡ã€‚\n\t- **promise æ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œä»è€Œå®ç°äº†é“¾å¼è°ƒç”¨** \n\t\t\n\t\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®åè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/99d8936b8c5029a6786b464868666f7d47917.png)\n\n\t\n### Promise ä¸­çš„ all å’Œ race\n\n- Promise.all(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª Promise å®ä¾‹ï¼Œæ­¤å®ä¾‹åœ¨ iterable å‚æ•°å†…æ‰€æœ‰çš„ promise éƒ½â€œå®Œæˆï¼ˆresolvedï¼‰â€æˆ–å‚æ•°ä¸­ä¸åŒ…å« promise æ—¶å›è°ƒå®Œæˆï¼ˆresolveï¼‰ï¼›å¦‚æœå‚æ•°ä¸­  promise æœ‰ä¸€ä¸ªå¤±è´¥ï¼ˆrejectedï¼‰ï¼Œæ­¤å®ä¾‹å›è°ƒå¤±è´¥ï¼ˆrejectï¼‰ï¼Œå¤±è´¥çš„åŸå› æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥ promise çš„ç»“æœã€‚\n- Promise.race(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª promiseï¼Œä¸€æ—¦è¿­ä»£å™¨ä¸­çš„æŸä¸ªpromiseè§£å†³æˆ–æ‹’ç»ï¼Œè¿”å›çš„ promiseå°±ä¼šè§£å†³æˆ–æ‹’ç»ã€‚\n\n\n4.1 é¢˜ç›®ä¸€\n\n```javascript\nfunction runAsync (x) {\n    const p = new Promise(r => setTimeout(() => r(x, console.log(x)), 1000))\n    return p\n}\nPromise.all([runAsync(1), runAsync(2), runAsync(3)])\n  .then(res => console.log(res))\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- Promise.all å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- é—´éš”ä¸€ç§’åï¼Œæ§åˆ¶å°ä¼šåŒæ—¶æ‰“å°å‡º1, 2, 3ï¼Œè¿˜æœ‰ä¸€ä¸ªæ•°ç»„[1, 2, 3]\n- ç»“è®º\n\t- **æœ‰äº†allï¼Œå°±å¯ä»¥å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå›è°ƒä¸­å¤„ç†æ‰€æœ‰çš„è¿”å›æ•°æ®**\n\t- .all()åé¢çš„.then()é‡Œçš„å›è°ƒå‡½æ•°æ¥æ”¶çš„å°±æ˜¯æ‰€æœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœã€‚\n\t- è€Œä¸”è¿™ä¸ªç»“æœä¸­æ•°ç»„çš„é¡ºåºå’ŒPromise.all()æ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºä¸€è‡´\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸€è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/d3a6d5f4f158de806b690af124fcec9431029.png)\n\n\t\n4.2 é¢˜ç›®äºŒ\n\n```javascript\nfunction runAsync (x) {\n  const p = new Promise(r => setTimeout(() => r(x, console.log(x)), 1000))\n  return p\n}\nfunction runReject (x) {\n  const p = new Promise((res, rej) => setTimeout(() => rej(`Error: ${x}`, console.log(x)), 1000 * x))\n  return p\n}\nPromise.all([runAsync(1), runReject(4), runAsync(3), runReject(2)])\n  .then(res => console.log(res))\n  .catch(err => console.log(err))\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- Promise.all å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t\t- é—´éš”ä¸€ç§’åï¼Œæ§åˆ¶å°ä¼šåŒæ—¶æ‰“å°å‡º 1, 3\n\t- ç”±äº runReject(4) æ¯” runReject(2) æ™šå…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸” catch åªæ‰§è¡Œä¸€æ¬¡\n\t\t- å†é—´éš”ä¸€ç§’å\n\t\t\t- console.log(x) x --> 2\n\t\t\t- console.log('Error: 2')\n\t\t- å†é—´éš”2ç§’å\n\t\t\t- console.log(x) x --> 4\n\t\t\t- ä¸ä¼šå†æ‰§è¡Œ catch\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®äºŒè¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/e0e25426dc0d49c3af9acee68744760d51135.png)\n\n- ç­‰åŒäº\n\t\n\t```javascript\n\tfunction runAsync (x) {\n\t  const p = new Promise(r => setTimeout(() => r(x, console.log(x)), 1000))\n\t  return p\n\t}\n\tfunction runReject (x) {\n\t  const p = new Promise((res, rej) => setTimeout(() => rej(`Error: ${x}`, console.log(x)), 1000 * x))\n\t  return p\n\t}\n\tPromise.all([runAsync(1), runReject(4), runAsync(3), runReject(2)])\n\t  .then(res => console.log(res), \n\t  err => console.log(err);\n\t```\n- ç»“è®º\n\t- all å’Œ raceä¼ å…¥çš„æ•°ç»„ä¸­å¦‚æœæœ‰ä¼šæŠ›å‡ºå¼‚å¸¸çš„å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€å…ˆæŠ›å‡ºçš„é”™è¯¯ä¼šè¢«æ•è·ï¼Œå¹¶ä¸”æ˜¯è¢« then çš„ç¬¬äºŒä¸ªå‚æ•°æˆ–è€…åé¢çš„ catch æ•è·ï¼›ä½†å¹¶ä¸ä¼šå½±å“æ•°ç»„ä¸­å…¶å®ƒçš„å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚\n\n4.3 é¢˜ç›®ä¸‰\n\n```javascript\nfunction runAsync (x) {\n  const p = new Promise(r => setTimeout(() => r(x, console.log(x)), 1000))\n  return p\n}\nPromise.race([runAsync(1), runAsync(2), runAsync(3)])\n  .then(res => console.log('result: ', res))\n  .catch(err => console.log(err))\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- Promise.race å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- åœ¨é—´éš”æ—¶é—´éƒ½ä¸€æ ·çš„æƒ…å†µä¸‹ï¼ŒrunAsync1 æœ€å…ˆåŠ å…¥é˜Ÿåˆ—\n\t- å› æ­¤\n\t\t- console.log(x) x --> 1\n\t- ç”±äº race çš„ç‰¹æ®Šæ€§ï¼Œåªæ•æ‰æœ€å…ˆæ‰§è¡Œå®Œæˆçš„é‚£ä¸ªç»“æœ\n\t\t- console.log('result: ', res) res --> 1\n\t- å†\n\t\t- console.log(x) x --> 2\n\t\t- console.log(x) x --> 3\n\t- æ²¡æœ‰æŠ¥é”™ï¼Œä¸ä¼šè¢« catch\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®ä¸‰è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/2eda438cd745e39ba934af362a80521038770.png)\n\n4.4 é¢˜ç›®å››\n\n```javascript\nfunction runAsync(x) {\n  const p = new Promise(r =>\n    setTimeout(() => r(x, console.log(x)), 1000)\n  );\n  return p;\n}\nfunction runReject(x) {\n  const p = new Promise((res, rej) =>\n    setTimeout(() => rej(`Error: ${x}`, console.log(x)), 1000 * x)\n  );\n  return p;\n}\nPromise.race([runReject(0), runAsync(1), runAsync(2), runAsync(3)])\n  .then(res => console.log(\"result: \", res))\n  .catch(err => console.log(err));\n```\n\n- åˆ†æ\n\t- ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ\n\t- Promise.race å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—\n\t- å½“å‰å®ä»»åŠ¡ä¸­åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡\n\t- runReject(0) æœ€å…ˆä¼ å…¥\n\t- å› æ­¤\n\t\t- console.log(x) x --> 0\n\t\t- console.log(err) err --> Error: 0\n\t- é—´éš”å°äº1ç§’å\n\t- runAsync(1), runAsync(2), runAsync(3)\n\t\t- ä¾æ¬¡ä¸º\n\t\t- console.log(x) x --> 1\n\t\t- console.log(x) x --> 2\n\t\t- console.log(x) x --> 3\n\n- è¿è¡Œç»“æœ\n\t- ![é¢˜ç›®å››](http://p1.meituan.net/myvideodistribute/89acbf32e7218b90c050526171bd1b3d53719.png)\n\n\n\n\n\t\n## å‚è€ƒæ–‡çŒ®\n- [é¢˜ç›®æ¥æº](https://juejin.im/post/5e58c618e51d4526ed66b5cf)\n\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","slug":"Javascript-è¿è¡Œæœºåˆ¶","published":1,"updated":"2020-10-27T15:21:11.262Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7t0016fw9k8z4x6drm","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>äº”ä¸€å‡æœŸï¼Œæ¥å†™ä¸€å†™ Promise çš„é¢˜å§ï¼Œå˜¿å˜¿å˜¿ ğŸ˜ƒ</li>\n<li>äº”ä¸€å€’è®¡æ—¶ 3 å¤©</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"å®è·µå‡†å¤‡\"><a href=\"#å®è·µå‡†å¤‡\" class=\"headerlink\" title=\"å®è·µå‡†å¤‡\"></a>å®è·µå‡†å¤‡</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#import &lt;Foundation&#x2F;Foundation.h&gt;</span><br><span class=\"line\">#import &lt;JavaScriptCore&#x2F;JavaScriptCore.h&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">int main(int argx, const char * argv[]) &#123;</span><br><span class=\"line\">  @autoreleasepool &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; var context &#x3D; new JSContext</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; define a javascript context</span><br><span class=\"line\">    JSContext* context &#x3D; [[JSContext alloc] init];</span><br><span class=\"line\">    &#x2F;&#x2F; like:var result &#x3D; null;</span><br><span class=\"line\">    JSValue* result;</span><br><span class=\"line\">    </span><br><span class=\"line\">    while(true) &#123;</span><br><span class=\"line\">      char sourcecode[1024];</span><br><span class=\"line\">      </span><br><span class=\"line\">      scanf(&#39;%s&#39;, &amp;sourcecode);</span><br><span class=\"line\">      NSString* code &#x3D; [NSString stringWithUTF8String: sourcecode];</span><br><span class=\"line\">      </span><br><span class=\"line\">      result &#x3D; [context evaluateScript:code];</span><br><span class=\"line\">      </span><br><span class=\"line\">      NSLog(@&quot;%@&quot;, [result toString]);</span><br><span class=\"line\">      </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  return 0;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¦‚ä¸Šå®ç°ä¸€ä¸ªç®€å•çš„äº‹ä»¶å¾ªç¯ï¼Œç”¨æ¥è¾“å‡º console</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/a99619da1cded49f443ded2fc219b27432778.png\" alt=\"OC æ–¹æ³•\"></li>\n<li>æˆ‘ä»¬åœ¨ Javascript ä¸­è®²çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ã€å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ˜¯ Javascript è°ƒç”¨æ–¹å»ä½¿ç”¨ Javascript çš„ä¸€ç§æ–¹å¼ï¼Œå¦‚æœä»…æ˜¯æ‰§è¡Œä¸€æ®µä»£ç ï¼Œæ˜¯ä¸éœ€è¦äº‹ä»¶å¾ªç¯çš„ã€‚é€šè¿‡è¿™æ®µä»£ç ï¼Œæ˜¯å¯ä»¥çœ‹å‡ºæ¥ï¼ŒJavascript çš„äº‹ä»¶å¾ªç¯ï¼Œæ˜¯åœ¨ JSContext ä¹‹å¤–ï¼Œäº‹ä»¶å¾ªç¯ç›¸å…³çŸ¥è¯†ï¼Œæ—¢ä¸æ˜¯ Javascript å¼•æ“çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ Javascript è¯­è¨€çš„ä¸€éƒ¨åˆ†ã€‚</li>\n<li>code çš„ä¼ å…¥æ–¹å¼<ul>\n<li>&lt;script&gt;&lt;/script&gt; æ™®é€šä»£ç ç‰‡æ®µ</li>\n<li>&lt;script type=â€moduleâ€&gt;&lt;/script&gt;</li>\n<li>å‡½æ•°</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#import &lt;Foundation&#x2F;Foundation.h&gt;</span><br><span class=\"line\">#import &lt;JavaScriptCore&#x2F;JavaScriptCore.h&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">int main(int argx, const char * argv[]) &#123;</span><br><span class=\"line\">  @autoreleasepool &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; var context &#x3D; new JSContext</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; define a javascript context</span><br><span class=\"line\">    JSContext* context &#x3D; [[JSContext alloc] init];</span><br><span class=\"line\">    &#x2F;&#x2F; like:var result &#x3D; null;</span><br><span class=\"line\">    JSValue* result;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; TODO: calculate the square of arg x</span><br><span class=\"line\">    NSString* code &#x3D; @&quot;(function(x)&#123; return x * x; &#125;)&quot;;</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; like: result &#x3D; (function(x)&#123; return x * x; &#125;)</span><br><span class=\"line\">    result &#x3D; [context evaluateScript:code];</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; passing the number 4 into the function</span><br><span class=\"line\">    JSValue* arg1 &#x3D; [JSValue valueWithInt32:4 inContext:context];</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; execute the function with arg of 4</span><br><span class=\"line\">    NSLog(@&quot;%@&quot;, [[result callWithArguments:@[arg1]] toString]);</span><br><span class=\"line\">  </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  return 0;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸Šé¢çš„ Object-C ä»£ç ï¼Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬æ˜¯å°†ä¸€æ®µä¸€æ®µçš„ä»£ç ï¼Œä¼ å…¥ evaluateScript ä¸­æ‰§è¡Œã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#import &lt;Foundation&#x2F;Foundation.h&gt;</span><br><span class=\"line\">#import &lt;JavaScriptCore&#x2F;JavaScriptCore.h&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">int main(int argx, const char * argv[]) &#123;</span><br><span class=\"line\">  @autoreleasepool &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; var context &#x3D; new JSContext</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; define a javascript context</span><br><span class=\"line\">    JSContext* context &#x3D; [[JSContext alloc] init];</span><br><span class=\"line\">    &#x2F;&#x2F; like:var result &#x3D; null;</span><br><span class=\"line\">    JSValue* result;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; TODO: calculate the square of arg x</span><br><span class=\"line\">    NSString* code &#x3D; @&quot;new Promise(resolve &#x3D;&gt; resolve()).then(() &#x3D;&gt; this.a &#x3D; 3), function()&#123;return this.a&#125;;&quot;;</span><br><span class=\"line\">        </span><br><span class=\"line\">    result &#x3D; [context evaluateScript:code];</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; like: result();</span><br><span class=\"line\">    NSLog(@&quot;%@&quot;, [[result callWithArguments:@[]] toString]);</span><br><span class=\"line\">  </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  return 0;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>evaluateScript å®é™…ä¸Šæ‰§è¡Œä¸¤æ­¥ï¼š</p>\n<ol>\n<li><p>æ‰§è¡Œæ•´ä¸ªæ–¹æ³•</p>\n<blockquote>\n<p>new Promise(resolve =&gt; resolve()).then(() =&gt; this.a = 3), function(){return this.a};</p>\n</blockquote>\n<ul>\n<li>é€—å·è¡¨è¾¾å¼ï¼Œæ°¸è¿œè¿”å›åé¢çš„å€¼ï¼Œå¦‚æœè¢«è°ƒç”¨ï¼Œå‰é¢çš„ä¼šè¢«æ‰§è¡Œ</li>\n</ul>\n</li>\n<li><p>æ‰§è¡Œ Promise ä¸­ then åé¢çš„è¯­å¥</p>\n</li>\n</ol>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/81d945c99778450fd86a710f20355cbc269796.png\" alt=\"evaluateScript\"></li>\n<li>æœ‰ then ,å¯èƒ½äº§ç”Ÿä¸€ä¸ªå®ä»»åŠ¡é‡Œé¢æœ‰å¤šä¸ªå¾®ä»»åŠ¡çš„æƒ…å†µï¼Œ ä¸€åˆ‡JS ä»£ç éƒ½æ˜¯å¾®ä»»åŠ¡ä¸­æ‰§è¡Œçš„</li>\n<li>æ‹¿æµè§ˆå™¨ä¸¾ä¾‹ï¼šsetTimeoutã€setInterval è¿™ç§å…¶å®ä¸æ˜¯ JS è¯­æ³•æœ¬èº«çš„ APIï¼Œæ˜¯ JS çš„å®¿ä¸»æµè§ˆå™¨æä¾›çš„ APIï¼Œ æ‰€ä»¥æ˜¯å®ä»»åŠ¡ã€‚</li>\n<li>è€Œ Promise æ˜¯ JS æœ¬èº«è‡ªå¸¦çš„ APIï¼Œè¿™ç§å°±æ˜¯å¾®ä»»åŠ¡ã€‚</li>\n</ul>\n</li>\n<li><p>æ€»ç»“ï¼š<strong>å®¿ä¸»æä¾›çš„æ–¹æ³•æ˜¯å®ä»»åŠ¡ï¼ŒJS è‡ªå¸¦çš„æ˜¯å¾®ä»»åŠ¡</strong></p>\n</li>\n<li><p><strong>ä»»åŠ¡åˆ—è¡¨åˆ—é‡Œé¢æœ‰å¾ˆå¤šå®ä»»åŠ¡ï¼Œç„¶åæ¯ä¸ªå®ä»»åŠ¡é‡Œé¢æœ‰ä¸€ä¸ªå¾®ä»»åŠ¡åˆ—è¡¨ï¼Œæ¯ä¸ªå®ä»»åŠ¡æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ä¹‹å‰ä¼šæŠŠè‡ªå·±å†…éƒ¨çš„å¾®ä»»åŠ¡æ‰§è¡Œå®Œ</strong></p>\n</li>\n<li><p><strong>å®ä»»åŠ¡</strong>åŒ…æ‹¬ï¼šscript ã€setTimeoutã€setInterval ã€setImmediate ã€I/O ã€UI renderingã€‚</p>\n</li>\n<li><p><strong>å¾®ä»»åŠ¡</strong>åŒ…æ‹¬ï¼šMutationObserverã€Promise.then()æˆ–catch()ã€Promiseä¸ºåŸºç¡€å¼€å‘çš„å…¶å®ƒæŠ€æœ¯ï¼Œæ¯”å¦‚fetch APIã€V8çš„åƒåœ¾å›æ”¶è¿‡ç¨‹ã€Nodeç‹¬æœ‰çš„process.nextTickã€‚</p>\n</li>\n</ul>\n<h1 id=\"Javascript-ç»“æ„åŒ–ç¨‹åºè®¾è®¡åŸºç¡€\"><a href=\"#Javascript-ç»“æ„åŒ–ç¨‹åºè®¾è®¡åŸºç¡€\" class=\"headerlink\" title=\"Javascript ç»“æ„åŒ–ç¨‹åºè®¾è®¡åŸºç¡€\"></a>Javascript ç»“æ„åŒ–ç¨‹åºè®¾è®¡åŸºç¡€</h1><h2 id=\"å®è·µè®°å½•\"><a href=\"#å®è·µè®°å½•\" class=\"headerlink\" title=\"å®è·µè®°å½•\"></a>å®è·µè®°å½•</h2><h3 id=\"åŸºç¡€é¢˜\"><a href=\"#åŸºç¡€é¢˜\" class=\"headerlink\" title=\"åŸºç¡€é¢˜\"></a>åŸºç¡€é¢˜</h3><p>1.1 é¢˜ç›®ä¸€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>, promise1);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æï¼š</p>\n<ul>\n<li><p>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­ console.log(â€˜promise1â€™)</p>\n<blockquote>\n<p>console.log(â€˜1â€™, promise1);</p>\n</blockquote>\n</li>\n<li><p>å†æ‰§è¡ŒåŒæ­¥ä»£ç </p>\n</li>\n<li><p>æ‰§è¡Œå®Œåï¼Œ promise1 ä¸­å¹¶æ²¡æœ‰ resolved, rejectedï¼Œ ä¸€ç›´å¤„åœ¨ pending çš„çŠ¶æ€</p>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/f45e1dbe45d84e46ab2fd24703cad0c521137.png\" alt=\"é¢˜ç›®ä¸€æ‰§è¡Œ\"></li>\n</ul>\n</li>\n</ul>\n<p>1.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);</span><br><span class=\"line\">  resolve(<span class=\"string\">'success'</span>)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">promise.then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­<ul>\n<li>console.log(1);</li>\n<li>resolve(â€˜successâ€™) å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n<li>console.log(2);</li>\n</ul>\n</li>\n<li>promise.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å†æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç <ul>\n<li>console.log(4);</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸” promise ä¸ºresolvedï¼Œæ‰§è¡Œ promise.then<ul>\n<li>console.log(3);</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c31fd6e9ba9c9f9ac4062d6b395706f230745.png\" alt=\"é¢˜ç›®äºŒæ‰§è¡Œ\"></li>\n</ul>\n</li>\n</ul>\n<p>1.3 é¢˜ç›®ä¸‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">promise.then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­<ul>\n<li>console.log(1);</li>\n<li>console.log(2);</li>\n<li>è¯¥ promise æ²¡æœ‰ resolved, rejected, ä¸€ç›´å¤„åœ¨ pending</li>\n</ul>\n</li>\n<li>promise.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å†æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç <ul>\n<li>console.log(4);</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä½† promise ä¸ºpendingï¼Œä¸å¯èƒ½æ‰§è¡Œ promise.then ä¸­æ–¹æ³•</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/b6e827ca293c65c261a83a81f1f5411227105.png\" alt=\"é¢˜ç›®ä¸‰æ‰§è¡Œ\"></li>\n</ul>\n</li>\n</ul>\n<p>1.4 é¢˜ç›®å››</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">  resolve(<span class=\"string\">'resolve1'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> promise2 = promise1.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>, promise1);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'2'</span>, promise2);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­<ul>\n<li>console.log(â€˜promise1â€™)</li>\n<li>resolve(â€˜resolve1â€™) å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n</ul>\n</li>\n<li>promise1.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>promise2 æ˜¯ä¸€ä¸ªæ–°çŠ¶æ€ä¸º pending çš„ Promise</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜1â€™, promise1);<ul>\n<li>promise1 ä¸­çŠ¶æ€åœ¨ä¸Šé¢å·²ç»æ›´æ”¹ä¸º resolved</li>\n</ul>\n</li>\n<li>console.log(â€˜2â€™, promise2);<ul>\n<li>promise2 ä¸­çŠ¶æ€ä¸ºpending</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then <ul>\n<li>console.log(res) <ul>\n<li>å…¶ä¸­ promise1.thenï¼Œ promise1 çš„çŠ¶æ€ä¸º resolved</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/f31e7f8db309521b5252143252eaed2551272.png\" alt=\"é¢˜ç›®å››è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>1.5 é¢˜ç›®äº”</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fn = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"function\">(<span class=\"params\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>((resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);</span><br><span class=\"line\">  resolve(<span class=\"string\">'success'</span>)</span><br><span class=\"line\">&#125;))</span><br><span class=\"line\">fn().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œconst fn = () =&gt; (Promise Object) è¿”å›ä¸€ä¸ª promise å¯¹è±¡</li>\n<li>fn()ï¼Œæ‰§è¡Œ fn æ–¹æ³•<ul>\n<li>console.log(1);</li>\n<li>resolve(â€˜successâ€™) å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n</ul>\n</li>\n<li>Function.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜startâ€™)</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— Function.then<ul>\n<li>console.log(res) å…¶ä¸­ promise çš„çŠ¶æ€ä¸º resolved</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/955895672615c24a4eb671617d8b739829033.png\" alt=\"é¢˜ç›®äº”è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>1.6 é¢˜ç›®å…­</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fn = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span></span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);</span><br><span class=\"line\">    resolve(<span class=\"string\">\"success\"</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"start\"</span>);</span><br><span class=\"line\">fn().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œconst fn = () =&gt; (Promise Object) è¿”å›ä¸€ä¸ª promise å¯¹è±¡</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€œstartâ€);</li>\n</ul>\n</li>\n<li>fn(), æ‰§è¡Œ fn æ–¹æ³•<ul>\n<li>console.log(1);</li>\n<li>resolve(â€œsuccessâ€); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n</ul>\n</li>\n<li>Function.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— Function.then<ul>\n<li>console.log(res); å…¶ä¸­ promise çš„çŠ¶æ€ä¸º resolved</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/ccd1a9148be91f5aa24847a0d4e23dfb31837.png\" alt=\"é¢˜ç›®å…­è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Promise-ç»“åˆ-setTimeout\"><a href=\"#Promise-ç»“åˆ-setTimeout\" class=\"headerlink\" title=\"Promise ç»“åˆ setTimeout\"></a>Promise ç»“åˆ setTimeout</h3><p>2.1 é¢˜ç›®ä¸€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'time'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'resolve'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'end'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜startâ€™)</li>\n</ul>\n</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>Promise.resolve().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜endâ€™)</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— Promise.resolve().then<ul>\n<li>console.log(â€˜resolveâ€™)</li>\n</ul>\n</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout â€¦<ul>\n<li>console.log(â€˜timeâ€™)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/4a9c74ab2a26cc16e55ce53f6fb765d630133.png\" alt=\"é¢˜ç›®ä¸€è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>2.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"timerStart\"</span>);</span><br><span class=\"line\">    resolve(<span class=\"string\">\"success\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"timerEnd\"</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">promise.then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­<ul>\n<li>console.log(1);</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(2);</li>\n</ul>\n</li>\n<li>promise.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(4);</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— å…¶ä¸­ promise ä¸­ï¼Œå¹¶æ²¡æœ‰ resolvedã€rejectedï¼Œä¸€ç›´åœ¨ pendingï¼Œä¸å¯èƒ½æ‰§è¡Œ promise.then ä¸­æ–¹æ³•</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout â€¦</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡ setTimeout ä»£ç ä»ä¸Šè‡³ä¸‹æ‰§è¡Œ</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€œtimerStartâ€);</li>\n<li>resolve(â€œsuccessâ€); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n<li>console.log(â€œtimerEndâ€);</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/66ea5bbd68d0841ad58cac5ca771625347414.png\" alt=\"é¢˜ç›®äºŒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>2.3 é¢˜ç›®ä¸‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>);</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer3'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer2'</span>)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šæ‰§è¡Œ</li>\n<li>setTimeout â€¦ åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>setTimeout â€¦ åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜startâ€™)</li>\n</ul>\n</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout â€¦</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç  <ul>\n<li>console.log(â€˜timer1â€™);</li>\n</ul>\n</li>\n<li>setTimeout â€¦ åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜timer2â€™)</li>\n</ul>\n</li>\n<li>ç¬¬ä¸‰ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜timer3â€™)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/b5ab6578c5ba7d8d727a3bf47ba8879033812.png\" alt=\"é¢˜ç›®ä¸‰è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>);</span><br><span class=\"line\">  <span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer2'</span>)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>setTimeout â€¦ åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>setTimeout â€¦ åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜startâ€™)</li>\n</ul>\n</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout â€¦</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜timer1â€™);</li>\n<li>Promise.resolve().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—<ul>\n<li>console.log(â€˜promiseâ€™)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout â€¦</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜timer2â€™)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/f65f2aa65848d2e8aaf5c3918509c6e934427.png\" alt=\"é¢˜ç›®ä¸‰è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>2.4 é¢˜ç›®å››</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> timer2 = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer2'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> timer1 = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>)</span><br><span class=\"line\">  <span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>Promise.resolve().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç </li>\n<li>console.log(â€˜startâ€™);</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç </li>\n<li>console.log(â€˜promise1â€™);</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout â€¦</li>\n<li>console.log(â€˜timer2â€™)</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç </li>\n<li>console.log(â€˜timer1â€™)</li>\n<li>Promise.resolve().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€˜promise2â€™)</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(â€˜timer2â€™)</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/60a22379f31bb12de055ed83a31aca0b46969.png\" alt=\"é¢˜ç›®å››è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>2.5 é¢˜ç›®äº” ** å­˜åœ¨å’Œä¹‹å‰ä¸€æ ·çš„ï¼Œpromise resolved åï¼ŒçŠ¶æ€ä¸ŠæŠ›è‡³ä¸Šä¸€ä¸ª å®ä»»åŠ¡é˜Ÿåˆ—çš„é—®é¢˜</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    resolve(<span class=\"string\">'success'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> promise2 = promise1.then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'error!!!'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>, promise1)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>, promise2)</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>, promise1)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>, promise2)</span><br><span class=\"line\">&#125;, <span class=\"number\">2000</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>å…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­</li>\n<li>setTimout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>promise1.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜promise1â€™, promise1)<ul>\n<li>å…¶ä¸­ promise1 æ²¡æœ‰ resolvedã€rejected,ä¸€ç›´å¤„åœ¨ pending çŠ¶æ€</li>\n<li>promise1 Promise {&lt;pending&gt;}</li>\n</ul>\n</li>\n<li>console.log(â€˜promise2â€™, promise2)<ul>\n<li>å…¶ä¸­ promise1 ä¸€ç›´å¤„åœ¨ pending çŠ¶æ€ï¼Œç›´æ¥å½±å“åˆ° promise2 ä¹Ÿä¸€ç›´å¤„åœ¨ pending çŠ¶æ€</li>\n<li>promise2 Promise {&lt;pending&gt;}</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then â€¦<ul>\n<li>ç”±äº promise1 ä»å¤„äº pending çŠ¶æ€ï¼Œä¸å¯èƒ½æ‰§è¡Œ promise1.then â€¦</li>\n</ul>\n</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>resolve(â€˜successâ€™) å°† promise1 ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜promise1â€™, promise1)<ul>\n<li>å…¶ä¸­ promise1 å¤„åœ¨ resolved çŠ¶æ€</li>\n<li>promise1 Promise {&lt;resolved&gt;: â€œsuccessâ€}</li>\n</ul>\n</li>\n<li>console.log(â€˜promise2â€™, promise2)<ul>\n<li>promise2 Promise {&lt;rejected&gt;: Error: error!!! at &lt;anonymous&gt;:8:9}</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/3ad654d66c66c648a058adf29154d879107368.png\" alt=\"é¢˜ç›®äº”è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>2.6 é¢˜ç›®å…­</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    resolve(<span class=\"string\">\"success\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"timer1\"</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise1é‡Œçš„å†…å®¹\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> promise2 = promise1.then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">\"error!!!\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise1\"</span>, promise1);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise2\"</span>, promise2);</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"timer2\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise1\"</span>, promise1);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise2\"</span>, promise2);</span><br><span class=\"line\">&#125;, <span class=\"number\">2000</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°</li>\n<li>setTimeout å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€œpromise1é‡Œçš„å†…å®¹â€);</li>\n</ul>\n</li>\n<li>promise1.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€œpromise1â€, promise1);<ul>\n<li>å…¶ä¸­ promise1 æ²¡æœ‰ resolvedã€rejected æ‰ï¼Œä¸€ç›´å¤„åœ¨ pending çŠ¶æ€<ul>\n<li>promise1 Promise {&lt;pending&gt;}</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>console.log(â€œpromise2â€, promise2);<ul>\n<li>primise1 çš„ pending çŠ¶æ€ï¼Œç›´æ¥å½±å“ promise2 ä¹Ÿå¤„åœ¨ pending çŠ¶æ€<ul>\n<li>promise2 Promise {&lt;pending&gt;}</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then â€¦<ul>\n<li>ç”±äº promise1 ä»å¤„äº pending çŠ¶æ€ï¼Œä¸å¯èƒ½æ‰§è¡Œ promise1.then â€¦</li>\n</ul>\n</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œç¬¬äºŒä¸ªå®ä»»åŠ¡</li>\n<li>resolve(â€œsuccessâ€); å°† promise1 ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€œtimer1â€);</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then â€¦<ul>\n<li>throw new Error(â€œerror!!!â€);</li>\n</ul>\n</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡<ul>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€œtimer2â€);</li>\n<li>console.log(â€œpromise1â€, promise1);<ul>\n<li>å…¶ä¸­ promise1 çš„çŠ¶æ€å·²ç» resloved</li>\n<li>promise1 Promise {&lt;resolved&gt;: â€œsuccessâ€}</li>\n</ul>\n</li>\n<li>console.log(â€œpromise2â€, promise2);<ul>\n<li>promise2 Promise {&lt;rejected&gt;: Error: error!!! at &lt;anonymous&gt;:8:9}</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/88a197ec5863fcca93b072d3baecf6a0113849.png\" alt=\"é¢˜ç›®å…­è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Promise-ä¸­çš„-thenã€catchã€finally\"><a href=\"#Promise-ä¸­çš„-thenã€catchã€finally\" class=\"headerlink\" title=\"Promise ä¸­çš„ thenã€catchã€finally\"></a>Promise ä¸­çš„ thenã€catchã€finally</h3><p>3.1 é¢˜ç›®ä¸€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  resolve(<span class=\"string\">\"success1\"</span>);</span><br><span class=\"line\">  reject(<span class=\"string\">\"error\"</span>);</span><br><span class=\"line\">  resolve(<span class=\"string\">\"success2\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">promise</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"then: \"</span>, res);</span><br><span class=\"line\">  &#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"catch: \"</span>, err);</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°<ul>\n<li>resolve(â€œsuccess1â€); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n</ul>\n</li>\n<li>promise.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise.then â€¦<ul>\n<li>console then:  success1</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/448d9fb1db29ba7e76762f97a9508d1e35386.png\" alt=\"é¢˜ç›®ä¸€è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>Promiseçš„çŠ¶æ€ä¸€ç»æ”¹å˜å°±ä¸èƒ½å†æ”¹å˜</strong></li>\n<li><strong>æ„é€ å‡½æ•°ä¸­çš„ resolve æˆ– reject åªæœ‰ç¬¬ä¸€æ¬¡æ‰§è¡Œæœ‰æ•ˆï¼Œå¤šæ¬¡è°ƒç”¨æ²¡æœ‰ä»»ä½•ä½œç”¨</strong>ã€‚</li>\n</ul>\n</li>\n</ul>\n<p>3.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  reject(<span class=\"string\">\"error\"</span>);</span><br><span class=\"line\">  resolve(<span class=\"string\">\"success2\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">promise</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"then1: \"</span>, res);</span><br><span class=\"line\">  &#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"then2: \"</span>, res);</span><br><span class=\"line\">  &#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"catch: \"</span>, err);</span><br><span class=\"line\">  &#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"then3: \"</span>, res);</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°<ul>\n<li>reject(â€œerrorâ€); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º rejectedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise.then â€¦</li>\n<li>ç”±äº promise çŠ¶æ€ä¸º rejectedï¼Œå› æ­¤è§¦å‘ catch ï¼Œä¸ç®¡ catch è¿æ¥åˆ°å“ªï¼Œéƒ½èƒ½æ•è·ä¸Šå±‚æœªæ•æ‰è¿‡çš„é”™è¯¯<ul>\n<li>console.log(â€œcatch: â€œ, err);</li>\n<li>return a new promise</li>\n</ul>\n</li>\n<li>ç”±äº æ–°çš„ promise æ²¡æœ‰è¿”å›å€¼ï¼Œå› æ­¤è¿”å› undefined</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>catchä¸ç®¡è¢«è¿æ¥åˆ°å“ªé‡Œï¼Œéƒ½èƒ½æ•è·ä¸Šå±‚æœªæ•æ‰è¿‡çš„é”™è¯¯</strong></li>\n<li>è‡³äº then3 ä¹Ÿä¼šè¢«æ‰§è¡Œï¼Œé‚£æ˜¯å› ä¸º*<em>catch()ä¹Ÿä¼šè¿”å›ä¸€ä¸ª Promise *</em>ï¼Œä¸”ç”±äºè¿™ä¸ª Promise æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥æ‰“å°å‡ºæ¥çš„æ˜¯ undefined ã€‚</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/8523408bd03cb268237e720380e1273d47036.png\" alt=\"é¢˜ç›®äºŒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.3 é¢˜ç›®ä¸‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€ä¸º resolved, å› æ­¤è§¦å‘ then<ul>\n<li>console.log(res); res â€“&gt; 1</li>\n</ul>\n</li>\n<li>æ²¡æœ‰æŠ¥é”™ï¼Œç•¥è¿‡ catch</li>\n<li>è¢« then æ•æ‰<ul>\n<li>console.log(2); è¿”å›æ–°çš„ promiseï¼Œ promise è¿”å› resolve(2)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>Promise å¯ä»¥é“¾å¼è°ƒç”¨</strong>ï¼Œä¸è¿‡ promise æ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œä»è€Œå®ç°äº†é“¾å¼è°ƒç”¨, å®ƒå¹¶ä¸åƒä¸€èˆ¬æˆ‘ä»¬ä»»åŠ¡çš„é“¾å¼è°ƒç”¨ä¸€æ · return thisã€‚</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/2ca378bb1952c6fbacc3028024b1b89027624.png\" alt=\"é¢˜ç›®ä¸‰è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.4 é¢˜ç›®å››</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.reject(<span class=\"number\">1</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">3</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€ä¸º rejectedï¼Œå› æ­¤è§¦å‘ catch<ul>\n<li>console.log(err); err â€“&gt; 1</li>\n<li>return resolve(3)</li>\n</ul>\n</li>\n<li>è¢« then æ•æ‰<ul>\n<li>console.log(3) </li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/ed821dfd96ad96250140abdedf581fd930226.png\" alt=\"é¢˜ç›®å››è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.5 é¢˜ç›®äº”</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer'</span>)</span><br><span class=\"line\">    resolve(<span class=\"string\">'success'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> start = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">promise.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res, <span class=\"built_in\">Date</span>.now() - start)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">promise.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res, <span class=\"built_in\">Date</span>.now() - start)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>promise.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>promise.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise.then â€¦</li>\n<li>å› ä¸º promise çŠ¶æ€å¹¶æ²¡æœ‰ resolvedã€rejectedï¼Œä¸€ç›´å¤„åœ¨ pendingï¼Œå¹¶ä¸èƒ½è°ƒç”¨ then æ–¹æ³•</li>\n<li>åŒä¸Š</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œç¬¬äºŒä¸ªå®ä»»åŠ¡ setTimeout â€¦</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜timerâ€™)</li>\n<li>promise çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥<ul>\n<li>çŠ¶æ€å¾€ä¸ŠæŠ›</li>\n<li>console.log(res, Date.now() - start)</li>\n<li>console.log(res, Date.now() - start))</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>Promise çš„ .then æˆ–è€… .catch å¯ä»¥è¢«è°ƒç”¨å¤šæ¬¡ï¼Œä½†è¿™é‡Œ Promise æ„é€ å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ã€‚æˆ–è€…è¯´ promise å†…éƒ¨çŠ¶æ€ä¸€ç»æ”¹å˜ï¼Œå¹¶ä¸”æœ‰äº†ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆåç»­æ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šç›´æ¥æ‹¿åˆ°è¯¥å€¼ã€‚</strong></li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/9ee74ca562f7c913d51c9fd5fe60680543896.png\" alt=\"é¢˜ç›®äº”è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.6 é¢˜ç›®å…­</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'error!!!'</span>)</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"then: \"</span>, res)</span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"catch: \"</span>, err)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€æ›´æ”¹ä¸º resolveï¼Œå¹¶æ— è¿”å›å€¼</li>\n<li>æ‰§è¡Œ then<ul>\n<li>throw new Error(â€˜error!!!â€™)</li>\n<li>return Promise.reject(new Error(â€˜error!!!â€™))</li>\n</ul>\n</li>\n<li>è¢« catch æ•æ‰<ul>\n<li>console.log(â€œcatch: â€œ, err) err â€“&gt; error</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/a1cb4e4f5e5ec95e2215d5b7ecc6a32428525.png\" alt=\"é¢˜ç›®å…­è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.7 é¢˜ç›®ä¸ƒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> promise;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">promise.catch(<span class=\"built_in\">console</span>.err)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€æ”¹å˜ä¸º resolve ï¼Œå¹¶æ— è¿”å›å€¼</li>\n<li>æ‰§è¡Œ then<ul>\n<li>return Promise.resolve(promise)</li>\n<li>Chaining cycle detected for promise</li>\n</ul>\n</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>promise.catch promise cycle</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/70dbed986bad1d410ad7be3de8fe963d21008.png\" alt=\"é¢˜ç›®ä¸ƒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.8 é¢˜ç›®å…«</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>)</span><br><span class=\"line\">  .then(<span class=\"number\">2</span>)</span><br><span class=\"line\">  .then(<span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">3</span>))</span><br><span class=\"line\">  .then(<span class=\"built_in\">console</span>.log)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€æ”¹å˜ä¸º resolveï¼Œ return Promise.resolve(1)</li>\n<li>.then æˆ–è€… .catch çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿå€¼é€ä¼ </li>\n<li>ç¬¬ä¸€ä¸ªthenå’Œç¬¬äºŒä¸ªthenä¸­ä¼ å…¥çš„éƒ½ä¸æ˜¯å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯æ•°å­—ç±»å‹ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡ç±»å‹ï¼Œå› æ­¤å‘ç”Ÿäº†é€ä¼ ï¼Œå°†resolve(1) çš„å€¼ç›´æ¥ä¼ åˆ°æœ€åä¸€ä¸ªthené‡Œ</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>.then æˆ–è€… .catch çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿå€¼é€ä¼ </strong></li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/68c56ed26f2845300ecba0dc6dc7a3e914382.png\" alt=\"é¢˜ç›®å…«è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.9 é¢˜ç›®ä¹</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.reject(<span class=\"string\">'err!!!'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'success'</span>, res)</span><br><span class=\"line\">  &#125;, (err) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'error'</span>, err)</span><br><span class=\"line\">  &#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'catch'</span>, err)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>æˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹çœ‹ï¼Œå¦‚æœ catch ä½äº†é”™è¯¯ï¼Œerr ä¼šä¸€ç›´é“¾å¼ä¼ é€’ä¸‹å»è¢« catchå˜›</p>\n</li>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/f9859062c1341e2e575f952e320aba4222620.png\" alt=\"æ˜¯å¦ä¼šè¢«ä¸€ç›´catch\"></p>\n<ul>\n<li>ä¸€æ—¦ catch ä½å½“å‰æŠ¥é”™ï¼Œå½“å‰æŠ¥é”™å¹¶ä¸ä¼šå†å¾€ä¸‹ä¼ é€’</li>\n</ul>\n</li>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/9846287852a98f322045973bf302c58f24992.png\" alt=\"é€è¡Œè°ƒç”¨catchæ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„\"></p>\n<ul>\n<li>é€è¡Œè°ƒç”¨ then æ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„</li>\n</ul>\n</li>\n<li><p>é‚£æˆ‘è¿˜å¯ä»¥çœ‹çœ‹ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œres ä¼šä¸€ç›´é“¾å¼ä¼ é€’ then æ‰§è¡Œå˜›</p>\n</li>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/e2e72158c05ceee7da7528ff9a20348426425.png\" alt=\"æ˜¯å¦ä¼šè¢«ä¸€ç›´then\"></p>\n<ul>\n<li>å¯ä»¥çœ‹å‡º then æ˜¯ä¼šä¸€ç›´å¾€ä¸‹ä¼ é€’çš„</li>\n</ul>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/abb8ccf3daffdd023ce079c86cafdfd626377.png\" alt=\"é€è¡Œè°ƒç”¨then æ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„\"></p>\n<ul>\n<li>é€è¡Œè°ƒç”¨ then æ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„</li>\n</ul>\n</li>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€æ”¹å˜ä¸º rejectedï¼Œreturn â€˜err!!!â€™</li>\n<li>æ‰§è¡Œ thenï¼Œthen ä¸­ç¬¬äºŒä¸ªå‡½æ•°ï¼Œç›¸å½“äº catch</li>\n<li>å› æ­¤æ‰§è¡Œ</li>\n<li>console.log(â€˜errorâ€™, err) err â€“&gt; err!!!</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/05e3b86caaf2b9cbf0c6326020e3385327546.png\" alt=\"é¢˜ç›®ä¹è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve()</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">success</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'error!!!'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fail1</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'fail1'</span>, err)</span><br><span class=\"line\">  &#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fail2</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'fail2'</span>, err)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€å˜ä¸º resolveï¼Œ</li>\n<li>æ‰§è¡Œ then<ul>\n<li>throw new Error(â€˜error!!!â€™)</li>\n</ul>\n</li>\n<li>è¢« catch <ul>\n<li>console.log(â€˜fail2â€™, err) err â€“&gt; error!!!</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c8643d8fb0fd251145befd28d635ed7e33265.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.10 é¢˜ç›®å</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'1'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .finally(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'finally'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'2'</span>)</span><br><span class=\"line\">  .finally(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'finally2'</span>)</span><br><span class=\"line\">  \t<span class=\"keyword\">return</span> <span class=\"string\">'æˆ‘æ˜¯finally2è¿”å›çš„å€¼'</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'finally2åé¢çš„thenå‡½æ•°'</span>, res)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€å˜ä¸º resolveï¼Œreturn 1</li>\n<li>æ‰§è¡Œ then<ul>\n<li>console.log(res) res â€“&gt; return new Promiseï¼Œ resolve(1) åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>promise çŠ¶æ€å˜ä¸º resolve, return 2<ul>\n<li>æ‰§è¡Œ finally<ul>\n<li>console.log(â€˜finally2â€™)</li>\n<li>return new Promiseï¼Œ resolve(â€˜æˆ‘æ˜¯finally2è¿”å›çš„å€¼â€™) åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹è¿˜è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—<ul>\n<li>console.log(â€˜finallyâ€™)</li>\n<li>console.log(â€˜finally2åé¢çš„thenå‡½æ•°â€™, res) res â€“&gt; 2</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li>.finally()æ–¹æ³•ä¸ç®¡Promiseå¯¹è±¡æœ€åçš„çŠ¶æ€å¦‚ä½•éƒ½ä¼šæ‰§è¡Œ</li>\n<li>.finally()æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨.finally()å‡½æ•°ä¸­æ˜¯æ²¡æ³•çŸ¥é“Promiseæœ€ç»ˆçš„çŠ¶æ€æ˜¯resolvedè¿˜æ˜¯rejectedçš„</li>\n<li>å®ƒæœ€ç»ˆè¿”å›çš„é»˜è®¤ä¼šæ˜¯ä¸€ä¸ª<strong>ä¸Šä¸€æ¬¡çš„Promiseå¯¹è±¡å€¼</strong>ï¼Œä¸è¿‡å¦‚æœæŠ›å‡ºçš„æ˜¯ä¸€ä¸ªå¼‚å¸¸åˆ™è¿”å›å¼‚å¸¸çš„Promiseå¯¹è±¡ã€‚</li>\n<li><strong>promise æ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œä»è€Œå®ç°äº†é“¾å¼è°ƒç”¨</strong> </li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/99d8936b8c5029a6786b464868666f7d47917.png\" alt=\"é¢˜ç›®åè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Promise-ä¸­çš„-all-å’Œ-race\"><a href=\"#Promise-ä¸­çš„-all-å’Œ-race\" class=\"headerlink\" title=\"Promise ä¸­çš„ all å’Œ race\"></a>Promise ä¸­çš„ all å’Œ race</h3><ul>\n<li>Promise.all(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª Promise å®ä¾‹ï¼Œæ­¤å®ä¾‹åœ¨ iterable å‚æ•°å†…æ‰€æœ‰çš„ promise éƒ½â€œå®Œæˆï¼ˆresolvedï¼‰â€æˆ–å‚æ•°ä¸­ä¸åŒ…å« promise æ—¶å›è°ƒå®Œæˆï¼ˆresolveï¼‰ï¼›å¦‚æœå‚æ•°ä¸­  promise æœ‰ä¸€ä¸ªå¤±è´¥ï¼ˆrejectedï¼‰ï¼Œæ­¤å®ä¾‹å›è°ƒå¤±è´¥ï¼ˆrejectï¼‰ï¼Œå¤±è´¥çš„åŸå› æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥ promise çš„ç»“æœã€‚</li>\n<li>Promise.race(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª promiseï¼Œä¸€æ—¦è¿­ä»£å™¨ä¸­çš„æŸä¸ªpromiseè§£å†³æˆ–æ‹’ç»ï¼Œè¿”å›çš„ promiseå°±ä¼šè§£å†³æˆ–æ‹’ç»ã€‚</li>\n</ul>\n<p>4.1 é¢˜ç›®ä¸€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runAsync</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">r</span> =&gt;</span> setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> r(x, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span>))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.all([runAsync(<span class=\"number\">1</span>), runAsync(<span class=\"number\">2</span>), runAsync(<span class=\"number\">3</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>Promise.all å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—<ul>\n<li>é—´éš”ä¸€ç§’åï¼Œæ§åˆ¶å°ä¼šåŒæ—¶æ‰“å°å‡º1, 2, 3ï¼Œè¿˜æœ‰ä¸€ä¸ªæ•°ç»„[1, 2, 3]</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>æœ‰äº†allï¼Œå°±å¯ä»¥å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå›è°ƒä¸­å¤„ç†æ‰€æœ‰çš„è¿”å›æ•°æ®</strong></li>\n<li>.all()åé¢çš„.then()é‡Œçš„å›è°ƒå‡½æ•°æ¥æ”¶çš„å°±æ˜¯æ‰€æœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœã€‚</li>\n<li>è€Œä¸”è¿™ä¸ªç»“æœä¸­æ•°ç»„çš„é¡ºåºå’ŒPromise.all()æ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºä¸€è‡´</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/d3a6d5f4f158de806b690af124fcec9431029.png\" alt=\"é¢˜ç›®ä¸€è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>4.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runAsync</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">r</span> =&gt;</span> setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> r(x, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span>))</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runReject</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">res, rej</span>) =&gt;</span> setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> rej(<span class=\"string\">`Error: <span class=\"subst\">$&#123;x&#125;</span>`</span>, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span> * x))</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.all([runAsync(<span class=\"number\">1</span>), runReject(<span class=\"number\">4</span>), runAsync(<span class=\"number\">3</span>), runReject(<span class=\"number\">2</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> <span class=\"built_in\">console</span>.log(err))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>Promise.all å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—<ul>\n<li>é—´éš”ä¸€ç§’åï¼Œæ§åˆ¶å°ä¼šåŒæ—¶æ‰“å°å‡º 1, 3</li>\n</ul>\n</li>\n<li>ç”±äº runReject(4) æ¯” runReject(2) æ™šå…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸” catch åªæ‰§è¡Œä¸€æ¬¡<ul>\n<li>å†é—´éš”ä¸€ç§’å<ul>\n<li>console.log(x) x â€“&gt; 2</li>\n<li>console.log(â€˜Error: 2â€™)</li>\n</ul>\n</li>\n<li>å†é—´éš”2ç§’å<ul>\n<li>console.log(x) x â€“&gt; 4</li>\n<li>ä¸ä¼šå†æ‰§è¡Œ catch</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/e0e25426dc0d49c3af9acee68744760d51135.png\" alt=\"é¢˜ç›®äºŒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p>ç­‰åŒäº</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runAsync</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">r</span> =&gt;</span> setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> r(x, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span>))</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runReject</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">res, rej</span>) =&gt;</span> setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> rej(<span class=\"string\">`Error: <span class=\"subst\">$&#123;x&#125;</span>`</span>, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span> * x))</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.all([runAsync(<span class=\"number\">1</span>), runReject(<span class=\"number\">4</span>), runAsync(<span class=\"number\">3</span>), runReject(<span class=\"number\">2</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res), </span><br><span class=\"line\">  err =&gt; <span class=\"built_in\">console</span>.log(err);</span><br></pre></td></tr></table></figure></li>\n<li><p>ç»“è®º</p>\n<ul>\n<li>all å’Œ raceä¼ å…¥çš„æ•°ç»„ä¸­å¦‚æœæœ‰ä¼šæŠ›å‡ºå¼‚å¸¸çš„å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€å…ˆæŠ›å‡ºçš„é”™è¯¯ä¼šè¢«æ•è·ï¼Œå¹¶ä¸”æ˜¯è¢« then çš„ç¬¬äºŒä¸ªå‚æ•°æˆ–è€…åé¢çš„ catch æ•è·ï¼›ä½†å¹¶ä¸ä¼šå½±å“æ•°ç»„ä¸­å…¶å®ƒçš„å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚</li>\n</ul>\n</li>\n</ul>\n<p>4.3 é¢˜ç›®ä¸‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runAsync</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">r</span> =&gt;</span> setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> r(x, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span>))</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.race([runAsync(<span class=\"number\">1</span>), runAsync(<span class=\"number\">2</span>), runAsync(<span class=\"number\">3</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'result: '</span>, res))</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> <span class=\"built_in\">console</span>.log(err))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>Promise.race å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>åœ¨é—´éš”æ—¶é—´éƒ½ä¸€æ ·çš„æƒ…å†µä¸‹ï¼ŒrunAsync1 æœ€å…ˆåŠ å…¥é˜Ÿåˆ—</li>\n<li>å› æ­¤<ul>\n<li>console.log(x) x â€“&gt; 1</li>\n</ul>\n</li>\n<li>ç”±äº race çš„ç‰¹æ®Šæ€§ï¼Œåªæ•æ‰æœ€å…ˆæ‰§è¡Œå®Œæˆçš„é‚£ä¸ªç»“æœ<ul>\n<li>console.log(â€˜result: â€˜, res) res â€“&gt; 1</li>\n</ul>\n</li>\n<li>å†<ul>\n<li>console.log(x) x â€“&gt; 2</li>\n<li>console.log(x) x â€“&gt; 3</li>\n</ul>\n</li>\n<li>æ²¡æœ‰æŠ¥é”™ï¼Œä¸ä¼šè¢« catch</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/2eda438cd745e39ba934af362a80521038770.png\" alt=\"é¢˜ç›®ä¸‰è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>4.4 é¢˜ç›®å››</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runAsync</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">r</span> =&gt;</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> r(x, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span>)</span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runReject</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">res, rej</span>) =&gt;</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> rej(<span class=\"string\">`Error: <span class=\"subst\">$&#123;x&#125;</span>`</span>, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span> * x)</span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.race([runReject(<span class=\"number\">0</span>), runAsync(<span class=\"number\">1</span>), runAsync(<span class=\"number\">2</span>), runAsync(<span class=\"number\">3</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">\"result: \"</span>, res))</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> <span class=\"built_in\">console</span>.log(err));</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>Promise.race å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>runReject(0) æœ€å…ˆä¼ å…¥</li>\n<li>å› æ­¤<ul>\n<li>console.log(x) x â€“&gt; 0</li>\n<li>console.log(err) err â€“&gt; Error: 0</li>\n</ul>\n</li>\n<li>é—´éš”å°äº1ç§’å</li>\n<li>runAsync(1), runAsync(2), runAsync(3)<ul>\n<li>ä¾æ¬¡ä¸º</li>\n<li>console.log(x) x â€“&gt; 1</li>\n<li>console.log(x) x â€“&gt; 2</li>\n<li>console.log(x) x â€“&gt; 3</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/89acbf32e7218b90c050526171bd1b3d53719.png\" alt=\"é¢˜ç›®å››\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"https://juejin.im/post/5e58c618e51d4526ed66b5cf\" target=\"_blank\" rel=\"noopener\">é¢˜ç›®æ¥æº</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>äº”ä¸€å‡æœŸï¼Œæ¥å†™ä¸€å†™ Promise çš„é¢˜å§ï¼Œå˜¿å˜¿å˜¿ ğŸ˜ƒ</li>\n<li>äº”ä¸€å€’è®¡æ—¶ 3 å¤©</li>\n</ul>","more":"<h2 id=\"å®è·µå‡†å¤‡\"><a href=\"#å®è·µå‡†å¤‡\" class=\"headerlink\" title=\"å®è·µå‡†å¤‡\"></a>å®è·µå‡†å¤‡</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#import &lt;Foundation&#x2F;Foundation.h&gt;</span><br><span class=\"line\">#import &lt;JavaScriptCore&#x2F;JavaScriptCore.h&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">int main(int argx, const char * argv[]) &#123;</span><br><span class=\"line\">  @autoreleasepool &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; var context &#x3D; new JSContext</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; define a javascript context</span><br><span class=\"line\">    JSContext* context &#x3D; [[JSContext alloc] init];</span><br><span class=\"line\">    &#x2F;&#x2F; like:var result &#x3D; null;</span><br><span class=\"line\">    JSValue* result;</span><br><span class=\"line\">    </span><br><span class=\"line\">    while(true) &#123;</span><br><span class=\"line\">      char sourcecode[1024];</span><br><span class=\"line\">      </span><br><span class=\"line\">      scanf(&#39;%s&#39;, &amp;sourcecode);</span><br><span class=\"line\">      NSString* code &#x3D; [NSString stringWithUTF8String: sourcecode];</span><br><span class=\"line\">      </span><br><span class=\"line\">      result &#x3D; [context evaluateScript:code];</span><br><span class=\"line\">      </span><br><span class=\"line\">      NSLog(@&quot;%@&quot;, [result toString]);</span><br><span class=\"line\">      </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  return 0;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¦‚ä¸Šå®ç°ä¸€ä¸ªç®€å•çš„äº‹ä»¶å¾ªç¯ï¼Œç”¨æ¥è¾“å‡º console</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/a99619da1cded49f443ded2fc219b27432778.png\" alt=\"OC æ–¹æ³•\"></li>\n<li>æˆ‘ä»¬åœ¨ Javascript ä¸­è®²çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ã€å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ˜¯ Javascript è°ƒç”¨æ–¹å»ä½¿ç”¨ Javascript çš„ä¸€ç§æ–¹å¼ï¼Œå¦‚æœä»…æ˜¯æ‰§è¡Œä¸€æ®µä»£ç ï¼Œæ˜¯ä¸éœ€è¦äº‹ä»¶å¾ªç¯çš„ã€‚é€šè¿‡è¿™æ®µä»£ç ï¼Œæ˜¯å¯ä»¥çœ‹å‡ºæ¥ï¼ŒJavascript çš„äº‹ä»¶å¾ªç¯ï¼Œæ˜¯åœ¨ JSContext ä¹‹å¤–ï¼Œäº‹ä»¶å¾ªç¯ç›¸å…³çŸ¥è¯†ï¼Œæ—¢ä¸æ˜¯ Javascript å¼•æ“çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ Javascript è¯­è¨€çš„ä¸€éƒ¨åˆ†ã€‚</li>\n<li>code çš„ä¼ å…¥æ–¹å¼<ul>\n<li>&lt;script&gt;&lt;/script&gt; æ™®é€šä»£ç ç‰‡æ®µ</li>\n<li>&lt;script type=â€moduleâ€&gt;&lt;/script&gt;</li>\n<li>å‡½æ•°</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#import &lt;Foundation&#x2F;Foundation.h&gt;</span><br><span class=\"line\">#import &lt;JavaScriptCore&#x2F;JavaScriptCore.h&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">int main(int argx, const char * argv[]) &#123;</span><br><span class=\"line\">  @autoreleasepool &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; var context &#x3D; new JSContext</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; define a javascript context</span><br><span class=\"line\">    JSContext* context &#x3D; [[JSContext alloc] init];</span><br><span class=\"line\">    &#x2F;&#x2F; like:var result &#x3D; null;</span><br><span class=\"line\">    JSValue* result;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; TODO: calculate the square of arg x</span><br><span class=\"line\">    NSString* code &#x3D; @&quot;(function(x)&#123; return x * x; &#125;)&quot;;</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; like: result &#x3D; (function(x)&#123; return x * x; &#125;)</span><br><span class=\"line\">    result &#x3D; [context evaluateScript:code];</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; passing the number 4 into the function</span><br><span class=\"line\">    JSValue* arg1 &#x3D; [JSValue valueWithInt32:4 inContext:context];</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; execute the function with arg of 4</span><br><span class=\"line\">    NSLog(@&quot;%@&quot;, [[result callWithArguments:@[arg1]] toString]);</span><br><span class=\"line\">  </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  return 0;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸Šé¢çš„ Object-C ä»£ç ï¼Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬æ˜¯å°†ä¸€æ®µä¸€æ®µçš„ä»£ç ï¼Œä¼ å…¥ evaluateScript ä¸­æ‰§è¡Œã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#import &lt;Foundation&#x2F;Foundation.h&gt;</span><br><span class=\"line\">#import &lt;JavaScriptCore&#x2F;JavaScriptCore.h&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">int main(int argx, const char * argv[]) &#123;</span><br><span class=\"line\">  @autoreleasepool &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; var context &#x3D; new JSContext</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; define a javascript context</span><br><span class=\"line\">    JSContext* context &#x3D; [[JSContext alloc] init];</span><br><span class=\"line\">    &#x2F;&#x2F; like:var result &#x3D; null;</span><br><span class=\"line\">    JSValue* result;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; TODO: calculate the square of arg x</span><br><span class=\"line\">    NSString* code &#x3D; @&quot;new Promise(resolve &#x3D;&gt; resolve()).then(() &#x3D;&gt; this.a &#x3D; 3), function()&#123;return this.a&#125;;&quot;;</span><br><span class=\"line\">        </span><br><span class=\"line\">    result &#x3D; [context evaluateScript:code];</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;&#x2F; like: result();</span><br><span class=\"line\">    NSLog(@&quot;%@&quot;, [[result callWithArguments:@[]] toString]);</span><br><span class=\"line\">  </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  return 0;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>evaluateScript å®é™…ä¸Šæ‰§è¡Œä¸¤æ­¥ï¼š</p>\n<ol>\n<li><p>æ‰§è¡Œæ•´ä¸ªæ–¹æ³•</p>\n<blockquote>\n<p>new Promise(resolve =&gt; resolve()).then(() =&gt; this.a = 3), function(){return this.a};</p>\n</blockquote>\n<ul>\n<li>é€—å·è¡¨è¾¾å¼ï¼Œæ°¸è¿œè¿”å›åé¢çš„å€¼ï¼Œå¦‚æœè¢«è°ƒç”¨ï¼Œå‰é¢çš„ä¼šè¢«æ‰§è¡Œ</li>\n</ul>\n</li>\n<li><p>æ‰§è¡Œ Promise ä¸­ then åé¢çš„è¯­å¥</p>\n</li>\n</ol>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/81d945c99778450fd86a710f20355cbc269796.png\" alt=\"evaluateScript\"></li>\n<li>æœ‰ then ,å¯èƒ½äº§ç”Ÿä¸€ä¸ªå®ä»»åŠ¡é‡Œé¢æœ‰å¤šä¸ªå¾®ä»»åŠ¡çš„æƒ…å†µï¼Œ ä¸€åˆ‡JS ä»£ç éƒ½æ˜¯å¾®ä»»åŠ¡ä¸­æ‰§è¡Œçš„</li>\n<li>æ‹¿æµè§ˆå™¨ä¸¾ä¾‹ï¼šsetTimeoutã€setInterval è¿™ç§å…¶å®ä¸æ˜¯ JS è¯­æ³•æœ¬èº«çš„ APIï¼Œæ˜¯ JS çš„å®¿ä¸»æµè§ˆå™¨æä¾›çš„ APIï¼Œ æ‰€ä»¥æ˜¯å®ä»»åŠ¡ã€‚</li>\n<li>è€Œ Promise æ˜¯ JS æœ¬èº«è‡ªå¸¦çš„ APIï¼Œè¿™ç§å°±æ˜¯å¾®ä»»åŠ¡ã€‚</li>\n</ul>\n</li>\n<li><p>æ€»ç»“ï¼š<strong>å®¿ä¸»æä¾›çš„æ–¹æ³•æ˜¯å®ä»»åŠ¡ï¼ŒJS è‡ªå¸¦çš„æ˜¯å¾®ä»»åŠ¡</strong></p>\n</li>\n<li><p><strong>ä»»åŠ¡åˆ—è¡¨åˆ—é‡Œé¢æœ‰å¾ˆå¤šå®ä»»åŠ¡ï¼Œç„¶åæ¯ä¸ªå®ä»»åŠ¡é‡Œé¢æœ‰ä¸€ä¸ªå¾®ä»»åŠ¡åˆ—è¡¨ï¼Œæ¯ä¸ªå®ä»»åŠ¡æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ä¹‹å‰ä¼šæŠŠè‡ªå·±å†…éƒ¨çš„å¾®ä»»åŠ¡æ‰§è¡Œå®Œ</strong></p>\n</li>\n<li><p><strong>å®ä»»åŠ¡</strong>åŒ…æ‹¬ï¼šscript ã€setTimeoutã€setInterval ã€setImmediate ã€I/O ã€UI renderingã€‚</p>\n</li>\n<li><p><strong>å¾®ä»»åŠ¡</strong>åŒ…æ‹¬ï¼šMutationObserverã€Promise.then()æˆ–catch()ã€Promiseä¸ºåŸºç¡€å¼€å‘çš„å…¶å®ƒæŠ€æœ¯ï¼Œæ¯”å¦‚fetch APIã€V8çš„åƒåœ¾å›æ”¶è¿‡ç¨‹ã€Nodeç‹¬æœ‰çš„process.nextTickã€‚</p>\n</li>\n</ul>\n<h1 id=\"Javascript-ç»“æ„åŒ–ç¨‹åºè®¾è®¡åŸºç¡€\"><a href=\"#Javascript-ç»“æ„åŒ–ç¨‹åºè®¾è®¡åŸºç¡€\" class=\"headerlink\" title=\"Javascript ç»“æ„åŒ–ç¨‹åºè®¾è®¡åŸºç¡€\"></a>Javascript ç»“æ„åŒ–ç¨‹åºè®¾è®¡åŸºç¡€</h1><h2 id=\"å®è·µè®°å½•\"><a href=\"#å®è·µè®°å½•\" class=\"headerlink\" title=\"å®è·µè®°å½•\"></a>å®è·µè®°å½•</h2><h3 id=\"åŸºç¡€é¢˜\"><a href=\"#åŸºç¡€é¢˜\" class=\"headerlink\" title=\"åŸºç¡€é¢˜\"></a>åŸºç¡€é¢˜</h3><p>1.1 é¢˜ç›®ä¸€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>, promise1);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æï¼š</p>\n<ul>\n<li><p>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­ console.log(â€˜promise1â€™)</p>\n<blockquote>\n<p>console.log(â€˜1â€™, promise1);</p>\n</blockquote>\n</li>\n<li><p>å†æ‰§è¡ŒåŒæ­¥ä»£ç </p>\n</li>\n<li><p>æ‰§è¡Œå®Œåï¼Œ promise1 ä¸­å¹¶æ²¡æœ‰ resolved, rejectedï¼Œ ä¸€ç›´å¤„åœ¨ pending çš„çŠ¶æ€</p>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/f45e1dbe45d84e46ab2fd24703cad0c521137.png\" alt=\"é¢˜ç›®ä¸€æ‰§è¡Œ\"></li>\n</ul>\n</li>\n</ul>\n<p>1.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);</span><br><span class=\"line\">  resolve(<span class=\"string\">'success'</span>)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">promise.then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­<ul>\n<li>console.log(1);</li>\n<li>resolve(â€˜successâ€™) å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n<li>console.log(2);</li>\n</ul>\n</li>\n<li>promise.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å†æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç <ul>\n<li>console.log(4);</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸” promise ä¸ºresolvedï¼Œæ‰§è¡Œ promise.then<ul>\n<li>console.log(3);</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c31fd6e9ba9c9f9ac4062d6b395706f230745.png\" alt=\"é¢˜ç›®äºŒæ‰§è¡Œ\"></li>\n</ul>\n</li>\n</ul>\n<p>1.3 é¢˜ç›®ä¸‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">promise.then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­<ul>\n<li>console.log(1);</li>\n<li>console.log(2);</li>\n<li>è¯¥ promise æ²¡æœ‰ resolved, rejected, ä¸€ç›´å¤„åœ¨ pending</li>\n</ul>\n</li>\n<li>promise.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å†æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç <ul>\n<li>console.log(4);</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä½† promise ä¸ºpendingï¼Œä¸å¯èƒ½æ‰§è¡Œ promise.then ä¸­æ–¹æ³•</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/b6e827ca293c65c261a83a81f1f5411227105.png\" alt=\"é¢˜ç›®ä¸‰æ‰§è¡Œ\"></li>\n</ul>\n</li>\n</ul>\n<p>1.4 é¢˜ç›®å››</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</span><br><span class=\"line\">  resolve(<span class=\"string\">'resolve1'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> promise2 = promise1.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>, promise1);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'2'</span>, promise2);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­<ul>\n<li>console.log(â€˜promise1â€™)</li>\n<li>resolve(â€˜resolve1â€™) å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n</ul>\n</li>\n<li>promise1.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>promise2 æ˜¯ä¸€ä¸ªæ–°çŠ¶æ€ä¸º pending çš„ Promise</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜1â€™, promise1);<ul>\n<li>promise1 ä¸­çŠ¶æ€åœ¨ä¸Šé¢å·²ç»æ›´æ”¹ä¸º resolved</li>\n</ul>\n</li>\n<li>console.log(â€˜2â€™, promise2);<ul>\n<li>promise2 ä¸­çŠ¶æ€ä¸ºpending</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then <ul>\n<li>console.log(res) <ul>\n<li>å…¶ä¸­ promise1.thenï¼Œ promise1 çš„çŠ¶æ€ä¸º resolved</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/f31e7f8db309521b5252143252eaed2551272.png\" alt=\"é¢˜ç›®å››è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>1.5 é¢˜ç›®äº”</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fn = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"function\">(<span class=\"params\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>((resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);</span><br><span class=\"line\">  resolve(<span class=\"string\">'success'</span>)</span><br><span class=\"line\">&#125;))</span><br><span class=\"line\">fn().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œconst fn = () =&gt; (Promise Object) è¿”å›ä¸€ä¸ª promise å¯¹è±¡</li>\n<li>fn()ï¼Œæ‰§è¡Œ fn æ–¹æ³•<ul>\n<li>console.log(1);</li>\n<li>resolve(â€˜successâ€™) å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n</ul>\n</li>\n<li>Function.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜startâ€™)</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— Function.then<ul>\n<li>console.log(res) å…¶ä¸­ promise çš„çŠ¶æ€ä¸º resolved</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/955895672615c24a4eb671617d8b739829033.png\" alt=\"é¢˜ç›®äº”è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>1.6 é¢˜ç›®å…­</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fn = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span></span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);</span><br><span class=\"line\">    resolve(<span class=\"string\">\"success\"</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"start\"</span>);</span><br><span class=\"line\">fn().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œconst fn = () =&gt; (Promise Object) è¿”å›ä¸€ä¸ª promise å¯¹è±¡</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€œstartâ€);</li>\n</ul>\n</li>\n<li>fn(), æ‰§è¡Œ fn æ–¹æ³•<ul>\n<li>console.log(1);</li>\n<li>resolve(â€œsuccessâ€); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n</ul>\n</li>\n<li>Function.then å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— Function.then<ul>\n<li>console.log(res); å…¶ä¸­ promise çš„çŠ¶æ€ä¸º resolved</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/ccd1a9148be91f5aa24847a0d4e23dfb31837.png\" alt=\"é¢˜ç›®å…­è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Promise-ç»“åˆ-setTimeout\"><a href=\"#Promise-ç»“åˆ-setTimeout\" class=\"headerlink\" title=\"Promise ç»“åˆ setTimeout\"></a>Promise ç»“åˆ setTimeout</h3><p>2.1 é¢˜ç›®ä¸€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'time'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'resolve'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'end'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜startâ€™)</li>\n</ul>\n</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>Promise.resolve().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜endâ€™)</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— Promise.resolve().then<ul>\n<li>console.log(â€˜resolveâ€™)</li>\n</ul>\n</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout â€¦<ul>\n<li>console.log(â€˜timeâ€™)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/4a9c74ab2a26cc16e55ce53f6fb765d630133.png\" alt=\"é¢˜ç›®ä¸€è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>2.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"timerStart\"</span>);</span><br><span class=\"line\">    resolve(<span class=\"string\">\"success\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"timerEnd\"</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">promise.then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­<ul>\n<li>console.log(1);</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(2);</li>\n</ul>\n</li>\n<li>promise.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(4);</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— å…¶ä¸­ promise ä¸­ï¼Œå¹¶æ²¡æœ‰ resolvedã€rejectedï¼Œä¸€ç›´åœ¨ pendingï¼Œä¸å¯èƒ½æ‰§è¡Œ promise.then ä¸­æ–¹æ³•</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout â€¦</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡ setTimeout ä»£ç ä»ä¸Šè‡³ä¸‹æ‰§è¡Œ</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€œtimerStartâ€);</li>\n<li>resolve(â€œsuccessâ€); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n<li>console.log(â€œtimerEndâ€);</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/66ea5bbd68d0841ad58cac5ca771625347414.png\" alt=\"é¢˜ç›®äºŒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>2.3 é¢˜ç›®ä¸‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>);</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer3'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer2'</span>)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»ä¸Šæ‰§è¡Œ</li>\n<li>setTimeout â€¦ åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>setTimeout â€¦ åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜startâ€™)</li>\n</ul>\n</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout â€¦</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç  <ul>\n<li>console.log(â€˜timer1â€™);</li>\n</ul>\n</li>\n<li>setTimeout â€¦ åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜timer2â€™)</li>\n</ul>\n</li>\n<li>ç¬¬ä¸‰ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜timer3â€™)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/b5ab6578c5ba7d8d727a3bf47ba8879033812.png\" alt=\"é¢˜ç›®ä¸‰è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>);</span><br><span class=\"line\">  <span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer2'</span>)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>setTimeout â€¦ åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>setTimeout â€¦ åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜startâ€™)</li>\n</ul>\n</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout â€¦</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜timer1â€™);</li>\n<li>Promise.resolve().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—<ul>\n<li>console.log(â€˜promiseâ€™)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout â€¦</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜timer2â€™)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/f65f2aa65848d2e8aaf5c3918509c6e934427.png\" alt=\"é¢˜ç›®ä¸‰è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>2.4 é¢˜ç›®å››</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> timer2 = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer2'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> timer1 = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>)</span><br><span class=\"line\">  <span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>Promise.resolve().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç </li>\n<li>console.log(â€˜startâ€™);</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç </li>\n<li>console.log(â€˜promise1â€™);</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ setTimeout â€¦</li>\n<li>console.log(â€˜timer2â€™)</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç </li>\n<li>console.log(â€˜timer1â€™)</li>\n<li>Promise.resolve().then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>console.log(â€˜promise2â€™)</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>console.log(â€˜timer2â€™)</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/60a22379f31bb12de055ed83a31aca0b46969.png\" alt=\"é¢˜ç›®å››è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>2.5 é¢˜ç›®äº” ** å­˜åœ¨å’Œä¹‹å‰ä¸€æ ·çš„ï¼Œpromise resolved åï¼ŒçŠ¶æ€ä¸ŠæŠ›è‡³ä¸Šä¸€ä¸ª å®ä»»åŠ¡é˜Ÿåˆ—çš„é—®é¢˜</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    resolve(<span class=\"string\">'success'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> promise2 = promise1.then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'error!!!'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>, promise1)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>, promise2)</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>, promise1)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>, promise2)</span><br><span class=\"line\">&#125;, <span class=\"number\">2000</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>å…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­</li>\n<li>setTimout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>promise1.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜promise1â€™, promise1)<ul>\n<li>å…¶ä¸­ promise1 æ²¡æœ‰ resolvedã€rejected,ä¸€ç›´å¤„åœ¨ pending çŠ¶æ€</li>\n<li>promise1 Promise {&lt;pending&gt;}</li>\n</ul>\n</li>\n<li>console.log(â€˜promise2â€™, promise2)<ul>\n<li>å…¶ä¸­ promise1 ä¸€ç›´å¤„åœ¨ pending çŠ¶æ€ï¼Œç›´æ¥å½±å“åˆ° promise2 ä¹Ÿä¸€ç›´å¤„åœ¨ pending çŠ¶æ€</li>\n<li>promise2 Promise {&lt;pending&gt;}</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then â€¦<ul>\n<li>ç”±äº promise1 ä»å¤„äº pending çŠ¶æ€ï¼Œä¸å¯èƒ½æ‰§è¡Œ promise1.then â€¦</li>\n</ul>\n</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>resolve(â€˜successâ€™) å°† promise1 ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜promise1â€™, promise1)<ul>\n<li>å…¶ä¸­ promise1 å¤„åœ¨ resolved çŠ¶æ€</li>\n<li>promise1 Promise {&lt;resolved&gt;: â€œsuccessâ€}</li>\n</ul>\n</li>\n<li>console.log(â€˜promise2â€™, promise2)<ul>\n<li>promise2 Promise {&lt;rejected&gt;: Error: error!!! at &lt;anonymous&gt;:8:9}</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/3ad654d66c66c648a058adf29154d879107368.png\" alt=\"é¢˜ç›®äº”è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>2.6 é¢˜ç›®å…­</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    resolve(<span class=\"string\">\"success\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"timer1\"</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise1é‡Œçš„å†…å®¹\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> promise2 = promise1.then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">\"error!!!\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise1\"</span>, promise1);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise2\"</span>, promise2);</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"timer2\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise1\"</span>, promise1);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"promise2\"</span>, promise2);</span><br><span class=\"line\">&#125;, <span class=\"number\">2000</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°</li>\n<li>setTimeout å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€œpromise1é‡Œçš„å†…å®¹â€);</li>\n</ul>\n</li>\n<li>promise1.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€œpromise1â€, promise1);<ul>\n<li>å…¶ä¸­ promise1 æ²¡æœ‰ resolvedã€rejected æ‰ï¼Œä¸€ç›´å¤„åœ¨ pending çŠ¶æ€<ul>\n<li>promise1 Promise {&lt;pending&gt;}</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>console.log(â€œpromise2â€, promise2);<ul>\n<li>primise1 çš„ pending çŠ¶æ€ï¼Œç›´æ¥å½±å“ promise2 ä¹Ÿå¤„åœ¨ pending çŠ¶æ€<ul>\n<li>promise2 Promise {&lt;pending&gt;}</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then â€¦<ul>\n<li>ç”±äº promise1 ä»å¤„äº pending çŠ¶æ€ï¼Œä¸å¯èƒ½æ‰§è¡Œ promise1.then â€¦</li>\n</ul>\n</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œç¬¬äºŒä¸ªå®ä»»åŠ¡</li>\n<li>resolve(â€œsuccessâ€); å°† promise1 ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€œtimer1â€);</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise1.then â€¦<ul>\n<li>throw new Error(â€œerror!!!â€);</li>\n</ul>\n</li>\n<li>ç¬¬äºŒä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡<ul>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€œtimer2â€);</li>\n<li>console.log(â€œpromise1â€, promise1);<ul>\n<li>å…¶ä¸­ promise1 çš„çŠ¶æ€å·²ç» resloved</li>\n<li>promise1 Promise {&lt;resolved&gt;: â€œsuccessâ€}</li>\n</ul>\n</li>\n<li>console.log(â€œpromise2â€, promise2);<ul>\n<li>promise2 Promise {&lt;rejected&gt;: Error: error!!! at &lt;anonymous&gt;:8:9}</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/88a197ec5863fcca93b072d3baecf6a0113849.png\" alt=\"é¢˜ç›®å…­è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Promise-ä¸­çš„-thenã€catchã€finally\"><a href=\"#Promise-ä¸­çš„-thenã€catchã€finally\" class=\"headerlink\" title=\"Promise ä¸­çš„ thenã€catchã€finally\"></a>Promise ä¸­çš„ thenã€catchã€finally</h3><p>3.1 é¢˜ç›®ä¸€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  resolve(<span class=\"string\">\"success1\"</span>);</span><br><span class=\"line\">  reject(<span class=\"string\">\"error\"</span>);</span><br><span class=\"line\">  resolve(<span class=\"string\">\"success2\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">promise</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"then: \"</span>, res);</span><br><span class=\"line\">  &#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"catch: \"</span>, err);</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°<ul>\n<li>resolve(â€œsuccess1â€); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n</ul>\n</li>\n<li>promise.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise.then â€¦<ul>\n<li>console then:  success1</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/448d9fb1db29ba7e76762f97a9508d1e35386.png\" alt=\"é¢˜ç›®ä¸€è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>Promiseçš„çŠ¶æ€ä¸€ç»æ”¹å˜å°±ä¸èƒ½å†æ”¹å˜</strong></li>\n<li><strong>æ„é€ å‡½æ•°ä¸­çš„ resolve æˆ– reject åªæœ‰ç¬¬ä¸€æ¬¡æ‰§è¡Œæœ‰æ•ˆï¼Œå¤šæ¬¡è°ƒç”¨æ²¡æœ‰ä»»ä½•ä½œç”¨</strong>ã€‚</li>\n</ul>\n</li>\n</ul>\n<p>3.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  reject(<span class=\"string\">\"error\"</span>);</span><br><span class=\"line\">  resolve(<span class=\"string\">\"success2\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">promise</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"then1: \"</span>, res);</span><br><span class=\"line\">  &#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"then2: \"</span>, res);</span><br><span class=\"line\">  &#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"catch: \"</span>, err);</span><br><span class=\"line\">  &#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"then3: \"</span>, res);</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°<ul>\n<li>reject(â€œerrorâ€); å°† promise ä¸­çš„çŠ¶æ€æ›´æ”¹ä¸º rejectedï¼Œå¹¶ä¿å­˜ä¸‹æ¥</li>\n</ul>\n</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise.then â€¦</li>\n<li>ç”±äº promise çŠ¶æ€ä¸º rejectedï¼Œå› æ­¤è§¦å‘ catch ï¼Œä¸ç®¡ catch è¿æ¥åˆ°å“ªï¼Œéƒ½èƒ½æ•è·ä¸Šå±‚æœªæ•æ‰è¿‡çš„é”™è¯¯<ul>\n<li>console.log(â€œcatch: â€œ, err);</li>\n<li>return a new promise</li>\n</ul>\n</li>\n<li>ç”±äº æ–°çš„ promise æ²¡æœ‰è¿”å›å€¼ï¼Œå› æ­¤è¿”å› undefined</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>catchä¸ç®¡è¢«è¿æ¥åˆ°å“ªé‡Œï¼Œéƒ½èƒ½æ•è·ä¸Šå±‚æœªæ•æ‰è¿‡çš„é”™è¯¯</strong></li>\n<li>è‡³äº then3 ä¹Ÿä¼šè¢«æ‰§è¡Œï¼Œé‚£æ˜¯å› ä¸º*<em>catch()ä¹Ÿä¼šè¿”å›ä¸€ä¸ª Promise *</em>ï¼Œä¸”ç”±äºè¿™ä¸ª Promise æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥æ‰“å°å‡ºæ¥çš„æ˜¯ undefined ã€‚</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/8523408bd03cb268237e720380e1273d47036.png\" alt=\"é¢˜ç›®äºŒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.3 é¢˜ç›®ä¸‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€ä¸º resolved, å› æ­¤è§¦å‘ then<ul>\n<li>console.log(res); res â€“&gt; 1</li>\n</ul>\n</li>\n<li>æ²¡æœ‰æŠ¥é”™ï¼Œç•¥è¿‡ catch</li>\n<li>è¢« then æ•æ‰<ul>\n<li>console.log(2); è¿”å›æ–°çš„ promiseï¼Œ promise è¿”å› resolve(2)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>Promise å¯ä»¥é“¾å¼è°ƒç”¨</strong>ï¼Œä¸è¿‡ promise æ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œä»è€Œå®ç°äº†é“¾å¼è°ƒç”¨, å®ƒå¹¶ä¸åƒä¸€èˆ¬æˆ‘ä»¬ä»»åŠ¡çš„é“¾å¼è°ƒç”¨ä¸€æ · return thisã€‚</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/2ca378bb1952c6fbacc3028024b1b89027624.png\" alt=\"é¢˜ç›®ä¸‰è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.4 é¢˜ç›®å››</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.reject(<span class=\"number\">1</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">3</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€ä¸º rejectedï¼Œå› æ­¤è§¦å‘ catch<ul>\n<li>console.log(err); err â€“&gt; 1</li>\n<li>return resolve(3)</li>\n</ul>\n</li>\n<li>è¢« then æ•æ‰<ul>\n<li>console.log(3) </li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/ed821dfd96ad96250140abdedf581fd930226.png\" alt=\"é¢˜ç›®å››è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.5 é¢˜ç›®äº”</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer'</span>)</span><br><span class=\"line\">    resolve(<span class=\"string\">'success'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> start = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">promise.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res, <span class=\"built_in\">Date</span>.now() - start)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">promise.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res, <span class=\"built_in\">Date</span>.now() - start)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œ new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°</li>\n<li>setTimeout â€¦ å…¥é˜Ÿå®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>promise.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>promise.then â€¦ å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ— promise.then â€¦</li>\n<li>å› ä¸º promise çŠ¶æ€å¹¶æ²¡æœ‰ resolvedã€rejectedï¼Œä¸€ç›´å¤„åœ¨ pendingï¼Œå¹¶ä¸èƒ½è°ƒç”¨ then æ–¹æ³•</li>\n<li>åŒä¸Š</li>\n<li>ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œç¬¬äºŒä¸ªå®ä»»åŠ¡ setTimeout â€¦</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>console.log(â€˜timerâ€™)</li>\n<li>promise çŠ¶æ€æ›´æ”¹ä¸º resolvedï¼Œå¹¶ä¿å­˜ä¸‹æ¥<ul>\n<li>çŠ¶æ€å¾€ä¸ŠæŠ›</li>\n<li>console.log(res, Date.now() - start)</li>\n<li>console.log(res, Date.now() - start))</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>Promise çš„ .then æˆ–è€… .catch å¯ä»¥è¢«è°ƒç”¨å¤šæ¬¡ï¼Œä½†è¿™é‡Œ Promise æ„é€ å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ã€‚æˆ–è€…è¯´ promise å†…éƒ¨çŠ¶æ€ä¸€ç»æ”¹å˜ï¼Œå¹¶ä¸”æœ‰äº†ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆåç»­æ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šç›´æ¥æ‹¿åˆ°è¯¥å€¼ã€‚</strong></li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/9ee74ca562f7c913d51c9fd5fe60680543896.png\" alt=\"é¢˜ç›®äº”è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.6 é¢˜ç›®å…­</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'error!!!'</span>)</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"then: \"</span>, res)</span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"catch: \"</span>, err)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€æ›´æ”¹ä¸º resolveï¼Œå¹¶æ— è¿”å›å€¼</li>\n<li>æ‰§è¡Œ then<ul>\n<li>throw new Error(â€˜error!!!â€™)</li>\n<li>return Promise.reject(new Error(â€˜error!!!â€™))</li>\n</ul>\n</li>\n<li>è¢« catch æ•æ‰<ul>\n<li>console.log(â€œcatch: â€œ, err) err â€“&gt; error</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/a1cb4e4f5e5ec95e2215d5b7ecc6a32428525.png\" alt=\"é¢˜ç›®å…­è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.7 é¢˜ç›®ä¸ƒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> promise;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">promise.catch(<span class=\"built_in\">console</span>.err)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€æ”¹å˜ä¸º resolve ï¼Œå¹¶æ— è¿”å›å€¼</li>\n<li>æ‰§è¡Œ then<ul>\n<li>return Promise.resolve(promise)</li>\n<li>Chaining cycle detected for promise</li>\n</ul>\n</li>\n<li>æ‰§è¡ŒåŒæ­¥ä»£ç <ul>\n<li>promise.catch promise cycle</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/70dbed986bad1d410ad7be3de8fe963d21008.png\" alt=\"é¢˜ç›®ä¸ƒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.8 é¢˜ç›®å…«</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>)</span><br><span class=\"line\">  .then(<span class=\"number\">2</span>)</span><br><span class=\"line\">  .then(<span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">3</span>))</span><br><span class=\"line\">  .then(<span class=\"built_in\">console</span>.log)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€æ”¹å˜ä¸º resolveï¼Œ return Promise.resolve(1)</li>\n<li>.then æˆ–è€… .catch çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿå€¼é€ä¼ </li>\n<li>ç¬¬ä¸€ä¸ªthenå’Œç¬¬äºŒä¸ªthenä¸­ä¼ å…¥çš„éƒ½ä¸æ˜¯å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯æ•°å­—ç±»å‹ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡ç±»å‹ï¼Œå› æ­¤å‘ç”Ÿäº†é€ä¼ ï¼Œå°†resolve(1) çš„å€¼ç›´æ¥ä¼ åˆ°æœ€åä¸€ä¸ªthené‡Œ</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>.then æˆ–è€… .catch çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿå€¼é€ä¼ </strong></li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/68c56ed26f2845300ecba0dc6dc7a3e914382.png\" alt=\"é¢˜ç›®å…«è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.9 é¢˜ç›®ä¹</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.reject(<span class=\"string\">'err!!!'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'success'</span>, res)</span><br><span class=\"line\">  &#125;, (err) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'error'</span>, err)</span><br><span class=\"line\">  &#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'catch'</span>, err)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>æˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹çœ‹ï¼Œå¦‚æœ catch ä½äº†é”™è¯¯ï¼Œerr ä¼šä¸€ç›´é“¾å¼ä¼ é€’ä¸‹å»è¢« catchå˜›</p>\n</li>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/f9859062c1341e2e575f952e320aba4222620.png\" alt=\"æ˜¯å¦ä¼šè¢«ä¸€ç›´catch\"></p>\n<ul>\n<li>ä¸€æ—¦ catch ä½å½“å‰æŠ¥é”™ï¼Œå½“å‰æŠ¥é”™å¹¶ä¸ä¼šå†å¾€ä¸‹ä¼ é€’</li>\n</ul>\n</li>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/9846287852a98f322045973bf302c58f24992.png\" alt=\"é€è¡Œè°ƒç”¨catchæ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„\"></p>\n<ul>\n<li>é€è¡Œè°ƒç”¨ then æ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„</li>\n</ul>\n</li>\n<li><p>é‚£æˆ‘è¿˜å¯ä»¥çœ‹çœ‹ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œres ä¼šä¸€ç›´é“¾å¼ä¼ é€’ then æ‰§è¡Œå˜›</p>\n</li>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/e2e72158c05ceee7da7528ff9a20348426425.png\" alt=\"æ˜¯å¦ä¼šè¢«ä¸€ç›´then\"></p>\n<ul>\n<li>å¯ä»¥çœ‹å‡º then æ˜¯ä¼šä¸€ç›´å¾€ä¸‹ä¼ é€’çš„</li>\n</ul>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/abb8ccf3daffdd023ce079c86cafdfd626377.png\" alt=\"é€è¡Œè°ƒç”¨then æ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„\"></p>\n<ul>\n<li>é€è¡Œè°ƒç”¨ then æ˜¯ä¼šä¸€ç›´ä¼ é€’ä¸‹å»çš„</li>\n</ul>\n</li>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€æ”¹å˜ä¸º rejectedï¼Œreturn â€˜err!!!â€™</li>\n<li>æ‰§è¡Œ thenï¼Œthen ä¸­ç¬¬äºŒä¸ªå‡½æ•°ï¼Œç›¸å½“äº catch</li>\n<li>å› æ­¤æ‰§è¡Œ</li>\n<li>console.log(â€˜errorâ€™, err) err â€“&gt; err!!!</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/05e3b86caaf2b9cbf0c6326020e3385327546.png\" alt=\"é¢˜ç›®ä¹è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve()</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">success</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'error!!!'</span>)</span><br><span class=\"line\">  &#125;, <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fail1</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'fail1'</span>, err)</span><br><span class=\"line\">  &#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fail2</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'fail2'</span>, err)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€å˜ä¸º resolveï¼Œ</li>\n<li>æ‰§è¡Œ then<ul>\n<li>throw new Error(â€˜error!!!â€™)</li>\n</ul>\n</li>\n<li>è¢« catch <ul>\n<li>console.log(â€˜fail2â€™, err) err â€“&gt; error!!!</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c8643d8fb0fd251145befd28d635ed7e33265.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>3.10 é¢˜ç›®å</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'1'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .finally(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'finally'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'2'</span>)</span><br><span class=\"line\">  .finally(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'finally2'</span>)</span><br><span class=\"line\">  \t<span class=\"keyword\">return</span> <span class=\"string\">'æˆ‘æ˜¯finally2è¿”å›çš„å€¼'</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'finally2åé¢çš„thenå‡½æ•°'</span>, res)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>promise çŠ¶æ€å˜ä¸º resolveï¼Œreturn 1</li>\n<li>æ‰§è¡Œ then<ul>\n<li>console.log(res) res â€“&gt; return new Promiseï¼Œ resolve(1) åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n<li>promise çŠ¶æ€å˜ä¸º resolve, return 2<ul>\n<li>æ‰§è¡Œ finally<ul>\n<li>console.log(â€˜finally2â€™)</li>\n<li>return new Promiseï¼Œ resolve(â€˜æˆ‘æ˜¯finally2è¿”å›çš„å€¼â€™) åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹è¿˜è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—<ul>\n<li>console.log(â€˜finallyâ€™)</li>\n<li>console.log(â€˜finally2åé¢çš„thenå‡½æ•°â€™, res) res â€“&gt; 2</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li>.finally()æ–¹æ³•ä¸ç®¡Promiseå¯¹è±¡æœ€åçš„çŠ¶æ€å¦‚ä½•éƒ½ä¼šæ‰§è¡Œ</li>\n<li>.finally()æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨.finally()å‡½æ•°ä¸­æ˜¯æ²¡æ³•çŸ¥é“Promiseæœ€ç»ˆçš„çŠ¶æ€æ˜¯resolvedè¿˜æ˜¯rejectedçš„</li>\n<li>å®ƒæœ€ç»ˆè¿”å›çš„é»˜è®¤ä¼šæ˜¯ä¸€ä¸ª<strong>ä¸Šä¸€æ¬¡çš„Promiseå¯¹è±¡å€¼</strong>ï¼Œä¸è¿‡å¦‚æœæŠ›å‡ºçš„æ˜¯ä¸€ä¸ªå¼‚å¸¸åˆ™è¿”å›å¼‚å¸¸çš„Promiseå¯¹è±¡ã€‚</li>\n<li><strong>promise æ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œä»è€Œå®ç°äº†é“¾å¼è°ƒç”¨</strong> </li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/99d8936b8c5029a6786b464868666f7d47917.png\" alt=\"é¢˜ç›®åè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Promise-ä¸­çš„-all-å’Œ-race\"><a href=\"#Promise-ä¸­çš„-all-å’Œ-race\" class=\"headerlink\" title=\"Promise ä¸­çš„ all å’Œ race\"></a>Promise ä¸­çš„ all å’Œ race</h3><ul>\n<li>Promise.all(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª Promise å®ä¾‹ï¼Œæ­¤å®ä¾‹åœ¨ iterable å‚æ•°å†…æ‰€æœ‰çš„ promise éƒ½â€œå®Œæˆï¼ˆresolvedï¼‰â€æˆ–å‚æ•°ä¸­ä¸åŒ…å« promise æ—¶å›è°ƒå®Œæˆï¼ˆresolveï¼‰ï¼›å¦‚æœå‚æ•°ä¸­  promise æœ‰ä¸€ä¸ªå¤±è´¥ï¼ˆrejectedï¼‰ï¼Œæ­¤å®ä¾‹å›è°ƒå¤±è´¥ï¼ˆrejectï¼‰ï¼Œå¤±è´¥çš„åŸå› æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥ promise çš„ç»“æœã€‚</li>\n<li>Promise.race(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª promiseï¼Œä¸€æ—¦è¿­ä»£å™¨ä¸­çš„æŸä¸ªpromiseè§£å†³æˆ–æ‹’ç»ï¼Œè¿”å›çš„ promiseå°±ä¼šè§£å†³æˆ–æ‹’ç»ã€‚</li>\n</ul>\n<p>4.1 é¢˜ç›®ä¸€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runAsync</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">r</span> =&gt;</span> setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> r(x, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span>))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.all([runAsync(<span class=\"number\">1</span>), runAsync(<span class=\"number\">2</span>), runAsync(<span class=\"number\">3</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>Promise.all å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—<ul>\n<li>é—´éš”ä¸€ç§’åï¼Œæ§åˆ¶å°ä¼šåŒæ—¶æ‰“å°å‡º1, 2, 3ï¼Œè¿˜æœ‰ä¸€ä¸ªæ•°ç»„[1, 2, 3]</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç»“è®º</p>\n<ul>\n<li><strong>æœ‰äº†allï¼Œå°±å¯ä»¥å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå›è°ƒä¸­å¤„ç†æ‰€æœ‰çš„è¿”å›æ•°æ®</strong></li>\n<li>.all()åé¢çš„.then()é‡Œçš„å›è°ƒå‡½æ•°æ¥æ”¶çš„å°±æ˜¯æ‰€æœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœã€‚</li>\n<li>è€Œä¸”è¿™ä¸ªç»“æœä¸­æ•°ç»„çš„é¡ºåºå’ŒPromise.all()æ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºä¸€è‡´</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/d3a6d5f4f158de806b690af124fcec9431029.png\" alt=\"é¢˜ç›®ä¸€è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>4.2 é¢˜ç›®äºŒ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runAsync</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">r</span> =&gt;</span> setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> r(x, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span>))</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runReject</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">res, rej</span>) =&gt;</span> setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> rej(<span class=\"string\">`Error: <span class=\"subst\">$&#123;x&#125;</span>`</span>, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span> * x))</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.all([runAsync(<span class=\"number\">1</span>), runReject(<span class=\"number\">4</span>), runAsync(<span class=\"number\">3</span>), runReject(<span class=\"number\">2</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> <span class=\"built_in\">console</span>.log(err))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>Promise.all å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—<ul>\n<li>é—´éš”ä¸€ç§’åï¼Œæ§åˆ¶å°ä¼šåŒæ—¶æ‰“å°å‡º 1, 3</li>\n</ul>\n</li>\n<li>ç”±äº runReject(4) æ¯” runReject(2) æ™šå…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸” catch åªæ‰§è¡Œä¸€æ¬¡<ul>\n<li>å†é—´éš”ä¸€ç§’å<ul>\n<li>console.log(x) x â€“&gt; 2</li>\n<li>console.log(â€˜Error: 2â€™)</li>\n</ul>\n</li>\n<li>å†é—´éš”2ç§’å<ul>\n<li>console.log(x) x â€“&gt; 4</li>\n<li>ä¸ä¼šå†æ‰§è¡Œ catch</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/e0e25426dc0d49c3af9acee68744760d51135.png\" alt=\"é¢˜ç›®äºŒè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p>ç­‰åŒäº</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runAsync</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">r</span> =&gt;</span> setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> r(x, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span>))</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runReject</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">res, rej</span>) =&gt;</span> setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> rej(<span class=\"string\">`Error: <span class=\"subst\">$&#123;x&#125;</span>`</span>, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span> * x))</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.all([runAsync(<span class=\"number\">1</span>), runReject(<span class=\"number\">4</span>), runAsync(<span class=\"number\">3</span>), runReject(<span class=\"number\">2</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res), </span><br><span class=\"line\">  err =&gt; <span class=\"built_in\">console</span>.log(err);</span><br></pre></td></tr></table></figure></li>\n<li><p>ç»“è®º</p>\n<ul>\n<li>all å’Œ raceä¼ å…¥çš„æ•°ç»„ä¸­å¦‚æœæœ‰ä¼šæŠ›å‡ºå¼‚å¸¸çš„å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€å…ˆæŠ›å‡ºçš„é”™è¯¯ä¼šè¢«æ•è·ï¼Œå¹¶ä¸”æ˜¯è¢« then çš„ç¬¬äºŒä¸ªå‚æ•°æˆ–è€…åé¢çš„ catch æ•è·ï¼›ä½†å¹¶ä¸ä¼šå½±å“æ•°ç»„ä¸­å…¶å®ƒçš„å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚</li>\n</ul>\n</li>\n</ul>\n<p>4.3 é¢˜ç›®ä¸‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runAsync</span> (<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">r</span> =&gt;</span> setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> r(x, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span>))</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.race([runAsync(<span class=\"number\">1</span>), runAsync(<span class=\"number\">2</span>), runAsync(<span class=\"number\">3</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'result: '</span>, res))</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> <span class=\"built_in\">console</span>.log(err))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>Promise.race å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>åœ¨é—´éš”æ—¶é—´éƒ½ä¸€æ ·çš„æƒ…å†µä¸‹ï¼ŒrunAsync1 æœ€å…ˆåŠ å…¥é˜Ÿåˆ—</li>\n<li>å› æ­¤<ul>\n<li>console.log(x) x â€“&gt; 1</li>\n</ul>\n</li>\n<li>ç”±äº race çš„ç‰¹æ®Šæ€§ï¼Œåªæ•æ‰æœ€å…ˆæ‰§è¡Œå®Œæˆçš„é‚£ä¸ªç»“æœ<ul>\n<li>console.log(â€˜result: â€˜, res) res â€“&gt; 1</li>\n</ul>\n</li>\n<li>å†<ul>\n<li>console.log(x) x â€“&gt; 2</li>\n<li>console.log(x) x â€“&gt; 3</li>\n</ul>\n</li>\n<li>æ²¡æœ‰æŠ¥é”™ï¼Œä¸ä¼šè¢« catch</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/2eda438cd745e39ba934af362a80521038770.png\" alt=\"é¢˜ç›®ä¸‰è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<p>4.4 é¢˜ç›®å››</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runAsync</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">r</span> =&gt;</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> r(x, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span>)</span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runReject</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">res, rej</span>) =&gt;</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> rej(<span class=\"string\">`Error: <span class=\"subst\">$&#123;x&#125;</span>`</span>, <span class=\"built_in\">console</span>.log(x)), <span class=\"number\">1000</span> * x)</span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.race([runReject(<span class=\"number\">0</span>), runAsync(<span class=\"number\">1</span>), runAsync(<span class=\"number\">2</span>), runAsync(<span class=\"number\">3</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">\"result: \"</span>, res))</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> <span class=\"built_in\">console</span>.log(err));</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åˆ†æ</p>\n<ul>\n<li>ä»£ç ä»ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</li>\n<li>Promise.race å…¥é˜Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—</li>\n<li>å½“å‰å®ä»»åŠ¡ä¸­åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡</li>\n<li>runReject(0) æœ€å…ˆä¼ å…¥</li>\n<li>å› æ­¤<ul>\n<li>console.log(x) x â€“&gt; 0</li>\n<li>console.log(err) err â€“&gt; Error: 0</li>\n</ul>\n</li>\n<li>é—´éš”å°äº1ç§’å</li>\n<li>runAsync(1), runAsync(2), runAsync(3)<ul>\n<li>ä¾æ¬¡ä¸º</li>\n<li>console.log(x) x â€“&gt; 1</li>\n<li>console.log(x) x â€“&gt; 2</li>\n<li>console.log(x) x â€“&gt; 3</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/89acbf32e7218b90c050526171bd1b3d53719.png\" alt=\"é¢˜ç›®å››\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"https://juejin.im/post/5e58c618e51d4526ed66b5cf\" target=\"_blank\" rel=\"noopener\">é¢˜ç›®æ¥æº</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"OOP-é¢å‘å¯¹è±¡","date":"2020-04-09T01:27:29.000Z","description":["æ˜¨å¤© Mentor è¯´ä»¥åè¦å¼€å§‹ç”¨ React Hooksï¼ˆæˆ‘è¿˜æ²¡æœ‰æ¶‰è¶³ ï¼‰å†™ç‚¹ä¸œè¥¿ï¼Œè¿›è€Œè°ˆè®ºåˆ° React ç”Ÿæ€ä¸€ç›´æƒ³æ¨å±•å¼€æ¥çš„çš„å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œæˆ‘ä¸ç”±å¾—æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼šéƒ½è¯´ Javascript ä¸æ˜¯å…¸å‹çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¹¶ä¸å…·å¤‡å®Œæ•´çš„ OOP è¯¥æœ‰çš„ç‰¹æ€§ï¼Œå®ƒè™½å¼•è¿›äº† class è¯­æ³•ç³–ï¼Œä½†åªæ˜¯è®©å¯¹è±¡åŸå‹å†™æ³•æ›´åŠ åƒé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€çš„å†™æ³•ï¼Œé‚£é¢å‘å¯¹è±¡åˆ°åº•å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆ ? ğŸ¤” ä»¥åŠå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³åœ¨æ¨ä»€ä¹ˆï¼Ÿ","ç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±å…³äºè¿™ä¸ªé—®é¢˜çš„æ€è€ƒ"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- æ˜¨å¤© Mentor è¯´ä»¥åè¦å¼€å§‹ç”¨ React Hooksï¼ˆæˆ‘è¿˜æ²¡æœ‰æ¶‰è¶³ ï¼‰å†™ç‚¹ä¸œè¥¿ï¼Œè¿›è€Œè°ˆè®ºåˆ° React ç”Ÿæ€ä¸€ç›´æƒ³æ¨å±•å¼€æ¥çš„çš„å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œæˆ‘ä¸ç”±å¾—æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼šéƒ½è¯´ Javascript ä¸æ˜¯å…¸å‹çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¹¶ä¸å…·å¤‡å®Œæ•´çš„ OOP è¯¥æœ‰çš„ç‰¹æ€§ï¼Œå®ƒè™½å¼•è¿›äº† class è¯­æ³•ç³–ï¼Œä½†åªæ˜¯è®©å¯¹è±¡åŸå‹å†™æ³•æ›´åŠ åƒé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€çš„å†™æ³•ï¼Œé‚£é¢å‘å¯¹è±¡åˆ°åº•å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆ ? ğŸ¤” ä»¥åŠå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³åœ¨æ¨ä»€ä¹ˆï¼ŸJavascript å®šä½ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ\n- ç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±å…³äºè¿™ä¸ªé—®é¢˜çš„æ€è€ƒ\n<!-- more -->\n\n## OOP Wikipedia\n### æ¢è®¨çš„æ˜¯é¢å‘å¯¹è±¡\n#### å¯¹è±¡çš„è‡ªç„¶å®šä¹‰\n- åœ¨ã€Šé¢å‘å¯¹è±¡åˆ†æä¸è®¾è®¡ã€‹è¿™æœ¬ä¹¦ä¸­ï¼ŒGrady Booch æ›¿æˆ‘ä»¬åšäº†æ€»ç»“ï¼Œä»–è®¤ä¸ºï¼Œä»äººç±»çš„è®¤çŸ¥è§’åº¦æ¥è¯´ï¼Œå¯¹è±¡åº”è¯¥æ˜¯ä¸‹åˆ—äº‹ç‰©ä¹‹ä¸€ï¼š\n\t- ä¸€ä¸ªå¯ä»¥è§¦æ‘¸æˆ–è€…å¯ä»¥çœ‹è§çš„ä¸œè¥¿ï¼›\n\t- äººçš„æ™ºåŠ›å¯ä»¥ç†è§£çš„ä¸œè¥¿ï¼›\n\t- å¯ä»¥æŒ‡å¯¼æ€è€ƒæˆ–è¡ŒåŠ¨ï¼ˆè¿›è¡Œæƒ³è±¡æˆ–æ–½åŠ åŠ¨ä½œï¼‰çš„ä¸œè¥¿ã€‚\n- æœ‰äº†å¯¹è±¡çš„è‡ªç„¶å®šä¹‰åï¼Œæˆ‘ä»¬å°±å¯ä»¥æè¿°ç¼–ç¨‹è¯­è¨€ä¸­çš„å¯¹è±¡äº†ã€‚åœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œè®¾è®¡è€…ä¹Ÿåˆ©ç”¨å„ç§ä¸åŒçš„è¯­è¨€ç‰¹æ€§æ¥æŠ½è±¡æè¿°å¯¹è±¡ï¼Œæœ€ä¸ºæˆåŠŸçš„æµæ´¾æ˜¯ä½¿ç”¨â€œç±»â€çš„æ–¹å¼æ¥æè¿°å¯¹è±¡ï¼Œè¿™è¯ç”Ÿäº†è¯¸å¦‚ C++ã€Java ç­‰æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ã€‚\n- è€Œ JavaScript æ—©å¹´å´é€‰æ‹©äº†ä¸€ä¸ªæ›´ä¸ºå†·é—¨çš„æ–¹å¼ï¼šåŸå‹\n\n> â€œåŸºäºç±»â€å¹¶éé¢å‘å¯¹è±¡çš„å”¯ä¸€å½¢æ€\n\n#### å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾\n- å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾ï¼ˆå‚è€ƒ Grandy Boochã€Šé¢å‘å¯¹è±¡åˆ†æä¸è®¾è®¡ã€‹ï¼‰ã€‚æ€»ç»“æ¥çœ‹ï¼Œå¯¹è±¡æœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹ç‚¹ã€‚\n\t- å¯¹è±¡å…·æœ‰å”¯ä¸€æ ‡è¯†æ€§ï¼š\n\t- å³ä½¿å®Œå…¨ç›¸åŒçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¹¶éåŒä¸€ä¸ªå¯¹è±¡ã€‚\n\t- å¯¹è±¡æœ‰çŠ¶æ€ï¼šå¯¹è±¡å…·æœ‰çŠ¶æ€ï¼ŒåŒä¸€å¯¹è±¡å¯èƒ½å¤„äºä¸åŒçŠ¶æ€ä¹‹ä¸‹ã€‚å¯¹è±¡å…·æœ‰è¡Œä¸ºï¼šå³å¯¹è±¡çš„çŠ¶æ€ï¼Œå¯èƒ½å› ä¸ºå®ƒçš„è¡Œä¸ºäº§ç”Ÿå˜è¿ã€‚\n\n\t\n> JavaScript ä¸­å¯¹è±¡ç‹¬æœ‰çš„ç‰¹è‰²æ˜¯ï¼šå¯¹è±¡å…·æœ‰é«˜åº¦çš„åŠ¨æ€æ€§ï¼Œè¿™æ˜¯å› ä¸º JavaScript èµ‹äºˆäº†ä½¿ç”¨è€…åœ¨è¿è¡Œæ—¶ä¸ºå¯¹è±¡æ·»æ”¹çŠ¶æ€å’Œè¡Œä¸ºçš„èƒ½åŠ›ã€‚\n\n\t\n### æˆ‘ä»¬å¯ä»¥æƒ³æƒ³ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å°è£…æˆå¯¹è±¡ï¼Ÿ\n- æˆ‘çš„ç†è§£æ˜¯ï¼šæˆ‘ä»¬éœ€è¦å‡å°‘æˆ‘ä»¬çš„æ“ä½œç²’åº¦ï¼Œæ¯ä¸ªæ“ä½œéƒ½å»è½å®åˆ° bit æ•°æ®æ˜¯éå¸¸åºå¤§çš„ï¼Œå‡å°‘é—®é¢˜æ±‚è§£å¤æ‚åº¦\n- wiki ä¸Šå…³äº object ç‰¹æ€§ä¹Ÿç»™åˆ°äº†æ”¯æŒ\n- A feature of objects is an object's procedures that can **access** and **often modify the data fields** of the object with which they are associated (objects have a notion of \"this\" or \"self\").\n\t- å¯ä»¥å’Œé¢å‘è¿‡ç¨‹ (Procedure Oriented) æ”¾åœ¨ä¸€èµ·è¯´ã€‚\n\t- é¦–å…ˆ OOP æ˜¯ä¸€ä¸ªå¾ˆè‡ªç„¶çš„æ€æƒ³ï¼Œåœ¨Cè¯­è¨€ä¸­ä¹Ÿèƒ½å†™å‡º**ç¬¦åˆ**é¢å‘å¯¹è±¡æ€æƒ³çš„ä»£ç \n\t\t\n\t\t```c\n\t\t// Cè¯­è¨€ä¾‹å­\n\t\tstruct Student{\n\t\t    char *name;  //å§“å\n\t\t    int num;  //å­¦å·\n\t\t    int age;  //å¹´é¾„\n\t\t    char group;  //æ‰€åœ¨å­¦ä¹ å°ç»„\n\t\t    float score;  //æˆç»©\n\t\t};\n\t\t\n\t\tchar* GetStudentName(struct Student* stu)\n\t\t{\n\t\t    // ç•¥\n\t\t}\n\t\t\n\t\tvoid SetStudentName(struct Student* stu, char* newName)\n\t\t{\n\t\t    // ç•¥\n\t\t}\n\t\t\n\t\tint main()\n\t\t{\n\t\t    struct Student s1, s2, s3, s4; // åˆ›å»ºäº†å¤šä¸ªå­¦ç”Ÿ\n\t\t    SetStudentName(&s1, \"å°æ˜\");\n\t\t    SetStudentName(&s2, \"å°çº¢\");\n\t\t    return 0;\n\t\t}\n\t\t```\n- å…¶æ¬¡ OOP é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œåœ¨åšä¸€ä»¶ä»€ä¹ˆäº‹æƒ…ï¼Ÿ\n\t- åœ¨é¢å¯¹å¤æ‚æ€§ä¸šåŠ¡éœ€æ±‚ä¸­ï¼Œé¢å‘å¯¹è±¡æ€æƒ³å¯ä»¥å°†ä¸šåŠ¡å…ˆè¿›è¡Œåˆ†æï¼Œå¦‚æœä¸šåŠ¡éœ€æ±‚å…¨æ–°æ— å…³è”ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨é‡Œé¢å°è£…å¯¹åº”çš„æ–¹æ³•ï¼›å¦‚æœä¸šåŠ¡éœ€æ±‚åªæ˜¯ä¸€æ¡å»¶å±•çº¿ï¼ˆæ¯”å¦‚ç‰¹å®šèŠ‚å‡æ—¥æ‰“æŠ˜ï¼‰ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç»§æ‰¿ç°æœ‰å¯¹è±¡ï¼Œå¹¶å¯¹ç°æœ‰å¯¹è±¡çš„æŸäº›æ–¹æ³•ï¼ˆdiscountï¼‰ï¼Œè¿›è¡Œç‰¹å®šæ“ä½œï¼Œå³å¤šæ€ï¼šç”¨ç»Ÿä¸€çš„æ–¹æ³•å¯¹ä¸åŒçš„å¯¹è±¡è¿›è¡ŒåŒæ ·çš„æ“ä½œã€‚\n\t\n\t\t```C++\n\t\toverride fun discount(price: Double): Double {\n\t        if (!isCouple()) return price\n\t        if (price > 99) {\n\t            val lucky = Random().nextInt(gifts.size)\n\t            println(\"Congratulations on getting ${gifts[lucky]}!\")\n\t        }\n\t        return price * 0.77\n\t    }\n\t\t```\n\t\t- è€Œé¢å¯¹è¿™ç§é¢‘ç¹æ“ä½œæ•°æ®å•å…ƒçš„ä½¿ç”¨é¢å‘è¿‡ç¨‹ç¼–ç¨‹æ€æƒ³ï¼Œå¯èƒ½ä¼šåœ¨ç°æœ‰å¯¹è±¡åŠ ä¸Šåˆ¤æ–­ï¼Œä¸‡ä¸€èŠ‚å‡æ—¥è¿˜è¦åšå…¶ä»–çš„ä¸šåŠ¡ï¼Œåˆ¤æ–­åªä¼šè¶Šæ¥è¶Šå¤šã€‚è¿™å°±ä¸æˆ‘ä»¬ Nicklaus Wirth æå‡ºçš„ï¼š**ç¨‹åº = æ•°æ®ç»“æ„ + ç®—æ³•**ï¼Œè¶Šæ¥è¶Šå‰²è£‚ã€‚\n\t- åœ¨æˆ‘ç°åœ¨çš„æµ…è–„æ€è€ƒçœ‹æ¥ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³æ¯”è¾ƒå¹¿æ³›çš„ Object-based å®ç°æ˜¯æƒ³å…ˆè®©ä¸åŒå¯¹è±¡ä»¥å°½å¯èƒ½çš„ç»Ÿä¸€ç‰¹æ€§è¿›è¡Œå½’ç»„ï¼Œå½¢æˆâ€œå¤§å¯¹è±¡â€ï¼Œç„¶åå„ä¸ªå¯¹è±¡å˜æˆäº†è¿™ä¸ªå¤§å¯¹è±¡ä¸­è¡ç”Ÿå‡ºæ¥çš„åŸºç±»ï¼Œå¹¶åœ¨çˆ¶ç±»æ´¾ç”Ÿå‡ºæ¥çš„å¯¹è±¡ä¸­ï¼Œå»å®ç°å„è‡ªè§£å†³é—®é¢˜çš„å…·ä½“æ–¹æ³•ã€‚è¿™æ ·å½“æˆ‘ä»¬åœ¨æ‹¿åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨å»ç®¡å®ƒçš„å†…éƒ¨å®ç°ï¼Œæˆ‘ä»¬æ ¹æ®ç±»å‹å°±å¯ä»¥çŸ¥é“å®ƒèƒ½åšä»€ä¹ˆäº‹ï¼Œè¿™æ¯”æˆ‘ä»¬æ‰‹åŠ¨å»ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œè¦å…ˆè¿›ç‚¹ã€‚**è®©å¯¹è±¡æœ‰å¤šæ€æ€§ï¼ŒæŠŠä¸åŒå¯¹è±¡ä»¥åŒä¸€ç‰¹æ€§æ¥å½’ç»„ï¼Œç»Ÿä¸€å¤„ç†ã€‚è‡³äºæ‰€è°“ç»§æ‰¿ç­‰æ¦‚å¿µï¼Œæ˜¯å®ç°çš„ç»†èŠ‚**ã€‚\n\n## prototype-based programming\n- Languages with abstract data type support which may be used to **resemble OO programming**, but **without all features of object-orientation**. This includes object-based and **prototype-based languages**. Examples: JavaScript, Lua, Modula-2, CLU.\n- The Document Object Model of HTML, XHTML, and XML documents on the Internet has bindings to the popular JavaScript/ECMAScript language. **JavaScript is perhaps the best known prototype-based programming language, which employs cloning from prototypes rather than inheriting from a class (contrast to class-based programming)**. \n- æˆ‘ä»¬åœ¨å¤§æ¦‚äº†è§£äº† OOP æ€æƒ³åï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­çœ‹çœ‹ OOPç¼–ç¨‹æ€æƒ³çš„å¦ä¸€ç§å®ç°â€œç±»OOPâ€--åŸºäºåŸå‹ç¼–ç¨‹ Javascript å®ç°\n- æˆ‘ä»¬å¯ä»¥å…ˆä» ECMA-262 è§„èŒƒä¸­æ‰¾åˆ°å…³äº Object çš„å®šä¹‰\n\t- \"Objects are created by using constructors in **new expressions**.\"\n\t- \"Each constructor is a function that has a property named **'prototype' that is used to implement prototype-based inheritance and shared properties**.\"\n\t- \"Every object created by a constructor has an implicit reference (called the object's prototype) to the value of its constructor's 'prototype' property. Furthermore, a prototype may have a non-null implicit reference to its prototype, and so on; this is called the prototype chain. When a reference is made to a property in an object, that reference is to the property of that name in the first object in the prototype chain that contains a property of that name. In other words, first the object mentioned directly is examined for such a property; if that object contains the named property, that is the property to which the reference refers; if that object does not contain the named property, the prototype for that object is examined next; and so on.\"\n\t- ![ECMAåŸå‹é“¾](http://p0.meituan.net/myvideodistribute/54f432d1395e59da48e0e7935ffd7665110363.png)\n\t- \n- åŒæ—¶ Douglas Crockford å…³äº [prototypal inheritance](https://crockford.com/javascript/prototypal.html)\n\n\t```javascript\n\tfunction object(o) {\n        function F() {}\n        F.prototype = o;\n        return new F();\n    }\n\t```\n\t- \"The object function untangles JavaScript's constructor pattern, achieving true prototypal inheritance. It takes an old object as a parameter and returns an empty new object that inherits from the old one. If we attempt to obtain a member from the new object, and it lacks that key, then the old object will supply the member. Objects inherit from objects.\"\n\t- \"What could be more object oriented than that?\" ğŸ˜\n- ä¹Ÿæœ‰æ–°çš„å¯¹ Object çš„æ€è€ƒ\n\t- \"In JavaScript, **an object is an associative array**, augmented with a prototype (see below); each string key provides the name for an object property, and there are two syntactical ways to specify such a name: dot notation (obj.x = 10) and bracket notation (obj['x'] = 10). A property may be added, rebound, or deleted at run-time. Most properties of an object (and any property that belongs to an object's prototype inheritance chain) can be enumerated using a for...in loop.\"\n\n## Functional programming\n- Functional programming has its origins in lambda calculus.It is a programming paradigm â€”- a style of building the structure and elements of computer programs -- that treats computation as the evaluation of mathematical functions and avoids changing-state and mutable data.\n- One of the key motivations for the development of functional programming is making a program easier to understand by eliminating changes in state that **do not depend on function inputs** which are called side effects.\n- side effects include modifying a non-local variable, modifying a static local variable, modifying a mutable argument passed by reference, performing I/O or calling other side-effect functions.\n- referential transparency\n\t- the same language expression can result in different values at different times depending on the state of the executing program.\n\t- Consider C assignment statement x = x * 10, this changes the value assigned to the variable x. Let us say that the initial value of x was 1, then two consecutive evaluations of the variable x yields 10 and 100 respectively. Clearly, replacing x = x * 10 with either 10 or 100 gives a program with different meaning, and so the expression is not referentially transparent. In fact, assignment statements are never referentially transparent.\n\t- Absence of side effects is a necessary, but not sufficient, condition for referential transparency. **Referential transparency means that an expression (such as a function call) can be replaced with its value**. This requires that the expression is pure, that is to say the expression must be deterministic (always give the same value for the same input) and side-effect free.\n\n## ä¸ªäººæ€»ç»“\n- Javasript è¯´å®ƒæ˜¯åŸºäºé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€æ˜¯ä¸ä¸¥è°¨çš„ï¼Œå‡†ç¡®çš„è¯´ä»–æ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œçš„åŸºäºåŸå‹å®ç°çš„ç¼–ç¨‹è¯­è¨€ã€‚\n\n## All Objects in Javascript\n- å¯å‚è€ƒ[ECMA-Script 262 Chapter18.3 Constructor Properties of the Global Object P399](https://www.ecma-international.org/publications/standards/Ecma-262.htm) \n\n\t| åŸºæœ¬ç±»å‹|  Error  | æ•°æ®ç»“æ„ & å†…ç½®å¯¹è±¡  | TypedArray |\n\t| --- | --- | --- | --- |\n\t| Boolean | Error | Array | Float32Array |\n\t| Number | EvalError |\tArrayBuffer |\t Float64Array |\n\t| Object | RangeError | DataView | Int8Array |\n\t| String | ReferenceError | Date | Int16Array |\n\t| Symbol | SyntaxError | Function | Int32Array |\n\t|  | TypeError | Map | Uint8Array |\n\t|  | URIError | Promise | Uint8ClampedArray |\n\t|  |  | Proxy | Uint16Array |\n\t|  |  | RegExp | Uint32Array |\n\t|  |  |Set |  |\n\t|  |  | SharedArrayBuffer |  |\n\t|  |  | WeakMap |  |\n\t|  |  | WeakSet |  |\n\n\n## å‚è€ƒæ–‡çŒ®\n- [å¼•å…¥ Javascript å¯¹è±¡](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects)\n- [Flaws of Object Oriented Modeling](https://software.intel.com/en-us/blogs/2008/08/22/flaws-of-object-oriented-modeling/)\n- [learn object oriented thinking & programming](https://books.google.com/books?id=xb-sAQAAQBAJ&printsec=frontcover&dq=isbn:9788090466180&hl=zh-CN&sa=X&ved=0ahUKEwiG-8y8qdroAhWmUt8KHey5Dl0Q6AEIKDAA#v=onepage&q&f=false)\n- [Obejct thinking](https://books.google.com/books?id=WzsFCAAAQBAJ&printsec=frontcover&dq=isbn:9780735619654&hl=zh-CN&sa=X&ved=0ahUKEwiqzaPSqNroAhVvUd8KHc80CYEQ6AEIKDAA#v=onepage&q&f=false)\n- [Javascript Object-orientation (prototype-based)](https://en.wikipedia.org/wiki/JavaScript)\n- [Introduction to Object Oriented Programming Concepts (OOP) and More](https://www.codeproject.com/Articles/22769/Introduction-to-Object-Oriented-Programming-Concep)\n- [Functional_programming wikipedia](https://en.wikipedia.org/wiki/Functional_programming)\n- [Side effect wikipedia](https://en.wikipedia.org/wiki/Side_effect_(computer_science))\n- [Object-oriented programming wikipedia](https://en.wikipedia.org/wiki/Object-oriented_programming)\n\n\n## å†™åœ¨åé¢\n- æœ‰å¯¹ Object ä»¥åŠå¯¹ reference äº§ç”Ÿçš„ side effects \næ–°çš„è®¤è¯†\n- JavaScript æä¾›äº†å®Œå…¨è¿è¡Œæ—¶çš„å¯¹è±¡ç³»ç»Ÿï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥æ¨¡ä»¿å¤šæ•°é¢å‘å¯¹è±¡ç¼–ç¨‹èŒƒå¼ï¼ˆåŸºäºç±»å’ŒåŸºäºåŸå‹ï¼‰ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯æ­£ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ã€‚\n- JavaScript è¯­è¨€æ ‡å‡†ä¹Ÿå·²ç»æ˜ç¡®è¯´æ˜ï¼ŒJavaScript æ˜¯ä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€ã€‚ï¼ˆæ ‡å‡†ä¸­èƒ½è¿™æ ·è¯´ï¼Œæ­£æ˜¯å› ä¸º JavaScript çš„é«˜åº¦åŠ¨æ€æ€§çš„å¯¹è±¡ç³»ç»Ÿï¼‰\n\n\n- é—­åŒ… closure\n\t- A nested function is a function defined within another function. It is created each time the outer function is invoked. In addition, each nested function forms a lexical closure: The lexical scope of the outer function (including any constant, local variable, or argument value) becomes part of the internal state of each inner function object, even after execution of the outer function concludes.\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n\n\n\n","source":"_posts/OOP-é¢å‘å¯¹è±¡.md","raw":"---\ntitle: OOP-é¢å‘å¯¹è±¡\ndate: 2020-04-09 09:27:29\ntags: \n- å‰ç«¯æ¦‚å¿µ\ncategories:\n- å‰ç«¯æ¦‚å¿µ\ndescription:\n- æ˜¨å¤© Mentor è¯´ä»¥åè¦å¼€å§‹ç”¨ React Hooksï¼ˆæˆ‘è¿˜æ²¡æœ‰æ¶‰è¶³ ï¼‰å†™ç‚¹ä¸œè¥¿ï¼Œè¿›è€Œè°ˆè®ºåˆ° React ç”Ÿæ€ä¸€ç›´æƒ³æ¨å±•å¼€æ¥çš„çš„å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œæˆ‘ä¸ç”±å¾—æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼šéƒ½è¯´ Javascript ä¸æ˜¯å…¸å‹çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¹¶ä¸å…·å¤‡å®Œæ•´çš„ OOP è¯¥æœ‰çš„ç‰¹æ€§ï¼Œå®ƒè™½å¼•è¿›äº† class è¯­æ³•ç³–ï¼Œä½†åªæ˜¯è®©å¯¹è±¡åŸå‹å†™æ³•æ›´åŠ åƒé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€çš„å†™æ³•ï¼Œé‚£é¢å‘å¯¹è±¡åˆ°åº•å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆ ? ğŸ¤” ä»¥åŠå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³åœ¨æ¨ä»€ä¹ˆï¼Ÿ\n- ç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±å…³äºè¿™ä¸ªé—®é¢˜çš„æ€è€ƒ\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- æ˜¨å¤© Mentor è¯´ä»¥åè¦å¼€å§‹ç”¨ React Hooksï¼ˆæˆ‘è¿˜æ²¡æœ‰æ¶‰è¶³ ï¼‰å†™ç‚¹ä¸œè¥¿ï¼Œè¿›è€Œè°ˆè®ºåˆ° React ç”Ÿæ€ä¸€ç›´æƒ³æ¨å±•å¼€æ¥çš„çš„å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œæˆ‘ä¸ç”±å¾—æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼šéƒ½è¯´ Javascript ä¸æ˜¯å…¸å‹çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¹¶ä¸å…·å¤‡å®Œæ•´çš„ OOP è¯¥æœ‰çš„ç‰¹æ€§ï¼Œå®ƒè™½å¼•è¿›äº† class è¯­æ³•ç³–ï¼Œä½†åªæ˜¯è®©å¯¹è±¡åŸå‹å†™æ³•æ›´åŠ åƒé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€çš„å†™æ³•ï¼Œé‚£é¢å‘å¯¹è±¡åˆ°åº•å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆ ? ğŸ¤” ä»¥åŠå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³åœ¨æ¨ä»€ä¹ˆï¼ŸJavascript å®šä½ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ\n- ç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±å…³äºè¿™ä¸ªé—®é¢˜çš„æ€è€ƒ\n<!-- more -->\n\n## OOP Wikipedia\n### æ¢è®¨çš„æ˜¯é¢å‘å¯¹è±¡\n#### å¯¹è±¡çš„è‡ªç„¶å®šä¹‰\n- åœ¨ã€Šé¢å‘å¯¹è±¡åˆ†æä¸è®¾è®¡ã€‹è¿™æœ¬ä¹¦ä¸­ï¼ŒGrady Booch æ›¿æˆ‘ä»¬åšäº†æ€»ç»“ï¼Œä»–è®¤ä¸ºï¼Œä»äººç±»çš„è®¤çŸ¥è§’åº¦æ¥è¯´ï¼Œå¯¹è±¡åº”è¯¥æ˜¯ä¸‹åˆ—äº‹ç‰©ä¹‹ä¸€ï¼š\n\t- ä¸€ä¸ªå¯ä»¥è§¦æ‘¸æˆ–è€…å¯ä»¥çœ‹è§çš„ä¸œè¥¿ï¼›\n\t- äººçš„æ™ºåŠ›å¯ä»¥ç†è§£çš„ä¸œè¥¿ï¼›\n\t- å¯ä»¥æŒ‡å¯¼æ€è€ƒæˆ–è¡ŒåŠ¨ï¼ˆè¿›è¡Œæƒ³è±¡æˆ–æ–½åŠ åŠ¨ä½œï¼‰çš„ä¸œè¥¿ã€‚\n- æœ‰äº†å¯¹è±¡çš„è‡ªç„¶å®šä¹‰åï¼Œæˆ‘ä»¬å°±å¯ä»¥æè¿°ç¼–ç¨‹è¯­è¨€ä¸­çš„å¯¹è±¡äº†ã€‚åœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œè®¾è®¡è€…ä¹Ÿåˆ©ç”¨å„ç§ä¸åŒçš„è¯­è¨€ç‰¹æ€§æ¥æŠ½è±¡æè¿°å¯¹è±¡ï¼Œæœ€ä¸ºæˆåŠŸçš„æµæ´¾æ˜¯ä½¿ç”¨â€œç±»â€çš„æ–¹å¼æ¥æè¿°å¯¹è±¡ï¼Œè¿™è¯ç”Ÿäº†è¯¸å¦‚ C++ã€Java ç­‰æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ã€‚\n- è€Œ JavaScript æ—©å¹´å´é€‰æ‹©äº†ä¸€ä¸ªæ›´ä¸ºå†·é—¨çš„æ–¹å¼ï¼šåŸå‹\n\n> â€œåŸºäºç±»â€å¹¶éé¢å‘å¯¹è±¡çš„å”¯ä¸€å½¢æ€\n\n#### å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾\n- å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾ï¼ˆå‚è€ƒ Grandy Boochã€Šé¢å‘å¯¹è±¡åˆ†æä¸è®¾è®¡ã€‹ï¼‰ã€‚æ€»ç»“æ¥çœ‹ï¼Œå¯¹è±¡æœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹ç‚¹ã€‚\n\t- å¯¹è±¡å…·æœ‰å”¯ä¸€æ ‡è¯†æ€§ï¼š\n\t- å³ä½¿å®Œå…¨ç›¸åŒçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¹¶éåŒä¸€ä¸ªå¯¹è±¡ã€‚\n\t- å¯¹è±¡æœ‰çŠ¶æ€ï¼šå¯¹è±¡å…·æœ‰çŠ¶æ€ï¼ŒåŒä¸€å¯¹è±¡å¯èƒ½å¤„äºä¸åŒçŠ¶æ€ä¹‹ä¸‹ã€‚å¯¹è±¡å…·æœ‰è¡Œä¸ºï¼šå³å¯¹è±¡çš„çŠ¶æ€ï¼Œå¯èƒ½å› ä¸ºå®ƒçš„è¡Œä¸ºäº§ç”Ÿå˜è¿ã€‚\n\n\t\n> JavaScript ä¸­å¯¹è±¡ç‹¬æœ‰çš„ç‰¹è‰²æ˜¯ï¼šå¯¹è±¡å…·æœ‰é«˜åº¦çš„åŠ¨æ€æ€§ï¼Œè¿™æ˜¯å› ä¸º JavaScript èµ‹äºˆäº†ä½¿ç”¨è€…åœ¨è¿è¡Œæ—¶ä¸ºå¯¹è±¡æ·»æ”¹çŠ¶æ€å’Œè¡Œä¸ºçš„èƒ½åŠ›ã€‚\n\n\t\n### æˆ‘ä»¬å¯ä»¥æƒ³æƒ³ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å°è£…æˆå¯¹è±¡ï¼Ÿ\n- æˆ‘çš„ç†è§£æ˜¯ï¼šæˆ‘ä»¬éœ€è¦å‡å°‘æˆ‘ä»¬çš„æ“ä½œç²’åº¦ï¼Œæ¯ä¸ªæ“ä½œéƒ½å»è½å®åˆ° bit æ•°æ®æ˜¯éå¸¸åºå¤§çš„ï¼Œå‡å°‘é—®é¢˜æ±‚è§£å¤æ‚åº¦\n- wiki ä¸Šå…³äº object ç‰¹æ€§ä¹Ÿç»™åˆ°äº†æ”¯æŒ\n- A feature of objects is an object's procedures that can **access** and **often modify the data fields** of the object with which they are associated (objects have a notion of \"this\" or \"self\").\n\t- å¯ä»¥å’Œé¢å‘è¿‡ç¨‹ (Procedure Oriented) æ”¾åœ¨ä¸€èµ·è¯´ã€‚\n\t- é¦–å…ˆ OOP æ˜¯ä¸€ä¸ªå¾ˆè‡ªç„¶çš„æ€æƒ³ï¼Œåœ¨Cè¯­è¨€ä¸­ä¹Ÿèƒ½å†™å‡º**ç¬¦åˆ**é¢å‘å¯¹è±¡æ€æƒ³çš„ä»£ç \n\t\t\n\t\t```c\n\t\t// Cè¯­è¨€ä¾‹å­\n\t\tstruct Student{\n\t\t    char *name;  //å§“å\n\t\t    int num;  //å­¦å·\n\t\t    int age;  //å¹´é¾„\n\t\t    char group;  //æ‰€åœ¨å­¦ä¹ å°ç»„\n\t\t    float score;  //æˆç»©\n\t\t};\n\t\t\n\t\tchar* GetStudentName(struct Student* stu)\n\t\t{\n\t\t    // ç•¥\n\t\t}\n\t\t\n\t\tvoid SetStudentName(struct Student* stu, char* newName)\n\t\t{\n\t\t    // ç•¥\n\t\t}\n\t\t\n\t\tint main()\n\t\t{\n\t\t    struct Student s1, s2, s3, s4; // åˆ›å»ºäº†å¤šä¸ªå­¦ç”Ÿ\n\t\t    SetStudentName(&s1, \"å°æ˜\");\n\t\t    SetStudentName(&s2, \"å°çº¢\");\n\t\t    return 0;\n\t\t}\n\t\t```\n- å…¶æ¬¡ OOP é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œåœ¨åšä¸€ä»¶ä»€ä¹ˆäº‹æƒ…ï¼Ÿ\n\t- åœ¨é¢å¯¹å¤æ‚æ€§ä¸šåŠ¡éœ€æ±‚ä¸­ï¼Œé¢å‘å¯¹è±¡æ€æƒ³å¯ä»¥å°†ä¸šåŠ¡å…ˆè¿›è¡Œåˆ†æï¼Œå¦‚æœä¸šåŠ¡éœ€æ±‚å…¨æ–°æ— å…³è”ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨é‡Œé¢å°è£…å¯¹åº”çš„æ–¹æ³•ï¼›å¦‚æœä¸šåŠ¡éœ€æ±‚åªæ˜¯ä¸€æ¡å»¶å±•çº¿ï¼ˆæ¯”å¦‚ç‰¹å®šèŠ‚å‡æ—¥æ‰“æŠ˜ï¼‰ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç»§æ‰¿ç°æœ‰å¯¹è±¡ï¼Œå¹¶å¯¹ç°æœ‰å¯¹è±¡çš„æŸäº›æ–¹æ³•ï¼ˆdiscountï¼‰ï¼Œè¿›è¡Œç‰¹å®šæ“ä½œï¼Œå³å¤šæ€ï¼šç”¨ç»Ÿä¸€çš„æ–¹æ³•å¯¹ä¸åŒçš„å¯¹è±¡è¿›è¡ŒåŒæ ·çš„æ“ä½œã€‚\n\t\n\t\t```C++\n\t\toverride fun discount(price: Double): Double {\n\t        if (!isCouple()) return price\n\t        if (price > 99) {\n\t            val lucky = Random().nextInt(gifts.size)\n\t            println(\"Congratulations on getting ${gifts[lucky]}!\")\n\t        }\n\t        return price * 0.77\n\t    }\n\t\t```\n\t\t- è€Œé¢å¯¹è¿™ç§é¢‘ç¹æ“ä½œæ•°æ®å•å…ƒçš„ä½¿ç”¨é¢å‘è¿‡ç¨‹ç¼–ç¨‹æ€æƒ³ï¼Œå¯èƒ½ä¼šåœ¨ç°æœ‰å¯¹è±¡åŠ ä¸Šåˆ¤æ–­ï¼Œä¸‡ä¸€èŠ‚å‡æ—¥è¿˜è¦åšå…¶ä»–çš„ä¸šåŠ¡ï¼Œåˆ¤æ–­åªä¼šè¶Šæ¥è¶Šå¤šã€‚è¿™å°±ä¸æˆ‘ä»¬ Nicklaus Wirth æå‡ºçš„ï¼š**ç¨‹åº = æ•°æ®ç»“æ„ + ç®—æ³•**ï¼Œè¶Šæ¥è¶Šå‰²è£‚ã€‚\n\t- åœ¨æˆ‘ç°åœ¨çš„æµ…è–„æ€è€ƒçœ‹æ¥ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³æ¯”è¾ƒå¹¿æ³›çš„ Object-based å®ç°æ˜¯æƒ³å…ˆè®©ä¸åŒå¯¹è±¡ä»¥å°½å¯èƒ½çš„ç»Ÿä¸€ç‰¹æ€§è¿›è¡Œå½’ç»„ï¼Œå½¢æˆâ€œå¤§å¯¹è±¡â€ï¼Œç„¶åå„ä¸ªå¯¹è±¡å˜æˆäº†è¿™ä¸ªå¤§å¯¹è±¡ä¸­è¡ç”Ÿå‡ºæ¥çš„åŸºç±»ï¼Œå¹¶åœ¨çˆ¶ç±»æ´¾ç”Ÿå‡ºæ¥çš„å¯¹è±¡ä¸­ï¼Œå»å®ç°å„è‡ªè§£å†³é—®é¢˜çš„å…·ä½“æ–¹æ³•ã€‚è¿™æ ·å½“æˆ‘ä»¬åœ¨æ‹¿åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨å»ç®¡å®ƒçš„å†…éƒ¨å®ç°ï¼Œæˆ‘ä»¬æ ¹æ®ç±»å‹å°±å¯ä»¥çŸ¥é“å®ƒèƒ½åšä»€ä¹ˆäº‹ï¼Œè¿™æ¯”æˆ‘ä»¬æ‰‹åŠ¨å»ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œè¦å…ˆè¿›ç‚¹ã€‚**è®©å¯¹è±¡æœ‰å¤šæ€æ€§ï¼ŒæŠŠä¸åŒå¯¹è±¡ä»¥åŒä¸€ç‰¹æ€§æ¥å½’ç»„ï¼Œç»Ÿä¸€å¤„ç†ã€‚è‡³äºæ‰€è°“ç»§æ‰¿ç­‰æ¦‚å¿µï¼Œæ˜¯å®ç°çš„ç»†èŠ‚**ã€‚\n\n## prototype-based programming\n- Languages with abstract data type support which may be used to **resemble OO programming**, but **without all features of object-orientation**. This includes object-based and **prototype-based languages**. Examples: JavaScript, Lua, Modula-2, CLU.\n- The Document Object Model of HTML, XHTML, and XML documents on the Internet has bindings to the popular JavaScript/ECMAScript language. **JavaScript is perhaps the best known prototype-based programming language, which employs cloning from prototypes rather than inheriting from a class (contrast to class-based programming)**. \n- æˆ‘ä»¬åœ¨å¤§æ¦‚äº†è§£äº† OOP æ€æƒ³åï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­çœ‹çœ‹ OOPç¼–ç¨‹æ€æƒ³çš„å¦ä¸€ç§å®ç°â€œç±»OOPâ€--åŸºäºåŸå‹ç¼–ç¨‹ Javascript å®ç°\n- æˆ‘ä»¬å¯ä»¥å…ˆä» ECMA-262 è§„èŒƒä¸­æ‰¾åˆ°å…³äº Object çš„å®šä¹‰\n\t- \"Objects are created by using constructors in **new expressions**.\"\n\t- \"Each constructor is a function that has a property named **'prototype' that is used to implement prototype-based inheritance and shared properties**.\"\n\t- \"Every object created by a constructor has an implicit reference (called the object's prototype) to the value of its constructor's 'prototype' property. Furthermore, a prototype may have a non-null implicit reference to its prototype, and so on; this is called the prototype chain. When a reference is made to a property in an object, that reference is to the property of that name in the first object in the prototype chain that contains a property of that name. In other words, first the object mentioned directly is examined for such a property; if that object contains the named property, that is the property to which the reference refers; if that object does not contain the named property, the prototype for that object is examined next; and so on.\"\n\t- ![ECMAåŸå‹é“¾](http://p0.meituan.net/myvideodistribute/54f432d1395e59da48e0e7935ffd7665110363.png)\n\t- \n- åŒæ—¶ Douglas Crockford å…³äº [prototypal inheritance](https://crockford.com/javascript/prototypal.html)\n\n\t```javascript\n\tfunction object(o) {\n        function F() {}\n        F.prototype = o;\n        return new F();\n    }\n\t```\n\t- \"The object function untangles JavaScript's constructor pattern, achieving true prototypal inheritance. It takes an old object as a parameter and returns an empty new object that inherits from the old one. If we attempt to obtain a member from the new object, and it lacks that key, then the old object will supply the member. Objects inherit from objects.\"\n\t- \"What could be more object oriented than that?\" ğŸ˜\n- ä¹Ÿæœ‰æ–°çš„å¯¹ Object çš„æ€è€ƒ\n\t- \"In JavaScript, **an object is an associative array**, augmented with a prototype (see below); each string key provides the name for an object property, and there are two syntactical ways to specify such a name: dot notation (obj.x = 10) and bracket notation (obj['x'] = 10). A property may be added, rebound, or deleted at run-time. Most properties of an object (and any property that belongs to an object's prototype inheritance chain) can be enumerated using a for...in loop.\"\n\n## Functional programming\n- Functional programming has its origins in lambda calculus.It is a programming paradigm â€”- a style of building the structure and elements of computer programs -- that treats computation as the evaluation of mathematical functions and avoids changing-state and mutable data.\n- One of the key motivations for the development of functional programming is making a program easier to understand by eliminating changes in state that **do not depend on function inputs** which are called side effects.\n- side effects include modifying a non-local variable, modifying a static local variable, modifying a mutable argument passed by reference, performing I/O or calling other side-effect functions.\n- referential transparency\n\t- the same language expression can result in different values at different times depending on the state of the executing program.\n\t- Consider C assignment statement x = x * 10, this changes the value assigned to the variable x. Let us say that the initial value of x was 1, then two consecutive evaluations of the variable x yields 10 and 100 respectively. Clearly, replacing x = x * 10 with either 10 or 100 gives a program with different meaning, and so the expression is not referentially transparent. In fact, assignment statements are never referentially transparent.\n\t- Absence of side effects is a necessary, but not sufficient, condition for referential transparency. **Referential transparency means that an expression (such as a function call) can be replaced with its value**. This requires that the expression is pure, that is to say the expression must be deterministic (always give the same value for the same input) and side-effect free.\n\n## ä¸ªäººæ€»ç»“\n- Javasript è¯´å®ƒæ˜¯åŸºäºé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€æ˜¯ä¸ä¸¥è°¨çš„ï¼Œå‡†ç¡®çš„è¯´ä»–æ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œçš„åŸºäºåŸå‹å®ç°çš„ç¼–ç¨‹è¯­è¨€ã€‚\n\n## All Objects in Javascript\n- å¯å‚è€ƒ[ECMA-Script 262 Chapter18.3 Constructor Properties of the Global Object P399](https://www.ecma-international.org/publications/standards/Ecma-262.htm) \n\n\t| åŸºæœ¬ç±»å‹|  Error  | æ•°æ®ç»“æ„ & å†…ç½®å¯¹è±¡  | TypedArray |\n\t| --- | --- | --- | --- |\n\t| Boolean | Error | Array | Float32Array |\n\t| Number | EvalError |\tArrayBuffer |\t Float64Array |\n\t| Object | RangeError | DataView | Int8Array |\n\t| String | ReferenceError | Date | Int16Array |\n\t| Symbol | SyntaxError | Function | Int32Array |\n\t|  | TypeError | Map | Uint8Array |\n\t|  | URIError | Promise | Uint8ClampedArray |\n\t|  |  | Proxy | Uint16Array |\n\t|  |  | RegExp | Uint32Array |\n\t|  |  |Set |  |\n\t|  |  | SharedArrayBuffer |  |\n\t|  |  | WeakMap |  |\n\t|  |  | WeakSet |  |\n\n\n## å‚è€ƒæ–‡çŒ®\n- [å¼•å…¥ Javascript å¯¹è±¡](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects)\n- [Flaws of Object Oriented Modeling](https://software.intel.com/en-us/blogs/2008/08/22/flaws-of-object-oriented-modeling/)\n- [learn object oriented thinking & programming](https://books.google.com/books?id=xb-sAQAAQBAJ&printsec=frontcover&dq=isbn:9788090466180&hl=zh-CN&sa=X&ved=0ahUKEwiG-8y8qdroAhWmUt8KHey5Dl0Q6AEIKDAA#v=onepage&q&f=false)\n- [Obejct thinking](https://books.google.com/books?id=WzsFCAAAQBAJ&printsec=frontcover&dq=isbn:9780735619654&hl=zh-CN&sa=X&ved=0ahUKEwiqzaPSqNroAhVvUd8KHc80CYEQ6AEIKDAA#v=onepage&q&f=false)\n- [Javascript Object-orientation (prototype-based)](https://en.wikipedia.org/wiki/JavaScript)\n- [Introduction to Object Oriented Programming Concepts (OOP) and More](https://www.codeproject.com/Articles/22769/Introduction-to-Object-Oriented-Programming-Concep)\n- [Functional_programming wikipedia](https://en.wikipedia.org/wiki/Functional_programming)\n- [Side effect wikipedia](https://en.wikipedia.org/wiki/Side_effect_(computer_science))\n- [Object-oriented programming wikipedia](https://en.wikipedia.org/wiki/Object-oriented_programming)\n\n\n## å†™åœ¨åé¢\n- æœ‰å¯¹ Object ä»¥åŠå¯¹ reference äº§ç”Ÿçš„ side effects \næ–°çš„è®¤è¯†\n- JavaScript æä¾›äº†å®Œå…¨è¿è¡Œæ—¶çš„å¯¹è±¡ç³»ç»Ÿï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥æ¨¡ä»¿å¤šæ•°é¢å‘å¯¹è±¡ç¼–ç¨‹èŒƒå¼ï¼ˆåŸºäºç±»å’ŒåŸºäºåŸå‹ï¼‰ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯æ­£ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ã€‚\n- JavaScript è¯­è¨€æ ‡å‡†ä¹Ÿå·²ç»æ˜ç¡®è¯´æ˜ï¼ŒJavaScript æ˜¯ä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€ã€‚ï¼ˆæ ‡å‡†ä¸­èƒ½è¿™æ ·è¯´ï¼Œæ­£æ˜¯å› ä¸º JavaScript çš„é«˜åº¦åŠ¨æ€æ€§çš„å¯¹è±¡ç³»ç»Ÿï¼‰\n\n\n- é—­åŒ… closure\n\t- A nested function is a function defined within another function. It is created each time the outer function is invoked. In addition, each nested function forms a lexical closure: The lexical scope of the outer function (including any constant, local variable, or argument value) becomes part of the internal state of each inner function object, even after execution of the outer function concludes.\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n\n\n\n","slug":"OOP-é¢å‘å¯¹è±¡","published":1,"updated":"2020-10-27T15:21:11.262Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7u001afw9kcxti76h5","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>æ˜¨å¤© Mentor è¯´ä»¥åè¦å¼€å§‹ç”¨ React Hooksï¼ˆæˆ‘è¿˜æ²¡æœ‰æ¶‰è¶³ ï¼‰å†™ç‚¹ä¸œè¥¿ï¼Œè¿›è€Œè°ˆè®ºåˆ° React ç”Ÿæ€ä¸€ç›´æƒ³æ¨å±•å¼€æ¥çš„çš„å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œæˆ‘ä¸ç”±å¾—æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼šéƒ½è¯´ Javascript ä¸æ˜¯å…¸å‹çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¹¶ä¸å…·å¤‡å®Œæ•´çš„ OOP è¯¥æœ‰çš„ç‰¹æ€§ï¼Œå®ƒè™½å¼•è¿›äº† class è¯­æ³•ç³–ï¼Œä½†åªæ˜¯è®©å¯¹è±¡åŸå‹å†™æ³•æ›´åŠ åƒé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€çš„å†™æ³•ï¼Œé‚£é¢å‘å¯¹è±¡åˆ°åº•å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆ ? ğŸ¤” ä»¥åŠå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³åœ¨æ¨ä»€ä¹ˆï¼ŸJavascript å®šä½ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</li>\n<li>ç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±å…³äºè¿™ä¸ªé—®é¢˜çš„æ€è€ƒ<a id=\"more\"></a>\n\n</li>\n</ul>\n<h2 id=\"OOP-Wikipedia\"><a href=\"#OOP-Wikipedia\" class=\"headerlink\" title=\"OOP Wikipedia\"></a>OOP Wikipedia</h2><h3 id=\"æ¢è®¨çš„æ˜¯é¢å‘å¯¹è±¡\"><a href=\"#æ¢è®¨çš„æ˜¯é¢å‘å¯¹è±¡\" class=\"headerlink\" title=\"æ¢è®¨çš„æ˜¯é¢å‘å¯¹è±¡\"></a>æ¢è®¨çš„æ˜¯é¢å‘å¯¹è±¡</h3><h4 id=\"å¯¹è±¡çš„è‡ªç„¶å®šä¹‰\"><a href=\"#å¯¹è±¡çš„è‡ªç„¶å®šä¹‰\" class=\"headerlink\" title=\"å¯¹è±¡çš„è‡ªç„¶å®šä¹‰\"></a>å¯¹è±¡çš„è‡ªç„¶å®šä¹‰</h4><ul>\n<li>åœ¨ã€Šé¢å‘å¯¹è±¡åˆ†æä¸è®¾è®¡ã€‹è¿™æœ¬ä¹¦ä¸­ï¼ŒGrady Booch æ›¿æˆ‘ä»¬åšäº†æ€»ç»“ï¼Œä»–è®¤ä¸ºï¼Œä»äººç±»çš„è®¤çŸ¥è§’åº¦æ¥è¯´ï¼Œå¯¹è±¡åº”è¯¥æ˜¯ä¸‹åˆ—äº‹ç‰©ä¹‹ä¸€ï¼š<ul>\n<li>ä¸€ä¸ªå¯ä»¥è§¦æ‘¸æˆ–è€…å¯ä»¥çœ‹è§çš„ä¸œè¥¿ï¼›</li>\n<li>äººçš„æ™ºåŠ›å¯ä»¥ç†è§£çš„ä¸œè¥¿ï¼›</li>\n<li>å¯ä»¥æŒ‡å¯¼æ€è€ƒæˆ–è¡ŒåŠ¨ï¼ˆè¿›è¡Œæƒ³è±¡æˆ–æ–½åŠ åŠ¨ä½œï¼‰çš„ä¸œè¥¿ã€‚</li>\n</ul>\n</li>\n<li>æœ‰äº†å¯¹è±¡çš„è‡ªç„¶å®šä¹‰åï¼Œæˆ‘ä»¬å°±å¯ä»¥æè¿°ç¼–ç¨‹è¯­è¨€ä¸­çš„å¯¹è±¡äº†ã€‚åœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œè®¾è®¡è€…ä¹Ÿåˆ©ç”¨å„ç§ä¸åŒçš„è¯­è¨€ç‰¹æ€§æ¥æŠ½è±¡æè¿°å¯¹è±¡ï¼Œæœ€ä¸ºæˆåŠŸçš„æµæ´¾æ˜¯ä½¿ç”¨â€œç±»â€çš„æ–¹å¼æ¥æè¿°å¯¹è±¡ï¼Œè¿™è¯ç”Ÿäº†è¯¸å¦‚ C++ã€Java ç­‰æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ã€‚</li>\n<li>è€Œ JavaScript æ—©å¹´å´é€‰æ‹©äº†ä¸€ä¸ªæ›´ä¸ºå†·é—¨çš„æ–¹å¼ï¼šåŸå‹</li>\n</ul>\n<blockquote>\n<p>â€œåŸºäºç±»â€å¹¶éé¢å‘å¯¹è±¡çš„å”¯ä¸€å½¢æ€</p>\n</blockquote>\n<h4 id=\"å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾\"><a href=\"#å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾\" class=\"headerlink\" title=\"å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾\"></a>å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾</h4><ul>\n<li>å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾ï¼ˆå‚è€ƒ Grandy Boochã€Šé¢å‘å¯¹è±¡åˆ†æä¸è®¾è®¡ã€‹ï¼‰ã€‚æ€»ç»“æ¥çœ‹ï¼Œå¯¹è±¡æœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹ç‚¹ã€‚<ul>\n<li>å¯¹è±¡å…·æœ‰å”¯ä¸€æ ‡è¯†æ€§ï¼š</li>\n<li>å³ä½¿å®Œå…¨ç›¸åŒçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¹¶éåŒä¸€ä¸ªå¯¹è±¡ã€‚</li>\n<li>å¯¹è±¡æœ‰çŠ¶æ€ï¼šå¯¹è±¡å…·æœ‰çŠ¶æ€ï¼ŒåŒä¸€å¯¹è±¡å¯èƒ½å¤„äºä¸åŒçŠ¶æ€ä¹‹ä¸‹ã€‚å¯¹è±¡å…·æœ‰è¡Œä¸ºï¼šå³å¯¹è±¡çš„çŠ¶æ€ï¼Œå¯èƒ½å› ä¸ºå®ƒçš„è¡Œä¸ºäº§ç”Ÿå˜è¿ã€‚</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>JavaScript ä¸­å¯¹è±¡ç‹¬æœ‰çš„ç‰¹è‰²æ˜¯ï¼šå¯¹è±¡å…·æœ‰é«˜åº¦çš„åŠ¨æ€æ€§ï¼Œè¿™æ˜¯å› ä¸º JavaScript èµ‹äºˆäº†ä½¿ç”¨è€…åœ¨è¿è¡Œæ—¶ä¸ºå¯¹è±¡æ·»æ”¹çŠ¶æ€å’Œè¡Œä¸ºçš„èƒ½åŠ›ã€‚</p>\n</blockquote>\n<h3 id=\"æˆ‘ä»¬å¯ä»¥æƒ³æƒ³ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å°è£…æˆå¯¹è±¡ï¼Ÿ\"><a href=\"#æˆ‘ä»¬å¯ä»¥æƒ³æƒ³ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å°è£…æˆå¯¹è±¡ï¼Ÿ\" class=\"headerlink\" title=\"æˆ‘ä»¬å¯ä»¥æƒ³æƒ³ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å°è£…æˆå¯¹è±¡ï¼Ÿ\"></a>æˆ‘ä»¬å¯ä»¥æƒ³æƒ³ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å°è£…æˆå¯¹è±¡ï¼Ÿ</h3><ul>\n<li><p>æˆ‘çš„ç†è§£æ˜¯ï¼šæˆ‘ä»¬éœ€è¦å‡å°‘æˆ‘ä»¬çš„æ“ä½œç²’åº¦ï¼Œæ¯ä¸ªæ“ä½œéƒ½å»è½å®åˆ° bit æ•°æ®æ˜¯éå¸¸åºå¤§çš„ï¼Œå‡å°‘é—®é¢˜æ±‚è§£å¤æ‚åº¦</p>\n</li>\n<li><p>wiki ä¸Šå…³äº object ç‰¹æ€§ä¹Ÿç»™åˆ°äº†æ”¯æŒ</p>\n</li>\n<li><p>A feature of objects is an objectâ€™s procedures that can <strong>access</strong> and <strong>often modify the data fields</strong> of the object with which they are associated (objects have a notion of â€œthisâ€ or â€œselfâ€).</p>\n<ul>\n<li><p>å¯ä»¥å’Œé¢å‘è¿‡ç¨‹ (Procedure Oriented) æ”¾åœ¨ä¸€èµ·è¯´ã€‚</p>\n</li>\n<li><p>é¦–å…ˆ OOP æ˜¯ä¸€ä¸ªå¾ˆè‡ªç„¶çš„æ€æƒ³ï¼Œåœ¨Cè¯­è¨€ä¸­ä¹Ÿèƒ½å†™å‡º<strong>ç¬¦åˆ</strong>é¢å‘å¯¹è±¡æ€æƒ³çš„ä»£ç </p>\n  <figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Cè¯­è¨€ä¾‹å­</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Student</span>&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">char</span> *name;  <span class=\"comment\">//å§“å</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> num;  <span class=\"comment\">//å­¦å·</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> age;  <span class=\"comment\">//å¹´é¾„</span></span><br><span class=\"line\">    <span class=\"keyword\">char</span> group;  <span class=\"comment\">//æ‰€åœ¨å­¦ä¹ å°ç»„</span></span><br><span class=\"line\">    <span class=\"keyword\">float</span> score;  <span class=\"comment\">//æˆç»©</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span>* <span class=\"title\">GetStudentName</span><span class=\"params\">(struct Student* stu)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç•¥</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">SetStudentName</span><span class=\"params\">(struct Student* stu, <span class=\"keyword\">char</span>* newName)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç•¥</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Student</span> <span class=\"title\">s1</span>, <span class=\"title\">s2</span>, <span class=\"title\">s3</span>, <span class=\"title\">s4</span>;</span> <span class=\"comment\">// åˆ›å»ºäº†å¤šä¸ªå­¦ç”Ÿ</span></span><br><span class=\"line\">    SetStudentName(&amp;s1, <span class=\"string\">\"å°æ˜\"</span>);</span><br><span class=\"line\">    SetStudentName(&amp;s2, <span class=\"string\">\"å°çº¢\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>å…¶æ¬¡ OOP é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œåœ¨åšä¸€ä»¶ä»€ä¹ˆäº‹æƒ…ï¼Ÿ</p>\n<ul>\n<li><p>åœ¨é¢å¯¹å¤æ‚æ€§ä¸šåŠ¡éœ€æ±‚ä¸­ï¼Œé¢å‘å¯¹è±¡æ€æƒ³å¯ä»¥å°†ä¸šåŠ¡å…ˆè¿›è¡Œåˆ†æï¼Œå¦‚æœä¸šåŠ¡éœ€æ±‚å…¨æ–°æ— å…³è”ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨é‡Œé¢å°è£…å¯¹åº”çš„æ–¹æ³•ï¼›å¦‚æœä¸šåŠ¡éœ€æ±‚åªæ˜¯ä¸€æ¡å»¶å±•çº¿ï¼ˆæ¯”å¦‚ç‰¹å®šèŠ‚å‡æ—¥æ‰“æŠ˜ï¼‰ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç»§æ‰¿ç°æœ‰å¯¹è±¡ï¼Œå¹¶å¯¹ç°æœ‰å¯¹è±¡çš„æŸäº›æ–¹æ³•ï¼ˆdiscountï¼‰ï¼Œè¿›è¡Œç‰¹å®šæ“ä½œï¼Œå³å¤šæ€ï¼šç”¨ç»Ÿä¸€çš„æ–¹æ³•å¯¹ä¸åŒçš„å¯¹è±¡è¿›è¡ŒåŒæ ·çš„æ“ä½œã€‚</p>\n  <figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">override</span> fun <span class=\"title\">discount</span><span class=\"params\">(price: Double)</span>: Double </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (!isCouple()) <span class=\"keyword\">return</span> price</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (price &gt; <span class=\"number\">99</span>) &#123;</span><br><span class=\"line\">           val lucky = Random().nextInt(gifts.<span class=\"built_in\">size</span>)</span><br><span class=\"line\">           <span class=\"built_in\">println</span>(<span class=\"string\">\"Congratulations on getting $&#123;gifts[lucky]&#125;!\"</span>)</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> price * <span class=\"number\">0.77</span></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è€Œé¢å¯¹è¿™ç§é¢‘ç¹æ“ä½œæ•°æ®å•å…ƒçš„ä½¿ç”¨é¢å‘è¿‡ç¨‹ç¼–ç¨‹æ€æƒ³ï¼Œå¯èƒ½ä¼šåœ¨ç°æœ‰å¯¹è±¡åŠ ä¸Šåˆ¤æ–­ï¼Œä¸‡ä¸€èŠ‚å‡æ—¥è¿˜è¦åšå…¶ä»–çš„ä¸šåŠ¡ï¼Œåˆ¤æ–­åªä¼šè¶Šæ¥è¶Šå¤šã€‚è¿™å°±ä¸æˆ‘ä»¬ Nicklaus Wirth æå‡ºçš„ï¼š<strong>ç¨‹åº = æ•°æ®ç»“æ„ + ç®—æ³•</strong>ï¼Œè¶Šæ¥è¶Šå‰²è£‚ã€‚</li>\n</ul>\n</li>\n<li><p>åœ¨æˆ‘ç°åœ¨çš„æµ…è–„æ€è€ƒçœ‹æ¥ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³æ¯”è¾ƒå¹¿æ³›çš„ Object-based å®ç°æ˜¯æƒ³å…ˆè®©ä¸åŒå¯¹è±¡ä»¥å°½å¯èƒ½çš„ç»Ÿä¸€ç‰¹æ€§è¿›è¡Œå½’ç»„ï¼Œå½¢æˆâ€œå¤§å¯¹è±¡â€ï¼Œç„¶åå„ä¸ªå¯¹è±¡å˜æˆäº†è¿™ä¸ªå¤§å¯¹è±¡ä¸­è¡ç”Ÿå‡ºæ¥çš„åŸºç±»ï¼Œå¹¶åœ¨çˆ¶ç±»æ´¾ç”Ÿå‡ºæ¥çš„å¯¹è±¡ä¸­ï¼Œå»å®ç°å„è‡ªè§£å†³é—®é¢˜çš„å…·ä½“æ–¹æ³•ã€‚è¿™æ ·å½“æˆ‘ä»¬åœ¨æ‹¿åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨å»ç®¡å®ƒçš„å†…éƒ¨å®ç°ï¼Œæˆ‘ä»¬æ ¹æ®ç±»å‹å°±å¯ä»¥çŸ¥é“å®ƒèƒ½åšä»€ä¹ˆäº‹ï¼Œè¿™æ¯”æˆ‘ä»¬æ‰‹åŠ¨å»ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œè¦å…ˆè¿›ç‚¹ã€‚<strong>è®©å¯¹è±¡æœ‰å¤šæ€æ€§ï¼ŒæŠŠä¸åŒå¯¹è±¡ä»¥åŒä¸€ç‰¹æ€§æ¥å½’ç»„ï¼Œç»Ÿä¸€å¤„ç†ã€‚è‡³äºæ‰€è°“ç»§æ‰¿ç­‰æ¦‚å¿µï¼Œæ˜¯å®ç°çš„ç»†èŠ‚</strong>ã€‚</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"prototype-based-programming\"><a href=\"#prototype-based-programming\" class=\"headerlink\" title=\"prototype-based programming\"></a>prototype-based programming</h2><ul>\n<li><p>Languages with abstract data type support which may be used to <strong>resemble OO programming</strong>, but <strong>without all features of object-orientation</strong>. This includes object-based and <strong>prototype-based languages</strong>. Examples: JavaScript, Lua, Modula-2, CLU.</p>\n</li>\n<li><p>The Document Object Model of HTML, XHTML, and XML documents on the Internet has bindings to the popular JavaScript/ECMAScript language. <strong>JavaScript is perhaps the best known prototype-based programming language, which employs cloning from prototypes rather than inheriting from a class (contrast to class-based programming)</strong>. </p>\n</li>\n<li><p>æˆ‘ä»¬åœ¨å¤§æ¦‚äº†è§£äº† OOP æ€æƒ³åï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­çœ‹çœ‹ OOPç¼–ç¨‹æ€æƒ³çš„å¦ä¸€ç§å®ç°â€œç±»OOPâ€â€“åŸºäºåŸå‹ç¼–ç¨‹ Javascript å®ç°</p>\n</li>\n<li><p>æˆ‘ä»¬å¯ä»¥å…ˆä» ECMA-262 è§„èŒƒä¸­æ‰¾åˆ°å…³äº Object çš„å®šä¹‰</p>\n<ul>\n<li>â€œObjects are created by using constructors in <strong>new expressions</strong>.â€</li>\n<li>â€œEach constructor is a function that has a property named <strong>â€˜prototypeâ€™ that is used to implement prototype-based inheritance and shared properties</strong>.â€</li>\n<li>â€œEvery object created by a constructor has an implicit reference (called the objectâ€™s prototype) to the value of its constructorâ€™s â€˜prototypeâ€™ property. Furthermore, a prototype may have a non-null implicit reference to its prototype, and so on; this is called the prototype chain. When a reference is made to a property in an object, that reference is to the property of that name in the first object in the prototype chain that contains a property of that name. In other words, first the object mentioned directly is examined for such a property; if that object contains the named property, that is the property to which the reference refers; if that object does not contain the named property, the prototype for that object is examined next; and so on.â€</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/54f432d1395e59da48e0e7935ffd7665110363.png\" alt=\"ECMAåŸå‹é“¾\"></li>\n<li></li>\n</ul>\n</li>\n<li><p>åŒæ—¶ Douglas Crockford å…³äº <a href=\"https://crockford.com/javascript/prototypal.html\" target=\"_blank\" rel=\"noopener\">prototypal inheritance</a></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">object</span>(<span class=\"params\">o</span>) </span>&#123;</span><br><span class=\"line\">       <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">F</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">       F.prototype = o;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> F();</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>â€œThe object function untangles JavaScriptâ€™s constructor pattern, achieving true prototypal inheritance. It takes an old object as a parameter and returns an empty new object that inherits from the old one. If we attempt to obtain a member from the new object, and it lacks that key, then the old object will supply the member. Objects inherit from objects.â€</li>\n<li>â€œWhat could be more object oriented than that?â€ ğŸ˜</li>\n</ul>\n</li>\n<li><p>ä¹Ÿæœ‰æ–°çš„å¯¹ Object çš„æ€è€ƒ</p>\n<ul>\n<li>â€œIn JavaScript, <strong>an object is an associative array</strong>, augmented with a prototype (see below); each string key provides the name for an object property, and there are two syntactical ways to specify such a name: dot notation (obj.x = 10) and bracket notation (obj[â€˜xâ€™] = 10). A property may be added, rebound, or deleted at run-time. Most properties of an object (and any property that belongs to an objectâ€™s prototype inheritance chain) can be enumerated using a forâ€¦in loop.â€</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Functional-programming\"><a href=\"#Functional-programming\" class=\"headerlink\" title=\"Functional programming\"></a>Functional programming</h2><ul>\n<li>Functional programming has its origins in lambda calculus.It is a programming paradigm â€”- a style of building the structure and elements of computer programs â€“ that treats computation as the evaluation of mathematical functions and avoids changing-state and mutable data.</li>\n<li>One of the key motivations for the development of functional programming is making a program easier to understand by eliminating changes in state that <strong>do not depend on function inputs</strong> which are called side effects.</li>\n<li>side effects include modifying a non-local variable, modifying a static local variable, modifying a mutable argument passed by reference, performing I/O or calling other side-effect functions.</li>\n<li>referential transparency<ul>\n<li>the same language expression can result in different values at different times depending on the state of the executing program.</li>\n<li>Consider C assignment statement x = x * 10, this changes the value assigned to the variable x. Let us say that the initial value of x was 1, then two consecutive evaluations of the variable x yields 10 and 100 respectively. Clearly, replacing x = x * 10 with either 10 or 100 gives a program with different meaning, and so the expression is not referentially transparent. In fact, assignment statements are never referentially transparent.</li>\n<li>Absence of side effects is a necessary, but not sufficient, condition for referential transparency. <strong>Referential transparency means that an expression (such as a function call) can be replaced with its value</strong>. This requires that the expression is pure, that is to say the expression must be deterministic (always give the same value for the same input) and side-effect free.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ä¸ªäººæ€»ç»“\"><a href=\"#ä¸ªäººæ€»ç»“\" class=\"headerlink\" title=\"ä¸ªäººæ€»ç»“\"></a>ä¸ªäººæ€»ç»“</h2><ul>\n<li>Javasript è¯´å®ƒæ˜¯åŸºäºé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€æ˜¯ä¸ä¸¥è°¨çš„ï¼Œå‡†ç¡®çš„è¯´ä»–æ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œçš„åŸºäºåŸå‹å®ç°çš„ç¼–ç¨‹è¯­è¨€ã€‚</li>\n</ul>\n<h2 id=\"All-Objects-in-Javascript\"><a href=\"#All-Objects-in-Javascript\" class=\"headerlink\" title=\"All Objects in Javascript\"></a>All Objects in Javascript</h2><ul>\n<li><p>å¯å‚è€ƒ<a href=\"https://www.ecma-international.org/publications/standards/Ecma-262.htm\" target=\"_blank\" rel=\"noopener\">ECMA-Script 262 Chapter18.3 Constructor Properties of the Global Object P399</a> </p>\n<table>\n<thead>\n<tr>\n<th>åŸºæœ¬ç±»å‹</th>\n<th>Error</th>\n<th>æ•°æ®ç»“æ„ &amp; å†…ç½®å¯¹è±¡</th>\n<th>TypedArray</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Boolean</td>\n<td>Error</td>\n<td>Array</td>\n<td>Float32Array</td>\n</tr>\n<tr>\n<td>Number</td>\n<td>EvalError</td>\n<td>ArrayBuffer</td>\n<td>Float64Array</td>\n</tr>\n<tr>\n<td>Object</td>\n<td>RangeError</td>\n<td>DataView</td>\n<td>Int8Array</td>\n</tr>\n<tr>\n<td>String</td>\n<td>ReferenceError</td>\n<td>Date</td>\n<td>Int16Array</td>\n</tr>\n<tr>\n<td>Symbol</td>\n<td>SyntaxError</td>\n<td>Function</td>\n<td>Int32Array</td>\n</tr>\n<tr>\n<td></td>\n<td>TypeError</td>\n<td>Map</td>\n<td>Uint8Array</td>\n</tr>\n<tr>\n<td></td>\n<td>URIError</td>\n<td>Promise</td>\n<td>Uint8ClampedArray</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>Proxy</td>\n<td>Uint16Array</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>RegExp</td>\n<td>Uint32Array</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>Set</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>SharedArrayBuffer</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>WeakMap</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>WeakSet</td>\n<td></td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects\" target=\"_blank\" rel=\"noopener\">å¼•å…¥ Javascript å¯¹è±¡</a></li>\n<li><a href=\"https://software.intel.com/en-us/blogs/2008/08/22/flaws-of-object-oriented-modeling/\" target=\"_blank\" rel=\"noopener\">Flaws of Object Oriented Modeling</a></li>\n<li><a href=\"https://books.google.com/books?id=xb-sAQAAQBAJ&printsec=frontcover&dq=isbn:9788090466180&hl=zh-CN&sa=X&ved=0ahUKEwiG-8y8qdroAhWmUt8KHey5Dl0Q6AEIKDAA#v=onepage&q&f=false\" target=\"_blank\" rel=\"noopener\">learn object oriented thinking &amp; programming</a></li>\n<li><a href=\"https://books.google.com/books?id=WzsFCAAAQBAJ&printsec=frontcover&dq=isbn:9780735619654&hl=zh-CN&sa=X&ved=0ahUKEwiqzaPSqNroAhVvUd8KHc80CYEQ6AEIKDAA#v=onepage&q&f=false\" target=\"_blank\" rel=\"noopener\">Obejct thinking</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/JavaScript\" target=\"_blank\" rel=\"noopener\">Javascript Object-orientation (prototype-based)</a></li>\n<li><a href=\"https://www.codeproject.com/Articles/22769/Introduction-to-Object-Oriented-Programming-Concep\" target=\"_blank\" rel=\"noopener\">Introduction to Object Oriented Programming Concepts (OOP) and More</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Functional_programming\" target=\"_blank\" rel=\"noopener\">Functional_programming wikipedia</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Side_effect_(computer_science)\" target=\"_blank\" rel=\"noopener\">Side effect wikipedia</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" target=\"_blank\" rel=\"noopener\">Object-oriented programming wikipedia</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>æœ‰å¯¹ Object ä»¥åŠå¯¹ reference äº§ç”Ÿçš„ side effects<br>æ–°çš„è®¤è¯†</li>\n<li>JavaScript æä¾›äº†å®Œå…¨è¿è¡Œæ—¶çš„å¯¹è±¡ç³»ç»Ÿï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥æ¨¡ä»¿å¤šæ•°é¢å‘å¯¹è±¡ç¼–ç¨‹èŒƒå¼ï¼ˆåŸºäºç±»å’ŒåŸºäºåŸå‹ï¼‰ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯æ­£ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ã€‚</li>\n<li>JavaScript è¯­è¨€æ ‡å‡†ä¹Ÿå·²ç»æ˜ç¡®è¯´æ˜ï¼ŒJavaScript æ˜¯ä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€ã€‚ï¼ˆæ ‡å‡†ä¸­èƒ½è¿™æ ·è¯´ï¼Œæ­£æ˜¯å› ä¸º JavaScript çš„é«˜åº¦åŠ¨æ€æ€§çš„å¯¹è±¡ç³»ç»Ÿï¼‰</li>\n</ul>\n<ul>\n<li>é—­åŒ… closure<ul>\n<li>A nested function is a function defined within another function. It is created each time the outer function is invoked. In addition, each nested function forms a lexical closure: The lexical scope of the outer function (including any constant, local variable, or argument value) becomes part of the internal state of each inner function object, even after execution of the outer function concludes.</li>\n</ul>\n</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>æ˜¨å¤© Mentor è¯´ä»¥åè¦å¼€å§‹ç”¨ React Hooksï¼ˆæˆ‘è¿˜æ²¡æœ‰æ¶‰è¶³ ï¼‰å†™ç‚¹ä¸œè¥¿ï¼Œè¿›è€Œè°ˆè®ºåˆ° React ç”Ÿæ€ä¸€ç›´æƒ³æ¨å±•å¼€æ¥çš„çš„å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œæˆ‘ä¸ç”±å¾—æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼šéƒ½è¯´ Javascript ä¸æ˜¯å…¸å‹çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¹¶ä¸å…·å¤‡å®Œæ•´çš„ OOP è¯¥æœ‰çš„ç‰¹æ€§ï¼Œå®ƒè™½å¼•è¿›äº† class è¯­æ³•ç³–ï¼Œä½†åªæ˜¯è®©å¯¹è±¡åŸå‹å†™æ³•æ›´åŠ åƒé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€çš„å†™æ³•ï¼Œé‚£é¢å‘å¯¹è±¡åˆ°åº•å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆ ? ğŸ¤” ä»¥åŠå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³åœ¨æ¨ä»€ä¹ˆï¼ŸJavascript å®šä½ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</li>\n<li>ç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±å…³äºè¿™ä¸ªé—®é¢˜çš„æ€è€ƒ","more":"</li>\n</ul>\n<h2 id=\"OOP-Wikipedia\"><a href=\"#OOP-Wikipedia\" class=\"headerlink\" title=\"OOP Wikipedia\"></a>OOP Wikipedia</h2><h3 id=\"æ¢è®¨çš„æ˜¯é¢å‘å¯¹è±¡\"><a href=\"#æ¢è®¨çš„æ˜¯é¢å‘å¯¹è±¡\" class=\"headerlink\" title=\"æ¢è®¨çš„æ˜¯é¢å‘å¯¹è±¡\"></a>æ¢è®¨çš„æ˜¯é¢å‘å¯¹è±¡</h3><h4 id=\"å¯¹è±¡çš„è‡ªç„¶å®šä¹‰\"><a href=\"#å¯¹è±¡çš„è‡ªç„¶å®šä¹‰\" class=\"headerlink\" title=\"å¯¹è±¡çš„è‡ªç„¶å®šä¹‰\"></a>å¯¹è±¡çš„è‡ªç„¶å®šä¹‰</h4><ul>\n<li>åœ¨ã€Šé¢å‘å¯¹è±¡åˆ†æä¸è®¾è®¡ã€‹è¿™æœ¬ä¹¦ä¸­ï¼ŒGrady Booch æ›¿æˆ‘ä»¬åšäº†æ€»ç»“ï¼Œä»–è®¤ä¸ºï¼Œä»äººç±»çš„è®¤çŸ¥è§’åº¦æ¥è¯´ï¼Œå¯¹è±¡åº”è¯¥æ˜¯ä¸‹åˆ—äº‹ç‰©ä¹‹ä¸€ï¼š<ul>\n<li>ä¸€ä¸ªå¯ä»¥è§¦æ‘¸æˆ–è€…å¯ä»¥çœ‹è§çš„ä¸œè¥¿ï¼›</li>\n<li>äººçš„æ™ºåŠ›å¯ä»¥ç†è§£çš„ä¸œè¥¿ï¼›</li>\n<li>å¯ä»¥æŒ‡å¯¼æ€è€ƒæˆ–è¡ŒåŠ¨ï¼ˆè¿›è¡Œæƒ³è±¡æˆ–æ–½åŠ åŠ¨ä½œï¼‰çš„ä¸œè¥¿ã€‚</li>\n</ul>\n</li>\n<li>æœ‰äº†å¯¹è±¡çš„è‡ªç„¶å®šä¹‰åï¼Œæˆ‘ä»¬å°±å¯ä»¥æè¿°ç¼–ç¨‹è¯­è¨€ä¸­çš„å¯¹è±¡äº†ã€‚åœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œè®¾è®¡è€…ä¹Ÿåˆ©ç”¨å„ç§ä¸åŒçš„è¯­è¨€ç‰¹æ€§æ¥æŠ½è±¡æè¿°å¯¹è±¡ï¼Œæœ€ä¸ºæˆåŠŸçš„æµæ´¾æ˜¯ä½¿ç”¨â€œç±»â€çš„æ–¹å¼æ¥æè¿°å¯¹è±¡ï¼Œè¿™è¯ç”Ÿäº†è¯¸å¦‚ C++ã€Java ç­‰æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ã€‚</li>\n<li>è€Œ JavaScript æ—©å¹´å´é€‰æ‹©äº†ä¸€ä¸ªæ›´ä¸ºå†·é—¨çš„æ–¹å¼ï¼šåŸå‹</li>\n</ul>\n<blockquote>\n<p>â€œåŸºäºç±»â€å¹¶éé¢å‘å¯¹è±¡çš„å”¯ä¸€å½¢æ€</p>\n</blockquote>\n<h4 id=\"å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾\"><a href=\"#å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾\" class=\"headerlink\" title=\"å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾\"></a>å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾</h4><ul>\n<li>å¯¹è±¡çš„æœ¬è´¨ç‰¹å¾ï¼ˆå‚è€ƒ Grandy Boochã€Šé¢å‘å¯¹è±¡åˆ†æä¸è®¾è®¡ã€‹ï¼‰ã€‚æ€»ç»“æ¥çœ‹ï¼Œå¯¹è±¡æœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹ç‚¹ã€‚<ul>\n<li>å¯¹è±¡å…·æœ‰å”¯ä¸€æ ‡è¯†æ€§ï¼š</li>\n<li>å³ä½¿å®Œå…¨ç›¸åŒçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¹¶éåŒä¸€ä¸ªå¯¹è±¡ã€‚</li>\n<li>å¯¹è±¡æœ‰çŠ¶æ€ï¼šå¯¹è±¡å…·æœ‰çŠ¶æ€ï¼ŒåŒä¸€å¯¹è±¡å¯èƒ½å¤„äºä¸åŒçŠ¶æ€ä¹‹ä¸‹ã€‚å¯¹è±¡å…·æœ‰è¡Œä¸ºï¼šå³å¯¹è±¡çš„çŠ¶æ€ï¼Œå¯èƒ½å› ä¸ºå®ƒçš„è¡Œä¸ºäº§ç”Ÿå˜è¿ã€‚</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>JavaScript ä¸­å¯¹è±¡ç‹¬æœ‰çš„ç‰¹è‰²æ˜¯ï¼šå¯¹è±¡å…·æœ‰é«˜åº¦çš„åŠ¨æ€æ€§ï¼Œè¿™æ˜¯å› ä¸º JavaScript èµ‹äºˆäº†ä½¿ç”¨è€…åœ¨è¿è¡Œæ—¶ä¸ºå¯¹è±¡æ·»æ”¹çŠ¶æ€å’Œè¡Œä¸ºçš„èƒ½åŠ›ã€‚</p>\n</blockquote>\n<h3 id=\"æˆ‘ä»¬å¯ä»¥æƒ³æƒ³ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å°è£…æˆå¯¹è±¡ï¼Ÿ\"><a href=\"#æˆ‘ä»¬å¯ä»¥æƒ³æƒ³ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å°è£…æˆå¯¹è±¡ï¼Ÿ\" class=\"headerlink\" title=\"æˆ‘ä»¬å¯ä»¥æƒ³æƒ³ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å°è£…æˆå¯¹è±¡ï¼Ÿ\"></a>æˆ‘ä»¬å¯ä»¥æƒ³æƒ³ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å°è£…æˆå¯¹è±¡ï¼Ÿ</h3><ul>\n<li><p>æˆ‘çš„ç†è§£æ˜¯ï¼šæˆ‘ä»¬éœ€è¦å‡å°‘æˆ‘ä»¬çš„æ“ä½œç²’åº¦ï¼Œæ¯ä¸ªæ“ä½œéƒ½å»è½å®åˆ° bit æ•°æ®æ˜¯éå¸¸åºå¤§çš„ï¼Œå‡å°‘é—®é¢˜æ±‚è§£å¤æ‚åº¦</p>\n</li>\n<li><p>wiki ä¸Šå…³äº object ç‰¹æ€§ä¹Ÿç»™åˆ°äº†æ”¯æŒ</p>\n</li>\n<li><p>A feature of objects is an objectâ€™s procedures that can <strong>access</strong> and <strong>often modify the data fields</strong> of the object with which they are associated (objects have a notion of â€œthisâ€ or â€œselfâ€).</p>\n<ul>\n<li><p>å¯ä»¥å’Œé¢å‘è¿‡ç¨‹ (Procedure Oriented) æ”¾åœ¨ä¸€èµ·è¯´ã€‚</p>\n</li>\n<li><p>é¦–å…ˆ OOP æ˜¯ä¸€ä¸ªå¾ˆè‡ªç„¶çš„æ€æƒ³ï¼Œåœ¨Cè¯­è¨€ä¸­ä¹Ÿèƒ½å†™å‡º<strong>ç¬¦åˆ</strong>é¢å‘å¯¹è±¡æ€æƒ³çš„ä»£ç </p>\n  <figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Cè¯­è¨€ä¾‹å­</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Student</span>&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">char</span> *name;  <span class=\"comment\">//å§“å</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> num;  <span class=\"comment\">//å­¦å·</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> age;  <span class=\"comment\">//å¹´é¾„</span></span><br><span class=\"line\">    <span class=\"keyword\">char</span> group;  <span class=\"comment\">//æ‰€åœ¨å­¦ä¹ å°ç»„</span></span><br><span class=\"line\">    <span class=\"keyword\">float</span> score;  <span class=\"comment\">//æˆç»©</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span>* <span class=\"title\">GetStudentName</span><span class=\"params\">(struct Student* stu)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç•¥</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">SetStudentName</span><span class=\"params\">(struct Student* stu, <span class=\"keyword\">char</span>* newName)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç•¥</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Student</span> <span class=\"title\">s1</span>, <span class=\"title\">s2</span>, <span class=\"title\">s3</span>, <span class=\"title\">s4</span>;</span> <span class=\"comment\">// åˆ›å»ºäº†å¤šä¸ªå­¦ç”Ÿ</span></span><br><span class=\"line\">    SetStudentName(&amp;s1, <span class=\"string\">\"å°æ˜\"</span>);</span><br><span class=\"line\">    SetStudentName(&amp;s2, <span class=\"string\">\"å°çº¢\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>å…¶æ¬¡ OOP é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œåœ¨åšä¸€ä»¶ä»€ä¹ˆäº‹æƒ…ï¼Ÿ</p>\n<ul>\n<li><p>åœ¨é¢å¯¹å¤æ‚æ€§ä¸šåŠ¡éœ€æ±‚ä¸­ï¼Œé¢å‘å¯¹è±¡æ€æƒ³å¯ä»¥å°†ä¸šåŠ¡å…ˆè¿›è¡Œåˆ†æï¼Œå¦‚æœä¸šåŠ¡éœ€æ±‚å…¨æ–°æ— å…³è”ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨é‡Œé¢å°è£…å¯¹åº”çš„æ–¹æ³•ï¼›å¦‚æœä¸šåŠ¡éœ€æ±‚åªæ˜¯ä¸€æ¡å»¶å±•çº¿ï¼ˆæ¯”å¦‚ç‰¹å®šèŠ‚å‡æ—¥æ‰“æŠ˜ï¼‰ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç»§æ‰¿ç°æœ‰å¯¹è±¡ï¼Œå¹¶å¯¹ç°æœ‰å¯¹è±¡çš„æŸäº›æ–¹æ³•ï¼ˆdiscountï¼‰ï¼Œè¿›è¡Œç‰¹å®šæ“ä½œï¼Œå³å¤šæ€ï¼šç”¨ç»Ÿä¸€çš„æ–¹æ³•å¯¹ä¸åŒçš„å¯¹è±¡è¿›è¡ŒåŒæ ·çš„æ“ä½œã€‚</p>\n  <figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">override</span> fun <span class=\"title\">discount</span><span class=\"params\">(price: Double)</span>: Double </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (!isCouple()) <span class=\"keyword\">return</span> price</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (price &gt; <span class=\"number\">99</span>) &#123;</span><br><span class=\"line\">           val lucky = Random().nextInt(gifts.<span class=\"built_in\">size</span>)</span><br><span class=\"line\">           <span class=\"built_in\">println</span>(<span class=\"string\">\"Congratulations on getting $&#123;gifts[lucky]&#125;!\"</span>)</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> price * <span class=\"number\">0.77</span></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è€Œé¢å¯¹è¿™ç§é¢‘ç¹æ“ä½œæ•°æ®å•å…ƒçš„ä½¿ç”¨é¢å‘è¿‡ç¨‹ç¼–ç¨‹æ€æƒ³ï¼Œå¯èƒ½ä¼šåœ¨ç°æœ‰å¯¹è±¡åŠ ä¸Šåˆ¤æ–­ï¼Œä¸‡ä¸€èŠ‚å‡æ—¥è¿˜è¦åšå…¶ä»–çš„ä¸šåŠ¡ï¼Œåˆ¤æ–­åªä¼šè¶Šæ¥è¶Šå¤šã€‚è¿™å°±ä¸æˆ‘ä»¬ Nicklaus Wirth æå‡ºçš„ï¼š<strong>ç¨‹åº = æ•°æ®ç»“æ„ + ç®—æ³•</strong>ï¼Œè¶Šæ¥è¶Šå‰²è£‚ã€‚</li>\n</ul>\n</li>\n<li><p>åœ¨æˆ‘ç°åœ¨çš„æµ…è–„æ€è€ƒçœ‹æ¥ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³æ¯”è¾ƒå¹¿æ³›çš„ Object-based å®ç°æ˜¯æƒ³å…ˆè®©ä¸åŒå¯¹è±¡ä»¥å°½å¯èƒ½çš„ç»Ÿä¸€ç‰¹æ€§è¿›è¡Œå½’ç»„ï¼Œå½¢æˆâ€œå¤§å¯¹è±¡â€ï¼Œç„¶åå„ä¸ªå¯¹è±¡å˜æˆäº†è¿™ä¸ªå¤§å¯¹è±¡ä¸­è¡ç”Ÿå‡ºæ¥çš„åŸºç±»ï¼Œå¹¶åœ¨çˆ¶ç±»æ´¾ç”Ÿå‡ºæ¥çš„å¯¹è±¡ä¸­ï¼Œå»å®ç°å„è‡ªè§£å†³é—®é¢˜çš„å…·ä½“æ–¹æ³•ã€‚è¿™æ ·å½“æˆ‘ä»¬åœ¨æ‹¿åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨å»ç®¡å®ƒçš„å†…éƒ¨å®ç°ï¼Œæˆ‘ä»¬æ ¹æ®ç±»å‹å°±å¯ä»¥çŸ¥é“å®ƒèƒ½åšä»€ä¹ˆäº‹ï¼Œè¿™æ¯”æˆ‘ä»¬æ‰‹åŠ¨å»ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œè¦å…ˆè¿›ç‚¹ã€‚<strong>è®©å¯¹è±¡æœ‰å¤šæ€æ€§ï¼ŒæŠŠä¸åŒå¯¹è±¡ä»¥åŒä¸€ç‰¹æ€§æ¥å½’ç»„ï¼Œç»Ÿä¸€å¤„ç†ã€‚è‡³äºæ‰€è°“ç»§æ‰¿ç­‰æ¦‚å¿µï¼Œæ˜¯å®ç°çš„ç»†èŠ‚</strong>ã€‚</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"prototype-based-programming\"><a href=\"#prototype-based-programming\" class=\"headerlink\" title=\"prototype-based programming\"></a>prototype-based programming</h2><ul>\n<li><p>Languages with abstract data type support which may be used to <strong>resemble OO programming</strong>, but <strong>without all features of object-orientation</strong>. This includes object-based and <strong>prototype-based languages</strong>. Examples: JavaScript, Lua, Modula-2, CLU.</p>\n</li>\n<li><p>The Document Object Model of HTML, XHTML, and XML documents on the Internet has bindings to the popular JavaScript/ECMAScript language. <strong>JavaScript is perhaps the best known prototype-based programming language, which employs cloning from prototypes rather than inheriting from a class (contrast to class-based programming)</strong>. </p>\n</li>\n<li><p>æˆ‘ä»¬åœ¨å¤§æ¦‚äº†è§£äº† OOP æ€æƒ³åï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­çœ‹çœ‹ OOPç¼–ç¨‹æ€æƒ³çš„å¦ä¸€ç§å®ç°â€œç±»OOPâ€â€“åŸºäºåŸå‹ç¼–ç¨‹ Javascript å®ç°</p>\n</li>\n<li><p>æˆ‘ä»¬å¯ä»¥å…ˆä» ECMA-262 è§„èŒƒä¸­æ‰¾åˆ°å…³äº Object çš„å®šä¹‰</p>\n<ul>\n<li>â€œObjects are created by using constructors in <strong>new expressions</strong>.â€</li>\n<li>â€œEach constructor is a function that has a property named <strong>â€˜prototypeâ€™ that is used to implement prototype-based inheritance and shared properties</strong>.â€</li>\n<li>â€œEvery object created by a constructor has an implicit reference (called the objectâ€™s prototype) to the value of its constructorâ€™s â€˜prototypeâ€™ property. Furthermore, a prototype may have a non-null implicit reference to its prototype, and so on; this is called the prototype chain. When a reference is made to a property in an object, that reference is to the property of that name in the first object in the prototype chain that contains a property of that name. In other words, first the object mentioned directly is examined for such a property; if that object contains the named property, that is the property to which the reference refers; if that object does not contain the named property, the prototype for that object is examined next; and so on.â€</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/54f432d1395e59da48e0e7935ffd7665110363.png\" alt=\"ECMAåŸå‹é“¾\"></li>\n<li></li>\n</ul>\n</li>\n<li><p>åŒæ—¶ Douglas Crockford å…³äº <a href=\"https://crockford.com/javascript/prototypal.html\" target=\"_blank\" rel=\"noopener\">prototypal inheritance</a></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">object</span>(<span class=\"params\">o</span>) </span>&#123;</span><br><span class=\"line\">       <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">F</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">       F.prototype = o;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> F();</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>â€œThe object function untangles JavaScriptâ€™s constructor pattern, achieving true prototypal inheritance. It takes an old object as a parameter and returns an empty new object that inherits from the old one. If we attempt to obtain a member from the new object, and it lacks that key, then the old object will supply the member. Objects inherit from objects.â€</li>\n<li>â€œWhat could be more object oriented than that?â€ ğŸ˜</li>\n</ul>\n</li>\n<li><p>ä¹Ÿæœ‰æ–°çš„å¯¹ Object çš„æ€è€ƒ</p>\n<ul>\n<li>â€œIn JavaScript, <strong>an object is an associative array</strong>, augmented with a prototype (see below); each string key provides the name for an object property, and there are two syntactical ways to specify such a name: dot notation (obj.x = 10) and bracket notation (obj[â€˜xâ€™] = 10). A property may be added, rebound, or deleted at run-time. Most properties of an object (and any property that belongs to an objectâ€™s prototype inheritance chain) can be enumerated using a forâ€¦in loop.â€</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Functional-programming\"><a href=\"#Functional-programming\" class=\"headerlink\" title=\"Functional programming\"></a>Functional programming</h2><ul>\n<li>Functional programming has its origins in lambda calculus.It is a programming paradigm â€”- a style of building the structure and elements of computer programs â€“ that treats computation as the evaluation of mathematical functions and avoids changing-state and mutable data.</li>\n<li>One of the key motivations for the development of functional programming is making a program easier to understand by eliminating changes in state that <strong>do not depend on function inputs</strong> which are called side effects.</li>\n<li>side effects include modifying a non-local variable, modifying a static local variable, modifying a mutable argument passed by reference, performing I/O or calling other side-effect functions.</li>\n<li>referential transparency<ul>\n<li>the same language expression can result in different values at different times depending on the state of the executing program.</li>\n<li>Consider C assignment statement x = x * 10, this changes the value assigned to the variable x. Let us say that the initial value of x was 1, then two consecutive evaluations of the variable x yields 10 and 100 respectively. Clearly, replacing x = x * 10 with either 10 or 100 gives a program with different meaning, and so the expression is not referentially transparent. In fact, assignment statements are never referentially transparent.</li>\n<li>Absence of side effects is a necessary, but not sufficient, condition for referential transparency. <strong>Referential transparency means that an expression (such as a function call) can be replaced with its value</strong>. This requires that the expression is pure, that is to say the expression must be deterministic (always give the same value for the same input) and side-effect free.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ä¸ªäººæ€»ç»“\"><a href=\"#ä¸ªäººæ€»ç»“\" class=\"headerlink\" title=\"ä¸ªäººæ€»ç»“\"></a>ä¸ªäººæ€»ç»“</h2><ul>\n<li>Javasript è¯´å®ƒæ˜¯åŸºäºé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€æ˜¯ä¸ä¸¥è°¨çš„ï¼Œå‡†ç¡®çš„è¯´ä»–æ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œçš„åŸºäºåŸå‹å®ç°çš„ç¼–ç¨‹è¯­è¨€ã€‚</li>\n</ul>\n<h2 id=\"All-Objects-in-Javascript\"><a href=\"#All-Objects-in-Javascript\" class=\"headerlink\" title=\"All Objects in Javascript\"></a>All Objects in Javascript</h2><ul>\n<li><p>å¯å‚è€ƒ<a href=\"https://www.ecma-international.org/publications/standards/Ecma-262.htm\" target=\"_blank\" rel=\"noopener\">ECMA-Script 262 Chapter18.3 Constructor Properties of the Global Object P399</a> </p>\n<table>\n<thead>\n<tr>\n<th>åŸºæœ¬ç±»å‹</th>\n<th>Error</th>\n<th>æ•°æ®ç»“æ„ &amp; å†…ç½®å¯¹è±¡</th>\n<th>TypedArray</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Boolean</td>\n<td>Error</td>\n<td>Array</td>\n<td>Float32Array</td>\n</tr>\n<tr>\n<td>Number</td>\n<td>EvalError</td>\n<td>ArrayBuffer</td>\n<td>Float64Array</td>\n</tr>\n<tr>\n<td>Object</td>\n<td>RangeError</td>\n<td>DataView</td>\n<td>Int8Array</td>\n</tr>\n<tr>\n<td>String</td>\n<td>ReferenceError</td>\n<td>Date</td>\n<td>Int16Array</td>\n</tr>\n<tr>\n<td>Symbol</td>\n<td>SyntaxError</td>\n<td>Function</td>\n<td>Int32Array</td>\n</tr>\n<tr>\n<td></td>\n<td>TypeError</td>\n<td>Map</td>\n<td>Uint8Array</td>\n</tr>\n<tr>\n<td></td>\n<td>URIError</td>\n<td>Promise</td>\n<td>Uint8ClampedArray</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>Proxy</td>\n<td>Uint16Array</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>RegExp</td>\n<td>Uint32Array</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>Set</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>SharedArrayBuffer</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>WeakMap</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>WeakSet</td>\n<td></td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects\" target=\"_blank\" rel=\"noopener\">å¼•å…¥ Javascript å¯¹è±¡</a></li>\n<li><a href=\"https://software.intel.com/en-us/blogs/2008/08/22/flaws-of-object-oriented-modeling/\" target=\"_blank\" rel=\"noopener\">Flaws of Object Oriented Modeling</a></li>\n<li><a href=\"https://books.google.com/books?id=xb-sAQAAQBAJ&printsec=frontcover&dq=isbn:9788090466180&hl=zh-CN&sa=X&ved=0ahUKEwiG-8y8qdroAhWmUt8KHey5Dl0Q6AEIKDAA#v=onepage&q&f=false\" target=\"_blank\" rel=\"noopener\">learn object oriented thinking &amp; programming</a></li>\n<li><a href=\"https://books.google.com/books?id=WzsFCAAAQBAJ&printsec=frontcover&dq=isbn:9780735619654&hl=zh-CN&sa=X&ved=0ahUKEwiqzaPSqNroAhVvUd8KHc80CYEQ6AEIKDAA#v=onepage&q&f=false\" target=\"_blank\" rel=\"noopener\">Obejct thinking</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/JavaScript\" target=\"_blank\" rel=\"noopener\">Javascript Object-orientation (prototype-based)</a></li>\n<li><a href=\"https://www.codeproject.com/Articles/22769/Introduction-to-Object-Oriented-Programming-Concep\" target=\"_blank\" rel=\"noopener\">Introduction to Object Oriented Programming Concepts (OOP) and More</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Functional_programming\" target=\"_blank\" rel=\"noopener\">Functional_programming wikipedia</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Side_effect_(computer_science)\" target=\"_blank\" rel=\"noopener\">Side effect wikipedia</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" target=\"_blank\" rel=\"noopener\">Object-oriented programming wikipedia</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>æœ‰å¯¹ Object ä»¥åŠå¯¹ reference äº§ç”Ÿçš„ side effects<br>æ–°çš„è®¤è¯†</li>\n<li>JavaScript æä¾›äº†å®Œå…¨è¿è¡Œæ—¶çš„å¯¹è±¡ç³»ç»Ÿï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥æ¨¡ä»¿å¤šæ•°é¢å‘å¯¹è±¡ç¼–ç¨‹èŒƒå¼ï¼ˆåŸºäºç±»å’ŒåŸºäºåŸå‹ï¼‰ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯æ­£ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ã€‚</li>\n<li>JavaScript è¯­è¨€æ ‡å‡†ä¹Ÿå·²ç»æ˜ç¡®è¯´æ˜ï¼ŒJavaScript æ˜¯ä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€ã€‚ï¼ˆæ ‡å‡†ä¸­èƒ½è¿™æ ·è¯´ï¼Œæ­£æ˜¯å› ä¸º JavaScript çš„é«˜åº¦åŠ¨æ€æ€§çš„å¯¹è±¡ç³»ç»Ÿï¼‰</li>\n</ul>\n<ul>\n<li>é—­åŒ… closure<ul>\n<li>A nested function is a function defined within another function. It is created each time the outer function is invoked. In addition, each nested function forms a lexical closure: The lexical scope of the outer function (including any constant, local variable, or argument value) becomes part of the internal state of each inner function object, even after execution of the outer function concludes.</li>\n</ul>\n</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Reg -- String","date":"2020-04-21T00:48:45.000Z","description":["æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ å­—ç¬¦ä¸² å­—é¢é‡"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ å­—ç¬¦ä¸² å­—é¢é‡\n<!-- more -->\n\n\n## å®è·µè¿‡ç¨‹\n\n- ![StringLiteral å¤§çº²](http://p0.meituan.net/myvideodistribute/42c12116bea0d20ad46f3eaaec710ee419568.png)\n- StringLiteral ::\n\t- DoubleStringCharacters\n\t\t- ![DoubleStringCharacters å¤§çº²](http://p0.meituan.net/myvideodistribute/03c05dd8a9fd5b8b621593fe039e4e6c16908.png)\n\t\t\t- ![DoubleStringCharacter è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/ef23a0f824e9fc948b61da6c4a8d2a4729602.png)\n\t\t\t\t- ![SourceCharacter è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/9004c303c8ebdbb8e38c00e7597b2c5b10649.png)\n\n\t\t\t\t\t> \\\\\\u[0-9a-fA-F]{4}\n\t\t\t\t- ![EscapeSequence è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/25a7c00f444aaead5b3a187d09ab280a16997.png)\n\t\t\t\t\t- ![CharacterEscapeSequence è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/ef30597fe4124e22ae7fcf243d9712a310845.png)\n\t\t\t\t\t\t- ![SingleEscapeCharacter è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/b495509fe89ca78a7d2f5f06831d45c79074.png)\n\n\t\t\t\t\t\t\t> '\"\\\\\\bfnrtv\n\t\t\t\t\t\t- ![NonEscapeCharacter è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/7ce330d5a54c7c8ac927771ee7a0540814453.png)\n\t\t\t\t\t\t\t- ![EscapeCharacter è¯¦æƒ…](http://p1.meituan.net/myvideodistribute/f3d3a1b2fba86ebd4b8b6ab2959302e610550.png)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t> '\"\\\\\\bfnrtv0-9xu \n\t\t\t\t\t\t\t- ![LineTerminator è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/8c027b4dfef1876ad432fd62b6ecc4a59724.png)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t> \\n\\r\\u2028\\u2029\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t- ![LineTerminator ç ç‚¹](http://p0.meituan.net/myvideodistribute/02a7f707581cb217ab5025d7a48e67e829247.png)\n\t\t\t\t\t\n\t\t\t\t\t- **CharacterEscapeSequence**æ€»ç»“ä¸ºï¼š\n\t\t\t\t\t\n\t\t\t\t\t\t> '\"\\\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029\n\t\t\t\t\t\n\t\t\t\t\t- ![HexEscapeSequence è¯¦æƒ…](http://p1.meituan.net/myvideodistribute/9207083723607a9faa4f0a560599dde17694.png)\n\n\t\t\t\t\t- **HexEscapeSequence**æ€»ç»“ä¸ºï¼š\n\n\t\t\t\t\t\t> \\\\\\x[0-9a-fA-F]{2}\n\t\t\t\t\t\n\t\t\t\t\t- ![UnicodeEscapeSequence è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/545f52e053421a0e9c5e3b231a96276d10075.png)\n\t\t\t\t\t\t- ![Hex4Digits è¯¦æƒ…](http://p1.meituan.net/myvideodistribute/8bb8c713ee753fd2844aea95e3ecde417620.png)\n\t\t\t\t\t- **UnicodeEscapeSequence**æ€»ç»“ä¸ºï¼š\n\n\t\t\t\t\t\t>  \\\\\\u[0-9a-fA-F]{4}\n\t\t\t\t\t\t\n\t\t\t\t- **EscapeSequence**æ€»ç»“ä¸ºï¼š\n\n\t\t\t\t\t> ('\"\\\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\\\\\x[0-9a-fA-F]{2})|(\\\\\\u[0-9a-fA-F]{4})\n\t\t\t\t\t\n\t\t\t\t- ![LineContinuation è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/bd86a4d39c1ae8d719eca6afbd9dcb147948.png)\n\t\t\t\t\t- ![LineTerminatorSequence è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/e8b4e35d4653ecb6a0f89d848085f69b14054.png)\n\t\t\t\t- **LineContinuation**æ€»ç»“ä¸ºï¼š\n\t\t\t\t\n\t\t\t\t\t> \\\\\\\\\\n\\r\\u\\2028]2029\n\t\t\t\t\t\n\t- **DoubleStringCharacters**æ€»ç»“ä¸ºï¼š\n\n\t\t> \"(?:(\\\\\\\\('\"\\\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\\\\\x[0-9a-fA-F]{2})|(\\\\\\u[0-9a-fA-F]{4}))|(\\\\\\\\\\n\\r\\u\\2028]2029))*\"\n\t\t\n\t- SingleStringCharacters\n\t\t- ![SingleStringCharacters å¤§çº²](http://p0.meituan.net/myvideodistribute/6d2e2b31ed15050de59907d5537b9e9219247.png)\n\t- **SingleStringCharacters**æ€»ç»“ä¸ºï¼š\n\n\t\t> '(?:(\\\\\\\\('\"\\\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\\\\\x[0-9a-fA-F]{2})|(\\\\\\u[0-9a-fA-F]{4}))|(\\\\\\\\\\n\\r\\u\\2028]2029))*'\n\t\t\n- **StringLiteral**æ€»ç»“ä¸ºï¼š\n\t\n\t> (^\"(?:(\\\\\\\\('\"\\\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\\\\\x[0-9a-fA-F]{2})|(\\\\\\u[0-9a-fA-F]{4}))|(\\\\\\\\\\n\\r\\u\\2028]2029))*\"$)|(^'(?:(\\\\\\\\('\"\\\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\\\\\x[0-9a-fA-F]{2})|(\\\\\\u[0-9a-fA-F]{4}))|(\\\\\\\\\\n\\r\\u\\2028]2029))*'$)\n\t\n\t```javascript\n\t(^\"(?:(\\\\('\"\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4}))|(\\\\\\n\\r\\u\\2028]2029))*\"$)|(^'(?:(\\\\('\"\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4}))|(\\\\\\n\\r\\u\\2028]2029))*'$)\n\t```\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n\n\n","source":"_posts/Reg-String.md","raw":"---\ntitle: Reg -- String\ndate: 2020-04-21 08:48:45\ntags:\n- å‰ç«¯æ¦‚å¿µ\n- æ­£åˆ™è¡¨è¾¾å¼\ncategories:\n- [å‰ç«¯æ¦‚å¿µ]\ndescription:\n- æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ å­—ç¬¦ä¸² å­—é¢é‡\n\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ å­—ç¬¦ä¸² å­—é¢é‡\n<!-- more -->\n\n\n## å®è·µè¿‡ç¨‹\n\n- ![StringLiteral å¤§çº²](http://p0.meituan.net/myvideodistribute/42c12116bea0d20ad46f3eaaec710ee419568.png)\n- StringLiteral ::\n\t- DoubleStringCharacters\n\t\t- ![DoubleStringCharacters å¤§çº²](http://p0.meituan.net/myvideodistribute/03c05dd8a9fd5b8b621593fe039e4e6c16908.png)\n\t\t\t- ![DoubleStringCharacter è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/ef23a0f824e9fc948b61da6c4a8d2a4729602.png)\n\t\t\t\t- ![SourceCharacter è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/9004c303c8ebdbb8e38c00e7597b2c5b10649.png)\n\n\t\t\t\t\t> \\\\\\u[0-9a-fA-F]{4}\n\t\t\t\t- ![EscapeSequence è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/25a7c00f444aaead5b3a187d09ab280a16997.png)\n\t\t\t\t\t- ![CharacterEscapeSequence è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/ef30597fe4124e22ae7fcf243d9712a310845.png)\n\t\t\t\t\t\t- ![SingleEscapeCharacter è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/b495509fe89ca78a7d2f5f06831d45c79074.png)\n\n\t\t\t\t\t\t\t> '\"\\\\\\bfnrtv\n\t\t\t\t\t\t- ![NonEscapeCharacter è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/7ce330d5a54c7c8ac927771ee7a0540814453.png)\n\t\t\t\t\t\t\t- ![EscapeCharacter è¯¦æƒ…](http://p1.meituan.net/myvideodistribute/f3d3a1b2fba86ebd4b8b6ab2959302e610550.png)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t> '\"\\\\\\bfnrtv0-9xu \n\t\t\t\t\t\t\t- ![LineTerminator è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/8c027b4dfef1876ad432fd62b6ecc4a59724.png)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t> \\n\\r\\u2028\\u2029\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t- ![LineTerminator ç ç‚¹](http://p0.meituan.net/myvideodistribute/02a7f707581cb217ab5025d7a48e67e829247.png)\n\t\t\t\t\t\n\t\t\t\t\t- **CharacterEscapeSequence**æ€»ç»“ä¸ºï¼š\n\t\t\t\t\t\n\t\t\t\t\t\t> '\"\\\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029\n\t\t\t\t\t\n\t\t\t\t\t- ![HexEscapeSequence è¯¦æƒ…](http://p1.meituan.net/myvideodistribute/9207083723607a9faa4f0a560599dde17694.png)\n\n\t\t\t\t\t- **HexEscapeSequence**æ€»ç»“ä¸ºï¼š\n\n\t\t\t\t\t\t> \\\\\\x[0-9a-fA-F]{2}\n\t\t\t\t\t\n\t\t\t\t\t- ![UnicodeEscapeSequence è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/545f52e053421a0e9c5e3b231a96276d10075.png)\n\t\t\t\t\t\t- ![Hex4Digits è¯¦æƒ…](http://p1.meituan.net/myvideodistribute/8bb8c713ee753fd2844aea95e3ecde417620.png)\n\t\t\t\t\t- **UnicodeEscapeSequence**æ€»ç»“ä¸ºï¼š\n\n\t\t\t\t\t\t>  \\\\\\u[0-9a-fA-F]{4}\n\t\t\t\t\t\t\n\t\t\t\t- **EscapeSequence**æ€»ç»“ä¸ºï¼š\n\n\t\t\t\t\t> ('\"\\\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\\\\\x[0-9a-fA-F]{2})|(\\\\\\u[0-9a-fA-F]{4})\n\t\t\t\t\t\n\t\t\t\t- ![LineContinuation è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/bd86a4d39c1ae8d719eca6afbd9dcb147948.png)\n\t\t\t\t\t- ![LineTerminatorSequence è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/e8b4e35d4653ecb6a0f89d848085f69b14054.png)\n\t\t\t\t- **LineContinuation**æ€»ç»“ä¸ºï¼š\n\t\t\t\t\n\t\t\t\t\t> \\\\\\\\\\n\\r\\u\\2028]2029\n\t\t\t\t\t\n\t- **DoubleStringCharacters**æ€»ç»“ä¸ºï¼š\n\n\t\t> \"(?:(\\\\\\\\('\"\\\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\\\\\x[0-9a-fA-F]{2})|(\\\\\\u[0-9a-fA-F]{4}))|(\\\\\\\\\\n\\r\\u\\2028]2029))*\"\n\t\t\n\t- SingleStringCharacters\n\t\t- ![SingleStringCharacters å¤§çº²](http://p0.meituan.net/myvideodistribute/6d2e2b31ed15050de59907d5537b9e9219247.png)\n\t- **SingleStringCharacters**æ€»ç»“ä¸ºï¼š\n\n\t\t> '(?:(\\\\\\\\('\"\\\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\\\\\x[0-9a-fA-F]{2})|(\\\\\\u[0-9a-fA-F]{4}))|(\\\\\\\\\\n\\r\\u\\2028]2029))*'\n\t\t\n- **StringLiteral**æ€»ç»“ä¸ºï¼š\n\t\n\t> (^\"(?:(\\\\\\\\('\"\\\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\\\\\x[0-9a-fA-F]{2})|(\\\\\\u[0-9a-fA-F]{4}))|(\\\\\\\\\\n\\r\\u\\2028]2029))*\"$)|(^'(?:(\\\\\\\\('\"\\\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\\\\\x[0-9a-fA-F]{2})|(\\\\\\u[0-9a-fA-F]{4}))|(\\\\\\\\\\n\\r\\u\\2028]2029))*'$)\n\t\n\t```javascript\n\t(^\"(?:(\\\\('\"\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4}))|(\\\\\\n\\r\\u\\2028]2029))*\"$)|(^'(?:(\\\\('\"\\\\bfnrtv0-9xu\\n\\\\r\\u2028\\u2029])|(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4}))|(\\\\\\n\\r\\u\\2028]2029))*'$)\n\t```\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n\n\n","slug":"Reg-String","published":1,"updated":"2020-10-27T15:21:11.263Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7w001efw9k2ornd2tx","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ å­—ç¬¦ä¸² å­—é¢é‡<a id=\"more\"></a>\n\n\n</li>\n</ul>\n<h2 id=\"å®è·µè¿‡ç¨‹\"><a href=\"#å®è·µè¿‡ç¨‹\" class=\"headerlink\" title=\"å®è·µè¿‡ç¨‹\"></a>å®è·µè¿‡ç¨‹</h2><ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/42c12116bea0d20ad46f3eaaec710ee419568.png\" alt=\"StringLiteral å¤§çº²\"></p>\n</li>\n<li><p>StringLiteral ::</p>\n<ul>\n<li><p>DoubleStringCharacters</p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/03c05dd8a9fd5b8b621593fe039e4e6c16908.png\" alt=\"DoubleStringCharacters å¤§çº²\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/ef23a0f824e9fc948b61da6c4a8d2a4729602.png\" alt=\"DoubleStringCharacter è¯¦æƒ…\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/9004c303c8ebdbb8e38c00e7597b2c5b10649.png\" alt=\"SourceCharacter è¯¦æƒ…\"></p>\n<blockquote>\n<p>\\\\u[0-9a-fA-F]{4}</p>\n</blockquote>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/25a7c00f444aaead5b3a187d09ab280a16997.png\" alt=\"EscapeSequence è¯¦æƒ…\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/ef30597fe4124e22ae7fcf243d9712a310845.png\" alt=\"CharacterEscapeSequence è¯¦æƒ…\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/b495509fe89ca78a7d2f5f06831d45c79074.png\" alt=\"SingleEscapeCharacter è¯¦æƒ…\"></p>\n<blockquote>\n<p>â€˜â€œ\\\\bfnrtv</p>\n</blockquote>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/7ce330d5a54c7c8ac927771ee7a0540814453.png\" alt=\"NonEscapeCharacter è¯¦æƒ…\"></p>\n<ul>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/f3d3a1b2fba86ebd4b8b6ab2959302e610550.png\" alt=\"EscapeCharacter è¯¦æƒ…\"></p>\n<blockquote>\n<p>â€˜â€œ\\\\bfnrtv0-9xu </p>\n</blockquote>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/8c027b4dfef1876ad432fd62b6ecc4a59724.png\" alt=\"LineTerminator è¯¦æƒ…\"></p>\n<blockquote>\n<p>\\n\\r\\u2028\\u2029</p>\n</blockquote>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/02a7f707581cb217ab5025d7a48e67e829247.png\" alt=\"LineTerminator ç ç‚¹\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>CharacterEscapeSequence</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>â€˜â€œ\\\\bfnrtv0-9xu\\n\\r\\u2028\\u2029</p>\n</blockquote>\n</li>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/9207083723607a9faa4f0a560599dde17694.png\" alt=\"HexEscapeSequence è¯¦æƒ…\"></p>\n</li>\n<li><p><strong>HexEscapeSequence</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>\\\\x[0-9a-fA-F]{2}</p>\n</blockquote>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/545f52e053421a0e9c5e3b231a96276d10075.png\" alt=\"UnicodeEscapeSequence è¯¦æƒ…\"></p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/8bb8c713ee753fd2844aea95e3ecde417620.png\" alt=\"Hex4Digits è¯¦æƒ…\"></li>\n</ul>\n</li>\n<li><p><strong>UnicodeEscapeSequence</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p> \\\\u[0-9a-fA-F]{4}</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p><strong>EscapeSequence</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>(â€˜â€œ\\\\bfnrtv0-9xu\\n\\r\\u2028\\u2029])|(\\\\x[0-9a-fA-F]{2})|(\\\\u[0-9a-fA-F]{4})</p>\n</blockquote>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/bd86a4d39c1ae8d719eca6afbd9dcb147948.png\" alt=\"LineContinuation è¯¦æƒ…\"></p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/e8b4e35d4653ecb6a0f89d848085f69b14054.png\" alt=\"LineTerminatorSequence è¯¦æƒ…\"></li>\n</ul>\n</li>\n<li><p><strong>LineContinuation</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>\\\\\\n\\r\\u\\2028]2029</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>DoubleStringCharacters</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>â€œ(?:(\\\\(â€˜â€œ\\\\bfnrtv0-9xu\\n\\r\\u2028\\u2029])|(\\\\x[0-9a-fA-F]{2})|(\\\\u[0-9a-fA-F]{4}))|(\\\\\\n\\r\\u\\2028]2029))*â€</p>\n</blockquote>\n</li>\n<li><p>SingleStringCharacters</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6d2e2b31ed15050de59907d5537b9e9219247.png\" alt=\"SingleStringCharacters å¤§çº²\"></li>\n</ul>\n</li>\n<li><p><strong>SingleStringCharacters</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>â€˜(?:(\\\\(â€˜â€œ\\\\bfnrtv0-9xu\\n\\r\\u2028\\u2029])|(\\\\x[0-9a-fA-F]{2})|(\\\\u[0-9a-fA-F]{4}))|(\\\\\\n\\r\\u\\2028]2029))*â€™</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p><strong>StringLiteral</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>(^â€(?:(\\\\(â€˜â€œ\\\\bfnrtv0-9xu\\n\\r\\u2028\\u2029])|(\\\\x[0-9a-fA-F]{2})|(\\\\u[0-9a-fA-F]{4}))|(\\\\\\n\\r\\u\\2028]2029))*â€$)|(^â€™(?:(\\\\(â€˜â€œ\\\\bfnrtv0-9xu\\n\\r\\u2028\\u2029])|(\\\\x[0-9a-fA-F]{2})|(\\\\u[0-9a-fA-F]{4}))|(\\\\\\n\\r\\u\\2028]2029))*â€™$)</p>\n</blockquote>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(^<span class=\"string\">\"(?:(\\\\('\"</span>\\\\bfnrtv0<span class=\"number\">-9</span>xu\\n\\\\r\\u2028\\u2029])|(\\x[<span class=\"number\">0</span><span class=\"number\">-9</span>a-fA-F]&#123;<span class=\"number\">2</span>&#125;)|(\\u[<span class=\"number\">0</span><span class=\"number\">-9</span>a-fA-F]&#123;<span class=\"number\">4</span>&#125;))|(\\\\\\n\\r\\u\\<span class=\"number\">2028</span>]<span class=\"number\">2029</span>))*<span class=\"string\">\"$)|(^'(?:(\\\\('\"</span>\\\\bfnrtv0<span class=\"number\">-9</span>xu\\n\\\\r\\u2028\\u2029])|(\\x[<span class=\"number\">0</span><span class=\"number\">-9</span>a-fA-F]&#123;<span class=\"number\">2</span>&#125;)|(\\u[<span class=\"number\">0</span><span class=\"number\">-9</span>a-fA-F]&#123;<span class=\"number\">4</span>&#125;))|(\\\\\\n\\r\\u\\<span class=\"number\">2028</span>]<span class=\"number\">2029</span>))*<span class=\"string\">'$)</span></span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ å­—ç¬¦ä¸² å­—é¢é‡","more":"</li>\n</ul>\n<h2 id=\"å®è·µè¿‡ç¨‹\"><a href=\"#å®è·µè¿‡ç¨‹\" class=\"headerlink\" title=\"å®è·µè¿‡ç¨‹\"></a>å®è·µè¿‡ç¨‹</h2><ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/42c12116bea0d20ad46f3eaaec710ee419568.png\" alt=\"StringLiteral å¤§çº²\"></p>\n</li>\n<li><p>StringLiteral ::</p>\n<ul>\n<li><p>DoubleStringCharacters</p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/03c05dd8a9fd5b8b621593fe039e4e6c16908.png\" alt=\"DoubleStringCharacters å¤§çº²\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/ef23a0f824e9fc948b61da6c4a8d2a4729602.png\" alt=\"DoubleStringCharacter è¯¦æƒ…\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/9004c303c8ebdbb8e38c00e7597b2c5b10649.png\" alt=\"SourceCharacter è¯¦æƒ…\"></p>\n<blockquote>\n<p>\\\\u[0-9a-fA-F]{4}</p>\n</blockquote>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/25a7c00f444aaead5b3a187d09ab280a16997.png\" alt=\"EscapeSequence è¯¦æƒ…\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/ef30597fe4124e22ae7fcf243d9712a310845.png\" alt=\"CharacterEscapeSequence è¯¦æƒ…\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/b495509fe89ca78a7d2f5f06831d45c79074.png\" alt=\"SingleEscapeCharacter è¯¦æƒ…\"></p>\n<blockquote>\n<p>â€˜â€œ\\\\bfnrtv</p>\n</blockquote>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/7ce330d5a54c7c8ac927771ee7a0540814453.png\" alt=\"NonEscapeCharacter è¯¦æƒ…\"></p>\n<ul>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/f3d3a1b2fba86ebd4b8b6ab2959302e610550.png\" alt=\"EscapeCharacter è¯¦æƒ…\"></p>\n<blockquote>\n<p>â€˜â€œ\\\\bfnrtv0-9xu </p>\n</blockquote>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/8c027b4dfef1876ad432fd62b6ecc4a59724.png\" alt=\"LineTerminator è¯¦æƒ…\"></p>\n<blockquote>\n<p>\\n\\r\\u2028\\u2029</p>\n</blockquote>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/02a7f707581cb217ab5025d7a48e67e829247.png\" alt=\"LineTerminator ç ç‚¹\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>CharacterEscapeSequence</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>â€˜â€œ\\\\bfnrtv0-9xu\\n\\r\\u2028\\u2029</p>\n</blockquote>\n</li>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/9207083723607a9faa4f0a560599dde17694.png\" alt=\"HexEscapeSequence è¯¦æƒ…\"></p>\n</li>\n<li><p><strong>HexEscapeSequence</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>\\\\x[0-9a-fA-F]{2}</p>\n</blockquote>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/545f52e053421a0e9c5e3b231a96276d10075.png\" alt=\"UnicodeEscapeSequence è¯¦æƒ…\"></p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/8bb8c713ee753fd2844aea95e3ecde417620.png\" alt=\"Hex4Digits è¯¦æƒ…\"></li>\n</ul>\n</li>\n<li><p><strong>UnicodeEscapeSequence</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p> \\\\u[0-9a-fA-F]{4}</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p><strong>EscapeSequence</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>(â€˜â€œ\\\\bfnrtv0-9xu\\n\\r\\u2028\\u2029])|(\\\\x[0-9a-fA-F]{2})|(\\\\u[0-9a-fA-F]{4})</p>\n</blockquote>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/bd86a4d39c1ae8d719eca6afbd9dcb147948.png\" alt=\"LineContinuation è¯¦æƒ…\"></p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/e8b4e35d4653ecb6a0f89d848085f69b14054.png\" alt=\"LineTerminatorSequence è¯¦æƒ…\"></li>\n</ul>\n</li>\n<li><p><strong>LineContinuation</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>\\\\\\n\\r\\u\\2028]2029</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>DoubleStringCharacters</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>â€œ(?:(\\\\(â€˜â€œ\\\\bfnrtv0-9xu\\n\\r\\u2028\\u2029])|(\\\\x[0-9a-fA-F]{2})|(\\\\u[0-9a-fA-F]{4}))|(\\\\\\n\\r\\u\\2028]2029))*â€</p>\n</blockquote>\n</li>\n<li><p>SingleStringCharacters</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6d2e2b31ed15050de59907d5537b9e9219247.png\" alt=\"SingleStringCharacters å¤§çº²\"></li>\n</ul>\n</li>\n<li><p><strong>SingleStringCharacters</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>â€˜(?:(\\\\(â€˜â€œ\\\\bfnrtv0-9xu\\n\\r\\u2028\\u2029])|(\\\\x[0-9a-fA-F]{2})|(\\\\u[0-9a-fA-F]{4}))|(\\\\\\n\\r\\u\\2028]2029))*â€™</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p><strong>StringLiteral</strong>æ€»ç»“ä¸ºï¼š</p>\n<blockquote>\n<p>(^â€(?:(\\\\(â€˜â€œ\\\\bfnrtv0-9xu\\n\\r\\u2028\\u2029])|(\\\\x[0-9a-fA-F]{2})|(\\\\u[0-9a-fA-F]{4}))|(\\\\\\n\\r\\u\\2028]2029))*â€$)|(^â€™(?:(\\\\(â€˜â€œ\\\\bfnrtv0-9xu\\n\\r\\u2028\\u2029])|(\\\\x[0-9a-fA-F]{2})|(\\\\u[0-9a-fA-F]{4}))|(\\\\\\n\\r\\u\\2028]2029))*â€™$)</p>\n</blockquote>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(^<span class=\"string\">\"(?:(\\\\('\"</span>\\\\bfnrtv0<span class=\"number\">-9</span>xu\\n\\\\r\\u2028\\u2029])|(\\x[<span class=\"number\">0</span><span class=\"number\">-9</span>a-fA-F]&#123;<span class=\"number\">2</span>&#125;)|(\\u[<span class=\"number\">0</span><span class=\"number\">-9</span>a-fA-F]&#123;<span class=\"number\">4</span>&#125;))|(\\\\\\n\\r\\u\\<span class=\"number\">2028</span>]<span class=\"number\">2029</span>))*<span class=\"string\">\"$)|(^'(?:(\\\\('\"</span>\\\\bfnrtv0<span class=\"number\">-9</span>xu\\n\\\\r\\u2028\\u2029])|(\\x[<span class=\"number\">0</span><span class=\"number\">-9</span>a-fA-F]&#123;<span class=\"number\">2</span>&#125;)|(\\u[<span class=\"number\">0</span><span class=\"number\">-9</span>a-fA-F]&#123;<span class=\"number\">4</span>&#125;))|(\\\\\\n\\r\\u\\<span class=\"number\">2028</span>]<span class=\"number\">2029</span>))*<span class=\"string\">'$)</span></span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Reg-Number","date":"2020-04-20T14:27:51.000Z","description":["æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ Number å­—é¢é‡"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ Number å­—é¢é‡\n<!-- more -->\n\n## å®è·µè¿‡ç¨‹\n\n- ![NumbericLiteral å¤§çº²](http://p1.meituan.net/myvideodistribute/fcc73488cd245a6c48cf067a6dc7641e16278.png)\n- NumericLiteral :: \n\t- DecimalLiteral\n\t\t- ![DecimalLiteral å¤§çº²](http://p0.meituan.net/myvideodistribute/94398bab367ca56c0aa2435de753041520532.png)\n\t\t\t- ![DecimalLiteral è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/40d13f93242ff1f9321411cc7886586f52608.png)\n\t\t\t- DecimalIntegerLiteral . DecimalDigits(opt) ExponentPart(opt)\n\t\t\t\t- DecimalIntegerLiteral\n\t\t\t\t\t\n\t\t\t\t\t> (0)\n\t\t\t\t\t\n\t\t\t\t\t> ([1-9][0-9]*)\n\t\t\t\t- .\n\t\t\t\t\t> .\n\t\t\t\t- DecimalDigits\n\t\t\t\t\t> [0-9]*\n\t\t\t\t- ExponentPart\n\t\t\t\t\t> (e|E)(\\\\+|\\\\-)?([0-9])*\n\t\t\t\t- å¯ä»¥æ¨å¯¼å‡º\n\t\t\t\t\t> /^((0)|([1-9][0-9]\\*))?.?([0-9]\\*)((e|E)?(\\\\+|\\\\-)?([0-9]*))?$/\n\t\t\t- . DecimalDigits ExponentPart(opt)\n\t\t\t\t- å¯ä»¥æ¨å¯¼å‡º\n\t\t\t\t\t\n\t\t\t\t\t> /^**((0)|([1-9][0-9]\\*))?**.?([0-9]\\*)(((e|E)?(\\\\+|\\\\-)?([0-9])\\*)\\*)$/\n\t\t\t- DecimalIntegerLiteral ExponentPart(opt)\n\t\t\t\n\t\t\t\t> /^((0)|([1-9][0-9]\\*))?**.?**([0-9]*)((e|E)?(\\\\+|\\\\-)?([0-9]\\*))?$/\n\t\t\t- æœ€ç»ˆ\n\t\t\t\n\t\t\t\t> /^((0)|([1-9][0-9]\\*))?.?([0-9]\\*)((e|E)?(\\\\+|\\\\-)?([0-9]*))?$/\n\n\t- BinaryIntegerLiteral \n\t\t- ![BinaryIntegerLiteral å¤§çº²](http://p1.meituan.net/myvideodistribute/5a2e4c4c84c80cf794281290420928d78942.png)\n\t\t\t- ![BinaryIntegerLiteral è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/22c6b076cfe8b42d71003893bed4059512350.png)\n\n\t\t\t\t> /^0(b|B)(0|1)+$/\n\t- OctalIntegerLiteral \n\t\t- ![OctalIntegerLiteral å¤§çº²](http://p1.meituan.net/myvideodistribute/40145f430e5560e16f117863419eceea12195.png)\n\t\t\t- ![OctalIntegerLiteral è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/3049a1ac2a5071c0bcebae1e31db9a5512369.png)\n\t\t\t\t\n\t\t\t\t> /^0(O|o)[0-7]+$/\n\t- HexIntegerLiteral\n\t\t- ![HexIntegerLiteral å¤§çº²](http://p1.meituan.net/myvideodistribute/cfe61ed151be1f9e1ab58a860cc6c8638397.png)\n\t\t\t- ![HexIntegerLiteral è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/75544696fc619ce55f6555d0fddd5a0617749.png)\n\t\t\t\t\n\t\t\t\t> /^0(x|X)([0-9a-fA-F])+$/\n- ç®€å•æ€»ç»“\n\n\t> /^(((0)|([1-9][0-9]\\*))?.?([0-9]\\*)((e|E)?(\\\\+|\\\\-)?([0-9]*))?)|(0(b|B)(0|1)+)|(0(O|o)[0-7]+)|(0(x|X)([0-9a-fA-F])+)$/\n\t\n- ç®€åŒ–\n\n\t>  /^((((0)|([1-9]\\d\\*))?.?(\\d\\*)((e|E)?(\\\\+|\\\\-)?(\\d*))?)|(0(b|B)(0|1)+)|(0(O|o)[0-7]+)|(0(x|X)([0-9a-fA-F])+))$/\n\n  ```javascript\n  /^((((0)|([1-9]\\d*))?.?(\\d*)((e|E)?(\\+|\\-)?(\\d*))?)|(0(b|B)(0|1)+)|(0(O|o)[0-7]+)|(0(x|X)([0-9a-fA-F])+))$/\n  ```\n  \n## ç»“æœæµ‹è¯•\n- åå…­è¿›åˆ¶æ•°ï¼š 0x0233acdfACDF\n\t- ![åå…­è¿›åˆ¶æ•°](http://p0.meituan.net/myvideodistribute/6b7064f71909191efad66a7a6899e17551930.png)\n- å…«è¿›åˆ¶æ•°ï¼š0o023657\n\t- ![å…«è¿›åˆ¶æ•°](http://p0.meituan.net/myvideodistribute/a65a14040f2a483733b92a78ca7cb76956176.png)\n- äºŒè¿›åˆ¶æ•°ï¼š 0b01010111\n\t- ![äºŒè¿›åˆ¶æ•°](http://p0.meituan.net/myvideodistribute/33e2f75a6f02ec627a4aa16f56c9d59251733.png)\n- æµ®ç‚¹æ•°ï¼š.2373736\n\t- ![æµ®ç‚¹æ•°](http://p0.meituan.net/myvideodistribute/facf9ed43fe79a6e05525c9597f1014054052.png)\n- IEEE 754ï¼š1.2e+32\n\t- ![IEEE 754](http://p1.meituan.net/myvideodistribute/28058fac862347153c3d605fbb37272952996.png)\n- ç‰¹æ®Šæƒ…å†µ .0\n\t- ![ç‰¹æ®Šæƒ…å†µ](http://p0.meituan.net/myvideodistribute/5d38329b0247e224ac893957ae24e9a150951.png)\n\t\n\t\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/Reg-Number.md","raw":"---\ntitle: Reg-Number\ndate: 2020-04-20 22:27:51\ntags:\n- å‰ç«¯æ¦‚å¿µ\n- æ­£åˆ™è¡¨è¾¾å¼\ncategories:\n- [å‰ç«¯æ¦‚å¿µ]\ndescription:\n- æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ Number å­—é¢é‡\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ Number å­—é¢é‡\n<!-- more -->\n\n## å®è·µè¿‡ç¨‹\n\n- ![NumbericLiteral å¤§çº²](http://p1.meituan.net/myvideodistribute/fcc73488cd245a6c48cf067a6dc7641e16278.png)\n- NumericLiteral :: \n\t- DecimalLiteral\n\t\t- ![DecimalLiteral å¤§çº²](http://p0.meituan.net/myvideodistribute/94398bab367ca56c0aa2435de753041520532.png)\n\t\t\t- ![DecimalLiteral è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/40d13f93242ff1f9321411cc7886586f52608.png)\n\t\t\t- DecimalIntegerLiteral . DecimalDigits(opt) ExponentPart(opt)\n\t\t\t\t- DecimalIntegerLiteral\n\t\t\t\t\t\n\t\t\t\t\t> (0)\n\t\t\t\t\t\n\t\t\t\t\t> ([1-9][0-9]*)\n\t\t\t\t- .\n\t\t\t\t\t> .\n\t\t\t\t- DecimalDigits\n\t\t\t\t\t> [0-9]*\n\t\t\t\t- ExponentPart\n\t\t\t\t\t> (e|E)(\\\\+|\\\\-)?([0-9])*\n\t\t\t\t- å¯ä»¥æ¨å¯¼å‡º\n\t\t\t\t\t> /^((0)|([1-9][0-9]\\*))?.?([0-9]\\*)((e|E)?(\\\\+|\\\\-)?([0-9]*))?$/\n\t\t\t- . DecimalDigits ExponentPart(opt)\n\t\t\t\t- å¯ä»¥æ¨å¯¼å‡º\n\t\t\t\t\t\n\t\t\t\t\t> /^**((0)|([1-9][0-9]\\*))?**.?([0-9]\\*)(((e|E)?(\\\\+|\\\\-)?([0-9])\\*)\\*)$/\n\t\t\t- DecimalIntegerLiteral ExponentPart(opt)\n\t\t\t\n\t\t\t\t> /^((0)|([1-9][0-9]\\*))?**.?**([0-9]*)((e|E)?(\\\\+|\\\\-)?([0-9]\\*))?$/\n\t\t\t- æœ€ç»ˆ\n\t\t\t\n\t\t\t\t> /^((0)|([1-9][0-9]\\*))?.?([0-9]\\*)((e|E)?(\\\\+|\\\\-)?([0-9]*))?$/\n\n\t- BinaryIntegerLiteral \n\t\t- ![BinaryIntegerLiteral å¤§çº²](http://p1.meituan.net/myvideodistribute/5a2e4c4c84c80cf794281290420928d78942.png)\n\t\t\t- ![BinaryIntegerLiteral è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/22c6b076cfe8b42d71003893bed4059512350.png)\n\n\t\t\t\t> /^0(b|B)(0|1)+$/\n\t- OctalIntegerLiteral \n\t\t- ![OctalIntegerLiteral å¤§çº²](http://p1.meituan.net/myvideodistribute/40145f430e5560e16f117863419eceea12195.png)\n\t\t\t- ![OctalIntegerLiteral è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/3049a1ac2a5071c0bcebae1e31db9a5512369.png)\n\t\t\t\t\n\t\t\t\t> /^0(O|o)[0-7]+$/\n\t- HexIntegerLiteral\n\t\t- ![HexIntegerLiteral å¤§çº²](http://p1.meituan.net/myvideodistribute/cfe61ed151be1f9e1ab58a860cc6c8638397.png)\n\t\t\t- ![HexIntegerLiteral è¯¦æƒ…](http://p0.meituan.net/myvideodistribute/75544696fc619ce55f6555d0fddd5a0617749.png)\n\t\t\t\t\n\t\t\t\t> /^0(x|X)([0-9a-fA-F])+$/\n- ç®€å•æ€»ç»“\n\n\t> /^(((0)|([1-9][0-9]\\*))?.?([0-9]\\*)((e|E)?(\\\\+|\\\\-)?([0-9]*))?)|(0(b|B)(0|1)+)|(0(O|o)[0-7]+)|(0(x|X)([0-9a-fA-F])+)$/\n\t\n- ç®€åŒ–\n\n\t>  /^((((0)|([1-9]\\d\\*))?.?(\\d\\*)((e|E)?(\\\\+|\\\\-)?(\\d*))?)|(0(b|B)(0|1)+)|(0(O|o)[0-7]+)|(0(x|X)([0-9a-fA-F])+))$/\n\n  ```javascript\n  /^((((0)|([1-9]\\d*))?.?(\\d*)((e|E)?(\\+|\\-)?(\\d*))?)|(0(b|B)(0|1)+)|(0(O|o)[0-7]+)|(0(x|X)([0-9a-fA-F])+))$/\n  ```\n  \n## ç»“æœæµ‹è¯•\n- åå…­è¿›åˆ¶æ•°ï¼š 0x0233acdfACDF\n\t- ![åå…­è¿›åˆ¶æ•°](http://p0.meituan.net/myvideodistribute/6b7064f71909191efad66a7a6899e17551930.png)\n- å…«è¿›åˆ¶æ•°ï¼š0o023657\n\t- ![å…«è¿›åˆ¶æ•°](http://p0.meituan.net/myvideodistribute/a65a14040f2a483733b92a78ca7cb76956176.png)\n- äºŒè¿›åˆ¶æ•°ï¼š 0b01010111\n\t- ![äºŒè¿›åˆ¶æ•°](http://p0.meituan.net/myvideodistribute/33e2f75a6f02ec627a4aa16f56c9d59251733.png)\n- æµ®ç‚¹æ•°ï¼š.2373736\n\t- ![æµ®ç‚¹æ•°](http://p0.meituan.net/myvideodistribute/facf9ed43fe79a6e05525c9597f1014054052.png)\n- IEEE 754ï¼š1.2e+32\n\t- ![IEEE 754](http://p1.meituan.net/myvideodistribute/28058fac862347153c3d605fbb37272952996.png)\n- ç‰¹æ®Šæƒ…å†µ .0\n\t- ![ç‰¹æ®Šæƒ…å†µ](http://p0.meituan.net/myvideodistribute/5d38329b0247e224ac893957ae24e9a150951.png)\n\t\n\t\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"Reg-Number","published":1,"updated":"2020-10-27T15:21:11.263Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7x001hfw9kexv00bb9","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ Number å­—é¢é‡<a id=\"more\"></a>\n\n</li>\n</ul>\n<h2 id=\"å®è·µè¿‡ç¨‹\"><a href=\"#å®è·µè¿‡ç¨‹\" class=\"headerlink\" title=\"å®è·µè¿‡ç¨‹\"></a>å®è·µè¿‡ç¨‹</h2><ul>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/fcc73488cd245a6c48cf067a6dc7641e16278.png\" alt=\"NumbericLiteral å¤§çº²\"></p>\n</li>\n<li><p>NumericLiteral :: </p>\n<ul>\n<li><p>DecimalLiteral</p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/94398bab367ca56c0aa2435de753041520532.png\" alt=\"DecimalLiteral å¤§çº²\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/40d13f93242ff1f9321411cc7886586f52608.png\" alt=\"DecimalLiteral è¯¦æƒ…\"></p>\n</li>\n<li><p>DecimalIntegerLiteral . DecimalDigits(opt) ExponentPart(opt)</p>\n<ul>\n<li><p>DecimalIntegerLiteral</p>\n<blockquote>\n<p>(0)</p>\n</blockquote>\n<blockquote>\n<p>([1-9][0-9]*)</p>\n</blockquote>\n</li>\n<li><p>.</p>\n<blockquote>\n<p>.</p>\n</blockquote>\n</li>\n<li><p>DecimalDigits</p>\n<blockquote>\n<p>[0-9]*</p>\n</blockquote>\n</li>\n<li><p>ExponentPart</p>\n<blockquote>\n<p>(e|E)(\\+|\\-)?([0-9])*</p>\n</blockquote>\n</li>\n<li><p>å¯ä»¥æ¨å¯¼å‡º</p>\n<blockquote>\n<p>/^((0)|([1-9][0-9]*))?.?([0-9]*)((e|E)?(\\+|\\-)?([0-9]*))?$/</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p>. DecimalDigits ExponentPart(opt)</p>\n<ul>\n<li><p>å¯ä»¥æ¨å¯¼å‡º</p>\n<blockquote>\n<p>/^<strong>((0)|([1-9][0-9]*))?</strong>.?([0-9]*)(((e|E)?(\\+|\\-)?([0-9])*)*)$/</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p>DecimalIntegerLiteral ExponentPart(opt)</p>\n<blockquote>\n<p>/^((0)|([1-9][0-9]*))?<strong>.?</strong>([0-9]<em>)((e|E)?(\\+|\\-)?([0-9]\\</em>))?$/</p>\n</blockquote>\n</li>\n<li><p>æœ€ç»ˆ</p>\n<blockquote>\n<p>/^((0)|([1-9][0-9]*))?.?([0-9]*)((e|E)?(\\+|\\-)?([0-9]*))?$/</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>BinaryIntegerLiteral </p>\n<ul>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/5a2e4c4c84c80cf794281290420928d78942.png\" alt=\"BinaryIntegerLiteral å¤§çº²\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/22c6b076cfe8b42d71003893bed4059512350.png\" alt=\"BinaryIntegerLiteral è¯¦æƒ…\"></p>\n<blockquote>\n<p>/^0(b|B)(0|1)+$/</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>OctalIntegerLiteral </p>\n<ul>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/40145f430e5560e16f117863419eceea12195.png\" alt=\"OctalIntegerLiteral å¤§çº²\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/3049a1ac2a5071c0bcebae1e31db9a5512369.png\" alt=\"OctalIntegerLiteral è¯¦æƒ…\"></p>\n<blockquote>\n<p>/^0(O|o)[0-7]+$/</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>HexIntegerLiteral</p>\n<ul>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/cfe61ed151be1f9e1ab58a860cc6c8638397.png\" alt=\"HexIntegerLiteral å¤§çº²\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/75544696fc619ce55f6555d0fddd5a0617749.png\" alt=\"HexIntegerLiteral è¯¦æƒ…\"></p>\n<blockquote>\n<p>/^0(x|X)([0-9a-fA-F])+$/</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç®€å•æ€»ç»“</p>\n<blockquote>\n<p>/^(((0)|([1-9][0-9]*))?.?([0-9]*)((e|E)?(\\+|\\-)?([0-9]*))?)|(0(b|B)(0|1)+)|(0(O|o)[0-7]+)|(0(x|X)([0-9a-fA-F])+)$/</p>\n</blockquote>\n</li>\n<li><p>ç®€åŒ–</p>\n<blockquote>\n<p> /^((((0)|([1-9]\\d*))?.?(\\d*)((e|E)?(\\+|\\-)?(\\d*))?)|(0(b|B)(0|1)+)|(0(O|o)[0-7]+)|(0(x|X)([0-9a-fA-F])+))$/</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/^((((<span class=\"number\">0</span>)|([<span class=\"number\">1</span><span class=\"number\">-9</span>]\\d*))?.?(\\d*)((e|E)?(\\+|\\-)?(\\d*))?)|(<span class=\"number\">0</span>(b|B)(<span class=\"number\">0</span>|<span class=\"number\">1</span>)+)|(<span class=\"number\">0</span>(O|o)[<span class=\"number\">0</span><span class=\"number\">-7</span>]+)|(<span class=\"number\">0</span>(x|X)([<span class=\"number\">0</span><span class=\"number\">-9</span>a-fA-F])+))$/</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h2 id=\"ç»“æœæµ‹è¯•\"><a href=\"#ç»“æœæµ‹è¯•\" class=\"headerlink\" title=\"ç»“æœæµ‹è¯•\"></a>ç»“æœæµ‹è¯•</h2><ul>\n<li>åå…­è¿›åˆ¶æ•°ï¼š 0x0233acdfACDF<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6b7064f71909191efad66a7a6899e17551930.png\" alt=\"åå…­è¿›åˆ¶æ•°\"></li>\n</ul>\n</li>\n<li>å…«è¿›åˆ¶æ•°ï¼š0o023657<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/a65a14040f2a483733b92a78ca7cb76956176.png\" alt=\"å…«è¿›åˆ¶æ•°\"></li>\n</ul>\n</li>\n<li>äºŒè¿›åˆ¶æ•°ï¼š 0b01010111<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/33e2f75a6f02ec627a4aa16f56c9d59251733.png\" alt=\"äºŒè¿›åˆ¶æ•°\"></li>\n</ul>\n</li>\n<li>æµ®ç‚¹æ•°ï¼š.2373736<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/facf9ed43fe79a6e05525c9597f1014054052.png\" alt=\"æµ®ç‚¹æ•°\"></li>\n</ul>\n</li>\n<li>IEEE 754ï¼š1.2e+32<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/28058fac862347153c3d605fbb37272952996.png\" alt=\"IEEE 754\"></li>\n</ul>\n</li>\n<li>ç‰¹æ®Šæƒ…å†µ .0<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5d38329b0247e224ac893957ae24e9a150951.png\" alt=\"ç‰¹æ®Šæƒ…å†µ\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ‰€æœ‰ Number å­—é¢é‡","more":"</li>\n</ul>\n<h2 id=\"å®è·µè¿‡ç¨‹\"><a href=\"#å®è·µè¿‡ç¨‹\" class=\"headerlink\" title=\"å®è·µè¿‡ç¨‹\"></a>å®è·µè¿‡ç¨‹</h2><ul>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/fcc73488cd245a6c48cf067a6dc7641e16278.png\" alt=\"NumbericLiteral å¤§çº²\"></p>\n</li>\n<li><p>NumericLiteral :: </p>\n<ul>\n<li><p>DecimalLiteral</p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/94398bab367ca56c0aa2435de753041520532.png\" alt=\"DecimalLiteral å¤§çº²\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/40d13f93242ff1f9321411cc7886586f52608.png\" alt=\"DecimalLiteral è¯¦æƒ…\"></p>\n</li>\n<li><p>DecimalIntegerLiteral . DecimalDigits(opt) ExponentPart(opt)</p>\n<ul>\n<li><p>DecimalIntegerLiteral</p>\n<blockquote>\n<p>(0)</p>\n</blockquote>\n<blockquote>\n<p>([1-9][0-9]*)</p>\n</blockquote>\n</li>\n<li><p>.</p>\n<blockquote>\n<p>.</p>\n</blockquote>\n</li>\n<li><p>DecimalDigits</p>\n<blockquote>\n<p>[0-9]*</p>\n</blockquote>\n</li>\n<li><p>ExponentPart</p>\n<blockquote>\n<p>(e|E)(\\+|\\-)?([0-9])*</p>\n</blockquote>\n</li>\n<li><p>å¯ä»¥æ¨å¯¼å‡º</p>\n<blockquote>\n<p>/^((0)|([1-9][0-9]*))?.?([0-9]*)((e|E)?(\\+|\\-)?([0-9]*))?$/</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p>. DecimalDigits ExponentPart(opt)</p>\n<ul>\n<li><p>å¯ä»¥æ¨å¯¼å‡º</p>\n<blockquote>\n<p>/^<strong>((0)|([1-9][0-9]*))?</strong>.?([0-9]*)(((e|E)?(\\+|\\-)?([0-9])*)*)$/</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p>DecimalIntegerLiteral ExponentPart(opt)</p>\n<blockquote>\n<p>/^((0)|([1-9][0-9]*))?<strong>.?</strong>([0-9]<em>)((e|E)?(\\+|\\-)?([0-9]\\</em>))?$/</p>\n</blockquote>\n</li>\n<li><p>æœ€ç»ˆ</p>\n<blockquote>\n<p>/^((0)|([1-9][0-9]*))?.?([0-9]*)((e|E)?(\\+|\\-)?([0-9]*))?$/</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>BinaryIntegerLiteral </p>\n<ul>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/5a2e4c4c84c80cf794281290420928d78942.png\" alt=\"BinaryIntegerLiteral å¤§çº²\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/22c6b076cfe8b42d71003893bed4059512350.png\" alt=\"BinaryIntegerLiteral è¯¦æƒ…\"></p>\n<blockquote>\n<p>/^0(b|B)(0|1)+$/</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>OctalIntegerLiteral </p>\n<ul>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/40145f430e5560e16f117863419eceea12195.png\" alt=\"OctalIntegerLiteral å¤§çº²\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/3049a1ac2a5071c0bcebae1e31db9a5512369.png\" alt=\"OctalIntegerLiteral è¯¦æƒ…\"></p>\n<blockquote>\n<p>/^0(O|o)[0-7]+$/</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>HexIntegerLiteral</p>\n<ul>\n<li><p><img src=\"http://p1.meituan.net/myvideodistribute/cfe61ed151be1f9e1ab58a860cc6c8638397.png\" alt=\"HexIntegerLiteral å¤§çº²\"></p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/75544696fc619ce55f6555d0fddd5a0617749.png\" alt=\"HexIntegerLiteral è¯¦æƒ…\"></p>\n<blockquote>\n<p>/^0(x|X)([0-9a-fA-F])+$/</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç®€å•æ€»ç»“</p>\n<blockquote>\n<p>/^(((0)|([1-9][0-9]*))?.?([0-9]*)((e|E)?(\\+|\\-)?([0-9]*))?)|(0(b|B)(0|1)+)|(0(O|o)[0-7]+)|(0(x|X)([0-9a-fA-F])+)$/</p>\n</blockquote>\n</li>\n<li><p>ç®€åŒ–</p>\n<blockquote>\n<p> /^((((0)|([1-9]\\d*))?.?(\\d*)((e|E)?(\\+|\\-)?(\\d*))?)|(0(b|B)(0|1)+)|(0(O|o)[0-7]+)|(0(x|X)([0-9a-fA-F])+))$/</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/^((((<span class=\"number\">0</span>)|([<span class=\"number\">1</span><span class=\"number\">-9</span>]\\d*))?.?(\\d*)((e|E)?(\\+|\\-)?(\\d*))?)|(<span class=\"number\">0</span>(b|B)(<span class=\"number\">0</span>|<span class=\"number\">1</span>)+)|(<span class=\"number\">0</span>(O|o)[<span class=\"number\">0</span><span class=\"number\">-7</span>]+)|(<span class=\"number\">0</span>(x|X)([<span class=\"number\">0</span><span class=\"number\">-9</span>a-fA-F])+))$/</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h2 id=\"ç»“æœæµ‹è¯•\"><a href=\"#ç»“æœæµ‹è¯•\" class=\"headerlink\" title=\"ç»“æœæµ‹è¯•\"></a>ç»“æœæµ‹è¯•</h2><ul>\n<li>åå…­è¿›åˆ¶æ•°ï¼š 0x0233acdfACDF<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6b7064f71909191efad66a7a6899e17551930.png\" alt=\"åå…­è¿›åˆ¶æ•°\"></li>\n</ul>\n</li>\n<li>å…«è¿›åˆ¶æ•°ï¼š0o023657<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/a65a14040f2a483733b92a78ca7cb76956176.png\" alt=\"å…«è¿›åˆ¶æ•°\"></li>\n</ul>\n</li>\n<li>äºŒè¿›åˆ¶æ•°ï¼š 0b01010111<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/33e2f75a6f02ec627a4aa16f56c9d59251733.png\" alt=\"äºŒè¿›åˆ¶æ•°\"></li>\n</ul>\n</li>\n<li>æµ®ç‚¹æ•°ï¼š.2373736<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/facf9ed43fe79a6e05525c9597f1014054052.png\" alt=\"æµ®ç‚¹æ•°\"></li>\n</ul>\n</li>\n<li>IEEE 754ï¼š1.2e+32<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/28058fac862347153c3d605fbb37272952996.png\" alt=\"IEEE 754\"></li>\n</ul>\n</li>\n<li>ç‰¹æ®Šæƒ…å†µ .0<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5d38329b0247e224ac893957ae24e9a150951.png\" alt=\"ç‰¹æ®Šæƒ…å†µ\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Realm","date":"2020-05-08T01:45:15.000Z","description":["Javascript -- Realm"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n\n- Before it is evaluated, all ECMAScript code must be associated with a realm. Conceptually, a realm consists of a set of intrinsic objects, an ECMAScript global environment, all of the ECMAScript code that is loaded within the scope of that global environment, and other associated state and resources.\n\n<!-- more -->\n\n- ä»é€»è¾‘ä¸Šè®²ï¼Œå †æ ˆä¸­çš„æ¯ä¸ªä¸Šä¸‹æ–‡æ€»æ˜¯ä¸å…¶ realm ç›¸å…³è”\n\t- è®©æˆ‘ä»¬çœ‹çœ‹å•ç‹¬çš„realmçš„ä¾‹å­ï¼Œä½¿ç”¨vmæ¨¡å—ï¼š\n\t\n\t\t```javascript\n\t\tconst vm = require('vm');\n\t\t\n\t\t// First realm, and its global:\n\t\tconst realm1 = vm.createContext({x: 10, console});\n\t\t\n\t\t// Second realm, and its global:\n\t\tconst realm2 = vm.createContext({x: 20, console});\n\t\t\n\t\t// Code to execute:\n\t\tconst code = `console.log(x);`;\n\t\t\n\t\tvm.runInContext(code, realm1); // 10\n\t\tvm.runInContext(code, realm2); // 20\n\t\t```\n\t- ![realm](http://p0.meituan.net/myvideodistribute/5055c18e52edec4cd447d7acfd4a8278158263.png)\n\n\n## å®è·µè®°å½•\n\n- JavaScript ä¸­æ‰€æœ‰çš„å›ºæœ‰å¯¹è±¡\n\n\t```javascript\n\t\n\n    let objects = [\n      \"eval\",\n      \"isFinite\",\n      \"isNaN\",\n      \"parseFloat\",\n      \"parseInt\",\n      \"decodeURI\",\n      \"decodeURIComponent\",\n      \"encodeURI\",\n      \"encodeURIComponent\",\n      \"Array\",\n      \"Date\",\n      \"RegExp\",\n      \"Promise\",\n      \"Proxy\",\n      \"Map\",\n      \"WeakMap\",\n      \"Set\",\n      \"WeakSet\",\n      \"Function\",\n      \"Boolean\",\n      \"String\",\n      \"Number\",\n      \"Symbol\",\n      \"Object\",\n      \"Error\",\n      \"EvalError\",\n      \"RangeError\",\n      \"ReferenceError\",\n      \"SyntaxError\",\n      \"TypeError\",\n      \"URIError\",\n      \"ArrayBuffer\",\n      \"SharedArrayBuffer\",\n      \"DataView\",\n      \"Float32Array\",\n      \"Float64Array\",\n      \"Int8Array\",\n      \"Int16Array\",\n      \"Int32Array\",\n      \"Uint8Array\",\n      \"Uint16Array\",\n      \"Uint32Array\",\n      \"Uint8ClampedArray\",\n      \"Atomics\",\n      \"JSON\",\n      \"Math\",\n      \"Reflect\"\n    ];\n\n    const set = new Set();\n\n    const globalObject = []\n\n    for (let i of objects) {\n      globalObject.push({\n        object: this[i],\n        path: [i]\n      })\n    }\n\n    while (globalObject.length) {\n      const current = globalObject.shift()\n      console.log(current.path.join('.'))\n      if (set.has(current.object))\n        continue;\n      set.add(current.object)\n\n\n\n      let proto = Object.getPrototypeOf(current.object)\n      if (proto) {\n        globalObject.push({\n          path: current.path.concat([\"__proto__\"]),\n          object: proto\n        })\n      }\n\n      for (let p of Object.getOwnPropertyNames(current.object)) {\n        let d = Object.getOwnPropertyDescriptor(current.object, p)\n        if (d.hasOwnProperty(\"value\") && ((d.value !== null && typeof d.value === \"object\") || (typeof d.value === \"function\")) && d.value instanceof Object) {\n          globalObject.push({\n            path: current.path.concat([p]),\n            object: d.value\n          })\n        }\n        if (d.hasOwnProperty(\"get\") && typeof d.get === \"function\") {\n          globalObject.push({\n            path: current.path.concat([p]),\n            object: d.get\n          })\n        }\n        if (d.hasOwnProperty(\"set\") && typeof d.set === \"function\") {\n          globalObject.push({\n            path: current.path.concat([p]),\n            object: d.set\n          })\n        }\n      }\n    }\n\t```\n\t\n- æ ¹æ®ä¸Šè¿°ä»£ç ï¼Œè¿›è¡Œæ•°æ®ç»“æ„æ–¹é¢çš„æ ¼å¼åŒ–\n\t\n\t```javascript\n\t\n    const objects = [\n      \"eval\",\n      \"isFinite\",\n      \"isNaN\",\n      \"parseFloat\",\n      \"parseInt\",\n      \"decodeURI\",\n      \"decodeURIComponent\",\n      \"encodeURI\",\n      \"encodeURIComponent\",\n      \"Array\",\n      \"Date\",\n      \"RegExp\",\n      \"Promise\",\n      \"Proxy\",\n      \"Map\",\n      \"WeakMap\",\n      \"Set\",\n      \"WeakSet\",\n      \"Function\",\n      \"Boolean\",\n      \"String\",\n      \"Number\",\n      \"Symbol\",\n      \"Object\",\n      \"Error\",\n      \"EvalError\",\n      \"RangeError\",\n      \"ReferenceError\",\n      \"SyntaxError\",\n      \"TypeError\",\n      \"URIError\",\n      \"ArrayBuffer\",\n      \"SharedArrayBuffer\",\n      \"DataView\",\n      \"Float32Array\",\n      \"Float64Array\",\n      \"Int8Array\",\n      \"Int16Array\",\n      \"Int32Array\",\n      \"Uint8Array\",\n      \"Uint16Array\",\n      \"Uint32Array\",\n      \"Uint8ClampedArray\",\n      \"Atomics\",\n      \"JSON\",\n      \"Math\",\n      \"Reflect\"\n    ];\n\n    const set = new Set();\n\n    const globalObject = {\n      id: \"Global Object\",\n      children: [\n\n      ]\n    }\n\n    for (let i of objects) {\n      globalObject.children.push({\n        children: [],\n        id: i\n      })\n    }\n\n\n    for (let i = 0; i < objects.length; i++) {\n      const current = objects[i]\n      if (set.has(objects[i]))\n        continue;\n      set.add(objects[i])\n      for (let p of Object.getOwnPropertyNames(window[objects[i]])) {\n        let d = Object.getOwnPropertyDescriptor(window[objects[i]], p)\n        if (d.hasOwnProperty(\"value\") && ((d.value !== null && typeof d.value === \"object\") || (typeof d.value === \"function\")) && d.value instanceof Object) {\n          let childrenThird = []\n          for (let k of Object.getOwnPropertyNames(d.value)) {\n            if (k !== 'name' && k !== 'length') {\n              childrenThird.push({ id: k })\n            }\n          }\n          globalObject[\"children\"][i].children.push({\n            children: childrenThird,\n            id: p\n          })\n        }\n        if (d.hasOwnProperty(\"get\") && typeof d.get === \"function\") {\n          let childrenThird = []\n          for (let k of Object.getOwnPropertyNames(d.get)) {\n            if (k !== 'name' && k !== 'length') {\n              childrenThird.push({ id: k })\n            }\n          }\n          globalObject[\"children\"][i].children.push({\n            children: childrenThird,\n            id: p\n          })\n        }\n        if (d.hasOwnProperty(\"set\") && typeof d.set === \"function\") {\n          let childrenThird = []\n          for (let k of Object.getOwnPropertyNames(d.set)) {\n            if (k !== 'name' && k !== 'length') {\n              childrenThird.push({ id: k })\n            }\n          }\n          globalObject[\"children\"][i].children.push({\n            children: childrenThird,\n            id: p\n          })\n        }\n      }\n    }\n\t```\n\n  - å¤„ç†å¥½çš„JSONæ•°æ®  \n\n\t    ```javascrtipt\n\t    {\"id\":\"Global Object\",\"children\":[{\"children\":[],\"id\":\"eval\"},{\"children\":[],\"id\":\"isFinite\"},{\"children\":[],\"id\":\"isNaN\"},{\"children\":[],\"id\":\"parseFloat\"},{\"children\":[],\"id\":\"parseInt\"},{\"children\":[],\"id\":\"decodeURI\"},{\"children\":[],\"id\":\"decodeURIComponent\"},{\"children\":[],\"id\":\"encodeURI\"},{\"children\":[],\"id\":\"encodeURIComponent\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"concat\"},{\"id\":\"copyWithin\"},{\"id\":\"fill\"},{\"id\":\"find\"},{\"id\":\"findIndex\"},{\"id\":\"lastIndexOf\"},{\"id\":\"pop\"},{\"id\":\"push\"},{\"id\":\"reverse\"},{\"id\":\"shift\"},{\"id\":\"unshift\"},{\"id\":\"slice\"},{\"id\":\"sort\"},{\"id\":\"splice\"},{\"id\":\"includes\"},{\"id\":\"indexOf\"},{\"id\":\"join\"},{\"id\":\"keys\"},{\"id\":\"entries\"},{\"id\":\"values\"},{\"id\":\"forEach\"},{\"id\":\"filter\"},{\"id\":\"flat\"},{\"id\":\"flatMap\"},{\"id\":\"map\"},{\"id\":\"every\"},{\"id\":\"some\"},{\"id\":\"reduce\"},{\"id\":\"reduceRight\"},{\"id\":\"toLocaleString\"},{\"id\":\"toString\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"isArray\"},{\"children\":[],\"id\":\"from\"},{\"children\":[],\"id\":\"of\"}],\"id\":\"Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"toString\"},{\"id\":\"toDateString\"},{\"id\":\"toTimeString\"},{\"id\":\"toISOString\"},{\"id\":\"toUTCString\"},{\"id\":\"toGMTString\"},{\"id\":\"getDate\"},{\"id\":\"setDate\"},{\"id\":\"getDay\"},{\"id\":\"getFullYear\"},{\"id\":\"setFullYear\"},{\"id\":\"getHours\"},{\"id\":\"setHours\"},{\"id\":\"getMilliseconds\"},{\"id\":\"setMilliseconds\"},{\"id\":\"getMinutes\"},{\"id\":\"setMinutes\"},{\"id\":\"getMonth\"},{\"id\":\"setMonth\"},{\"id\":\"getSeconds\"},{\"id\":\"setSeconds\"},{\"id\":\"getTime\"},{\"id\":\"setTime\"},{\"id\":\"getTimezoneOffset\"},{\"id\":\"getUTCDate\"},{\"id\":\"setUTCDate\"},{\"id\":\"getUTCDay\"},{\"id\":\"getUTCFullYear\"},{\"id\":\"setUTCFullYear\"},{\"id\":\"getUTCHours\"},{\"id\":\"setUTCHours\"},{\"id\":\"getUTCMilliseconds\"},{\"id\":\"setUTCMilliseconds\"},{\"id\":\"getUTCMinutes\"},{\"id\":\"setUTCMinutes\"},{\"id\":\"getUTCMonth\"},{\"id\":\"setUTCMonth\"},{\"id\":\"getUTCSeconds\"},{\"id\":\"setUTCSeconds\"},{\"id\":\"valueOf\"},{\"id\":\"getYear\"},{\"id\":\"setYear\"},{\"id\":\"toJSON\"},{\"id\":\"toLocaleString\"},{\"id\":\"toLocaleDateString\"},{\"id\":\"toLocaleTimeString\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"now\"},{\"children\":[],\"id\":\"parse\"},{\"children\":[],\"id\":\"UTC\"}],\"id\":\"Date\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"exec\"},{\"id\":\"dotAll\"},{\"id\":\"flags\"},{\"id\":\"global\"},{\"id\":\"ignoreCase\"},{\"id\":\"multiline\"},{\"id\":\"source\"},{\"id\":\"sticky\"},{\"id\":\"unicode\"},{\"id\":\"compile\"},{\"id\":\"toString\"},{\"id\":\"test\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"input\"},{\"children\":[],\"id\":\"input\"},{\"children\":[],\"id\":\"$_\"},{\"children\":[],\"id\":\"$_\"},{\"children\":[],\"id\":\"lastMatch\"},{\"children\":[],\"id\":\"lastMatch\"},{\"children\":[],\"id\":\"$&\"},{\"children\":[],\"id\":\"$&\"},{\"children\":[],\"id\":\"lastParen\"},{\"children\":[],\"id\":\"lastParen\"},{\"children\":[],\"id\":\"$+\"},{\"children\":[],\"id\":\"$+\"},{\"children\":[],\"id\":\"leftContext\"},{\"children\":[],\"id\":\"leftContext\"},{\"children\":[],\"id\":\"$`\"},{\"children\":[],\"id\":\"$`\"},{\"children\":[],\"id\":\"rightContext\"},{\"children\":[],\"id\":\"rightContext\"},{\"children\":[],\"id\":\"$'\"},{\"children\":[],\"id\":\"$'\"},{\"children\":[],\"id\":\"$1\"},{\"children\":[],\"id\":\"$1\"},{\"children\":[],\"id\":\"$2\"},{\"children\":[],\"id\":\"$2\"},{\"children\":[],\"id\":\"$3\"},{\"children\":[],\"id\":\"$3\"},{\"children\":[],\"id\":\"$4\"},{\"children\":[],\"id\":\"$4\"},{\"children\":[],\"id\":\"$5\"},{\"children\":[],\"id\":\"$5\"},{\"children\":[],\"id\":\"$6\"},{\"children\":[],\"id\":\"$6\"},{\"children\":[],\"id\":\"$7\"},{\"children\":[],\"id\":\"$7\"},{\"children\":[],\"id\":\"$8\"},{\"children\":[],\"id\":\"$8\"},{\"children\":[],\"id\":\"$9\"},{\"children\":[],\"id\":\"$9\"}],\"id\":\"RegExp\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"then\"},{\"id\":\"catch\"},{\"id\":\"finally\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"all\"},{\"children\":[],\"id\":\"race\"},{\"children\":[],\"id\":\"resolve\"},{\"children\":[],\"id\":\"reject\"},{\"children\":[],\"id\":\"allSettled\"}],\"id\":\"Promise\"},{\"children\":[{\"children\":[],\"id\":\"revocable\"}],\"id\":\"Proxy\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"get\"},{\"id\":\"set\"},{\"id\":\"has\"},{\"id\":\"delete\"},{\"id\":\"clear\"},{\"id\":\"entries\"},{\"id\":\"forEach\"},{\"id\":\"keys\"},{\"id\":\"size\"},{\"id\":\"values\"}],\"id\":\"prototype\"}],\"id\":\"Map\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"delete\"},{\"id\":\"get\"},{\"id\":\"set\"},{\"id\":\"has\"}],\"id\":\"prototype\"}],\"id\":\"WeakMap\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"has\"},{\"id\":\"add\"},{\"id\":\"delete\"},{\"id\":\"clear\"},{\"id\":\"entries\"},{\"id\":\"forEach\"},{\"id\":\"size\"},{\"id\":\"values\"},{\"id\":\"keys\"}],\"id\":\"prototype\"}],\"id\":\"Set\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"delete\"},{\"id\":\"has\"},{\"id\":\"add\"}],\"id\":\"prototype\"}],\"id\":\"WeakSet\"},{\"children\":[{\"children\":[{\"id\":\"arguments\"},{\"id\":\"caller\"},{\"id\":\"constructor\"},{\"id\":\"apply\"},{\"id\":\"bind\"},{\"id\":\"call\"},{\"id\":\"toString\"}],\"id\":\"prototype\"}],\"id\":\"Function\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"toString\"},{\"id\":\"valueOf\"}],\"id\":\"prototype\"}],\"id\":\"Boolean\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"anchor\"},{\"id\":\"big\"},{\"id\":\"blink\"},{\"id\":\"bold\"},{\"id\":\"charAt\"},{\"id\":\"charCodeAt\"},{\"id\":\"codePointAt\"},{\"id\":\"concat\"},{\"id\":\"endsWith\"},{\"id\":\"fontcolor\"},{\"id\":\"fontsize\"},{\"id\":\"fixed\"},{\"id\":\"includes\"},{\"id\":\"indexOf\"},{\"id\":\"italics\"},{\"id\":\"lastIndexOf\"},{\"id\":\"link\"},{\"id\":\"localeCompare\"},{\"id\":\"match\"},{\"id\":\"matchAll\"},{\"id\":\"normalize\"},{\"id\":\"padEnd\"},{\"id\":\"padStart\"},{\"id\":\"repeat\"},{\"id\":\"replace\"},{\"id\":\"search\"},{\"id\":\"slice\"},{\"id\":\"small\"},{\"id\":\"split\"},{\"id\":\"strike\"},{\"id\":\"sub\"},{\"id\":\"substr\"},{\"id\":\"substring\"},{\"id\":\"sup\"},{\"id\":\"startsWith\"},{\"id\":\"toString\"},{\"id\":\"trim\"},{\"id\":\"trimStart\"},{\"id\":\"trimLeft\"},{\"id\":\"trimEnd\"},{\"id\":\"trimRight\"},{\"id\":\"toLocaleLowerCase\"},{\"id\":\"toLocaleUpperCase\"},{\"id\":\"toLowerCase\"},{\"id\":\"toUpperCase\"},{\"id\":\"valueOf\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"fromCharCode\"},{\"children\":[],\"id\":\"fromCodePoint\"},{\"children\":[],\"id\":\"raw\"}],\"id\":\"String\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"toExponential\"},{\"id\":\"toFixed\"},{\"id\":\"toPrecision\"},{\"id\":\"toString\"},{\"id\":\"valueOf\"},{\"id\":\"toLocaleString\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"isFinite\"},{\"children\":[],\"id\":\"isInteger\"},{\"children\":[],\"id\":\"isNaN\"},{\"children\":[],\"id\":\"isSafeInteger\"},{\"children\":[],\"id\":\"parseFloat\"},{\"children\":[],\"id\":\"parseInt\"}],\"id\":\"Number\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"toString\"},{\"id\":\"valueOf\"},{\"id\":\"description\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"for\"},{\"children\":[],\"id\":\"keyFor\"}],\"id\":\"Symbol\"},{\"children\":[{\"children\":[],\"id\":\"assign\"},{\"children\":[],\"id\":\"getOwnPropertyDescriptor\"},{\"children\":[],\"id\":\"getOwnPropertyDescriptors\"},{\"children\":[],\"id\":\"getOwnPropertyNames\"},{\"children\":[],\"id\":\"getOwnPropertySymbols\"},{\"children\":[],\"id\":\"is\"},{\"children\":[],\"id\":\"preventExtensions\"},{\"children\":[],\"id\":\"seal\"},{\"children\":[],\"id\":\"create\"},{\"children\":[],\"id\":\"defineProperties\"},{\"children\":[],\"id\":\"defineProperty\"},{\"children\":[],\"id\":\"freeze\"},{\"children\":[],\"id\":\"getPrototypeOf\"},{\"children\":[],\"id\":\"setPrototypeOf\"},{\"children\":[],\"id\":\"isExtensible\"},{\"children\":[],\"id\":\"isFrozen\"},{\"children\":[],\"id\":\"isSealed\"},{\"children\":[],\"id\":\"keys\"},{\"children\":[],\"id\":\"entries\"},{\"children\":[],\"id\":\"fromEntries\"},{\"children\":[],\"id\":\"values\"}],\"id\":\"Object\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"},{\"id\":\"toString\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"captureStackTrace\"}],\"id\":\"Error\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"}],\"id\":\"prototype\"}],\"id\":\"EvalError\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"}],\"id\":\"prototype\"}],\"id\":\"RangeError\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"}],\"id\":\"prototype\"}],\"id\":\"ReferenceError\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"}],\"id\":\"prototype\"}],\"id\":\"SyntaxError\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"}],\"id\":\"prototype\"}],\"id\":\"TypeError\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"}],\"id\":\"prototype\"}],\"id\":\"URIError\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"byteLength\"},{\"id\":\"slice\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"isView\"}],\"id\":\"ArrayBuffer\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"byteLength\"},{\"id\":\"slice\"}],\"id\":\"prototype\"}],\"id\":\"SharedArrayBuffer\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"buffer\"},{\"id\":\"byteLength\"},{\"id\":\"byteOffset\"},{\"id\":\"getInt8\"},{\"id\":\"setInt8\"},{\"id\":\"getUint8\"},{\"id\":\"setUint8\"},{\"id\":\"getInt16\"},{\"id\":\"setInt16\"},{\"id\":\"getUint16\"},{\"id\":\"setUint16\"},{\"id\":\"getInt32\"},{\"id\":\"setInt32\"},{\"id\":\"getUint32\"},{\"id\":\"setUint32\"},{\"id\":\"getFloat32\"},{\"id\":\"setFloat32\"},{\"id\":\"getFloat64\"},{\"id\":\"setFloat64\"},{\"id\":\"getBigInt64\"},{\"id\":\"setBigInt64\"},{\"id\":\"getBigUint64\"},{\"id\":\"setBigUint64\"}],\"id\":\"prototype\"}],\"id\":\"DataView\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Float32Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Float64Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Int8Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Int16Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Int32Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Uint8Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Uint16Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Uint32Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Uint8ClampedArray\"},{\"children\":[{\"children\":[],\"id\":\"load\"},{\"children\":[],\"id\":\"store\"},{\"children\":[],\"id\":\"add\"},{\"children\":[],\"id\":\"sub\"},{\"children\":[],\"id\":\"and\"},{\"children\":[],\"id\":\"or\"},{\"children\":[],\"id\":\"xor\"},{\"children\":[],\"id\":\"exchange\"},{\"children\":[],\"id\":\"compareExchange\"},{\"children\":[],\"id\":\"isLockFree\"},{\"children\":[],\"id\":\"wait\"},{\"children\":[],\"id\":\"wake\"},{\"children\":[],\"id\":\"notify\"}],\"id\":\"Atomics\"},{\"children\":[{\"children\":[],\"id\":\"parse\"},{\"children\":[],\"id\":\"stringify\"}],\"id\":\"JSON\"},{\"children\":[{\"children\":[],\"id\":\"abs\"},{\"children\":[],\"id\":\"acos\"},{\"children\":[],\"id\":\"acosh\"},{\"children\":[],\"id\":\"asin\"},{\"children\":[],\"id\":\"asinh\"},{\"children\":[],\"id\":\"atan\"},{\"children\":[],\"id\":\"atanh\"},{\"children\":[],\"id\":\"atan2\"},{\"children\":[],\"id\":\"ceil\"},{\"children\":[],\"id\":\"cbrt\"},{\"children\":[],\"id\":\"expm1\"},{\"children\":[],\"id\":\"clz32\"},{\"children\":[],\"id\":\"cos\"},{\"children\":[],\"id\":\"cosh\"},{\"children\":[],\"id\":\"exp\"},{\"children\":[],\"id\":\"floor\"},{\"children\":[],\"id\":\"fround\"},{\"children\":[],\"id\":\"hypot\"},{\"children\":[],\"id\":\"imul\"},{\"children\":[],\"id\":\"log\"},{\"children\":[],\"id\":\"log1p\"},{\"children\":[],\"id\":\"log2\"},{\"children\":[],\"id\":\"log10\"},{\"children\":[],\"id\":\"max\"},{\"children\":[],\"id\":\"min\"},{\"children\":[],\"id\":\"pow\"},{\"children\":[],\"id\":\"random\"},{\"children\":[],\"id\":\"round\"},{\"children\":[],\"id\":\"sign\"},{\"children\":[],\"id\":\"sin\"},{\"children\":[],\"id\":\"sinh\"},{\"children\":[],\"id\":\"sqrt\"},{\"children\":[],\"id\":\"tan\"},{\"children\":[],\"id\":\"tanh\"},{\"children\":[],\"id\":\"trunc\"}],\"id\":\"Math\"},{\"children\":[{\"children\":[],\"id\":\"defineProperty\"},{\"children\":[],\"id\":\"deleteProperty\"},{\"children\":[],\"id\":\"apply\"},{\"children\":[],\"id\":\"construct\"},{\"children\":[],\"id\":\"get\"},{\"children\":[],\"id\":\"getOwnPropertyDescriptor\"},{\"children\":[],\"id\":\"getPrototypeOf\"},{\"children\":[],\"id\":\"has\"},{\"children\":[],\"id\":\"isExtensible\"},{\"children\":[],\"id\":\"ownKeys\"},{\"children\":[],\"id\":\"preventExtensions\"},{\"children\":[],\"id\":\"set\"},{\"children\":[],\"id\":\"setPrototypeOf\"}],\"id\":\"Reflect\"}]}\n\t    ```\n\t\n- ç»˜åˆ¶ G6 Tree Graph\n\t- éœ€è¦åœ¨ HTML ä¸­åˆ›å»ºä¸€ä¸ªç”¨äºå®¹çº³ G6 ç»˜åˆ¶çš„å›¾çš„å®¹å™¨ï¼Œé€šå¸¸ä¸º div  æ ‡ç­¾ã€‚G6 åœ¨ç»˜åˆ¶æ—¶ä¼šåœ¨è¯¥å®¹å™¨ä¸‹è¿½åŠ  canvas æ ‡ç­¾ï¼Œç„¶åå°†å›¾ç»˜åˆ¶åœ¨å…¶ä¸­ã€‚\n\t\t\n\t\t```javascript\n\t\t<div id=\"container\" />\n\t\t```\n\t- å¼•å…¥ G6 çš„æ•°æ®æºä¸º JSON æ ¼å¼çš„å¯¹è±¡ã€‚å³ä¸Šé¢æˆ‘ä»¬å¤„ç†è¿‡çš„ globalObject\n\t- åˆ›å»ºå…³ç³»å›¾ï¼ˆå®ä¾‹åŒ–ï¼‰æ—¶ï¼Œè‡³å°‘éœ€è¦ä¸ºå›¾è®¾ç½®å®¹å™¨ã€å®½å’Œé«˜ã€‚\n\t\t\n\t\t```javascript\n\t\t\n\t    const width = window.devicePixelRatio * window.screen.width * 0.5; // é«˜æ¸…æ˜¾ç¤º\n\t    const height = window.devicePixelRatio * window.screen.height;\n\t    const graph = new G6.TreeGraph({\n\t      container: 'container',\n\t      width,\n\t      height,\n\t      modes: {\n\t        default: [\n\t          {\n\t            type: 'collapse-expand',\n\t            onChange: function onChange(item, collapsed) {\n\t              const data = item.get('model').data;\n\t              data.collapsed = collapsed;\n\t              return true;\n\t            },\n\t          },\n\t          'drag-canvas',\n\t          'zoom-canvas',\n\t        ],\n\t      },\n\t      defaultNode: {\n\t        size: 26,\n\t        anchorPoints: [\n\t          [0, 0.5],\n\t          [1, 0.5],\n\t        ],\n\t        style: {\n\t          fill: '#C6E5FF',\n\t          stroke: '#5B8FF9',\n\t        },\n\t      },\n\t      defaultEdge: {\n\t        type: 'cubic-horizontal',\n\t        style: {\n\t          stroke: '#A3B1BF',\n\t        },\n\t      },\n\t      layout: {\n\t        type: 'compactBox',\n\t        direction: 'LR',\n\t        getId: function getId(d) {\n\t          return d.id;\n\t        },\n\t        getHeight: function getHeight() {\n\t          return 16;\n\t        },\n\t        getWidth: function getWidth() {\n\t          return 16;\n\t        },\n\t        getVGap: function getVGap() {\n\t          return 10;\n\t        },\n\t        getHGap: function getHGap() {\n\t          return 100;\n\t        },\n\t      },\n\t    });\n\t\t```\n\t\t\n\t- é…ç½®æ•°æ®æºï¼Œæ¸²æŸ“\n\t\t\n\t\t```javascript\n\t\tgraph.data(data);\n\t  graph.render();\n\t  graph.fitView();\n\t\t```\n\t\t\n- è¿è¡Œæˆªå›¾\n\t- ![g6](http://p0.meituan.net/myvideodistribute/348969f29ced9ddcebac4fce71a1de42543229.png)\n\n\n## å†™åœ¨åé¢\n- [å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/antv-g6-realm)\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","source":"_posts/Realm.md","raw":"---\ntitle: Realm\ndate: 2020-05-08 09:45:15\ntags:\n- å‰ç«¯æ¦‚å¿µ\ncategories:\n- å‰ç«¯æ¦‚å¿µ\ndescription:\n- Javascript -- Realm\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n\n- Before it is evaluated, all ECMAScript code must be associated with a realm. Conceptually, a realm consists of a set of intrinsic objects, an ECMAScript global environment, all of the ECMAScript code that is loaded within the scope of that global environment, and other associated state and resources.\n\n<!-- more -->\n\n- ä»é€»è¾‘ä¸Šè®²ï¼Œå †æ ˆä¸­çš„æ¯ä¸ªä¸Šä¸‹æ–‡æ€»æ˜¯ä¸å…¶ realm ç›¸å…³è”\n\t- è®©æˆ‘ä»¬çœ‹çœ‹å•ç‹¬çš„realmçš„ä¾‹å­ï¼Œä½¿ç”¨vmæ¨¡å—ï¼š\n\t\n\t\t```javascript\n\t\tconst vm = require('vm');\n\t\t\n\t\t// First realm, and its global:\n\t\tconst realm1 = vm.createContext({x: 10, console});\n\t\t\n\t\t// Second realm, and its global:\n\t\tconst realm2 = vm.createContext({x: 20, console});\n\t\t\n\t\t// Code to execute:\n\t\tconst code = `console.log(x);`;\n\t\t\n\t\tvm.runInContext(code, realm1); // 10\n\t\tvm.runInContext(code, realm2); // 20\n\t\t```\n\t- ![realm](http://p0.meituan.net/myvideodistribute/5055c18e52edec4cd447d7acfd4a8278158263.png)\n\n\n## å®è·µè®°å½•\n\n- JavaScript ä¸­æ‰€æœ‰çš„å›ºæœ‰å¯¹è±¡\n\n\t```javascript\n\t\n\n    let objects = [\n      \"eval\",\n      \"isFinite\",\n      \"isNaN\",\n      \"parseFloat\",\n      \"parseInt\",\n      \"decodeURI\",\n      \"decodeURIComponent\",\n      \"encodeURI\",\n      \"encodeURIComponent\",\n      \"Array\",\n      \"Date\",\n      \"RegExp\",\n      \"Promise\",\n      \"Proxy\",\n      \"Map\",\n      \"WeakMap\",\n      \"Set\",\n      \"WeakSet\",\n      \"Function\",\n      \"Boolean\",\n      \"String\",\n      \"Number\",\n      \"Symbol\",\n      \"Object\",\n      \"Error\",\n      \"EvalError\",\n      \"RangeError\",\n      \"ReferenceError\",\n      \"SyntaxError\",\n      \"TypeError\",\n      \"URIError\",\n      \"ArrayBuffer\",\n      \"SharedArrayBuffer\",\n      \"DataView\",\n      \"Float32Array\",\n      \"Float64Array\",\n      \"Int8Array\",\n      \"Int16Array\",\n      \"Int32Array\",\n      \"Uint8Array\",\n      \"Uint16Array\",\n      \"Uint32Array\",\n      \"Uint8ClampedArray\",\n      \"Atomics\",\n      \"JSON\",\n      \"Math\",\n      \"Reflect\"\n    ];\n\n    const set = new Set();\n\n    const globalObject = []\n\n    for (let i of objects) {\n      globalObject.push({\n        object: this[i],\n        path: [i]\n      })\n    }\n\n    while (globalObject.length) {\n      const current = globalObject.shift()\n      console.log(current.path.join('.'))\n      if (set.has(current.object))\n        continue;\n      set.add(current.object)\n\n\n\n      let proto = Object.getPrototypeOf(current.object)\n      if (proto) {\n        globalObject.push({\n          path: current.path.concat([\"__proto__\"]),\n          object: proto\n        })\n      }\n\n      for (let p of Object.getOwnPropertyNames(current.object)) {\n        let d = Object.getOwnPropertyDescriptor(current.object, p)\n        if (d.hasOwnProperty(\"value\") && ((d.value !== null && typeof d.value === \"object\") || (typeof d.value === \"function\")) && d.value instanceof Object) {\n          globalObject.push({\n            path: current.path.concat([p]),\n            object: d.value\n          })\n        }\n        if (d.hasOwnProperty(\"get\") && typeof d.get === \"function\") {\n          globalObject.push({\n            path: current.path.concat([p]),\n            object: d.get\n          })\n        }\n        if (d.hasOwnProperty(\"set\") && typeof d.set === \"function\") {\n          globalObject.push({\n            path: current.path.concat([p]),\n            object: d.set\n          })\n        }\n      }\n    }\n\t```\n\t\n- æ ¹æ®ä¸Šè¿°ä»£ç ï¼Œè¿›è¡Œæ•°æ®ç»“æ„æ–¹é¢çš„æ ¼å¼åŒ–\n\t\n\t```javascript\n\t\n    const objects = [\n      \"eval\",\n      \"isFinite\",\n      \"isNaN\",\n      \"parseFloat\",\n      \"parseInt\",\n      \"decodeURI\",\n      \"decodeURIComponent\",\n      \"encodeURI\",\n      \"encodeURIComponent\",\n      \"Array\",\n      \"Date\",\n      \"RegExp\",\n      \"Promise\",\n      \"Proxy\",\n      \"Map\",\n      \"WeakMap\",\n      \"Set\",\n      \"WeakSet\",\n      \"Function\",\n      \"Boolean\",\n      \"String\",\n      \"Number\",\n      \"Symbol\",\n      \"Object\",\n      \"Error\",\n      \"EvalError\",\n      \"RangeError\",\n      \"ReferenceError\",\n      \"SyntaxError\",\n      \"TypeError\",\n      \"URIError\",\n      \"ArrayBuffer\",\n      \"SharedArrayBuffer\",\n      \"DataView\",\n      \"Float32Array\",\n      \"Float64Array\",\n      \"Int8Array\",\n      \"Int16Array\",\n      \"Int32Array\",\n      \"Uint8Array\",\n      \"Uint16Array\",\n      \"Uint32Array\",\n      \"Uint8ClampedArray\",\n      \"Atomics\",\n      \"JSON\",\n      \"Math\",\n      \"Reflect\"\n    ];\n\n    const set = new Set();\n\n    const globalObject = {\n      id: \"Global Object\",\n      children: [\n\n      ]\n    }\n\n    for (let i of objects) {\n      globalObject.children.push({\n        children: [],\n        id: i\n      })\n    }\n\n\n    for (let i = 0; i < objects.length; i++) {\n      const current = objects[i]\n      if (set.has(objects[i]))\n        continue;\n      set.add(objects[i])\n      for (let p of Object.getOwnPropertyNames(window[objects[i]])) {\n        let d = Object.getOwnPropertyDescriptor(window[objects[i]], p)\n        if (d.hasOwnProperty(\"value\") && ((d.value !== null && typeof d.value === \"object\") || (typeof d.value === \"function\")) && d.value instanceof Object) {\n          let childrenThird = []\n          for (let k of Object.getOwnPropertyNames(d.value)) {\n            if (k !== 'name' && k !== 'length') {\n              childrenThird.push({ id: k })\n            }\n          }\n          globalObject[\"children\"][i].children.push({\n            children: childrenThird,\n            id: p\n          })\n        }\n        if (d.hasOwnProperty(\"get\") && typeof d.get === \"function\") {\n          let childrenThird = []\n          for (let k of Object.getOwnPropertyNames(d.get)) {\n            if (k !== 'name' && k !== 'length') {\n              childrenThird.push({ id: k })\n            }\n          }\n          globalObject[\"children\"][i].children.push({\n            children: childrenThird,\n            id: p\n          })\n        }\n        if (d.hasOwnProperty(\"set\") && typeof d.set === \"function\") {\n          let childrenThird = []\n          for (let k of Object.getOwnPropertyNames(d.set)) {\n            if (k !== 'name' && k !== 'length') {\n              childrenThird.push({ id: k })\n            }\n          }\n          globalObject[\"children\"][i].children.push({\n            children: childrenThird,\n            id: p\n          })\n        }\n      }\n    }\n\t```\n\n  - å¤„ç†å¥½çš„JSONæ•°æ®  \n\n\t    ```javascrtipt\n\t    {\"id\":\"Global Object\",\"children\":[{\"children\":[],\"id\":\"eval\"},{\"children\":[],\"id\":\"isFinite\"},{\"children\":[],\"id\":\"isNaN\"},{\"children\":[],\"id\":\"parseFloat\"},{\"children\":[],\"id\":\"parseInt\"},{\"children\":[],\"id\":\"decodeURI\"},{\"children\":[],\"id\":\"decodeURIComponent\"},{\"children\":[],\"id\":\"encodeURI\"},{\"children\":[],\"id\":\"encodeURIComponent\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"concat\"},{\"id\":\"copyWithin\"},{\"id\":\"fill\"},{\"id\":\"find\"},{\"id\":\"findIndex\"},{\"id\":\"lastIndexOf\"},{\"id\":\"pop\"},{\"id\":\"push\"},{\"id\":\"reverse\"},{\"id\":\"shift\"},{\"id\":\"unshift\"},{\"id\":\"slice\"},{\"id\":\"sort\"},{\"id\":\"splice\"},{\"id\":\"includes\"},{\"id\":\"indexOf\"},{\"id\":\"join\"},{\"id\":\"keys\"},{\"id\":\"entries\"},{\"id\":\"values\"},{\"id\":\"forEach\"},{\"id\":\"filter\"},{\"id\":\"flat\"},{\"id\":\"flatMap\"},{\"id\":\"map\"},{\"id\":\"every\"},{\"id\":\"some\"},{\"id\":\"reduce\"},{\"id\":\"reduceRight\"},{\"id\":\"toLocaleString\"},{\"id\":\"toString\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"isArray\"},{\"children\":[],\"id\":\"from\"},{\"children\":[],\"id\":\"of\"}],\"id\":\"Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"toString\"},{\"id\":\"toDateString\"},{\"id\":\"toTimeString\"},{\"id\":\"toISOString\"},{\"id\":\"toUTCString\"},{\"id\":\"toGMTString\"},{\"id\":\"getDate\"},{\"id\":\"setDate\"},{\"id\":\"getDay\"},{\"id\":\"getFullYear\"},{\"id\":\"setFullYear\"},{\"id\":\"getHours\"},{\"id\":\"setHours\"},{\"id\":\"getMilliseconds\"},{\"id\":\"setMilliseconds\"},{\"id\":\"getMinutes\"},{\"id\":\"setMinutes\"},{\"id\":\"getMonth\"},{\"id\":\"setMonth\"},{\"id\":\"getSeconds\"},{\"id\":\"setSeconds\"},{\"id\":\"getTime\"},{\"id\":\"setTime\"},{\"id\":\"getTimezoneOffset\"},{\"id\":\"getUTCDate\"},{\"id\":\"setUTCDate\"},{\"id\":\"getUTCDay\"},{\"id\":\"getUTCFullYear\"},{\"id\":\"setUTCFullYear\"},{\"id\":\"getUTCHours\"},{\"id\":\"setUTCHours\"},{\"id\":\"getUTCMilliseconds\"},{\"id\":\"setUTCMilliseconds\"},{\"id\":\"getUTCMinutes\"},{\"id\":\"setUTCMinutes\"},{\"id\":\"getUTCMonth\"},{\"id\":\"setUTCMonth\"},{\"id\":\"getUTCSeconds\"},{\"id\":\"setUTCSeconds\"},{\"id\":\"valueOf\"},{\"id\":\"getYear\"},{\"id\":\"setYear\"},{\"id\":\"toJSON\"},{\"id\":\"toLocaleString\"},{\"id\":\"toLocaleDateString\"},{\"id\":\"toLocaleTimeString\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"now\"},{\"children\":[],\"id\":\"parse\"},{\"children\":[],\"id\":\"UTC\"}],\"id\":\"Date\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"exec\"},{\"id\":\"dotAll\"},{\"id\":\"flags\"},{\"id\":\"global\"},{\"id\":\"ignoreCase\"},{\"id\":\"multiline\"},{\"id\":\"source\"},{\"id\":\"sticky\"},{\"id\":\"unicode\"},{\"id\":\"compile\"},{\"id\":\"toString\"},{\"id\":\"test\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"input\"},{\"children\":[],\"id\":\"input\"},{\"children\":[],\"id\":\"$_\"},{\"children\":[],\"id\":\"$_\"},{\"children\":[],\"id\":\"lastMatch\"},{\"children\":[],\"id\":\"lastMatch\"},{\"children\":[],\"id\":\"$&\"},{\"children\":[],\"id\":\"$&\"},{\"children\":[],\"id\":\"lastParen\"},{\"children\":[],\"id\":\"lastParen\"},{\"children\":[],\"id\":\"$+\"},{\"children\":[],\"id\":\"$+\"},{\"children\":[],\"id\":\"leftContext\"},{\"children\":[],\"id\":\"leftContext\"},{\"children\":[],\"id\":\"$`\"},{\"children\":[],\"id\":\"$`\"},{\"children\":[],\"id\":\"rightContext\"},{\"children\":[],\"id\":\"rightContext\"},{\"children\":[],\"id\":\"$'\"},{\"children\":[],\"id\":\"$'\"},{\"children\":[],\"id\":\"$1\"},{\"children\":[],\"id\":\"$1\"},{\"children\":[],\"id\":\"$2\"},{\"children\":[],\"id\":\"$2\"},{\"children\":[],\"id\":\"$3\"},{\"children\":[],\"id\":\"$3\"},{\"children\":[],\"id\":\"$4\"},{\"children\":[],\"id\":\"$4\"},{\"children\":[],\"id\":\"$5\"},{\"children\":[],\"id\":\"$5\"},{\"children\":[],\"id\":\"$6\"},{\"children\":[],\"id\":\"$6\"},{\"children\":[],\"id\":\"$7\"},{\"children\":[],\"id\":\"$7\"},{\"children\":[],\"id\":\"$8\"},{\"children\":[],\"id\":\"$8\"},{\"children\":[],\"id\":\"$9\"},{\"children\":[],\"id\":\"$9\"}],\"id\":\"RegExp\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"then\"},{\"id\":\"catch\"},{\"id\":\"finally\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"all\"},{\"children\":[],\"id\":\"race\"},{\"children\":[],\"id\":\"resolve\"},{\"children\":[],\"id\":\"reject\"},{\"children\":[],\"id\":\"allSettled\"}],\"id\":\"Promise\"},{\"children\":[{\"children\":[],\"id\":\"revocable\"}],\"id\":\"Proxy\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"get\"},{\"id\":\"set\"},{\"id\":\"has\"},{\"id\":\"delete\"},{\"id\":\"clear\"},{\"id\":\"entries\"},{\"id\":\"forEach\"},{\"id\":\"keys\"},{\"id\":\"size\"},{\"id\":\"values\"}],\"id\":\"prototype\"}],\"id\":\"Map\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"delete\"},{\"id\":\"get\"},{\"id\":\"set\"},{\"id\":\"has\"}],\"id\":\"prototype\"}],\"id\":\"WeakMap\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"has\"},{\"id\":\"add\"},{\"id\":\"delete\"},{\"id\":\"clear\"},{\"id\":\"entries\"},{\"id\":\"forEach\"},{\"id\":\"size\"},{\"id\":\"values\"},{\"id\":\"keys\"}],\"id\":\"prototype\"}],\"id\":\"Set\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"delete\"},{\"id\":\"has\"},{\"id\":\"add\"}],\"id\":\"prototype\"}],\"id\":\"WeakSet\"},{\"children\":[{\"children\":[{\"id\":\"arguments\"},{\"id\":\"caller\"},{\"id\":\"constructor\"},{\"id\":\"apply\"},{\"id\":\"bind\"},{\"id\":\"call\"},{\"id\":\"toString\"}],\"id\":\"prototype\"}],\"id\":\"Function\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"toString\"},{\"id\":\"valueOf\"}],\"id\":\"prototype\"}],\"id\":\"Boolean\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"anchor\"},{\"id\":\"big\"},{\"id\":\"blink\"},{\"id\":\"bold\"},{\"id\":\"charAt\"},{\"id\":\"charCodeAt\"},{\"id\":\"codePointAt\"},{\"id\":\"concat\"},{\"id\":\"endsWith\"},{\"id\":\"fontcolor\"},{\"id\":\"fontsize\"},{\"id\":\"fixed\"},{\"id\":\"includes\"},{\"id\":\"indexOf\"},{\"id\":\"italics\"},{\"id\":\"lastIndexOf\"},{\"id\":\"link\"},{\"id\":\"localeCompare\"},{\"id\":\"match\"},{\"id\":\"matchAll\"},{\"id\":\"normalize\"},{\"id\":\"padEnd\"},{\"id\":\"padStart\"},{\"id\":\"repeat\"},{\"id\":\"replace\"},{\"id\":\"search\"},{\"id\":\"slice\"},{\"id\":\"small\"},{\"id\":\"split\"},{\"id\":\"strike\"},{\"id\":\"sub\"},{\"id\":\"substr\"},{\"id\":\"substring\"},{\"id\":\"sup\"},{\"id\":\"startsWith\"},{\"id\":\"toString\"},{\"id\":\"trim\"},{\"id\":\"trimStart\"},{\"id\":\"trimLeft\"},{\"id\":\"trimEnd\"},{\"id\":\"trimRight\"},{\"id\":\"toLocaleLowerCase\"},{\"id\":\"toLocaleUpperCase\"},{\"id\":\"toLowerCase\"},{\"id\":\"toUpperCase\"},{\"id\":\"valueOf\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"fromCharCode\"},{\"children\":[],\"id\":\"fromCodePoint\"},{\"children\":[],\"id\":\"raw\"}],\"id\":\"String\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"toExponential\"},{\"id\":\"toFixed\"},{\"id\":\"toPrecision\"},{\"id\":\"toString\"},{\"id\":\"valueOf\"},{\"id\":\"toLocaleString\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"isFinite\"},{\"children\":[],\"id\":\"isInteger\"},{\"children\":[],\"id\":\"isNaN\"},{\"children\":[],\"id\":\"isSafeInteger\"},{\"children\":[],\"id\":\"parseFloat\"},{\"children\":[],\"id\":\"parseInt\"}],\"id\":\"Number\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"toString\"},{\"id\":\"valueOf\"},{\"id\":\"description\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"for\"},{\"children\":[],\"id\":\"keyFor\"}],\"id\":\"Symbol\"},{\"children\":[{\"children\":[],\"id\":\"assign\"},{\"children\":[],\"id\":\"getOwnPropertyDescriptor\"},{\"children\":[],\"id\":\"getOwnPropertyDescriptors\"},{\"children\":[],\"id\":\"getOwnPropertyNames\"},{\"children\":[],\"id\":\"getOwnPropertySymbols\"},{\"children\":[],\"id\":\"is\"},{\"children\":[],\"id\":\"preventExtensions\"},{\"children\":[],\"id\":\"seal\"},{\"children\":[],\"id\":\"create\"},{\"children\":[],\"id\":\"defineProperties\"},{\"children\":[],\"id\":\"defineProperty\"},{\"children\":[],\"id\":\"freeze\"},{\"children\":[],\"id\":\"getPrototypeOf\"},{\"children\":[],\"id\":\"setPrototypeOf\"},{\"children\":[],\"id\":\"isExtensible\"},{\"children\":[],\"id\":\"isFrozen\"},{\"children\":[],\"id\":\"isSealed\"},{\"children\":[],\"id\":\"keys\"},{\"children\":[],\"id\":\"entries\"},{\"children\":[],\"id\":\"fromEntries\"},{\"children\":[],\"id\":\"values\"}],\"id\":\"Object\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"},{\"id\":\"toString\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"captureStackTrace\"}],\"id\":\"Error\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"}],\"id\":\"prototype\"}],\"id\":\"EvalError\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"}],\"id\":\"prototype\"}],\"id\":\"RangeError\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"}],\"id\":\"prototype\"}],\"id\":\"ReferenceError\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"}],\"id\":\"prototype\"}],\"id\":\"SyntaxError\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"}],\"id\":\"prototype\"}],\"id\":\"TypeError\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"message\"}],\"id\":\"prototype\"}],\"id\":\"URIError\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"byteLength\"},{\"id\":\"slice\"}],\"id\":\"prototype\"},{\"children\":[],\"id\":\"isView\"}],\"id\":\"ArrayBuffer\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"byteLength\"},{\"id\":\"slice\"}],\"id\":\"prototype\"}],\"id\":\"SharedArrayBuffer\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"buffer\"},{\"id\":\"byteLength\"},{\"id\":\"byteOffset\"},{\"id\":\"getInt8\"},{\"id\":\"setInt8\"},{\"id\":\"getUint8\"},{\"id\":\"setUint8\"},{\"id\":\"getInt16\"},{\"id\":\"setInt16\"},{\"id\":\"getUint16\"},{\"id\":\"setUint16\"},{\"id\":\"getInt32\"},{\"id\":\"setInt32\"},{\"id\":\"getUint32\"},{\"id\":\"setUint32\"},{\"id\":\"getFloat32\"},{\"id\":\"setFloat32\"},{\"id\":\"getFloat64\"},{\"id\":\"setFloat64\"},{\"id\":\"getBigInt64\"},{\"id\":\"setBigInt64\"},{\"id\":\"getBigUint64\"},{\"id\":\"setBigUint64\"}],\"id\":\"prototype\"}],\"id\":\"DataView\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Float32Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Float64Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Int8Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Int16Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Int32Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Uint8Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Uint16Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Uint32Array\"},{\"children\":[{\"children\":[{\"id\":\"constructor\"},{\"id\":\"BYTES_PER_ELEMENT\"}],\"id\":\"prototype\"}],\"id\":\"Uint8ClampedArray\"},{\"children\":[{\"children\":[],\"id\":\"load\"},{\"children\":[],\"id\":\"store\"},{\"children\":[],\"id\":\"add\"},{\"children\":[],\"id\":\"sub\"},{\"children\":[],\"id\":\"and\"},{\"children\":[],\"id\":\"or\"},{\"children\":[],\"id\":\"xor\"},{\"children\":[],\"id\":\"exchange\"},{\"children\":[],\"id\":\"compareExchange\"},{\"children\":[],\"id\":\"isLockFree\"},{\"children\":[],\"id\":\"wait\"},{\"children\":[],\"id\":\"wake\"},{\"children\":[],\"id\":\"notify\"}],\"id\":\"Atomics\"},{\"children\":[{\"children\":[],\"id\":\"parse\"},{\"children\":[],\"id\":\"stringify\"}],\"id\":\"JSON\"},{\"children\":[{\"children\":[],\"id\":\"abs\"},{\"children\":[],\"id\":\"acos\"},{\"children\":[],\"id\":\"acosh\"},{\"children\":[],\"id\":\"asin\"},{\"children\":[],\"id\":\"asinh\"},{\"children\":[],\"id\":\"atan\"},{\"children\":[],\"id\":\"atanh\"},{\"children\":[],\"id\":\"atan2\"},{\"children\":[],\"id\":\"ceil\"},{\"children\":[],\"id\":\"cbrt\"},{\"children\":[],\"id\":\"expm1\"},{\"children\":[],\"id\":\"clz32\"},{\"children\":[],\"id\":\"cos\"},{\"children\":[],\"id\":\"cosh\"},{\"children\":[],\"id\":\"exp\"},{\"children\":[],\"id\":\"floor\"},{\"children\":[],\"id\":\"fround\"},{\"children\":[],\"id\":\"hypot\"},{\"children\":[],\"id\":\"imul\"},{\"children\":[],\"id\":\"log\"},{\"children\":[],\"id\":\"log1p\"},{\"children\":[],\"id\":\"log2\"},{\"children\":[],\"id\":\"log10\"},{\"children\":[],\"id\":\"max\"},{\"children\":[],\"id\":\"min\"},{\"children\":[],\"id\":\"pow\"},{\"children\":[],\"id\":\"random\"},{\"children\":[],\"id\":\"round\"},{\"children\":[],\"id\":\"sign\"},{\"children\":[],\"id\":\"sin\"},{\"children\":[],\"id\":\"sinh\"},{\"children\":[],\"id\":\"sqrt\"},{\"children\":[],\"id\":\"tan\"},{\"children\":[],\"id\":\"tanh\"},{\"children\":[],\"id\":\"trunc\"}],\"id\":\"Math\"},{\"children\":[{\"children\":[],\"id\":\"defineProperty\"},{\"children\":[],\"id\":\"deleteProperty\"},{\"children\":[],\"id\":\"apply\"},{\"children\":[],\"id\":\"construct\"},{\"children\":[],\"id\":\"get\"},{\"children\":[],\"id\":\"getOwnPropertyDescriptor\"},{\"children\":[],\"id\":\"getPrototypeOf\"},{\"children\":[],\"id\":\"has\"},{\"children\":[],\"id\":\"isExtensible\"},{\"children\":[],\"id\":\"ownKeys\"},{\"children\":[],\"id\":\"preventExtensions\"},{\"children\":[],\"id\":\"set\"},{\"children\":[],\"id\":\"setPrototypeOf\"}],\"id\":\"Reflect\"}]}\n\t    ```\n\t\n- ç»˜åˆ¶ G6 Tree Graph\n\t- éœ€è¦åœ¨ HTML ä¸­åˆ›å»ºä¸€ä¸ªç”¨äºå®¹çº³ G6 ç»˜åˆ¶çš„å›¾çš„å®¹å™¨ï¼Œé€šå¸¸ä¸º div  æ ‡ç­¾ã€‚G6 åœ¨ç»˜åˆ¶æ—¶ä¼šåœ¨è¯¥å®¹å™¨ä¸‹è¿½åŠ  canvas æ ‡ç­¾ï¼Œç„¶åå°†å›¾ç»˜åˆ¶åœ¨å…¶ä¸­ã€‚\n\t\t\n\t\t```javascript\n\t\t<div id=\"container\" />\n\t\t```\n\t- å¼•å…¥ G6 çš„æ•°æ®æºä¸º JSON æ ¼å¼çš„å¯¹è±¡ã€‚å³ä¸Šé¢æˆ‘ä»¬å¤„ç†è¿‡çš„ globalObject\n\t- åˆ›å»ºå…³ç³»å›¾ï¼ˆå®ä¾‹åŒ–ï¼‰æ—¶ï¼Œè‡³å°‘éœ€è¦ä¸ºå›¾è®¾ç½®å®¹å™¨ã€å®½å’Œé«˜ã€‚\n\t\t\n\t\t```javascript\n\t\t\n\t    const width = window.devicePixelRatio * window.screen.width * 0.5; // é«˜æ¸…æ˜¾ç¤º\n\t    const height = window.devicePixelRatio * window.screen.height;\n\t    const graph = new G6.TreeGraph({\n\t      container: 'container',\n\t      width,\n\t      height,\n\t      modes: {\n\t        default: [\n\t          {\n\t            type: 'collapse-expand',\n\t            onChange: function onChange(item, collapsed) {\n\t              const data = item.get('model').data;\n\t              data.collapsed = collapsed;\n\t              return true;\n\t            },\n\t          },\n\t          'drag-canvas',\n\t          'zoom-canvas',\n\t        ],\n\t      },\n\t      defaultNode: {\n\t        size: 26,\n\t        anchorPoints: [\n\t          [0, 0.5],\n\t          [1, 0.5],\n\t        ],\n\t        style: {\n\t          fill: '#C6E5FF',\n\t          stroke: '#5B8FF9',\n\t        },\n\t      },\n\t      defaultEdge: {\n\t        type: 'cubic-horizontal',\n\t        style: {\n\t          stroke: '#A3B1BF',\n\t        },\n\t      },\n\t      layout: {\n\t        type: 'compactBox',\n\t        direction: 'LR',\n\t        getId: function getId(d) {\n\t          return d.id;\n\t        },\n\t        getHeight: function getHeight() {\n\t          return 16;\n\t        },\n\t        getWidth: function getWidth() {\n\t          return 16;\n\t        },\n\t        getVGap: function getVGap() {\n\t          return 10;\n\t        },\n\t        getHGap: function getHGap() {\n\t          return 100;\n\t        },\n\t      },\n\t    });\n\t\t```\n\t\t\n\t- é…ç½®æ•°æ®æºï¼Œæ¸²æŸ“\n\t\t\n\t\t```javascript\n\t\tgraph.data(data);\n\t  graph.render();\n\t  graph.fitView();\n\t\t```\n\t\t\n- è¿è¡Œæˆªå›¾\n\t- ![g6](http://p0.meituan.net/myvideodistribute/348969f29ced9ddcebac4fce71a1de42543229.png)\n\n\n## å†™åœ¨åé¢\n- [å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/antv-g6-realm)\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","slug":"Realm","published":1,"updated":"2020-10-27T15:21:11.262Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7y001mfw9kexdw32ns","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>Before it is evaluated, all ECMAScript code must be associated with a realm. Conceptually, a realm consists of a set of intrinsic objects, an ECMAScript global environment, all of the ECMAScript code that is loaded within the scope of that global environment, and other associated state and resources.</li>\n</ul>\n<a id=\"more\"></a>\n\n<ul>\n<li><p>ä»é€»è¾‘ä¸Šè®²ï¼Œå †æ ˆä¸­çš„æ¯ä¸ªä¸Šä¸‹æ–‡æ€»æ˜¯ä¸å…¶ realm ç›¸å…³è”</p>\n<ul>\n<li><p>è®©æˆ‘ä»¬çœ‹çœ‹å•ç‹¬çš„realmçš„ä¾‹å­ï¼Œä½¿ç”¨vmæ¨¡å—ï¼š</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> vm = <span class=\"built_in\">require</span>(<span class=\"string\">'vm'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// First realm, and its global:</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> realm1 = vm.createContext(&#123;<span class=\"attr\">x</span>: <span class=\"number\">10</span>, <span class=\"built_in\">console</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Second realm, and its global:</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> realm2 = vm.createContext(&#123;<span class=\"attr\">x</span>: <span class=\"number\">20</span>, <span class=\"built_in\">console</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Code to execute:</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> code = <span class=\"string\">`console.log(x);`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">vm.runInContext(code, realm1); <span class=\"comment\">// 10</span></span><br><span class=\"line\">vm.runInContext(code, realm2); <span class=\"comment\">// 20</span></span><br></pre></td></tr></table></figure></li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/5055c18e52edec4cd447d7acfd4a8278158263.png\" alt=\"realm\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å®è·µè®°å½•\"><a href=\"#å®è·µè®°å½•\" class=\"headerlink\" title=\"å®è·µè®°å½•\"></a>å®è·µè®°å½•</h2><ul>\n<li><p>JavaScript ä¸­æ‰€æœ‰çš„å›ºæœ‰å¯¹è±¡</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> objects = [</span><br><span class=\"line\">  <span class=\"string\">\"eval\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"isFinite\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"isNaN\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"parseFloat\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"parseInt\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"decodeURI\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"decodeURIComponent\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"encodeURI\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"encodeURIComponent\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Date\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"RegExp\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Promise\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Proxy\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Map\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"WeakMap\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Set\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"WeakSet\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Function\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Boolean\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"String\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Number\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Symbol\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Object\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Error\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"EvalError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"RangeError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"ReferenceError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"SyntaxError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"TypeError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"URIError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"ArrayBuffer\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"SharedArrayBuffer\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"DataView\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Float32Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Float64Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Int8Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Int16Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Int32Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint8Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint16Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint32Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint8ClampedArray\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Atomics\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"JSON\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Math\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Reflect\"</span></span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">set</span> = new Set();</span><br><span class=\"line\"></span><br><span class=\"line\">const globalObject = []</span><br><span class=\"line\"></span><br><span class=\"line\">for (let i of objects) &#123;</span><br><span class=\"line\">  globalObject.push(&#123;</span><br><span class=\"line\">    object: <span class=\"keyword\">this</span>[i],</span><br><span class=\"line\">    path: [i]</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> (globalObject.length) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> current = globalObject.shift()</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(current.path.join(<span class=\"string\">'.'</span>))</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">set</span>.has(current.object))</span><br><span class=\"line\">    continue;</span><br><span class=\"line\">  <span class=\"keyword\">set</span>.add(current.object)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  let proto = Object.getPrototypeOf(current.object)</span><br><span class=\"line\">  if (proto) &#123;</span><br><span class=\"line\">    globalObject.push(&#123;</span><br><span class=\"line\">      path: current.path.concat([<span class=\"string\">\"__proto__\"</span>]),</span><br><span class=\"line\">      object: proto</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> p <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.getOwnPropertyNames(current.object)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> d = <span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(current.object, p)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d.hasOwnProperty(<span class=\"string\">\"value\"</span>) &amp;&amp; ((d.value !== <span class=\"literal\">null</span> &amp;&amp; <span class=\"keyword\">typeof</span> d.value === <span class=\"string\">\"object\"</span>) || (<span class=\"keyword\">typeof</span> d.value === <span class=\"string\">\"function\"</span>)) &amp;&amp; d.value <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Object</span>) &#123;</span><br><span class=\"line\">      globalObject.push(&#123;</span><br><span class=\"line\">        path: current.path.concat([p]),</span><br><span class=\"line\">        object: d.value</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d.hasOwnProperty(<span class=\"string\">\"get\"</span>) &amp;&amp; <span class=\"keyword\">typeof</span> d.get === <span class=\"string\">\"function\"</span>) &#123;</span><br><span class=\"line\">      globalObject.push(&#123;</span><br><span class=\"line\">        path: current.path.concat([p]),</span><br><span class=\"line\">        object: d.get</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d.hasOwnProperty(<span class=\"string\">\"set\"</span>) &amp;&amp; <span class=\"keyword\">typeof</span> d.set === <span class=\"string\">\"function\"</span>) &#123;</span><br><span class=\"line\">      globalObject.push(&#123;</span><br><span class=\"line\">        path: current.path.concat([p]),</span><br><span class=\"line\">        object: d.set</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>æ ¹æ®ä¸Šè¿°ä»£ç ï¼Œè¿›è¡Œæ•°æ®ç»“æ„æ–¹é¢çš„æ ¼å¼åŒ–</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"keyword\">const</span> objects = [</span><br><span class=\"line\">  <span class=\"string\">\"eval\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"isFinite\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"isNaN\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"parseFloat\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"parseInt\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"decodeURI\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"decodeURIComponent\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"encodeURI\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"encodeURIComponent\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Date\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"RegExp\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Promise\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Proxy\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Map\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"WeakMap\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Set\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"WeakSet\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Function\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Boolean\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"String\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Number\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Symbol\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Object\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Error\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"EvalError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"RangeError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"ReferenceError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"SyntaxError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"TypeError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"URIError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"ArrayBuffer\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"SharedArrayBuffer\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"DataView\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Float32Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Float64Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Int8Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Int16Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Int32Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint8Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint16Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint32Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint8ClampedArray\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Atomics\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"JSON\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Math\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Reflect\"</span></span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">set</span> = new Set();</span><br><span class=\"line\"></span><br><span class=\"line\">const globalObject = &#123;</span><br><span class=\"line\">  id: <span class=\"string\">\"Global Object\"</span>,</span><br><span class=\"line\">  children: [</span><br><span class=\"line\"></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">of</span> objects) &#123;</span><br><span class=\"line\">  globalObject.children.push(&#123;</span><br><span class=\"line\">    children: [],</span><br><span class=\"line\">    id: i</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; objects.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> current = objects[i]</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">set</span>.has(objects[i]))</span><br><span class=\"line\">    continue;</span><br><span class=\"line\">  <span class=\"keyword\">set</span>.add(objects[i])</span><br><span class=\"line\">  for (let p of Object.getOwnPropertyNames(window[objects[i]])) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> d = <span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(<span class=\"built_in\">window</span>[objects[i]], p)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d.hasOwnProperty(<span class=\"string\">\"value\"</span>) &amp;&amp; ((d.value !== <span class=\"literal\">null</span> &amp;&amp; <span class=\"keyword\">typeof</span> d.value === <span class=\"string\">\"object\"</span>) || (<span class=\"keyword\">typeof</span> d.value === <span class=\"string\">\"function\"</span>)) &amp;&amp; d.value <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Object</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> childrenThird = []</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.getOwnPropertyNames(d.value)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (k !== <span class=\"string\">'name'</span> &amp;&amp; k !== <span class=\"string\">'length'</span>) &#123;</span><br><span class=\"line\">          childrenThird.push(&#123; <span class=\"attr\">id</span>: k &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      globalObject[<span class=\"string\">\"children\"</span>][i].children.push(&#123;</span><br><span class=\"line\">        children: childrenThird,</span><br><span class=\"line\">        id: p</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d.hasOwnProperty(<span class=\"string\">\"get\"</span>) &amp;&amp; <span class=\"keyword\">typeof</span> d.get === <span class=\"string\">\"function\"</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> childrenThird = []</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.getOwnPropertyNames(d.get)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (k !== <span class=\"string\">'name'</span> &amp;&amp; k !== <span class=\"string\">'length'</span>) &#123;</span><br><span class=\"line\">          childrenThird.push(&#123; <span class=\"attr\">id</span>: k &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      globalObject[<span class=\"string\">\"children\"</span>][i].children.push(&#123;</span><br><span class=\"line\">        children: childrenThird,</span><br><span class=\"line\">        id: p</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d.hasOwnProperty(<span class=\"string\">\"set\"</span>) &amp;&amp; <span class=\"keyword\">typeof</span> d.set === <span class=\"string\">\"function\"</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> childrenThird = []</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.getOwnPropertyNames(d.set)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (k !== <span class=\"string\">'name'</span> &amp;&amp; k !== <span class=\"string\">'length'</span>) &#123;</span><br><span class=\"line\">          childrenThird.push(&#123; <span class=\"attr\">id</span>: k &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      globalObject[<span class=\"string\">\"children\"</span>][i].children.push(&#123;</span><br><span class=\"line\">        children: childrenThird,</span><br><span class=\"line\">        id: p</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>å¤„ç†å¥½çš„JSONæ•°æ®  </p>\n<pre><code><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&quot;id&quot;:&quot;Global Object&quot;,&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;eval&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isFinite&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isNaN&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;parseFloat&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;parseInt&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;decodeURI&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;decodeURIComponent&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;encodeURI&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;encodeURIComponent&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;concat&quot;&#125;,&#123;&quot;id&quot;:&quot;copyWithin&quot;&#125;,&#123;&quot;id&quot;:&quot;fill&quot;&#125;,&#123;&quot;id&quot;:&quot;find&quot;&#125;,&#123;&quot;id&quot;:&quot;findIndex&quot;&#125;,&#123;&quot;id&quot;:&quot;lastIndexOf&quot;&#125;,&#123;&quot;id&quot;:&quot;pop&quot;&#125;,&#123;&quot;id&quot;:&quot;push&quot;&#125;,&#123;&quot;id&quot;:&quot;reverse&quot;&#125;,&#123;&quot;id&quot;:&quot;shift&quot;&#125;,&#123;&quot;id&quot;:&quot;unshift&quot;&#125;,&#123;&quot;id&quot;:&quot;slice&quot;&#125;,&#123;&quot;id&quot;:&quot;sort&quot;&#125;,&#123;&quot;id&quot;:&quot;splice&quot;&#125;,&#123;&quot;id&quot;:&quot;includes&quot;&#125;,&#123;&quot;id&quot;:&quot;indexOf&quot;&#125;,&#123;&quot;id&quot;:&quot;join&quot;&#125;,&#123;&quot;id&quot;:&quot;keys&quot;&#125;,&#123;&quot;id&quot;:&quot;entries&quot;&#125;,&#123;&quot;id&quot;:&quot;values&quot;&#125;,&#123;&quot;id&quot;:&quot;forEach&quot;&#125;,&#123;&quot;id&quot;:&quot;filter&quot;&#125;,&#123;&quot;id&quot;:&quot;flat&quot;&#125;,&#123;&quot;id&quot;:&quot;flatMap&quot;&#125;,&#123;&quot;id&quot;:&quot;map&quot;&#125;,&#123;&quot;id&quot;:&quot;every&quot;&#125;,&#123;&quot;id&quot;:&quot;some&quot;&#125;,&#123;&quot;id&quot;:&quot;reduce&quot;&#125;,&#123;&quot;id&quot;:&quot;reduceRight&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleString&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isArray&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;from&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;of&quot;&#125;],&quot;id&quot;:&quot;Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;,&#123;&quot;id&quot;:&quot;toDateString&quot;&#125;,&#123;&quot;id&quot;:&quot;toTimeString&quot;&#125;,&#123;&quot;id&quot;:&quot;toISOString&quot;&#125;,&#123;&quot;id&quot;:&quot;toUTCString&quot;&#125;,&#123;&quot;id&quot;:&quot;toGMTString&quot;&#125;,&#123;&quot;id&quot;:&quot;getDate&quot;&#125;,&#123;&quot;id&quot;:&quot;setDate&quot;&#125;,&#123;&quot;id&quot;:&quot;getDay&quot;&#125;,&#123;&quot;id&quot;:&quot;getFullYear&quot;&#125;,&#123;&quot;id&quot;:&quot;setFullYear&quot;&#125;,&#123;&quot;id&quot;:&quot;getHours&quot;&#125;,&#123;&quot;id&quot;:&quot;setHours&quot;&#125;,&#123;&quot;id&quot;:&quot;getMilliseconds&quot;&#125;,&#123;&quot;id&quot;:&quot;setMilliseconds&quot;&#125;,&#123;&quot;id&quot;:&quot;getMinutes&quot;&#125;,&#123;&quot;id&quot;:&quot;setMinutes&quot;&#125;,&#123;&quot;id&quot;:&quot;getMonth&quot;&#125;,&#123;&quot;id&quot;:&quot;setMonth&quot;&#125;,&#123;&quot;id&quot;:&quot;getSeconds&quot;&#125;,&#123;&quot;id&quot;:&quot;setSeconds&quot;&#125;,&#123;&quot;id&quot;:&quot;getTime&quot;&#125;,&#123;&quot;id&quot;:&quot;setTime&quot;&#125;,&#123;&quot;id&quot;:&quot;getTimezoneOffset&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCDate&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCDate&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCDay&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCFullYear&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCFullYear&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCHours&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCHours&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCMilliseconds&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCMilliseconds&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCMinutes&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCMinutes&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCMonth&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCMonth&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCSeconds&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCSeconds&quot;&#125;,&#123;&quot;id&quot;:&quot;valueOf&quot;&#125;,&#123;&quot;id&quot;:&quot;getYear&quot;&#125;,&#123;&quot;id&quot;:&quot;setYear&quot;&#125;,&#123;&quot;id&quot;:&quot;toJSON&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleString&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleDateString&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleTimeString&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;now&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;parse&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;UTC&quot;&#125;],&quot;id&quot;:&quot;Date&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;exec&quot;&#125;,&#123;&quot;id&quot;:&quot;dotAll&quot;&#125;,&#123;&quot;id&quot;:&quot;flags&quot;&#125;,&#123;&quot;id&quot;:&quot;global&quot;&#125;,&#123;&quot;id&quot;:&quot;ignoreCase&quot;&#125;,&#123;&quot;id&quot;:&quot;multiline&quot;&#125;,&#123;&quot;id&quot;:&quot;source&quot;&#125;,&#123;&quot;id&quot;:&quot;sticky&quot;&#125;,&#123;&quot;id&quot;:&quot;unicode&quot;&#125;,&#123;&quot;id&quot;:&quot;compile&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;,&#123;&quot;id&quot;:&quot;test&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;input&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;input&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$_&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$_&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;lastMatch&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;lastMatch&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$&amp;&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$&amp;&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;lastParen&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;lastParen&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$+&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$+&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;leftContext&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;leftContext&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$&#96;&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$&#96;&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;rightContext&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;rightContext&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$&#39;&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$&#39;&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$1&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$1&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$2&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$2&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$3&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$3&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$4&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$4&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$5&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$5&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$6&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$6&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$7&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$7&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$8&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$8&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$9&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$9&quot;&#125;],&quot;id&quot;:&quot;RegExp&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;then&quot;&#125;,&#123;&quot;id&quot;:&quot;catch&quot;&#125;,&#123;&quot;id&quot;:&quot;finally&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;all&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;race&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;resolve&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;reject&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;allSettled&quot;&#125;],&quot;id&quot;:&quot;Promise&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;revocable&quot;&#125;],&quot;id&quot;:&quot;Proxy&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;get&quot;&#125;,&#123;&quot;id&quot;:&quot;set&quot;&#125;,&#123;&quot;id&quot;:&quot;has&quot;&#125;,&#123;&quot;id&quot;:&quot;delete&quot;&#125;,&#123;&quot;id&quot;:&quot;clear&quot;&#125;,&#123;&quot;id&quot;:&quot;entries&quot;&#125;,&#123;&quot;id&quot;:&quot;forEach&quot;&#125;,&#123;&quot;id&quot;:&quot;keys&quot;&#125;,&#123;&quot;id&quot;:&quot;size&quot;&#125;,&#123;&quot;id&quot;:&quot;values&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Map&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;delete&quot;&#125;,&#123;&quot;id&quot;:&quot;get&quot;&#125;,&#123;&quot;id&quot;:&quot;set&quot;&#125;,&#123;&quot;id&quot;:&quot;has&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;WeakMap&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;has&quot;&#125;,&#123;&quot;id&quot;:&quot;add&quot;&#125;,&#123;&quot;id&quot;:&quot;delete&quot;&#125;,&#123;&quot;id&quot;:&quot;clear&quot;&#125;,&#123;&quot;id&quot;:&quot;entries&quot;&#125;,&#123;&quot;id&quot;:&quot;forEach&quot;&#125;,&#123;&quot;id&quot;:&quot;size&quot;&#125;,&#123;&quot;id&quot;:&quot;values&quot;&#125;,&#123;&quot;id&quot;:&quot;keys&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Set&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;delete&quot;&#125;,&#123;&quot;id&quot;:&quot;has&quot;&#125;,&#123;&quot;id&quot;:&quot;add&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;WeakSet&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;arguments&quot;&#125;,&#123;&quot;id&quot;:&quot;caller&quot;&#125;,&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;apply&quot;&#125;,&#123;&quot;id&quot;:&quot;bind&quot;&#125;,&#123;&quot;id&quot;:&quot;call&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Function&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;,&#123;&quot;id&quot;:&quot;valueOf&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Boolean&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;anchor&quot;&#125;,&#123;&quot;id&quot;:&quot;big&quot;&#125;,&#123;&quot;id&quot;:&quot;blink&quot;&#125;,&#123;&quot;id&quot;:&quot;bold&quot;&#125;,&#123;&quot;id&quot;:&quot;charAt&quot;&#125;,&#123;&quot;id&quot;:&quot;charCodeAt&quot;&#125;,&#123;&quot;id&quot;:&quot;codePointAt&quot;&#125;,&#123;&quot;id&quot;:&quot;concat&quot;&#125;,&#123;&quot;id&quot;:&quot;endsWith&quot;&#125;,&#123;&quot;id&quot;:&quot;fontcolor&quot;&#125;,&#123;&quot;id&quot;:&quot;fontsize&quot;&#125;,&#123;&quot;id&quot;:&quot;fixed&quot;&#125;,&#123;&quot;id&quot;:&quot;includes&quot;&#125;,&#123;&quot;id&quot;:&quot;indexOf&quot;&#125;,&#123;&quot;id&quot;:&quot;italics&quot;&#125;,&#123;&quot;id&quot;:&quot;lastIndexOf&quot;&#125;,&#123;&quot;id&quot;:&quot;link&quot;&#125;,&#123;&quot;id&quot;:&quot;localeCompare&quot;&#125;,&#123;&quot;id&quot;:&quot;match&quot;&#125;,&#123;&quot;id&quot;:&quot;matchAll&quot;&#125;,&#123;&quot;id&quot;:&quot;normalize&quot;&#125;,&#123;&quot;id&quot;:&quot;padEnd&quot;&#125;,&#123;&quot;id&quot;:&quot;padStart&quot;&#125;,&#123;&quot;id&quot;:&quot;repeat&quot;&#125;,&#123;&quot;id&quot;:&quot;replace&quot;&#125;,&#123;&quot;id&quot;:&quot;search&quot;&#125;,&#123;&quot;id&quot;:&quot;slice&quot;&#125;,&#123;&quot;id&quot;:&quot;small&quot;&#125;,&#123;&quot;id&quot;:&quot;split&quot;&#125;,&#123;&quot;id&quot;:&quot;strike&quot;&#125;,&#123;&quot;id&quot;:&quot;sub&quot;&#125;,&#123;&quot;id&quot;:&quot;substr&quot;&#125;,&#123;&quot;id&quot;:&quot;substring&quot;&#125;,&#123;&quot;id&quot;:&quot;sup&quot;&#125;,&#123;&quot;id&quot;:&quot;startsWith&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;,&#123;&quot;id&quot;:&quot;trim&quot;&#125;,&#123;&quot;id&quot;:&quot;trimStart&quot;&#125;,&#123;&quot;id&quot;:&quot;trimLeft&quot;&#125;,&#123;&quot;id&quot;:&quot;trimEnd&quot;&#125;,&#123;&quot;id&quot;:&quot;trimRight&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleLowerCase&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleUpperCase&quot;&#125;,&#123;&quot;id&quot;:&quot;toLowerCase&quot;&#125;,&#123;&quot;id&quot;:&quot;toUpperCase&quot;&#125;,&#123;&quot;id&quot;:&quot;valueOf&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;fromCharCode&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;fromCodePoint&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;raw&quot;&#125;],&quot;id&quot;:&quot;String&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;toExponential&quot;&#125;,&#123;&quot;id&quot;:&quot;toFixed&quot;&#125;,&#123;&quot;id&quot;:&quot;toPrecision&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;,&#123;&quot;id&quot;:&quot;valueOf&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleString&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isFinite&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isInteger&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isNaN&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isSafeInteger&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;parseFloat&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;parseInt&quot;&#125;],&quot;id&quot;:&quot;Number&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;,&#123;&quot;id&quot;:&quot;valueOf&quot;&#125;,&#123;&quot;id&quot;:&quot;description&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;for&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;keyFor&quot;&#125;],&quot;id&quot;:&quot;Symbol&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;assign&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getOwnPropertyDescriptor&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getOwnPropertyDescriptors&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getOwnPropertyNames&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getOwnPropertySymbols&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;is&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;preventExtensions&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;seal&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;create&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;defineProperties&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;defineProperty&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;freeze&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getPrototypeOf&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;setPrototypeOf&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isExtensible&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isFrozen&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isSealed&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;keys&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;entries&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;fromEntries&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;values&quot;&#125;],&quot;id&quot;:&quot;Object&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;captureStackTrace&quot;&#125;],&quot;id&quot;:&quot;Error&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;EvalError&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;RangeError&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;ReferenceError&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;SyntaxError&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;TypeError&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;URIError&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;byteLength&quot;&#125;,&#123;&quot;id&quot;:&quot;slice&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isView&quot;&#125;],&quot;id&quot;:&quot;ArrayBuffer&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;byteLength&quot;&#125;,&#123;&quot;id&quot;:&quot;slice&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;SharedArrayBuffer&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;buffer&quot;&#125;,&#123;&quot;id&quot;:&quot;byteLength&quot;&#125;,&#123;&quot;id&quot;:&quot;byteOffset&quot;&#125;,&#123;&quot;id&quot;:&quot;getInt8&quot;&#125;,&#123;&quot;id&quot;:&quot;setInt8&quot;&#125;,&#123;&quot;id&quot;:&quot;getUint8&quot;&#125;,&#123;&quot;id&quot;:&quot;setUint8&quot;&#125;,&#123;&quot;id&quot;:&quot;getInt16&quot;&#125;,&#123;&quot;id&quot;:&quot;setInt16&quot;&#125;,&#123;&quot;id&quot;:&quot;getUint16&quot;&#125;,&#123;&quot;id&quot;:&quot;setUint16&quot;&#125;,&#123;&quot;id&quot;:&quot;getInt32&quot;&#125;,&#123;&quot;id&quot;:&quot;setInt32&quot;&#125;,&#123;&quot;id&quot;:&quot;getUint32&quot;&#125;,&#123;&quot;id&quot;:&quot;setUint32&quot;&#125;,&#123;&quot;id&quot;:&quot;getFloat32&quot;&#125;,&#123;&quot;id&quot;:&quot;setFloat32&quot;&#125;,&#123;&quot;id&quot;:&quot;getFloat64&quot;&#125;,&#123;&quot;id&quot;:&quot;setFloat64&quot;&#125;,&#123;&quot;id&quot;:&quot;getBigInt64&quot;&#125;,&#123;&quot;id&quot;:&quot;setBigInt64&quot;&#125;,&#123;&quot;id&quot;:&quot;getBigUint64&quot;&#125;,&#123;&quot;id&quot;:&quot;setBigUint64&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;DataView&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Float32Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Float64Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Int8Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Int16Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Int32Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Uint8Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Uint16Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Uint32Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Uint8ClampedArray&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;load&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;store&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;add&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;sub&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;and&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;or&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;xor&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;exchange&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;compareExchange&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isLockFree&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;wait&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;wake&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;notify&quot;&#125;],&quot;id&quot;:&quot;Atomics&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;parse&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;stringify&quot;&#125;],&quot;id&quot;:&quot;JSON&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;abs&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;acos&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;acosh&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;asin&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;asinh&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;atan&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;atanh&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;atan2&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;ceil&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;cbrt&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;expm1&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;clz32&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;cos&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;cosh&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;exp&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;floor&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;fround&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;hypot&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;imul&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;log&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;log1p&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;log2&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;log10&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;max&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;min&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;pow&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;random&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;round&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;sign&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;sin&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;sinh&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;sqrt&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;tan&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;tanh&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;trunc&quot;&#125;],&quot;id&quot;:&quot;Math&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;defineProperty&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;deleteProperty&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;apply&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;construct&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;get&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getOwnPropertyDescriptor&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getPrototypeOf&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;has&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isExtensible&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;ownKeys&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;preventExtensions&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;set&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;setPrototypeOf&quot;&#125;],&quot;id&quot;:&quot;Reflect&quot;&#125;]&#125;</span><br></pre></td></tr></table></figure></code></pre></li>\n</ul>\n</li>\n<li><p>ç»˜åˆ¶ G6 Tree Graph</p>\n<ul>\n<li><p>éœ€è¦åœ¨ HTML ä¸­åˆ›å»ºä¸€ä¸ªç”¨äºå®¹çº³ G6 ç»˜åˆ¶çš„å›¾çš„å®¹å™¨ï¼Œé€šå¸¸ä¸º div  æ ‡ç­¾ã€‚G6 åœ¨ç»˜åˆ¶æ—¶ä¼šåœ¨è¯¥å®¹å™¨ä¸‹è¿½åŠ  canvas æ ‡ç­¾ï¼Œç„¶åå°†å›¾ç»˜åˆ¶åœ¨å…¶ä¸­ã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"container\"</span> /&gt;</span><br></pre></td></tr></table></figure></li>\n<li><p>å¼•å…¥ G6 çš„æ•°æ®æºä¸º JSON æ ¼å¼çš„å¯¹è±¡ã€‚å³ä¸Šé¢æˆ‘ä»¬å¤„ç†è¿‡çš„ globalObject</p>\n</li>\n<li><p>åˆ›å»ºå…³ç³»å›¾ï¼ˆå®ä¾‹åŒ–ï¼‰æ—¶ï¼Œè‡³å°‘éœ€è¦ä¸ºå›¾è®¾ç½®å®¹å™¨ã€å®½å’Œé«˜ã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"keyword\">const</span> width = <span class=\"built_in\">window</span>.devicePixelRatio * <span class=\"built_in\">window</span>.screen.width * <span class=\"number\">0.5</span>; <span class=\"comment\">// é«˜æ¸…æ˜¾ç¤º</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> height = <span class=\"built_in\">window</span>.devicePixelRatio * <span class=\"built_in\">window</span>.screen.height;</span><br><span class=\"line\"><span class=\"keyword\">const</span> graph = <span class=\"keyword\">new</span> G6.TreeGraph(&#123;</span><br><span class=\"line\">  container: <span class=\"string\">'container'</span>,</span><br><span class=\"line\">  width,</span><br><span class=\"line\">  height,</span><br><span class=\"line\">  modes: &#123;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        type: <span class=\"string\">'collapse-expand'</span>,</span><br><span class=\"line\">        onChange: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onChange</span>(<span class=\"params\">item, collapsed</span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">const</span> data = item.get(<span class=\"string\">'model'</span>).data;</span><br><span class=\"line\">          data.collapsed = collapsed;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"string\">'drag-canvas'</span>,</span><br><span class=\"line\">      <span class=\"string\">'zoom-canvas'</span>,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  defaultNode: &#123;</span><br><span class=\"line\">    size: <span class=\"number\">26</span>,</span><br><span class=\"line\">    anchorPoints: [</span><br><span class=\"line\">      [<span class=\"number\">0</span>, <span class=\"number\">0.5</span>],</span><br><span class=\"line\">      [<span class=\"number\">1</span>, <span class=\"number\">0.5</span>],</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    style: &#123;</span><br><span class=\"line\">      fill: <span class=\"string\">'#C6E5FF'</span>,</span><br><span class=\"line\">      stroke: <span class=\"string\">'#5B8FF9'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  defaultEdge: &#123;</span><br><span class=\"line\">    type: <span class=\"string\">'cubic-horizontal'</span>,</span><br><span class=\"line\">    style: &#123;</span><br><span class=\"line\">      stroke: <span class=\"string\">'#A3B1BF'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  layout: &#123;</span><br><span class=\"line\">    type: <span class=\"string\">'compactBox'</span>,</span><br><span class=\"line\">    direction: <span class=\"string\">'LR'</span>,</span><br><span class=\"line\">    getId: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getId</span>(<span class=\"params\">d</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> d.id;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    getHeight: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getHeight</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">16</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    getWidth: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getWidth</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">16</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    getVGap: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getVGap</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    getHGap: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getHGap</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">100</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>é…ç½®æ•°æ®æºï¼Œæ¸²æŸ“</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">graph.data(data);</span><br><span class=\"line\"> graph.render();</span><br><span class=\"line\"> graph.fitView();</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œæˆªå›¾</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/348969f29ced9ddcebac4fce71a1de42543229.png\" alt=\"g6\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/antv-g6-realm\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>Before it is evaluated, all ECMAScript code must be associated with a realm. Conceptually, a realm consists of a set of intrinsic objects, an ECMAScript global environment, all of the ECMAScript code that is loaded within the scope of that global environment, and other associated state and resources.</li>\n</ul>","more":"<ul>\n<li><p>ä»é€»è¾‘ä¸Šè®²ï¼Œå †æ ˆä¸­çš„æ¯ä¸ªä¸Šä¸‹æ–‡æ€»æ˜¯ä¸å…¶ realm ç›¸å…³è”</p>\n<ul>\n<li><p>è®©æˆ‘ä»¬çœ‹çœ‹å•ç‹¬çš„realmçš„ä¾‹å­ï¼Œä½¿ç”¨vmæ¨¡å—ï¼š</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> vm = <span class=\"built_in\">require</span>(<span class=\"string\">'vm'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// First realm, and its global:</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> realm1 = vm.createContext(&#123;<span class=\"attr\">x</span>: <span class=\"number\">10</span>, <span class=\"built_in\">console</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Second realm, and its global:</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> realm2 = vm.createContext(&#123;<span class=\"attr\">x</span>: <span class=\"number\">20</span>, <span class=\"built_in\">console</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Code to execute:</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> code = <span class=\"string\">`console.log(x);`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">vm.runInContext(code, realm1); <span class=\"comment\">// 10</span></span><br><span class=\"line\">vm.runInContext(code, realm2); <span class=\"comment\">// 20</span></span><br></pre></td></tr></table></figure></li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/5055c18e52edec4cd447d7acfd4a8278158263.png\" alt=\"realm\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å®è·µè®°å½•\"><a href=\"#å®è·µè®°å½•\" class=\"headerlink\" title=\"å®è·µè®°å½•\"></a>å®è·µè®°å½•</h2><ul>\n<li><p>JavaScript ä¸­æ‰€æœ‰çš„å›ºæœ‰å¯¹è±¡</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> objects = [</span><br><span class=\"line\">  <span class=\"string\">\"eval\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"isFinite\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"isNaN\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"parseFloat\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"parseInt\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"decodeURI\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"decodeURIComponent\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"encodeURI\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"encodeURIComponent\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Date\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"RegExp\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Promise\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Proxy\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Map\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"WeakMap\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Set\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"WeakSet\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Function\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Boolean\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"String\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Number\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Symbol\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Object\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Error\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"EvalError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"RangeError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"ReferenceError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"SyntaxError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"TypeError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"URIError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"ArrayBuffer\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"SharedArrayBuffer\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"DataView\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Float32Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Float64Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Int8Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Int16Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Int32Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint8Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint16Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint32Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint8ClampedArray\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Atomics\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"JSON\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Math\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Reflect\"</span></span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">set</span> = new Set();</span><br><span class=\"line\"></span><br><span class=\"line\">const globalObject = []</span><br><span class=\"line\"></span><br><span class=\"line\">for (let i of objects) &#123;</span><br><span class=\"line\">  globalObject.push(&#123;</span><br><span class=\"line\">    object: <span class=\"keyword\">this</span>[i],</span><br><span class=\"line\">    path: [i]</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> (globalObject.length) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> current = globalObject.shift()</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(current.path.join(<span class=\"string\">'.'</span>))</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">set</span>.has(current.object))</span><br><span class=\"line\">    continue;</span><br><span class=\"line\">  <span class=\"keyword\">set</span>.add(current.object)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  let proto = Object.getPrototypeOf(current.object)</span><br><span class=\"line\">  if (proto) &#123;</span><br><span class=\"line\">    globalObject.push(&#123;</span><br><span class=\"line\">      path: current.path.concat([<span class=\"string\">\"__proto__\"</span>]),</span><br><span class=\"line\">      object: proto</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> p <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.getOwnPropertyNames(current.object)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> d = <span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(current.object, p)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d.hasOwnProperty(<span class=\"string\">\"value\"</span>) &amp;&amp; ((d.value !== <span class=\"literal\">null</span> &amp;&amp; <span class=\"keyword\">typeof</span> d.value === <span class=\"string\">\"object\"</span>) || (<span class=\"keyword\">typeof</span> d.value === <span class=\"string\">\"function\"</span>)) &amp;&amp; d.value <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Object</span>) &#123;</span><br><span class=\"line\">      globalObject.push(&#123;</span><br><span class=\"line\">        path: current.path.concat([p]),</span><br><span class=\"line\">        object: d.value</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d.hasOwnProperty(<span class=\"string\">\"get\"</span>) &amp;&amp; <span class=\"keyword\">typeof</span> d.get === <span class=\"string\">\"function\"</span>) &#123;</span><br><span class=\"line\">      globalObject.push(&#123;</span><br><span class=\"line\">        path: current.path.concat([p]),</span><br><span class=\"line\">        object: d.get</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d.hasOwnProperty(<span class=\"string\">\"set\"</span>) &amp;&amp; <span class=\"keyword\">typeof</span> d.set === <span class=\"string\">\"function\"</span>) &#123;</span><br><span class=\"line\">      globalObject.push(&#123;</span><br><span class=\"line\">        path: current.path.concat([p]),</span><br><span class=\"line\">        object: d.set</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>æ ¹æ®ä¸Šè¿°ä»£ç ï¼Œè¿›è¡Œæ•°æ®ç»“æ„æ–¹é¢çš„æ ¼å¼åŒ–</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"keyword\">const</span> objects = [</span><br><span class=\"line\">  <span class=\"string\">\"eval\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"isFinite\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"isNaN\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"parseFloat\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"parseInt\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"decodeURI\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"decodeURIComponent\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"encodeURI\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"encodeURIComponent\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Date\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"RegExp\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Promise\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Proxy\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Map\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"WeakMap\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Set\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"WeakSet\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Function\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Boolean\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"String\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Number\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Symbol\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Object\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Error\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"EvalError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"RangeError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"ReferenceError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"SyntaxError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"TypeError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"URIError\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"ArrayBuffer\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"SharedArrayBuffer\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"DataView\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Float32Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Float64Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Int8Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Int16Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Int32Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint8Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint16Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint32Array\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Uint8ClampedArray\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Atomics\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"JSON\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Math\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Reflect\"</span></span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">set</span> = new Set();</span><br><span class=\"line\"></span><br><span class=\"line\">const globalObject = &#123;</span><br><span class=\"line\">  id: <span class=\"string\">\"Global Object\"</span>,</span><br><span class=\"line\">  children: [</span><br><span class=\"line\"></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">of</span> objects) &#123;</span><br><span class=\"line\">  globalObject.children.push(&#123;</span><br><span class=\"line\">    children: [],</span><br><span class=\"line\">    id: i</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; objects.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> current = objects[i]</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">set</span>.has(objects[i]))</span><br><span class=\"line\">    continue;</span><br><span class=\"line\">  <span class=\"keyword\">set</span>.add(objects[i])</span><br><span class=\"line\">  for (let p of Object.getOwnPropertyNames(window[objects[i]])) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> d = <span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(<span class=\"built_in\">window</span>[objects[i]], p)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d.hasOwnProperty(<span class=\"string\">\"value\"</span>) &amp;&amp; ((d.value !== <span class=\"literal\">null</span> &amp;&amp; <span class=\"keyword\">typeof</span> d.value === <span class=\"string\">\"object\"</span>) || (<span class=\"keyword\">typeof</span> d.value === <span class=\"string\">\"function\"</span>)) &amp;&amp; d.value <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Object</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> childrenThird = []</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.getOwnPropertyNames(d.value)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (k !== <span class=\"string\">'name'</span> &amp;&amp; k !== <span class=\"string\">'length'</span>) &#123;</span><br><span class=\"line\">          childrenThird.push(&#123; <span class=\"attr\">id</span>: k &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      globalObject[<span class=\"string\">\"children\"</span>][i].children.push(&#123;</span><br><span class=\"line\">        children: childrenThird,</span><br><span class=\"line\">        id: p</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d.hasOwnProperty(<span class=\"string\">\"get\"</span>) &amp;&amp; <span class=\"keyword\">typeof</span> d.get === <span class=\"string\">\"function\"</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> childrenThird = []</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.getOwnPropertyNames(d.get)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (k !== <span class=\"string\">'name'</span> &amp;&amp; k !== <span class=\"string\">'length'</span>) &#123;</span><br><span class=\"line\">          childrenThird.push(&#123; <span class=\"attr\">id</span>: k &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      globalObject[<span class=\"string\">\"children\"</span>][i].children.push(&#123;</span><br><span class=\"line\">        children: childrenThird,</span><br><span class=\"line\">        id: p</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d.hasOwnProperty(<span class=\"string\">\"set\"</span>) &amp;&amp; <span class=\"keyword\">typeof</span> d.set === <span class=\"string\">\"function\"</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> childrenThird = []</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.getOwnPropertyNames(d.set)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (k !== <span class=\"string\">'name'</span> &amp;&amp; k !== <span class=\"string\">'length'</span>) &#123;</span><br><span class=\"line\">          childrenThird.push(&#123; <span class=\"attr\">id</span>: k &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      globalObject[<span class=\"string\">\"children\"</span>][i].children.push(&#123;</span><br><span class=\"line\">        children: childrenThird,</span><br><span class=\"line\">        id: p</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>å¤„ç†å¥½çš„JSONæ•°æ®  </p>\n<pre><code><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&quot;id&quot;:&quot;Global Object&quot;,&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;eval&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isFinite&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isNaN&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;parseFloat&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;parseInt&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;decodeURI&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;decodeURIComponent&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;encodeURI&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;encodeURIComponent&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;concat&quot;&#125;,&#123;&quot;id&quot;:&quot;copyWithin&quot;&#125;,&#123;&quot;id&quot;:&quot;fill&quot;&#125;,&#123;&quot;id&quot;:&quot;find&quot;&#125;,&#123;&quot;id&quot;:&quot;findIndex&quot;&#125;,&#123;&quot;id&quot;:&quot;lastIndexOf&quot;&#125;,&#123;&quot;id&quot;:&quot;pop&quot;&#125;,&#123;&quot;id&quot;:&quot;push&quot;&#125;,&#123;&quot;id&quot;:&quot;reverse&quot;&#125;,&#123;&quot;id&quot;:&quot;shift&quot;&#125;,&#123;&quot;id&quot;:&quot;unshift&quot;&#125;,&#123;&quot;id&quot;:&quot;slice&quot;&#125;,&#123;&quot;id&quot;:&quot;sort&quot;&#125;,&#123;&quot;id&quot;:&quot;splice&quot;&#125;,&#123;&quot;id&quot;:&quot;includes&quot;&#125;,&#123;&quot;id&quot;:&quot;indexOf&quot;&#125;,&#123;&quot;id&quot;:&quot;join&quot;&#125;,&#123;&quot;id&quot;:&quot;keys&quot;&#125;,&#123;&quot;id&quot;:&quot;entries&quot;&#125;,&#123;&quot;id&quot;:&quot;values&quot;&#125;,&#123;&quot;id&quot;:&quot;forEach&quot;&#125;,&#123;&quot;id&quot;:&quot;filter&quot;&#125;,&#123;&quot;id&quot;:&quot;flat&quot;&#125;,&#123;&quot;id&quot;:&quot;flatMap&quot;&#125;,&#123;&quot;id&quot;:&quot;map&quot;&#125;,&#123;&quot;id&quot;:&quot;every&quot;&#125;,&#123;&quot;id&quot;:&quot;some&quot;&#125;,&#123;&quot;id&quot;:&quot;reduce&quot;&#125;,&#123;&quot;id&quot;:&quot;reduceRight&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleString&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isArray&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;from&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;of&quot;&#125;],&quot;id&quot;:&quot;Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;,&#123;&quot;id&quot;:&quot;toDateString&quot;&#125;,&#123;&quot;id&quot;:&quot;toTimeString&quot;&#125;,&#123;&quot;id&quot;:&quot;toISOString&quot;&#125;,&#123;&quot;id&quot;:&quot;toUTCString&quot;&#125;,&#123;&quot;id&quot;:&quot;toGMTString&quot;&#125;,&#123;&quot;id&quot;:&quot;getDate&quot;&#125;,&#123;&quot;id&quot;:&quot;setDate&quot;&#125;,&#123;&quot;id&quot;:&quot;getDay&quot;&#125;,&#123;&quot;id&quot;:&quot;getFullYear&quot;&#125;,&#123;&quot;id&quot;:&quot;setFullYear&quot;&#125;,&#123;&quot;id&quot;:&quot;getHours&quot;&#125;,&#123;&quot;id&quot;:&quot;setHours&quot;&#125;,&#123;&quot;id&quot;:&quot;getMilliseconds&quot;&#125;,&#123;&quot;id&quot;:&quot;setMilliseconds&quot;&#125;,&#123;&quot;id&quot;:&quot;getMinutes&quot;&#125;,&#123;&quot;id&quot;:&quot;setMinutes&quot;&#125;,&#123;&quot;id&quot;:&quot;getMonth&quot;&#125;,&#123;&quot;id&quot;:&quot;setMonth&quot;&#125;,&#123;&quot;id&quot;:&quot;getSeconds&quot;&#125;,&#123;&quot;id&quot;:&quot;setSeconds&quot;&#125;,&#123;&quot;id&quot;:&quot;getTime&quot;&#125;,&#123;&quot;id&quot;:&quot;setTime&quot;&#125;,&#123;&quot;id&quot;:&quot;getTimezoneOffset&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCDate&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCDate&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCDay&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCFullYear&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCFullYear&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCHours&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCHours&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCMilliseconds&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCMilliseconds&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCMinutes&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCMinutes&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCMonth&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCMonth&quot;&#125;,&#123;&quot;id&quot;:&quot;getUTCSeconds&quot;&#125;,&#123;&quot;id&quot;:&quot;setUTCSeconds&quot;&#125;,&#123;&quot;id&quot;:&quot;valueOf&quot;&#125;,&#123;&quot;id&quot;:&quot;getYear&quot;&#125;,&#123;&quot;id&quot;:&quot;setYear&quot;&#125;,&#123;&quot;id&quot;:&quot;toJSON&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleString&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleDateString&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleTimeString&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;now&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;parse&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;UTC&quot;&#125;],&quot;id&quot;:&quot;Date&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;exec&quot;&#125;,&#123;&quot;id&quot;:&quot;dotAll&quot;&#125;,&#123;&quot;id&quot;:&quot;flags&quot;&#125;,&#123;&quot;id&quot;:&quot;global&quot;&#125;,&#123;&quot;id&quot;:&quot;ignoreCase&quot;&#125;,&#123;&quot;id&quot;:&quot;multiline&quot;&#125;,&#123;&quot;id&quot;:&quot;source&quot;&#125;,&#123;&quot;id&quot;:&quot;sticky&quot;&#125;,&#123;&quot;id&quot;:&quot;unicode&quot;&#125;,&#123;&quot;id&quot;:&quot;compile&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;,&#123;&quot;id&quot;:&quot;test&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;input&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;input&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$_&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$_&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;lastMatch&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;lastMatch&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$&amp;&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$&amp;&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;lastParen&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;lastParen&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$+&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$+&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;leftContext&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;leftContext&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$&#96;&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$&#96;&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;rightContext&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;rightContext&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$&#39;&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$&#39;&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$1&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$1&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$2&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$2&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$3&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$3&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$4&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$4&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$5&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$5&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$6&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$6&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$7&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$7&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$8&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$8&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$9&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;$9&quot;&#125;],&quot;id&quot;:&quot;RegExp&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;then&quot;&#125;,&#123;&quot;id&quot;:&quot;catch&quot;&#125;,&#123;&quot;id&quot;:&quot;finally&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;all&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;race&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;resolve&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;reject&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;allSettled&quot;&#125;],&quot;id&quot;:&quot;Promise&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;revocable&quot;&#125;],&quot;id&quot;:&quot;Proxy&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;get&quot;&#125;,&#123;&quot;id&quot;:&quot;set&quot;&#125;,&#123;&quot;id&quot;:&quot;has&quot;&#125;,&#123;&quot;id&quot;:&quot;delete&quot;&#125;,&#123;&quot;id&quot;:&quot;clear&quot;&#125;,&#123;&quot;id&quot;:&quot;entries&quot;&#125;,&#123;&quot;id&quot;:&quot;forEach&quot;&#125;,&#123;&quot;id&quot;:&quot;keys&quot;&#125;,&#123;&quot;id&quot;:&quot;size&quot;&#125;,&#123;&quot;id&quot;:&quot;values&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Map&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;delete&quot;&#125;,&#123;&quot;id&quot;:&quot;get&quot;&#125;,&#123;&quot;id&quot;:&quot;set&quot;&#125;,&#123;&quot;id&quot;:&quot;has&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;WeakMap&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;has&quot;&#125;,&#123;&quot;id&quot;:&quot;add&quot;&#125;,&#123;&quot;id&quot;:&quot;delete&quot;&#125;,&#123;&quot;id&quot;:&quot;clear&quot;&#125;,&#123;&quot;id&quot;:&quot;entries&quot;&#125;,&#123;&quot;id&quot;:&quot;forEach&quot;&#125;,&#123;&quot;id&quot;:&quot;size&quot;&#125;,&#123;&quot;id&quot;:&quot;values&quot;&#125;,&#123;&quot;id&quot;:&quot;keys&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Set&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;delete&quot;&#125;,&#123;&quot;id&quot;:&quot;has&quot;&#125;,&#123;&quot;id&quot;:&quot;add&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;WeakSet&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;arguments&quot;&#125;,&#123;&quot;id&quot;:&quot;caller&quot;&#125;,&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;apply&quot;&#125;,&#123;&quot;id&quot;:&quot;bind&quot;&#125;,&#123;&quot;id&quot;:&quot;call&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Function&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;,&#123;&quot;id&quot;:&quot;valueOf&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Boolean&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;anchor&quot;&#125;,&#123;&quot;id&quot;:&quot;big&quot;&#125;,&#123;&quot;id&quot;:&quot;blink&quot;&#125;,&#123;&quot;id&quot;:&quot;bold&quot;&#125;,&#123;&quot;id&quot;:&quot;charAt&quot;&#125;,&#123;&quot;id&quot;:&quot;charCodeAt&quot;&#125;,&#123;&quot;id&quot;:&quot;codePointAt&quot;&#125;,&#123;&quot;id&quot;:&quot;concat&quot;&#125;,&#123;&quot;id&quot;:&quot;endsWith&quot;&#125;,&#123;&quot;id&quot;:&quot;fontcolor&quot;&#125;,&#123;&quot;id&quot;:&quot;fontsize&quot;&#125;,&#123;&quot;id&quot;:&quot;fixed&quot;&#125;,&#123;&quot;id&quot;:&quot;includes&quot;&#125;,&#123;&quot;id&quot;:&quot;indexOf&quot;&#125;,&#123;&quot;id&quot;:&quot;italics&quot;&#125;,&#123;&quot;id&quot;:&quot;lastIndexOf&quot;&#125;,&#123;&quot;id&quot;:&quot;link&quot;&#125;,&#123;&quot;id&quot;:&quot;localeCompare&quot;&#125;,&#123;&quot;id&quot;:&quot;match&quot;&#125;,&#123;&quot;id&quot;:&quot;matchAll&quot;&#125;,&#123;&quot;id&quot;:&quot;normalize&quot;&#125;,&#123;&quot;id&quot;:&quot;padEnd&quot;&#125;,&#123;&quot;id&quot;:&quot;padStart&quot;&#125;,&#123;&quot;id&quot;:&quot;repeat&quot;&#125;,&#123;&quot;id&quot;:&quot;replace&quot;&#125;,&#123;&quot;id&quot;:&quot;search&quot;&#125;,&#123;&quot;id&quot;:&quot;slice&quot;&#125;,&#123;&quot;id&quot;:&quot;small&quot;&#125;,&#123;&quot;id&quot;:&quot;split&quot;&#125;,&#123;&quot;id&quot;:&quot;strike&quot;&#125;,&#123;&quot;id&quot;:&quot;sub&quot;&#125;,&#123;&quot;id&quot;:&quot;substr&quot;&#125;,&#123;&quot;id&quot;:&quot;substring&quot;&#125;,&#123;&quot;id&quot;:&quot;sup&quot;&#125;,&#123;&quot;id&quot;:&quot;startsWith&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;,&#123;&quot;id&quot;:&quot;trim&quot;&#125;,&#123;&quot;id&quot;:&quot;trimStart&quot;&#125;,&#123;&quot;id&quot;:&quot;trimLeft&quot;&#125;,&#123;&quot;id&quot;:&quot;trimEnd&quot;&#125;,&#123;&quot;id&quot;:&quot;trimRight&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleLowerCase&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleUpperCase&quot;&#125;,&#123;&quot;id&quot;:&quot;toLowerCase&quot;&#125;,&#123;&quot;id&quot;:&quot;toUpperCase&quot;&#125;,&#123;&quot;id&quot;:&quot;valueOf&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;fromCharCode&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;fromCodePoint&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;raw&quot;&#125;],&quot;id&quot;:&quot;String&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;toExponential&quot;&#125;,&#123;&quot;id&quot;:&quot;toFixed&quot;&#125;,&#123;&quot;id&quot;:&quot;toPrecision&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;,&#123;&quot;id&quot;:&quot;valueOf&quot;&#125;,&#123;&quot;id&quot;:&quot;toLocaleString&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isFinite&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isInteger&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isNaN&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isSafeInteger&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;parseFloat&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;parseInt&quot;&#125;],&quot;id&quot;:&quot;Number&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;,&#123;&quot;id&quot;:&quot;valueOf&quot;&#125;,&#123;&quot;id&quot;:&quot;description&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;for&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;keyFor&quot;&#125;],&quot;id&quot;:&quot;Symbol&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;assign&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getOwnPropertyDescriptor&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getOwnPropertyDescriptors&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getOwnPropertyNames&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getOwnPropertySymbols&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;is&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;preventExtensions&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;seal&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;create&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;defineProperties&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;defineProperty&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;freeze&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getPrototypeOf&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;setPrototypeOf&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isExtensible&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isFrozen&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isSealed&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;keys&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;entries&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;fromEntries&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;values&quot;&#125;],&quot;id&quot;:&quot;Object&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;,&#123;&quot;id&quot;:&quot;toString&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;captureStackTrace&quot;&#125;],&quot;id&quot;:&quot;Error&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;EvalError&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;RangeError&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;ReferenceError&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;SyntaxError&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;TypeError&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;message&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;URIError&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;byteLength&quot;&#125;,&#123;&quot;id&quot;:&quot;slice&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isView&quot;&#125;],&quot;id&quot;:&quot;ArrayBuffer&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;byteLength&quot;&#125;,&#123;&quot;id&quot;:&quot;slice&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;SharedArrayBuffer&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;buffer&quot;&#125;,&#123;&quot;id&quot;:&quot;byteLength&quot;&#125;,&#123;&quot;id&quot;:&quot;byteOffset&quot;&#125;,&#123;&quot;id&quot;:&quot;getInt8&quot;&#125;,&#123;&quot;id&quot;:&quot;setInt8&quot;&#125;,&#123;&quot;id&quot;:&quot;getUint8&quot;&#125;,&#123;&quot;id&quot;:&quot;setUint8&quot;&#125;,&#123;&quot;id&quot;:&quot;getInt16&quot;&#125;,&#123;&quot;id&quot;:&quot;setInt16&quot;&#125;,&#123;&quot;id&quot;:&quot;getUint16&quot;&#125;,&#123;&quot;id&quot;:&quot;setUint16&quot;&#125;,&#123;&quot;id&quot;:&quot;getInt32&quot;&#125;,&#123;&quot;id&quot;:&quot;setInt32&quot;&#125;,&#123;&quot;id&quot;:&quot;getUint32&quot;&#125;,&#123;&quot;id&quot;:&quot;setUint32&quot;&#125;,&#123;&quot;id&quot;:&quot;getFloat32&quot;&#125;,&#123;&quot;id&quot;:&quot;setFloat32&quot;&#125;,&#123;&quot;id&quot;:&quot;getFloat64&quot;&#125;,&#123;&quot;id&quot;:&quot;setFloat64&quot;&#125;,&#123;&quot;id&quot;:&quot;getBigInt64&quot;&#125;,&#123;&quot;id&quot;:&quot;setBigInt64&quot;&#125;,&#123;&quot;id&quot;:&quot;getBigUint64&quot;&#125;,&#123;&quot;id&quot;:&quot;setBigUint64&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;DataView&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Float32Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Float64Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Int8Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Int16Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Int32Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Uint8Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Uint16Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Uint32Array&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[&#123;&quot;id&quot;:&quot;constructor&quot;&#125;,&#123;&quot;id&quot;:&quot;BYTES_PER_ELEMENT&quot;&#125;],&quot;id&quot;:&quot;prototype&quot;&#125;],&quot;id&quot;:&quot;Uint8ClampedArray&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;load&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;store&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;add&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;sub&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;and&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;or&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;xor&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;exchange&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;compareExchange&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isLockFree&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;wait&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;wake&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;notify&quot;&#125;],&quot;id&quot;:&quot;Atomics&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;parse&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;stringify&quot;&#125;],&quot;id&quot;:&quot;JSON&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;abs&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;acos&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;acosh&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;asin&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;asinh&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;atan&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;atanh&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;atan2&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;ceil&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;cbrt&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;expm1&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;clz32&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;cos&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;cosh&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;exp&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;floor&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;fround&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;hypot&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;imul&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;log&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;log1p&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;log2&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;log10&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;max&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;min&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;pow&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;random&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;round&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;sign&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;sin&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;sinh&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;sqrt&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;tan&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;tanh&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;trunc&quot;&#125;],&quot;id&quot;:&quot;Math&quot;&#125;,&#123;&quot;children&quot;:[&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;defineProperty&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;deleteProperty&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;apply&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;construct&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;get&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getOwnPropertyDescriptor&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;getPrototypeOf&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;has&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;isExtensible&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;ownKeys&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;preventExtensions&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;set&quot;&#125;,&#123;&quot;children&quot;:[],&quot;id&quot;:&quot;setPrototypeOf&quot;&#125;],&quot;id&quot;:&quot;Reflect&quot;&#125;]&#125;</span><br></pre></td></tr></table></figure></code></pre></li>\n</ul>\n</li>\n<li><p>ç»˜åˆ¶ G6 Tree Graph</p>\n<ul>\n<li><p>éœ€è¦åœ¨ HTML ä¸­åˆ›å»ºä¸€ä¸ªç”¨äºå®¹çº³ G6 ç»˜åˆ¶çš„å›¾çš„å®¹å™¨ï¼Œé€šå¸¸ä¸º div  æ ‡ç­¾ã€‚G6 åœ¨ç»˜åˆ¶æ—¶ä¼šåœ¨è¯¥å®¹å™¨ä¸‹è¿½åŠ  canvas æ ‡ç­¾ï¼Œç„¶åå°†å›¾ç»˜åˆ¶åœ¨å…¶ä¸­ã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"container\"</span> /&gt;</span><br></pre></td></tr></table></figure></li>\n<li><p>å¼•å…¥ G6 çš„æ•°æ®æºä¸º JSON æ ¼å¼çš„å¯¹è±¡ã€‚å³ä¸Šé¢æˆ‘ä»¬å¤„ç†è¿‡çš„ globalObject</p>\n</li>\n<li><p>åˆ›å»ºå…³ç³»å›¾ï¼ˆå®ä¾‹åŒ–ï¼‰æ—¶ï¼Œè‡³å°‘éœ€è¦ä¸ºå›¾è®¾ç½®å®¹å™¨ã€å®½å’Œé«˜ã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"keyword\">const</span> width = <span class=\"built_in\">window</span>.devicePixelRatio * <span class=\"built_in\">window</span>.screen.width * <span class=\"number\">0.5</span>; <span class=\"comment\">// é«˜æ¸…æ˜¾ç¤º</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> height = <span class=\"built_in\">window</span>.devicePixelRatio * <span class=\"built_in\">window</span>.screen.height;</span><br><span class=\"line\"><span class=\"keyword\">const</span> graph = <span class=\"keyword\">new</span> G6.TreeGraph(&#123;</span><br><span class=\"line\">  container: <span class=\"string\">'container'</span>,</span><br><span class=\"line\">  width,</span><br><span class=\"line\">  height,</span><br><span class=\"line\">  modes: &#123;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        type: <span class=\"string\">'collapse-expand'</span>,</span><br><span class=\"line\">        onChange: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onChange</span>(<span class=\"params\">item, collapsed</span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">const</span> data = item.get(<span class=\"string\">'model'</span>).data;</span><br><span class=\"line\">          data.collapsed = collapsed;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"string\">'drag-canvas'</span>,</span><br><span class=\"line\">      <span class=\"string\">'zoom-canvas'</span>,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  defaultNode: &#123;</span><br><span class=\"line\">    size: <span class=\"number\">26</span>,</span><br><span class=\"line\">    anchorPoints: [</span><br><span class=\"line\">      [<span class=\"number\">0</span>, <span class=\"number\">0.5</span>],</span><br><span class=\"line\">      [<span class=\"number\">1</span>, <span class=\"number\">0.5</span>],</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    style: &#123;</span><br><span class=\"line\">      fill: <span class=\"string\">'#C6E5FF'</span>,</span><br><span class=\"line\">      stroke: <span class=\"string\">'#5B8FF9'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  defaultEdge: &#123;</span><br><span class=\"line\">    type: <span class=\"string\">'cubic-horizontal'</span>,</span><br><span class=\"line\">    style: &#123;</span><br><span class=\"line\">      stroke: <span class=\"string\">'#A3B1BF'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  layout: &#123;</span><br><span class=\"line\">    type: <span class=\"string\">'compactBox'</span>,</span><br><span class=\"line\">    direction: <span class=\"string\">'LR'</span>,</span><br><span class=\"line\">    getId: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getId</span>(<span class=\"params\">d</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> d.id;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    getHeight: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getHeight</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">16</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    getWidth: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getWidth</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">16</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    getVGap: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getVGap</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    getHGap: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getHGap</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">100</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>é…ç½®æ•°æ®æºï¼Œæ¸²æŸ“</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">graph.data(data);</span><br><span class=\"line\"> graph.render();</span><br><span class=\"line\"> graph.fitView();</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>è¿è¡Œæˆªå›¾</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/348969f29ced9ddcebac4fce71a1de42543229.png\" alt=\"g6\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/antv-g6-realm\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Toy Browser DAY1","date":"2020-05-10T06:05:34.000Z","description":["æµè§ˆå™¨ -- toy-browser"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n## å†™åœ¨å‰é¢\n- implementation of a toy-browser ğŸ™†\n\n<!-- more -->\n\n\n## å®è·µè¿‡ç¨‹\n\n\n### Server ç«¯å®ç°\n\n```javascript\n// Returns content-type = text/plain\nconst server = http.createServer((req, res) => {\n  res.setHeader('Content-Type', 'text/html');\n  res.setHeader('X-Foo', 'bar');\n  res.writeHead(200, { 'Content-Type': 'text/plain' });\n  res.end('ok');\n});\nserver.listen(8088);\n```\n\n> When headers have been set with response.setHeader(), they will be merged with any headers passed to response.writeHead(), with the headers passed to **response.writeHead() given precedence**.\n\n- writeHead ä¸ setHeader ç›¸æ¯”ï¼Œå…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§\n- æ‰€ä»¥æœ€ç»ˆçš„è¯·æ±‚ä½“å¤´ 'Content-Type': 'text/plain'\n- è¿™é‡Œæˆ‘ä»¬è®©å®ƒç›‘å¬ 8088 ç«¯å£ï¼Œå› ä¸ºé»˜è®¤çš„ 80ç«¯å£ï¼Œå¯èƒ½ä¼šå­˜åœ¨å ç”¨\n- æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ï¼Œå¯¹ http://127.0.0.1:8088/ è®¿é—®ï¼Œæœ€åæˆ‘ä»¬è¦åˆ©ç”¨ toy-browser ç®€å•æ¨¡æ‹Ÿ\n\t- ![æµè§ˆå™¨è¡Œä¸º](http://p0.meituan.net/myvideodistribute/aa69465245fc64274c75ac4e5aab244691470.png)\n\n\n\n### Client ç«¯å®ç°\n\n#### ç¬¬ä¸€ç‰ˆï¼šç®€å•å®ç°\n\n```javascript\nconst net = require('net');\nconst client = net.createConnection({ port: 8088 }, () => {\n  // 'connect' listener.\n  console.log('connected to server!');\n  client.write('POST / HTTP/1.1\\r\\n');\n  client.write('HOST: 127.0.0.1\\r\\n');\n  client.write('Content-Length: 9\\r\\n');\n  client.write('Content-Type: application/x-www-form-urlencoded\\r\\n');\n  client.write('\\r\\n');\n  client.write('name=elle');\n  client.write('\\r\\n');\n});\nclient.on('data', (data) => {\n  console.log(data.toString());\n  client.end();\n});\nclient.on('end', () => {\n  console.log('disconnected from server');\n});\n```\n\n- æˆ‘ä»¬å¼€å¯æœåŠ¡ç«¯\n\t> node server.js\n\t\n\t\n\t\n- å†å¼€å¯å®¢æˆ·ç«¯\n\t> node client.js\n\t\n\t\n\n- è¿è¡Œæˆªå›¾\n\t- ![client](http://p0.meituan.net/myvideodistribute/5a4f9f936d87d43335d08670a03205a448885.png)\n\t- ![server](http://p1.meituan.net/myvideodistribute/115d90c1e9de7f974d7749988e01c87332973.png)\n\n- æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯·æ±‚æˆåŠŸçš„å‘å‡ºï¼Œå¹¶ä¸”æœåŠ¡ç«¯ä¹Ÿè¿›è¡Œäº†æ­£ç¡®çš„åé¦ˆã€‚\n\t- è¯·æ±‚ä½“ï¼šname=elleï¼Œ'content-length': '9'\n\n#### ç¬¬äºŒç‰ˆï¼šå¯¹ request è¿›è¡Œç®€å•å°è£…\n- ç®€å•åˆ†æ request æ„é€ å™¨æ‰€éœ€å†…å®¹\n\t- ![request](http://p0.meituan.net/myvideodistribute/7663a0cff7c034fbeadce907b2e445b588991.png)\n\t\n\t\t```javascript\n\t    // request line\n\t      // method, url = host + port + path\n\t    // headers\n\t      // Content-Type\n\t        // Content-Type: application/x-www-form-urlencoded\n\t        // Content-Type: application/json\n\t        // Content-Type: multipart/form-data\n\t        // Content-Type: text/xml\n\t      // Content-Length\n\t    // body: k-v\n\t\t```\n\t\t\n- æˆ‘ä»¬å¯ä»¥ç®€å•å†™å‡ºå°è£…åçš„ reqeust\n\n\t```javascript\n\tclass Request {\n\t    // request line\n\t      // method, url = host + port + path\n\t    // headers\n\t      // Content-Type\n\t        // Content-Type: application/x-www-form-urlencoded\n\t        // Content-Type: application/json\n\t        // Content-Type: multipart/form-data\n\t        // Content-Type: text/xml\n\t      // Content-Length\n\t    // body: k-v\n\t\n\t  constructor(options) {\n\t    this.method = options.method || \"GET\"\n\t    this.host = options.host\n\t    this.port = options.port || 80\n\t    this.path = options.path || \"/\"\n\t    this.body = options.body || {}\n\t    this.headers = options.headers || {}\n\t    if (!this.headers[\"Content-Type\"]) {\n\t      this.headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\"\n\t    }\n\t\n\t    if (this.headers[\"Content-Type\"] === \"application/json\") {\n\t      this.bodyText = JSON.stringify(this.body)\n\t    } else if (this.headers[\"Content-Type\"] === \"application/x-www-form-urlencoded\") {\n\t      this.bodyText = Object.keys(this.body).map(key => `${key}=${encodeURIComponent(this.body[key])}`).join('&')\n\t    }\n\t\n\t    // calculate Content-Length\n\t    this.headers[\"Content-Length\"] = this.bodyText.length\n\t\n\t  }\n\t\n\t  toString() {\n\t    return `${this.method} ${this.path} HTTP/1.1\\r\\nHOST: ${this.host}\\r\\n${Object.keys(this.headers).map(key => `${key}: ${this.headers[key]}`).join('\\r\\n')}\\r\\n\\r\\n${this.bodyText}\\r\\n`\n\t  }\n\t}\n\t```\n\t\n- å†åˆ©ç”¨å°è£…åçš„ request è¿›è¡Œ client è®¿é—®\n\n\t```javascript\n\tconst net = require(\"net\");\n\t\n\tconst client = net.createConnection({\n\t  host: \"127.0.0.1\",\n\t  port: 8088\n\t}, () => {\n\t  // 'connect' listener.\n\t  console.log('connected to server!');\n\t\n\t  const options = {\n\t    method: \"POST\",\n\t    path: \"/\",\n\t    host: \"127.0.0.1\",\n\t    port: 8088,\n\t    headers: {\n\t      [\"X-Foo2\"]: \"customed\"\n\t    },\n\t    body: {\n\t      name: \"elle\"\n\t    }\n\t  }\n\t\n\t  let request = new Request(options)\n\t  client.write(request.toString());\n\t});\n\tclient.on('data', (data) => {\n\t  console.log(data.toString());\n\t  client.end();\n\t});\n\tclient.on('end', () => {\n\t  console.log('disconnected from server');\n\t});\n\tclient.on('error', (err) => {\n\t  console.log(err);\n\t  client.end();\n\t});\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![å°è£…åçš„request](http://p0.meituan.net/myvideodistribute/19807e0f02f52d93b9391645a286cfdf48815.png)\n\n\t\n#### ç¬¬ä¸‰ç‰ˆï¼šå¯¹ responseParse è¿›è¡Œå°è£…\n\n- ç®€å•åˆ†æ response å†…å®¹æ¡†æ¶\n\t- ![responseå†…å®¹æ¡†æ¶](http://p0.meituan.net/myvideodistribute/9c17bab40bf615430215e496d9bdfeb5147249.png)\n\n\t- å¼€å§‹æˆ‘ä»¬çš„çŠ¶æ€æœº constructor ç®€å•ç¼–å†™\n\t\n\t\t```javascript\n\t\tconstructor() {\n\t\t  this.WAITING_STATUS_LINE = 0;\n\t\t  this.WAITING_STATUS_LINE_END = 1;\n\t\t  this.WAITING_HEADER_NAME = 2;\n\t\t  this.WAITING_HEADER_SPACE = 3;\n\t\t  this.WAITING_HEADER_VALUE = 4;\n\t\t  this.WAITING_HEADER_LINE_END = 5;\n\t\t  this.WAITING_HEADER_BLOCK_END = 6;\n\t\t  this.WAITING_BODY = 7;\n\t\t\n\t\t  this.current = this.WAITING_STATUS_LINE;\n\t\t  this.statusLine = \"\";\n\t\t  this.headers = {};\n\t\t  this.headerName = \"\";\n\t\t  this.headerValue = \"\";\n\t\t  this.bodyParse = null;\n\t\t}\n\t\t```\n\t\t\n\t- å¯¹ response å­—ç¬¦æµè¿›è¡Œå¤„ç†ã€‚å¾ªç¯è¯»å–æµä¸­æ•°æ®\n\t\t\n\t\t```javascript\n\t\t// å­—ç¬¦æµå¤„ç†\n\t\treceive(string) {\n\t\t    for (let i = 0; i < string.length; i++) {\n\t\t      this.receiveChar(string.charAt(i));\n\t\t    }\n\t\t}\t\t\n  \t\t```\n  \t\t\n\t - å¯¹æµä¸­å•ä¸ªå­—ç¬¦è¿›è¡Œæ‰«æ\n  \t\t\n  \t\t```javascript\n\t\t  receiveChar(char) {\n\t\t    if (this.current === this.WAITING_STATUS_LINE) {\n\t\t      if (char === '\\r') {\n\t\t        this.current = this.WAITING_STATUS_LINE_END\n\t\t      } else {\n\t\t        this.statusLine += char\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_STATUS_LINE_END) {\n\t\t      if (char === '\\n') {\n\t\t        this.current = this.WAITING_HEADER_NAME\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_HEADER_NAME) {\n\t\t      if (char === ':') {\n\t\t        this.current = this.WAITING_HEADER_SPACE\n\t\t      } else if (char === '\\r') {\n\t\t        this.current = this.WAITING_HEADER_BLOCK_END\n\t\t        if (this.headers['Transfer-Encoding'] === 'chunked')\n\t\t          this.bodyParse = new TrunkedBodyParser();\n\t\t      } else {\n\t\t        this.headerName += char\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_HEADER_SPACE) {\n\t\t      if (char === ' ') {\n\t\t        this.current = this.WAITING_HEADER_VALUE\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_HEADER_VALUE) {\n\t\t      if (char === '\\r') {\n\t\t        this.current = this.WAITING_HEADER_LINE_END\n\t\t        this.headers[this.headerName] = this.headerValue\n\t\t        this.headerName = \"\"\n\t\t        this.headerValue = \"\"\n\t\t      } else {\n\t\t        this.headerValue += char\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_HEADER_LINE_END) {\n\t\t      if (char === '\\n') {\n\t\t        this.current = this.WAITING_HEADER_NAME\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_HEADER_BLOCK_END) {\n\t\t      if (char === '\\n') {\n\t\t        this.current = this.WAITING_BODY\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_BODY) {\n\t\t      this.bodyParse.receiveChar(char)\n\t\t    }\n\t\t  }  \t\t\n  \t\t```\n  \t\t\t\n   - ç®€å•åˆ†æ server ç«¯çš„ TrunkBody \n\t\t\t\n\t\t```javascript\n\t\t2 // ä¸‹ä¸€è¡Œ trunk é•¿åº¦\n\t\tok // trunk å†…å®¹\n\t\t0 // trunk ç»ˆæ­¢ï¼Œå†æ²¡æœ‰å†…å®¹\n\t\t```\n\t\t- å¼€å§‹æˆ‘ä»¬çš„ TrunkedBodyParser çŠ¶æ€æœº constructor ç®€å•ç¼–å†™\n\t\n\t\t\t```javascript\n\t\t\t  constructor() {\n\t\t\t    this.WAITING_LENGTH = 0;\n\t\t\t    this.WAITING_LENGTH_LINE_END = 1;\n\t\t\t    this.READING_TRUNK = 2;\n\t\t\t    this.WAITING_NEW_LINE = 3;\n\t\t\t    this.WAITING_NEW_LINE_END = 4;\n\t\t\t    this.FINISHED_NEW_LINE = 5;\n\t\t\t    this.FINISHED_NEW_LINE_END = 6;\n\t\t\t    this.isFinished = false;\n\t\t\t    this.length = 0;\n\t\t\t    this.content = [];\n\t\t\t    this.current = this.WAITING_LENGTH;\n\t\t\t  }\n\t\t\t```\n\t\t\t- TrunkBody å­—ç¬¦å¤„ç†\n\t\t\t\n\t\t\t\t```javascript\n\t\t\t\t  // å­—ç¬¦æµå¤„ç†\n\t\t\t\t  receiveChar(char) {\n\t\t\t\t    if (this.current === this.WAITING_LENGTH) {\n\t\t\t\t      if (char === '\\r') {\n\t\t\t\t        if (this.length === 0) {\n\t\t\t\t          this.current = this.FINISHED_NEW_LINE\n\t\t\t\t        } else {\n\t\t\t\t          this.current = this.WAITING_LENGTH_LINE_END\n\t\t\t\t        }\n\t\t\t\t      } else {\n\t\t\t\t        this.length *= 10\n\t\t\t\t        this.length += char.charCodeAt(0) - '0'.charCodeAt(0)\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t\t\t\n\t\t\t\t    else if (this.current === this.WAITING_LENGTH_LINE_END) {\n\t\t\t\t      if (char === '\\n') {\n\t\t\t\t        this.current = this.READING_TRUNK\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t\t\t\n\t\t\t\t    else if (this.current === this.READING_TRUNK) {\n\t\t\t\t      this.content.push(char)\n\t\t\t\t      this.length --\n\t\t\t\t      if (this.length === 0) {\n\t\t\t\t        this.current = this.WAITING_NEW_LINE\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t\t\t\n\t\t\t\t    else if (this.current === this.WAITING_NEW_LINE) {\n\t\t\t\t      if (char === '\\r') {\n\t\t\t\t        this.current = this.WAITING_NEW_LINE_END\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t\t\t\n\t\t\t\t    else if (this.current === this.WAITING_NEW_LINE_END) {\n\t\t\t\t      if (char === '\\n') {\n\t\t\t\t        this.current = this.WAITING_LENGTH\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t\t\t\n\t\t\t\t    else if (this.current === this.FINISHED_NEW_LINE) {\n\t\t\t\t      if (char === '\\r') {\n\t\t\t\t        this.current = this.FINISHED_NEW_LINE_END\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t\t\t\n\t\t\t\t    else if (this.current === this.FINISHED_NEW_LINE_END) {\n\t\t\t\t      if (char === '\\n') {\n\t\t\t\t        this.isFinished = true\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t  \t\t  }\n\t\t\t\t```\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\t\t\t\t\n- è¿è¡Œç»“æœ\n\t- ![client](http://p0.meituan.net/myvideodistribute/50256a14d9171b06c374dc7e6894efcf61275.png)\n\t- ![server](http://p0.meituan.net/myvideodistribute/23ed78fb0b5598952897249eb5ae2fbb29575.png)\n\n\t\n## é”™è¯¯ä¿®æ”¹\n\n\n- ![é”™è¯¯ä¿®æ”¹](http://p0.meituan.net/myvideodistribute/fd4b58c42c99e0f2754c025b6682307650941.png)\n- server ç«¯é•¿åº¦è®¡ç®—ä¸æ˜¯åè¿›åˆ¶ï¼Œæ˜¯åå…­è¿›åˆ¶\n\n\n  ```javascript\n  // å­—ç¬¦æµå¤„ç†\n  receiveChar(char) {\n    if (this.current === this.WAITING_LENGTH) {\n      if (char === '\\r') {\n        if (this.length === 0) {\n          this.current = this.FINISHED_NEW_LINE\n        } else {\n          this.current = this.WAITING_LENGTH_LINE_END\n        }\n      } else {\n        this.length *= 16\n        this.length += parseInt(char, 16)\n      }\n    }\n    ...\n  }\n  ```\n## å‚è€ƒæ–‡çŒ®\n- [Node.js v12.16.3 Documentation](https://nodejs.org/dist/latest-v12.x/docs/api/http.html)\n\n\n\n## å†™åœ¨åé¢\n- [å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser)\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","source":"_posts/Toy-Browser-DAY1.md","raw":"---\ntitle: Toy Browser DAY1\ndate: 2020-05-10 14:05:34\ntags:\n- æµè§ˆå™¨\ncategories:\n- æµè§ˆå™¨\ndescription:\n- æµè§ˆå™¨ -- toy-browser\n\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n## å†™åœ¨å‰é¢\n- implementation of a toy-browser ğŸ™†\n\n<!-- more -->\n\n\n## å®è·µè¿‡ç¨‹\n\n\n### Server ç«¯å®ç°\n\n```javascript\n// Returns content-type = text/plain\nconst server = http.createServer((req, res) => {\n  res.setHeader('Content-Type', 'text/html');\n  res.setHeader('X-Foo', 'bar');\n  res.writeHead(200, { 'Content-Type': 'text/plain' });\n  res.end('ok');\n});\nserver.listen(8088);\n```\n\n> When headers have been set with response.setHeader(), they will be merged with any headers passed to response.writeHead(), with the headers passed to **response.writeHead() given precedence**.\n\n- writeHead ä¸ setHeader ç›¸æ¯”ï¼Œå…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§\n- æ‰€ä»¥æœ€ç»ˆçš„è¯·æ±‚ä½“å¤´ 'Content-Type': 'text/plain'\n- è¿™é‡Œæˆ‘ä»¬è®©å®ƒç›‘å¬ 8088 ç«¯å£ï¼Œå› ä¸ºé»˜è®¤çš„ 80ç«¯å£ï¼Œå¯èƒ½ä¼šå­˜åœ¨å ç”¨\n- æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ï¼Œå¯¹ http://127.0.0.1:8088/ è®¿é—®ï¼Œæœ€åæˆ‘ä»¬è¦åˆ©ç”¨ toy-browser ç®€å•æ¨¡æ‹Ÿ\n\t- ![æµè§ˆå™¨è¡Œä¸º](http://p0.meituan.net/myvideodistribute/aa69465245fc64274c75ac4e5aab244691470.png)\n\n\n\n### Client ç«¯å®ç°\n\n#### ç¬¬ä¸€ç‰ˆï¼šç®€å•å®ç°\n\n```javascript\nconst net = require('net');\nconst client = net.createConnection({ port: 8088 }, () => {\n  // 'connect' listener.\n  console.log('connected to server!');\n  client.write('POST / HTTP/1.1\\r\\n');\n  client.write('HOST: 127.0.0.1\\r\\n');\n  client.write('Content-Length: 9\\r\\n');\n  client.write('Content-Type: application/x-www-form-urlencoded\\r\\n');\n  client.write('\\r\\n');\n  client.write('name=elle');\n  client.write('\\r\\n');\n});\nclient.on('data', (data) => {\n  console.log(data.toString());\n  client.end();\n});\nclient.on('end', () => {\n  console.log('disconnected from server');\n});\n```\n\n- æˆ‘ä»¬å¼€å¯æœåŠ¡ç«¯\n\t> node server.js\n\t\n\t\n\t\n- å†å¼€å¯å®¢æˆ·ç«¯\n\t> node client.js\n\t\n\t\n\n- è¿è¡Œæˆªå›¾\n\t- ![client](http://p0.meituan.net/myvideodistribute/5a4f9f936d87d43335d08670a03205a448885.png)\n\t- ![server](http://p1.meituan.net/myvideodistribute/115d90c1e9de7f974d7749988e01c87332973.png)\n\n- æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯·æ±‚æˆåŠŸçš„å‘å‡ºï¼Œå¹¶ä¸”æœåŠ¡ç«¯ä¹Ÿè¿›è¡Œäº†æ­£ç¡®çš„åé¦ˆã€‚\n\t- è¯·æ±‚ä½“ï¼šname=elleï¼Œ'content-length': '9'\n\n#### ç¬¬äºŒç‰ˆï¼šå¯¹ request è¿›è¡Œç®€å•å°è£…\n- ç®€å•åˆ†æ request æ„é€ å™¨æ‰€éœ€å†…å®¹\n\t- ![request](http://p0.meituan.net/myvideodistribute/7663a0cff7c034fbeadce907b2e445b588991.png)\n\t\n\t\t```javascript\n\t    // request line\n\t      // method, url = host + port + path\n\t    // headers\n\t      // Content-Type\n\t        // Content-Type: application/x-www-form-urlencoded\n\t        // Content-Type: application/json\n\t        // Content-Type: multipart/form-data\n\t        // Content-Type: text/xml\n\t      // Content-Length\n\t    // body: k-v\n\t\t```\n\t\t\n- æˆ‘ä»¬å¯ä»¥ç®€å•å†™å‡ºå°è£…åçš„ reqeust\n\n\t```javascript\n\tclass Request {\n\t    // request line\n\t      // method, url = host + port + path\n\t    // headers\n\t      // Content-Type\n\t        // Content-Type: application/x-www-form-urlencoded\n\t        // Content-Type: application/json\n\t        // Content-Type: multipart/form-data\n\t        // Content-Type: text/xml\n\t      // Content-Length\n\t    // body: k-v\n\t\n\t  constructor(options) {\n\t    this.method = options.method || \"GET\"\n\t    this.host = options.host\n\t    this.port = options.port || 80\n\t    this.path = options.path || \"/\"\n\t    this.body = options.body || {}\n\t    this.headers = options.headers || {}\n\t    if (!this.headers[\"Content-Type\"]) {\n\t      this.headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\"\n\t    }\n\t\n\t    if (this.headers[\"Content-Type\"] === \"application/json\") {\n\t      this.bodyText = JSON.stringify(this.body)\n\t    } else if (this.headers[\"Content-Type\"] === \"application/x-www-form-urlencoded\") {\n\t      this.bodyText = Object.keys(this.body).map(key => `${key}=${encodeURIComponent(this.body[key])}`).join('&')\n\t    }\n\t\n\t    // calculate Content-Length\n\t    this.headers[\"Content-Length\"] = this.bodyText.length\n\t\n\t  }\n\t\n\t  toString() {\n\t    return `${this.method} ${this.path} HTTP/1.1\\r\\nHOST: ${this.host}\\r\\n${Object.keys(this.headers).map(key => `${key}: ${this.headers[key]}`).join('\\r\\n')}\\r\\n\\r\\n${this.bodyText}\\r\\n`\n\t  }\n\t}\n\t```\n\t\n- å†åˆ©ç”¨å°è£…åçš„ request è¿›è¡Œ client è®¿é—®\n\n\t```javascript\n\tconst net = require(\"net\");\n\t\n\tconst client = net.createConnection({\n\t  host: \"127.0.0.1\",\n\t  port: 8088\n\t}, () => {\n\t  // 'connect' listener.\n\t  console.log('connected to server!');\n\t\n\t  const options = {\n\t    method: \"POST\",\n\t    path: \"/\",\n\t    host: \"127.0.0.1\",\n\t    port: 8088,\n\t    headers: {\n\t      [\"X-Foo2\"]: \"customed\"\n\t    },\n\t    body: {\n\t      name: \"elle\"\n\t    }\n\t  }\n\t\n\t  let request = new Request(options)\n\t  client.write(request.toString());\n\t});\n\tclient.on('data', (data) => {\n\t  console.log(data.toString());\n\t  client.end();\n\t});\n\tclient.on('end', () => {\n\t  console.log('disconnected from server');\n\t});\n\tclient.on('error', (err) => {\n\t  console.log(err);\n\t  client.end();\n\t});\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![å°è£…åçš„request](http://p0.meituan.net/myvideodistribute/19807e0f02f52d93b9391645a286cfdf48815.png)\n\n\t\n#### ç¬¬ä¸‰ç‰ˆï¼šå¯¹ responseParse è¿›è¡Œå°è£…\n\n- ç®€å•åˆ†æ response å†…å®¹æ¡†æ¶\n\t- ![responseå†…å®¹æ¡†æ¶](http://p0.meituan.net/myvideodistribute/9c17bab40bf615430215e496d9bdfeb5147249.png)\n\n\t- å¼€å§‹æˆ‘ä»¬çš„çŠ¶æ€æœº constructor ç®€å•ç¼–å†™\n\t\n\t\t```javascript\n\t\tconstructor() {\n\t\t  this.WAITING_STATUS_LINE = 0;\n\t\t  this.WAITING_STATUS_LINE_END = 1;\n\t\t  this.WAITING_HEADER_NAME = 2;\n\t\t  this.WAITING_HEADER_SPACE = 3;\n\t\t  this.WAITING_HEADER_VALUE = 4;\n\t\t  this.WAITING_HEADER_LINE_END = 5;\n\t\t  this.WAITING_HEADER_BLOCK_END = 6;\n\t\t  this.WAITING_BODY = 7;\n\t\t\n\t\t  this.current = this.WAITING_STATUS_LINE;\n\t\t  this.statusLine = \"\";\n\t\t  this.headers = {};\n\t\t  this.headerName = \"\";\n\t\t  this.headerValue = \"\";\n\t\t  this.bodyParse = null;\n\t\t}\n\t\t```\n\t\t\n\t- å¯¹ response å­—ç¬¦æµè¿›è¡Œå¤„ç†ã€‚å¾ªç¯è¯»å–æµä¸­æ•°æ®\n\t\t\n\t\t```javascript\n\t\t// å­—ç¬¦æµå¤„ç†\n\t\treceive(string) {\n\t\t    for (let i = 0; i < string.length; i++) {\n\t\t      this.receiveChar(string.charAt(i));\n\t\t    }\n\t\t}\t\t\n  \t\t```\n  \t\t\n\t - å¯¹æµä¸­å•ä¸ªå­—ç¬¦è¿›è¡Œæ‰«æ\n  \t\t\n  \t\t```javascript\n\t\t  receiveChar(char) {\n\t\t    if (this.current === this.WAITING_STATUS_LINE) {\n\t\t      if (char === '\\r') {\n\t\t        this.current = this.WAITING_STATUS_LINE_END\n\t\t      } else {\n\t\t        this.statusLine += char\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_STATUS_LINE_END) {\n\t\t      if (char === '\\n') {\n\t\t        this.current = this.WAITING_HEADER_NAME\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_HEADER_NAME) {\n\t\t      if (char === ':') {\n\t\t        this.current = this.WAITING_HEADER_SPACE\n\t\t      } else if (char === '\\r') {\n\t\t        this.current = this.WAITING_HEADER_BLOCK_END\n\t\t        if (this.headers['Transfer-Encoding'] === 'chunked')\n\t\t          this.bodyParse = new TrunkedBodyParser();\n\t\t      } else {\n\t\t        this.headerName += char\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_HEADER_SPACE) {\n\t\t      if (char === ' ') {\n\t\t        this.current = this.WAITING_HEADER_VALUE\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_HEADER_VALUE) {\n\t\t      if (char === '\\r') {\n\t\t        this.current = this.WAITING_HEADER_LINE_END\n\t\t        this.headers[this.headerName] = this.headerValue\n\t\t        this.headerName = \"\"\n\t\t        this.headerValue = \"\"\n\t\t      } else {\n\t\t        this.headerValue += char\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_HEADER_LINE_END) {\n\t\t      if (char === '\\n') {\n\t\t        this.current = this.WAITING_HEADER_NAME\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_HEADER_BLOCK_END) {\n\t\t      if (char === '\\n') {\n\t\t        this.current = this.WAITING_BODY\n\t\t      }\n\t\t    }\n\t\t\n\t\t    else if (this.current === this.WAITING_BODY) {\n\t\t      this.bodyParse.receiveChar(char)\n\t\t    }\n\t\t  }  \t\t\n  \t\t```\n  \t\t\t\n   - ç®€å•åˆ†æ server ç«¯çš„ TrunkBody \n\t\t\t\n\t\t```javascript\n\t\t2 // ä¸‹ä¸€è¡Œ trunk é•¿åº¦\n\t\tok // trunk å†…å®¹\n\t\t0 // trunk ç»ˆæ­¢ï¼Œå†æ²¡æœ‰å†…å®¹\n\t\t```\n\t\t- å¼€å§‹æˆ‘ä»¬çš„ TrunkedBodyParser çŠ¶æ€æœº constructor ç®€å•ç¼–å†™\n\t\n\t\t\t```javascript\n\t\t\t  constructor() {\n\t\t\t    this.WAITING_LENGTH = 0;\n\t\t\t    this.WAITING_LENGTH_LINE_END = 1;\n\t\t\t    this.READING_TRUNK = 2;\n\t\t\t    this.WAITING_NEW_LINE = 3;\n\t\t\t    this.WAITING_NEW_LINE_END = 4;\n\t\t\t    this.FINISHED_NEW_LINE = 5;\n\t\t\t    this.FINISHED_NEW_LINE_END = 6;\n\t\t\t    this.isFinished = false;\n\t\t\t    this.length = 0;\n\t\t\t    this.content = [];\n\t\t\t    this.current = this.WAITING_LENGTH;\n\t\t\t  }\n\t\t\t```\n\t\t\t- TrunkBody å­—ç¬¦å¤„ç†\n\t\t\t\n\t\t\t\t```javascript\n\t\t\t\t  // å­—ç¬¦æµå¤„ç†\n\t\t\t\t  receiveChar(char) {\n\t\t\t\t    if (this.current === this.WAITING_LENGTH) {\n\t\t\t\t      if (char === '\\r') {\n\t\t\t\t        if (this.length === 0) {\n\t\t\t\t          this.current = this.FINISHED_NEW_LINE\n\t\t\t\t        } else {\n\t\t\t\t          this.current = this.WAITING_LENGTH_LINE_END\n\t\t\t\t        }\n\t\t\t\t      } else {\n\t\t\t\t        this.length *= 10\n\t\t\t\t        this.length += char.charCodeAt(0) - '0'.charCodeAt(0)\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t\t\t\n\t\t\t\t    else if (this.current === this.WAITING_LENGTH_LINE_END) {\n\t\t\t\t      if (char === '\\n') {\n\t\t\t\t        this.current = this.READING_TRUNK\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t\t\t\n\t\t\t\t    else if (this.current === this.READING_TRUNK) {\n\t\t\t\t      this.content.push(char)\n\t\t\t\t      this.length --\n\t\t\t\t      if (this.length === 0) {\n\t\t\t\t        this.current = this.WAITING_NEW_LINE\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t\t\t\n\t\t\t\t    else if (this.current === this.WAITING_NEW_LINE) {\n\t\t\t\t      if (char === '\\r') {\n\t\t\t\t        this.current = this.WAITING_NEW_LINE_END\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t\t\t\n\t\t\t\t    else if (this.current === this.WAITING_NEW_LINE_END) {\n\t\t\t\t      if (char === '\\n') {\n\t\t\t\t        this.current = this.WAITING_LENGTH\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t\t\t\n\t\t\t\t    else if (this.current === this.FINISHED_NEW_LINE) {\n\t\t\t\t      if (char === '\\r') {\n\t\t\t\t        this.current = this.FINISHED_NEW_LINE_END\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t\t\t\n\t\t\t\t    else if (this.current === this.FINISHED_NEW_LINE_END) {\n\t\t\t\t      if (char === '\\n') {\n\t\t\t\t        this.isFinished = true\n\t\t\t\t      }\n\t\t\t\t    }\n\t\t  \t\t  }\n\t\t\t\t```\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\t\t\t\t\n- è¿è¡Œç»“æœ\n\t- ![client](http://p0.meituan.net/myvideodistribute/50256a14d9171b06c374dc7e6894efcf61275.png)\n\t- ![server](http://p0.meituan.net/myvideodistribute/23ed78fb0b5598952897249eb5ae2fbb29575.png)\n\n\t\n## é”™è¯¯ä¿®æ”¹\n\n\n- ![é”™è¯¯ä¿®æ”¹](http://p0.meituan.net/myvideodistribute/fd4b58c42c99e0f2754c025b6682307650941.png)\n- server ç«¯é•¿åº¦è®¡ç®—ä¸æ˜¯åè¿›åˆ¶ï¼Œæ˜¯åå…­è¿›åˆ¶\n\n\n  ```javascript\n  // å­—ç¬¦æµå¤„ç†\n  receiveChar(char) {\n    if (this.current === this.WAITING_LENGTH) {\n      if (char === '\\r') {\n        if (this.length === 0) {\n          this.current = this.FINISHED_NEW_LINE\n        } else {\n          this.current = this.WAITING_LENGTH_LINE_END\n        }\n      } else {\n        this.length *= 16\n        this.length += parseInt(char, 16)\n      }\n    }\n    ...\n  }\n  ```\n## å‚è€ƒæ–‡çŒ®\n- [Node.js v12.16.3 Documentation](https://nodejs.org/dist/latest-v12.x/docs/api/http.html)\n\n\n\n## å†™åœ¨åé¢\n- [å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser)\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","slug":"Toy-Browser-DAY1","published":1,"updated":"2020-10-27T15:21:11.263Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7y001pfw9k6l5d5rsc","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>implementation of a toy-browser ğŸ™†</li>\n</ul>\n<a id=\"more\"></a>\n\n\n<h2 id=\"å®è·µè¿‡ç¨‹\"><a href=\"#å®è·µè¿‡ç¨‹\" class=\"headerlink\" title=\"å®è·µè¿‡ç¨‹\"></a>å®è·µè¿‡ç¨‹</h2><h3 id=\"Server-ç«¯å®ç°\"><a href=\"#Server-ç«¯å®ç°\" class=\"headerlink\" title=\"Server ç«¯å®ç°\"></a>Server ç«¯å®ç°</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Returns content-type = text/plain</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.setHeader(<span class=\"string\">'Content-Type'</span>, <span class=\"string\">'text/html'</span>);</span><br><span class=\"line\">  res.setHeader(<span class=\"string\">'X-Foo'</span>, <span class=\"string\">'bar'</span>);</span><br><span class=\"line\">  res.writeHead(<span class=\"number\">200</span>, &#123; <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/plain'</span> &#125;);</span><br><span class=\"line\">  res.end(<span class=\"string\">'ok'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">server.listen(<span class=\"number\">8088</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>When headers have been set with response.setHeader(), they will be merged with any headers passed to response.writeHead(), with the headers passed to <strong>response.writeHead() given precedence</strong>.</p>\n</blockquote>\n<ul>\n<li>writeHead ä¸ setHeader ç›¸æ¯”ï¼Œå…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§</li>\n<li>æ‰€ä»¥æœ€ç»ˆçš„è¯·æ±‚ä½“å¤´ â€˜Content-Typeâ€™: â€˜text/plainâ€™</li>\n<li>è¿™é‡Œæˆ‘ä»¬è®©å®ƒç›‘å¬ 8088 ç«¯å£ï¼Œå› ä¸ºé»˜è®¤çš„ 80ç«¯å£ï¼Œå¯èƒ½ä¼šå­˜åœ¨å ç”¨</li>\n<li>æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ï¼Œå¯¹ <a href=\"http://127.0.0.1:8088/\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:8088/</a> è®¿é—®ï¼Œæœ€åæˆ‘ä»¬è¦åˆ©ç”¨ toy-browser ç®€å•æ¨¡æ‹Ÿ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/aa69465245fc64274c75ac4e5aab244691470.png\" alt=\"æµè§ˆå™¨è¡Œä¸º\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Client-ç«¯å®ç°\"><a href=\"#Client-ç«¯å®ç°\" class=\"headerlink\" title=\"Client ç«¯å®ç°\"></a>Client ç«¯å®ç°</h3><h4 id=\"ç¬¬ä¸€ç‰ˆï¼šç®€å•å®ç°\"><a href=\"#ç¬¬ä¸€ç‰ˆï¼šç®€å•å®ç°\" class=\"headerlink\" title=\"ç¬¬ä¸€ç‰ˆï¼šç®€å•å®ç°\"></a>ç¬¬ä¸€ç‰ˆï¼šç®€å•å®ç°</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> net = <span class=\"built_in\">require</span>(<span class=\"string\">'net'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> client = net.createConnection(&#123; <span class=\"attr\">port</span>: <span class=\"number\">8088</span> &#125;, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 'connect' listener.</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'connected to server!'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'POST / HTTP/1.1\\r\\n'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'HOST: 127.0.0.1\\r\\n'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'Content-Length: 9\\r\\n'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'Content-Type: application/x-www-form-urlencoded\\r\\n'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'\\r\\n'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'name=elle'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'\\r\\n'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">client.on(<span class=\"string\">'data'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(data.toString());</span><br><span class=\"line\">  client.end();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">client.on(<span class=\"string\">'end'</span>, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'disconnected from server'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬å¼€å¯æœåŠ¡ç«¯<blockquote>\n<p>node server.js</p>\n</blockquote>\n</li>\n</ul>\n<ul>\n<li>å†å¼€å¯å®¢æˆ·ç«¯<blockquote>\n<p>node client.js</p>\n</blockquote>\n</li>\n</ul>\n<ul>\n<li><p>è¿è¡Œæˆªå›¾</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5a4f9f936d87d43335d08670a03205a448885.png\" alt=\"client\"></li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/115d90c1e9de7f974d7749988e01c87332973.png\" alt=\"server\"></li>\n</ul>\n</li>\n<li><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯·æ±‚æˆåŠŸçš„å‘å‡ºï¼Œå¹¶ä¸”æœåŠ¡ç«¯ä¹Ÿè¿›è¡Œäº†æ­£ç¡®çš„åé¦ˆã€‚</p>\n<ul>\n<li>è¯·æ±‚ä½“ï¼šname=elleï¼Œâ€™content-lengthâ€™: â€˜9â€™</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ç¬¬äºŒç‰ˆï¼šå¯¹-request-è¿›è¡Œç®€å•å°è£…\"><a href=\"#ç¬¬äºŒç‰ˆï¼šå¯¹-request-è¿›è¡Œç®€å•å°è£…\" class=\"headerlink\" title=\"ç¬¬äºŒç‰ˆï¼šå¯¹ request è¿›è¡Œç®€å•å°è£…\"></a>ç¬¬äºŒç‰ˆï¼šå¯¹ request è¿›è¡Œç®€å•å°è£…</h4><ul>\n<li><p>ç®€å•åˆ†æ request æ„é€ å™¨æ‰€éœ€å†…å®¹</p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/7663a0cff7c034fbeadce907b2e445b588991.png\" alt=\"request\"></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// request line</span></span><br><span class=\"line\">  <span class=\"comment\">// method, url = host + port + path</span></span><br><span class=\"line\"><span class=\"comment\">// headers</span></span><br><span class=\"line\">  <span class=\"comment\">// Content-Type</span></span><br><span class=\"line\">    <span class=\"comment\">// Content-Type: application/x-www-form-urlencoded</span></span><br><span class=\"line\">    <span class=\"comment\">// Content-Type: application/json</span></span><br><span class=\"line\">    <span class=\"comment\">// Content-Type: multipart/form-data</span></span><br><span class=\"line\">    <span class=\"comment\">// Content-Type: text/xml</span></span><br><span class=\"line\">  <span class=\"comment\">// Content-Length</span></span><br><span class=\"line\"><span class=\"comment\">// body: k-v</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>æˆ‘ä»¬å¯ä»¥ç®€å•å†™å‡ºå°è£…åçš„ reqeust</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Request</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// request line</span></span><br><span class=\"line\">      <span class=\"comment\">// method, url = host + port + path</span></span><br><span class=\"line\">    <span class=\"comment\">// headers</span></span><br><span class=\"line\">      <span class=\"comment\">// Content-Type</span></span><br><span class=\"line\">        <span class=\"comment\">// Content-Type: application/x-www-form-urlencoded</span></span><br><span class=\"line\">        <span class=\"comment\">// Content-Type: application/json</span></span><br><span class=\"line\">        <span class=\"comment\">// Content-Type: multipart/form-data</span></span><br><span class=\"line\">        <span class=\"comment\">// Content-Type: text/xml</span></span><br><span class=\"line\">      <span class=\"comment\">// Content-Length</span></span><br><span class=\"line\">    <span class=\"comment\">// body: k-v</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.method = options.method || <span class=\"string\">\"GET\"</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.host = options.host</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.port = options.port || <span class=\"number\">80</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.path = options.path || <span class=\"string\">\"/\"</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.body = options.body || &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.headers = options.headers || &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.headers[<span class=\"string\">\"Content-Type\"</span>]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.headers[<span class=\"string\">\"Content-Type\"</span>] = <span class=\"string\">\"application/x-www-form-urlencoded\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.headers[<span class=\"string\">\"Content-Type\"</span>] === <span class=\"string\">\"application/json\"</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.bodyText = <span class=\"built_in\">JSON</span>.stringify(<span class=\"keyword\">this</span>.body)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.headers[<span class=\"string\">\"Content-Type\"</span>] === <span class=\"string\">\"application/x-www-form-urlencoded\"</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.bodyText = <span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.body).map(<span class=\"function\"><span class=\"params\">key</span> =&gt;</span> <span class=\"string\">`<span class=\"subst\">$&#123;key&#125;</span>=<span class=\"subst\">$&#123;<span class=\"built_in\">encodeURIComponent</span>(<span class=\"keyword\">this</span>.body[key])&#125;</span>`</span>).join(<span class=\"string\">'&amp;'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// calculate Content-Length</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.headers[<span class=\"string\">\"Content-Length\"</span>] = <span class=\"keyword\">this</span>.bodyText.length</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  toString() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.method&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.path&#125;</span> HTTP/1.1\\r\\nHOST: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.host&#125;</span>\\r\\n<span class=\"subst\">$&#123;<span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.headers).map(key =&gt; <span class=\"string\">`<span class=\"subst\">$&#123;key&#125;</span>: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.headers[key]&#125;</span>`</span>).join(<span class=\"string\">'\\r\\n'</span>)&#125;</span>\\r\\n\\r\\n<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.bodyText&#125;</span>\\r\\n`</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>å†åˆ©ç”¨å°è£…åçš„ request è¿›è¡Œ client è®¿é—®</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> net = <span class=\"built_in\">require</span>(<span class=\"string\">\"net\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> client = net.createConnection(&#123;</span><br><span class=\"line\">  host: <span class=\"string\">\"127.0.0.1\"</span>,</span><br><span class=\"line\">  port: <span class=\"number\">8088</span></span><br><span class=\"line\">&#125;, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 'connect' listener.</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'connected to server!'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> options = &#123;</span><br><span class=\"line\">    method: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">    path: <span class=\"string\">\"/\"</span>,</span><br><span class=\"line\">    host: <span class=\"string\">\"127.0.0.1\"</span>,</span><br><span class=\"line\">    port: <span class=\"number\">8088</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      [<span class=\"string\">\"X-Foo2\"</span>]: <span class=\"string\">\"customed\"</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    body: &#123;</span><br><span class=\"line\">      name: <span class=\"string\">\"elle\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> request = <span class=\"keyword\">new</span> Request(options)</span><br><span class=\"line\">  client.write(request.toString());</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">client.on(<span class=\"string\">'data'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(data.toString());</span><br><span class=\"line\">  client.end();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">client.on(<span class=\"string\">'end'</span>, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'disconnected from server'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">client.on(<span class=\"string\">'error'</span>, (err) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  client.end();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/19807e0f02f52d93b9391645a286cfdf48815.png\" alt=\"å°è£…åçš„request\"></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ç¬¬ä¸‰ç‰ˆï¼šå¯¹-responseParse-è¿›è¡Œå°è£…\"><a href=\"#ç¬¬ä¸‰ç‰ˆï¼šå¯¹-responseParse-è¿›è¡Œå°è£…\" class=\"headerlink\" title=\"ç¬¬ä¸‰ç‰ˆï¼šå¯¹ responseParse è¿›è¡Œå°è£…\"></a>ç¬¬ä¸‰ç‰ˆï¼šå¯¹ responseParse è¿›è¡Œå°è£…</h4><ul>\n<li><p>ç®€å•åˆ†æ response å†…å®¹æ¡†æ¶</p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/9c17bab40bf615430215e496d9bdfeb5147249.png\" alt=\"responseå†…å®¹æ¡†æ¶\"></p>\n</li>\n<li><p>å¼€å§‹æˆ‘ä»¬çš„çŠ¶æ€æœº constructor ç®€å•ç¼–å†™</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_STATUS_LINE = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_STATUS_LINE_END = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_HEADER_NAME = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_HEADER_SPACE = <span class=\"number\">3</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_HEADER_VALUE = <span class=\"number\">4</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_HEADER_LINE_END = <span class=\"number\">5</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_HEADER_BLOCK_END = <span class=\"number\">6</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_BODY = <span class=\"number\">7</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_STATUS_LINE;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.statusLine = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.headers = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.headerName = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.headerValue = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.bodyParse = <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>å¯¹ response å­—ç¬¦æµè¿›è¡Œå¤„ç†ã€‚å¾ªç¯è¯»å–æµä¸­æ•°æ®</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å­—ç¬¦æµå¤„ç†</span></span><br><span class=\"line\">receive(string) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; string.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.receiveChar(string.charAt(i));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>å¯¹æµä¸­å•ä¸ªå­—ç¬¦è¿›è¡Œæ‰«æ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">receiveChar(char) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_STATUS_LINE) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_STATUS_LINE_END</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.statusLine += char</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_STATUS_LINE_END) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\n'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_HEADER_NAME</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_HEADER_NAME) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">':'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_HEADER_SPACE</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_HEADER_BLOCK_END</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.headers[<span class=\"string\">'Transfer-Encoding'</span>] === <span class=\"string\">'chunked'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.bodyParse = <span class=\"keyword\">new</span> TrunkedBodyParser();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.headerName += char</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_HEADER_SPACE) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">' '</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_HEADER_VALUE</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_HEADER_VALUE) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_HEADER_LINE_END</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.headers[<span class=\"keyword\">this</span>.headerName] = <span class=\"keyword\">this</span>.headerValue</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.headerName = <span class=\"string\">\"\"</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.headerValue = <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.headerValue += char</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_HEADER_LINE_END) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\n'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_HEADER_NAME</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_HEADER_BLOCK_END) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\n'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_BODY</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_BODY) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.bodyParse.receiveChar(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ç®€å•åˆ†æ server ç«¯çš„ TrunkBody </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">2</span> <span class=\"comment\">// ä¸‹ä¸€è¡Œ trunk é•¿åº¦</span></span><br><span class=\"line\">ok <span class=\"comment\">// trunk å†…å®¹</span></span><br><span class=\"line\"><span class=\"number\">0</span> <span class=\"comment\">// trunk ç»ˆæ­¢ï¼Œå†æ²¡æœ‰å†…å®¹</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>å¼€å§‹æˆ‘ä»¬çš„ TrunkedBodyParser çŠ¶æ€æœº constructor ç®€å•ç¼–å†™</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_LENGTH = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_LENGTH_LINE_END = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.READING_TRUNK = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_NEW_LINE = <span class=\"number\">3</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_NEW_LINE_END = <span class=\"number\">4</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.FINISHED_NEW_LINE = <span class=\"number\">5</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.FINISHED_NEW_LINE_END = <span class=\"number\">6</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.isFinished = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.length = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.content = [];</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_LENGTH;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>TrunkBody å­—ç¬¦å¤„ç†</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å­—ç¬¦æµå¤„ç†</span></span><br><span class=\"line\">receiveChar(char) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_LENGTH) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.FINISHED_NEW_LINE</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_LENGTH_LINE_END</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.length *= <span class=\"number\">10</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.length += char.charCodeAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.charCodeAt(<span class=\"number\">0</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_LENGTH_LINE_END) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\n'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.READING_TRUNK</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.READING_TRUNK) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.content.push(char)</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.length --</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_NEW_LINE</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_NEW_LINE) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_NEW_LINE_END</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_NEW_LINE_END) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\n'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_LENGTH</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.FINISHED_NEW_LINE) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.FINISHED_NEW_LINE_END</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.FINISHED_NEW_LINE_END) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\n'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.isFinished = <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/50256a14d9171b06c374dc7e6894efcf61275.png\" alt=\"client\"></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/23ed78fb0b5598952897249eb5ae2fbb29575.png\" alt=\"server\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"é”™è¯¯ä¿®æ”¹\"><a href=\"#é”™è¯¯ä¿®æ”¹\" class=\"headerlink\" title=\"é”™è¯¯ä¿®æ”¹\"></a>é”™è¯¯ä¿®æ”¹</h2><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/fd4b58c42c99e0f2754c025b6682307650941.png\" alt=\"é”™è¯¯ä¿®æ”¹\"></li>\n<li>server ç«¯é•¿åº¦è®¡ç®—ä¸æ˜¯åè¿›åˆ¶ï¼Œæ˜¯åå…­è¿›åˆ¶</li>\n</ul>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å­—ç¬¦æµå¤„ç†</span></span><br><span class=\"line\">receiveChar(char) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_LENGTH) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.FINISHED_NEW_LINE</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_LENGTH_LINE_END</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.length *= <span class=\"number\">16</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.length += <span class=\"built_in\">parseInt</span>(char, <span class=\"number\">16</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"https://nodejs.org/dist/latest-v12.x/docs/api/http.html\" target=\"_blank\" rel=\"noopener\">Node.js v12.16.3 Documentation</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>implementation of a toy-browser ğŸ™†</li>\n</ul>","more":"<h2 id=\"å®è·µè¿‡ç¨‹\"><a href=\"#å®è·µè¿‡ç¨‹\" class=\"headerlink\" title=\"å®è·µè¿‡ç¨‹\"></a>å®è·µè¿‡ç¨‹</h2><h3 id=\"Server-ç«¯å®ç°\"><a href=\"#Server-ç«¯å®ç°\" class=\"headerlink\" title=\"Server ç«¯å®ç°\"></a>Server ç«¯å®ç°</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Returns content-type = text/plain</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.setHeader(<span class=\"string\">'Content-Type'</span>, <span class=\"string\">'text/html'</span>);</span><br><span class=\"line\">  res.setHeader(<span class=\"string\">'X-Foo'</span>, <span class=\"string\">'bar'</span>);</span><br><span class=\"line\">  res.writeHead(<span class=\"number\">200</span>, &#123; <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/plain'</span> &#125;);</span><br><span class=\"line\">  res.end(<span class=\"string\">'ok'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">server.listen(<span class=\"number\">8088</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>When headers have been set with response.setHeader(), they will be merged with any headers passed to response.writeHead(), with the headers passed to <strong>response.writeHead() given precedence</strong>.</p>\n</blockquote>\n<ul>\n<li>writeHead ä¸ setHeader ç›¸æ¯”ï¼Œå…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§</li>\n<li>æ‰€ä»¥æœ€ç»ˆçš„è¯·æ±‚ä½“å¤´ â€˜Content-Typeâ€™: â€˜text/plainâ€™</li>\n<li>è¿™é‡Œæˆ‘ä»¬è®©å®ƒç›‘å¬ 8088 ç«¯å£ï¼Œå› ä¸ºé»˜è®¤çš„ 80ç«¯å£ï¼Œå¯èƒ½ä¼šå­˜åœ¨å ç”¨</li>\n<li>æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ï¼Œå¯¹ <a href=\"http://127.0.0.1:8088/\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:8088/</a> è®¿é—®ï¼Œæœ€åæˆ‘ä»¬è¦åˆ©ç”¨ toy-browser ç®€å•æ¨¡æ‹Ÿ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/aa69465245fc64274c75ac4e5aab244691470.png\" alt=\"æµè§ˆå™¨è¡Œä¸º\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Client-ç«¯å®ç°\"><a href=\"#Client-ç«¯å®ç°\" class=\"headerlink\" title=\"Client ç«¯å®ç°\"></a>Client ç«¯å®ç°</h3><h4 id=\"ç¬¬ä¸€ç‰ˆï¼šç®€å•å®ç°\"><a href=\"#ç¬¬ä¸€ç‰ˆï¼šç®€å•å®ç°\" class=\"headerlink\" title=\"ç¬¬ä¸€ç‰ˆï¼šç®€å•å®ç°\"></a>ç¬¬ä¸€ç‰ˆï¼šç®€å•å®ç°</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> net = <span class=\"built_in\">require</span>(<span class=\"string\">'net'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> client = net.createConnection(&#123; <span class=\"attr\">port</span>: <span class=\"number\">8088</span> &#125;, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 'connect' listener.</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'connected to server!'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'POST / HTTP/1.1\\r\\n'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'HOST: 127.0.0.1\\r\\n'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'Content-Length: 9\\r\\n'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'Content-Type: application/x-www-form-urlencoded\\r\\n'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'\\r\\n'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'name=elle'</span>);</span><br><span class=\"line\">  client.write(<span class=\"string\">'\\r\\n'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">client.on(<span class=\"string\">'data'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(data.toString());</span><br><span class=\"line\">  client.end();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">client.on(<span class=\"string\">'end'</span>, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'disconnected from server'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬å¼€å¯æœåŠ¡ç«¯<blockquote>\n<p>node server.js</p>\n</blockquote>\n</li>\n</ul>\n<ul>\n<li>å†å¼€å¯å®¢æˆ·ç«¯<blockquote>\n<p>node client.js</p>\n</blockquote>\n</li>\n</ul>\n<ul>\n<li><p>è¿è¡Œæˆªå›¾</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5a4f9f936d87d43335d08670a03205a448885.png\" alt=\"client\"></li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/115d90c1e9de7f974d7749988e01c87332973.png\" alt=\"server\"></li>\n</ul>\n</li>\n<li><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯·æ±‚æˆåŠŸçš„å‘å‡ºï¼Œå¹¶ä¸”æœåŠ¡ç«¯ä¹Ÿè¿›è¡Œäº†æ­£ç¡®çš„åé¦ˆã€‚</p>\n<ul>\n<li>è¯·æ±‚ä½“ï¼šname=elleï¼Œâ€™content-lengthâ€™: â€˜9â€™</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ç¬¬äºŒç‰ˆï¼šå¯¹-request-è¿›è¡Œç®€å•å°è£…\"><a href=\"#ç¬¬äºŒç‰ˆï¼šå¯¹-request-è¿›è¡Œç®€å•å°è£…\" class=\"headerlink\" title=\"ç¬¬äºŒç‰ˆï¼šå¯¹ request è¿›è¡Œç®€å•å°è£…\"></a>ç¬¬äºŒç‰ˆï¼šå¯¹ request è¿›è¡Œç®€å•å°è£…</h4><ul>\n<li><p>ç®€å•åˆ†æ request æ„é€ å™¨æ‰€éœ€å†…å®¹</p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/7663a0cff7c034fbeadce907b2e445b588991.png\" alt=\"request\"></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// request line</span></span><br><span class=\"line\">  <span class=\"comment\">// method, url = host + port + path</span></span><br><span class=\"line\"><span class=\"comment\">// headers</span></span><br><span class=\"line\">  <span class=\"comment\">// Content-Type</span></span><br><span class=\"line\">    <span class=\"comment\">// Content-Type: application/x-www-form-urlencoded</span></span><br><span class=\"line\">    <span class=\"comment\">// Content-Type: application/json</span></span><br><span class=\"line\">    <span class=\"comment\">// Content-Type: multipart/form-data</span></span><br><span class=\"line\">    <span class=\"comment\">// Content-Type: text/xml</span></span><br><span class=\"line\">  <span class=\"comment\">// Content-Length</span></span><br><span class=\"line\"><span class=\"comment\">// body: k-v</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>æˆ‘ä»¬å¯ä»¥ç®€å•å†™å‡ºå°è£…åçš„ reqeust</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Request</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// request line</span></span><br><span class=\"line\">      <span class=\"comment\">// method, url = host + port + path</span></span><br><span class=\"line\">    <span class=\"comment\">// headers</span></span><br><span class=\"line\">      <span class=\"comment\">// Content-Type</span></span><br><span class=\"line\">        <span class=\"comment\">// Content-Type: application/x-www-form-urlencoded</span></span><br><span class=\"line\">        <span class=\"comment\">// Content-Type: application/json</span></span><br><span class=\"line\">        <span class=\"comment\">// Content-Type: multipart/form-data</span></span><br><span class=\"line\">        <span class=\"comment\">// Content-Type: text/xml</span></span><br><span class=\"line\">      <span class=\"comment\">// Content-Length</span></span><br><span class=\"line\">    <span class=\"comment\">// body: k-v</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.method = options.method || <span class=\"string\">\"GET\"</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.host = options.host</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.port = options.port || <span class=\"number\">80</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.path = options.path || <span class=\"string\">\"/\"</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.body = options.body || &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.headers = options.headers || &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.headers[<span class=\"string\">\"Content-Type\"</span>]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.headers[<span class=\"string\">\"Content-Type\"</span>] = <span class=\"string\">\"application/x-www-form-urlencoded\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.headers[<span class=\"string\">\"Content-Type\"</span>] === <span class=\"string\">\"application/json\"</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.bodyText = <span class=\"built_in\">JSON</span>.stringify(<span class=\"keyword\">this</span>.body)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.headers[<span class=\"string\">\"Content-Type\"</span>] === <span class=\"string\">\"application/x-www-form-urlencoded\"</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.bodyText = <span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.body).map(<span class=\"function\"><span class=\"params\">key</span> =&gt;</span> <span class=\"string\">`<span class=\"subst\">$&#123;key&#125;</span>=<span class=\"subst\">$&#123;<span class=\"built_in\">encodeURIComponent</span>(<span class=\"keyword\">this</span>.body[key])&#125;</span>`</span>).join(<span class=\"string\">'&amp;'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// calculate Content-Length</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.headers[<span class=\"string\">\"Content-Length\"</span>] = <span class=\"keyword\">this</span>.bodyText.length</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  toString() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.method&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.path&#125;</span> HTTP/1.1\\r\\nHOST: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.host&#125;</span>\\r\\n<span class=\"subst\">$&#123;<span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.headers).map(key =&gt; <span class=\"string\">`<span class=\"subst\">$&#123;key&#125;</span>: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.headers[key]&#125;</span>`</span>).join(<span class=\"string\">'\\r\\n'</span>)&#125;</span>\\r\\n\\r\\n<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.bodyText&#125;</span>\\r\\n`</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>å†åˆ©ç”¨å°è£…åçš„ request è¿›è¡Œ client è®¿é—®</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> net = <span class=\"built_in\">require</span>(<span class=\"string\">\"net\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> client = net.createConnection(&#123;</span><br><span class=\"line\">  host: <span class=\"string\">\"127.0.0.1\"</span>,</span><br><span class=\"line\">  port: <span class=\"number\">8088</span></span><br><span class=\"line\">&#125;, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 'connect' listener.</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'connected to server!'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> options = &#123;</span><br><span class=\"line\">    method: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">    path: <span class=\"string\">\"/\"</span>,</span><br><span class=\"line\">    host: <span class=\"string\">\"127.0.0.1\"</span>,</span><br><span class=\"line\">    port: <span class=\"number\">8088</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      [<span class=\"string\">\"X-Foo2\"</span>]: <span class=\"string\">\"customed\"</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    body: &#123;</span><br><span class=\"line\">      name: <span class=\"string\">\"elle\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> request = <span class=\"keyword\">new</span> Request(options)</span><br><span class=\"line\">  client.write(request.toString());</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">client.on(<span class=\"string\">'data'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(data.toString());</span><br><span class=\"line\">  client.end();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">client.on(<span class=\"string\">'end'</span>, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'disconnected from server'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">client.on(<span class=\"string\">'error'</span>, (err) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  client.end();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/19807e0f02f52d93b9391645a286cfdf48815.png\" alt=\"å°è£…åçš„request\"></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ç¬¬ä¸‰ç‰ˆï¼šå¯¹-responseParse-è¿›è¡Œå°è£…\"><a href=\"#ç¬¬ä¸‰ç‰ˆï¼šå¯¹-responseParse-è¿›è¡Œå°è£…\" class=\"headerlink\" title=\"ç¬¬ä¸‰ç‰ˆï¼šå¯¹ responseParse è¿›è¡Œå°è£…\"></a>ç¬¬ä¸‰ç‰ˆï¼šå¯¹ responseParse è¿›è¡Œå°è£…</h4><ul>\n<li><p>ç®€å•åˆ†æ response å†…å®¹æ¡†æ¶</p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/9c17bab40bf615430215e496d9bdfeb5147249.png\" alt=\"responseå†…å®¹æ¡†æ¶\"></p>\n</li>\n<li><p>å¼€å§‹æˆ‘ä»¬çš„çŠ¶æ€æœº constructor ç®€å•ç¼–å†™</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_STATUS_LINE = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_STATUS_LINE_END = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_HEADER_NAME = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_HEADER_SPACE = <span class=\"number\">3</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_HEADER_VALUE = <span class=\"number\">4</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_HEADER_LINE_END = <span class=\"number\">5</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_HEADER_BLOCK_END = <span class=\"number\">6</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_BODY = <span class=\"number\">7</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_STATUS_LINE;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.statusLine = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.headers = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.headerName = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.headerValue = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.bodyParse = <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>å¯¹ response å­—ç¬¦æµè¿›è¡Œå¤„ç†ã€‚å¾ªç¯è¯»å–æµä¸­æ•°æ®</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å­—ç¬¦æµå¤„ç†</span></span><br><span class=\"line\">receive(string) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; string.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.receiveChar(string.charAt(i));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>å¯¹æµä¸­å•ä¸ªå­—ç¬¦è¿›è¡Œæ‰«æ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">receiveChar(char) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_STATUS_LINE) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_STATUS_LINE_END</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.statusLine += char</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_STATUS_LINE_END) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\n'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_HEADER_NAME</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_HEADER_NAME) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">':'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_HEADER_SPACE</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_HEADER_BLOCK_END</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.headers[<span class=\"string\">'Transfer-Encoding'</span>] === <span class=\"string\">'chunked'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.bodyParse = <span class=\"keyword\">new</span> TrunkedBodyParser();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.headerName += char</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_HEADER_SPACE) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">' '</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_HEADER_VALUE</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_HEADER_VALUE) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_HEADER_LINE_END</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.headers[<span class=\"keyword\">this</span>.headerName] = <span class=\"keyword\">this</span>.headerValue</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.headerName = <span class=\"string\">\"\"</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.headerValue = <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.headerValue += char</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_HEADER_LINE_END) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\n'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_HEADER_NAME</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_HEADER_BLOCK_END) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\n'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_BODY</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_BODY) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.bodyParse.receiveChar(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ç®€å•åˆ†æ server ç«¯çš„ TrunkBody </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">2</span> <span class=\"comment\">// ä¸‹ä¸€è¡Œ trunk é•¿åº¦</span></span><br><span class=\"line\">ok <span class=\"comment\">// trunk å†…å®¹</span></span><br><span class=\"line\"><span class=\"number\">0</span> <span class=\"comment\">// trunk ç»ˆæ­¢ï¼Œå†æ²¡æœ‰å†…å®¹</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>å¼€å§‹æˆ‘ä»¬çš„ TrunkedBodyParser çŠ¶æ€æœº constructor ç®€å•ç¼–å†™</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_LENGTH = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_LENGTH_LINE_END = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.READING_TRUNK = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_NEW_LINE = <span class=\"number\">3</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.WAITING_NEW_LINE_END = <span class=\"number\">4</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.FINISHED_NEW_LINE = <span class=\"number\">5</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.FINISHED_NEW_LINE_END = <span class=\"number\">6</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.isFinished = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.length = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.content = [];</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_LENGTH;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>TrunkBody å­—ç¬¦å¤„ç†</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å­—ç¬¦æµå¤„ç†</span></span><br><span class=\"line\">receiveChar(char) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_LENGTH) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.FINISHED_NEW_LINE</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_LENGTH_LINE_END</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.length *= <span class=\"number\">10</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.length += char.charCodeAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.charCodeAt(<span class=\"number\">0</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_LENGTH_LINE_END) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\n'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.READING_TRUNK</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.READING_TRUNK) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.content.push(char)</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.length --</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_NEW_LINE</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_NEW_LINE) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_NEW_LINE_END</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_NEW_LINE_END) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\n'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_LENGTH</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.FINISHED_NEW_LINE) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.FINISHED_NEW_LINE_END</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.FINISHED_NEW_LINE_END) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\n'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.isFinished = <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/50256a14d9171b06c374dc7e6894efcf61275.png\" alt=\"client\"></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/23ed78fb0b5598952897249eb5ae2fbb29575.png\" alt=\"server\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"é”™è¯¯ä¿®æ”¹\"><a href=\"#é”™è¯¯ä¿®æ”¹\" class=\"headerlink\" title=\"é”™è¯¯ä¿®æ”¹\"></a>é”™è¯¯ä¿®æ”¹</h2><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/fd4b58c42c99e0f2754c025b6682307650941.png\" alt=\"é”™è¯¯ä¿®æ”¹\"></li>\n<li>server ç«¯é•¿åº¦è®¡ç®—ä¸æ˜¯åè¿›åˆ¶ï¼Œæ˜¯åå…­è¿›åˆ¶</li>\n</ul>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å­—ç¬¦æµå¤„ç†</span></span><br><span class=\"line\">receiveChar(char) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.current === <span class=\"keyword\">this</span>.WAITING_LENGTH) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">'\\r'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.FINISHED_NEW_LINE</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.current = <span class=\"keyword\">this</span>.WAITING_LENGTH_LINE_END</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.length *= <span class=\"number\">16</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.length += <span class=\"built_in\">parseInt</span>(char, <span class=\"number\">16</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"https://nodejs.org/dist/latest-v12.x/docs/api/http.html\" target=\"_blank\" rel=\"noopener\">Node.js v12.16.3 Documentation</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Toy-Browser-DAY3","date":"2020-05-17T08:04:30.000Z","description":["æµè§ˆå™¨ -- toy-browser"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n## å†™åœ¨å‰é¢\n- implementation of a toy-browser ğŸ™†\n- æˆ‘ä»¬å¼€å§‹è¿›å…¥åˆ° CSS Computing å•¦ï¼ï¼ï¼ğŸ˜˜\n- ![CSS Computing](http://p0.meituan.net/myvideodistribute/4bb352346db82d88a68035a6ddad906c81827.png)\n<!-- more -->\n\n\n## å®è·µè®°å½•\n### å®è·µå‡†å¤‡\n\n> npm install css\n\n\n### ç¬¬ä¸€æ­¥ï¼šæ”¶é›† CSS è§„åˆ™\n- é‡åˆ° style æ ‡ç­¾æ—¶ï¼Œæˆ‘ä»¬æŠŠ CSS è§„åˆ™ä¿å­˜èµ·æ¥\n- è¿™é‡Œæˆ‘ä»¬è°ƒç”¨ CSS Parser æ¥åˆ†æ CSS è§„åˆ™\n- è¿™é‡Œæˆ‘ä»¬å¿…é¡»è¦ä»”ç»†ç ”ç©¶æ­¤åº“åˆ†æ CSS è§„åˆ™çš„æ ¼å¼\n- computeCss1.js\n\n\t```javascript\n\tconst css = require('css')\n\t\n\t... some code\n\t\n\t// åŠ å…¥ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼ŒaddCSSRulesï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠ CSS è§„åˆ™æš‚å­˜åˆ°ä¸€ä¸ªæ•°ç»„é‡Œ\n\tlet rules = []\n\tfunction addCSSRules(text) {\n\t  const ast = css.parse(text)\n\t  console.log(JSON.stringify(ast, null, \"    \"))\n\t  rules.push(...ast.stylesheet.rules)\n\t}\n\t\n\t...some code\n\t\n\tfunction emit(token) {\n\t\n\t  ... some code\n\t  \n\t   else if (token.type == \"endTag\") {\n\t    if (top.tagName != token.tagName) {\n\t      throw new Error(\"Tag start end doesn't match\")\n\t    } else {\n\t      // console.log('pop', stack.pop())\n\t      /** é‡åˆ° style æ ‡ç­¾æ—¶ï¼Œæ‰§è¡Œæ·»åŠ  CCS è§„åˆ™çš„æ“ä½œ */\n\t      if (top.tagName === \"style\") {\n\t        addCSSRules(top.children[0].content)\n\t      }\n\t      stack.pop()\n\t    }\n\t    currentTextNode = null\n\t  }\n\t  \n\t  ... some code\n\t  \n\t}\n\t\n\t```\n- è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å°†æ·»åŠ  CSS è§„åˆ™æ“ä½œè‡³å…ƒç´  popå‰ï¼Œå…ƒç´  push å\n\t- å…ƒç´  push åï¼Œä¹Ÿå°±æ˜¯ style æ ‡ç­¾çš„å­å…ƒç´ æ–‡æœ¬èŠ‚ç‚¹ï¼Œè¿˜æœªæŒ‚è½½åˆ° style æ ‡ç­¾ä¸Šï¼Œstyles æ ‡ç­¾å­å…ƒç´ è¿˜æ˜¯ç©ºçš„\n\t- pop å‰ï¼Œæˆ‘ä»¬å¯ä»¥å–åˆ°è¿™ä¸ªå…ƒç´ \n\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬ä¸€æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/01014f5e30127ef5f2b23dd6b7fa44ac153947.png)\n- æ–‡æœ¬ç»“æœ\n\n\t```json\n\t{\n\t    \"type\": \"stylesheet\",\n\t    \"stylesheet\": {\n\t        \"rules\": [\n\t            {\n\t                \"type\": \"rule\",\n\t                \"selectors\": [\n\t                    \"body div #myid\"\n\t                ],\n\t                \"declarations\": [\n\t                    {\n\t                        \"type\": \"declaration\",\n\t                        \"property\": \"width\",\n\t                        \"value\": \"100px\",\n\t                        \"position\": {\n\t                            \"start\": {\n\t                                \"line\": 3,\n\t                                \"column\": 9\n\t                            },\n\t                            \"end\": {\n\t                                \"line\": 3,\n\t                                \"column\": 20\n\t                            }\n\t                        }\n\t                    },\n\t                    {\n\t                        \"type\": \"declaration\",\n\t                        \"property\": \"background-color\",\n\t                        \"value\": \"#ff5000\",\n\t                        \"position\": {\n\t                            \"start\": {\n\t                                \"line\": 4,\n\t                                \"column\": 9\n\t                            },\n\t                            \"end\": {\n\t                                \"line\": 4,\n\t                                \"column\": 34\n\t                            }\n\t                        }\n\t                    }\n\t                ],\n\t                \"position\": {\n\t                    \"start\": {\n\t                        \"line\": 2,\n\t                        \"column\": 5\n\t                    },\n\t                    \"end\": {\n\t                        \"line\": 5,\n\t                        \"column\": 6\n\t                    }\n\t                }\n\t            },\n\t            {\n\t                \"type\": \"rule\",\n\t                \"selectors\": [\n\t                    \"body div img\"\n\t                ],\n\t                \"declarations\": [\n\t                    {\n\t                        \"type\": \"declaration\",\n\t                        \"property\": \"width\",\n\t                        \"value\": \"30px\",\n\t                        \"position\": {\n\t                            \"start\": {\n\t                                \"line\": 7,\n\t                                \"column\": 9\n\t                            },\n\t                            \"end\": {\n\t                                \"line\": 7,\n\t                                \"column\": 19\n\t                            }\n\t                        }\n\t                    },\n\t                    {\n\t                        \"type\": \"declaration\",\n\t                        \"property\": \"background-color\",\n\t                        \"value\": \"#ff1111\",\n\t                        \"position\": {\n\t                            \"start\": {\n\t                                \"line\": 8,\n\t                                \"column\": 9\n\t                            },\n\t                            \"end\": {\n\t                                \"line\": 8,\n\t                                \"column\": 34\n\t                            }\n\t                        }\n\t                    }\n\t                ],\n\t                \"position\": {\n\t                    \"start\": {\n\t                        \"line\": 6,\n\t                        \"column\": 5\n\t                    },\n\t                    \"end\": {\n\t                        \"line\": 9,\n\t                        \"column\": 6\n\t                    }\n\t                }\n\t            }\n\t        ],\n\t        \"parsingErrors\": []\n\t    }\n\t}\n\t```\n\n\n\n### ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨\n- å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…ƒç´ åï¼Œç«‹å³è®¡ç®— CSS\n- ç†è®ºä¸Šï¼Œå½“æˆ‘ä»¬åˆ†æä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ‰€æœ‰ CSS è§„åˆ™å·²ç»æ”¶é›†å®Œæ¯•\n- åœ¨çœŸå®æµè§ˆå™¨ä¸­ï¼Œå¯èƒ½é‡åˆ°å†™åœ¨ body çš„ style æ ‡ç­¾ï¼Œéœ€è¦é‡æ–° CSS è®¡ç®—çš„æƒ…å†µï¼Œè¿™é‡Œæˆ‘ä»¬å¿½ç•¥\n- computeCSS2.js\n\t\n\t```javascript\n\t\n\t...some code\n\t\n\t\n\tfunction computeCSS(element) {\n\t  console.log(rules)\n\t  console.log(\"-=-=-=-=-=-=-=\")\n\t  console.log(\"compute CSS for Element-=-=-=-=-=-=\", element)\n\t  console.log(\"********************************************\")\n\t}\n\t\n\t...some code\n\t\n\tfunction emit(token) {\n\t\n\t  ... some code\n\t  \n\t  if (token.type == \"startTag\") {\n\t    let element = {\n\t      type: \"element\",\n\t      children: [],\n\t      attributes: []\n\t    }\n\t\n\t    element.tagName = token.tagName\n\t\n\t    for (let p in token) {\n\t      if (p != \"type\" && p != \"tagName\") {\n\t        element.attributes.push({\n\t          name: p,\n\t          value: token[p]\n\t        })\n\t      }\n\t    }\n\t\n\t    computeCSS(element)\n\t\n\t    top.children.push(element)\n\t    element.parent = top\n\t\n\t    if (!token.isSelfClosing)\n\t      stack.push(element)\n\t    \n\t    currentTextNode = null\n\t    // console.log('push', element)\n\t  }\n\t  \n\t  ... some code\n\t\n\t}\n\t```\n\t\n- è¿™é‡Œä¸€ä¸ªå…ƒç´ çš„åˆ›å»ºåï¼ŒtagName, å±æ€§éƒ½åŠ å¥½åï¼Œå°±åº”è¯¥æœ‰ä¸€ä¸ª cumputeCSS è¿‡ç¨‹\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨](http://p1.meituan.net/myvideodistribute/634ec08db6e9b90b38c17656be424e2d127292.png)\n\n\n\n### ç¬¬ä¸‰æ­¥ï¼šè·å–çˆ¶å…ƒç´ åºåˆ—\n- åœ¨ computeCss å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»çŸ¥é“å…ƒç´ çš„æ‰€æœ‰çˆ¶å…ƒç´ æ‰èƒ½åˆ¤æ–­å…ƒç´ ä¸è§„åˆ™æ˜¯å¦åŒ¹é…\n- æˆ‘ä»¬ä»ä¸Šä¸€æ­¥éª¤çš„ stackï¼Œå¯ä»¥è·å–æœ¬å…ƒç´ æ‰€æœ‰çš„çˆ¶å…ƒç´ \n- å› ä¸ºæˆ‘ä»¬é¦–å…ˆè·å–çš„æ˜¯â€å½“å‰å…ƒç´ â€œï¼Œæ‰€ä»¥æˆ‘ä»¬è·å¾—å’Œè®¡ç®—çˆ¶å…ƒç´ åŒ¹é…çš„é¡ºåºæ˜¯ä»å†…å‘å¤–\n\t- ![ä»å†…å‘å¤– CSS åŒ¹é…](http://p1.meituan.net/myvideodistribute/68af300e9e207b8a190b7c3893f17ff036554.png)\n- computeCSS3.js\n\t\n\t```javascript\n\t\n\t...some code\n\t\n\t\n\tfunction computeCSS(element) {\n      const elements = stack.slice().reverse()\n\t}\n\t\n\t...some code\n\t\n\t```\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬ä¸‰æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/706c9c25bc5a46f41f8bc11ba2a6854e250838.png)\n- stack.slice() æ‹·è´åŸæ•°ç»„ï¼Œä¸åœ¨ stack ä¸­æ“ä½œï¼Œé˜²å¾¡å¼ç¼–ç¨‹é¿å…å½±å“ stack\n\t\n\n\n### ç¬¬å››æ­¥ï¼šæ‹†åˆ†é€‰æ‹©å™¨\n- é€‰æ‹©å™¨ä¹Ÿè¦ä»å½“å‰å…ƒç´ ä»å¤–æ’åˆ—\n- å¤æ‚é€‰æ‹©å™¨æ‹†æˆé’ˆå¯¹å•ä¸ªå…ƒç´ çš„é€‰æ‹©å™¨ï¼Œç”¨å¾ªç¯åŒ¹é…çˆ¶å…ƒç´ é˜Ÿåˆ—\n- computeCSS4.js\n\t\n\t```javascript\n\t\n\t...some code\n\t\n\t\n\nfunction specificity(selector) {\n  const p = [0, 0, 0, 0]\n  const selectorParts = selector.split(\" \")\n  for (let part of selectorParts) {\n    if (part.charAt(0) == \"#\") {\n      p[1] += 1\n    } else if (part.charAt(0) == \".\") {\n      p[2] += 1\n    } else {\n      p[3] += 1\n    }\n  }\n  return p\n}\n\nfunction compare(sp1, sp2) {\n  if (sp1[0] - sp2[0]) {\n    return sp1[0] - sp2[0]\n  }\n  if (sp1[1] - sp2[1]) {\n    return sp1[1] - sp2[1]\n  }\n  if (sp1[2] - sp2[2]) {\n    return sp1[2] - sp2[2]\n  }\n  return sp1[3] - sp2[3]\n}\n\n\tfunction computeCSS(element) {\n      const elements = stack.slice().reverse()\n\n\t  if (!element.computedStyle)\n\t    element.computedStyle = {}\n\t  \n\t  for (let rule of rules) {\n\t    const selectorParts = rule.selectors[0].split(\" \").reverse()\n\t\n\t    if (!match(element, selectorParts[0]))\n\t      continue\n\t\n\t    let matched = false\n\t\n\t    let j = 1\n\t\n\t    for (let i = 0; i < elements.length; i ++) {\n\t      if (match(elements[i], selectorParts[j])) {\n\t        j ++\n\t      }\n\t    }\n\t    if (j >= selectorParts.length) {\n\t      matched = true\n\t    }\n\t    if (matched) { // åŒ¹é…æˆåŠŸ\n\t      console.log(\"Element\", element, \"matched rule\", rule)\n\t    }\n\t  }\n\t}\n\t\n\t...some code\n\t\n\t```\n\n\n### ç¬¬äº”æ­¥ï¼šè®¡ç®—é€‰æ‹©å™¨ä¸å…ƒç´ åŒ¹é…\n- æ ¹æ®é€‰æ‹©å™¨çš„ç±»å‹å’Œå…ƒç´ å±æ€§ï¼Œè®¡ç®—æ˜¯å¦ä¸å½“å‰å…ƒç´ åŒ¹é…\n- è¿™é‡Œä»…å®ç°äº†ä¸‰ç§åŸºæœ¬é€‰æ‹©å™¨ï¼Œå®é™…çš„æµè§ˆå™¨ä¸­è¦å¤„ç†å¤åˆé€‰æ‹©å™¨\n- computeCSS5.js\n\t\n\t```javascript\n\t\n\t...some code\n\t\n\t\n\tfunction match(element, selector) {\n\t  if (!selector || !element.attributes) \n\t    return false\n\t  \n\t  if (selector.charAt(0) == \"#\") {\n\t    const attr = element.attributes.filter(attr => attr.name === \"id\")[0]\n\t    if (attr && attr.value === selector.replace(\"#\", ''))\n\t      return true\n\t  } else if (selector.charAt(0) == \".\") {\n\t    const attr = element.attributes.filter(attr => attr.name === \"class\")[0]\n\t    if (attr && attr.value === selector.replace(\".\", ''))\n\t      return true\n\t  } else {\n\t    if (element.tagName === selector) {\n\t      return true\n\t    }\n\t  }\n\t  return false\n\t}\n\t\n\t...some code\n\t\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬äº”æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/e23fb1db77239166c990b52468b24451353540.png)\n\n#### ç¬¬äº”æ­¥ä¼˜åŒ–ï¼šå®ç°æ”¯æŒç©ºæ ¼çš„ Class é€‰æ‹©å™¨\n- å‡å¦‚æˆ‘ä»¬çš„ html æ”¹æˆè¿™æ ·ï¼š\n\n\t```html\n\t<html maaa=a >\n\t\t<head>\n\t\t    <style>\n\t\tbody div #myid{\n\t\t    width:100px;\n\t\t    background-color: #ff5000;\n\t\t}\n\t\tbody div img{\n\t\t    width:30px;\n\t\t    background-color: #ff1111;\n\t\t}\n\t\t\n\t\tbody div .cls1 {\n\t\t  background-color: #ff9906;\n\t\t}\n\t\t    </style>\n\t\t</head>\n\t\t<body>\n\t\t    <div>\n\t\t        <img id=\"myid\"/>\n\t\t        <img class=\"cls1 cls2\"/>\n\t\t    </div>\n\t\t</body>\n\t</html>\n\t```\n- åœ¨ &lt;img&gt; å¢åŠ å¤šä¸ª class é€‰æ‹©å™¨ï¼Œé‚£æˆ‘ä»¬çš„é€‰æ‹©å™¨ match å¯ä»¥æ”¹æˆ\n\n\t```javascript\n\t\n\t...some code\n\t\n\t\n\tfunction match(element, selector) {\n\t  if (!selector || !element.attributes) \n\t    return false\n\t  \n\t  if (selector.charAt(0) == \"#\") {\n\t\t    \n\t\t...some code\n\t\t\n\t\t\n\t  } else if (selector.charAt(0) == \".\") {\n\t    const attr = element.attributes.filter(attr => attr.name === \"class\")[0]\n\t    if (attr) {\n\t      const attrClassArray = attr.value.split(' ')\n\t      for (let attrClass of attrClassArray) {\n\t        if (attrClass === selector.replace(\".\", '')) {\n\t          return true\n\t        }\n\t      }\n\t    }\n\t  } else {\n\t\t\t    \n\t\t...some code\n\t\t\n\t\t\n\t  }\n\t\t...some code\n\t\t\n\t}\n\t\n\t...some code\n\t\n\t```\n- æ€è·¯ï¼š\n\t- æˆ‘ä»¬å¯ä»¥çœ‹åˆ°\n\t\t- ![å¤š class é€‰æ‹©å™¨](http://p0.meituan.net/myvideodistribute/a8b9d9396713239928cd8b0af216535e40897.png)\n\t- æˆ‘ä»¬å¯ä»¥å°† å…ƒç´  attr æ ¹æ®ç©ºæ ¼åˆ†éš”ï¼Œå†åˆ©ç”¨å¾ªç¯åŒ¹é…\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬äº”æ­¥ä¼˜åŒ–è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/1d5533479cdb7d6c1a0af20acdfc4e71146017.png)\n\n### ç¬¬å…­æ­¥ï¼šç”Ÿæˆ computed å±æ€§\n- ä¸€æ—¦é€‰æ‹©åŒ¹é…ï¼Œå°±åº”ç”¨é€‰æ‹©å™¨åˆ°å…ƒç´ ä¸Šï¼Œå½¢æˆ computedStyle\n- computeCSS6.js\n\t\n\t```javascript\n\t\n\t...some code\n\t\n\t\n\tfunction computeCSS(element) {\n\t\t\n\t\t...some code\n\t\t\n\t\t\n\t    if (matched) { // åŒ¹é…æˆåŠŸ\n\t      const computedStyle = element.computedStyle\n\t      for (let declaration of rule.declarations) {\n\t        if (!computedStyle[declaration.property]) {\n\t          computedStyle[declaration.property] = {}\n\t        }\n\t        computedStyle[declaration.property].value = declaration.value\n\t      }\n\t      console.log(element.computedStyle)\n\t    }\n\t\t\n\t\t...some code\n\t\t\n\t\t\n\t}\n\t\n\t...some code\n\t\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬å…­æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/71888ca9220eb11196bc00eb407fb05980361.png)\n\n### ç¬¬ä¸ƒæ­¥ï¼šç¡®å®šè§„åˆ™è¦†ç›–å…³ç³»\n- CSS è§„åˆ™æ ¹æ® specificity å’Œåæ¥ä¼˜å…ˆè§„åˆ™è¦†ç›–\n- specificity æ˜¯ä¸ªå››å…ƒç»„ï¼Œè¶Šå·¦è¾¹æƒé‡è¶Šé«˜\n- ä¸€ä¸ª CSS è§„åˆ™çš„ specificity æ ¹æ®åŒ…å«çš„ç®€å•é€‰æ‹©å™¨ç›¸åŠ è€Œæˆ\n- ![selectors-3 specificity](http://p0.meituan.net/myvideodistribute/a50f3ae53878adbacbdcb7798632605e283940.png)\n- computeCSS7.js\n\t\n\t```javascript\n\t\n\t...some code\n\n\tfunction specificity(selector) {\n\t  const p = [0, 0, 0, 0]\n\t  const selectorParts = selector.split(\" \")\n\t  for (let part of selectorParts) {\n\t    if (part.charAt(0) == \"#\") {\n\t      p[1] += 1\n\t    } else if (part.charAt(0) == \".\") {\n\t      p[2] += 1\n\t    } else {\n\t      p[3] += 1\n\t    }\n\t  }\n\t  return p\n\t}\n\t\n\tfunction compare(sp1, sp2) {\n\t  if (sp1[0] - sp2[0]) {\n\t    return sp1[0] - sp2[0]\n\t  }\n\t  if (sp1[1] - sp2[1]) {\n\t    return sp1[1] - sp2[1]\n\t  }\n\t  if (sp1[2] - sp2[2]) {\n\t    return sp1[2] - sp2[2]\n\t  }\n\t  return sp1[3] - sp2[3]\n\t}\n\t\n\t\n\tfunction computeCSS(element) {\n\t\t\n\t\t...some code\n\t\t\n\t\t\n\t    if (matched) { // åŒ¹é…æˆåŠŸ\n\t      const sp = specificity(rule.selectors[0])\n\t      const computedStyle = element.computedStyle\n\t      for (let declaration of rule.declarations) {\n\t        if (!computedStyle[declaration.property]) {\n\t          computedStyle[declaration.property] = {}\n\t        }\n\t        if (!computedStyle[declaration.property].specificity) {\n\t          computedStyle[declaration.property].value = declaration.value\n\t          computedStyle[declaration.property].specificity = sp\n\t        } else if (compare(computedStyle[declaration.property].specificity, sp) < 0) {\n\t          computedStyle[declaration.property].value = declaration.value\n\t          computedStyle[declaration.property].specificity = sp\n\t        }\n\t      }\n\t    }\n\t\t\t\n\t\t...some code\n\t\t\n\t\t\n\t}\n\t\n\t...some code\n\t\n\t```\n\t\n\n\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬ä¸ƒæ­¥è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/063c59deee7d24e437fdff9920aec8ea216464.png)\n\t- ![ç¬¬ä¸ƒæ­¥è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/c3a7fb73c0d001fef48137c4a23144b6211501.png)\n\n\n### å‚è€ƒæ–‡çŒ®\n- [CSS ä¼˜å…ˆçº§æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ](https://developer.mozilla.org/zh-CN/docs/Web/CSS/Specificity)\n- [selectors-3 specificity](https://drafts.csswg.org/selectors-3/#specificity)\n\n\n## å†™åœ¨åé¢\n- [å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser)\n- å­¦è€Œä¸æ€åˆ™ç½”\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","source":"_posts/Toy-Browser-DAY3.md","raw":"---\ntitle: Toy-Browser-DAY3\ndate: 2020-05-17 16:04:30\ntags:\n- æµè§ˆå™¨\ncategories:\n- æµè§ˆå™¨\ndescription:\n- æµè§ˆå™¨ -- toy-browser\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n## å†™åœ¨å‰é¢\n- implementation of a toy-browser ğŸ™†\n- æˆ‘ä»¬å¼€å§‹è¿›å…¥åˆ° CSS Computing å•¦ï¼ï¼ï¼ğŸ˜˜\n- ![CSS Computing](http://p0.meituan.net/myvideodistribute/4bb352346db82d88a68035a6ddad906c81827.png)\n<!-- more -->\n\n\n## å®è·µè®°å½•\n### å®è·µå‡†å¤‡\n\n> npm install css\n\n\n### ç¬¬ä¸€æ­¥ï¼šæ”¶é›† CSS è§„åˆ™\n- é‡åˆ° style æ ‡ç­¾æ—¶ï¼Œæˆ‘ä»¬æŠŠ CSS è§„åˆ™ä¿å­˜èµ·æ¥\n- è¿™é‡Œæˆ‘ä»¬è°ƒç”¨ CSS Parser æ¥åˆ†æ CSS è§„åˆ™\n- è¿™é‡Œæˆ‘ä»¬å¿…é¡»è¦ä»”ç»†ç ”ç©¶æ­¤åº“åˆ†æ CSS è§„åˆ™çš„æ ¼å¼\n- computeCss1.js\n\n\t```javascript\n\tconst css = require('css')\n\t\n\t... some code\n\t\n\t// åŠ å…¥ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼ŒaddCSSRulesï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠ CSS è§„åˆ™æš‚å­˜åˆ°ä¸€ä¸ªæ•°ç»„é‡Œ\n\tlet rules = []\n\tfunction addCSSRules(text) {\n\t  const ast = css.parse(text)\n\t  console.log(JSON.stringify(ast, null, \"    \"))\n\t  rules.push(...ast.stylesheet.rules)\n\t}\n\t\n\t...some code\n\t\n\tfunction emit(token) {\n\t\n\t  ... some code\n\t  \n\t   else if (token.type == \"endTag\") {\n\t    if (top.tagName != token.tagName) {\n\t      throw new Error(\"Tag start end doesn't match\")\n\t    } else {\n\t      // console.log('pop', stack.pop())\n\t      /** é‡åˆ° style æ ‡ç­¾æ—¶ï¼Œæ‰§è¡Œæ·»åŠ  CCS è§„åˆ™çš„æ“ä½œ */\n\t      if (top.tagName === \"style\") {\n\t        addCSSRules(top.children[0].content)\n\t      }\n\t      stack.pop()\n\t    }\n\t    currentTextNode = null\n\t  }\n\t  \n\t  ... some code\n\t  \n\t}\n\t\n\t```\n- è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å°†æ·»åŠ  CSS è§„åˆ™æ“ä½œè‡³å…ƒç´  popå‰ï¼Œå…ƒç´  push å\n\t- å…ƒç´  push åï¼Œä¹Ÿå°±æ˜¯ style æ ‡ç­¾çš„å­å…ƒç´ æ–‡æœ¬èŠ‚ç‚¹ï¼Œè¿˜æœªæŒ‚è½½åˆ° style æ ‡ç­¾ä¸Šï¼Œstyles æ ‡ç­¾å­å…ƒç´ è¿˜æ˜¯ç©ºçš„\n\t- pop å‰ï¼Œæˆ‘ä»¬å¯ä»¥å–åˆ°è¿™ä¸ªå…ƒç´ \n\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬ä¸€æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/01014f5e30127ef5f2b23dd6b7fa44ac153947.png)\n- æ–‡æœ¬ç»“æœ\n\n\t```json\n\t{\n\t    \"type\": \"stylesheet\",\n\t    \"stylesheet\": {\n\t        \"rules\": [\n\t            {\n\t                \"type\": \"rule\",\n\t                \"selectors\": [\n\t                    \"body div #myid\"\n\t                ],\n\t                \"declarations\": [\n\t                    {\n\t                        \"type\": \"declaration\",\n\t                        \"property\": \"width\",\n\t                        \"value\": \"100px\",\n\t                        \"position\": {\n\t                            \"start\": {\n\t                                \"line\": 3,\n\t                                \"column\": 9\n\t                            },\n\t                            \"end\": {\n\t                                \"line\": 3,\n\t                                \"column\": 20\n\t                            }\n\t                        }\n\t                    },\n\t                    {\n\t                        \"type\": \"declaration\",\n\t                        \"property\": \"background-color\",\n\t                        \"value\": \"#ff5000\",\n\t                        \"position\": {\n\t                            \"start\": {\n\t                                \"line\": 4,\n\t                                \"column\": 9\n\t                            },\n\t                            \"end\": {\n\t                                \"line\": 4,\n\t                                \"column\": 34\n\t                            }\n\t                        }\n\t                    }\n\t                ],\n\t                \"position\": {\n\t                    \"start\": {\n\t                        \"line\": 2,\n\t                        \"column\": 5\n\t                    },\n\t                    \"end\": {\n\t                        \"line\": 5,\n\t                        \"column\": 6\n\t                    }\n\t                }\n\t            },\n\t            {\n\t                \"type\": \"rule\",\n\t                \"selectors\": [\n\t                    \"body div img\"\n\t                ],\n\t                \"declarations\": [\n\t                    {\n\t                        \"type\": \"declaration\",\n\t                        \"property\": \"width\",\n\t                        \"value\": \"30px\",\n\t                        \"position\": {\n\t                            \"start\": {\n\t                                \"line\": 7,\n\t                                \"column\": 9\n\t                            },\n\t                            \"end\": {\n\t                                \"line\": 7,\n\t                                \"column\": 19\n\t                            }\n\t                        }\n\t                    },\n\t                    {\n\t                        \"type\": \"declaration\",\n\t                        \"property\": \"background-color\",\n\t                        \"value\": \"#ff1111\",\n\t                        \"position\": {\n\t                            \"start\": {\n\t                                \"line\": 8,\n\t                                \"column\": 9\n\t                            },\n\t                            \"end\": {\n\t                                \"line\": 8,\n\t                                \"column\": 34\n\t                            }\n\t                        }\n\t                    }\n\t                ],\n\t                \"position\": {\n\t                    \"start\": {\n\t                        \"line\": 6,\n\t                        \"column\": 5\n\t                    },\n\t                    \"end\": {\n\t                        \"line\": 9,\n\t                        \"column\": 6\n\t                    }\n\t                }\n\t            }\n\t        ],\n\t        \"parsingErrors\": []\n\t    }\n\t}\n\t```\n\n\n\n### ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨\n- å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…ƒç´ åï¼Œç«‹å³è®¡ç®— CSS\n- ç†è®ºä¸Šï¼Œå½“æˆ‘ä»¬åˆ†æä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ‰€æœ‰ CSS è§„åˆ™å·²ç»æ”¶é›†å®Œæ¯•\n- åœ¨çœŸå®æµè§ˆå™¨ä¸­ï¼Œå¯èƒ½é‡åˆ°å†™åœ¨ body çš„ style æ ‡ç­¾ï¼Œéœ€è¦é‡æ–° CSS è®¡ç®—çš„æƒ…å†µï¼Œè¿™é‡Œæˆ‘ä»¬å¿½ç•¥\n- computeCSS2.js\n\t\n\t```javascript\n\t\n\t...some code\n\t\n\t\n\tfunction computeCSS(element) {\n\t  console.log(rules)\n\t  console.log(\"-=-=-=-=-=-=-=\")\n\t  console.log(\"compute CSS for Element-=-=-=-=-=-=\", element)\n\t  console.log(\"********************************************\")\n\t}\n\t\n\t...some code\n\t\n\tfunction emit(token) {\n\t\n\t  ... some code\n\t  \n\t  if (token.type == \"startTag\") {\n\t    let element = {\n\t      type: \"element\",\n\t      children: [],\n\t      attributes: []\n\t    }\n\t\n\t    element.tagName = token.tagName\n\t\n\t    for (let p in token) {\n\t      if (p != \"type\" && p != \"tagName\") {\n\t        element.attributes.push({\n\t          name: p,\n\t          value: token[p]\n\t        })\n\t      }\n\t    }\n\t\n\t    computeCSS(element)\n\t\n\t    top.children.push(element)\n\t    element.parent = top\n\t\n\t    if (!token.isSelfClosing)\n\t      stack.push(element)\n\t    \n\t    currentTextNode = null\n\t    // console.log('push', element)\n\t  }\n\t  \n\t  ... some code\n\t\n\t}\n\t```\n\t\n- è¿™é‡Œä¸€ä¸ªå…ƒç´ çš„åˆ›å»ºåï¼ŒtagName, å±æ€§éƒ½åŠ å¥½åï¼Œå°±åº”è¯¥æœ‰ä¸€ä¸ª cumputeCSS è¿‡ç¨‹\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨](http://p1.meituan.net/myvideodistribute/634ec08db6e9b90b38c17656be424e2d127292.png)\n\n\n\n### ç¬¬ä¸‰æ­¥ï¼šè·å–çˆ¶å…ƒç´ åºåˆ—\n- åœ¨ computeCss å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»çŸ¥é“å…ƒç´ çš„æ‰€æœ‰çˆ¶å…ƒç´ æ‰èƒ½åˆ¤æ–­å…ƒç´ ä¸è§„åˆ™æ˜¯å¦åŒ¹é…\n- æˆ‘ä»¬ä»ä¸Šä¸€æ­¥éª¤çš„ stackï¼Œå¯ä»¥è·å–æœ¬å…ƒç´ æ‰€æœ‰çš„çˆ¶å…ƒç´ \n- å› ä¸ºæˆ‘ä»¬é¦–å…ˆè·å–çš„æ˜¯â€å½“å‰å…ƒç´ â€œï¼Œæ‰€ä»¥æˆ‘ä»¬è·å¾—å’Œè®¡ç®—çˆ¶å…ƒç´ åŒ¹é…çš„é¡ºåºæ˜¯ä»å†…å‘å¤–\n\t- ![ä»å†…å‘å¤– CSS åŒ¹é…](http://p1.meituan.net/myvideodistribute/68af300e9e207b8a190b7c3893f17ff036554.png)\n- computeCSS3.js\n\t\n\t```javascript\n\t\n\t...some code\n\t\n\t\n\tfunction computeCSS(element) {\n      const elements = stack.slice().reverse()\n\t}\n\t\n\t...some code\n\t\n\t```\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬ä¸‰æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/706c9c25bc5a46f41f8bc11ba2a6854e250838.png)\n- stack.slice() æ‹·è´åŸæ•°ç»„ï¼Œä¸åœ¨ stack ä¸­æ“ä½œï¼Œé˜²å¾¡å¼ç¼–ç¨‹é¿å…å½±å“ stack\n\t\n\n\n### ç¬¬å››æ­¥ï¼šæ‹†åˆ†é€‰æ‹©å™¨\n- é€‰æ‹©å™¨ä¹Ÿè¦ä»å½“å‰å…ƒç´ ä»å¤–æ’åˆ—\n- å¤æ‚é€‰æ‹©å™¨æ‹†æˆé’ˆå¯¹å•ä¸ªå…ƒç´ çš„é€‰æ‹©å™¨ï¼Œç”¨å¾ªç¯åŒ¹é…çˆ¶å…ƒç´ é˜Ÿåˆ—\n- computeCSS4.js\n\t\n\t```javascript\n\t\n\t...some code\n\t\n\t\n\nfunction specificity(selector) {\n  const p = [0, 0, 0, 0]\n  const selectorParts = selector.split(\" \")\n  for (let part of selectorParts) {\n    if (part.charAt(0) == \"#\") {\n      p[1] += 1\n    } else if (part.charAt(0) == \".\") {\n      p[2] += 1\n    } else {\n      p[3] += 1\n    }\n  }\n  return p\n}\n\nfunction compare(sp1, sp2) {\n  if (sp1[0] - sp2[0]) {\n    return sp1[0] - sp2[0]\n  }\n  if (sp1[1] - sp2[1]) {\n    return sp1[1] - sp2[1]\n  }\n  if (sp1[2] - sp2[2]) {\n    return sp1[2] - sp2[2]\n  }\n  return sp1[3] - sp2[3]\n}\n\n\tfunction computeCSS(element) {\n      const elements = stack.slice().reverse()\n\n\t  if (!element.computedStyle)\n\t    element.computedStyle = {}\n\t  \n\t  for (let rule of rules) {\n\t    const selectorParts = rule.selectors[0].split(\" \").reverse()\n\t\n\t    if (!match(element, selectorParts[0]))\n\t      continue\n\t\n\t    let matched = false\n\t\n\t    let j = 1\n\t\n\t    for (let i = 0; i < elements.length; i ++) {\n\t      if (match(elements[i], selectorParts[j])) {\n\t        j ++\n\t      }\n\t    }\n\t    if (j >= selectorParts.length) {\n\t      matched = true\n\t    }\n\t    if (matched) { // åŒ¹é…æˆåŠŸ\n\t      console.log(\"Element\", element, \"matched rule\", rule)\n\t    }\n\t  }\n\t}\n\t\n\t...some code\n\t\n\t```\n\n\n### ç¬¬äº”æ­¥ï¼šè®¡ç®—é€‰æ‹©å™¨ä¸å…ƒç´ åŒ¹é…\n- æ ¹æ®é€‰æ‹©å™¨çš„ç±»å‹å’Œå…ƒç´ å±æ€§ï¼Œè®¡ç®—æ˜¯å¦ä¸å½“å‰å…ƒç´ åŒ¹é…\n- è¿™é‡Œä»…å®ç°äº†ä¸‰ç§åŸºæœ¬é€‰æ‹©å™¨ï¼Œå®é™…çš„æµè§ˆå™¨ä¸­è¦å¤„ç†å¤åˆé€‰æ‹©å™¨\n- computeCSS5.js\n\t\n\t```javascript\n\t\n\t...some code\n\t\n\t\n\tfunction match(element, selector) {\n\t  if (!selector || !element.attributes) \n\t    return false\n\t  \n\t  if (selector.charAt(0) == \"#\") {\n\t    const attr = element.attributes.filter(attr => attr.name === \"id\")[0]\n\t    if (attr && attr.value === selector.replace(\"#\", ''))\n\t      return true\n\t  } else if (selector.charAt(0) == \".\") {\n\t    const attr = element.attributes.filter(attr => attr.name === \"class\")[0]\n\t    if (attr && attr.value === selector.replace(\".\", ''))\n\t      return true\n\t  } else {\n\t    if (element.tagName === selector) {\n\t      return true\n\t    }\n\t  }\n\t  return false\n\t}\n\t\n\t...some code\n\t\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬äº”æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/e23fb1db77239166c990b52468b24451353540.png)\n\n#### ç¬¬äº”æ­¥ä¼˜åŒ–ï¼šå®ç°æ”¯æŒç©ºæ ¼çš„ Class é€‰æ‹©å™¨\n- å‡å¦‚æˆ‘ä»¬çš„ html æ”¹æˆè¿™æ ·ï¼š\n\n\t```html\n\t<html maaa=a >\n\t\t<head>\n\t\t    <style>\n\t\tbody div #myid{\n\t\t    width:100px;\n\t\t    background-color: #ff5000;\n\t\t}\n\t\tbody div img{\n\t\t    width:30px;\n\t\t    background-color: #ff1111;\n\t\t}\n\t\t\n\t\tbody div .cls1 {\n\t\t  background-color: #ff9906;\n\t\t}\n\t\t    </style>\n\t\t</head>\n\t\t<body>\n\t\t    <div>\n\t\t        <img id=\"myid\"/>\n\t\t        <img class=\"cls1 cls2\"/>\n\t\t    </div>\n\t\t</body>\n\t</html>\n\t```\n- åœ¨ &lt;img&gt; å¢åŠ å¤šä¸ª class é€‰æ‹©å™¨ï¼Œé‚£æˆ‘ä»¬çš„é€‰æ‹©å™¨ match å¯ä»¥æ”¹æˆ\n\n\t```javascript\n\t\n\t...some code\n\t\n\t\n\tfunction match(element, selector) {\n\t  if (!selector || !element.attributes) \n\t    return false\n\t  \n\t  if (selector.charAt(0) == \"#\") {\n\t\t    \n\t\t...some code\n\t\t\n\t\t\n\t  } else if (selector.charAt(0) == \".\") {\n\t    const attr = element.attributes.filter(attr => attr.name === \"class\")[0]\n\t    if (attr) {\n\t      const attrClassArray = attr.value.split(' ')\n\t      for (let attrClass of attrClassArray) {\n\t        if (attrClass === selector.replace(\".\", '')) {\n\t          return true\n\t        }\n\t      }\n\t    }\n\t  } else {\n\t\t\t    \n\t\t...some code\n\t\t\n\t\t\n\t  }\n\t\t...some code\n\t\t\n\t}\n\t\n\t...some code\n\t\n\t```\n- æ€è·¯ï¼š\n\t- æˆ‘ä»¬å¯ä»¥çœ‹åˆ°\n\t\t- ![å¤š class é€‰æ‹©å™¨](http://p0.meituan.net/myvideodistribute/a8b9d9396713239928cd8b0af216535e40897.png)\n\t- æˆ‘ä»¬å¯ä»¥å°† å…ƒç´  attr æ ¹æ®ç©ºæ ¼åˆ†éš”ï¼Œå†åˆ©ç”¨å¾ªç¯åŒ¹é…\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬äº”æ­¥ä¼˜åŒ–è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/1d5533479cdb7d6c1a0af20acdfc4e71146017.png)\n\n### ç¬¬å…­æ­¥ï¼šç”Ÿæˆ computed å±æ€§\n- ä¸€æ—¦é€‰æ‹©åŒ¹é…ï¼Œå°±åº”ç”¨é€‰æ‹©å™¨åˆ°å…ƒç´ ä¸Šï¼Œå½¢æˆ computedStyle\n- computeCSS6.js\n\t\n\t```javascript\n\t\n\t...some code\n\t\n\t\n\tfunction computeCSS(element) {\n\t\t\n\t\t...some code\n\t\t\n\t\t\n\t    if (matched) { // åŒ¹é…æˆåŠŸ\n\t      const computedStyle = element.computedStyle\n\t      for (let declaration of rule.declarations) {\n\t        if (!computedStyle[declaration.property]) {\n\t          computedStyle[declaration.property] = {}\n\t        }\n\t        computedStyle[declaration.property].value = declaration.value\n\t      }\n\t      console.log(element.computedStyle)\n\t    }\n\t\t\n\t\t...some code\n\t\t\n\t\t\n\t}\n\t\n\t...some code\n\t\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬å…­æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/71888ca9220eb11196bc00eb407fb05980361.png)\n\n### ç¬¬ä¸ƒæ­¥ï¼šç¡®å®šè§„åˆ™è¦†ç›–å…³ç³»\n- CSS è§„åˆ™æ ¹æ® specificity å’Œåæ¥ä¼˜å…ˆè§„åˆ™è¦†ç›–\n- specificity æ˜¯ä¸ªå››å…ƒç»„ï¼Œè¶Šå·¦è¾¹æƒé‡è¶Šé«˜\n- ä¸€ä¸ª CSS è§„åˆ™çš„ specificity æ ¹æ®åŒ…å«çš„ç®€å•é€‰æ‹©å™¨ç›¸åŠ è€Œæˆ\n- ![selectors-3 specificity](http://p0.meituan.net/myvideodistribute/a50f3ae53878adbacbdcb7798632605e283940.png)\n- computeCSS7.js\n\t\n\t```javascript\n\t\n\t...some code\n\n\tfunction specificity(selector) {\n\t  const p = [0, 0, 0, 0]\n\t  const selectorParts = selector.split(\" \")\n\t  for (let part of selectorParts) {\n\t    if (part.charAt(0) == \"#\") {\n\t      p[1] += 1\n\t    } else if (part.charAt(0) == \".\") {\n\t      p[2] += 1\n\t    } else {\n\t      p[3] += 1\n\t    }\n\t  }\n\t  return p\n\t}\n\t\n\tfunction compare(sp1, sp2) {\n\t  if (sp1[0] - sp2[0]) {\n\t    return sp1[0] - sp2[0]\n\t  }\n\t  if (sp1[1] - sp2[1]) {\n\t    return sp1[1] - sp2[1]\n\t  }\n\t  if (sp1[2] - sp2[2]) {\n\t    return sp1[2] - sp2[2]\n\t  }\n\t  return sp1[3] - sp2[3]\n\t}\n\t\n\t\n\tfunction computeCSS(element) {\n\t\t\n\t\t...some code\n\t\t\n\t\t\n\t    if (matched) { // åŒ¹é…æˆåŠŸ\n\t      const sp = specificity(rule.selectors[0])\n\t      const computedStyle = element.computedStyle\n\t      for (let declaration of rule.declarations) {\n\t        if (!computedStyle[declaration.property]) {\n\t          computedStyle[declaration.property] = {}\n\t        }\n\t        if (!computedStyle[declaration.property].specificity) {\n\t          computedStyle[declaration.property].value = declaration.value\n\t          computedStyle[declaration.property].specificity = sp\n\t        } else if (compare(computedStyle[declaration.property].specificity, sp) < 0) {\n\t          computedStyle[declaration.property].value = declaration.value\n\t          computedStyle[declaration.property].specificity = sp\n\t        }\n\t      }\n\t    }\n\t\t\t\n\t\t...some code\n\t\t\n\t\t\n\t}\n\t\n\t...some code\n\t\n\t```\n\t\n\n\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬ä¸ƒæ­¥è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/063c59deee7d24e437fdff9920aec8ea216464.png)\n\t- ![ç¬¬ä¸ƒæ­¥è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/c3a7fb73c0d001fef48137c4a23144b6211501.png)\n\n\n### å‚è€ƒæ–‡çŒ®\n- [CSS ä¼˜å…ˆçº§æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ](https://developer.mozilla.org/zh-CN/docs/Web/CSS/Specificity)\n- [selectors-3 specificity](https://drafts.csswg.org/selectors-3/#specificity)\n\n\n## å†™åœ¨åé¢\n- [å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser)\n- å­¦è€Œä¸æ€åˆ™ç½”\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","slug":"Toy-Browser-DAY3","published":1,"updated":"2020-10-27T15:21:11.264Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u7z001tfw9kcrdn236z","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>implementation of a toy-browser ğŸ™†</li>\n<li>æˆ‘ä»¬å¼€å§‹è¿›å…¥åˆ° CSS Computing å•¦ï¼ï¼ï¼ğŸ˜˜</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/4bb352346db82d88a68035a6ddad906c81827.png\" alt=\"CSS Computing\"><a id=\"more\"></a>\n\n\n</li>\n</ul>\n<h2 id=\"å®è·µè®°å½•\"><a href=\"#å®è·µè®°å½•\" class=\"headerlink\" title=\"å®è·µè®°å½•\"></a>å®è·µè®°å½•</h2><h3 id=\"å®è·µå‡†å¤‡\"><a href=\"#å®è·µå‡†å¤‡\" class=\"headerlink\" title=\"å®è·µå‡†å¤‡\"></a>å®è·µå‡†å¤‡</h3><blockquote>\n<p>npm install css</p>\n</blockquote>\n<h3 id=\"ç¬¬ä¸€æ­¥ï¼šæ”¶é›†-CSS-è§„åˆ™\"><a href=\"#ç¬¬ä¸€æ­¥ï¼šæ”¶é›†-CSS-è§„åˆ™\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šæ”¶é›† CSS è§„åˆ™\"></a>ç¬¬ä¸€æ­¥ï¼šæ”¶é›† CSS è§„åˆ™</h3><ul>\n<li><p>é‡åˆ° style æ ‡ç­¾æ—¶ï¼Œæˆ‘ä»¬æŠŠ CSS è§„åˆ™ä¿å­˜èµ·æ¥</p>\n</li>\n<li><p>è¿™é‡Œæˆ‘ä»¬è°ƒç”¨ CSS Parser æ¥åˆ†æ CSS è§„åˆ™</p>\n</li>\n<li><p>è¿™é‡Œæˆ‘ä»¬å¿…é¡»è¦ä»”ç»†ç ”ç©¶æ­¤åº“åˆ†æ CSS è§„åˆ™çš„æ ¼å¼</p>\n</li>\n<li><p>computeCss1.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> css = <span class=\"built_in\">require</span>(<span class=\"string\">'css'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">... some code</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åŠ å…¥ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼ŒaddCSSRulesï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠ CSS è§„åˆ™æš‚å­˜åˆ°ä¸€ä¸ªæ•°ç»„é‡Œ</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> rules = []</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCSSRules</span>(<span class=\"params\">text</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ast = css.parse(text)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(ast, <span class=\"literal\">null</span>, <span class=\"string\">\"    \"</span>))</span><br><span class=\"line\">  rules.push(...ast.stylesheet.rules)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  ... some code</span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"endTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (top.tagName != token.tagName) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">\"Tag start end doesn't match\"</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log('pop', stack.pop())</span></span><br><span class=\"line\">      <span class=\"comment\">/** é‡åˆ° style æ ‡ç­¾æ—¶ï¼Œæ‰§è¡Œæ·»åŠ  CCS è§„åˆ™çš„æ“ä½œ */</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (top.tagName === <span class=\"string\">\"style\"</span>) &#123;</span><br><span class=\"line\">        addCSSRules(top.children[<span class=\"number\">0</span>].content)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      stack.pop()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    currentTextNode = <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  ... some code</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å°†æ·»åŠ  CSS è§„åˆ™æ“ä½œè‡³å…ƒç´  popå‰ï¼Œå…ƒç´  push å</p>\n<ul>\n<li>å…ƒç´  push åï¼Œä¹Ÿå°±æ˜¯ style æ ‡ç­¾çš„å­å…ƒç´ æ–‡æœ¬èŠ‚ç‚¹ï¼Œè¿˜æœªæŒ‚è½½åˆ° style æ ‡ç­¾ä¸Šï¼Œstyles æ ‡ç­¾å­å…ƒç´ è¿˜æ˜¯ç©ºçš„</li>\n<li>pop å‰ï¼Œæˆ‘ä»¬å¯ä»¥å–åˆ°è¿™ä¸ªå…ƒç´ </li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/01014f5e30127ef5f2b23dd6b7fa44ac153947.png\" alt=\"ç¬¬ä¸€æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p>æ–‡æœ¬ç»“æœ</p>\n  <figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"stylesheet\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"stylesheet\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"rules\"</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"rule\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"selectors\"</span>: [</span><br><span class=\"line\">                    <span class=\"string\">\"body div #myid\"</span></span><br><span class=\"line\">                ],</span><br><span class=\"line\">                <span class=\"attr\">\"declarations\"</span>: [</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"declaration\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"property\"</span>: <span class=\"string\">\"width\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"100px\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"position\"</span>: &#123;</span><br><span class=\"line\">                            <span class=\"attr\">\"start\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">3</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">9</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"end\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">3</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">20</span></span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"declaration\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"property\"</span>: <span class=\"string\">\"background-color\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"#ff5000\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"position\"</span>: &#123;</span><br><span class=\"line\">                            <span class=\"attr\">\"start\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">4</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">9</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"end\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">4</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">34</span></span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                ],</span><br><span class=\"line\">                <span class=\"attr\">\"position\"</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">\"start\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"line\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"column\"</span>: <span class=\"number\">5</span></span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    <span class=\"attr\">\"end\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"line\"</span>: <span class=\"number\">5</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"column\"</span>: <span class=\"number\">6</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"rule\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"selectors\"</span>: [</span><br><span class=\"line\">                    <span class=\"string\">\"body div img\"</span></span><br><span class=\"line\">                ],</span><br><span class=\"line\">                <span class=\"attr\">\"declarations\"</span>: [</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"declaration\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"property\"</span>: <span class=\"string\">\"width\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"30px\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"position\"</span>: &#123;</span><br><span class=\"line\">                            <span class=\"attr\">\"start\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">7</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">9</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"end\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">7</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">19</span></span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"declaration\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"property\"</span>: <span class=\"string\">\"background-color\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"#ff1111\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"position\"</span>: &#123;</span><br><span class=\"line\">                            <span class=\"attr\">\"start\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">8</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">9</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"end\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">8</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">34</span></span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                ],</span><br><span class=\"line\">                <span class=\"attr\">\"position\"</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">\"start\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"line\"</span>: <span class=\"number\">6</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"column\"</span>: <span class=\"number\">5</span></span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    <span class=\"attr\">\"end\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"line\"</span>: <span class=\"number\">9</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"column\"</span>: <span class=\"number\">6</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        <span class=\"attr\">\"parsingErrors\"</span>: []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ul>\n<h3 id=\"ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨\"><a href=\"#ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨\"></a>ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨</h3><ul>\n<li><p>å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…ƒç´ åï¼Œç«‹å³è®¡ç®— CSS</p>\n</li>\n<li><p>ç†è®ºä¸Šï¼Œå½“æˆ‘ä»¬åˆ†æä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ‰€æœ‰ CSS è§„åˆ™å·²ç»æ”¶é›†å®Œæ¯•</p>\n</li>\n<li><p>åœ¨çœŸå®æµè§ˆå™¨ä¸­ï¼Œå¯èƒ½é‡åˆ°å†™åœ¨ body çš„ style æ ‡ç­¾ï¼Œéœ€è¦é‡æ–° CSS è®¡ç®—çš„æƒ…å†µï¼Œè¿™é‡Œæˆ‘ä»¬å¿½ç•¥</p>\n</li>\n<li><p>computeCSS2.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">computeCSS</span>(<span class=\"params\">element</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(rules)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"-=-=-=-=-=-=-=\"</span>)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"compute CSS for Element-=-=-=-=-=-=\"</span>, element)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"********************************************\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  ... some code</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"startTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> element = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"element\"</span>,</span><br><span class=\"line\">      children: [],</span><br><span class=\"line\">      attributes: []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    element.tagName = token.tagName</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> p <span class=\"keyword\">in</span> token) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (p != <span class=\"string\">\"type\"</span> &amp;&amp; p != <span class=\"string\">\"tagName\"</span>) &#123;</span><br><span class=\"line\">        element.attributes.push(&#123;</span><br><span class=\"line\">          name: p,</span><br><span class=\"line\">          value: token[p]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    computeCSS(element)</span><br><span class=\"line\"></span><br><span class=\"line\">    top.children.push(element)</span><br><span class=\"line\">    element.parent = top</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!token.isSelfClosing)</span><br><span class=\"line\">      stack.push(element)</span><br><span class=\"line\">    </span><br><span class=\"line\">    currentTextNode = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log('push', element)</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  ... some code</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿™é‡Œä¸€ä¸ªå…ƒç´ çš„åˆ›å»ºåï¼ŒtagName, å±æ€§éƒ½åŠ å¥½åï¼Œå°±åº”è¯¥æœ‰ä¸€ä¸ª cumputeCSS è¿‡ç¨‹</p>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/634ec08db6e9b90b38c17656be424e2d127292.png\" alt=\"ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬ä¸‰æ­¥ï¼šè·å–çˆ¶å…ƒç´ åºåˆ—\"><a href=\"#ç¬¬ä¸‰æ­¥ï¼šè·å–çˆ¶å…ƒç´ åºåˆ—\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ­¥ï¼šè·å–çˆ¶å…ƒç´ åºåˆ—\"></a>ç¬¬ä¸‰æ­¥ï¼šè·å–çˆ¶å…ƒç´ åºåˆ—</h3><ul>\n<li><p>åœ¨ computeCss å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»çŸ¥é“å…ƒç´ çš„æ‰€æœ‰çˆ¶å…ƒç´ æ‰èƒ½åˆ¤æ–­å…ƒç´ ä¸è§„åˆ™æ˜¯å¦åŒ¹é…</p>\n</li>\n<li><p>æˆ‘ä»¬ä»ä¸Šä¸€æ­¥éª¤çš„ stackï¼Œå¯ä»¥è·å–æœ¬å…ƒç´ æ‰€æœ‰çš„çˆ¶å…ƒç´ </p>\n</li>\n<li><p>å› ä¸ºæˆ‘ä»¬é¦–å…ˆè·å–çš„æ˜¯â€å½“å‰å…ƒç´ â€œï¼Œæ‰€ä»¥æˆ‘ä»¬è·å¾—å’Œè®¡ç®—çˆ¶å…ƒç´ åŒ¹é…çš„é¡ºåºæ˜¯ä»å†…å‘å¤–</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/68af300e9e207b8a190b7c3893f17ff036554.png\" alt=\"ä»å†…å‘å¤– CSS åŒ¹é…\"></li>\n</ul>\n</li>\n<li><p>computeCSS3.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">computeCSS</span>(<span class=\"params\">element</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">const</span> elements = stack.slice().reverse()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br></pre></td></tr></table></figure></li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/706c9c25bc5a46f41f8bc11ba2a6854e250838.png\" alt=\"ç¬¬ä¸‰æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p>stack.slice() æ‹·è´åŸæ•°ç»„ï¼Œä¸åœ¨ stack ä¸­æ“ä½œï¼Œé˜²å¾¡å¼ç¼–ç¨‹é¿å…å½±å“ stack</p>\n</li>\n</ul>\n<h3 id=\"ç¬¬å››æ­¥ï¼šæ‹†åˆ†é€‰æ‹©å™¨\"><a href=\"#ç¬¬å››æ­¥ï¼šæ‹†åˆ†é€‰æ‹©å™¨\" class=\"headerlink\" title=\"ç¬¬å››æ­¥ï¼šæ‹†åˆ†é€‰æ‹©å™¨\"></a>ç¬¬å››æ­¥ï¼šæ‹†åˆ†é€‰æ‹©å™¨</h3><ul>\n<li><p>é€‰æ‹©å™¨ä¹Ÿè¦ä»å½“å‰å…ƒç´ ä»å¤–æ’åˆ—</p>\n</li>\n<li><p>å¤æ‚é€‰æ‹©å™¨æ‹†æˆé’ˆå¯¹å•ä¸ªå…ƒç´ çš„é€‰æ‹©å™¨ï¼Œç”¨å¾ªç¯åŒ¹é…çˆ¶å…ƒç´ é˜Ÿåˆ—</p>\n</li>\n<li><p>computeCSS4.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t</span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">specificity</span>(<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> selectorParts = selector.split(<span class=\"string\">\" \"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> part <span class=\"keyword\">of</span> selectorParts) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (part.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\"#\"</span>) &#123;</span><br><span class=\"line\">      p[<span class=\"number\">1</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (part.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\".\"</span>) &#123;</span><br><span class=\"line\">      p[<span class=\"number\">2</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      p[<span class=\"number\">3</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compare</span>(<span class=\"params\">sp1, sp2</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sp1[<span class=\"number\">0</span>] - sp2[<span class=\"number\">0</span>]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sp1[<span class=\"number\">0</span>] - sp2[<span class=\"number\">0</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sp1[<span class=\"number\">1</span>] - sp2[<span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sp1[<span class=\"number\">1</span>] - sp2[<span class=\"number\">1</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sp1[<span class=\"number\">2</span>] - sp2[<span class=\"number\">2</span>]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sp1[<span class=\"number\">2</span>] - sp2[<span class=\"number\">2</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sp1[<span class=\"number\">3</span>] - sp2[<span class=\"number\">3</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">computeCSS</span>(<span class=\"params\">element</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> elements = stack.slice().reverse()</span><br><span class=\"line\"></span><br><span class=\"line\">\t  <span class=\"keyword\">if</span> (!element.computedStyle)</span><br><span class=\"line\">\t    element.computedStyle = &#123;&#125;</span><br><span class=\"line\">\t  </span><br><span class=\"line\">\t  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> rule <span class=\"keyword\">of</span> rules) &#123;</span><br><span class=\"line\">\t    <span class=\"keyword\">const</span> selectorParts = rule.selectors[<span class=\"number\">0</span>].split(<span class=\"string\">\" \"</span>).reverse()</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t    <span class=\"keyword\">if</span> (!match(element, selectorParts[<span class=\"number\">0</span>]))</span><br><span class=\"line\">\t      <span class=\"keyword\">continue</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t    <span class=\"keyword\">let</span> matched = <span class=\"literal\">false</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t    <span class=\"keyword\">let</span> j = <span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; elements.length; i ++) &#123;</span><br><span class=\"line\">\t      <span class=\"keyword\">if</span> (match(elements[i], selectorParts[j])) &#123;</span><br><span class=\"line\">\t        j ++</span><br><span class=\"line\">\t      &#125;</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">if</span> (j &gt;= selectorParts.length) &#123;</span><br><span class=\"line\">\t      matched = <span class=\"literal\">true</span></span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">if</span> (matched) &#123; <span class=\"comment\">// åŒ¹é…æˆåŠŸ</span></span><br><span class=\"line\">\t      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Element\"</span>, element, <span class=\"string\">\"matched rule\"</span>, rule)</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t...some code</span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n<h3 id=\"ç¬¬äº”æ­¥ï¼šè®¡ç®—é€‰æ‹©å™¨ä¸å…ƒç´ åŒ¹é…\"><a href=\"#ç¬¬äº”æ­¥ï¼šè®¡ç®—é€‰æ‹©å™¨ä¸å…ƒç´ åŒ¹é…\" class=\"headerlink\" title=\"ç¬¬äº”æ­¥ï¼šè®¡ç®—é€‰æ‹©å™¨ä¸å…ƒç´ åŒ¹é…\"></a>ç¬¬äº”æ­¥ï¼šè®¡ç®—é€‰æ‹©å™¨ä¸å…ƒç´ åŒ¹é…</h3><ul>\n<li><p>æ ¹æ®é€‰æ‹©å™¨çš„ç±»å‹å’Œå…ƒç´ å±æ€§ï¼Œè®¡ç®—æ˜¯å¦ä¸å½“å‰å…ƒç´ åŒ¹é…</p>\n</li>\n<li><p>è¿™é‡Œä»…å®ç°äº†ä¸‰ç§åŸºæœ¬é€‰æ‹©å™¨ï¼Œå®é™…çš„æµè§ˆå™¨ä¸­è¦å¤„ç†å¤åˆé€‰æ‹©å™¨</p>\n</li>\n<li><p>computeCSS5.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">element, selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!selector || !element.attributes) </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (selector.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\"#\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> attr = element.attributes.filter(<span class=\"function\"><span class=\"params\">attr</span> =&gt;</span> attr.name === <span class=\"string\">\"id\"</span>)[<span class=\"number\">0</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (attr &amp;&amp; attr.value === selector.replace(<span class=\"string\">\"#\"</span>, <span class=\"string\">''</span>))</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (selector.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\".\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> attr = element.attributes.filter(<span class=\"function\"><span class=\"params\">attr</span> =&gt;</span> attr.name === <span class=\"string\">\"class\"</span>)[<span class=\"number\">0</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (attr &amp;&amp; attr.value === selector.replace(<span class=\"string\">\".\"</span>, <span class=\"string\">''</span>))</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (element.tagName === selector) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/e23fb1db77239166c990b52468b24451353540.png\" alt=\"ç¬¬äº”æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ç¬¬äº”æ­¥ä¼˜åŒ–ï¼šå®ç°æ”¯æŒç©ºæ ¼çš„-Class-é€‰æ‹©å™¨\"><a href=\"#ç¬¬äº”æ­¥ä¼˜åŒ–ï¼šå®ç°æ”¯æŒç©ºæ ¼çš„-Class-é€‰æ‹©å™¨\" class=\"headerlink\" title=\"ç¬¬äº”æ­¥ä¼˜åŒ–ï¼šå®ç°æ”¯æŒç©ºæ ¼çš„ Class é€‰æ‹©å™¨\"></a>ç¬¬äº”æ­¥ä¼˜åŒ–ï¼šå®ç°æ”¯æŒç©ºæ ¼çš„ Class é€‰æ‹©å™¨</h4><ul>\n<li><p>å‡å¦‚æˆ‘ä»¬çš„ html æ”¹æˆè¿™æ ·ï¼š</p>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">maaa</span>=<span class=\"string\">a</span> &gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">body</span> <span class=\"selector-tag\">div</span> <span class=\"selector-id\">#myid</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">\t    <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t    <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#ff5000</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tbody div img&#123;</span><br><span class=\"line\"><span class=\"css\">\t    <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:30px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t    <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#ff1111</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">body</span> <span class=\"selector-tag\">div</span> <span class=\"selector-class\">.cls1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t  <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#ff9906</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t    <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myid\"</span>/&gt;</span></span><br><span class=\"line\">\t        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">class</span>=<span class=\"string\">\"cls1 cls2\"</span>/&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>åœ¨ &lt;img&gt; å¢åŠ å¤šä¸ª class é€‰æ‹©å™¨ï¼Œé‚£æˆ‘ä»¬çš„é€‰æ‹©å™¨ match å¯ä»¥æ”¹æˆ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">element, selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!selector || !element.attributes) </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (selector.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\"#\"</span>) &#123;</span><br><span class=\"line\">\t    </span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (selector.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\".\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> attr = element.attributes.filter(<span class=\"function\"><span class=\"params\">attr</span> =&gt;</span> attr.name === <span class=\"string\">\"class\"</span>)[<span class=\"number\">0</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (attr) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> attrClassArray = attr.value.split(<span class=\"string\">' '</span>)</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> attrClass <span class=\"keyword\">of</span> attrClassArray) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attrClass === selector.replace(<span class=\"string\">\".\"</span>, <span class=\"string\">''</span>)) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t    </span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br></pre></td></tr></table></figure></li>\n<li><p>æ€è·¯ï¼š</p>\n<ul>\n<li>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/a8b9d9396713239928cd8b0af216535e40897.png\" alt=\"å¤š class é€‰æ‹©å™¨\"></li>\n</ul>\n</li>\n<li>æˆ‘ä»¬å¯ä»¥å°† å…ƒç´  attr æ ¹æ®ç©ºæ ¼åˆ†éš”ï¼Œå†åˆ©ç”¨å¾ªç¯åŒ¹é…</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/1d5533479cdb7d6c1a0af20acdfc4e71146017.png\" alt=\"ç¬¬äº”æ­¥ä¼˜åŒ–è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬å…­æ­¥ï¼šç”Ÿæˆ-computed-å±æ€§\"><a href=\"#ç¬¬å…­æ­¥ï¼šç”Ÿæˆ-computed-å±æ€§\" class=\"headerlink\" title=\"ç¬¬å…­æ­¥ï¼šç”Ÿæˆ computed å±æ€§\"></a>ç¬¬å…­æ­¥ï¼šç”Ÿæˆ computed å±æ€§</h3><ul>\n<li><p>ä¸€æ—¦é€‰æ‹©åŒ¹é…ï¼Œå°±åº”ç”¨é€‰æ‹©å™¨åˆ°å…ƒç´ ä¸Šï¼Œå½¢æˆ computedStyle</p>\n</li>\n<li><p>computeCSS6.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">computeCSS</span>(<span class=\"params\">element</span>) </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (matched) &#123; <span class=\"comment\">// åŒ¹é…æˆåŠŸ</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> computedStyle = element.computedStyle</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> declaration <span class=\"keyword\">of</span> rule.declarations) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!computedStyle[declaration.property]) &#123;</span><br><span class=\"line\">          computedStyle[declaration.property] = &#123;&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        computedStyle[declaration.property].value = declaration.value</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(element.computedStyle)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/71888ca9220eb11196bc00eb407fb05980361.png\" alt=\"ç¬¬å…­æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬ä¸ƒæ­¥ï¼šç¡®å®šè§„åˆ™è¦†ç›–å…³ç³»\"><a href=\"#ç¬¬ä¸ƒæ­¥ï¼šç¡®å®šè§„åˆ™è¦†ç›–å…³ç³»\" class=\"headerlink\" title=\"ç¬¬ä¸ƒæ­¥ï¼šç¡®å®šè§„åˆ™è¦†ç›–å…³ç³»\"></a>ç¬¬ä¸ƒæ­¥ï¼šç¡®å®šè§„åˆ™è¦†ç›–å…³ç³»</h3><ul>\n<li><p>CSS è§„åˆ™æ ¹æ® specificity å’Œåæ¥ä¼˜å…ˆè§„åˆ™è¦†ç›–</p>\n</li>\n<li><p>specificity æ˜¯ä¸ªå››å…ƒç»„ï¼Œè¶Šå·¦è¾¹æƒé‡è¶Šé«˜</p>\n</li>\n<li><p>ä¸€ä¸ª CSS è§„åˆ™çš„ specificity æ ¹æ®åŒ…å«çš„ç®€å•é€‰æ‹©å™¨ç›¸åŠ è€Œæˆ</p>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/a50f3ae53878adbacbdcb7798632605e283940.png\" alt=\"selectors-3 specificity\"></p>\n</li>\n<li><p>computeCSS7.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">specificity</span>(<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> selectorParts = selector.split(<span class=\"string\">\" \"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> part <span class=\"keyword\">of</span> selectorParts) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (part.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\"#\"</span>) &#123;</span><br><span class=\"line\">      p[<span class=\"number\">1</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (part.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\".\"</span>) &#123;</span><br><span class=\"line\">      p[<span class=\"number\">2</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      p[<span class=\"number\">3</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compare</span>(<span class=\"params\">sp1, sp2</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sp1[<span class=\"number\">0</span>] - sp2[<span class=\"number\">0</span>]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sp1[<span class=\"number\">0</span>] - sp2[<span class=\"number\">0</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sp1[<span class=\"number\">1</span>] - sp2[<span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sp1[<span class=\"number\">1</span>] - sp2[<span class=\"number\">1</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sp1[<span class=\"number\">2</span>] - sp2[<span class=\"number\">2</span>]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sp1[<span class=\"number\">2</span>] - sp2[<span class=\"number\">2</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sp1[<span class=\"number\">3</span>] - sp2[<span class=\"number\">3</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">computeCSS</span>(<span class=\"params\">element</span>) </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (matched) &#123; <span class=\"comment\">// åŒ¹é…æˆåŠŸ</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> sp = specificity(rule.selectors[<span class=\"number\">0</span>])</span><br><span class=\"line\">      <span class=\"keyword\">const</span> computedStyle = element.computedStyle</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> declaration <span class=\"keyword\">of</span> rule.declarations) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!computedStyle[declaration.property]) &#123;</span><br><span class=\"line\">          computedStyle[declaration.property] = &#123;&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!computedStyle[declaration.property].specificity) &#123;</span><br><span class=\"line\">          computedStyle[declaration.property].value = declaration.value</span><br><span class=\"line\">          computedStyle[declaration.property].specificity = sp</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (compare(computedStyle[declaration.property].specificity, sp) &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          computedStyle[declaration.property].value = declaration.value</span><br><span class=\"line\">          computedStyle[declaration.property].specificity = sp</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ul>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/063c59deee7d24e437fdff9920aec8ea216464.png\" alt=\"ç¬¬ä¸ƒæ­¥è¿è¡Œç»“æœ\"></li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/c3a7fb73c0d001fef48137c4a23144b6211501.png\" alt=\"ç¬¬ä¸ƒæ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h3><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/Specificity\" target=\"_blank\" rel=\"noopener\">CSS ä¼˜å…ˆçº§æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ</a></li>\n<li><a href=\"https://drafts.csswg.org/selectors-3/#specificity\" target=\"_blank\" rel=\"noopener\">selectors-3 specificity</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li>å­¦è€Œä¸æ€åˆ™ç½”</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>implementation of a toy-browser ğŸ™†</li>\n<li>æˆ‘ä»¬å¼€å§‹è¿›å…¥åˆ° CSS Computing å•¦ï¼ï¼ï¼ğŸ˜˜</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/4bb352346db82d88a68035a6ddad906c81827.png\" alt=\"CSS Computing\">","more":"</li>\n</ul>\n<h2 id=\"å®è·µè®°å½•\"><a href=\"#å®è·µè®°å½•\" class=\"headerlink\" title=\"å®è·µè®°å½•\"></a>å®è·µè®°å½•</h2><h3 id=\"å®è·µå‡†å¤‡\"><a href=\"#å®è·µå‡†å¤‡\" class=\"headerlink\" title=\"å®è·µå‡†å¤‡\"></a>å®è·µå‡†å¤‡</h3><blockquote>\n<p>npm install css</p>\n</blockquote>\n<h3 id=\"ç¬¬ä¸€æ­¥ï¼šæ”¶é›†-CSS-è§„åˆ™\"><a href=\"#ç¬¬ä¸€æ­¥ï¼šæ”¶é›†-CSS-è§„åˆ™\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šæ”¶é›† CSS è§„åˆ™\"></a>ç¬¬ä¸€æ­¥ï¼šæ”¶é›† CSS è§„åˆ™</h3><ul>\n<li><p>é‡åˆ° style æ ‡ç­¾æ—¶ï¼Œæˆ‘ä»¬æŠŠ CSS è§„åˆ™ä¿å­˜èµ·æ¥</p>\n</li>\n<li><p>è¿™é‡Œæˆ‘ä»¬è°ƒç”¨ CSS Parser æ¥åˆ†æ CSS è§„åˆ™</p>\n</li>\n<li><p>è¿™é‡Œæˆ‘ä»¬å¿…é¡»è¦ä»”ç»†ç ”ç©¶æ­¤åº“åˆ†æ CSS è§„åˆ™çš„æ ¼å¼</p>\n</li>\n<li><p>computeCss1.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> css = <span class=\"built_in\">require</span>(<span class=\"string\">'css'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">... some code</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åŠ å…¥ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼ŒaddCSSRulesï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠ CSS è§„åˆ™æš‚å­˜åˆ°ä¸€ä¸ªæ•°ç»„é‡Œ</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> rules = []</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCSSRules</span>(<span class=\"params\">text</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ast = css.parse(text)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(ast, <span class=\"literal\">null</span>, <span class=\"string\">\"    \"</span>))</span><br><span class=\"line\">  rules.push(...ast.stylesheet.rules)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  ... some code</span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"endTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (top.tagName != token.tagName) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">\"Tag start end doesn't match\"</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log('pop', stack.pop())</span></span><br><span class=\"line\">      <span class=\"comment\">/** é‡åˆ° style æ ‡ç­¾æ—¶ï¼Œæ‰§è¡Œæ·»åŠ  CCS è§„åˆ™çš„æ“ä½œ */</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (top.tagName === <span class=\"string\">\"style\"</span>) &#123;</span><br><span class=\"line\">        addCSSRules(top.children[<span class=\"number\">0</span>].content)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      stack.pop()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    currentTextNode = <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  ... some code</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å°†æ·»åŠ  CSS è§„åˆ™æ“ä½œè‡³å…ƒç´  popå‰ï¼Œå…ƒç´  push å</p>\n<ul>\n<li>å…ƒç´  push åï¼Œä¹Ÿå°±æ˜¯ style æ ‡ç­¾çš„å­å…ƒç´ æ–‡æœ¬èŠ‚ç‚¹ï¼Œè¿˜æœªæŒ‚è½½åˆ° style æ ‡ç­¾ä¸Šï¼Œstyles æ ‡ç­¾å­å…ƒç´ è¿˜æ˜¯ç©ºçš„</li>\n<li>pop å‰ï¼Œæˆ‘ä»¬å¯ä»¥å–åˆ°è¿™ä¸ªå…ƒç´ </li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/01014f5e30127ef5f2b23dd6b7fa44ac153947.png\" alt=\"ç¬¬ä¸€æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p>æ–‡æœ¬ç»“æœ</p>\n  <figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"stylesheet\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"stylesheet\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"rules\"</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"rule\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"selectors\"</span>: [</span><br><span class=\"line\">                    <span class=\"string\">\"body div #myid\"</span></span><br><span class=\"line\">                ],</span><br><span class=\"line\">                <span class=\"attr\">\"declarations\"</span>: [</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"declaration\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"property\"</span>: <span class=\"string\">\"width\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"100px\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"position\"</span>: &#123;</span><br><span class=\"line\">                            <span class=\"attr\">\"start\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">3</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">9</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"end\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">3</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">20</span></span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"declaration\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"property\"</span>: <span class=\"string\">\"background-color\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"#ff5000\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"position\"</span>: &#123;</span><br><span class=\"line\">                            <span class=\"attr\">\"start\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">4</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">9</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"end\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">4</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">34</span></span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                ],</span><br><span class=\"line\">                <span class=\"attr\">\"position\"</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">\"start\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"line\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"column\"</span>: <span class=\"number\">5</span></span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    <span class=\"attr\">\"end\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"line\"</span>: <span class=\"number\">5</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"column\"</span>: <span class=\"number\">6</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"rule\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"selectors\"</span>: [</span><br><span class=\"line\">                    <span class=\"string\">\"body div img\"</span></span><br><span class=\"line\">                ],</span><br><span class=\"line\">                <span class=\"attr\">\"declarations\"</span>: [</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"declaration\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"property\"</span>: <span class=\"string\">\"width\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"30px\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"position\"</span>: &#123;</span><br><span class=\"line\">                            <span class=\"attr\">\"start\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">7</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">9</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"end\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">7</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">19</span></span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"declaration\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"property\"</span>: <span class=\"string\">\"background-color\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"#ff1111\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"position\"</span>: &#123;</span><br><span class=\"line\">                            <span class=\"attr\">\"start\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">8</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">9</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"end\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"line\"</span>: <span class=\"number\">8</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"column\"</span>: <span class=\"number\">34</span></span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                ],</span><br><span class=\"line\">                <span class=\"attr\">\"position\"</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">\"start\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"line\"</span>: <span class=\"number\">6</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"column\"</span>: <span class=\"number\">5</span></span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    <span class=\"attr\">\"end\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"line\"</span>: <span class=\"number\">9</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"column\"</span>: <span class=\"number\">6</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        <span class=\"attr\">\"parsingErrors\"</span>: []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ul>\n<h3 id=\"ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨\"><a href=\"#ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨\"></a>ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨</h3><ul>\n<li><p>å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…ƒç´ åï¼Œç«‹å³è®¡ç®— CSS</p>\n</li>\n<li><p>ç†è®ºä¸Šï¼Œå½“æˆ‘ä»¬åˆ†æä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ‰€æœ‰ CSS è§„åˆ™å·²ç»æ”¶é›†å®Œæ¯•</p>\n</li>\n<li><p>åœ¨çœŸå®æµè§ˆå™¨ä¸­ï¼Œå¯èƒ½é‡åˆ°å†™åœ¨ body çš„ style æ ‡ç­¾ï¼Œéœ€è¦é‡æ–° CSS è®¡ç®—çš„æƒ…å†µï¼Œè¿™é‡Œæˆ‘ä»¬å¿½ç•¥</p>\n</li>\n<li><p>computeCSS2.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">computeCSS</span>(<span class=\"params\">element</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(rules)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"-=-=-=-=-=-=-=\"</span>)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"compute CSS for Element-=-=-=-=-=-=\"</span>, element)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"********************************************\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  ... some code</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"startTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> element = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"element\"</span>,</span><br><span class=\"line\">      children: [],</span><br><span class=\"line\">      attributes: []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    element.tagName = token.tagName</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> p <span class=\"keyword\">in</span> token) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (p != <span class=\"string\">\"type\"</span> &amp;&amp; p != <span class=\"string\">\"tagName\"</span>) &#123;</span><br><span class=\"line\">        element.attributes.push(&#123;</span><br><span class=\"line\">          name: p,</span><br><span class=\"line\">          value: token[p]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    computeCSS(element)</span><br><span class=\"line\"></span><br><span class=\"line\">    top.children.push(element)</span><br><span class=\"line\">    element.parent = top</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!token.isSelfClosing)</span><br><span class=\"line\">      stack.push(element)</span><br><span class=\"line\">    </span><br><span class=\"line\">    currentTextNode = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log('push', element)</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  ... some code</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿™é‡Œä¸€ä¸ªå…ƒç´ çš„åˆ›å»ºåï¼ŒtagName, å±æ€§éƒ½åŠ å¥½åï¼Œå°±åº”è¯¥æœ‰ä¸€ä¸ª cumputeCSS è¿‡ç¨‹</p>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/634ec08db6e9b90b38c17656be424e2d127292.png\" alt=\"ç¬¬äºŒæ­¥ï¼šæ·»åŠ è°ƒç”¨\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬ä¸‰æ­¥ï¼šè·å–çˆ¶å…ƒç´ åºåˆ—\"><a href=\"#ç¬¬ä¸‰æ­¥ï¼šè·å–çˆ¶å…ƒç´ åºåˆ—\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ­¥ï¼šè·å–çˆ¶å…ƒç´ åºåˆ—\"></a>ç¬¬ä¸‰æ­¥ï¼šè·å–çˆ¶å…ƒç´ åºåˆ—</h3><ul>\n<li><p>åœ¨ computeCss å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»çŸ¥é“å…ƒç´ çš„æ‰€æœ‰çˆ¶å…ƒç´ æ‰èƒ½åˆ¤æ–­å…ƒç´ ä¸è§„åˆ™æ˜¯å¦åŒ¹é…</p>\n</li>\n<li><p>æˆ‘ä»¬ä»ä¸Šä¸€æ­¥éª¤çš„ stackï¼Œå¯ä»¥è·å–æœ¬å…ƒç´ æ‰€æœ‰çš„çˆ¶å…ƒç´ </p>\n</li>\n<li><p>å› ä¸ºæˆ‘ä»¬é¦–å…ˆè·å–çš„æ˜¯â€å½“å‰å…ƒç´ â€œï¼Œæ‰€ä»¥æˆ‘ä»¬è·å¾—å’Œè®¡ç®—çˆ¶å…ƒç´ åŒ¹é…çš„é¡ºåºæ˜¯ä»å†…å‘å¤–</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/68af300e9e207b8a190b7c3893f17ff036554.png\" alt=\"ä»å†…å‘å¤– CSS åŒ¹é…\"></li>\n</ul>\n</li>\n<li><p>computeCSS3.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">computeCSS</span>(<span class=\"params\">element</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">const</span> elements = stack.slice().reverse()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br></pre></td></tr></table></figure></li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/706c9c25bc5a46f41f8bc11ba2a6854e250838.png\" alt=\"ç¬¬ä¸‰æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p>stack.slice() æ‹·è´åŸæ•°ç»„ï¼Œä¸åœ¨ stack ä¸­æ“ä½œï¼Œé˜²å¾¡å¼ç¼–ç¨‹é¿å…å½±å“ stack</p>\n</li>\n</ul>\n<h3 id=\"ç¬¬å››æ­¥ï¼šæ‹†åˆ†é€‰æ‹©å™¨\"><a href=\"#ç¬¬å››æ­¥ï¼šæ‹†åˆ†é€‰æ‹©å™¨\" class=\"headerlink\" title=\"ç¬¬å››æ­¥ï¼šæ‹†åˆ†é€‰æ‹©å™¨\"></a>ç¬¬å››æ­¥ï¼šæ‹†åˆ†é€‰æ‹©å™¨</h3><ul>\n<li><p>é€‰æ‹©å™¨ä¹Ÿè¦ä»å½“å‰å…ƒç´ ä»å¤–æ’åˆ—</p>\n</li>\n<li><p>å¤æ‚é€‰æ‹©å™¨æ‹†æˆé’ˆå¯¹å•ä¸ªå…ƒç´ çš„é€‰æ‹©å™¨ï¼Œç”¨å¾ªç¯åŒ¹é…çˆ¶å…ƒç´ é˜Ÿåˆ—</p>\n</li>\n<li><p>computeCSS4.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t</span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">specificity</span>(<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> selectorParts = selector.split(<span class=\"string\">\" \"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> part <span class=\"keyword\">of</span> selectorParts) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (part.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\"#\"</span>) &#123;</span><br><span class=\"line\">      p[<span class=\"number\">1</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (part.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\".\"</span>) &#123;</span><br><span class=\"line\">      p[<span class=\"number\">2</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      p[<span class=\"number\">3</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compare</span>(<span class=\"params\">sp1, sp2</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sp1[<span class=\"number\">0</span>] - sp2[<span class=\"number\">0</span>]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sp1[<span class=\"number\">0</span>] - sp2[<span class=\"number\">0</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sp1[<span class=\"number\">1</span>] - sp2[<span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sp1[<span class=\"number\">1</span>] - sp2[<span class=\"number\">1</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sp1[<span class=\"number\">2</span>] - sp2[<span class=\"number\">2</span>]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sp1[<span class=\"number\">2</span>] - sp2[<span class=\"number\">2</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sp1[<span class=\"number\">3</span>] - sp2[<span class=\"number\">3</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">computeCSS</span>(<span class=\"params\">element</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> elements = stack.slice().reverse()</span><br><span class=\"line\"></span><br><span class=\"line\">\t  <span class=\"keyword\">if</span> (!element.computedStyle)</span><br><span class=\"line\">\t    element.computedStyle = &#123;&#125;</span><br><span class=\"line\">\t  </span><br><span class=\"line\">\t  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> rule <span class=\"keyword\">of</span> rules) &#123;</span><br><span class=\"line\">\t    <span class=\"keyword\">const</span> selectorParts = rule.selectors[<span class=\"number\">0</span>].split(<span class=\"string\">\" \"</span>).reverse()</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t    <span class=\"keyword\">if</span> (!match(element, selectorParts[<span class=\"number\">0</span>]))</span><br><span class=\"line\">\t      <span class=\"keyword\">continue</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t    <span class=\"keyword\">let</span> matched = <span class=\"literal\">false</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t    <span class=\"keyword\">let</span> j = <span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; elements.length; i ++) &#123;</span><br><span class=\"line\">\t      <span class=\"keyword\">if</span> (match(elements[i], selectorParts[j])) &#123;</span><br><span class=\"line\">\t        j ++</span><br><span class=\"line\">\t      &#125;</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">if</span> (j &gt;= selectorParts.length) &#123;</span><br><span class=\"line\">\t      matched = <span class=\"literal\">true</span></span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">if</span> (matched) &#123; <span class=\"comment\">// åŒ¹é…æˆåŠŸ</span></span><br><span class=\"line\">\t      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Element\"</span>, element, <span class=\"string\">\"matched rule\"</span>, rule)</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t...some code</span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n<h3 id=\"ç¬¬äº”æ­¥ï¼šè®¡ç®—é€‰æ‹©å™¨ä¸å…ƒç´ åŒ¹é…\"><a href=\"#ç¬¬äº”æ­¥ï¼šè®¡ç®—é€‰æ‹©å™¨ä¸å…ƒç´ åŒ¹é…\" class=\"headerlink\" title=\"ç¬¬äº”æ­¥ï¼šè®¡ç®—é€‰æ‹©å™¨ä¸å…ƒç´ åŒ¹é…\"></a>ç¬¬äº”æ­¥ï¼šè®¡ç®—é€‰æ‹©å™¨ä¸å…ƒç´ åŒ¹é…</h3><ul>\n<li><p>æ ¹æ®é€‰æ‹©å™¨çš„ç±»å‹å’Œå…ƒç´ å±æ€§ï¼Œè®¡ç®—æ˜¯å¦ä¸å½“å‰å…ƒç´ åŒ¹é…</p>\n</li>\n<li><p>è¿™é‡Œä»…å®ç°äº†ä¸‰ç§åŸºæœ¬é€‰æ‹©å™¨ï¼Œå®é™…çš„æµè§ˆå™¨ä¸­è¦å¤„ç†å¤åˆé€‰æ‹©å™¨</p>\n</li>\n<li><p>computeCSS5.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">element, selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!selector || !element.attributes) </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (selector.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\"#\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> attr = element.attributes.filter(<span class=\"function\"><span class=\"params\">attr</span> =&gt;</span> attr.name === <span class=\"string\">\"id\"</span>)[<span class=\"number\">0</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (attr &amp;&amp; attr.value === selector.replace(<span class=\"string\">\"#\"</span>, <span class=\"string\">''</span>))</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (selector.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\".\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> attr = element.attributes.filter(<span class=\"function\"><span class=\"params\">attr</span> =&gt;</span> attr.name === <span class=\"string\">\"class\"</span>)[<span class=\"number\">0</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (attr &amp;&amp; attr.value === selector.replace(<span class=\"string\">\".\"</span>, <span class=\"string\">''</span>))</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (element.tagName === selector) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/e23fb1db77239166c990b52468b24451353540.png\" alt=\"ç¬¬äº”æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ç¬¬äº”æ­¥ä¼˜åŒ–ï¼šå®ç°æ”¯æŒç©ºæ ¼çš„-Class-é€‰æ‹©å™¨\"><a href=\"#ç¬¬äº”æ­¥ä¼˜åŒ–ï¼šå®ç°æ”¯æŒç©ºæ ¼çš„-Class-é€‰æ‹©å™¨\" class=\"headerlink\" title=\"ç¬¬äº”æ­¥ä¼˜åŒ–ï¼šå®ç°æ”¯æŒç©ºæ ¼çš„ Class é€‰æ‹©å™¨\"></a>ç¬¬äº”æ­¥ä¼˜åŒ–ï¼šå®ç°æ”¯æŒç©ºæ ¼çš„ Class é€‰æ‹©å™¨</h4><ul>\n<li><p>å‡å¦‚æˆ‘ä»¬çš„ html æ”¹æˆè¿™æ ·ï¼š</p>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">maaa</span>=<span class=\"string\">a</span> &gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">body</span> <span class=\"selector-tag\">div</span> <span class=\"selector-id\">#myid</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">\t    <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t    <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#ff5000</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tbody div img&#123;</span><br><span class=\"line\"><span class=\"css\">\t    <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:30px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t    <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#ff1111</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">body</span> <span class=\"selector-tag\">div</span> <span class=\"selector-class\">.cls1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t  <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#ff9906</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t    <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myid\"</span>/&gt;</span></span><br><span class=\"line\">\t        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">class</span>=<span class=\"string\">\"cls1 cls2\"</span>/&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>åœ¨ &lt;img&gt; å¢åŠ å¤šä¸ª class é€‰æ‹©å™¨ï¼Œé‚£æˆ‘ä»¬çš„é€‰æ‹©å™¨ match å¯ä»¥æ”¹æˆ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">element, selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!selector || !element.attributes) </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (selector.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\"#\"</span>) &#123;</span><br><span class=\"line\">\t    </span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (selector.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\".\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> attr = element.attributes.filter(<span class=\"function\"><span class=\"params\">attr</span> =&gt;</span> attr.name === <span class=\"string\">\"class\"</span>)[<span class=\"number\">0</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (attr) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> attrClassArray = attr.value.split(<span class=\"string\">' '</span>)</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> attrClass <span class=\"keyword\">of</span> attrClassArray) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attrClass === selector.replace(<span class=\"string\">\".\"</span>, <span class=\"string\">''</span>)) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t    </span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br></pre></td></tr></table></figure></li>\n<li><p>æ€è·¯ï¼š</p>\n<ul>\n<li>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/a8b9d9396713239928cd8b0af216535e40897.png\" alt=\"å¤š class é€‰æ‹©å™¨\"></li>\n</ul>\n</li>\n<li>æˆ‘ä»¬å¯ä»¥å°† å…ƒç´  attr æ ¹æ®ç©ºæ ¼åˆ†éš”ï¼Œå†åˆ©ç”¨å¾ªç¯åŒ¹é…</li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/1d5533479cdb7d6c1a0af20acdfc4e71146017.png\" alt=\"ç¬¬äº”æ­¥ä¼˜åŒ–è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬å…­æ­¥ï¼šç”Ÿæˆ-computed-å±æ€§\"><a href=\"#ç¬¬å…­æ­¥ï¼šç”Ÿæˆ-computed-å±æ€§\" class=\"headerlink\" title=\"ç¬¬å…­æ­¥ï¼šç”Ÿæˆ computed å±æ€§\"></a>ç¬¬å…­æ­¥ï¼šç”Ÿæˆ computed å±æ€§</h3><ul>\n<li><p>ä¸€æ—¦é€‰æ‹©åŒ¹é…ï¼Œå°±åº”ç”¨é€‰æ‹©å™¨åˆ°å…ƒç´ ä¸Šï¼Œå½¢æˆ computedStyle</p>\n</li>\n<li><p>computeCSS6.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">computeCSS</span>(<span class=\"params\">element</span>) </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (matched) &#123; <span class=\"comment\">// åŒ¹é…æˆåŠŸ</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> computedStyle = element.computedStyle</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> declaration <span class=\"keyword\">of</span> rule.declarations) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!computedStyle[declaration.property]) &#123;</span><br><span class=\"line\">          computedStyle[declaration.property] = &#123;&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        computedStyle[declaration.property].value = declaration.value</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(element.computedStyle)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/71888ca9220eb11196bc00eb407fb05980361.png\" alt=\"ç¬¬å…­æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬ä¸ƒæ­¥ï¼šç¡®å®šè§„åˆ™è¦†ç›–å…³ç³»\"><a href=\"#ç¬¬ä¸ƒæ­¥ï¼šç¡®å®šè§„åˆ™è¦†ç›–å…³ç³»\" class=\"headerlink\" title=\"ç¬¬ä¸ƒæ­¥ï¼šç¡®å®šè§„åˆ™è¦†ç›–å…³ç³»\"></a>ç¬¬ä¸ƒæ­¥ï¼šç¡®å®šè§„åˆ™è¦†ç›–å…³ç³»</h3><ul>\n<li><p>CSS è§„åˆ™æ ¹æ® specificity å’Œåæ¥ä¼˜å…ˆè§„åˆ™è¦†ç›–</p>\n</li>\n<li><p>specificity æ˜¯ä¸ªå››å…ƒç»„ï¼Œè¶Šå·¦è¾¹æƒé‡è¶Šé«˜</p>\n</li>\n<li><p>ä¸€ä¸ª CSS è§„åˆ™çš„ specificity æ ¹æ®åŒ…å«çš„ç®€å•é€‰æ‹©å™¨ç›¸åŠ è€Œæˆ</p>\n</li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/a50f3ae53878adbacbdcb7798632605e283940.png\" alt=\"selectors-3 specificity\"></p>\n</li>\n<li><p>computeCSS7.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...some code</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">specificity</span>(<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> selectorParts = selector.split(<span class=\"string\">\" \"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> part <span class=\"keyword\">of</span> selectorParts) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (part.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\"#\"</span>) &#123;</span><br><span class=\"line\">      p[<span class=\"number\">1</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (part.charAt(<span class=\"number\">0</span>) == <span class=\"string\">\".\"</span>) &#123;</span><br><span class=\"line\">      p[<span class=\"number\">2</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      p[<span class=\"number\">3</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> p</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compare</span>(<span class=\"params\">sp1, sp2</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sp1[<span class=\"number\">0</span>] - sp2[<span class=\"number\">0</span>]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sp1[<span class=\"number\">0</span>] - sp2[<span class=\"number\">0</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sp1[<span class=\"number\">1</span>] - sp2[<span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sp1[<span class=\"number\">1</span>] - sp2[<span class=\"number\">1</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sp1[<span class=\"number\">2</span>] - sp2[<span class=\"number\">2</span>]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sp1[<span class=\"number\">2</span>] - sp2[<span class=\"number\">2</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sp1[<span class=\"number\">3</span>] - sp2[<span class=\"number\">3</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">computeCSS</span>(<span class=\"params\">element</span>) </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (matched) &#123; <span class=\"comment\">// åŒ¹é…æˆåŠŸ</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> sp = specificity(rule.selectors[<span class=\"number\">0</span>])</span><br><span class=\"line\">      <span class=\"keyword\">const</span> computedStyle = element.computedStyle</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> declaration <span class=\"keyword\">of</span> rule.declarations) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!computedStyle[declaration.property]) &#123;</span><br><span class=\"line\">          computedStyle[declaration.property] = &#123;&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!computedStyle[declaration.property].specificity) &#123;</span><br><span class=\"line\">          computedStyle[declaration.property].value = declaration.value</span><br><span class=\"line\">          computedStyle[declaration.property].specificity = sp</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (compare(computedStyle[declaration.property].specificity, sp) &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          computedStyle[declaration.property].value = declaration.value</span><br><span class=\"line\">          computedStyle[declaration.property].specificity = sp</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t...some code</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...some code</span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ul>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/063c59deee7d24e437fdff9920aec8ea216464.png\" alt=\"ç¬¬ä¸ƒæ­¥è¿è¡Œç»“æœ\"></li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/c3a7fb73c0d001fef48137c4a23144b6211501.png\" alt=\"ç¬¬ä¸ƒæ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h3><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/Specificity\" target=\"_blank\" rel=\"noopener\">CSS ä¼˜å…ˆçº§æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ</a></li>\n<li><a href=\"https://drafts.csswg.org/selectors-3/#specificity\" target=\"_blank\" rel=\"noopener\">selectors-3 specificity</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li>å­¦è€Œä¸æ€åˆ™ç½”</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Toy-Browser-DAY2","date":"2020-05-15T14:21:46.000Z","description":["æµè§ˆå™¨ -- toy-browser"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- implementation of a toy-browser ğŸ™†\n- DAY1ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆ HTTPç›¸å…³è§£æï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å†™ HTML çš„è§£æå•¦ï¼Œå¼€ä¸å¼€å¿ƒï¼ğŸ˜\n- ![HTML çš„è§£æ](http://p1.meituan.net/myvideodistribute/6e1d35dcd8c01b557925f8d799583cb1130452.png)\n\n<!-- more -->\n\n\n\n## å®è·µè¿‡ç¨‹\n\n### ç¬¬ä¸€æ­¥ï¼šæ‹†åˆ†æ–‡ä»¶\n- ä¸ºäº†æ–¹ä¾¿æ–‡ä»¶ç®¡ç†ï¼Œæˆ‘ä»¬æŠŠparseå•ç‹¬æ‹†åˆ°æ–‡ä»¶ä¸­\n- parser æ¥å— HTML æ–‡æœ¬ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€é¢— DOM æ ‘\n\n\n- server.js\n\n\t```javascript\n\tconst server = http.createServer((req, res) => {\n\t\n\t  ... some code \n\t  \n\t  res.end(\n\t    `<html maaa=a >\n\t    <head>\n\t        <style>\n\t    body div #myid{\n\t        width:100px;\n\t        background-color: #ff5000;\n\t    }\n\t    body div img{\n\t        width:30px;\n\t        background-color: #ff1111;\n\t    }\n\t        </style>\n\t    </head>\n\t    <body>\n\t        <div>\n\t            <img id=\"myid\"/>\n\t            <img />\n\t        </div>\n\t    </body>\n\t    </html>`);\n\t});\n\t\n\tserver.listen(8088);\n\t```\n- client.js\n\t\n\t```javascript\n\t... some code\n\t\n\tvoid async function () {\n\t\n\t  ... some code\n\t  \n\t  let dom = parser.parseHTML(response.body)\n\t  \n\t}()\n\t```\n\n- parseHTML1.js\n\n\n\t```javascript\n\t// æ‹†åˆ†æ–‡ä»¶\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  console.log(html)\n\t  \n\t}\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/98a64e9c9eb9f97c01b0bb4ccb0141f976175.png)\n\t\n### ç¬¬äºŒæ­¥ï¼šåˆ›å»ºçŠ¶æ€æœº\n- æˆ‘ä»¬ç”¨ FSM æ¥å®ç° HTML çš„åˆ†æ\n- åœ¨ HTML æ ‡å‡†ä¸­ï¼Œå·²ç»è§„å®šäº† HTML çš„çŠ¶æ€\n- Toy-Browser åªæŒ‘é€‰å…¶ä¸­çš„ä¸€éƒ¨åˆ†çŠ¶æ€ï¼Œå®Œæˆä¸€ä¸ªæœ€ç®€ç‰ˆæœ¬\n\n\n- parseHTML2.js\n\n\t```javascript\n\t// åˆå§‹åŒ– FSM - Finite State Machine\n\n\tconst EOF = Symbol(\"EOF\")\n\t\n\tfunction data(char) {\n\t\n\t}\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  let state = data\n\t\n\t  for (let char of html) {\n\t    state = state(c)\n\t  }\n\t\n\t  state = state(EOF)\n\t  \n\t}\n\t```\n\t\n### ç¬¬ä¸‰æ­¥ï¼šè§£ææ ‡ç­¾\n- ä¸»è¦çš„æ ‡ç­¾æœ‰ï¼šå¼€å§‹æ ‡ç­¾ï¼Œç»“æŸæ ‡ç­¾å’Œè‡ªå°é—­æ ‡ç­¾\n- åœ¨è¿™ä¸€æ­¥æˆ‘ä»¬æš‚æ—¶å¿½ç•¥å±æ€§\n\n- ã€æœªå®Œï¼šçŠ¶æ€å›¾åˆ†æã€‘\n- parseHTML3.js\n\n\t```javascript\n\t// è§£ææ ‡ç­¾\n\n\tconst EOF = Symbol(\"EOF\")\n\t\n\tfunction data(char) {\n\t  if (char == \"<\") {\n\t    return tagOpen\n\t  } else if (char == EOF) {\n\t    return \n\t  } else {\n\t    return data\n\t  }\n\t}\n\t\n\t\n\t// 1. å¼€å§‹æ ‡ç­¾\n\t// 2. ç»“æŸæ ‡ç­¾\n\t// 3. è‡ªå°é—­æ ‡ç­¾\n\tfunction tagOpen(char) {\n\t  if (char == \"/\") { // ç»“æŸæ ‡ç­¾\n\t    return endTagOpen\n\t  } else if (char.match(/^[a-zA-Z]$/)) { // å¼€å§‹æ ‡ç­¾\n\t    return tagName(char)\n\t  } else {\n\t    return \n\t  }\n\t}\n\t\n\t\n\tfunction endTagOpen(char) {\n\t  if (char.match(/^[a-zA-Z]$/)) {\n\t    return tagName(char)\n\t  } else if (char == \">\") {\n\t\n\t  } else if(char == EOF) {\n\t\n\t  }\n\t}\n\t\n\t\n\tfunction tagName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char.match(/^[a-zA-Z]$/)) {\n\t    return tagName\n\t  } else if (char == \">\") {\n\t    return data\n\t  } else {\n\t    return tagName\n\t  }\n\t}\n\t\n\t\n\tfunction beforeAttributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \">\") {\n\t    return data\n\t  } else if (char == \"=\") {\n\t    return beforeAttributeName\n\t  } else {\n\t    return beforeAttributeName\n\t  }\n\t}\n\t\n\t\n\tfunction selfClosingStartTag(char) {\n\t  if (char == \">\") {\n\t    return data\n\t  } else if (char == \"EOF\") {\n\t\n\t  } else {\n\t\n\t  }\n\t}\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  let state = data\n\t\n\t  for (let char of html) {\n\t    state = state(char)\n\t  }\n\t\n\t  state = state(EOF)\n\t  \n\t}\n\t```\n\t\n### ç¬¬å››æ­¥ï¼šåˆ›å»ºå…ƒç´ \n- åœ¨çŠ¶æ€ä¸­ï¼Œé™¤äº†çŠ¶æ€è¿ç§»ï¼Œæˆ‘ä»¬è¿˜ä¼šè¦åŠ å…¥ä¸šåŠ¡é€»è¾‘\n- æˆ‘ä»¬åœ¨æ ‡ç­¾ç»“æŸçŠ¶æ€æäº¤æ ‡ç­¾ token\n- parseHTML4.js\n\n\t```javascript\n\t// emitToken åˆ›å»ºå…ƒç´ \n\n\tlet currentToken = null\n\t\n\tfunction emit(token) {\n\t  if (token.type != \"text\") \n\t    console.log(token)\n\t}\n\t\n\tconst EOF = Symbol(\"EOF\")\n\t\n\tfunction data(char) {\n\t  if (char == \"<\") {\n\t    return tagOpen\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == EOF) {\n\t    emit({\n\t      type: \"EOF\"\n\t    })\n\t    return \n\t  } else {\n\t    return data\n\t  }\n\t}\n\t\n\t\n\t// 1. å¼€å§‹æ ‡ç­¾\n\t// 2. ç»“æŸæ ‡ç­¾\n\t// 3. è‡ªå°é—­æ ‡ç­¾\n\tfunction tagOpen(char) {\n\t  if (char == \"/\") { // ç»“æŸæ ‡ç­¾\n\t    return endTagOpen\n\t  } else if (char.match(/^[a-zA-Z]$/)) { // å¼€å§‹æ ‡ç­¾\n\t    currentToken = {\n\t      type: \"startTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else {\n\t    return \n\t  }\n\t}\n\t\n\t\n\tfunction endTagOpen(char) {\n\t  if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken = {\n\t      type: \"endTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else if (char == \">\") {\n\t\n\t  } else if(char == EOF) {\n\t\n\t  }\n\t}\n\t\n\t\n\tfunction tagName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName(char)\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken.tagName += char.toLowerCase()\n\t    return tagName\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    return data\n\t  } else {\n\t    return tagName\n\t  }\n\t}\n\t\n\t\n\tfunction beforeAttributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \">\") {\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char == EOF) {\n\t    return \n\t  } else if (char == \"=\") {\n\t    return data\n\t  } else {\n\t    return beforeAttributeName\n\t  }\n\t}\n\t\n\t\n\tfunction selfClosingStartTag(char) {\n\t  if (char == \">\" || char == \"/\") {\n\t    currentToken.isSelfClosing = true\n\t    currentToken.type = \"selfClosingTag\"\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"EOF\") {\n\t\n\t  } else {\n\t\n\t  }\n\t}\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  let state = data\n\t\n\t  for (let char of html) {\n\t    state = state(char)\n\t  }\n\t\n\t  state = state(EOF)\n\t  \n\t}\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬å››æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/5c4078e02702211bbe87ca75d2044cdb106832.png)\n\n\t\n### ç¬¬äº”æ­¥ï¼šå¤„ç†å±æ€§\n- å±æ€§åˆ†ä¸ºå•å¼•å·ã€åŒå¼•å·ã€æ— å¼•å·ä¸‰ç§å†™æ³•ï¼Œå› æ­¤éœ€è¦è¾ƒå¤šçŠ¶æ€å¤„ç†\n- å¤„ç†å±æ€§çš„æ–¹å¼è·Ÿæ ‡ç­¾ç±»ä¼¼\n- å±æ€§ç»“æŸæ—¶ï¼Œæˆ‘ä»¬æŠŠå±æ€§åŠ åˆ°æ ‡ç­¾ token ä¸Š\n\n- parseHTML5.js\n\n\t```javascript\n\t// å¤„ç†å±æ€§ attribute\n\n\tlet currentToken = null\n\tlet currentAttribute = null\n\t\n\tfunction emit(token) {\n\t  if (token.type != \"text\") \n\t    console.log(token)\n\t}\n\t\n\tconst EOF = Symbol(\"EOF\")\n\t\n\tfunction data(char) {\n\t  if (char == \"<\") {\n\t    return tagOpen\n\t  } else if (char == EOF) {\n\t    emit({\n\t      type: \"EOF\"\n\t    })\n\t    return \n\t  } else {\n\t    emit({\n\t      type: \"text\",\n\t      content: char\n\t    })\n\t    return data\n\t  }\n\t}\n\t\n\t\n\t// 1. å¼€å§‹æ ‡ç­¾\n\t// 2. ç»“æŸæ ‡ç­¾\n\t// 3. è‡ªå°é—­æ ‡ç­¾\n\tfunction tagOpen(char) {\n\t  if (char == \"/\") { // ç»“æŸæ ‡ç­¾\n\t    return endTagOpen\n\t  } else if (char.match(/^[a-zA-Z]$/)) { // å¼€å§‹æ ‡ç­¾\n\t    currentToken = {\n\t      type: \"startTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\t\n\tfunction endTagOpen(char) {\n\t  if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken = {\n\t      type: \"endTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else if (char == \">\") {\n\t    // return data\n\t  } else if(char == EOF) {\n\t    // return data\n\t  }\n\t}\n\t\n\t\n\tfunction tagName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName(char)\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken.tagName += char.toLowerCase()\n\t    return tagName\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    return data\n\t  } else {\n\t    return tagName\n\t  }\n\t}\n\t\n\t\n\tfunction beforeAttributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \">\" || char == \"/\" || char == EOF) {\n\t    return afterAttributeName(char)\n\t  } else if (char == \"=\") {\n\t    return \n\t  } else {\n\t    currentAttribute = {\n\t      name: \"\",\n\t      value: \"\"\n\t    }\n\t    return attributeName(char)\n\t  }\n\t}\n\t\n\tfunction afterAttributeName(char) {\n\t  if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char == EOF) {\n\t    return \n\t  } else {\n\t    emit(currentToken)\n\t    return data\n\t  }\n\t}\n\t\n\tfunction attributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/) || char == \"/\" || char == \">\" || char == EOF) { \n\t    return afterAttributeName(char)\n\t  } else if (char == \"=\") {\n\t    return beforeAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == \"\\\"\" || char == \"\\'\" || char == \"<\") {\n\t    return attributeName\n\t  } else {\n\t    currentAttribute.name += char\n\t    return attributeName\n\t  }\n\t}\n\t\n\tfunction beforeAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/) || char == \"/\" || char == \">\" || char == EOF) { \n\t    return beforeAttributeValue\n\t  } else if (char == \"\\\"\") {\n\t    return doubleQuotedAttributeValue\n\t  } else if (char == \"\\'\") {\n\t    return singleQuotedAttributeValue\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    // return data\n\t  } else {\n\t    return UnquotedAttributeValue(char)\n\t  }\n\t}\n\t\n\tfunction doubleQuotedAttributeValue(char) {\n\t  if (char == \"\\\"\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    return afterQuotedAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return doubleQuotedAttributeValue\n\t  }\n\t}\n\t\n\tfunction singleQuotedAttributeValue(char) {\n\t  if (char == \"\\'\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    return afterQuotedAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return singleQuotedAttributeValue\n\t  }\n\t}\n\t\n\tfunction afterQuotedAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char ==\">\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\tfunction UnquotedAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    // emit(currentToken)\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    // emit(currentToken)\n\t    return selfClosingStartTag\n\t  } else if (char == \">\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == \"\\\"\" || char == \"\\'\" || char == \"<\" || char == \"=\" || char == \"`\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return UnquotedAttributeValue\n\t  }\n\t}\n\t\n\t\n\tfunction selfClosingStartTag(char) {\n\t  if (char == \">\" || char == \"/\") {\n\t    currentToken.isSelfClosing = true\n\t    currentToken.type = \"selfClosingTag\"\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"EOF\") {\n\t    // return data\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  let state = data\n\t\n\t  for (let char of html) {\n\t    state = state(char)\n\t    // console.log(state)\n\t  }\n\t\n\t  state = state(EOF)\n\t  \n\t}\n\t```\n\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬äº”æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/3b45aac402868fe1c62c7d7debbcfd24114412.png)\n\n\t\n### ç¬¬å…­æ­¥ï¼šæ„å»º DOM æ ‘\n- ä»æ ‡ç­¾åˆ›å»º DOM æ ‘çš„åŸºæœ¬æŠ€å·§æ˜¯ä½¿ç”¨æ ˆ\n- é‡åˆ°å¼€å§‹æ ‡ç­¾æ—¶åˆ›å»ºå…ƒç´ å¹¶å…¥æ ˆï¼Œé‡åˆ°ç»“æŸæ ‡ç­¾æ—¶å‡ºæ ˆ\n- è‡ªå°é—­èŠ‚ç‚¹å¯è§†ä¸ºå…¥æ ˆåç«‹åˆ»å‡ºæ ˆ\n- ä»»ä½•å…ƒç´ çš„çˆ¶å…ƒç´ æ˜¯å®ƒå…¥æ ˆå‰çš„æ ˆé¡¶\n- parseHTML6.js\n\n\t```javascript\n\t// å¤„ç†å±æ€§ constructTree\n\n\tlet currentToken = null\n\tlet currentAttribute = null\n\t\n\tlet stack = [{type: \"document\", children: []}]\n\t\n\tfunction emit(token) {\n\t  if (token.type == \"text\") \n\t    return\n\t\n\t  let top = stack[stack.length - 1]\n\t\n\t\n\t  if (token.type == \"startTag\") {\n\t    let element = {\n\t      type: \"element\",\n\t      children: [],\n\t      attributes: []\n\t    }\n\t\n\t    element.tagName = token.tagName\n\t\n\t    for (let p in token) {\n\t      if (p != \"type\" && p != \"tagName\") {\n\t        element.attributes.push({\n\t          name: p,\n\t          value: token[p]\n\t        })\n\t      }\n\t    }\n\t\n\t    top.children.push(element)\n\t    element.parent = top\n\t\n\t    if (!token.isSelfClosing)\n\t      stack.push(element)\n\t\n\t    console.log('push', element)\n\t\n\t  } else if (token.type == \"endTag\") {\n\t    if (top.tagName != token.tagName) {\n\t      throw new Error(\"Tag start end doesn't match\")\n\t    } else {\n\t      console.log('pop', stack.pop())\n\t    }\n\t  }\n\t}\n\t\n\tconst EOF = Symbol(\"EOF\")\n\t\n\tfunction data(char) {\n\t  if (char == \"<\") {\n\t    return tagOpen\n\t  } else if (char == EOF) {\n\t    emit({\n\t      type: \"EOF\"\n\t    })\n\t    return \n\t  } else {\n\t    emit({\n\t      type: \"text\",\n\t      content: char\n\t    })\n\t    return data\n\t  }\n\t}\n\t\n\t\n\t// 1. å¼€å§‹æ ‡ç­¾\n\t// 2. ç»“æŸæ ‡ç­¾\n\t// 3. è‡ªå°é—­æ ‡ç­¾\n\tfunction tagOpen(char) {\n\t  if (char == \"/\") { // ç»“æŸæ ‡ç­¾\n\t    return endTagOpen\n\t  } else if (char.match(/^[a-zA-Z]$/)) { // å¼€å§‹æ ‡ç­¾\n\t    currentToken = {\n\t      type: \"startTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\t\n\tfunction endTagOpen(char) {\n\t  if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken = {\n\t      type: \"endTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else if (char == \">\") {\n\t    // return data\n\t  } else if(char == EOF) {\n\t    // return data\n\t  }\n\t}\n\t\n\t\n\tfunction tagName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName(char)\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken.tagName += char.toLowerCase()\n\t    return tagName\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    return data\n\t  } else {\n\t    return tagName\n\t  }\n\t}\n\t\n\t\n\tfunction beforeAttributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \">\" || char == \"/\" || char == EOF) {\n\t    return afterAttributeName(char)\n\t  } else if (char == \"=\") {\n\t    return \n\t  } else {\n\t    currentAttribute = {\n\t      name: \"\",\n\t      value: \"\"\n\t    }\n\t    return attributeName(char)\n\t  }\n\t}\n\t\n\tfunction afterAttributeName(char) {\n\t  if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char == EOF) {\n\t    return \n\t  } else {\n\t    emit(currentToken)\n\t    return data\n\t  }\n\t}\n\t\n\tfunction attributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/) || char == \"/\" || char == \">\" || char == EOF) { \n\t    return afterAttributeName(char)\n\t  } else if (char == \"=\") {\n\t    return beforeAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == \"\\\"\" || char == \"\\'\" || char == \"<\") {\n\t    return attributeName\n\t  } else {\n\t    currentAttribute.name += char\n\t    return attributeName\n\t  }\n\t}\n\t\n\tfunction beforeAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/) || char == \"/\" || char == \">\" || char == EOF) { \n\t    return beforeAttributeValue\n\t  } else if (char == \"\\\"\") {\n\t    return doubleQuotedAttributeValue\n\t  } else if (char == \"\\'\") {\n\t    return singleQuotedAttributeValue\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    // return data\n\t  } else {\n\t    return UnquotedAttributeValue(char)\n\t  }\n\t}\n\t\n\tfunction doubleQuotedAttributeValue(char) {\n\t  if (char == \"\\\"\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    return afterQuotedAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return doubleQuotedAttributeValue\n\t  }\n\t}\n\t\n\tfunction singleQuotedAttributeValue(char) {\n\t  if (char == \"\\'\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    return afterQuotedAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return singleQuotedAttributeValue\n\t  }\n\t}\n\t\n\tfunction afterQuotedAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char ==\">\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\tfunction UnquotedAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    // emit(currentToken)\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    // emit(currentToken)\n\t    return selfClosingStartTag\n\t  } else if (char == \">\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == \"\\\"\" || char == \"\\'\" || char == \"<\" || char == \"=\" || char == \"`\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return UnquotedAttributeValue\n\t  }\n\t}\n\t\n\t\n\tfunction selfClosingStartTag(char) {\n\t  if (char == \">\" || char == \"/\") {\n\t    currentToken.isSelfClosing = true\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"EOF\") {\n\t    // return data\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  let state = data\n\t\n\t  for (let char of html) {\n\t    state = state(char)\n\t    // console.log(state)\n\t  }\n\t\n\t  state = state(EOF)\n\t  \n\t  console.log(stack)\n\t}\n\t```\n\t\n- è¿è¡Œç»“æœï¼šè¿™è¾¹æˆ‘åœ¨æ¯æ¬¡å¯¹æ ˆæ“ä½œæ—¶(push/pop)æ—¶ï¼Œæ·»åŠ äº† console\n\t- ![ç¬¬å…­æ­¥è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/f83a95f5afec8c5ad34c8df0a34a6ff8116344.png)\n- è¿™è¾¹æ¨èä½¿ç”¨ [vs-code debugger ä½¿ç”¨æ–¹æ³•](https://code.visualstudio.com/docs/editor/debugging)\n\t- ![ç¬¬å…­æ­¥è¿è¡Œç»“æœ vscode debugger](http://p0.meituan.net/myvideodistribute/7a4cb0d87ac89cb3a5ae4252c3a5d6a7321211.png)\n\n\n### ç¬¬ä¸ƒæ­¥ï¼šæ–‡æœ¬èŠ‚ç‚¹\n- æ–‡æœ¬èŠ‚ç‚¹ä¸è‡ªå°é—­æ ‡ç­¾å¤„ç†ç±»ä¼¼\n- å¤šä¸ªæ–‡æœ¬èŠ‚ç‚¹éœ€è¦åˆå¹¶\n\n- parseHTML7.js\n\n\t```javascript\n\t// å¤„ç†æ–‡æœ¬èŠ‚ç‚¹ combineText\n\n\tlet currentToken = null\n\tlet currentAttribute = null\n\tlet currentTextNode = null\n\t\n\tlet stack = [{type: \"document\", children: []}]\n\t\n\tfunction emit(token) {\n\t\n\t  let top = stack[stack.length - 1]\n\t\n\t  if (token.type == \"startTag\") {\n\t    let element = {\n\t      type: \"element\",\n\t      children: [],\n\t      attributes: []\n\t    }\n\t\n\t    element.tagName = token.tagName\n\t\n\t    for (let p in token) {\n\t      if (p != \"type\" && p != \"tagName\") {\n\t        element.attributes.push({\n\t          name: p,\n\t          value: token[p]\n\t        })\n\t      }\n\t    }\n\t\n\t    top.children.push(element)\n\t    element.parent = top\n\t\n\t    if (!token.isSelfClosing)\n\t      stack.push(element)\n\t    \n\t    currentTextNode = null\n\t    // console.log('push', element)\n\t  } else if (token.type == \"endTag\") {\n\t    if (top.tagName != token.tagName) {\n\t      throw new Error(\"Tag start end doesn't match\")\n\t    } else {\n\t      // console.log('pop', stack.pop())\n\t      stack.pop()\n\t    }\n\t    currentTextNode = null\n\t  } else if (token.type == \"text\") {\n\t    if (currentTextNode == null) {\n\t      currentTextNode = {\n\t        type: \"text\",\n\t        content: \"\"\n\t      }\n\t      top.children.push(currentTextNode)\n\t    }\n\t    currentTextNode.content += token.content\n\t    // console.log(top.children)\n\t  }\n\t}\n\t\n\tconst EOF = Symbol(\"EOF\")\n\t\n\tfunction data(char) {\n\t  if (char == \"<\") {\n\t    return tagOpen\n\t  } else if (char == EOF) {\n\t    emit({\n\t      type: \"EOF\"\n\t    })\n\t    return \n\t  } else {\n\t    emit({\n\t      type: \"text\",\n\t      content: char\n\t    })\n\t    return data\n\t  }\n\t}\n\t\n\t\n\t// 1. å¼€å§‹æ ‡ç­¾\n\t// 2. ç»“æŸæ ‡ç­¾\n\t// 3. è‡ªå°é—­æ ‡ç­¾\n\tfunction tagOpen(char) {\n\t  if (char == \"/\") { // ç»“æŸæ ‡ç­¾\n\t    return endTagOpen\n\t  } else if (char.match(/^[a-zA-Z]$/)) { // å¼€å§‹æ ‡ç­¾\n\t    currentToken = {\n\t      type: \"startTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\t\n\tfunction endTagOpen(char) {\n\t  if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken = {\n\t      type: \"endTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else if (char == \">\") {\n\t    // return data\n\t  } else if(char == EOF) {\n\t    // return data\n\t  }\n\t}\n\t\n\t\n\tfunction tagName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName(char)\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken.tagName += char.toLowerCase()\n\t    return tagName\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    return data\n\t  } else {\n\t    return tagName\n\t  }\n\t}\n\t\n\t\n\tfunction beforeAttributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \">\" || char == \"/\" || char == EOF) {\n\t    return afterAttributeName(char)\n\t  } else if (char == \"=\") {\n\t    return \n\t  } else {\n\t    currentAttribute = {\n\t      name: \"\",\n\t      value: \"\"\n\t    }\n\t    return attributeName(char)\n\t  }\n\t}\n\t\n\tfunction afterAttributeName(char) {\n\t  if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char == EOF) {\n\t    return \n\t  } else {\n\t    emit(currentToken)\n\t    return data\n\t  }\n\t}\n\t\n\tfunction attributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/) || char == \"/\" || char == \">\" || char == EOF) { \n\t    return afterAttributeName(char)\n\t  } else if (char == \"=\") {\n\t    return beforeAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == \"\\\"\" || char == \"\\'\" || char == \"<\") {\n\t    return attributeName\n\t  } else {\n\t    currentAttribute.name += char\n\t    return attributeName\n\t  }\n\t}\n\t\n\tfunction beforeAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/) || char == \"/\" || char == \">\" || char == EOF) { \n\t    return beforeAttributeValue\n\t  } else if (char == \"\\\"\") {\n\t    return doubleQuotedAttributeValue\n\t  } else if (char == \"\\'\") {\n\t    return singleQuotedAttributeValue\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    // return data\n\t  } else {\n\t    return UnquotedAttributeValue(char)\n\t  }\n\t}\n\t\n\tfunction doubleQuotedAttributeValue(char) {\n\t  if (char == \"\\\"\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    return afterQuotedAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return doubleQuotedAttributeValue\n\t  }\n\t}\n\t\n\tfunction singleQuotedAttributeValue(char) {\n\t  if (char == \"\\'\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    return afterQuotedAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return singleQuotedAttributeValue\n\t  }\n\t}\n\t\n\tfunction afterQuotedAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char ==\">\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\tfunction UnquotedAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    // emit(currentToken)\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    // emit(currentToken)\n\t    return selfClosingStartTag\n\t  } else if (char == \">\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == \"\\\"\" || char == \"\\'\" || char == \"<\" || char == \"=\" || char == \"`\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return UnquotedAttributeValue\n\t  }\n\t}\n\t\n\t\n\tfunction selfClosingStartTag(char) {\n\t  if (char == \">\" || char == \"/\") {\n\t    currentToken.isSelfClosing = true\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"EOF\") {\n\t    // return data\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  let state = data\n\t\n\t  for (let char of html) {\n\t    state = state(char)\n\t  }\n\t\n\t  state = state(EOF)\n\t  \n\t}\n\t```\n\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬å…­æ­¥è¿è¡Œç»“æœ vscode debugger](http://p0.meituan.net/myvideodistribute/1d00a3a9aa02bd2ff5eb52805c38768b345257.png)\n\n\n\n## å‚è€ƒæ–‡çŒ®\n- [HTML standard docs](https://html.spec.whatwg.org/multipage/)\n- [VSCODE debugger](https://code.visualstudio.com/docs/editor/debugging)\n\n\n\n## å†™åœ¨åé¢\n- [å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser)\n- å­¦è€Œä¸æ€åˆ™ç½” äº’å‹‰\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","source":"_posts/Toy-Browser-DAY2.md","raw":"---\ntitle: Toy-Browser-DAY2\ndate: 2020-05-15 22:21:46\ntags:\n- æµè§ˆå™¨\ncategories:\n- æµè§ˆå™¨\ndescription:\n- æµè§ˆå™¨ -- toy-browser\n\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- implementation of a toy-browser ğŸ™†\n- DAY1ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆ HTTPç›¸å…³è§£æï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å†™ HTML çš„è§£æå•¦ï¼Œå¼€ä¸å¼€å¿ƒï¼ğŸ˜\n- ![HTML çš„è§£æ](http://p1.meituan.net/myvideodistribute/6e1d35dcd8c01b557925f8d799583cb1130452.png)\n\n<!-- more -->\n\n\n\n## å®è·µè¿‡ç¨‹\n\n### ç¬¬ä¸€æ­¥ï¼šæ‹†åˆ†æ–‡ä»¶\n- ä¸ºäº†æ–¹ä¾¿æ–‡ä»¶ç®¡ç†ï¼Œæˆ‘ä»¬æŠŠparseå•ç‹¬æ‹†åˆ°æ–‡ä»¶ä¸­\n- parser æ¥å— HTML æ–‡æœ¬ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€é¢— DOM æ ‘\n\n\n- server.js\n\n\t```javascript\n\tconst server = http.createServer((req, res) => {\n\t\n\t  ... some code \n\t  \n\t  res.end(\n\t    `<html maaa=a >\n\t    <head>\n\t        <style>\n\t    body div #myid{\n\t        width:100px;\n\t        background-color: #ff5000;\n\t    }\n\t    body div img{\n\t        width:30px;\n\t        background-color: #ff1111;\n\t    }\n\t        </style>\n\t    </head>\n\t    <body>\n\t        <div>\n\t            <img id=\"myid\"/>\n\t            <img />\n\t        </div>\n\t    </body>\n\t    </html>`);\n\t});\n\t\n\tserver.listen(8088);\n\t```\n- client.js\n\t\n\t```javascript\n\t... some code\n\t\n\tvoid async function () {\n\t\n\t  ... some code\n\t  \n\t  let dom = parser.parseHTML(response.body)\n\t  \n\t}()\n\t```\n\n- parseHTML1.js\n\n\n\t```javascript\n\t// æ‹†åˆ†æ–‡ä»¶\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  console.log(html)\n\t  \n\t}\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/98a64e9c9eb9f97c01b0bb4ccb0141f976175.png)\n\t\n### ç¬¬äºŒæ­¥ï¼šåˆ›å»ºçŠ¶æ€æœº\n- æˆ‘ä»¬ç”¨ FSM æ¥å®ç° HTML çš„åˆ†æ\n- åœ¨ HTML æ ‡å‡†ä¸­ï¼Œå·²ç»è§„å®šäº† HTML çš„çŠ¶æ€\n- Toy-Browser åªæŒ‘é€‰å…¶ä¸­çš„ä¸€éƒ¨åˆ†çŠ¶æ€ï¼Œå®Œæˆä¸€ä¸ªæœ€ç®€ç‰ˆæœ¬\n\n\n- parseHTML2.js\n\n\t```javascript\n\t// åˆå§‹åŒ– FSM - Finite State Machine\n\n\tconst EOF = Symbol(\"EOF\")\n\t\n\tfunction data(char) {\n\t\n\t}\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  let state = data\n\t\n\t  for (let char of html) {\n\t    state = state(c)\n\t  }\n\t\n\t  state = state(EOF)\n\t  \n\t}\n\t```\n\t\n### ç¬¬ä¸‰æ­¥ï¼šè§£ææ ‡ç­¾\n- ä¸»è¦çš„æ ‡ç­¾æœ‰ï¼šå¼€å§‹æ ‡ç­¾ï¼Œç»“æŸæ ‡ç­¾å’Œè‡ªå°é—­æ ‡ç­¾\n- åœ¨è¿™ä¸€æ­¥æˆ‘ä»¬æš‚æ—¶å¿½ç•¥å±æ€§\n\n- ã€æœªå®Œï¼šçŠ¶æ€å›¾åˆ†æã€‘\n- parseHTML3.js\n\n\t```javascript\n\t// è§£ææ ‡ç­¾\n\n\tconst EOF = Symbol(\"EOF\")\n\t\n\tfunction data(char) {\n\t  if (char == \"<\") {\n\t    return tagOpen\n\t  } else if (char == EOF) {\n\t    return \n\t  } else {\n\t    return data\n\t  }\n\t}\n\t\n\t\n\t// 1. å¼€å§‹æ ‡ç­¾\n\t// 2. ç»“æŸæ ‡ç­¾\n\t// 3. è‡ªå°é—­æ ‡ç­¾\n\tfunction tagOpen(char) {\n\t  if (char == \"/\") { // ç»“æŸæ ‡ç­¾\n\t    return endTagOpen\n\t  } else if (char.match(/^[a-zA-Z]$/)) { // å¼€å§‹æ ‡ç­¾\n\t    return tagName(char)\n\t  } else {\n\t    return \n\t  }\n\t}\n\t\n\t\n\tfunction endTagOpen(char) {\n\t  if (char.match(/^[a-zA-Z]$/)) {\n\t    return tagName(char)\n\t  } else if (char == \">\") {\n\t\n\t  } else if(char == EOF) {\n\t\n\t  }\n\t}\n\t\n\t\n\tfunction tagName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char.match(/^[a-zA-Z]$/)) {\n\t    return tagName\n\t  } else if (char == \">\") {\n\t    return data\n\t  } else {\n\t    return tagName\n\t  }\n\t}\n\t\n\t\n\tfunction beforeAttributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \">\") {\n\t    return data\n\t  } else if (char == \"=\") {\n\t    return beforeAttributeName\n\t  } else {\n\t    return beforeAttributeName\n\t  }\n\t}\n\t\n\t\n\tfunction selfClosingStartTag(char) {\n\t  if (char == \">\") {\n\t    return data\n\t  } else if (char == \"EOF\") {\n\t\n\t  } else {\n\t\n\t  }\n\t}\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  let state = data\n\t\n\t  for (let char of html) {\n\t    state = state(char)\n\t  }\n\t\n\t  state = state(EOF)\n\t  \n\t}\n\t```\n\t\n### ç¬¬å››æ­¥ï¼šåˆ›å»ºå…ƒç´ \n- åœ¨çŠ¶æ€ä¸­ï¼Œé™¤äº†çŠ¶æ€è¿ç§»ï¼Œæˆ‘ä»¬è¿˜ä¼šè¦åŠ å…¥ä¸šåŠ¡é€»è¾‘\n- æˆ‘ä»¬åœ¨æ ‡ç­¾ç»“æŸçŠ¶æ€æäº¤æ ‡ç­¾ token\n- parseHTML4.js\n\n\t```javascript\n\t// emitToken åˆ›å»ºå…ƒç´ \n\n\tlet currentToken = null\n\t\n\tfunction emit(token) {\n\t  if (token.type != \"text\") \n\t    console.log(token)\n\t}\n\t\n\tconst EOF = Symbol(\"EOF\")\n\t\n\tfunction data(char) {\n\t  if (char == \"<\") {\n\t    return tagOpen\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == EOF) {\n\t    emit({\n\t      type: \"EOF\"\n\t    })\n\t    return \n\t  } else {\n\t    return data\n\t  }\n\t}\n\t\n\t\n\t// 1. å¼€å§‹æ ‡ç­¾\n\t// 2. ç»“æŸæ ‡ç­¾\n\t// 3. è‡ªå°é—­æ ‡ç­¾\n\tfunction tagOpen(char) {\n\t  if (char == \"/\") { // ç»“æŸæ ‡ç­¾\n\t    return endTagOpen\n\t  } else if (char.match(/^[a-zA-Z]$/)) { // å¼€å§‹æ ‡ç­¾\n\t    currentToken = {\n\t      type: \"startTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else {\n\t    return \n\t  }\n\t}\n\t\n\t\n\tfunction endTagOpen(char) {\n\t  if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken = {\n\t      type: \"endTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else if (char == \">\") {\n\t\n\t  } else if(char == EOF) {\n\t\n\t  }\n\t}\n\t\n\t\n\tfunction tagName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName(char)\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken.tagName += char.toLowerCase()\n\t    return tagName\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    return data\n\t  } else {\n\t    return tagName\n\t  }\n\t}\n\t\n\t\n\tfunction beforeAttributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \">\") {\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char == EOF) {\n\t    return \n\t  } else if (char == \"=\") {\n\t    return data\n\t  } else {\n\t    return beforeAttributeName\n\t  }\n\t}\n\t\n\t\n\tfunction selfClosingStartTag(char) {\n\t  if (char == \">\" || char == \"/\") {\n\t    currentToken.isSelfClosing = true\n\t    currentToken.type = \"selfClosingTag\"\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"EOF\") {\n\t\n\t  } else {\n\t\n\t  }\n\t}\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  let state = data\n\t\n\t  for (let char of html) {\n\t    state = state(char)\n\t  }\n\t\n\t  state = state(EOF)\n\t  \n\t}\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬å››æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/5c4078e02702211bbe87ca75d2044cdb106832.png)\n\n\t\n### ç¬¬äº”æ­¥ï¼šå¤„ç†å±æ€§\n- å±æ€§åˆ†ä¸ºå•å¼•å·ã€åŒå¼•å·ã€æ— å¼•å·ä¸‰ç§å†™æ³•ï¼Œå› æ­¤éœ€è¦è¾ƒå¤šçŠ¶æ€å¤„ç†\n- å¤„ç†å±æ€§çš„æ–¹å¼è·Ÿæ ‡ç­¾ç±»ä¼¼\n- å±æ€§ç»“æŸæ—¶ï¼Œæˆ‘ä»¬æŠŠå±æ€§åŠ åˆ°æ ‡ç­¾ token ä¸Š\n\n- parseHTML5.js\n\n\t```javascript\n\t// å¤„ç†å±æ€§ attribute\n\n\tlet currentToken = null\n\tlet currentAttribute = null\n\t\n\tfunction emit(token) {\n\t  if (token.type != \"text\") \n\t    console.log(token)\n\t}\n\t\n\tconst EOF = Symbol(\"EOF\")\n\t\n\tfunction data(char) {\n\t  if (char == \"<\") {\n\t    return tagOpen\n\t  } else if (char == EOF) {\n\t    emit({\n\t      type: \"EOF\"\n\t    })\n\t    return \n\t  } else {\n\t    emit({\n\t      type: \"text\",\n\t      content: char\n\t    })\n\t    return data\n\t  }\n\t}\n\t\n\t\n\t// 1. å¼€å§‹æ ‡ç­¾\n\t// 2. ç»“æŸæ ‡ç­¾\n\t// 3. è‡ªå°é—­æ ‡ç­¾\n\tfunction tagOpen(char) {\n\t  if (char == \"/\") { // ç»“æŸæ ‡ç­¾\n\t    return endTagOpen\n\t  } else if (char.match(/^[a-zA-Z]$/)) { // å¼€å§‹æ ‡ç­¾\n\t    currentToken = {\n\t      type: \"startTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\t\n\tfunction endTagOpen(char) {\n\t  if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken = {\n\t      type: \"endTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else if (char == \">\") {\n\t    // return data\n\t  } else if(char == EOF) {\n\t    // return data\n\t  }\n\t}\n\t\n\t\n\tfunction tagName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName(char)\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken.tagName += char.toLowerCase()\n\t    return tagName\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    return data\n\t  } else {\n\t    return tagName\n\t  }\n\t}\n\t\n\t\n\tfunction beforeAttributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \">\" || char == \"/\" || char == EOF) {\n\t    return afterAttributeName(char)\n\t  } else if (char == \"=\") {\n\t    return \n\t  } else {\n\t    currentAttribute = {\n\t      name: \"\",\n\t      value: \"\"\n\t    }\n\t    return attributeName(char)\n\t  }\n\t}\n\t\n\tfunction afterAttributeName(char) {\n\t  if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char == EOF) {\n\t    return \n\t  } else {\n\t    emit(currentToken)\n\t    return data\n\t  }\n\t}\n\t\n\tfunction attributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/) || char == \"/\" || char == \">\" || char == EOF) { \n\t    return afterAttributeName(char)\n\t  } else if (char == \"=\") {\n\t    return beforeAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == \"\\\"\" || char == \"\\'\" || char == \"<\") {\n\t    return attributeName\n\t  } else {\n\t    currentAttribute.name += char\n\t    return attributeName\n\t  }\n\t}\n\t\n\tfunction beforeAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/) || char == \"/\" || char == \">\" || char == EOF) { \n\t    return beforeAttributeValue\n\t  } else if (char == \"\\\"\") {\n\t    return doubleQuotedAttributeValue\n\t  } else if (char == \"\\'\") {\n\t    return singleQuotedAttributeValue\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    // return data\n\t  } else {\n\t    return UnquotedAttributeValue(char)\n\t  }\n\t}\n\t\n\tfunction doubleQuotedAttributeValue(char) {\n\t  if (char == \"\\\"\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    return afterQuotedAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return doubleQuotedAttributeValue\n\t  }\n\t}\n\t\n\tfunction singleQuotedAttributeValue(char) {\n\t  if (char == \"\\'\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    return afterQuotedAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return singleQuotedAttributeValue\n\t  }\n\t}\n\t\n\tfunction afterQuotedAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char ==\">\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\tfunction UnquotedAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    // emit(currentToken)\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    // emit(currentToken)\n\t    return selfClosingStartTag\n\t  } else if (char == \">\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == \"\\\"\" || char == \"\\'\" || char == \"<\" || char == \"=\" || char == \"`\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return UnquotedAttributeValue\n\t  }\n\t}\n\t\n\t\n\tfunction selfClosingStartTag(char) {\n\t  if (char == \">\" || char == \"/\") {\n\t    currentToken.isSelfClosing = true\n\t    currentToken.type = \"selfClosingTag\"\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"EOF\") {\n\t    // return data\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  let state = data\n\t\n\t  for (let char of html) {\n\t    state = state(char)\n\t    // console.log(state)\n\t  }\n\t\n\t  state = state(EOF)\n\t  \n\t}\n\t```\n\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬äº”æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/3b45aac402868fe1c62c7d7debbcfd24114412.png)\n\n\t\n### ç¬¬å…­æ­¥ï¼šæ„å»º DOM æ ‘\n- ä»æ ‡ç­¾åˆ›å»º DOM æ ‘çš„åŸºæœ¬æŠ€å·§æ˜¯ä½¿ç”¨æ ˆ\n- é‡åˆ°å¼€å§‹æ ‡ç­¾æ—¶åˆ›å»ºå…ƒç´ å¹¶å…¥æ ˆï¼Œé‡åˆ°ç»“æŸæ ‡ç­¾æ—¶å‡ºæ ˆ\n- è‡ªå°é—­èŠ‚ç‚¹å¯è§†ä¸ºå…¥æ ˆåç«‹åˆ»å‡ºæ ˆ\n- ä»»ä½•å…ƒç´ çš„çˆ¶å…ƒç´ æ˜¯å®ƒå…¥æ ˆå‰çš„æ ˆé¡¶\n- parseHTML6.js\n\n\t```javascript\n\t// å¤„ç†å±æ€§ constructTree\n\n\tlet currentToken = null\n\tlet currentAttribute = null\n\t\n\tlet stack = [{type: \"document\", children: []}]\n\t\n\tfunction emit(token) {\n\t  if (token.type == \"text\") \n\t    return\n\t\n\t  let top = stack[stack.length - 1]\n\t\n\t\n\t  if (token.type == \"startTag\") {\n\t    let element = {\n\t      type: \"element\",\n\t      children: [],\n\t      attributes: []\n\t    }\n\t\n\t    element.tagName = token.tagName\n\t\n\t    for (let p in token) {\n\t      if (p != \"type\" && p != \"tagName\") {\n\t        element.attributes.push({\n\t          name: p,\n\t          value: token[p]\n\t        })\n\t      }\n\t    }\n\t\n\t    top.children.push(element)\n\t    element.parent = top\n\t\n\t    if (!token.isSelfClosing)\n\t      stack.push(element)\n\t\n\t    console.log('push', element)\n\t\n\t  } else if (token.type == \"endTag\") {\n\t    if (top.tagName != token.tagName) {\n\t      throw new Error(\"Tag start end doesn't match\")\n\t    } else {\n\t      console.log('pop', stack.pop())\n\t    }\n\t  }\n\t}\n\t\n\tconst EOF = Symbol(\"EOF\")\n\t\n\tfunction data(char) {\n\t  if (char == \"<\") {\n\t    return tagOpen\n\t  } else if (char == EOF) {\n\t    emit({\n\t      type: \"EOF\"\n\t    })\n\t    return \n\t  } else {\n\t    emit({\n\t      type: \"text\",\n\t      content: char\n\t    })\n\t    return data\n\t  }\n\t}\n\t\n\t\n\t// 1. å¼€å§‹æ ‡ç­¾\n\t// 2. ç»“æŸæ ‡ç­¾\n\t// 3. è‡ªå°é—­æ ‡ç­¾\n\tfunction tagOpen(char) {\n\t  if (char == \"/\") { // ç»“æŸæ ‡ç­¾\n\t    return endTagOpen\n\t  } else if (char.match(/^[a-zA-Z]$/)) { // å¼€å§‹æ ‡ç­¾\n\t    currentToken = {\n\t      type: \"startTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\t\n\tfunction endTagOpen(char) {\n\t  if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken = {\n\t      type: \"endTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else if (char == \">\") {\n\t    // return data\n\t  } else if(char == EOF) {\n\t    // return data\n\t  }\n\t}\n\t\n\t\n\tfunction tagName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName(char)\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken.tagName += char.toLowerCase()\n\t    return tagName\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    return data\n\t  } else {\n\t    return tagName\n\t  }\n\t}\n\t\n\t\n\tfunction beforeAttributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \">\" || char == \"/\" || char == EOF) {\n\t    return afterAttributeName(char)\n\t  } else if (char == \"=\") {\n\t    return \n\t  } else {\n\t    currentAttribute = {\n\t      name: \"\",\n\t      value: \"\"\n\t    }\n\t    return attributeName(char)\n\t  }\n\t}\n\t\n\tfunction afterAttributeName(char) {\n\t  if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char == EOF) {\n\t    return \n\t  } else {\n\t    emit(currentToken)\n\t    return data\n\t  }\n\t}\n\t\n\tfunction attributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/) || char == \"/\" || char == \">\" || char == EOF) { \n\t    return afterAttributeName(char)\n\t  } else if (char == \"=\") {\n\t    return beforeAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == \"\\\"\" || char == \"\\'\" || char == \"<\") {\n\t    return attributeName\n\t  } else {\n\t    currentAttribute.name += char\n\t    return attributeName\n\t  }\n\t}\n\t\n\tfunction beforeAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/) || char == \"/\" || char == \">\" || char == EOF) { \n\t    return beforeAttributeValue\n\t  } else if (char == \"\\\"\") {\n\t    return doubleQuotedAttributeValue\n\t  } else if (char == \"\\'\") {\n\t    return singleQuotedAttributeValue\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    // return data\n\t  } else {\n\t    return UnquotedAttributeValue(char)\n\t  }\n\t}\n\t\n\tfunction doubleQuotedAttributeValue(char) {\n\t  if (char == \"\\\"\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    return afterQuotedAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return doubleQuotedAttributeValue\n\t  }\n\t}\n\t\n\tfunction singleQuotedAttributeValue(char) {\n\t  if (char == \"\\'\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    return afterQuotedAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return singleQuotedAttributeValue\n\t  }\n\t}\n\t\n\tfunction afterQuotedAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char ==\">\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\tfunction UnquotedAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    // emit(currentToken)\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    // emit(currentToken)\n\t    return selfClosingStartTag\n\t  } else if (char == \">\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == \"\\\"\" || char == \"\\'\" || char == \"<\" || char == \"=\" || char == \"`\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return UnquotedAttributeValue\n\t  }\n\t}\n\t\n\t\n\tfunction selfClosingStartTag(char) {\n\t  if (char == \">\" || char == \"/\") {\n\t    currentToken.isSelfClosing = true\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"EOF\") {\n\t    // return data\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  let state = data\n\t\n\t  for (let char of html) {\n\t    state = state(char)\n\t    // console.log(state)\n\t  }\n\t\n\t  state = state(EOF)\n\t  \n\t  console.log(stack)\n\t}\n\t```\n\t\n- è¿è¡Œç»“æœï¼šè¿™è¾¹æˆ‘åœ¨æ¯æ¬¡å¯¹æ ˆæ“ä½œæ—¶(push/pop)æ—¶ï¼Œæ·»åŠ äº† console\n\t- ![ç¬¬å…­æ­¥è¿è¡Œç»“æœ](http://p1.meituan.net/myvideodistribute/f83a95f5afec8c5ad34c8df0a34a6ff8116344.png)\n- è¿™è¾¹æ¨èä½¿ç”¨ [vs-code debugger ä½¿ç”¨æ–¹æ³•](https://code.visualstudio.com/docs/editor/debugging)\n\t- ![ç¬¬å…­æ­¥è¿è¡Œç»“æœ vscode debugger](http://p0.meituan.net/myvideodistribute/7a4cb0d87ac89cb3a5ae4252c3a5d6a7321211.png)\n\n\n### ç¬¬ä¸ƒæ­¥ï¼šæ–‡æœ¬èŠ‚ç‚¹\n- æ–‡æœ¬èŠ‚ç‚¹ä¸è‡ªå°é—­æ ‡ç­¾å¤„ç†ç±»ä¼¼\n- å¤šä¸ªæ–‡æœ¬èŠ‚ç‚¹éœ€è¦åˆå¹¶\n\n- parseHTML7.js\n\n\t```javascript\n\t// å¤„ç†æ–‡æœ¬èŠ‚ç‚¹ combineText\n\n\tlet currentToken = null\n\tlet currentAttribute = null\n\tlet currentTextNode = null\n\t\n\tlet stack = [{type: \"document\", children: []}]\n\t\n\tfunction emit(token) {\n\t\n\t  let top = stack[stack.length - 1]\n\t\n\t  if (token.type == \"startTag\") {\n\t    let element = {\n\t      type: \"element\",\n\t      children: [],\n\t      attributes: []\n\t    }\n\t\n\t    element.tagName = token.tagName\n\t\n\t    for (let p in token) {\n\t      if (p != \"type\" && p != \"tagName\") {\n\t        element.attributes.push({\n\t          name: p,\n\t          value: token[p]\n\t        })\n\t      }\n\t    }\n\t\n\t    top.children.push(element)\n\t    element.parent = top\n\t\n\t    if (!token.isSelfClosing)\n\t      stack.push(element)\n\t    \n\t    currentTextNode = null\n\t    // console.log('push', element)\n\t  } else if (token.type == \"endTag\") {\n\t    if (top.tagName != token.tagName) {\n\t      throw new Error(\"Tag start end doesn't match\")\n\t    } else {\n\t      // console.log('pop', stack.pop())\n\t      stack.pop()\n\t    }\n\t    currentTextNode = null\n\t  } else if (token.type == \"text\") {\n\t    if (currentTextNode == null) {\n\t      currentTextNode = {\n\t        type: \"text\",\n\t        content: \"\"\n\t      }\n\t      top.children.push(currentTextNode)\n\t    }\n\t    currentTextNode.content += token.content\n\t    // console.log(top.children)\n\t  }\n\t}\n\t\n\tconst EOF = Symbol(\"EOF\")\n\t\n\tfunction data(char) {\n\t  if (char == \"<\") {\n\t    return tagOpen\n\t  } else if (char == EOF) {\n\t    emit({\n\t      type: \"EOF\"\n\t    })\n\t    return \n\t  } else {\n\t    emit({\n\t      type: \"text\",\n\t      content: char\n\t    })\n\t    return data\n\t  }\n\t}\n\t\n\t\n\t// 1. å¼€å§‹æ ‡ç­¾\n\t// 2. ç»“æŸæ ‡ç­¾\n\t// 3. è‡ªå°é—­æ ‡ç­¾\n\tfunction tagOpen(char) {\n\t  if (char == \"/\") { // ç»“æŸæ ‡ç­¾\n\t    return endTagOpen\n\t  } else if (char.match(/^[a-zA-Z]$/)) { // å¼€å§‹æ ‡ç­¾\n\t    currentToken = {\n\t      type: \"startTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\t\n\tfunction endTagOpen(char) {\n\t  if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken = {\n\t      type: \"endTag\",\n\t      tagName: \"\"\n\t    }\n\t    return tagName(char)\n\t  } else if (char == \">\") {\n\t    // return data\n\t  } else if(char == EOF) {\n\t    // return data\n\t  }\n\t}\n\t\n\t\n\tfunction tagName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName(char)\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char.match(/^[a-zA-Z]$/)) {\n\t    currentToken.tagName += char.toLowerCase()\n\t    return tagName\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    return data\n\t  } else {\n\t    return tagName\n\t  }\n\t}\n\t\n\t\n\tfunction beforeAttributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \">\" || char == \"/\" || char == EOF) {\n\t    return afterAttributeName(char)\n\t  } else if (char == \"=\") {\n\t    return \n\t  } else {\n\t    currentAttribute = {\n\t      name: \"\",\n\t      value: \"\"\n\t    }\n\t    return attributeName(char)\n\t  }\n\t}\n\t\n\tfunction afterAttributeName(char) {\n\t  if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char == EOF) {\n\t    return \n\t  } else {\n\t    emit(currentToken)\n\t    return data\n\t  }\n\t}\n\t\n\tfunction attributeName(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/) || char == \"/\" || char == \">\" || char == EOF) { \n\t    return afterAttributeName(char)\n\t  } else if (char == \"=\") {\n\t    return beforeAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == \"\\\"\" || char == \"\\'\" || char == \"<\") {\n\t    return attributeName\n\t  } else {\n\t    currentAttribute.name += char\n\t    return attributeName\n\t  }\n\t}\n\t\n\tfunction beforeAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/) || char == \"/\" || char == \">\" || char == EOF) { \n\t    return beforeAttributeValue\n\t  } else if (char == \"\\\"\") {\n\t    return doubleQuotedAttributeValue\n\t  } else if (char == \"\\'\") {\n\t    return singleQuotedAttributeValue\n\t  } else if (char == \">\") {\n\t    emit(currentToken)\n\t    // return data\n\t  } else {\n\t    return UnquotedAttributeValue(char)\n\t  }\n\t}\n\t\n\tfunction doubleQuotedAttributeValue(char) {\n\t  if (char == \"\\\"\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    return afterQuotedAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return doubleQuotedAttributeValue\n\t  }\n\t}\n\t\n\tfunction singleQuotedAttributeValue(char) {\n\t  if (char == \"\\'\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    return afterQuotedAttributeValue\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return singleQuotedAttributeValue\n\t  }\n\t}\n\t\n\tfunction afterQuotedAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    return selfClosingStartTag\n\t  } else if (char ==\">\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\tfunction UnquotedAttributeValue(char) {\n\t  if (char.match(/^[\\t\\n\\f ]$/)) {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    // emit(currentToken)\n\t    return beforeAttributeName\n\t  } else if (char == \"/\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    // emit(currentToken)\n\t    return selfClosingStartTag\n\t  } else if (char == \">\") {\n\t    currentToken[currentAttribute.name] = currentAttribute.value\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"\\u0000\") {\n\t    // return data\n\t  } else if (char == \"\\\"\" || char == \"\\'\" || char == \"<\" || char == \"=\" || char == \"`\") {\n\t    // return data\n\t  } else if (char == EOF) {\n\t    // return data\n\t  } else {\n\t    currentAttribute.value += char\n\t    return UnquotedAttributeValue\n\t  }\n\t}\n\t\n\t\n\tfunction selfClosingStartTag(char) {\n\t  if (char == \">\" || char == \"/\") {\n\t    currentToken.isSelfClosing = true\n\t    emit(currentToken)\n\t    return data\n\t  } else if (char == \"EOF\") {\n\t    // return data\n\t  } else {\n\t    // return data\n\t  }\n\t}\n\t\n\tmodule.exports.parseHTML = function parseHTML(html){\n\t\n\t  let state = data\n\t\n\t  for (let char of html) {\n\t    state = state(char)\n\t  }\n\t\n\t  state = state(EOF)\n\t  \n\t}\n\t```\n\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬å…­æ­¥è¿è¡Œç»“æœ vscode debugger](http://p0.meituan.net/myvideodistribute/1d00a3a9aa02bd2ff5eb52805c38768b345257.png)\n\n\n\n## å‚è€ƒæ–‡çŒ®\n- [HTML standard docs](https://html.spec.whatwg.org/multipage/)\n- [VSCODE debugger](https://code.visualstudio.com/docs/editor/debugging)\n\n\n\n## å†™åœ¨åé¢\n- [å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser)\n- å­¦è€Œä¸æ€åˆ™ç½” äº’å‹‰\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","slug":"Toy-Browser-DAY2","published":1,"updated":"2020-10-27T15:21:11.263Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u80001xfw9k7m920c47","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>implementation of a toy-browser ğŸ™†</li>\n<li>DAY1ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆ HTTPç›¸å…³è§£æï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å†™ HTML çš„è§£æå•¦ï¼Œå¼€ä¸å¼€å¿ƒï¼ğŸ˜</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/6e1d35dcd8c01b557925f8d799583cb1130452.png\" alt=\"HTML çš„è§£æ\"></li>\n</ul>\n<a id=\"more\"></a>\n\n\n\n<h2 id=\"å®è·µè¿‡ç¨‹\"><a href=\"#å®è·µè¿‡ç¨‹\" class=\"headerlink\" title=\"å®è·µè¿‡ç¨‹\"></a>å®è·µè¿‡ç¨‹</h2><h3 id=\"ç¬¬ä¸€æ­¥ï¼šæ‹†åˆ†æ–‡ä»¶\"><a href=\"#ç¬¬ä¸€æ­¥ï¼šæ‹†åˆ†æ–‡ä»¶\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šæ‹†åˆ†æ–‡ä»¶\"></a>ç¬¬ä¸€æ­¥ï¼šæ‹†åˆ†æ–‡ä»¶</h3><ul>\n<li>ä¸ºäº†æ–¹ä¾¿æ–‡ä»¶ç®¡ç†ï¼Œæˆ‘ä»¬æŠŠparseå•ç‹¬æ‹†åˆ°æ–‡ä»¶ä¸­</li>\n<li>parser æ¥å— HTML æ–‡æœ¬ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€é¢— DOM æ ‘</li>\n</ul>\n<ul>\n<li><p>server.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  ... some code </span><br><span class=\"line\">  </span><br><span class=\"line\">  res.end(</span><br><span class=\"line\">    <span class=\"string\">`&lt;html maaa=a &gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;head&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;style&gt;</span></span><br><span class=\"line\"><span class=\"string\">    body div #myid&#123;</span></span><br><span class=\"line\"><span class=\"string\">        width:100px;</span></span><br><span class=\"line\"><span class=\"string\">        background-color: #ff5000;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">    body div img&#123;</span></span><br><span class=\"line\"><span class=\"string\">        width:30px;</span></span><br><span class=\"line\"><span class=\"string\">        background-color: #ff1111;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;/style&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;/head&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;body&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;div&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;img id=\"myid\"/&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;img /&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;/body&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;/html&gt;`</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">server.listen(<span class=\"number\">8088</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>client.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">... some code</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  ... some code</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">let</span> dom = parser.parseHTML(response.body)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;()</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>parseHTML1.js</p>\n</li>\n</ul>\n<pre><code><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ‹†åˆ†æ–‡ä»¶</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(html)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></code></pre><ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/98a64e9c9eb9f97c01b0bb4ccb0141f976175.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬äºŒæ­¥ï¼šåˆ›å»ºçŠ¶æ€æœº\"><a href=\"#ç¬¬äºŒæ­¥ï¼šåˆ›å»ºçŠ¶æ€æœº\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ï¼šåˆ›å»ºçŠ¶æ€æœº\"></a>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºçŠ¶æ€æœº</h3><ul>\n<li>æˆ‘ä»¬ç”¨ FSM æ¥å®ç° HTML çš„åˆ†æ</li>\n<li>åœ¨ HTML æ ‡å‡†ä¸­ï¼Œå·²ç»è§„å®šäº† HTML çš„çŠ¶æ€</li>\n<li>Toy-Browser åªæŒ‘é€‰å…¶ä¸­çš„ä¸€éƒ¨åˆ†çŠ¶æ€ï¼Œå®Œæˆä¸€ä¸ªæœ€ç®€ç‰ˆæœ¬</li>\n</ul>\n<ul>\n<li><p>parseHTML2.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åˆå§‹åŒ– FSM - Finite State Machine</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> EOF = <span class=\"built_in\">Symbol</span>(<span class=\"string\">\"EOF\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">data</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = data</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> html) &#123;</span><br><span class=\"line\">    state = state(c)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state = state(EOF)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"ç¬¬ä¸‰æ­¥ï¼šè§£ææ ‡ç­¾\"><a href=\"#ç¬¬ä¸‰æ­¥ï¼šè§£ææ ‡ç­¾\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ­¥ï¼šè§£ææ ‡ç­¾\"></a>ç¬¬ä¸‰æ­¥ï¼šè§£ææ ‡ç­¾</h3><ul>\n<li><p>ä¸»è¦çš„æ ‡ç­¾æœ‰ï¼šå¼€å§‹æ ‡ç­¾ï¼Œç»“æŸæ ‡ç­¾å’Œè‡ªå°é—­æ ‡ç­¾</p>\n</li>\n<li><p>åœ¨è¿™ä¸€æ­¥æˆ‘ä»¬æš‚æ—¶å¿½ç•¥å±æ€§</p>\n</li>\n<li><p>ã€æœªå®Œï¼šçŠ¶æ€å›¾åˆ†æã€‘</p>\n</li>\n<li><p>parseHTML3.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è§£ææ ‡ç­¾</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> EOF = <span class=\"built_in\">Symbol</span>(<span class=\"string\">\"EOF\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">data</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1. å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 2. ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 3. è‡ªå°é—­æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123; <span class=\"comment\">// ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> endTagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123; <span class=\"comment\">// å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">endTagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(char == EOF) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selfClosingStartTag</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"EOF\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = data</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> html) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state = state(EOF)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"ç¬¬å››æ­¥ï¼šåˆ›å»ºå…ƒç´ \"><a href=\"#ç¬¬å››æ­¥ï¼šåˆ›å»ºå…ƒç´ \" class=\"headerlink\" title=\"ç¬¬å››æ­¥ï¼šåˆ›å»ºå…ƒç´ \"></a>ç¬¬å››æ­¥ï¼šåˆ›å»ºå…ƒç´ </h3><ul>\n<li><p>åœ¨çŠ¶æ€ä¸­ï¼Œé™¤äº†çŠ¶æ€è¿ç§»ï¼Œæˆ‘ä»¬è¿˜ä¼šè¦åŠ å…¥ä¸šåŠ¡é€»è¾‘</p>\n</li>\n<li><p>æˆ‘ä»¬åœ¨æ ‡ç­¾ç»“æŸçŠ¶æ€æäº¤æ ‡ç­¾ token</p>\n</li>\n<li><p>parseHTML4.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// emitToken åˆ›å»ºå…ƒç´ </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentToken = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type != <span class=\"string\">\"text\"</span>) </span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(token)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> EOF = <span class=\"built_in\">Symbol</span>(<span class=\"string\">\"EOF\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">data</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"EOF\"</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1. å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 2. ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 3. è‡ªå°é—­æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123; <span class=\"comment\">// ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> endTagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123; <span class=\"comment\">// å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"startTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">endTagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"endTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(char == EOF) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken.tagName += char.toLowerCase()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selfClosingStartTag</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken.isSelfClosing = <span class=\"literal\">true</span></span><br><span class=\"line\">    currentToken.type = <span class=\"string\">\"selfClosingTag\"</span></span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"EOF\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = data</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> html) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state = state(EOF)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5c4078e02702211bbe87ca75d2044cdb106832.png\" alt=\"ç¬¬å››æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬äº”æ­¥ï¼šå¤„ç†å±æ€§\"><a href=\"#ç¬¬äº”æ­¥ï¼šå¤„ç†å±æ€§\" class=\"headerlink\" title=\"ç¬¬äº”æ­¥ï¼šå¤„ç†å±æ€§\"></a>ç¬¬äº”æ­¥ï¼šå¤„ç†å±æ€§</h3><ul>\n<li><p>å±æ€§åˆ†ä¸ºå•å¼•å·ã€åŒå¼•å·ã€æ— å¼•å·ä¸‰ç§å†™æ³•ï¼Œå› æ­¤éœ€è¦è¾ƒå¤šçŠ¶æ€å¤„ç†</p>\n</li>\n<li><p>å¤„ç†å±æ€§çš„æ–¹å¼è·Ÿæ ‡ç­¾ç±»ä¼¼</p>\n</li>\n<li><p>å±æ€§ç»“æŸæ—¶ï¼Œæˆ‘ä»¬æŠŠå±æ€§åŠ åˆ°æ ‡ç­¾ token ä¸Š</p>\n</li>\n<li><p>parseHTML5.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¤„ç†å±æ€§ attribute</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentToken = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentAttribute = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type != <span class=\"string\">\"text\"</span>) </span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(token)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> EOF = <span class=\"built_in\">Symbol</span>(<span class=\"string\">\"EOF\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">data</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"EOF\"</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"text\"</span>,</span><br><span class=\"line\">      content: char</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1. å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 2. ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 3. è‡ªå°é—­æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123; <span class=\"comment\">// ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> endTagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123; <span class=\"comment\">// å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"startTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">endTagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"endTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken.tagName += char.toLowerCase()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span> || char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute = &#123;</span><br><span class=\"line\">      name: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      value: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">attributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>) || char == <span class=\"string\">\"/\"</span> || char == <span class=\"string\">\"&gt;\"</span> || char == EOF) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span> || char == <span class=\"string\">\"\\'\"</span> || char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.name += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>) || char == <span class=\"string\">\"/\"</span> || char == <span class=\"string\">\"&gt;\"</span> || char == EOF) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doubleQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\'\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> singleQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UnquotedAttributeValue(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">doubleQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doubleQuotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">singleQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\'\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> singleQuotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char ==<span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UnquotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"comment\">// emit(currentToken)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"comment\">// emit(currentToken)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span> || char == <span class=\"string\">\"\\'\"</span> || char == <span class=\"string\">\"&lt;\"</span> || char == <span class=\"string\">\"=\"</span> || char == <span class=\"string\">\"`\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UnquotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selfClosingStartTag</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken.isSelfClosing = <span class=\"literal\">true</span></span><br><span class=\"line\">    currentToken.type = <span class=\"string\">\"selfClosingTag\"</span></span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"EOF\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = data</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> html) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">    <span class=\"comment\">// console.log(state)</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state = state(EOF)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/3b45aac402868fe1c62c7d7debbcfd24114412.png\" alt=\"ç¬¬äº”æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬å…­æ­¥ï¼šæ„å»º-DOM-æ ‘\"><a href=\"#ç¬¬å…­æ­¥ï¼šæ„å»º-DOM-æ ‘\" class=\"headerlink\" title=\"ç¬¬å…­æ­¥ï¼šæ„å»º DOM æ ‘\"></a>ç¬¬å…­æ­¥ï¼šæ„å»º DOM æ ‘</h3><ul>\n<li><p>ä»æ ‡ç­¾åˆ›å»º DOM æ ‘çš„åŸºæœ¬æŠ€å·§æ˜¯ä½¿ç”¨æ ˆ</p>\n</li>\n<li><p>é‡åˆ°å¼€å§‹æ ‡ç­¾æ—¶åˆ›å»ºå…ƒç´ å¹¶å…¥æ ˆï¼Œé‡åˆ°ç»“æŸæ ‡ç­¾æ—¶å‡ºæ ˆ</p>\n</li>\n<li><p>è‡ªå°é—­èŠ‚ç‚¹å¯è§†ä¸ºå…¥æ ˆåç«‹åˆ»å‡ºæ ˆ</p>\n</li>\n<li><p>ä»»ä½•å…ƒç´ çš„çˆ¶å…ƒç´ æ˜¯å®ƒå…¥æ ˆå‰çš„æ ˆé¡¶</p>\n</li>\n<li><p>parseHTML6.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¤„ç†å±æ€§ constructTree</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentToken = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentAttribute = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> stack = [&#123;<span class=\"attr\">type</span>: <span class=\"string\">\"document\"</span>, <span class=\"attr\">children</span>: []&#125;]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"text\"</span>) </span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> top = stack[stack.length - <span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"startTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> element = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"element\"</span>,</span><br><span class=\"line\">      children: [],</span><br><span class=\"line\">      attributes: []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    element.tagName = token.tagName</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> p <span class=\"keyword\">in</span> token) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (p != <span class=\"string\">\"type\"</span> &amp;&amp; p != <span class=\"string\">\"tagName\"</span>) &#123;</span><br><span class=\"line\">        element.attributes.push(&#123;</span><br><span class=\"line\">          name: p,</span><br><span class=\"line\">          value: token[p]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    top.children.push(element)</span><br><span class=\"line\">    element.parent = top</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!token.isSelfClosing)</span><br><span class=\"line\">      stack.push(element)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'push'</span>, element)</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"endTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (top.tagName != token.tagName) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">\"Tag start end doesn't match\"</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'pop'</span>, stack.pop())</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> EOF = <span class=\"built_in\">Symbol</span>(<span class=\"string\">\"EOF\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">data</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"EOF\"</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"text\"</span>,</span><br><span class=\"line\">      content: char</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1. å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 2. ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 3. è‡ªå°é—­æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123; <span class=\"comment\">// ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> endTagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123; <span class=\"comment\">// å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"startTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">endTagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"endTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken.tagName += char.toLowerCase()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span> || char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute = &#123;</span><br><span class=\"line\">      name: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      value: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">attributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>) || char == <span class=\"string\">\"/\"</span> || char == <span class=\"string\">\"&gt;\"</span> || char == EOF) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span> || char == <span class=\"string\">\"\\'\"</span> || char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.name += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>) || char == <span class=\"string\">\"/\"</span> || char == <span class=\"string\">\"&gt;\"</span> || char == EOF) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doubleQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\'\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> singleQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UnquotedAttributeValue(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">doubleQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doubleQuotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">singleQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\'\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> singleQuotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char ==<span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UnquotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"comment\">// emit(currentToken)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"comment\">// emit(currentToken)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span> || char == <span class=\"string\">\"\\'\"</span> || char == <span class=\"string\">\"&lt;\"</span> || char == <span class=\"string\">\"=\"</span> || char == <span class=\"string\">\"`\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UnquotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selfClosingStartTag</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken.isSelfClosing = <span class=\"literal\">true</span></span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"EOF\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = data</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> html) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">    <span class=\"comment\">// console.log(state)</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state = state(EOF)</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(stack)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœï¼šè¿™è¾¹æˆ‘åœ¨æ¯æ¬¡å¯¹æ ˆæ“ä½œæ—¶(push/pop)æ—¶ï¼Œæ·»åŠ äº† console</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/f83a95f5afec8c5ad34c8df0a34a6ff8116344.png\" alt=\"ç¬¬å…­æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p>è¿™è¾¹æ¨èä½¿ç”¨ <a href=\"https://code.visualstudio.com/docs/editor/debugging\" target=\"_blank\" rel=\"noopener\">vs-code debugger ä½¿ç”¨æ–¹æ³•</a></p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/7a4cb0d87ac89cb3a5ae4252c3a5d6a7321211.png\" alt=\"ç¬¬å…­æ­¥è¿è¡Œç»“æœ vscode debugger\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬ä¸ƒæ­¥ï¼šæ–‡æœ¬èŠ‚ç‚¹\"><a href=\"#ç¬¬ä¸ƒæ­¥ï¼šæ–‡æœ¬èŠ‚ç‚¹\" class=\"headerlink\" title=\"ç¬¬ä¸ƒæ­¥ï¼šæ–‡æœ¬èŠ‚ç‚¹\"></a>ç¬¬ä¸ƒæ­¥ï¼šæ–‡æœ¬èŠ‚ç‚¹</h3><ul>\n<li><p>æ–‡æœ¬èŠ‚ç‚¹ä¸è‡ªå°é—­æ ‡ç­¾å¤„ç†ç±»ä¼¼</p>\n</li>\n<li><p>å¤šä¸ªæ–‡æœ¬èŠ‚ç‚¹éœ€è¦åˆå¹¶</p>\n</li>\n<li><p>parseHTML7.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¤„ç†æ–‡æœ¬èŠ‚ç‚¹ combineText</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentToken = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentAttribute = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentTextNode = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> stack = [&#123;<span class=\"attr\">type</span>: <span class=\"string\">\"document\"</span>, <span class=\"attr\">children</span>: []&#125;]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> top = stack[stack.length - <span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"startTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> element = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"element\"</span>,</span><br><span class=\"line\">      children: [],</span><br><span class=\"line\">      attributes: []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    element.tagName = token.tagName</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> p <span class=\"keyword\">in</span> token) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (p != <span class=\"string\">\"type\"</span> &amp;&amp; p != <span class=\"string\">\"tagName\"</span>) &#123;</span><br><span class=\"line\">        element.attributes.push(&#123;</span><br><span class=\"line\">          name: p,</span><br><span class=\"line\">          value: token[p]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    top.children.push(element)</span><br><span class=\"line\">    element.parent = top</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!token.isSelfClosing)</span><br><span class=\"line\">      stack.push(element)</span><br><span class=\"line\">    </span><br><span class=\"line\">    currentTextNode = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log('push', element)</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"endTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (top.tagName != token.tagName) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">\"Tag start end doesn't match\"</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log('pop', stack.pop())</span></span><br><span class=\"line\">      stack.pop()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    currentTextNode = <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"text\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (currentTextNode == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      currentTextNode = &#123;</span><br><span class=\"line\">        type: <span class=\"string\">\"text\"</span>,</span><br><span class=\"line\">        content: <span class=\"string\">\"\"</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      top.children.push(currentTextNode)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    currentTextNode.content += token.content</span><br><span class=\"line\">    <span class=\"comment\">// console.log(top.children)</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> EOF = <span class=\"built_in\">Symbol</span>(<span class=\"string\">\"EOF\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">data</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"EOF\"</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"text\"</span>,</span><br><span class=\"line\">      content: char</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1. å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 2. ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 3. è‡ªå°é—­æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123; <span class=\"comment\">// ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> endTagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123; <span class=\"comment\">// å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"startTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">endTagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"endTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken.tagName += char.toLowerCase()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span> || char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute = &#123;</span><br><span class=\"line\">      name: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      value: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">attributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>) || char == <span class=\"string\">\"/\"</span> || char == <span class=\"string\">\"&gt;\"</span> || char == EOF) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span> || char == <span class=\"string\">\"\\'\"</span> || char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.name += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>) || char == <span class=\"string\">\"/\"</span> || char == <span class=\"string\">\"&gt;\"</span> || char == EOF) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doubleQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\'\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> singleQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UnquotedAttributeValue(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">doubleQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doubleQuotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">singleQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\'\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> singleQuotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char ==<span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UnquotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"comment\">// emit(currentToken)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"comment\">// emit(currentToken)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span> || char == <span class=\"string\">\"\\'\"</span> || char == <span class=\"string\">\"&lt;\"</span> || char == <span class=\"string\">\"=\"</span> || char == <span class=\"string\">\"`\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UnquotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selfClosingStartTag</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken.isSelfClosing = <span class=\"literal\">true</span></span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"EOF\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = data</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> html) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state = state(EOF)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/1d00a3a9aa02bd2ff5eb52805c38768b345257.png\" alt=\"ç¬¬å…­æ­¥è¿è¡Œç»“æœ vscode debugger\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"https://html.spec.whatwg.org/multipage/\" target=\"_blank\" rel=\"noopener\">HTML standard docs</a></li>\n<li><a href=\"https://code.visualstudio.com/docs/editor/debugging\" target=\"_blank\" rel=\"noopener\">VSCODE debugger</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li>å­¦è€Œä¸æ€åˆ™ç½” äº’å‹‰</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>implementation of a toy-browser ğŸ™†</li>\n<li>DAY1ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆ HTTPç›¸å…³è§£æï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å†™ HTML çš„è§£æå•¦ï¼Œå¼€ä¸å¼€å¿ƒï¼ğŸ˜</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/6e1d35dcd8c01b557925f8d799583cb1130452.png\" alt=\"HTML çš„è§£æ\"></li>\n</ul>","more":"<h2 id=\"å®è·µè¿‡ç¨‹\"><a href=\"#å®è·µè¿‡ç¨‹\" class=\"headerlink\" title=\"å®è·µè¿‡ç¨‹\"></a>å®è·µè¿‡ç¨‹</h2><h3 id=\"ç¬¬ä¸€æ­¥ï¼šæ‹†åˆ†æ–‡ä»¶\"><a href=\"#ç¬¬ä¸€æ­¥ï¼šæ‹†åˆ†æ–‡ä»¶\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šæ‹†åˆ†æ–‡ä»¶\"></a>ç¬¬ä¸€æ­¥ï¼šæ‹†åˆ†æ–‡ä»¶</h3><ul>\n<li>ä¸ºäº†æ–¹ä¾¿æ–‡ä»¶ç®¡ç†ï¼Œæˆ‘ä»¬æŠŠparseå•ç‹¬æ‹†åˆ°æ–‡ä»¶ä¸­</li>\n<li>parser æ¥å— HTML æ–‡æœ¬ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€é¢— DOM æ ‘</li>\n</ul>\n<ul>\n<li><p>server.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  ... some code </span><br><span class=\"line\">  </span><br><span class=\"line\">  res.end(</span><br><span class=\"line\">    <span class=\"string\">`&lt;html maaa=a &gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;head&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;style&gt;</span></span><br><span class=\"line\"><span class=\"string\">    body div #myid&#123;</span></span><br><span class=\"line\"><span class=\"string\">        width:100px;</span></span><br><span class=\"line\"><span class=\"string\">        background-color: #ff5000;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">    body div img&#123;</span></span><br><span class=\"line\"><span class=\"string\">        width:30px;</span></span><br><span class=\"line\"><span class=\"string\">        background-color: #ff1111;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;/style&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;/head&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;body&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;div&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;img id=\"myid\"/&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;img /&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;/body&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;/html&gt;`</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">server.listen(<span class=\"number\">8088</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>client.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">... some code</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  ... some code</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">let</span> dom = parser.parseHTML(response.body)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;()</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>parseHTML1.js</p>\n</li>\n</ul>\n<pre><code><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ‹†åˆ†æ–‡ä»¶</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(html)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></code></pre><ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/98a64e9c9eb9f97c01b0bb4ccb0141f976175.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬äºŒæ­¥ï¼šåˆ›å»ºçŠ¶æ€æœº\"><a href=\"#ç¬¬äºŒæ­¥ï¼šåˆ›å»ºçŠ¶æ€æœº\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ï¼šåˆ›å»ºçŠ¶æ€æœº\"></a>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºçŠ¶æ€æœº</h3><ul>\n<li>æˆ‘ä»¬ç”¨ FSM æ¥å®ç° HTML çš„åˆ†æ</li>\n<li>åœ¨ HTML æ ‡å‡†ä¸­ï¼Œå·²ç»è§„å®šäº† HTML çš„çŠ¶æ€</li>\n<li>Toy-Browser åªæŒ‘é€‰å…¶ä¸­çš„ä¸€éƒ¨åˆ†çŠ¶æ€ï¼Œå®Œæˆä¸€ä¸ªæœ€ç®€ç‰ˆæœ¬</li>\n</ul>\n<ul>\n<li><p>parseHTML2.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åˆå§‹åŒ– FSM - Finite State Machine</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> EOF = <span class=\"built_in\">Symbol</span>(<span class=\"string\">\"EOF\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">data</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = data</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> html) &#123;</span><br><span class=\"line\">    state = state(c)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state = state(EOF)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"ç¬¬ä¸‰æ­¥ï¼šè§£ææ ‡ç­¾\"><a href=\"#ç¬¬ä¸‰æ­¥ï¼šè§£ææ ‡ç­¾\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ­¥ï¼šè§£ææ ‡ç­¾\"></a>ç¬¬ä¸‰æ­¥ï¼šè§£ææ ‡ç­¾</h3><ul>\n<li><p>ä¸»è¦çš„æ ‡ç­¾æœ‰ï¼šå¼€å§‹æ ‡ç­¾ï¼Œç»“æŸæ ‡ç­¾å’Œè‡ªå°é—­æ ‡ç­¾</p>\n</li>\n<li><p>åœ¨è¿™ä¸€æ­¥æˆ‘ä»¬æš‚æ—¶å¿½ç•¥å±æ€§</p>\n</li>\n<li><p>ã€æœªå®Œï¼šçŠ¶æ€å›¾åˆ†æã€‘</p>\n</li>\n<li><p>parseHTML3.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è§£ææ ‡ç­¾</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> EOF = <span class=\"built_in\">Symbol</span>(<span class=\"string\">\"EOF\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">data</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1. å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 2. ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 3. è‡ªå°é—­æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123; <span class=\"comment\">// ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> endTagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123; <span class=\"comment\">// å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">endTagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(char == EOF) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selfClosingStartTag</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"EOF\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = data</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> html) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state = state(EOF)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"ç¬¬å››æ­¥ï¼šåˆ›å»ºå…ƒç´ \"><a href=\"#ç¬¬å››æ­¥ï¼šåˆ›å»ºå…ƒç´ \" class=\"headerlink\" title=\"ç¬¬å››æ­¥ï¼šåˆ›å»ºå…ƒç´ \"></a>ç¬¬å››æ­¥ï¼šåˆ›å»ºå…ƒç´ </h3><ul>\n<li><p>åœ¨çŠ¶æ€ä¸­ï¼Œé™¤äº†çŠ¶æ€è¿ç§»ï¼Œæˆ‘ä»¬è¿˜ä¼šè¦åŠ å…¥ä¸šåŠ¡é€»è¾‘</p>\n</li>\n<li><p>æˆ‘ä»¬åœ¨æ ‡ç­¾ç»“æŸçŠ¶æ€æäº¤æ ‡ç­¾ token</p>\n</li>\n<li><p>parseHTML4.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// emitToken åˆ›å»ºå…ƒç´ </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentToken = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type != <span class=\"string\">\"text\"</span>) </span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(token)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> EOF = <span class=\"built_in\">Symbol</span>(<span class=\"string\">\"EOF\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">data</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"EOF\"</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1. å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 2. ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 3. è‡ªå°é—­æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123; <span class=\"comment\">// ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> endTagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123; <span class=\"comment\">// å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"startTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">endTagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"endTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(char == EOF) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken.tagName += char.toLowerCase()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selfClosingStartTag</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken.isSelfClosing = <span class=\"literal\">true</span></span><br><span class=\"line\">    currentToken.type = <span class=\"string\">\"selfClosingTag\"</span></span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"EOF\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = data</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> html) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state = state(EOF)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5c4078e02702211bbe87ca75d2044cdb106832.png\" alt=\"ç¬¬å››æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬äº”æ­¥ï¼šå¤„ç†å±æ€§\"><a href=\"#ç¬¬äº”æ­¥ï¼šå¤„ç†å±æ€§\" class=\"headerlink\" title=\"ç¬¬äº”æ­¥ï¼šå¤„ç†å±æ€§\"></a>ç¬¬äº”æ­¥ï¼šå¤„ç†å±æ€§</h3><ul>\n<li><p>å±æ€§åˆ†ä¸ºå•å¼•å·ã€åŒå¼•å·ã€æ— å¼•å·ä¸‰ç§å†™æ³•ï¼Œå› æ­¤éœ€è¦è¾ƒå¤šçŠ¶æ€å¤„ç†</p>\n</li>\n<li><p>å¤„ç†å±æ€§çš„æ–¹å¼è·Ÿæ ‡ç­¾ç±»ä¼¼</p>\n</li>\n<li><p>å±æ€§ç»“æŸæ—¶ï¼Œæˆ‘ä»¬æŠŠå±æ€§åŠ åˆ°æ ‡ç­¾ token ä¸Š</p>\n</li>\n<li><p>parseHTML5.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¤„ç†å±æ€§ attribute</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentToken = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentAttribute = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type != <span class=\"string\">\"text\"</span>) </span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(token)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> EOF = <span class=\"built_in\">Symbol</span>(<span class=\"string\">\"EOF\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">data</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"EOF\"</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"text\"</span>,</span><br><span class=\"line\">      content: char</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1. å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 2. ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 3. è‡ªå°é—­æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123; <span class=\"comment\">// ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> endTagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123; <span class=\"comment\">// å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"startTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">endTagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"endTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken.tagName += char.toLowerCase()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span> || char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute = &#123;</span><br><span class=\"line\">      name: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      value: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">attributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>) || char == <span class=\"string\">\"/\"</span> || char == <span class=\"string\">\"&gt;\"</span> || char == EOF) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span> || char == <span class=\"string\">\"\\'\"</span> || char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.name += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>) || char == <span class=\"string\">\"/\"</span> || char == <span class=\"string\">\"&gt;\"</span> || char == EOF) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doubleQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\'\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> singleQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UnquotedAttributeValue(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">doubleQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doubleQuotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">singleQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\'\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> singleQuotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char ==<span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UnquotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"comment\">// emit(currentToken)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"comment\">// emit(currentToken)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span> || char == <span class=\"string\">\"\\'\"</span> || char == <span class=\"string\">\"&lt;\"</span> || char == <span class=\"string\">\"=\"</span> || char == <span class=\"string\">\"`\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UnquotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selfClosingStartTag</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken.isSelfClosing = <span class=\"literal\">true</span></span><br><span class=\"line\">    currentToken.type = <span class=\"string\">\"selfClosingTag\"</span></span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"EOF\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = data</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> html) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">    <span class=\"comment\">// console.log(state)</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state = state(EOF)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/3b45aac402868fe1c62c7d7debbcfd24114412.png\" alt=\"ç¬¬äº”æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬å…­æ­¥ï¼šæ„å»º-DOM-æ ‘\"><a href=\"#ç¬¬å…­æ­¥ï¼šæ„å»º-DOM-æ ‘\" class=\"headerlink\" title=\"ç¬¬å…­æ­¥ï¼šæ„å»º DOM æ ‘\"></a>ç¬¬å…­æ­¥ï¼šæ„å»º DOM æ ‘</h3><ul>\n<li><p>ä»æ ‡ç­¾åˆ›å»º DOM æ ‘çš„åŸºæœ¬æŠ€å·§æ˜¯ä½¿ç”¨æ ˆ</p>\n</li>\n<li><p>é‡åˆ°å¼€å§‹æ ‡ç­¾æ—¶åˆ›å»ºå…ƒç´ å¹¶å…¥æ ˆï¼Œé‡åˆ°ç»“æŸæ ‡ç­¾æ—¶å‡ºæ ˆ</p>\n</li>\n<li><p>è‡ªå°é—­èŠ‚ç‚¹å¯è§†ä¸ºå…¥æ ˆåç«‹åˆ»å‡ºæ ˆ</p>\n</li>\n<li><p>ä»»ä½•å…ƒç´ çš„çˆ¶å…ƒç´ æ˜¯å®ƒå…¥æ ˆå‰çš„æ ˆé¡¶</p>\n</li>\n<li><p>parseHTML6.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¤„ç†å±æ€§ constructTree</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentToken = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentAttribute = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> stack = [&#123;<span class=\"attr\">type</span>: <span class=\"string\">\"document\"</span>, <span class=\"attr\">children</span>: []&#125;]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"text\"</span>) </span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> top = stack[stack.length - <span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"startTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> element = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"element\"</span>,</span><br><span class=\"line\">      children: [],</span><br><span class=\"line\">      attributes: []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    element.tagName = token.tagName</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> p <span class=\"keyword\">in</span> token) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (p != <span class=\"string\">\"type\"</span> &amp;&amp; p != <span class=\"string\">\"tagName\"</span>) &#123;</span><br><span class=\"line\">        element.attributes.push(&#123;</span><br><span class=\"line\">          name: p,</span><br><span class=\"line\">          value: token[p]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    top.children.push(element)</span><br><span class=\"line\">    element.parent = top</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!token.isSelfClosing)</span><br><span class=\"line\">      stack.push(element)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'push'</span>, element)</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"endTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (top.tagName != token.tagName) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">\"Tag start end doesn't match\"</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'pop'</span>, stack.pop())</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> EOF = <span class=\"built_in\">Symbol</span>(<span class=\"string\">\"EOF\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">data</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"EOF\"</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"text\"</span>,</span><br><span class=\"line\">      content: char</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1. å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 2. ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 3. è‡ªå°é—­æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123; <span class=\"comment\">// ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> endTagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123; <span class=\"comment\">// å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"startTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">endTagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"endTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken.tagName += char.toLowerCase()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span> || char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute = &#123;</span><br><span class=\"line\">      name: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      value: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">attributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>) || char == <span class=\"string\">\"/\"</span> || char == <span class=\"string\">\"&gt;\"</span> || char == EOF) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span> || char == <span class=\"string\">\"\\'\"</span> || char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.name += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>) || char == <span class=\"string\">\"/\"</span> || char == <span class=\"string\">\"&gt;\"</span> || char == EOF) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doubleQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\'\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> singleQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UnquotedAttributeValue(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">doubleQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doubleQuotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">singleQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\'\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> singleQuotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char ==<span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UnquotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"comment\">// emit(currentToken)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"comment\">// emit(currentToken)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span> || char == <span class=\"string\">\"\\'\"</span> || char == <span class=\"string\">\"&lt;\"</span> || char == <span class=\"string\">\"=\"</span> || char == <span class=\"string\">\"`\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UnquotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selfClosingStartTag</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken.isSelfClosing = <span class=\"literal\">true</span></span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"EOF\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = data</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> html) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">    <span class=\"comment\">// console.log(state)</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state = state(EOF)</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(stack)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœï¼šè¿™è¾¹æˆ‘åœ¨æ¯æ¬¡å¯¹æ ˆæ“ä½œæ—¶(push/pop)æ—¶ï¼Œæ·»åŠ äº† console</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/f83a95f5afec8c5ad34c8df0a34a6ff8116344.png\" alt=\"ç¬¬å…­æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p>è¿™è¾¹æ¨èä½¿ç”¨ <a href=\"https://code.visualstudio.com/docs/editor/debugging\" target=\"_blank\" rel=\"noopener\">vs-code debugger ä½¿ç”¨æ–¹æ³•</a></p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/7a4cb0d87ac89cb3a5ae4252c3a5d6a7321211.png\" alt=\"ç¬¬å…­æ­¥è¿è¡Œç»“æœ vscode debugger\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¬¬ä¸ƒæ­¥ï¼šæ–‡æœ¬èŠ‚ç‚¹\"><a href=\"#ç¬¬ä¸ƒæ­¥ï¼šæ–‡æœ¬èŠ‚ç‚¹\" class=\"headerlink\" title=\"ç¬¬ä¸ƒæ­¥ï¼šæ–‡æœ¬èŠ‚ç‚¹\"></a>ç¬¬ä¸ƒæ­¥ï¼šæ–‡æœ¬èŠ‚ç‚¹</h3><ul>\n<li><p>æ–‡æœ¬èŠ‚ç‚¹ä¸è‡ªå°é—­æ ‡ç­¾å¤„ç†ç±»ä¼¼</p>\n</li>\n<li><p>å¤šä¸ªæ–‡æœ¬èŠ‚ç‚¹éœ€è¦åˆå¹¶</p>\n</li>\n<li><p>parseHTML7.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¤„ç†æ–‡æœ¬èŠ‚ç‚¹ combineText</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentToken = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentAttribute = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentTextNode = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> stack = [&#123;<span class=\"attr\">type</span>: <span class=\"string\">\"document\"</span>, <span class=\"attr\">children</span>: []&#125;]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> top = stack[stack.length - <span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"startTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> element = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"element\"</span>,</span><br><span class=\"line\">      children: [],</span><br><span class=\"line\">      attributes: []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    element.tagName = token.tagName</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> p <span class=\"keyword\">in</span> token) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (p != <span class=\"string\">\"type\"</span> &amp;&amp; p != <span class=\"string\">\"tagName\"</span>) &#123;</span><br><span class=\"line\">        element.attributes.push(&#123;</span><br><span class=\"line\">          name: p,</span><br><span class=\"line\">          value: token[p]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    top.children.push(element)</span><br><span class=\"line\">    element.parent = top</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!token.isSelfClosing)</span><br><span class=\"line\">      stack.push(element)</span><br><span class=\"line\">    </span><br><span class=\"line\">    currentTextNode = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log('push', element)</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"endTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (top.tagName != token.tagName) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">\"Tag start end doesn't match\"</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log('pop', stack.pop())</span></span><br><span class=\"line\">      stack.pop()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    currentTextNode = <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"text\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (currentTextNode == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      currentTextNode = &#123;</span><br><span class=\"line\">        type: <span class=\"string\">\"text\"</span>,</span><br><span class=\"line\">        content: <span class=\"string\">\"\"</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      top.children.push(currentTextNode)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    currentTextNode.content += token.content</span><br><span class=\"line\">    <span class=\"comment\">// console.log(top.children)</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> EOF = <span class=\"built_in\">Symbol</span>(<span class=\"string\">\"EOF\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">data</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"EOF\"</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    emit(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"text\"</span>,</span><br><span class=\"line\">      content: char</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1. å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 2. ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"comment\">// 3. è‡ªå°é—­æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123; <span class=\"comment\">// ç»“æŸæ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> endTagOpen</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123; <span class=\"comment\">// å¼€å§‹æ ‡ç­¾</span></span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"startTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">endTagOpen</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"endTag\"</span>,</span><br><span class=\"line\">      tagName: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tagName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[a-zA-Z]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken.tagName += char.toLowerCase()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tagName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span> || char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute = &#123;</span><br><span class=\"line\">      name: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      value: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterAttributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> </span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">attributeName</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>) || char == <span class=\"string\">\"/\"</span> || char == <span class=\"string\">\"&gt;\"</span> || char == EOF) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterAttributeName(char)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"=\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span> || char == <span class=\"string\">\"\\'\"</span> || char == <span class=\"string\">\"&lt;\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.name += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> attributeName</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">beforeAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>) || char == <span class=\"string\">\"/\"</span> || char == <span class=\"string\">\"&gt;\"</span> || char == EOF) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doubleQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\'\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> singleQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UnquotedAttributeValue(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">doubleQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doubleQuotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">singleQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\'\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> afterQuotedAttributeValue</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> singleQuotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterQuotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char ==<span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UnquotedAttributeValue</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char.match(<span class=\"regexp\">/^[\\t\\n\\f ]$/</span>)) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"comment\">// emit(currentToken)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> beforeAttributeName</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    <span class=\"comment\">// emit(currentToken)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfClosingStartTag</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span>) &#123;</span><br><span class=\"line\">    currentToken[currentAttribute.name] = currentAttribute.value</span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\u0000\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"\\\"\"</span> || char == <span class=\"string\">\"\\'\"</span> || char == <span class=\"string\">\"&lt;\"</span> || char == <span class=\"string\">\"=\"</span> || char == <span class=\"string\">\"`\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == EOF) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    currentAttribute.value += char</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UnquotedAttributeValue</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selfClosingStartTag</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char == <span class=\"string\">\"&gt;\"</span> || char == <span class=\"string\">\"/\"</span>) &#123;</span><br><span class=\"line\">    currentToken.isSelfClosing = <span class=\"literal\">true</span></span><br><span class=\"line\">    emit(currentToken)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (char == <span class=\"string\">\"EOF\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.parseHTML = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseHTML</span>(<span class=\"params\">html</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = data</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> html) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state = state(EOF)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/1d00a3a9aa02bd2ff5eb52805c38768b345257.png\" alt=\"ç¬¬å…­æ­¥è¿è¡Œç»“æœ vscode debugger\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"https://html.spec.whatwg.org/multipage/\" target=\"_blank\" rel=\"noopener\">HTML standard docs</a></li>\n<li><a href=\"https://code.visualstudio.com/docs/editor/debugging\" target=\"_blank\" rel=\"noopener\">VSCODE debugger</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ä»£ç åœ°å€-ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li>å­¦è€Œä¸æ€åˆ™ç½” äº’å‹‰</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Toy-Browser-DAY4","date":"2020-05-22T13:16:54.000Z","description":["æµè§ˆå™¨ -- toy-browser"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- implementation of a toy-browser ğŸ™†\n- å˜»å˜»å˜»ï¼Œæˆ‘ä»¬å°†è¦åœ¨åš toy-browser æµè§ˆå™¨ç›¸å…³æ’ç‰ˆé—®é¢˜å•¦\n- ![DOM with CSS](http://p0.meituan.net/myvideodistribute/6d5c67d3d5d0633bf667bd680f6dfb9489753.png)\n\n<!-- more -->\n\n### ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–\n- æˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹ html ä»£ç æ®µ\n\n\t```html\n\t<html maaa=a >\n\t    <head>\n\t        <style>\n\t    #container{\n\t        width:500px;\n\t        height:300px;\n\t        display:flex;\n\t        background-color:rgb(255,255,255);\n\t    }\n\t    #container #myid{\n\t      width:200px;\n\t      height:100px;\n\t      background-color:rgb(255,0,0)\n\t    }\n\t    #container .c1{\n\t      flex:1;\n\t      background-color:rgb(0,255,0)\n\t    }\n\t        </style>\n\t    </head>\n\t    <body>\n\t        <div id=\"container\">\n\t          <div id=\"myid\"></div>\n\t          <div class=\"c1\"></div>\n\t        </div>\n\t    </body>\n    </html>\n\t```\n- ä»£ç é€»è¾‘è‡ªé¡¶å‘ä¸‹\n- é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ endTag çš„æ—¶å€™è¿›è¡Œ layout\n\t- æˆ‘ä»¬åªå¤„ç† flexï¼Œå¯ä»¥ç®€åŒ–æˆåœ¨ endTag æ—¶ï¼Œè¿›è¡Œ layout å³å¯\n- computeCSS7.js\n\n\t```javascript\n\tconst layout = require(\"./layout.js\")\n\t\n\t// ... some code\n\t\n\tfunction emit(token) {\n\t\t\n\t  // ... some code\n\t\t\n\t  if (token.type == \"startTag\") {\n\t\t    \n\t\t // ... some code\n\t\t\n\t  } else if (token.type == \"endTag\") {\n\t    if (top.tagName != token.tagName) {\n\t      throw new Error(\"Tag start end doesn't match\")\n\t    } else {\n\t      // console.log('pop', stack.pop())\n\t      /** é‡åˆ° style æ ‡ç­¾æ—¶ï¼Œæ‰§è¡Œæ·»åŠ  CCS è§„åˆ™çš„æ“ä½œ */\n\t      if (top.tagName === \"style\") {\n\t        addCSSRules(top.children[0].content)\n\t      }\n\t      layout(top)\n\t      stack.pop()\n\t    }\n\t    currentTextNode = null\n\t  } else if (token.type == \"text\") {\n\t\t    \n\t\t // ... some code\n\t\t\n\t  }\n\t}\n\t```\n#### flex å¸ƒå±€åŸºç¡€æ¦‚å¿µ\n\t\n- ![flex æ’ç‰ˆè§£é‡Šå›¾](http://p0.meituan.net/myvideodistribute/1e160d5f7cbdc299f68d432dcb19cca1137896.png)\n\n\t> ç»™ div è¿™ç±»å—çŠ¶å…ƒç´ å…ƒç´ è®¾ç½® display: flex æˆ–è€…ç»™ span è¿™ç±»å†…è”å…ƒç´ è®¾ç½® display: inline-flex ï¼Œflex å¸ƒå±€å³åˆ›å»ºï¼å…¶ä¸­ï¼Œç›´æ¥è®¾ç½® display: flex æˆ–è€… display: inline-flex çš„å…ƒç´ ç§°ä¸º flex å®¹å™¨ï¼Œé‡Œé¢çš„å­å…ƒç´ ç§°ä¸º flex å­é¡¹ã€‚\n\n\t- ![flex ç›¸å…³æ–¹æ³•æ¦‚è§ˆ](http://p1.meituan.net/myvideodistribute/0f5622ba2bab24f882be6007f6761a4422506.png)\n\n- ç”±ä¸Š felx å¸ƒå±€ä¸­çš„ ä¸»è½´ï¼Œäº¤å‰è½´å›¾ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰å˜é‡\n\t\n\t```javascript\n\tmainSize, // ä¸»è½´size width / height\n\tmainStart, // ä¸»è½´èµ·ç‚¹ left / right / top / bottom\n\tmainEnd, // ä¸»è½´ç»ˆç‚¹ left / right / top / bottom\n\tmainSign, // ä¸»è½´ç¬¦å·ä½ï¼Œç”¨äº æ˜¯å¦ reverse +1 / -1\n\tmainBase, // ä¸»è½´å¼€å§‹çš„ä½ç½® 0 / style.width\n\tcrossSize, // äº¤å‰è½´size width / height\n\tcrossStart, // äº¤å‰è½´åæ ‡èµ·ç‚¹ left / right / top / bottom\n\tcrossEnd, // äº¤å‰è½´åæ ‡ç»ˆç‚¹ left / right / top / bottom\n\tcrossSign, // äº¤å‰è½´ç¬¦å·ä½ï¼Œç”¨äº æ˜¯å¦ reverse +1 / -1\n\tcrossBase; // äº¤å‰è½´å¼€å§‹çš„ä½ç½® 0 / style.width\n\t```\n- å¤„ç† flex å¸ƒå±€ä¸­å±æ€§é»˜è®¤å€¼\n\t\n\t```javascript\n\tif (!style.flexDirection || style.flexDirection === 'auto')\n\t    style.flexDirection = 'row'\n\tif (!style.alignItems || style.alignItems === 'auto')\n\t    style.alignItems = 'stretch'\n\tif (!style.justifyContent || style.justifyContent === 'auto')\n\t    style.justifyContent = 'flex-start'\n\tif (!style.flexWrap || style.flexWrap === 'auto')\n\t    style.flexWrap = 'nowrap'\n\tif (!style.alignContent || style.alignContent === 'auto')\n\t    style.alignContent = 'center'\n\t```\n#### flex-direction\n- ![MDN flex-direction è¯­æ³•è§£é‡Š](http://p0.meituan.net/myvideodistribute/bec69e2fc98cf7ebfaad21b5d166030361399.png)\n\t- flex-direction: row\n\t\t- é»˜è®¤å€¼ï¼Œæ˜¾ç¤ºä¸ºè¡Œã€‚æ–¹å‘ä¸ºå½“å‰æ–‡æ¡£æ°´å¹³æµæ–¹å‘ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä»å·¦å¾€å³ã€‚\n\t\t\t\n\t\t\t```javascript\n\t\t\tif (style.flexDirection === 'row') {\n\t\t\t\tmainSize = 'width'\n\t\t\t\tmainStart = 'left'\n\t\t\t\tmainEnd = 'right'\n\t\t\t\tmainSign = +1\n\t\t\t\tmainBase = 0\n\t\t\t\t\t\n\t\t\t\tcrossSize = 'height'\n\t\t\t\tcrossStart = 'top'\n\t\t\t\tcrossEnd = 'bottom'\n\t\t\t}\n\t\t\t```\n\t- flex-direction: row-reverse\n\t\t- æ˜¾ç¤ºä¸ºè¡Œã€‚ä½†æ–¹å‘å’Œrowå±æ€§å€¼æ˜¯åçš„ã€‚\n\t\t\n\t\t\t```javascript\n\t\t\tif (style.flexDirection === 'row-reverse') {\n\t\t\t    mainSize = 'width'\n\t\t\t    mainStart = 'right'\n\t\t\t    mainEnd = 'left'\n\t\t\t    mainSign = -1\n\t\t\t    mainBase = style.width\n\t\t\t\n\t\t\t    crossSize = 'height'\n\t\t\t    crossStart = 'top'\n\t\t\t    crossEnd = 'bottom'\n\t\t\t}\n\t\t\t```\n\t- flex-direction: column\n\t\t- æ˜¾ç¤ºä¸ºåˆ—ã€‚æ–¹å‘ä¸ºå½“å‰æ–‡æ¡£å‚ç›´æµæ–¹å‘ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä»ä¸Šè‡³ä¸‹ã€‚\n\t\t\n\t\t\t```javascript\n\t\t\tif (style.flexDirection === 'column') {\n\t\t\t    mainSize = 'height'\n\t\t\t    mainStart = 'top'\n\t\t\t    mainEnd = 'bottom'\n\t\t\t    mainSign = +1\n\t\t\t    mainBase = 0\n\t\t\t\n\t\t\t    crossSize = 'width'\n\t\t\t    crossStart = 'left'\n\t\t\t    crossEnd = 'right'\n\t\t\t}\n\t\t\t```\n\t- flex-direction: column-reverse\n\t\t- æ˜¾ç¤ºä¸ºåˆ—ã€‚ä½†æ–¹å‘å’Œcolumnå±æ€§å€¼æ˜¯åçš„ã€‚\n\t\t\n\t\t\t```javascript\n\t\t\tif (style.flexDirection === 'column-reverse') {\n\t\t\t    mainSize = 'height'\n\t\t\t    mainStart = 'bottom'\n\t\t\t    mainEnd = 'top'\n\t\t\t    mainSign = -1\n\t\t\t    mainBase = style.height\n\t\t\t\n\t\t\t    crossSize = 'width'\n\t\t\t    crossStart = 'left'\n\t\t\t    crossEnd = 'right'\n\t\t\t}\n\t\t\t```\n\t\t\n#### flex-wrap\n- ![MDN flex-wrapè¯­æ³•è§£é‡Š](http://p0.meituan.net/myvideodistribute/137acf28be957d3b145c9571e3af265462518.png)\n\t- flex-wrap: nowrap\n\t\t- é»˜è®¤å€¼ï¼Œè¡¨ç¤ºå•è¡Œæ˜¾ç¤ºï¼Œä¸æ¢è¡Œã€‚äºæ˜¯å¾ˆå®¹æ˜“å‡ºç°å®½åº¦æº¢å‡ºçš„åœºæ™¯ï¼Œå…¶æ¸²æŸ“è¡¨ç°æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å¯¹CSS3å®½åº¦æœ‰ä¸€å®šäº†è§£ã€‚è¿™è¾¹æˆ‘ä»¬ç®€å•å¤„ç†ä¸ºï¼šï¼ˆä»¥æ°´å¹³å¸ƒå±€ä¸¾ä¾‹ï¼‰\n\t\t\t- flex å­é¡¹å®½åº¦ width ä¹‹å’Œå¤§äº flex å®¹å™¨å®½åº¦ï¼Œåˆ™å†…å®¹æº¢å‡ºï¼Œè¡¨ç°å’Œ white-space: nowrap ç±»ä¼¼ã€‚\n\t\t\t- flex å­é¡¹å®½åº¦ width ä¹‹å’Œå¤§äº flex å®¹å™¨å®½åº¦ï¼Œåˆ™å†…å®¹ä¸æº¢å‡º\n\t\t\t\n\t\t\t```javascript\n\t\t    crossBase = 0\n\t\t    crossSign = +1\n\t\t\t```\n\t\t\n\t- flex-wrap: wrap\n\t\t- å®½åº¦ä¸è¶³æ¢è¡Œæ˜¾ç¤º\n\t\t\t\n\t\t\t```javascript\n\t\t    crossBase = 0\n\t\t    crossSign = +1\n\t\t\t```\n\n\t- flex-wrap: wrap-reverse\n\t\t- å®½åº¦ä¸è¶³æ¢è¡Œæ˜¾ç¤ºï¼Œä½†æ˜¯æ˜¯ä»ä¸‹å¾€ä¸Šå¼€å§‹ï¼Œä¹Ÿå°±æ˜¯åŸæœ¬æ¢è¡Œåœ¨ä¸‹é¢çš„å­é¡¹ç°åœ¨è·‘åˆ°ä¸Šé¢\n\n\t\t\t```javascript\n\t\t\tif (style.flexWrap === 'wrap-reverse') {\n\t\t\t    let temp = crossStart\n\t\t\t    crossStart = crossEnd\n\t\t\t    crossEnd = temp\n\t\t\t    crossSign = -1\n\t\t\t}\n\t\t\t```\n\n\t\n- [layout1.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/layout1.js)\n\n\n### ç¬¬äºŒæ­¥ï¼šæ”¶é›†å…ƒç´ è¿›è¡Œ\n- flex å®¹å™¨æ²¡æœ‰è®¾ç½® mainSizeï¼Œç›´æ¥æ’‘å¼€ï¼Œcount flex å­é¡¹ mainSize\n\n\t```javascript\n\tlet isAutoMainSize = false\n\t// æ²¡æœ‰è®¾ç½® mainSize ç›´æ¥æ’‘å¼€\n\tif (!style[mainSize]) { // auto sizing\n      elementStyle[mainSize] = 0\n\t  for (let i = 0; i < items.length; i ++) {\n\t\tlet item = items[i]\n\t\tif (itemStyle[mainSize] !== null || itemStyle[mainSize] !== (void 0)) \n\t\t  elementStyle[mainSize] = elementStyle[mainSize] + itemStyle[mainSize]\n\t  }\n\t  isAutoMainSize = true\n\t}\n\t```\n\t\n- flex å®¹å™¨ flex-wrap: no-wrap && isAutoMainSizeï¼ŒmainSpace ä¸º0ï¼Œå…è®¸æ’‘å¤§ï¼Œ**å¼ºè¡Œåˆ†è¿›ç¬¬ä¸€è¡Œ**\n\n\t```javascript\n\tif (style.flexWrap === 'nowrap' && isAutoMainSize) {\n      mainSpace -= itemStyle[mainSize]\n      if (itemStyle[crossSize] !== null && itemStyle[crossSize] !== (void 0)) {\n        crossSpace = Math.max(crossSpace, itemStyle[crossSize])\n      }\n      flexLine.push(item)\n    }\n\t```\n- flex å­é¡¹ display ä¸º flexï¼Œç›´æ¥å¡è¿›å½“å‰è¡Œï¼ŒmainSpace ä¸ä½œå¤„ç†ï¼Œåç»­è‡ªé€‚åº”\n\t- flex: none | auto | [ <'flex-grow'> <'flex-shrink'>? || <'flex-basis'> ]\n\n\t\t```javascript\n\t    if (itemStyle.flex) {\n\t\t      flexLine.push(item)\n\t\t   } \n\t\t```\n- flex å®¹å™¨æ˜¯å¦æ¢è¡Œ\n\t\n\t```javascript\n\t// å½“å‰flex å­é¡¹ï¼Œå¤§äº flex mainSize,è‡ªé€‚åº”\n\tif (itemStyle[mainSize] > style[mainSize]) {\n\t    itemStyle[mainSize] = style[mainSize]\n\t}\n\t// å½“å‰flex å­é¡¹ï¼Œå¤§äº flex å®¹å™¨å‰©ä½™ mainSpaceï¼Œå¦èµ·æ–°è¡Œ\n\tif (mainSpace < itemStyle[mainSize]) {\n\t    flexLine.mainSpace = mainSpace\n\t    flexLine.crossSpace = crossSpace\n\t\n\t    // åˆ›å»ºæ–°è¡Œ\n\t    flexLine = []\n\t    flexLines.push(flexLine)\n\t    flexLine.push(item)\n\t\n\t    mainSpace = style[mainSize]\n\t    crossSpace = 0\n\t} else { // æœªè¶…è¿‡ flex å®¹å™¨å‰©ä½™ mainSpaceï¼Œæ·»åŠ è¿›è¡Œ \n\t    flexLine.push(item)\n\t}\n\t// å¤„ç†äº¤å‰è½´ï¼Œåªéœ€è¦å– flex å­é¡¹æœ€å¤§ crossSize\n\tif (itemStyle[crossSize] !== null && itemStyle[crossSize] !== (void 0)) {\n\t    crossSpace = Math.max(crossSpace, itemStyle[crossSize])\n\t}\n\t// flex å®¹å™¨å‰©ä½™ mainSpace\n\tmainSpace -= itemStyle[mainSize]\n\t```\n- [layout2.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/layout2.js)\n\t\n### ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—ä¸»è½´\n- è®¡ç®—ä¸»è½´æ–¹å‘\n\t- æ‰¾å‡ºæ‰€æœ‰ flex å­é¡¹ä¹Ÿä¸º flex å…ƒç´ \n\n\t\t```javascript\n\t    for (let i = 0; i < items.length; i++) {\n\t        const item = items[i]\n\t        const itemStyle = getStyle(item)\n\t\n\t        if ((itemStyle.flex !== null) && (itemStyle.flex !== (void 0))) {\n\t          flexTotal += itemStyle.flex\n\t          continue\n\t        }\n\t    }\n\t\t```\n\t\t- å­˜åœ¨ flex å­é¡¹ä¹Ÿä¸º flex\n\t\t\t- å¡«å…… flexLine å‰©ä½™ mainSpace ç©ºé—´\n\n\t\t\t\t```javascript\n\n\t\t        const currentMain = mainBase\n\t\t\n\t\t        for (let i = 0; i < items.length; i++) {\n\t\t          const item = items[i]\n\t\t          const itemStyle = getStyle(item)\n\t\t\n\t\t          if (itemStyle.flex) {\n\t\t            itemStyle[mainSize] = (mainSpace / flexTotal) * itemStyle.flex\n\t\t          }\n\t\t          itemStyle[mainStart] = currentMain\n\t\t          itemStyle[mainEnd] = itemStyle[mainStart] + mainSign * itemStyle[mainSize]\n\t\t          currentMain = itemStyle[mainEnd]\n\t\t        }\n\t\t\t\t```\n\t\t\n\t\t- ä¸å­˜åœ¨ flex å­é¡¹ä¹Ÿä¸º flexï¼ŒæŠŠä¸»è½´æ–¹å‘å‰©ä½™å°ºå¯¸æŒ‰æ¯”ä¾‹åˆ†é…ç»™è¿™äº›å…ƒç´ \n\t\t- justify-content: flex-start | flex-end | center | space-between | space-around | space-evenly;\n\t\t\t- justify-content: flex-start\n\t\t\t\t- é»˜è®¤å€¼\n\n\t\t\t\t\t```javascript\n\t\t\t\t\tif (!style.justifyContent || style.justifyContent === 'auto')\n\t\t\t\t\t    style.justifyContent = 'flex-start'\n\t\t\t\t\t```\n\n\t\t\t\t\t```javascript\n\t\t\t        if (style.justifyContent === 'flex-start') {\n\t\t\t          currentMain = mainBase\n\t\t\t          gap = 0\n\t\t\t        }\n\t\t\t\t\t```\n\t\t\t- justify-content: flex-end\n\t\t\t\t- é€»è¾‘CSSå±æ€§å€¼ï¼Œä¸é»˜è®¤æ–‡æ¡£æµæ–¹å‘ç›¸å\n\n\t\t\t\t\t```javascript\n\t\t\t        if (style.justifyContent === 'flex-start') {\n\t\t\t          currentMain = mainSpace * mainSign + mainBase\n\t\t\t          gap = 0\n\t\t\t        }\n\t\t\t\t\t```\n\t\t\t- justify-content: center\n\t\t\t\t- å±…ä¸­å¯¹é½\n\n\t\t\t\t\t```javascript\n\t\t\t        if (style.justifyContent === 'center') {\n\t\t\t          currentMain = mainSpace / 2 * mainSign + mainBase\n\t\t\t          gap = 0\n\t\t\t        }\n\t\t\t\t\t```\n\t\t\t- justify-content: space-between\n\t\t\t\t- è¡¨ç°ä¸ºä¸¤ç«¯å¯¹é½ã€‚between æ˜¯ä¸­é—´çš„æ„æ€ï¼Œæ„æ€æ˜¯å¤šä½™çš„ç©ºç™½é—´è·åªåœ¨å…ƒç´ ä¸­é—´åŒºåŸŸåˆ†é…\n\n\t\t\t\t\t```javascript\n\t\t\t        if (style.justifyContent === 'space-between') {\n\t\t\t          gap = mainSpace / (items.length - 1) * mainSign\n\t\t\t          currentMain = mainBase\n\t\t\t        }\n\t\t\t\t\t```\n\t\t\t- justify-content: space-around\n\t\t\t\t- around æ˜¯ç¯ç»•çš„æ„æ€ï¼Œæ„æ€æ˜¯æ¯ä¸ª flex å­é¡¹ä¸¤ä¾§éƒ½ç¯ç»•äº’ä¸å¹²æ‰°çš„ç­‰å®½çš„ç©ºç™½é—´è·ï¼Œæœ€ç»ˆè§†è§‰ä¸Šè¾¹ç¼˜ä¸¤ä¾§çš„ç©ºç™½åªæœ‰ä¸­é—´ç©ºç™½å®½åº¦ä¸€åŠ\n\n\t\t\t\t\t```javascript\n\t\t\t        if (style.justifyContent === 'space-around') {\n\t\t\t          gap = mainSpace / items.length * mainSign\n\t\t\t          currentMain = gap / 2 + mainBase\n\t\t\t        }\n\t\t\t\t\t```\n\t\t\t- justify-content: space-evenly\n\t\t\t\t- evenly æ˜¯åŒ€ç§°ã€å¹³ç­‰çš„æ„æ€ã€‚ä¹Ÿå°±æ˜¯è§†è§‰ä¸Šï¼Œæ¯ä¸ª flex å­é¡¹ä¸¤ä¾§ç©ºç™½é—´è·å®Œå…¨ç›¸ç­‰\n\n\t\t\t\t\t```javascript\n\t\t\t        if (style.justifyContent === 'space-evenly') {\n\t\t\t          gap = mainSpace / (items.length + 1) * mainSign\n\t\t\t          currentMain = gap + mainBase\n\t\t\t        }\n\t\t\t\t\t```\n\t\t- å¾ªç¯è®¡ç®— flex å­é¡¹ä½ç½®\n\t\t\t\n\t\t\t```javascript\n\t        for (let i = 0; i < items.length; i++) {\n\t          const item = items[i]\n\t          itemStyle[mainStart] = currentMain\n\t          itemStyle[mainEnd] = itemStyle[mainStart] + mainSign * itemStyle[mainSize]\n\t          currentMain = itemStyle[mainEnd] + gap\n\t        }\n\t\t\t```\n\t\t\n\t- è‹¥å‰©ä½™ç©ºé—´ä¸ºè´Ÿæ•°ï¼Œæ‰€æœ‰ flex å…ƒç´ ä¸º 0ï¼Œç­‰æ¯”å‹ç¼©å‰©ä½™å…ƒç´ \n\n\t\t```javascript\n\t\tif (mainSpace < 0) {\n\t\t    // å¯¹è´Ÿçš„ mainSpaceï¼Œ æ‰€æœ‰è¯¥è¡Œ flex å­é¡¹ç­‰æ¯”ä¾‹ç¼©æ”¾ï¼ˆæœªè®¾ç½® flex-shrink é»˜è®¤å€¼æ˜¯1ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤æ‰€æœ‰çš„ flex å­é¡¹éƒ½ä¼šæ”¶ç¼©ï¼‰\n\t\t    const scale = style[mainSize] / (style[mainSize] - mainSpace)\n\t\t    const currentMain = mainBase\n\t\t    for (let i = 0; i < items.length; i ++) {\n\t\t      const item = items[i]\n\t\t      const itemStyle = getStyle(item)\n\t\t\t\n\t\t      if (itemStyle.flex) {\n\t\t        itemStyle[mainSize] = 0\n\t\t      }\n\t\t\t\n\t\t      itemStyle[mainSize] = itemStyle[mainSize] * scale\n\t\t\t\n\t\t      // flex å®¹å™¨è¿™ä¸€è¡Œå†…ï¼Œflex å­é¡¹æ’å¸ƒ\n\t\t      itemStyle[mainStart] = currentMain\n\t\t      itemStyle[mainEnd] = itemStyle[mainStart] + mainSign * itemStyle[mainSize]\n\t\t      currentMain = itemStyle[mainEnd]\n\t\t    }\n \t\t}\n\t\t```\n- [layout3.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/layout3.js)\n\t\t\n### ç¬¬å››æ­¥ï¼šè®¡ç®—äº¤å‰è½´\n- è®¡ç®—äº¤å‰è½´æ–¹å‘\n\t- æ ¹æ®æ¯ä¸€è¡Œä¸­æœ€å¤§å…ƒç´ å°ºå¯¸è®¡ç®—è¡Œé«˜\n\n\t\t```javascript\n\t\tif (!style[crossSize]) { // äº¤å‰è½´ï¼ŒcrossSize æœªè®¾å®šæ—¶é»˜è®¤ä¸º count flexLines æ¯è¡Œæœ€å¤§ crossSpace ä¹‹å’Œ \n\t\t    crossSpace = 0\n\t\t    elementStyle[crossSize] = 0\n\t\t    for (let i = 0; i < flexLines.length; i ++) {\n\t\t      elementStyle[crossSize] = elementStyle[crossSize] + flexLines[i].crossSpace\n\t\t    }\n\t\t} else { // è®¾å®šåï¼Œè®¡ç®—å‡º æœ€ç»ˆçš„ crossSpaceï¼Œä¸º crossSpace å‡å»æ¯è¡Œæœ€å¤§ crossSpaceï¼Œå‰©ä½™ç©ºé—´ï¼Œç”¨ä½œåˆ†é…\n\t\t    crossSpace = style[crossSize]\n\t\t    for (let i = 0; i < flexLines.length; i ++) {\n\t\t      crossSpace -= flexLines[i].crossSpace\n\t\t    }\n\t\t}\n\t\t```\n\t- æ ¹æ®è¡Œé«˜ flex-align å’Œ item-alignï¼Œç¡®å®šå…ƒç´ å…·ä½“ä½ç½®\n\n\t\t```javascript\n\t\t\n\t\tflexLines.forEach(function (items) {\n\t\t    let lineCrossSize = style.alignContent === 'stretch' ? // æ‹‰ä¼¸ flex å­é¡¹ï¼Œå¡«æ»¡äº¤å‰è½´\n\t\t      items.crossSpace + crossSpace / flexLines.length :\n\t\t      item.crossSpace\n\t\t\n\t\t    for (let i = 0; i < items.length; i ++) {\n\t\t      const item = items[i]\n\t\t      const itemStyle = getStyle(item)\n\t\t\n\t\t      const align = itemStyle.alignSelf || style.alignItems // align-selfæŒ‡æ§åˆ¶å•ç‹¬æŸä¸€ä¸ªflexå­é¡¹çš„å‚ç›´å¯¹é½æ–¹å¼\n\t\t      // align-itemså±æ€§ï¼Œè¡¨ç¤ºå­é¡¹ä»¬\n\t\t\n\t\t      if (itemStyle[crossSize] === null) {\n\t\t        itemStyle[crossSize] = (align === 'stretch') ?\n\t\t          lineCrossSize : 0\n\t\t      }\n\t\t\n\t\t      if (align === 'flex-start') {\n\t\t        itemStyle[crossStart] = crossBase\n\t\t        itemStyle[crossEnd] = itemStyle[crossStart] + crossSign * itemStyle[crossSize]\n\t\t      }\n\t\t\n\t\t      if (align === 'flex-end') {\n\t\t        itemStyle[crossEnd] = crossBase + crossSign * lineCrossSize\n\t\t        itemStyle[crossStart] = itemStyle[crossEnd] - crossSign * itemStyle[crossSize]\n\t\t      }\n\t\t\n\t\t      if (align === 'center') {\n\t\t        itemStyle[crossStart] = crossBase + crossSign * (lineCrossSize - itemStyle[crossSize]) / 2\n\t\t        itemStyle[crossEnd] = itemStyle[crossStart] + crossSign * itemStyle[crossSize]\n\t\t      }\n\t\t\n\t\t      if (align === 'stretch') {\n\t\t        itemStyle[crossStart] = crossBase\n\t\t        itemStyle[crossEnd] = crossBase + crossSign * ((itemStyle[crossSize] !== null && itemStyle[crossSize] !== (void 0)) ?\n\t\t          itemStyle[crossSize] : lineCrossSize)\n\t\t\n\t\t        itemStyle[crossSize] = crossSign * (itemStyle[crossEnd] - itemStyle[crossStart])\n\t\t      }\n\t\t    }\n\t\t    crossBase += crossSign * (lineCrossSize + step)\n\t  })\n\t\t```\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬å››æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/0e488c9e6c482d1d67f2a1872a58aa0d231450.png)\n\n- [layout4.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/layout4.js)\n\n\n\n\n## å‚è€ƒæ–‡çŒ®\n- [display: flex æ•™ç¨‹](https://www.zhangxinxu.com/wordpress/2018/10/display-flex-css3-css/#justify-content)\n- [Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡](http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html)\n- [MDN Flex](https://developer.mozilla.org/en-US/docs/Glossary/Flex)\n\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/Toy-Browser-DAY4.md","raw":"---\ntitle: Toy-Browser-DAY4\ndate: 2020-05-22 21:16:54\ntags:\n- æµè§ˆå™¨\ncategories:\n- æµè§ˆå™¨\ndescription:\n- æµè§ˆå™¨ -- toy-browser\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- implementation of a toy-browser ğŸ™†\n- å˜»å˜»å˜»ï¼Œæˆ‘ä»¬å°†è¦åœ¨åš toy-browser æµè§ˆå™¨ç›¸å…³æ’ç‰ˆé—®é¢˜å•¦\n- ![DOM with CSS](http://p0.meituan.net/myvideodistribute/6d5c67d3d5d0633bf667bd680f6dfb9489753.png)\n\n<!-- more -->\n\n### ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–\n- æˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹ html ä»£ç æ®µ\n\n\t```html\n\t<html maaa=a >\n\t    <head>\n\t        <style>\n\t    #container{\n\t        width:500px;\n\t        height:300px;\n\t        display:flex;\n\t        background-color:rgb(255,255,255);\n\t    }\n\t    #container #myid{\n\t      width:200px;\n\t      height:100px;\n\t      background-color:rgb(255,0,0)\n\t    }\n\t    #container .c1{\n\t      flex:1;\n\t      background-color:rgb(0,255,0)\n\t    }\n\t        </style>\n\t    </head>\n\t    <body>\n\t        <div id=\"container\">\n\t          <div id=\"myid\"></div>\n\t          <div class=\"c1\"></div>\n\t        </div>\n\t    </body>\n    </html>\n\t```\n- ä»£ç é€»è¾‘è‡ªé¡¶å‘ä¸‹\n- é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ endTag çš„æ—¶å€™è¿›è¡Œ layout\n\t- æˆ‘ä»¬åªå¤„ç† flexï¼Œå¯ä»¥ç®€åŒ–æˆåœ¨ endTag æ—¶ï¼Œè¿›è¡Œ layout å³å¯\n- computeCSS7.js\n\n\t```javascript\n\tconst layout = require(\"./layout.js\")\n\t\n\t// ... some code\n\t\n\tfunction emit(token) {\n\t\t\n\t  // ... some code\n\t\t\n\t  if (token.type == \"startTag\") {\n\t\t    \n\t\t // ... some code\n\t\t\n\t  } else if (token.type == \"endTag\") {\n\t    if (top.tagName != token.tagName) {\n\t      throw new Error(\"Tag start end doesn't match\")\n\t    } else {\n\t      // console.log('pop', stack.pop())\n\t      /** é‡åˆ° style æ ‡ç­¾æ—¶ï¼Œæ‰§è¡Œæ·»åŠ  CCS è§„åˆ™çš„æ“ä½œ */\n\t      if (top.tagName === \"style\") {\n\t        addCSSRules(top.children[0].content)\n\t      }\n\t      layout(top)\n\t      stack.pop()\n\t    }\n\t    currentTextNode = null\n\t  } else if (token.type == \"text\") {\n\t\t    \n\t\t // ... some code\n\t\t\n\t  }\n\t}\n\t```\n#### flex å¸ƒå±€åŸºç¡€æ¦‚å¿µ\n\t\n- ![flex æ’ç‰ˆè§£é‡Šå›¾](http://p0.meituan.net/myvideodistribute/1e160d5f7cbdc299f68d432dcb19cca1137896.png)\n\n\t> ç»™ div è¿™ç±»å—çŠ¶å…ƒç´ å…ƒç´ è®¾ç½® display: flex æˆ–è€…ç»™ span è¿™ç±»å†…è”å…ƒç´ è®¾ç½® display: inline-flex ï¼Œflex å¸ƒå±€å³åˆ›å»ºï¼å…¶ä¸­ï¼Œç›´æ¥è®¾ç½® display: flex æˆ–è€… display: inline-flex çš„å…ƒç´ ç§°ä¸º flex å®¹å™¨ï¼Œé‡Œé¢çš„å­å…ƒç´ ç§°ä¸º flex å­é¡¹ã€‚\n\n\t- ![flex ç›¸å…³æ–¹æ³•æ¦‚è§ˆ](http://p1.meituan.net/myvideodistribute/0f5622ba2bab24f882be6007f6761a4422506.png)\n\n- ç”±ä¸Š felx å¸ƒå±€ä¸­çš„ ä¸»è½´ï¼Œäº¤å‰è½´å›¾ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰å˜é‡\n\t\n\t```javascript\n\tmainSize, // ä¸»è½´size width / height\n\tmainStart, // ä¸»è½´èµ·ç‚¹ left / right / top / bottom\n\tmainEnd, // ä¸»è½´ç»ˆç‚¹ left / right / top / bottom\n\tmainSign, // ä¸»è½´ç¬¦å·ä½ï¼Œç”¨äº æ˜¯å¦ reverse +1 / -1\n\tmainBase, // ä¸»è½´å¼€å§‹çš„ä½ç½® 0 / style.width\n\tcrossSize, // äº¤å‰è½´size width / height\n\tcrossStart, // äº¤å‰è½´åæ ‡èµ·ç‚¹ left / right / top / bottom\n\tcrossEnd, // äº¤å‰è½´åæ ‡ç»ˆç‚¹ left / right / top / bottom\n\tcrossSign, // äº¤å‰è½´ç¬¦å·ä½ï¼Œç”¨äº æ˜¯å¦ reverse +1 / -1\n\tcrossBase; // äº¤å‰è½´å¼€å§‹çš„ä½ç½® 0 / style.width\n\t```\n- å¤„ç† flex å¸ƒå±€ä¸­å±æ€§é»˜è®¤å€¼\n\t\n\t```javascript\n\tif (!style.flexDirection || style.flexDirection === 'auto')\n\t    style.flexDirection = 'row'\n\tif (!style.alignItems || style.alignItems === 'auto')\n\t    style.alignItems = 'stretch'\n\tif (!style.justifyContent || style.justifyContent === 'auto')\n\t    style.justifyContent = 'flex-start'\n\tif (!style.flexWrap || style.flexWrap === 'auto')\n\t    style.flexWrap = 'nowrap'\n\tif (!style.alignContent || style.alignContent === 'auto')\n\t    style.alignContent = 'center'\n\t```\n#### flex-direction\n- ![MDN flex-direction è¯­æ³•è§£é‡Š](http://p0.meituan.net/myvideodistribute/bec69e2fc98cf7ebfaad21b5d166030361399.png)\n\t- flex-direction: row\n\t\t- é»˜è®¤å€¼ï¼Œæ˜¾ç¤ºä¸ºè¡Œã€‚æ–¹å‘ä¸ºå½“å‰æ–‡æ¡£æ°´å¹³æµæ–¹å‘ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä»å·¦å¾€å³ã€‚\n\t\t\t\n\t\t\t```javascript\n\t\t\tif (style.flexDirection === 'row') {\n\t\t\t\tmainSize = 'width'\n\t\t\t\tmainStart = 'left'\n\t\t\t\tmainEnd = 'right'\n\t\t\t\tmainSign = +1\n\t\t\t\tmainBase = 0\n\t\t\t\t\t\n\t\t\t\tcrossSize = 'height'\n\t\t\t\tcrossStart = 'top'\n\t\t\t\tcrossEnd = 'bottom'\n\t\t\t}\n\t\t\t```\n\t- flex-direction: row-reverse\n\t\t- æ˜¾ç¤ºä¸ºè¡Œã€‚ä½†æ–¹å‘å’Œrowå±æ€§å€¼æ˜¯åçš„ã€‚\n\t\t\n\t\t\t```javascript\n\t\t\tif (style.flexDirection === 'row-reverse') {\n\t\t\t    mainSize = 'width'\n\t\t\t    mainStart = 'right'\n\t\t\t    mainEnd = 'left'\n\t\t\t    mainSign = -1\n\t\t\t    mainBase = style.width\n\t\t\t\n\t\t\t    crossSize = 'height'\n\t\t\t    crossStart = 'top'\n\t\t\t    crossEnd = 'bottom'\n\t\t\t}\n\t\t\t```\n\t- flex-direction: column\n\t\t- æ˜¾ç¤ºä¸ºåˆ—ã€‚æ–¹å‘ä¸ºå½“å‰æ–‡æ¡£å‚ç›´æµæ–¹å‘ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä»ä¸Šè‡³ä¸‹ã€‚\n\t\t\n\t\t\t```javascript\n\t\t\tif (style.flexDirection === 'column') {\n\t\t\t    mainSize = 'height'\n\t\t\t    mainStart = 'top'\n\t\t\t    mainEnd = 'bottom'\n\t\t\t    mainSign = +1\n\t\t\t    mainBase = 0\n\t\t\t\n\t\t\t    crossSize = 'width'\n\t\t\t    crossStart = 'left'\n\t\t\t    crossEnd = 'right'\n\t\t\t}\n\t\t\t```\n\t- flex-direction: column-reverse\n\t\t- æ˜¾ç¤ºä¸ºåˆ—ã€‚ä½†æ–¹å‘å’Œcolumnå±æ€§å€¼æ˜¯åçš„ã€‚\n\t\t\n\t\t\t```javascript\n\t\t\tif (style.flexDirection === 'column-reverse') {\n\t\t\t    mainSize = 'height'\n\t\t\t    mainStart = 'bottom'\n\t\t\t    mainEnd = 'top'\n\t\t\t    mainSign = -1\n\t\t\t    mainBase = style.height\n\t\t\t\n\t\t\t    crossSize = 'width'\n\t\t\t    crossStart = 'left'\n\t\t\t    crossEnd = 'right'\n\t\t\t}\n\t\t\t```\n\t\t\n#### flex-wrap\n- ![MDN flex-wrapè¯­æ³•è§£é‡Š](http://p0.meituan.net/myvideodistribute/137acf28be957d3b145c9571e3af265462518.png)\n\t- flex-wrap: nowrap\n\t\t- é»˜è®¤å€¼ï¼Œè¡¨ç¤ºå•è¡Œæ˜¾ç¤ºï¼Œä¸æ¢è¡Œã€‚äºæ˜¯å¾ˆå®¹æ˜“å‡ºç°å®½åº¦æº¢å‡ºçš„åœºæ™¯ï¼Œå…¶æ¸²æŸ“è¡¨ç°æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å¯¹CSS3å®½åº¦æœ‰ä¸€å®šäº†è§£ã€‚è¿™è¾¹æˆ‘ä»¬ç®€å•å¤„ç†ä¸ºï¼šï¼ˆä»¥æ°´å¹³å¸ƒå±€ä¸¾ä¾‹ï¼‰\n\t\t\t- flex å­é¡¹å®½åº¦ width ä¹‹å’Œå¤§äº flex å®¹å™¨å®½åº¦ï¼Œåˆ™å†…å®¹æº¢å‡ºï¼Œè¡¨ç°å’Œ white-space: nowrap ç±»ä¼¼ã€‚\n\t\t\t- flex å­é¡¹å®½åº¦ width ä¹‹å’Œå¤§äº flex å®¹å™¨å®½åº¦ï¼Œåˆ™å†…å®¹ä¸æº¢å‡º\n\t\t\t\n\t\t\t```javascript\n\t\t    crossBase = 0\n\t\t    crossSign = +1\n\t\t\t```\n\t\t\n\t- flex-wrap: wrap\n\t\t- å®½åº¦ä¸è¶³æ¢è¡Œæ˜¾ç¤º\n\t\t\t\n\t\t\t```javascript\n\t\t    crossBase = 0\n\t\t    crossSign = +1\n\t\t\t```\n\n\t- flex-wrap: wrap-reverse\n\t\t- å®½åº¦ä¸è¶³æ¢è¡Œæ˜¾ç¤ºï¼Œä½†æ˜¯æ˜¯ä»ä¸‹å¾€ä¸Šå¼€å§‹ï¼Œä¹Ÿå°±æ˜¯åŸæœ¬æ¢è¡Œåœ¨ä¸‹é¢çš„å­é¡¹ç°åœ¨è·‘åˆ°ä¸Šé¢\n\n\t\t\t```javascript\n\t\t\tif (style.flexWrap === 'wrap-reverse') {\n\t\t\t    let temp = crossStart\n\t\t\t    crossStart = crossEnd\n\t\t\t    crossEnd = temp\n\t\t\t    crossSign = -1\n\t\t\t}\n\t\t\t```\n\n\t\n- [layout1.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/layout1.js)\n\n\n### ç¬¬äºŒæ­¥ï¼šæ”¶é›†å…ƒç´ è¿›è¡Œ\n- flex å®¹å™¨æ²¡æœ‰è®¾ç½® mainSizeï¼Œç›´æ¥æ’‘å¼€ï¼Œcount flex å­é¡¹ mainSize\n\n\t```javascript\n\tlet isAutoMainSize = false\n\t// æ²¡æœ‰è®¾ç½® mainSize ç›´æ¥æ’‘å¼€\n\tif (!style[mainSize]) { // auto sizing\n      elementStyle[mainSize] = 0\n\t  for (let i = 0; i < items.length; i ++) {\n\t\tlet item = items[i]\n\t\tif (itemStyle[mainSize] !== null || itemStyle[mainSize] !== (void 0)) \n\t\t  elementStyle[mainSize] = elementStyle[mainSize] + itemStyle[mainSize]\n\t  }\n\t  isAutoMainSize = true\n\t}\n\t```\n\t\n- flex å®¹å™¨ flex-wrap: no-wrap && isAutoMainSizeï¼ŒmainSpace ä¸º0ï¼Œå…è®¸æ’‘å¤§ï¼Œ**å¼ºè¡Œåˆ†è¿›ç¬¬ä¸€è¡Œ**\n\n\t```javascript\n\tif (style.flexWrap === 'nowrap' && isAutoMainSize) {\n      mainSpace -= itemStyle[mainSize]\n      if (itemStyle[crossSize] !== null && itemStyle[crossSize] !== (void 0)) {\n        crossSpace = Math.max(crossSpace, itemStyle[crossSize])\n      }\n      flexLine.push(item)\n    }\n\t```\n- flex å­é¡¹ display ä¸º flexï¼Œç›´æ¥å¡è¿›å½“å‰è¡Œï¼ŒmainSpace ä¸ä½œå¤„ç†ï¼Œåç»­è‡ªé€‚åº”\n\t- flex: none | auto | [ <'flex-grow'> <'flex-shrink'>? || <'flex-basis'> ]\n\n\t\t```javascript\n\t    if (itemStyle.flex) {\n\t\t      flexLine.push(item)\n\t\t   } \n\t\t```\n- flex å®¹å™¨æ˜¯å¦æ¢è¡Œ\n\t\n\t```javascript\n\t// å½“å‰flex å­é¡¹ï¼Œå¤§äº flex mainSize,è‡ªé€‚åº”\n\tif (itemStyle[mainSize] > style[mainSize]) {\n\t    itemStyle[mainSize] = style[mainSize]\n\t}\n\t// å½“å‰flex å­é¡¹ï¼Œå¤§äº flex å®¹å™¨å‰©ä½™ mainSpaceï¼Œå¦èµ·æ–°è¡Œ\n\tif (mainSpace < itemStyle[mainSize]) {\n\t    flexLine.mainSpace = mainSpace\n\t    flexLine.crossSpace = crossSpace\n\t\n\t    // åˆ›å»ºæ–°è¡Œ\n\t    flexLine = []\n\t    flexLines.push(flexLine)\n\t    flexLine.push(item)\n\t\n\t    mainSpace = style[mainSize]\n\t    crossSpace = 0\n\t} else { // æœªè¶…è¿‡ flex å®¹å™¨å‰©ä½™ mainSpaceï¼Œæ·»åŠ è¿›è¡Œ \n\t    flexLine.push(item)\n\t}\n\t// å¤„ç†äº¤å‰è½´ï¼Œåªéœ€è¦å– flex å­é¡¹æœ€å¤§ crossSize\n\tif (itemStyle[crossSize] !== null && itemStyle[crossSize] !== (void 0)) {\n\t    crossSpace = Math.max(crossSpace, itemStyle[crossSize])\n\t}\n\t// flex å®¹å™¨å‰©ä½™ mainSpace\n\tmainSpace -= itemStyle[mainSize]\n\t```\n- [layout2.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/layout2.js)\n\t\n### ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—ä¸»è½´\n- è®¡ç®—ä¸»è½´æ–¹å‘\n\t- æ‰¾å‡ºæ‰€æœ‰ flex å­é¡¹ä¹Ÿä¸º flex å…ƒç´ \n\n\t\t```javascript\n\t    for (let i = 0; i < items.length; i++) {\n\t        const item = items[i]\n\t        const itemStyle = getStyle(item)\n\t\n\t        if ((itemStyle.flex !== null) && (itemStyle.flex !== (void 0))) {\n\t          flexTotal += itemStyle.flex\n\t          continue\n\t        }\n\t    }\n\t\t```\n\t\t- å­˜åœ¨ flex å­é¡¹ä¹Ÿä¸º flex\n\t\t\t- å¡«å…… flexLine å‰©ä½™ mainSpace ç©ºé—´\n\n\t\t\t\t```javascript\n\n\t\t        const currentMain = mainBase\n\t\t\n\t\t        for (let i = 0; i < items.length; i++) {\n\t\t          const item = items[i]\n\t\t          const itemStyle = getStyle(item)\n\t\t\n\t\t          if (itemStyle.flex) {\n\t\t            itemStyle[mainSize] = (mainSpace / flexTotal) * itemStyle.flex\n\t\t          }\n\t\t          itemStyle[mainStart] = currentMain\n\t\t          itemStyle[mainEnd] = itemStyle[mainStart] + mainSign * itemStyle[mainSize]\n\t\t          currentMain = itemStyle[mainEnd]\n\t\t        }\n\t\t\t\t```\n\t\t\n\t\t- ä¸å­˜åœ¨ flex å­é¡¹ä¹Ÿä¸º flexï¼ŒæŠŠä¸»è½´æ–¹å‘å‰©ä½™å°ºå¯¸æŒ‰æ¯”ä¾‹åˆ†é…ç»™è¿™äº›å…ƒç´ \n\t\t- justify-content: flex-start | flex-end | center | space-between | space-around | space-evenly;\n\t\t\t- justify-content: flex-start\n\t\t\t\t- é»˜è®¤å€¼\n\n\t\t\t\t\t```javascript\n\t\t\t\t\tif (!style.justifyContent || style.justifyContent === 'auto')\n\t\t\t\t\t    style.justifyContent = 'flex-start'\n\t\t\t\t\t```\n\n\t\t\t\t\t```javascript\n\t\t\t        if (style.justifyContent === 'flex-start') {\n\t\t\t          currentMain = mainBase\n\t\t\t          gap = 0\n\t\t\t        }\n\t\t\t\t\t```\n\t\t\t- justify-content: flex-end\n\t\t\t\t- é€»è¾‘CSSå±æ€§å€¼ï¼Œä¸é»˜è®¤æ–‡æ¡£æµæ–¹å‘ç›¸å\n\n\t\t\t\t\t```javascript\n\t\t\t        if (style.justifyContent === 'flex-start') {\n\t\t\t          currentMain = mainSpace * mainSign + mainBase\n\t\t\t          gap = 0\n\t\t\t        }\n\t\t\t\t\t```\n\t\t\t- justify-content: center\n\t\t\t\t- å±…ä¸­å¯¹é½\n\n\t\t\t\t\t```javascript\n\t\t\t        if (style.justifyContent === 'center') {\n\t\t\t          currentMain = mainSpace / 2 * mainSign + mainBase\n\t\t\t          gap = 0\n\t\t\t        }\n\t\t\t\t\t```\n\t\t\t- justify-content: space-between\n\t\t\t\t- è¡¨ç°ä¸ºä¸¤ç«¯å¯¹é½ã€‚between æ˜¯ä¸­é—´çš„æ„æ€ï¼Œæ„æ€æ˜¯å¤šä½™çš„ç©ºç™½é—´è·åªåœ¨å…ƒç´ ä¸­é—´åŒºåŸŸåˆ†é…\n\n\t\t\t\t\t```javascript\n\t\t\t        if (style.justifyContent === 'space-between') {\n\t\t\t          gap = mainSpace / (items.length - 1) * mainSign\n\t\t\t          currentMain = mainBase\n\t\t\t        }\n\t\t\t\t\t```\n\t\t\t- justify-content: space-around\n\t\t\t\t- around æ˜¯ç¯ç»•çš„æ„æ€ï¼Œæ„æ€æ˜¯æ¯ä¸ª flex å­é¡¹ä¸¤ä¾§éƒ½ç¯ç»•äº’ä¸å¹²æ‰°çš„ç­‰å®½çš„ç©ºç™½é—´è·ï¼Œæœ€ç»ˆè§†è§‰ä¸Šè¾¹ç¼˜ä¸¤ä¾§çš„ç©ºç™½åªæœ‰ä¸­é—´ç©ºç™½å®½åº¦ä¸€åŠ\n\n\t\t\t\t\t```javascript\n\t\t\t        if (style.justifyContent === 'space-around') {\n\t\t\t          gap = mainSpace / items.length * mainSign\n\t\t\t          currentMain = gap / 2 + mainBase\n\t\t\t        }\n\t\t\t\t\t```\n\t\t\t- justify-content: space-evenly\n\t\t\t\t- evenly æ˜¯åŒ€ç§°ã€å¹³ç­‰çš„æ„æ€ã€‚ä¹Ÿå°±æ˜¯è§†è§‰ä¸Šï¼Œæ¯ä¸ª flex å­é¡¹ä¸¤ä¾§ç©ºç™½é—´è·å®Œå…¨ç›¸ç­‰\n\n\t\t\t\t\t```javascript\n\t\t\t        if (style.justifyContent === 'space-evenly') {\n\t\t\t          gap = mainSpace / (items.length + 1) * mainSign\n\t\t\t          currentMain = gap + mainBase\n\t\t\t        }\n\t\t\t\t\t```\n\t\t- å¾ªç¯è®¡ç®— flex å­é¡¹ä½ç½®\n\t\t\t\n\t\t\t```javascript\n\t        for (let i = 0; i < items.length; i++) {\n\t          const item = items[i]\n\t          itemStyle[mainStart] = currentMain\n\t          itemStyle[mainEnd] = itemStyle[mainStart] + mainSign * itemStyle[mainSize]\n\t          currentMain = itemStyle[mainEnd] + gap\n\t        }\n\t\t\t```\n\t\t\n\t- è‹¥å‰©ä½™ç©ºé—´ä¸ºè´Ÿæ•°ï¼Œæ‰€æœ‰ flex å…ƒç´ ä¸º 0ï¼Œç­‰æ¯”å‹ç¼©å‰©ä½™å…ƒç´ \n\n\t\t```javascript\n\t\tif (mainSpace < 0) {\n\t\t    // å¯¹è´Ÿçš„ mainSpaceï¼Œ æ‰€æœ‰è¯¥è¡Œ flex å­é¡¹ç­‰æ¯”ä¾‹ç¼©æ”¾ï¼ˆæœªè®¾ç½® flex-shrink é»˜è®¤å€¼æ˜¯1ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤æ‰€æœ‰çš„ flex å­é¡¹éƒ½ä¼šæ”¶ç¼©ï¼‰\n\t\t    const scale = style[mainSize] / (style[mainSize] - mainSpace)\n\t\t    const currentMain = mainBase\n\t\t    for (let i = 0; i < items.length; i ++) {\n\t\t      const item = items[i]\n\t\t      const itemStyle = getStyle(item)\n\t\t\t\n\t\t      if (itemStyle.flex) {\n\t\t        itemStyle[mainSize] = 0\n\t\t      }\n\t\t\t\n\t\t      itemStyle[mainSize] = itemStyle[mainSize] * scale\n\t\t\t\n\t\t      // flex å®¹å™¨è¿™ä¸€è¡Œå†…ï¼Œflex å­é¡¹æ’å¸ƒ\n\t\t      itemStyle[mainStart] = currentMain\n\t\t      itemStyle[mainEnd] = itemStyle[mainStart] + mainSign * itemStyle[mainSize]\n\t\t      currentMain = itemStyle[mainEnd]\n\t\t    }\n \t\t}\n\t\t```\n- [layout3.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/layout3.js)\n\t\t\n### ç¬¬å››æ­¥ï¼šè®¡ç®—äº¤å‰è½´\n- è®¡ç®—äº¤å‰è½´æ–¹å‘\n\t- æ ¹æ®æ¯ä¸€è¡Œä¸­æœ€å¤§å…ƒç´ å°ºå¯¸è®¡ç®—è¡Œé«˜\n\n\t\t```javascript\n\t\tif (!style[crossSize]) { // äº¤å‰è½´ï¼ŒcrossSize æœªè®¾å®šæ—¶é»˜è®¤ä¸º count flexLines æ¯è¡Œæœ€å¤§ crossSpace ä¹‹å’Œ \n\t\t    crossSpace = 0\n\t\t    elementStyle[crossSize] = 0\n\t\t    for (let i = 0; i < flexLines.length; i ++) {\n\t\t      elementStyle[crossSize] = elementStyle[crossSize] + flexLines[i].crossSpace\n\t\t    }\n\t\t} else { // è®¾å®šåï¼Œè®¡ç®—å‡º æœ€ç»ˆçš„ crossSpaceï¼Œä¸º crossSpace å‡å»æ¯è¡Œæœ€å¤§ crossSpaceï¼Œå‰©ä½™ç©ºé—´ï¼Œç”¨ä½œåˆ†é…\n\t\t    crossSpace = style[crossSize]\n\t\t    for (let i = 0; i < flexLines.length; i ++) {\n\t\t      crossSpace -= flexLines[i].crossSpace\n\t\t    }\n\t\t}\n\t\t```\n\t- æ ¹æ®è¡Œé«˜ flex-align å’Œ item-alignï¼Œç¡®å®šå…ƒç´ å…·ä½“ä½ç½®\n\n\t\t```javascript\n\t\t\n\t\tflexLines.forEach(function (items) {\n\t\t    let lineCrossSize = style.alignContent === 'stretch' ? // æ‹‰ä¼¸ flex å­é¡¹ï¼Œå¡«æ»¡äº¤å‰è½´\n\t\t      items.crossSpace + crossSpace / flexLines.length :\n\t\t      item.crossSpace\n\t\t\n\t\t    for (let i = 0; i < items.length; i ++) {\n\t\t      const item = items[i]\n\t\t      const itemStyle = getStyle(item)\n\t\t\n\t\t      const align = itemStyle.alignSelf || style.alignItems // align-selfæŒ‡æ§åˆ¶å•ç‹¬æŸä¸€ä¸ªflexå­é¡¹çš„å‚ç›´å¯¹é½æ–¹å¼\n\t\t      // align-itemså±æ€§ï¼Œè¡¨ç¤ºå­é¡¹ä»¬\n\t\t\n\t\t      if (itemStyle[crossSize] === null) {\n\t\t        itemStyle[crossSize] = (align === 'stretch') ?\n\t\t          lineCrossSize : 0\n\t\t      }\n\t\t\n\t\t      if (align === 'flex-start') {\n\t\t        itemStyle[crossStart] = crossBase\n\t\t        itemStyle[crossEnd] = itemStyle[crossStart] + crossSign * itemStyle[crossSize]\n\t\t      }\n\t\t\n\t\t      if (align === 'flex-end') {\n\t\t        itemStyle[crossEnd] = crossBase + crossSign * lineCrossSize\n\t\t        itemStyle[crossStart] = itemStyle[crossEnd] - crossSign * itemStyle[crossSize]\n\t\t      }\n\t\t\n\t\t      if (align === 'center') {\n\t\t        itemStyle[crossStart] = crossBase + crossSign * (lineCrossSize - itemStyle[crossSize]) / 2\n\t\t        itemStyle[crossEnd] = itemStyle[crossStart] + crossSign * itemStyle[crossSize]\n\t\t      }\n\t\t\n\t\t      if (align === 'stretch') {\n\t\t        itemStyle[crossStart] = crossBase\n\t\t        itemStyle[crossEnd] = crossBase + crossSign * ((itemStyle[crossSize] !== null && itemStyle[crossSize] !== (void 0)) ?\n\t\t          itemStyle[crossSize] : lineCrossSize)\n\t\t\n\t\t        itemStyle[crossSize] = crossSign * (itemStyle[crossEnd] - itemStyle[crossStart])\n\t\t      }\n\t\t    }\n\t\t    crossBase += crossSign * (lineCrossSize + step)\n\t  })\n\t\t```\n- è¿è¡Œç»“æœ\n\t- ![ç¬¬å››æ­¥è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/0e488c9e6c482d1d67f2a1872a58aa0d231450.png)\n\n- [layout4.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/layout4.js)\n\n\n\n\n## å‚è€ƒæ–‡çŒ®\n- [display: flex æ•™ç¨‹](https://www.zhangxinxu.com/wordpress/2018/10/display-flex-css3-css/#justify-content)\n- [Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡](http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html)\n- [MDN Flex](https://developer.mozilla.org/en-US/docs/Glossary/Flex)\n\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"Toy-Browser-DAY4","published":1,"updated":"2020-10-27T15:21:11.264Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u830021fw9kf1x24tlz","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>implementation of a toy-browser ğŸ™†</li>\n<li>å˜»å˜»å˜»ï¼Œæˆ‘ä»¬å°†è¦åœ¨åš toy-browser æµè§ˆå™¨ç›¸å…³æ’ç‰ˆé—®é¢˜å•¦</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6d5c67d3d5d0633bf667bd680f6dfb9489753.png\" alt=\"DOM with CSS\"></li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–\"><a href=\"#ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–\"></a>ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–</h3><ul>\n<li><p>æˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹ html ä»£ç æ®µ</p>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">maaa</span>=<span class=\"string\">a</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-id\">#container</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:300px</span>;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">display</span><span class=\"selector-pseudo\">:flex</span>;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(255</span>,255,255);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-id\">#container</span> <span class=\"selector-id\">#myid</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(255</span>,0,0)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-id\">#container</span> <span class=\"selector-class\">.c1</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">flex</span><span class=\"selector-pseudo\">:1</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(0</span>,255,0)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"container\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myid\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"c1\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>ä»£ç é€»è¾‘è‡ªé¡¶å‘ä¸‹</p>\n</li>\n<li><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ endTag çš„æ—¶å€™è¿›è¡Œ layout</p>\n<ul>\n<li>æˆ‘ä»¬åªå¤„ç† flexï¼Œå¯ä»¥ç®€åŒ–æˆåœ¨ endTag æ—¶ï¼Œè¿›è¡Œ layout å³å¯</li>\n</ul>\n</li>\n<li><p>computeCSS7.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> layout = <span class=\"built_in\">require</span>(<span class=\"string\">\"./layout.js\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ... some code</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">  <span class=\"comment\">// ... some code</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"startTag\"</span>) &#123;</span><br><span class=\"line\">\t    </span><br><span class=\"line\">\t <span class=\"comment\">// ... some code</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"endTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (top.tagName != token.tagName) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">\"Tag start end doesn't match\"</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log('pop', stack.pop())</span></span><br><span class=\"line\">      <span class=\"comment\">/** é‡åˆ° style æ ‡ç­¾æ—¶ï¼Œæ‰§è¡Œæ·»åŠ  CCS è§„åˆ™çš„æ“ä½œ */</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (top.tagName === <span class=\"string\">\"style\"</span>) &#123;</span><br><span class=\"line\">        addCSSRules(top.children[<span class=\"number\">0</span>].content)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      layout(top)</span><br><span class=\"line\">      stack.pop()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    currentTextNode = <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"text\"</span>) &#123;</span><br><span class=\"line\">\t    </span><br><span class=\"line\">\t <span class=\"comment\">// ... some code</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"flex-å¸ƒå±€åŸºç¡€æ¦‚å¿µ\"><a href=\"#flex-å¸ƒå±€åŸºç¡€æ¦‚å¿µ\" class=\"headerlink\" title=\"flex å¸ƒå±€åŸºç¡€æ¦‚å¿µ\"></a>flex å¸ƒå±€åŸºç¡€æ¦‚å¿µ</h4></li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/1e160d5f7cbdc299f68d432dcb19cca1137896.png\" alt=\"flex æ’ç‰ˆè§£é‡Šå›¾\"></p>\n<blockquote>\n<p>ç»™ div è¿™ç±»å—çŠ¶å…ƒç´ å…ƒç´ è®¾ç½® display: flex æˆ–è€…ç»™ span è¿™ç±»å†…è”å…ƒç´ è®¾ç½® display: inline-flex ï¼Œflex å¸ƒå±€å³åˆ›å»ºï¼å…¶ä¸­ï¼Œç›´æ¥è®¾ç½® display: flex æˆ–è€… display: inline-flex çš„å…ƒç´ ç§°ä¸º flex å®¹å™¨ï¼Œé‡Œé¢çš„å­å…ƒç´ ç§°ä¸º flex å­é¡¹ã€‚</p>\n</blockquote>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/0f5622ba2bab24f882be6007f6761a4422506.png\" alt=\"flex ç›¸å…³æ–¹æ³•æ¦‚è§ˆ\"></li>\n</ul>\n</li>\n<li><p>ç”±ä¸Š felx å¸ƒå±€ä¸­çš„ ä¸»è½´ï¼Œäº¤å‰è½´å›¾ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰å˜é‡</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mainSize, <span class=\"comment\">// ä¸»è½´size width / height</span></span><br><span class=\"line\">mainStart, <span class=\"comment\">// ä¸»è½´èµ·ç‚¹ left / right / top / bottom</span></span><br><span class=\"line\">mainEnd, <span class=\"comment\">// ä¸»è½´ç»ˆç‚¹ left / right / top / bottom</span></span><br><span class=\"line\">mainSign, <span class=\"comment\">// ä¸»è½´ç¬¦å·ä½ï¼Œç”¨äº æ˜¯å¦ reverse +1 / -1</span></span><br><span class=\"line\">mainBase, <span class=\"comment\">// ä¸»è½´å¼€å§‹çš„ä½ç½® 0 / style.width</span></span><br><span class=\"line\">crossSize, <span class=\"comment\">// äº¤å‰è½´size width / height</span></span><br><span class=\"line\">crossStart, <span class=\"comment\">// äº¤å‰è½´åæ ‡èµ·ç‚¹ left / right / top / bottom</span></span><br><span class=\"line\">crossEnd, <span class=\"comment\">// äº¤å‰è½´åæ ‡ç»ˆç‚¹ left / right / top / bottom</span></span><br><span class=\"line\">crossSign, <span class=\"comment\">// äº¤å‰è½´ç¬¦å·ä½ï¼Œç”¨äº æ˜¯å¦ reverse +1 / -1</span></span><br><span class=\"line\">crossBase; <span class=\"comment\">// äº¤å‰è½´å¼€å§‹çš„ä½ç½® 0 / style.width</span></span><br></pre></td></tr></table></figure></li>\n<li><p>å¤„ç† flex å¸ƒå±€ä¸­å±æ€§é»˜è®¤å€¼</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (!style.flexDirection || style.flexDirection === <span class=\"string\">'auto'</span>)</span><br><span class=\"line\">    style.flexDirection = <span class=\"string\">'row'</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!style.alignItems || style.alignItems === <span class=\"string\">'auto'</span>)</span><br><span class=\"line\">    style.alignItems = <span class=\"string\">'stretch'</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!style.justifyContent || style.justifyContent === <span class=\"string\">'auto'</span>)</span><br><span class=\"line\">    style.justifyContent = <span class=\"string\">'flex-start'</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!style.flexWrap || style.flexWrap === <span class=\"string\">'auto'</span>)</span><br><span class=\"line\">    style.flexWrap = <span class=\"string\">'nowrap'</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!style.alignContent || style.alignContent === <span class=\"string\">'auto'</span>)</span><br><span class=\"line\">    style.alignContent = <span class=\"string\">'center'</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"flex-direction\"><a href=\"#flex-direction\" class=\"headerlink\" title=\"flex-direction\"></a>flex-direction</h4></li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/bec69e2fc98cf7ebfaad21b5d166030361399.png\" alt=\"MDN flex-direction è¯­æ³•è§£é‡Š\"></p>\n<ul>\n<li><p>flex-direction: row</p>\n<ul>\n<li><p>é»˜è®¤å€¼ï¼Œæ˜¾ç¤ºä¸ºè¡Œã€‚æ–¹å‘ä¸ºå½“å‰æ–‡æ¡£æ°´å¹³æµæ–¹å‘ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä»å·¦å¾€å³ã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.flexDirection === <span class=\"string\">'row'</span>) &#123;</span><br><span class=\"line\">\tmainSize = <span class=\"string\">'width'</span></span><br><span class=\"line\">\tmainStart = <span class=\"string\">'left'</span></span><br><span class=\"line\">\tmainEnd = <span class=\"string\">'right'</span></span><br><span class=\"line\">\tmainSign = +<span class=\"number\">1</span></span><br><span class=\"line\">\tmainBase = <span class=\"number\">0</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\tcrossSize = <span class=\"string\">'height'</span></span><br><span class=\"line\">\tcrossStart = <span class=\"string\">'top'</span></span><br><span class=\"line\">\tcrossEnd = <span class=\"string\">'bottom'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>flex-direction: row-reverse</p>\n<ul>\n<li><p>æ˜¾ç¤ºä¸ºè¡Œã€‚ä½†æ–¹å‘å’Œrowå±æ€§å€¼æ˜¯åçš„ã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.flexDirection === <span class=\"string\">'row-reverse'</span>) &#123;</span><br><span class=\"line\">    mainSize = <span class=\"string\">'width'</span></span><br><span class=\"line\">    mainStart = <span class=\"string\">'right'</span></span><br><span class=\"line\">    mainEnd = <span class=\"string\">'left'</span></span><br><span class=\"line\">    mainSign = <span class=\"number\">-1</span></span><br><span class=\"line\">    mainBase = style.width</span><br><span class=\"line\"></span><br><span class=\"line\">    crossSize = <span class=\"string\">'height'</span></span><br><span class=\"line\">    crossStart = <span class=\"string\">'top'</span></span><br><span class=\"line\">    crossEnd = <span class=\"string\">'bottom'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>flex-direction: column</p>\n<ul>\n<li><p>æ˜¾ç¤ºä¸ºåˆ—ã€‚æ–¹å‘ä¸ºå½“å‰æ–‡æ¡£å‚ç›´æµæ–¹å‘ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä»ä¸Šè‡³ä¸‹ã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.flexDirection === <span class=\"string\">'column'</span>) &#123;</span><br><span class=\"line\">    mainSize = <span class=\"string\">'height'</span></span><br><span class=\"line\">    mainStart = <span class=\"string\">'top'</span></span><br><span class=\"line\">    mainEnd = <span class=\"string\">'bottom'</span></span><br><span class=\"line\">    mainSign = +<span class=\"number\">1</span></span><br><span class=\"line\">    mainBase = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    crossSize = <span class=\"string\">'width'</span></span><br><span class=\"line\">    crossStart = <span class=\"string\">'left'</span></span><br><span class=\"line\">    crossEnd = <span class=\"string\">'right'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>flex-direction: column-reverse</p>\n<ul>\n<li><p>æ˜¾ç¤ºä¸ºåˆ—ã€‚ä½†æ–¹å‘å’Œcolumnå±æ€§å€¼æ˜¯åçš„ã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.flexDirection === <span class=\"string\">'column-reverse'</span>) &#123;</span><br><span class=\"line\">    mainSize = <span class=\"string\">'height'</span></span><br><span class=\"line\">    mainStart = <span class=\"string\">'bottom'</span></span><br><span class=\"line\">    mainEnd = <span class=\"string\">'top'</span></span><br><span class=\"line\">    mainSign = <span class=\"number\">-1</span></span><br><span class=\"line\">    mainBase = style.height</span><br><span class=\"line\"></span><br><span class=\"line\">    crossSize = <span class=\"string\">'width'</span></span><br><span class=\"line\">    crossStart = <span class=\"string\">'left'</span></span><br><span class=\"line\">    crossEnd = <span class=\"string\">'right'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"flex-wrap\"><a href=\"#flex-wrap\" class=\"headerlink\" title=\"flex-wrap\"></a>flex-wrap</h4><ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/137acf28be957d3b145c9571e3af265462518.png\" alt=\"MDN flex-wrapè¯­æ³•è§£é‡Š\"></p>\n<ul>\n<li><p>flex-wrap: nowrap</p>\n<ul>\n<li><p>é»˜è®¤å€¼ï¼Œè¡¨ç¤ºå•è¡Œæ˜¾ç¤ºï¼Œä¸æ¢è¡Œã€‚äºæ˜¯å¾ˆå®¹æ˜“å‡ºç°å®½åº¦æº¢å‡ºçš„åœºæ™¯ï¼Œå…¶æ¸²æŸ“è¡¨ç°æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å¯¹CSS3å®½åº¦æœ‰ä¸€å®šäº†è§£ã€‚è¿™è¾¹æˆ‘ä»¬ç®€å•å¤„ç†ä¸ºï¼šï¼ˆä»¥æ°´å¹³å¸ƒå±€ä¸¾ä¾‹ï¼‰</p>\n<ul>\n<li><p>flex å­é¡¹å®½åº¦ width ä¹‹å’Œå¤§äº flex å®¹å™¨å®½åº¦ï¼Œåˆ™å†…å®¹æº¢å‡ºï¼Œè¡¨ç°å’Œ white-space: nowrap ç±»ä¼¼ã€‚</p>\n</li>\n<li><p>flex å­é¡¹å®½åº¦ width ä¹‹å’Œå¤§äº flex å®¹å™¨å®½åº¦ï¼Œåˆ™å†…å®¹ä¸æº¢å‡º</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crossBase = <span class=\"number\">0</span></span><br><span class=\"line\">crossSign = +<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>flex-wrap: wrap</p>\n<ul>\n<li><p>å®½åº¦ä¸è¶³æ¢è¡Œæ˜¾ç¤º</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crossBase = <span class=\"number\">0</span></span><br><span class=\"line\">crossSign = +<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>flex-wrap: wrap-reverse</p>\n<ul>\n<li><p>å®½åº¦ä¸è¶³æ¢è¡Œæ˜¾ç¤ºï¼Œä½†æ˜¯æ˜¯ä»ä¸‹å¾€ä¸Šå¼€å§‹ï¼Œä¹Ÿå°±æ˜¯åŸæœ¬æ¢è¡Œåœ¨ä¸‹é¢çš„å­é¡¹ç°åœ¨è·‘åˆ°ä¸Šé¢</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.flexWrap === <span class=\"string\">'wrap-reverse'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> temp = crossStart</span><br><span class=\"line\">    crossStart = crossEnd</span><br><span class=\"line\">    crossEnd = temp</span><br><span class=\"line\">    crossSign = <span class=\"number\">-1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/layout1.js\" target=\"_blank\" rel=\"noopener\">layout1.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></li>\n</ul>\n<h3 id=\"ç¬¬äºŒæ­¥ï¼šæ”¶é›†å…ƒç´ è¿›è¡Œ\"><a href=\"#ç¬¬äºŒæ­¥ï¼šæ”¶é›†å…ƒç´ è¿›è¡Œ\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ï¼šæ”¶é›†å…ƒç´ è¿›è¡Œ\"></a>ç¬¬äºŒæ­¥ï¼šæ”¶é›†å…ƒç´ è¿›è¡Œ</h3><ul>\n<li><p>flex å®¹å™¨æ²¡æœ‰è®¾ç½® mainSizeï¼Œç›´æ¥æ’‘å¼€ï¼Œcount flex å­é¡¹ mainSize</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> isAutoMainSize = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"comment\">// æ²¡æœ‰è®¾ç½® mainSize ç›´æ¥æ’‘å¼€</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!style[mainSize]) &#123; <span class=\"comment\">// auto sizing</span></span><br><span class=\"line\">     elementStyle[mainSize] = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i ++) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> item = items[i]</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (itemStyle[mainSize] !== <span class=\"literal\">null</span> || itemStyle[mainSize] !== (<span class=\"keyword\">void</span> <span class=\"number\">0</span>)) </span><br><span class=\"line\">\t  elementStyle[mainSize] = elementStyle[mainSize] + itemStyle[mainSize]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  isAutoMainSize = <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>flex å®¹å™¨ flex-wrap: no-wrap &amp;&amp; isAutoMainSizeï¼ŒmainSpace ä¸º0ï¼Œå…è®¸æ’‘å¤§ï¼Œ<strong>å¼ºè¡Œåˆ†è¿›ç¬¬ä¸€è¡Œ</strong></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.flexWrap === <span class=\"string\">'nowrap'</span> &amp;&amp; isAutoMainSize) &#123;</span><br><span class=\"line\">     mainSpace -= itemStyle[mainSize]</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (itemStyle[crossSize] !== <span class=\"literal\">null</span> &amp;&amp; itemStyle[crossSize] !== (<span class=\"keyword\">void</span> <span class=\"number\">0</span>)) &#123;</span><br><span class=\"line\">       crossSpace = <span class=\"built_in\">Math</span>.max(crossSpace, itemStyle[crossSize])</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     flexLine.push(item)</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>flex å­é¡¹ display ä¸º flexï¼Œç›´æ¥å¡è¿›å½“å‰è¡Œï¼ŒmainSpace ä¸ä½œå¤„ç†ï¼Œåç»­è‡ªé€‚åº”</p>\n<ul>\n<li><p>flex: none | auto | [ &lt;â€™flex-growâ€™&gt; &lt;â€™flex-shrinkâ€™&gt;? || &lt;â€™flex-basisâ€™&gt; ]</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (itemStyle.flex) &#123;</span><br><span class=\"line\">   flexLine.push(item)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>flex å®¹å™¨æ˜¯å¦æ¢è¡Œ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å½“å‰flex å­é¡¹ï¼Œå¤§äº flex mainSize,è‡ªé€‚åº”</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (itemStyle[mainSize] &gt; style[mainSize]) &#123;</span><br><span class=\"line\">    itemStyle[mainSize] = style[mainSize]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å½“å‰flex å­é¡¹ï¼Œå¤§äº flex å®¹å™¨å‰©ä½™ mainSpaceï¼Œå¦èµ·æ–°è¡Œ</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (mainSpace &lt; itemStyle[mainSize]) &#123;</span><br><span class=\"line\">    flexLine.mainSpace = mainSpace</span><br><span class=\"line\">    flexLine.crossSpace = crossSpace</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»ºæ–°è¡Œ</span></span><br><span class=\"line\">    flexLine = []</span><br><span class=\"line\">    flexLines.push(flexLine)</span><br><span class=\"line\">    flexLine.push(item)</span><br><span class=\"line\"></span><br><span class=\"line\">    mainSpace = style[mainSize]</span><br><span class=\"line\">    crossSpace = <span class=\"number\">0</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123; <span class=\"comment\">// æœªè¶…è¿‡ flex å®¹å™¨å‰©ä½™ mainSpaceï¼Œæ·»åŠ è¿›è¡Œ </span></span><br><span class=\"line\">    flexLine.push(item)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å¤„ç†äº¤å‰è½´ï¼Œåªéœ€è¦å– flex å­é¡¹æœ€å¤§ crossSize</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (itemStyle[crossSize] !== <span class=\"literal\">null</span> &amp;&amp; itemStyle[crossSize] !== (<span class=\"keyword\">void</span> <span class=\"number\">0</span>)) &#123;</span><br><span class=\"line\">    crossSpace = <span class=\"built_in\">Math</span>.max(crossSpace, itemStyle[crossSize])</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// flex å®¹å™¨å‰©ä½™ mainSpace</span></span><br><span class=\"line\">mainSpace -= itemStyle[mainSize]</span><br></pre></td></tr></table></figure></li>\n<li><p><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/layout2.js\" target=\"_blank\" rel=\"noopener\">layout2.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></p>\n</li>\n</ul>\n<h3 id=\"ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—ä¸»è½´\"><a href=\"#ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—ä¸»è½´\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—ä¸»è½´\"></a>ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—ä¸»è½´</h3><ul>\n<li><p>è®¡ç®—ä¸»è½´æ–¹å‘</p>\n<ul>\n<li><p>æ‰¾å‡ºæ‰€æœ‰ flex å­é¡¹ä¹Ÿä¸º flex å…ƒç´ </p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> item = items[i]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> itemStyle = getStyle(item)</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((itemStyle.flex !== <span class=\"literal\">null</span>) &amp;&amp; (itemStyle.flex !== (<span class=\"keyword\">void</span> <span class=\"number\">0</span>))) &#123;</span><br><span class=\"line\">      flexTotal += itemStyle.flex</span><br><span class=\"line\">      <span class=\"keyword\">continue</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>å­˜åœ¨ flex å­é¡¹ä¹Ÿä¸º flex</p>\n<ul>\n<li><p>å¡«å…… flexLine å‰©ä½™ mainSpace ç©ºé—´</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> currentMain = mainBase</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> item = items[i]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> itemStyle = getStyle(item)</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (itemStyle.flex) &#123;</span><br><span class=\"line\">    itemStyle[mainSize] = (mainSpace / flexTotal) * itemStyle.flex</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  itemStyle[mainStart] = currentMain</span><br><span class=\"line\">  itemStyle[mainEnd] = itemStyle[mainStart] + mainSign * itemStyle[mainSize]</span><br><span class=\"line\">  currentMain = itemStyle[mainEnd]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>ä¸å­˜åœ¨ flex å­é¡¹ä¹Ÿä¸º flexï¼ŒæŠŠä¸»è½´æ–¹å‘å‰©ä½™å°ºå¯¸æŒ‰æ¯”ä¾‹åˆ†é…ç»™è¿™äº›å…ƒç´ </p>\n</li>\n<li><p>justify-content: flex-start | flex-end | center | space-between | space-around | space-evenly;</p>\n<ul>\n<li><p>justify-content: flex-start</p>\n<ul>\n<li><p>é»˜è®¤å€¼</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (!style.justifyContent || style.justifyContent === <span class=\"string\">'auto'</span>)</span><br><span class=\"line\">    style.justifyContent = <span class=\"string\">'flex-start'</span></span><br></pre></td></tr></table></figure>\n\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.justifyContent === <span class=\"string\">'flex-start'</span>) &#123;</span><br><span class=\"line\">  currentMain = mainBase</span><br><span class=\"line\">  gap = <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>justify-content: flex-end</p>\n<ul>\n<li><p>é€»è¾‘CSSå±æ€§å€¼ï¼Œä¸é»˜è®¤æ–‡æ¡£æµæ–¹å‘ç›¸å</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.justifyContent === <span class=\"string\">'flex-start'</span>) &#123;</span><br><span class=\"line\">  currentMain = mainSpace * mainSign + mainBase</span><br><span class=\"line\">  gap = <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>justify-content: center</p>\n<ul>\n<li><p>å±…ä¸­å¯¹é½</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.justifyContent === <span class=\"string\">'center'</span>) &#123;</span><br><span class=\"line\">  currentMain = mainSpace / <span class=\"number\">2</span> * mainSign + mainBase</span><br><span class=\"line\">  gap = <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>justify-content: space-between</p>\n<ul>\n<li><p>è¡¨ç°ä¸ºä¸¤ç«¯å¯¹é½ã€‚between æ˜¯ä¸­é—´çš„æ„æ€ï¼Œæ„æ€æ˜¯å¤šä½™çš„ç©ºç™½é—´è·åªåœ¨å…ƒç´ ä¸­é—´åŒºåŸŸåˆ†é…</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.justifyContent === <span class=\"string\">'space-between'</span>) &#123;</span><br><span class=\"line\">  gap = mainSpace / (items.length - <span class=\"number\">1</span>) * mainSign</span><br><span class=\"line\">  currentMain = mainBase</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>justify-content: space-around</p>\n<ul>\n<li><p>around æ˜¯ç¯ç»•çš„æ„æ€ï¼Œæ„æ€æ˜¯æ¯ä¸ª flex å­é¡¹ä¸¤ä¾§éƒ½ç¯ç»•äº’ä¸å¹²æ‰°çš„ç­‰å®½çš„ç©ºç™½é—´è·ï¼Œæœ€ç»ˆè§†è§‰ä¸Šè¾¹ç¼˜ä¸¤ä¾§çš„ç©ºç™½åªæœ‰ä¸­é—´ç©ºç™½å®½åº¦ä¸€åŠ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.justifyContent === <span class=\"string\">'space-around'</span>) &#123;</span><br><span class=\"line\">  gap = mainSpace / items.length * mainSign</span><br><span class=\"line\">  currentMain = gap / <span class=\"number\">2</span> + mainBase</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>justify-content: space-evenly</p>\n<ul>\n<li><p>evenly æ˜¯åŒ€ç§°ã€å¹³ç­‰çš„æ„æ€ã€‚ä¹Ÿå°±æ˜¯è§†è§‰ä¸Šï¼Œæ¯ä¸ª flex å­é¡¹ä¸¤ä¾§ç©ºç™½é—´è·å®Œå…¨ç›¸ç­‰</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.justifyContent === <span class=\"string\">'space-evenly'</span>) &#123;</span><br><span class=\"line\">  gap = mainSpace / (items.length + <span class=\"number\">1</span>) * mainSign</span><br><span class=\"line\">  currentMain = gap + mainBase</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å¾ªç¯è®¡ç®— flex å­é¡¹ä½ç½®</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> item = items[i]</span><br><span class=\"line\">  itemStyle[mainStart] = currentMain</span><br><span class=\"line\">  itemStyle[mainEnd] = itemStyle[mainStart] + mainSign * itemStyle[mainSize]</span><br><span class=\"line\">  currentMain = itemStyle[mainEnd] + gap</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>è‹¥å‰©ä½™ç©ºé—´ä¸ºè´Ÿæ•°ï¼Œæ‰€æœ‰ flex å…ƒç´ ä¸º 0ï¼Œç­‰æ¯”å‹ç¼©å‰©ä½™å…ƒç´ </p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (mainSpace &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å¯¹è´Ÿçš„ mainSpaceï¼Œ æ‰€æœ‰è¯¥è¡Œ flex å­é¡¹ç­‰æ¯”ä¾‹ç¼©æ”¾ï¼ˆæœªè®¾ç½® flex-shrink é»˜è®¤å€¼æ˜¯1ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤æ‰€æœ‰çš„ flex å­é¡¹éƒ½ä¼šæ”¶ç¼©ï¼‰</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> scale = style[mainSize] / (style[mainSize] - mainSpace)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> currentMain = mainBase</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i ++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> item = items[i]</span><br><span class=\"line\">      <span class=\"keyword\">const</span> itemStyle = getStyle(item)</span><br><span class=\"line\">\t</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (itemStyle.flex) &#123;</span><br><span class=\"line\">        itemStyle[mainSize] = <span class=\"number\">0</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">      itemStyle[mainSize] = itemStyle[mainSize] * scale</span><br><span class=\"line\">\t</span><br><span class=\"line\">      <span class=\"comment\">// flex å®¹å™¨è¿™ä¸€è¡Œå†…ï¼Œflex å­é¡¹æ’å¸ƒ</span></span><br><span class=\"line\">      itemStyle[mainStart] = currentMain</span><br><span class=\"line\">      itemStyle[mainEnd] = itemStyle[mainStart] + mainSign * itemStyle[mainSize]</span><br><span class=\"line\">      currentMain = itemStyle[mainEnd]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/layout3.js\" target=\"_blank\" rel=\"noopener\">layout3.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></p>\n</li>\n</ul>\n<h3 id=\"ç¬¬å››æ­¥ï¼šè®¡ç®—äº¤å‰è½´\"><a href=\"#ç¬¬å››æ­¥ï¼šè®¡ç®—äº¤å‰è½´\" class=\"headerlink\" title=\"ç¬¬å››æ­¥ï¼šè®¡ç®—äº¤å‰è½´\"></a>ç¬¬å››æ­¥ï¼šè®¡ç®—äº¤å‰è½´</h3><ul>\n<li><p>è®¡ç®—äº¤å‰è½´æ–¹å‘</p>\n<ul>\n<li><p>æ ¹æ®æ¯ä¸€è¡Œä¸­æœ€å¤§å…ƒç´ å°ºå¯¸è®¡ç®—è¡Œé«˜</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (!style[crossSize]) &#123; <span class=\"comment\">// äº¤å‰è½´ï¼ŒcrossSize æœªè®¾å®šæ—¶é»˜è®¤ä¸º count flexLines æ¯è¡Œæœ€å¤§ crossSpace ä¹‹å’Œ </span></span><br><span class=\"line\">    crossSpace = <span class=\"number\">0</span></span><br><span class=\"line\">    elementStyle[crossSize] = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; flexLines.length; i ++) &#123;</span><br><span class=\"line\">      elementStyle[crossSize] = elementStyle[crossSize] + flexLines[i].crossSpace</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123; <span class=\"comment\">// è®¾å®šåï¼Œè®¡ç®—å‡º æœ€ç»ˆçš„ crossSpaceï¼Œä¸º crossSpace å‡å»æ¯è¡Œæœ€å¤§ crossSpaceï¼Œå‰©ä½™ç©ºé—´ï¼Œç”¨ä½œåˆ†é…</span></span><br><span class=\"line\">    crossSpace = style[crossSize]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; flexLines.length; i ++) &#123;</span><br><span class=\"line\">      crossSpace -= flexLines[i].crossSpace</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>æ ¹æ®è¡Œé«˜ flex-align å’Œ item-alignï¼Œç¡®å®šå…ƒç´ å…·ä½“ä½ç½®</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">flexLines.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">items</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> lineCrossSize = style.alignContent === <span class=\"string\">'stretch'</span> ? <span class=\"comment\">// æ‹‰ä¼¸ flex å­é¡¹ï¼Œå¡«æ»¡äº¤å‰è½´</span></span><br><span class=\"line\">      items.crossSpace + crossSpace / flexLines.length :</span><br><span class=\"line\">      item.crossSpace</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i ++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> item = items[i]</span><br><span class=\"line\">      <span class=\"keyword\">const</span> itemStyle = getStyle(item)</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">const</span> align = itemStyle.alignSelf || style.alignItems <span class=\"comment\">// align-selfæŒ‡æ§åˆ¶å•ç‹¬æŸä¸€ä¸ªflexå­é¡¹çš„å‚ç›´å¯¹é½æ–¹å¼</span></span><br><span class=\"line\">      <span class=\"comment\">// align-itemså±æ€§ï¼Œè¡¨ç¤ºå­é¡¹ä»¬</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (itemStyle[crossSize] === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        itemStyle[crossSize] = (align === <span class=\"string\">'stretch'</span>) ?</span><br><span class=\"line\">          lineCrossSize : <span class=\"number\">0</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (align === <span class=\"string\">'flex-start'</span>) &#123;</span><br><span class=\"line\">        itemStyle[crossStart] = crossBase</span><br><span class=\"line\">        itemStyle[crossEnd] = itemStyle[crossStart] + crossSign * itemStyle[crossSize]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (align === <span class=\"string\">'flex-end'</span>) &#123;</span><br><span class=\"line\">        itemStyle[crossEnd] = crossBase + crossSign * lineCrossSize</span><br><span class=\"line\">        itemStyle[crossStart] = itemStyle[crossEnd] - crossSign * itemStyle[crossSize]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (align === <span class=\"string\">'center'</span>) &#123;</span><br><span class=\"line\">        itemStyle[crossStart] = crossBase + crossSign * (lineCrossSize - itemStyle[crossSize]) / <span class=\"number\">2</span></span><br><span class=\"line\">        itemStyle[crossEnd] = itemStyle[crossStart] + crossSign * itemStyle[crossSize]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (align === <span class=\"string\">'stretch'</span>) &#123;</span><br><span class=\"line\">        itemStyle[crossStart] = crossBase</span><br><span class=\"line\">        itemStyle[crossEnd] = crossBase + crossSign * ((itemStyle[crossSize] !== <span class=\"literal\">null</span> &amp;&amp; itemStyle[crossSize] !== (<span class=\"keyword\">void</span> <span class=\"number\">0</span>)) ?</span><br><span class=\"line\">          itemStyle[crossSize] : lineCrossSize)</span><br><span class=\"line\"></span><br><span class=\"line\">        itemStyle[crossSize] = crossSign * (itemStyle[crossEnd] - itemStyle[crossStart])</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    crossBase += crossSign * (lineCrossSize + step)</span><br><span class=\"line\"> &#125;)</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/0e488c9e6c482d1d67f2a1872a58aa0d231450.png\" alt=\"ç¬¬å››æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/layout4.js\" target=\"_blank\" rel=\"noopener\">layout4.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></p>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"https://www.zhangxinxu.com/wordpress/2018/10/display-flex-css3-css/#justify-content\" target=\"_blank\" rel=\"noopener\">display: flex æ•™ç¨‹</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html\" target=\"_blank\" rel=\"noopener\">Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Flex\" target=\"_blank\" rel=\"noopener\">MDN Flex</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>implementation of a toy-browser ğŸ™†</li>\n<li>å˜»å˜»å˜»ï¼Œæˆ‘ä»¬å°†è¦åœ¨åš toy-browser æµè§ˆå™¨ç›¸å…³æ’ç‰ˆé—®é¢˜å•¦</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6d5c67d3d5d0633bf667bd680f6dfb9489753.png\" alt=\"DOM with CSS\"></li>\n</ul>","more":"<h3 id=\"ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–\"><a href=\"#ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–\"></a>ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–</h3><ul>\n<li><p>æˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹ html ä»£ç æ®µ</p>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">maaa</span>=<span class=\"string\">a</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-id\">#container</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:300px</span>;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">display</span><span class=\"selector-pseudo\">:flex</span>;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(255</span>,255,255);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-id\">#container</span> <span class=\"selector-id\">#myid</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(255</span>,0,0)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-id\">#container</span> <span class=\"selector-class\">.c1</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">flex</span><span class=\"selector-pseudo\">:1</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">background-color</span><span class=\"selector-pseudo\">:rgb(0</span>,255,0)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"container\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myid\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"c1\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>ä»£ç é€»è¾‘è‡ªé¡¶å‘ä¸‹</p>\n</li>\n<li><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ endTag çš„æ—¶å€™è¿›è¡Œ layout</p>\n<ul>\n<li>æˆ‘ä»¬åªå¤„ç† flexï¼Œå¯ä»¥ç®€åŒ–æˆåœ¨ endTag æ—¶ï¼Œè¿›è¡Œ layout å³å¯</li>\n</ul>\n</li>\n<li><p>computeCSS7.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> layout = <span class=\"built_in\">require</span>(<span class=\"string\">\"./layout.js\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ... some code</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emit</span>(<span class=\"params\">token</span>) </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">  <span class=\"comment\">// ... some code</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"startTag\"</span>) &#123;</span><br><span class=\"line\">\t    </span><br><span class=\"line\">\t <span class=\"comment\">// ... some code</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"endTag\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (top.tagName != token.tagName) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">\"Tag start end doesn't match\"</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log('pop', stack.pop())</span></span><br><span class=\"line\">      <span class=\"comment\">/** é‡åˆ° style æ ‡ç­¾æ—¶ï¼Œæ‰§è¡Œæ·»åŠ  CCS è§„åˆ™çš„æ“ä½œ */</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (top.tagName === <span class=\"string\">\"style\"</span>) &#123;</span><br><span class=\"line\">        addCSSRules(top.children[<span class=\"number\">0</span>].content)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      layout(top)</span><br><span class=\"line\">      stack.pop()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    currentTextNode = <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (token.type == <span class=\"string\">\"text\"</span>) &#123;</span><br><span class=\"line\">\t    </span><br><span class=\"line\">\t <span class=\"comment\">// ... some code</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"flex-å¸ƒå±€åŸºç¡€æ¦‚å¿µ\"><a href=\"#flex-å¸ƒå±€åŸºç¡€æ¦‚å¿µ\" class=\"headerlink\" title=\"flex å¸ƒå±€åŸºç¡€æ¦‚å¿µ\"></a>flex å¸ƒå±€åŸºç¡€æ¦‚å¿µ</h4></li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/1e160d5f7cbdc299f68d432dcb19cca1137896.png\" alt=\"flex æ’ç‰ˆè§£é‡Šå›¾\"></p>\n<blockquote>\n<p>ç»™ div è¿™ç±»å—çŠ¶å…ƒç´ å…ƒç´ è®¾ç½® display: flex æˆ–è€…ç»™ span è¿™ç±»å†…è”å…ƒç´ è®¾ç½® display: inline-flex ï¼Œflex å¸ƒå±€å³åˆ›å»ºï¼å…¶ä¸­ï¼Œç›´æ¥è®¾ç½® display: flex æˆ–è€… display: inline-flex çš„å…ƒç´ ç§°ä¸º flex å®¹å™¨ï¼Œé‡Œé¢çš„å­å…ƒç´ ç§°ä¸º flex å­é¡¹ã€‚</p>\n</blockquote>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/0f5622ba2bab24f882be6007f6761a4422506.png\" alt=\"flex ç›¸å…³æ–¹æ³•æ¦‚è§ˆ\"></li>\n</ul>\n</li>\n<li><p>ç”±ä¸Š felx å¸ƒå±€ä¸­çš„ ä¸»è½´ï¼Œäº¤å‰è½´å›¾ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰å˜é‡</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mainSize, <span class=\"comment\">// ä¸»è½´size width / height</span></span><br><span class=\"line\">mainStart, <span class=\"comment\">// ä¸»è½´èµ·ç‚¹ left / right / top / bottom</span></span><br><span class=\"line\">mainEnd, <span class=\"comment\">// ä¸»è½´ç»ˆç‚¹ left / right / top / bottom</span></span><br><span class=\"line\">mainSign, <span class=\"comment\">// ä¸»è½´ç¬¦å·ä½ï¼Œç”¨äº æ˜¯å¦ reverse +1 / -1</span></span><br><span class=\"line\">mainBase, <span class=\"comment\">// ä¸»è½´å¼€å§‹çš„ä½ç½® 0 / style.width</span></span><br><span class=\"line\">crossSize, <span class=\"comment\">// äº¤å‰è½´size width / height</span></span><br><span class=\"line\">crossStart, <span class=\"comment\">// äº¤å‰è½´åæ ‡èµ·ç‚¹ left / right / top / bottom</span></span><br><span class=\"line\">crossEnd, <span class=\"comment\">// äº¤å‰è½´åæ ‡ç»ˆç‚¹ left / right / top / bottom</span></span><br><span class=\"line\">crossSign, <span class=\"comment\">// äº¤å‰è½´ç¬¦å·ä½ï¼Œç”¨äº æ˜¯å¦ reverse +1 / -1</span></span><br><span class=\"line\">crossBase; <span class=\"comment\">// äº¤å‰è½´å¼€å§‹çš„ä½ç½® 0 / style.width</span></span><br></pre></td></tr></table></figure></li>\n<li><p>å¤„ç† flex å¸ƒå±€ä¸­å±æ€§é»˜è®¤å€¼</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (!style.flexDirection || style.flexDirection === <span class=\"string\">'auto'</span>)</span><br><span class=\"line\">    style.flexDirection = <span class=\"string\">'row'</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!style.alignItems || style.alignItems === <span class=\"string\">'auto'</span>)</span><br><span class=\"line\">    style.alignItems = <span class=\"string\">'stretch'</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!style.justifyContent || style.justifyContent === <span class=\"string\">'auto'</span>)</span><br><span class=\"line\">    style.justifyContent = <span class=\"string\">'flex-start'</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!style.flexWrap || style.flexWrap === <span class=\"string\">'auto'</span>)</span><br><span class=\"line\">    style.flexWrap = <span class=\"string\">'nowrap'</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!style.alignContent || style.alignContent === <span class=\"string\">'auto'</span>)</span><br><span class=\"line\">    style.alignContent = <span class=\"string\">'center'</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"flex-direction\"><a href=\"#flex-direction\" class=\"headerlink\" title=\"flex-direction\"></a>flex-direction</h4></li>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/bec69e2fc98cf7ebfaad21b5d166030361399.png\" alt=\"MDN flex-direction è¯­æ³•è§£é‡Š\"></p>\n<ul>\n<li><p>flex-direction: row</p>\n<ul>\n<li><p>é»˜è®¤å€¼ï¼Œæ˜¾ç¤ºä¸ºè¡Œã€‚æ–¹å‘ä¸ºå½“å‰æ–‡æ¡£æ°´å¹³æµæ–¹å‘ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä»å·¦å¾€å³ã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.flexDirection === <span class=\"string\">'row'</span>) &#123;</span><br><span class=\"line\">\tmainSize = <span class=\"string\">'width'</span></span><br><span class=\"line\">\tmainStart = <span class=\"string\">'left'</span></span><br><span class=\"line\">\tmainEnd = <span class=\"string\">'right'</span></span><br><span class=\"line\">\tmainSign = +<span class=\"number\">1</span></span><br><span class=\"line\">\tmainBase = <span class=\"number\">0</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\tcrossSize = <span class=\"string\">'height'</span></span><br><span class=\"line\">\tcrossStart = <span class=\"string\">'top'</span></span><br><span class=\"line\">\tcrossEnd = <span class=\"string\">'bottom'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>flex-direction: row-reverse</p>\n<ul>\n<li><p>æ˜¾ç¤ºä¸ºè¡Œã€‚ä½†æ–¹å‘å’Œrowå±æ€§å€¼æ˜¯åçš„ã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.flexDirection === <span class=\"string\">'row-reverse'</span>) &#123;</span><br><span class=\"line\">    mainSize = <span class=\"string\">'width'</span></span><br><span class=\"line\">    mainStart = <span class=\"string\">'right'</span></span><br><span class=\"line\">    mainEnd = <span class=\"string\">'left'</span></span><br><span class=\"line\">    mainSign = <span class=\"number\">-1</span></span><br><span class=\"line\">    mainBase = style.width</span><br><span class=\"line\"></span><br><span class=\"line\">    crossSize = <span class=\"string\">'height'</span></span><br><span class=\"line\">    crossStart = <span class=\"string\">'top'</span></span><br><span class=\"line\">    crossEnd = <span class=\"string\">'bottom'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>flex-direction: column</p>\n<ul>\n<li><p>æ˜¾ç¤ºä¸ºåˆ—ã€‚æ–¹å‘ä¸ºå½“å‰æ–‡æ¡£å‚ç›´æµæ–¹å‘ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä»ä¸Šè‡³ä¸‹ã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.flexDirection === <span class=\"string\">'column'</span>) &#123;</span><br><span class=\"line\">    mainSize = <span class=\"string\">'height'</span></span><br><span class=\"line\">    mainStart = <span class=\"string\">'top'</span></span><br><span class=\"line\">    mainEnd = <span class=\"string\">'bottom'</span></span><br><span class=\"line\">    mainSign = +<span class=\"number\">1</span></span><br><span class=\"line\">    mainBase = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    crossSize = <span class=\"string\">'width'</span></span><br><span class=\"line\">    crossStart = <span class=\"string\">'left'</span></span><br><span class=\"line\">    crossEnd = <span class=\"string\">'right'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>flex-direction: column-reverse</p>\n<ul>\n<li><p>æ˜¾ç¤ºä¸ºåˆ—ã€‚ä½†æ–¹å‘å’Œcolumnå±æ€§å€¼æ˜¯åçš„ã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.flexDirection === <span class=\"string\">'column-reverse'</span>) &#123;</span><br><span class=\"line\">    mainSize = <span class=\"string\">'height'</span></span><br><span class=\"line\">    mainStart = <span class=\"string\">'bottom'</span></span><br><span class=\"line\">    mainEnd = <span class=\"string\">'top'</span></span><br><span class=\"line\">    mainSign = <span class=\"number\">-1</span></span><br><span class=\"line\">    mainBase = style.height</span><br><span class=\"line\"></span><br><span class=\"line\">    crossSize = <span class=\"string\">'width'</span></span><br><span class=\"line\">    crossStart = <span class=\"string\">'left'</span></span><br><span class=\"line\">    crossEnd = <span class=\"string\">'right'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"flex-wrap\"><a href=\"#flex-wrap\" class=\"headerlink\" title=\"flex-wrap\"></a>flex-wrap</h4><ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/137acf28be957d3b145c9571e3af265462518.png\" alt=\"MDN flex-wrapè¯­æ³•è§£é‡Š\"></p>\n<ul>\n<li><p>flex-wrap: nowrap</p>\n<ul>\n<li><p>é»˜è®¤å€¼ï¼Œè¡¨ç¤ºå•è¡Œæ˜¾ç¤ºï¼Œä¸æ¢è¡Œã€‚äºæ˜¯å¾ˆå®¹æ˜“å‡ºç°å®½åº¦æº¢å‡ºçš„åœºæ™¯ï¼Œå…¶æ¸²æŸ“è¡¨ç°æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å¯¹CSS3å®½åº¦æœ‰ä¸€å®šäº†è§£ã€‚è¿™è¾¹æˆ‘ä»¬ç®€å•å¤„ç†ä¸ºï¼šï¼ˆä»¥æ°´å¹³å¸ƒå±€ä¸¾ä¾‹ï¼‰</p>\n<ul>\n<li><p>flex å­é¡¹å®½åº¦ width ä¹‹å’Œå¤§äº flex å®¹å™¨å®½åº¦ï¼Œåˆ™å†…å®¹æº¢å‡ºï¼Œè¡¨ç°å’Œ white-space: nowrap ç±»ä¼¼ã€‚</p>\n</li>\n<li><p>flex å­é¡¹å®½åº¦ width ä¹‹å’Œå¤§äº flex å®¹å™¨å®½åº¦ï¼Œåˆ™å†…å®¹ä¸æº¢å‡º</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crossBase = <span class=\"number\">0</span></span><br><span class=\"line\">crossSign = +<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>flex-wrap: wrap</p>\n<ul>\n<li><p>å®½åº¦ä¸è¶³æ¢è¡Œæ˜¾ç¤º</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crossBase = <span class=\"number\">0</span></span><br><span class=\"line\">crossSign = +<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>flex-wrap: wrap-reverse</p>\n<ul>\n<li><p>å®½åº¦ä¸è¶³æ¢è¡Œæ˜¾ç¤ºï¼Œä½†æ˜¯æ˜¯ä»ä¸‹å¾€ä¸Šå¼€å§‹ï¼Œä¹Ÿå°±æ˜¯åŸæœ¬æ¢è¡Œåœ¨ä¸‹é¢çš„å­é¡¹ç°åœ¨è·‘åˆ°ä¸Šé¢</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.flexWrap === <span class=\"string\">'wrap-reverse'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> temp = crossStart</span><br><span class=\"line\">    crossStart = crossEnd</span><br><span class=\"line\">    crossEnd = temp</span><br><span class=\"line\">    crossSign = <span class=\"number\">-1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/layout1.js\" target=\"_blank\" rel=\"noopener\">layout1.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></li>\n</ul>\n<h3 id=\"ç¬¬äºŒæ­¥ï¼šæ”¶é›†å…ƒç´ è¿›è¡Œ\"><a href=\"#ç¬¬äºŒæ­¥ï¼šæ”¶é›†å…ƒç´ è¿›è¡Œ\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ï¼šæ”¶é›†å…ƒç´ è¿›è¡Œ\"></a>ç¬¬äºŒæ­¥ï¼šæ”¶é›†å…ƒç´ è¿›è¡Œ</h3><ul>\n<li><p>flex å®¹å™¨æ²¡æœ‰è®¾ç½® mainSizeï¼Œç›´æ¥æ’‘å¼€ï¼Œcount flex å­é¡¹ mainSize</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> isAutoMainSize = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"comment\">// æ²¡æœ‰è®¾ç½® mainSize ç›´æ¥æ’‘å¼€</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!style[mainSize]) &#123; <span class=\"comment\">// auto sizing</span></span><br><span class=\"line\">     elementStyle[mainSize] = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i ++) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> item = items[i]</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (itemStyle[mainSize] !== <span class=\"literal\">null</span> || itemStyle[mainSize] !== (<span class=\"keyword\">void</span> <span class=\"number\">0</span>)) </span><br><span class=\"line\">\t  elementStyle[mainSize] = elementStyle[mainSize] + itemStyle[mainSize]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  isAutoMainSize = <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>flex å®¹å™¨ flex-wrap: no-wrap &amp;&amp; isAutoMainSizeï¼ŒmainSpace ä¸º0ï¼Œå…è®¸æ’‘å¤§ï¼Œ<strong>å¼ºè¡Œåˆ†è¿›ç¬¬ä¸€è¡Œ</strong></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.flexWrap === <span class=\"string\">'nowrap'</span> &amp;&amp; isAutoMainSize) &#123;</span><br><span class=\"line\">     mainSpace -= itemStyle[mainSize]</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (itemStyle[crossSize] !== <span class=\"literal\">null</span> &amp;&amp; itemStyle[crossSize] !== (<span class=\"keyword\">void</span> <span class=\"number\">0</span>)) &#123;</span><br><span class=\"line\">       crossSpace = <span class=\"built_in\">Math</span>.max(crossSpace, itemStyle[crossSize])</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     flexLine.push(item)</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>flex å­é¡¹ display ä¸º flexï¼Œç›´æ¥å¡è¿›å½“å‰è¡Œï¼ŒmainSpace ä¸ä½œå¤„ç†ï¼Œåç»­è‡ªé€‚åº”</p>\n<ul>\n<li><p>flex: none | auto | [ &lt;â€™flex-growâ€™&gt; &lt;â€™flex-shrinkâ€™&gt;? || &lt;â€™flex-basisâ€™&gt; ]</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (itemStyle.flex) &#123;</span><br><span class=\"line\">   flexLine.push(item)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>flex å®¹å™¨æ˜¯å¦æ¢è¡Œ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å½“å‰flex å­é¡¹ï¼Œå¤§äº flex mainSize,è‡ªé€‚åº”</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (itemStyle[mainSize] &gt; style[mainSize]) &#123;</span><br><span class=\"line\">    itemStyle[mainSize] = style[mainSize]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å½“å‰flex å­é¡¹ï¼Œå¤§äº flex å®¹å™¨å‰©ä½™ mainSpaceï¼Œå¦èµ·æ–°è¡Œ</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (mainSpace &lt; itemStyle[mainSize]) &#123;</span><br><span class=\"line\">    flexLine.mainSpace = mainSpace</span><br><span class=\"line\">    flexLine.crossSpace = crossSpace</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»ºæ–°è¡Œ</span></span><br><span class=\"line\">    flexLine = []</span><br><span class=\"line\">    flexLines.push(flexLine)</span><br><span class=\"line\">    flexLine.push(item)</span><br><span class=\"line\"></span><br><span class=\"line\">    mainSpace = style[mainSize]</span><br><span class=\"line\">    crossSpace = <span class=\"number\">0</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123; <span class=\"comment\">// æœªè¶…è¿‡ flex å®¹å™¨å‰©ä½™ mainSpaceï¼Œæ·»åŠ è¿›è¡Œ </span></span><br><span class=\"line\">    flexLine.push(item)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å¤„ç†äº¤å‰è½´ï¼Œåªéœ€è¦å– flex å­é¡¹æœ€å¤§ crossSize</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (itemStyle[crossSize] !== <span class=\"literal\">null</span> &amp;&amp; itemStyle[crossSize] !== (<span class=\"keyword\">void</span> <span class=\"number\">0</span>)) &#123;</span><br><span class=\"line\">    crossSpace = <span class=\"built_in\">Math</span>.max(crossSpace, itemStyle[crossSize])</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// flex å®¹å™¨å‰©ä½™ mainSpace</span></span><br><span class=\"line\">mainSpace -= itemStyle[mainSize]</span><br></pre></td></tr></table></figure></li>\n<li><p><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/layout2.js\" target=\"_blank\" rel=\"noopener\">layout2.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></p>\n</li>\n</ul>\n<h3 id=\"ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—ä¸»è½´\"><a href=\"#ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—ä¸»è½´\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—ä¸»è½´\"></a>ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—ä¸»è½´</h3><ul>\n<li><p>è®¡ç®—ä¸»è½´æ–¹å‘</p>\n<ul>\n<li><p>æ‰¾å‡ºæ‰€æœ‰ flex å­é¡¹ä¹Ÿä¸º flex å…ƒç´ </p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> item = items[i]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> itemStyle = getStyle(item)</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((itemStyle.flex !== <span class=\"literal\">null</span>) &amp;&amp; (itemStyle.flex !== (<span class=\"keyword\">void</span> <span class=\"number\">0</span>))) &#123;</span><br><span class=\"line\">      flexTotal += itemStyle.flex</span><br><span class=\"line\">      <span class=\"keyword\">continue</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>å­˜åœ¨ flex å­é¡¹ä¹Ÿä¸º flex</p>\n<ul>\n<li><p>å¡«å…… flexLine å‰©ä½™ mainSpace ç©ºé—´</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> currentMain = mainBase</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> item = items[i]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> itemStyle = getStyle(item)</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (itemStyle.flex) &#123;</span><br><span class=\"line\">    itemStyle[mainSize] = (mainSpace / flexTotal) * itemStyle.flex</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  itemStyle[mainStart] = currentMain</span><br><span class=\"line\">  itemStyle[mainEnd] = itemStyle[mainStart] + mainSign * itemStyle[mainSize]</span><br><span class=\"line\">  currentMain = itemStyle[mainEnd]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>ä¸å­˜åœ¨ flex å­é¡¹ä¹Ÿä¸º flexï¼ŒæŠŠä¸»è½´æ–¹å‘å‰©ä½™å°ºå¯¸æŒ‰æ¯”ä¾‹åˆ†é…ç»™è¿™äº›å…ƒç´ </p>\n</li>\n<li><p>justify-content: flex-start | flex-end | center | space-between | space-around | space-evenly;</p>\n<ul>\n<li><p>justify-content: flex-start</p>\n<ul>\n<li><p>é»˜è®¤å€¼</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (!style.justifyContent || style.justifyContent === <span class=\"string\">'auto'</span>)</span><br><span class=\"line\">    style.justifyContent = <span class=\"string\">'flex-start'</span></span><br></pre></td></tr></table></figure>\n\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.justifyContent === <span class=\"string\">'flex-start'</span>) &#123;</span><br><span class=\"line\">  currentMain = mainBase</span><br><span class=\"line\">  gap = <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>justify-content: flex-end</p>\n<ul>\n<li><p>é€»è¾‘CSSå±æ€§å€¼ï¼Œä¸é»˜è®¤æ–‡æ¡£æµæ–¹å‘ç›¸å</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.justifyContent === <span class=\"string\">'flex-start'</span>) &#123;</span><br><span class=\"line\">  currentMain = mainSpace * mainSign + mainBase</span><br><span class=\"line\">  gap = <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>justify-content: center</p>\n<ul>\n<li><p>å±…ä¸­å¯¹é½</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.justifyContent === <span class=\"string\">'center'</span>) &#123;</span><br><span class=\"line\">  currentMain = mainSpace / <span class=\"number\">2</span> * mainSign + mainBase</span><br><span class=\"line\">  gap = <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>justify-content: space-between</p>\n<ul>\n<li><p>è¡¨ç°ä¸ºä¸¤ç«¯å¯¹é½ã€‚between æ˜¯ä¸­é—´çš„æ„æ€ï¼Œæ„æ€æ˜¯å¤šä½™çš„ç©ºç™½é—´è·åªåœ¨å…ƒç´ ä¸­é—´åŒºåŸŸåˆ†é…</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.justifyContent === <span class=\"string\">'space-between'</span>) &#123;</span><br><span class=\"line\">  gap = mainSpace / (items.length - <span class=\"number\">1</span>) * mainSign</span><br><span class=\"line\">  currentMain = mainBase</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>justify-content: space-around</p>\n<ul>\n<li><p>around æ˜¯ç¯ç»•çš„æ„æ€ï¼Œæ„æ€æ˜¯æ¯ä¸ª flex å­é¡¹ä¸¤ä¾§éƒ½ç¯ç»•äº’ä¸å¹²æ‰°çš„ç­‰å®½çš„ç©ºç™½é—´è·ï¼Œæœ€ç»ˆè§†è§‰ä¸Šè¾¹ç¼˜ä¸¤ä¾§çš„ç©ºç™½åªæœ‰ä¸­é—´ç©ºç™½å®½åº¦ä¸€åŠ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.justifyContent === <span class=\"string\">'space-around'</span>) &#123;</span><br><span class=\"line\">  gap = mainSpace / items.length * mainSign</span><br><span class=\"line\">  currentMain = gap / <span class=\"number\">2</span> + mainBase</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>justify-content: space-evenly</p>\n<ul>\n<li><p>evenly æ˜¯åŒ€ç§°ã€å¹³ç­‰çš„æ„æ€ã€‚ä¹Ÿå°±æ˜¯è§†è§‰ä¸Šï¼Œæ¯ä¸ª flex å­é¡¹ä¸¤ä¾§ç©ºç™½é—´è·å®Œå…¨ç›¸ç­‰</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (style.justifyContent === <span class=\"string\">'space-evenly'</span>) &#123;</span><br><span class=\"line\">  gap = mainSpace / (items.length + <span class=\"number\">1</span>) * mainSign</span><br><span class=\"line\">  currentMain = gap + mainBase</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å¾ªç¯è®¡ç®— flex å­é¡¹ä½ç½®</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> item = items[i]</span><br><span class=\"line\">  itemStyle[mainStart] = currentMain</span><br><span class=\"line\">  itemStyle[mainEnd] = itemStyle[mainStart] + mainSign * itemStyle[mainSize]</span><br><span class=\"line\">  currentMain = itemStyle[mainEnd] + gap</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>è‹¥å‰©ä½™ç©ºé—´ä¸ºè´Ÿæ•°ï¼Œæ‰€æœ‰ flex å…ƒç´ ä¸º 0ï¼Œç­‰æ¯”å‹ç¼©å‰©ä½™å…ƒç´ </p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (mainSpace &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å¯¹è´Ÿçš„ mainSpaceï¼Œ æ‰€æœ‰è¯¥è¡Œ flex å­é¡¹ç­‰æ¯”ä¾‹ç¼©æ”¾ï¼ˆæœªè®¾ç½® flex-shrink é»˜è®¤å€¼æ˜¯1ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤æ‰€æœ‰çš„ flex å­é¡¹éƒ½ä¼šæ”¶ç¼©ï¼‰</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> scale = style[mainSize] / (style[mainSize] - mainSpace)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> currentMain = mainBase</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i ++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> item = items[i]</span><br><span class=\"line\">      <span class=\"keyword\">const</span> itemStyle = getStyle(item)</span><br><span class=\"line\">\t</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (itemStyle.flex) &#123;</span><br><span class=\"line\">        itemStyle[mainSize] = <span class=\"number\">0</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">      itemStyle[mainSize] = itemStyle[mainSize] * scale</span><br><span class=\"line\">\t</span><br><span class=\"line\">      <span class=\"comment\">// flex å®¹å™¨è¿™ä¸€è¡Œå†…ï¼Œflex å­é¡¹æ’å¸ƒ</span></span><br><span class=\"line\">      itemStyle[mainStart] = currentMain</span><br><span class=\"line\">      itemStyle[mainEnd] = itemStyle[mainStart] + mainSign * itemStyle[mainSize]</span><br><span class=\"line\">      currentMain = itemStyle[mainEnd]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/layout3.js\" target=\"_blank\" rel=\"noopener\">layout3.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></p>\n</li>\n</ul>\n<h3 id=\"ç¬¬å››æ­¥ï¼šè®¡ç®—äº¤å‰è½´\"><a href=\"#ç¬¬å››æ­¥ï¼šè®¡ç®—äº¤å‰è½´\" class=\"headerlink\" title=\"ç¬¬å››æ­¥ï¼šè®¡ç®—äº¤å‰è½´\"></a>ç¬¬å››æ­¥ï¼šè®¡ç®—äº¤å‰è½´</h3><ul>\n<li><p>è®¡ç®—äº¤å‰è½´æ–¹å‘</p>\n<ul>\n<li><p>æ ¹æ®æ¯ä¸€è¡Œä¸­æœ€å¤§å…ƒç´ å°ºå¯¸è®¡ç®—è¡Œé«˜</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (!style[crossSize]) &#123; <span class=\"comment\">// äº¤å‰è½´ï¼ŒcrossSize æœªè®¾å®šæ—¶é»˜è®¤ä¸º count flexLines æ¯è¡Œæœ€å¤§ crossSpace ä¹‹å’Œ </span></span><br><span class=\"line\">    crossSpace = <span class=\"number\">0</span></span><br><span class=\"line\">    elementStyle[crossSize] = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; flexLines.length; i ++) &#123;</span><br><span class=\"line\">      elementStyle[crossSize] = elementStyle[crossSize] + flexLines[i].crossSpace</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123; <span class=\"comment\">// è®¾å®šåï¼Œè®¡ç®—å‡º æœ€ç»ˆçš„ crossSpaceï¼Œä¸º crossSpace å‡å»æ¯è¡Œæœ€å¤§ crossSpaceï¼Œå‰©ä½™ç©ºé—´ï¼Œç”¨ä½œåˆ†é…</span></span><br><span class=\"line\">    crossSpace = style[crossSize]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; flexLines.length; i ++) &#123;</span><br><span class=\"line\">      crossSpace -= flexLines[i].crossSpace</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>æ ¹æ®è¡Œé«˜ flex-align å’Œ item-alignï¼Œç¡®å®šå…ƒç´ å…·ä½“ä½ç½®</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">flexLines.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">items</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> lineCrossSize = style.alignContent === <span class=\"string\">'stretch'</span> ? <span class=\"comment\">// æ‹‰ä¼¸ flex å­é¡¹ï¼Œå¡«æ»¡äº¤å‰è½´</span></span><br><span class=\"line\">      items.crossSpace + crossSpace / flexLines.length :</span><br><span class=\"line\">      item.crossSpace</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i ++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> item = items[i]</span><br><span class=\"line\">      <span class=\"keyword\">const</span> itemStyle = getStyle(item)</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">const</span> align = itemStyle.alignSelf || style.alignItems <span class=\"comment\">// align-selfæŒ‡æ§åˆ¶å•ç‹¬æŸä¸€ä¸ªflexå­é¡¹çš„å‚ç›´å¯¹é½æ–¹å¼</span></span><br><span class=\"line\">      <span class=\"comment\">// align-itemså±æ€§ï¼Œè¡¨ç¤ºå­é¡¹ä»¬</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (itemStyle[crossSize] === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        itemStyle[crossSize] = (align === <span class=\"string\">'stretch'</span>) ?</span><br><span class=\"line\">          lineCrossSize : <span class=\"number\">0</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (align === <span class=\"string\">'flex-start'</span>) &#123;</span><br><span class=\"line\">        itemStyle[crossStart] = crossBase</span><br><span class=\"line\">        itemStyle[crossEnd] = itemStyle[crossStart] + crossSign * itemStyle[crossSize]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (align === <span class=\"string\">'flex-end'</span>) &#123;</span><br><span class=\"line\">        itemStyle[crossEnd] = crossBase + crossSign * lineCrossSize</span><br><span class=\"line\">        itemStyle[crossStart] = itemStyle[crossEnd] - crossSign * itemStyle[crossSize]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (align === <span class=\"string\">'center'</span>) &#123;</span><br><span class=\"line\">        itemStyle[crossStart] = crossBase + crossSign * (lineCrossSize - itemStyle[crossSize]) / <span class=\"number\">2</span></span><br><span class=\"line\">        itemStyle[crossEnd] = itemStyle[crossStart] + crossSign * itemStyle[crossSize]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (align === <span class=\"string\">'stretch'</span>) &#123;</span><br><span class=\"line\">        itemStyle[crossStart] = crossBase</span><br><span class=\"line\">        itemStyle[crossEnd] = crossBase + crossSign * ((itemStyle[crossSize] !== <span class=\"literal\">null</span> &amp;&amp; itemStyle[crossSize] !== (<span class=\"keyword\">void</span> <span class=\"number\">0</span>)) ?</span><br><span class=\"line\">          itemStyle[crossSize] : lineCrossSize)</span><br><span class=\"line\"></span><br><span class=\"line\">        itemStyle[crossSize] = crossSign * (itemStyle[crossEnd] - itemStyle[crossStart])</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    crossBase += crossSign * (lineCrossSize + step)</span><br><span class=\"line\"> &#125;)</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/0e488c9e6c482d1d67f2a1872a58aa0d231450.png\" alt=\"ç¬¬å››æ­¥è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/layout4.js\" target=\"_blank\" rel=\"noopener\">layout4.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></p>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"https://www.zhangxinxu.com/wordpress/2018/10/display-flex-css3-css/#justify-content\" target=\"_blank\" rel=\"noopener\">display: flex æ•™ç¨‹</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html\" target=\"_blank\" rel=\"noopener\">Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Flex\" target=\"_blank\" rel=\"noopener\">MDN Flex</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Toy-Browser-DAY5","date":"2020-05-24T09:21:06.000Z","description":["æµè§ˆå™¨ -- toy-browser"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- implementation of a toy-browser ğŸ™†\n- æœ€æœ«ç¯‡ï¼šæµè§ˆå™¨çš„ç»˜åˆ¶ï¼Œå®Œç»“ toy-browser âœŠ\n- ![DOM with Position](http://p0.meituan.net/myvideodistribute/5c3903a71266e72d2e3f21a276c0efad94997.png)\n\n<!-- more -->\n\n## ç¬¬ä¸€æ­¥ï¼šç»˜åˆ¶å•ä¸ªå…ƒç´ \n- ç»˜åˆ¶éœ€è¦ä¾èµ–ä¸€ä¸ªå›¾å½¢ç¯å¢ƒ\n- è¿™é‡Œé‡‡ç”¨ npm package -- images\n- ç»˜åˆ¶å…ˆåœ¨ä¸€ä¸ª viewport ä¸Šè¿›è¡Œ\n- æš‚æ—¶åªå¤„ç†ç»˜åˆ¶å±æ€§ï¼šbackground-color\n- render1.js\n\n\t```javascript\n\tconst images = require('images')\n\n\tfunction render(viewport, element) {\n\t  if (element.style) {\n\t    const img = images(element.style.width, element.style.height)\n\t\n\t    if (element.style[\"background-color\"]) {\n\t      let color = element.style[\"background-color\"] || \"rgb(0,0,0)\"\n\t      color.match(/rgb\\((\\d+),(\\d+),(\\d+)\\)/)\n\t      // .fill(red, green, blue[, alpha])\n\t      img.fill(Number(RegExp.$1), Number(RegExp.$2), Number(RegExp.$3), 1)\n\t      viewport.draw(img, element.style.left || 0, element.style.top || 0)\n\t    }\n\t  }\n\t}\n\t\n\tmodule.exports = render\n\t```\n\t\n- client.js\n\t\n\t```javascript\n\t\n\t// ... some code\n\t\n\tvoid async function () {\n\t\n\t  // ... some code\n\t\t\n\t  let dom = parser.parseHTML(response.body)\n\t\n\t  let viewport = images(800, 600)\n\t\n\t  // ç»˜åˆ¶ cls1 å…ƒç´ ç‚¹ï¼Œrgb(0, 255, 0)\n\t  render(viewport, dom.children[0].children[3].children[1].children[3])\n\t\n\t  viewport.save(\"viewport.jpg\")\n\t}()\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/c8641c2200150079f9f29c91b1102ac83945.png)\n\n- [render1.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/render1.js)\n\n## ç¬¬äºŒæ­¥ï¼šç»˜åˆ¶ DOM\n- é€’å½’è°ƒç”¨å­å…ƒç´ çš„ç»˜åˆ¶æ–¹æ³•å®Œæˆ DOM æ ‘çš„æ„å»º\n- render2.js\n\n\t```javascript\n\tconst images = require('images')\n\n\tfunction render(viewport, element) {\n\t  if (element.style) {\n\t    \n\t    // some code\n\t    \n\t  }\n\t\n\t  if (element.children) {\n\t    for (let child of element.children) {\n\t      render(viewport, child)\n\t    }\n\t  }\n\t  \n\t}\n\t\n\tmodule.exports = render\n\t```\n- å¿½ç•¥ä¸€äº›ä¸éœ€è¦ç»˜åˆ¶çš„èŠ‚ç‚¹\n- å®é™…æµè§ˆå™¨ä¸­ï¼Œæ–‡å­—ç»˜åˆ¶æ˜¯éš¾ç‚¹ï¼Œéœ€è¦ä¾èµ–å­—ä½“åº“ï¼Œè¿™é‡Œå¿½ç•¥\n- å®é™…æµè§ˆå™¨ä¸­ï¼Œè¿˜ä¼šå¯¹ä¸€äº›å›¾å±‚åš compositingï¼Œè¿™é‡Œå¿½ç•¥\n- server.js å°†response Content-Type è®¾ç½®ä¸º text/html\n\n\t```javascript\n\t\n\t// some code\n\t\n\tres.writeHead(200, { 'Content-Type': 'text/html' });\n\t\n\t// some code\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/b04d62bb5f32ee07cb640e0b97014fb147655.png)\n\n\t\n- [render2.js å®Œæ•´ä»£ç  ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/render2.js)\n\n\n## å†™åœ¨åé¢\n- [toy-browser å®Œæ•´ä»£ç  ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser)\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n\n","source":"_posts/Toy-Browser-DAY5.md","raw":"---\ntitle: Toy-Browser-DAY5\ndate: 2020-05-24 17:21:06\ntags:\n- æµè§ˆå™¨\ncategories:\n- æµè§ˆå™¨\ndescription:\n- æµè§ˆå™¨ -- toy-browser\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- implementation of a toy-browser ğŸ™†\n- æœ€æœ«ç¯‡ï¼šæµè§ˆå™¨çš„ç»˜åˆ¶ï¼Œå®Œç»“ toy-browser âœŠ\n- ![DOM with Position](http://p0.meituan.net/myvideodistribute/5c3903a71266e72d2e3f21a276c0efad94997.png)\n\n<!-- more -->\n\n## ç¬¬ä¸€æ­¥ï¼šç»˜åˆ¶å•ä¸ªå…ƒç´ \n- ç»˜åˆ¶éœ€è¦ä¾èµ–ä¸€ä¸ªå›¾å½¢ç¯å¢ƒ\n- è¿™é‡Œé‡‡ç”¨ npm package -- images\n- ç»˜åˆ¶å…ˆåœ¨ä¸€ä¸ª viewport ä¸Šè¿›è¡Œ\n- æš‚æ—¶åªå¤„ç†ç»˜åˆ¶å±æ€§ï¼šbackground-color\n- render1.js\n\n\t```javascript\n\tconst images = require('images')\n\n\tfunction render(viewport, element) {\n\t  if (element.style) {\n\t    const img = images(element.style.width, element.style.height)\n\t\n\t    if (element.style[\"background-color\"]) {\n\t      let color = element.style[\"background-color\"] || \"rgb(0,0,0)\"\n\t      color.match(/rgb\\((\\d+),(\\d+),(\\d+)\\)/)\n\t      // .fill(red, green, blue[, alpha])\n\t      img.fill(Number(RegExp.$1), Number(RegExp.$2), Number(RegExp.$3), 1)\n\t      viewport.draw(img, element.style.left || 0, element.style.top || 0)\n\t    }\n\t  }\n\t}\n\t\n\tmodule.exports = render\n\t```\n\t\n- client.js\n\t\n\t```javascript\n\t\n\t// ... some code\n\t\n\tvoid async function () {\n\t\n\t  // ... some code\n\t\t\n\t  let dom = parser.parseHTML(response.body)\n\t\n\t  let viewport = images(800, 600)\n\t\n\t  // ç»˜åˆ¶ cls1 å…ƒç´ ç‚¹ï¼Œrgb(0, 255, 0)\n\t  render(viewport, dom.children[0].children[3].children[1].children[3])\n\t\n\t  viewport.save(\"viewport.jpg\")\n\t}()\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/c8641c2200150079f9f29c91b1102ac83945.png)\n\n- [render1.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/render1.js)\n\n## ç¬¬äºŒæ­¥ï¼šç»˜åˆ¶ DOM\n- é€’å½’è°ƒç”¨å­å…ƒç´ çš„ç»˜åˆ¶æ–¹æ³•å®Œæˆ DOM æ ‘çš„æ„å»º\n- render2.js\n\n\t```javascript\n\tconst images = require('images')\n\n\tfunction render(viewport, element) {\n\t  if (element.style) {\n\t    \n\t    // some code\n\t    \n\t  }\n\t\n\t  if (element.children) {\n\t    for (let child of element.children) {\n\t      render(viewport, child)\n\t    }\n\t  }\n\t  \n\t}\n\t\n\tmodule.exports = render\n\t```\n- å¿½ç•¥ä¸€äº›ä¸éœ€è¦ç»˜åˆ¶çš„èŠ‚ç‚¹\n- å®é™…æµè§ˆå™¨ä¸­ï¼Œæ–‡å­—ç»˜åˆ¶æ˜¯éš¾ç‚¹ï¼Œéœ€è¦ä¾èµ–å­—ä½“åº“ï¼Œè¿™é‡Œå¿½ç•¥\n- å®é™…æµè§ˆå™¨ä¸­ï¼Œè¿˜ä¼šå¯¹ä¸€äº›å›¾å±‚åš compositingï¼Œè¿™é‡Œå¿½ç•¥\n- server.js å°†response Content-Type è®¾ç½®ä¸º text/html\n\n\t```javascript\n\t\n\t// some code\n\t\n\tres.writeHead(200, { 'Content-Type': 'text/html' });\n\t\n\t// some code\n\t```\n\t\n- è¿è¡Œç»“æœ\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/b04d62bb5f32ee07cb640e0b97014fb147655.png)\n\n\t\n- [render2.js å®Œæ•´ä»£ç  ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser/blob/master/render2.js)\n\n\n## å†™åœ¨åé¢\n- [toy-browser å®Œæ•´ä»£ç  ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/toy-browser)\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n\n","slug":"Toy-Browser-DAY5","published":1,"updated":"2020-10-27T15:21:11.264Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u830024fw9ke8p4exav","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>implementation of a toy-browser ğŸ™†</li>\n<li>æœ€æœ«ç¯‡ï¼šæµè§ˆå™¨çš„ç»˜åˆ¶ï¼Œå®Œç»“ toy-browser âœŠ</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5c3903a71266e72d2e3f21a276c0efad94997.png\" alt=\"DOM with Position\"></li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"ç¬¬ä¸€æ­¥ï¼šç»˜åˆ¶å•ä¸ªå…ƒç´ \"><a href=\"#ç¬¬ä¸€æ­¥ï¼šç»˜åˆ¶å•ä¸ªå…ƒç´ \" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šç»˜åˆ¶å•ä¸ªå…ƒç´ \"></a>ç¬¬ä¸€æ­¥ï¼šç»˜åˆ¶å•ä¸ªå…ƒç´ </h2><ul>\n<li><p>ç»˜åˆ¶éœ€è¦ä¾èµ–ä¸€ä¸ªå›¾å½¢ç¯å¢ƒ</p>\n</li>\n<li><p>è¿™é‡Œé‡‡ç”¨ npm package â€“ images</p>\n</li>\n<li><p>ç»˜åˆ¶å…ˆåœ¨ä¸€ä¸ª viewport ä¸Šè¿›è¡Œ</p>\n</li>\n<li><p>æš‚æ—¶åªå¤„ç†ç»˜åˆ¶å±æ€§ï¼šbackground-color</p>\n</li>\n<li><p>render1.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> images = <span class=\"built_in\">require</span>(<span class=\"string\">'images'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\">viewport, element</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (element.style) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> img = images(element.style.width, element.style.height)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (element.style[<span class=\"string\">\"background-color\"</span>]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> color = element.style[<span class=\"string\">\"background-color\"</span>] || <span class=\"string\">\"rgb(0,0,0)\"</span></span><br><span class=\"line\">      color.match(<span class=\"regexp\">/rgb\\((\\d+),(\\d+),(\\d+)\\)/</span>)</span><br><span class=\"line\">      <span class=\"comment\">// .fill(red, green, blue[, alpha])</span></span><br><span class=\"line\">      img.fill(<span class=\"built_in\">Number</span>(<span class=\"built_in\">RegExp</span>.$<span class=\"number\">1</span>), <span class=\"built_in\">Number</span>(<span class=\"built_in\">RegExp</span>.$<span class=\"number\">2</span>), <span class=\"built_in\">Number</span>(<span class=\"built_in\">RegExp</span>.$<span class=\"number\">3</span>), <span class=\"number\">1</span>)</span><br><span class=\"line\">      viewport.draw(img, element.style.left || <span class=\"number\">0</span>, element.style.top || <span class=\"number\">0</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = render</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>client.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ... some code</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ... some code</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">  <span class=\"keyword\">let</span> dom = parser.parseHTML(response.body)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> viewport = images(<span class=\"number\">800</span>, <span class=\"number\">600</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ç»˜åˆ¶ cls1 å…ƒç´ ç‚¹ï¼Œrgb(0, 255, 0)</span></span><br><span class=\"line\">  render(viewport, dom.children[<span class=\"number\">0</span>].children[<span class=\"number\">3</span>].children[<span class=\"number\">1</span>].children[<span class=\"number\">3</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">  viewport.save(<span class=\"string\">\"viewport.jpg\"</span>)</span><br><span class=\"line\">&#125;()</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c8641c2200150079f9f29c91b1102ac83945.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/render1.js\" target=\"_blank\" rel=\"noopener\">render1.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></p>\n</li>\n</ul>\n<h2 id=\"ç¬¬äºŒæ­¥ï¼šç»˜åˆ¶-DOM\"><a href=\"#ç¬¬äºŒæ­¥ï¼šç»˜åˆ¶-DOM\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ï¼šç»˜åˆ¶ DOM\"></a>ç¬¬äºŒæ­¥ï¼šç»˜åˆ¶ DOM</h2><ul>\n<li><p>é€’å½’è°ƒç”¨å­å…ƒç´ çš„ç»˜åˆ¶æ–¹æ³•å®Œæˆ DOM æ ‘çš„æ„å»º</p>\n</li>\n<li><p>render2.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> images = <span class=\"built_in\">require</span>(<span class=\"string\">'images'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\">viewport, element</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (element.style) &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// some code</span></span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (element.children) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> child <span class=\"keyword\">of</span> element.children) &#123;</span><br><span class=\"line\">      render(viewport, child)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = render</span><br></pre></td></tr></table></figure></li>\n<li><p>å¿½ç•¥ä¸€äº›ä¸éœ€è¦ç»˜åˆ¶çš„èŠ‚ç‚¹</p>\n</li>\n<li><p>å®é™…æµè§ˆå™¨ä¸­ï¼Œæ–‡å­—ç»˜åˆ¶æ˜¯éš¾ç‚¹ï¼Œéœ€è¦ä¾èµ–å­—ä½“åº“ï¼Œè¿™é‡Œå¿½ç•¥</p>\n</li>\n<li><p>å®é™…æµè§ˆå™¨ä¸­ï¼Œè¿˜ä¼šå¯¹ä¸€äº›å›¾å±‚åš compositingï¼Œè¿™é‡Œå¿½ç•¥</p>\n</li>\n<li><p>server.js å°†response Content-Type è®¾ç½®ä¸º text/html</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// some code</span></span><br><span class=\"line\"></span><br><span class=\"line\">res.writeHead(<span class=\"number\">200</span>, &#123; <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/html'</span> &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// some code</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/b04d62bb5f32ee07cb640e0b97014fb147655.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/render2.js\" target=\"_blank\" rel=\"noopener\">render2.js å®Œæ•´ä»£ç  ç‚¹å‡»ä¸€ä¸‹</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser\" target=\"_blank\" rel=\"noopener\">toy-browser å®Œæ•´ä»£ç  ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>implementation of a toy-browser ğŸ™†</li>\n<li>æœ€æœ«ç¯‡ï¼šæµè§ˆå™¨çš„ç»˜åˆ¶ï¼Œå®Œç»“ toy-browser âœŠ</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5c3903a71266e72d2e3f21a276c0efad94997.png\" alt=\"DOM with Position\"></li>\n</ul>","more":"<h2 id=\"ç¬¬ä¸€æ­¥ï¼šç»˜åˆ¶å•ä¸ªå…ƒç´ \"><a href=\"#ç¬¬ä¸€æ­¥ï¼šç»˜åˆ¶å•ä¸ªå…ƒç´ \" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šç»˜åˆ¶å•ä¸ªå…ƒç´ \"></a>ç¬¬ä¸€æ­¥ï¼šç»˜åˆ¶å•ä¸ªå…ƒç´ </h2><ul>\n<li><p>ç»˜åˆ¶éœ€è¦ä¾èµ–ä¸€ä¸ªå›¾å½¢ç¯å¢ƒ</p>\n</li>\n<li><p>è¿™é‡Œé‡‡ç”¨ npm package â€“ images</p>\n</li>\n<li><p>ç»˜åˆ¶å…ˆåœ¨ä¸€ä¸ª viewport ä¸Šè¿›è¡Œ</p>\n</li>\n<li><p>æš‚æ—¶åªå¤„ç†ç»˜åˆ¶å±æ€§ï¼šbackground-color</p>\n</li>\n<li><p>render1.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> images = <span class=\"built_in\">require</span>(<span class=\"string\">'images'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\">viewport, element</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (element.style) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> img = images(element.style.width, element.style.height)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (element.style[<span class=\"string\">\"background-color\"</span>]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> color = element.style[<span class=\"string\">\"background-color\"</span>] || <span class=\"string\">\"rgb(0,0,0)\"</span></span><br><span class=\"line\">      color.match(<span class=\"regexp\">/rgb\\((\\d+),(\\d+),(\\d+)\\)/</span>)</span><br><span class=\"line\">      <span class=\"comment\">// .fill(red, green, blue[, alpha])</span></span><br><span class=\"line\">      img.fill(<span class=\"built_in\">Number</span>(<span class=\"built_in\">RegExp</span>.$<span class=\"number\">1</span>), <span class=\"built_in\">Number</span>(<span class=\"built_in\">RegExp</span>.$<span class=\"number\">2</span>), <span class=\"built_in\">Number</span>(<span class=\"built_in\">RegExp</span>.$<span class=\"number\">3</span>), <span class=\"number\">1</span>)</span><br><span class=\"line\">      viewport.draw(img, element.style.left || <span class=\"number\">0</span>, element.style.top || <span class=\"number\">0</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = render</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>client.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ... some code</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ... some code</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">  <span class=\"keyword\">let</span> dom = parser.parseHTML(response.body)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> viewport = images(<span class=\"number\">800</span>, <span class=\"number\">600</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ç»˜åˆ¶ cls1 å…ƒç´ ç‚¹ï¼Œrgb(0, 255, 0)</span></span><br><span class=\"line\">  render(viewport, dom.children[<span class=\"number\">0</span>].children[<span class=\"number\">3</span>].children[<span class=\"number\">1</span>].children[<span class=\"number\">3</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">  viewport.save(<span class=\"string\">\"viewport.jpg\"</span>)</span><br><span class=\"line\">&#125;()</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c8641c2200150079f9f29c91b1102ac83945.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/render1.js\" target=\"_blank\" rel=\"noopener\">render1.js å®Œæ•´ä»£ç -ç‚¹å‡»ä¸€ä¸‹</a></p>\n</li>\n</ul>\n<h2 id=\"ç¬¬äºŒæ­¥ï¼šç»˜åˆ¶-DOM\"><a href=\"#ç¬¬äºŒæ­¥ï¼šç»˜åˆ¶-DOM\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ï¼šç»˜åˆ¶ DOM\"></a>ç¬¬äºŒæ­¥ï¼šç»˜åˆ¶ DOM</h2><ul>\n<li><p>é€’å½’è°ƒç”¨å­å…ƒç´ çš„ç»˜åˆ¶æ–¹æ³•å®Œæˆ DOM æ ‘çš„æ„å»º</p>\n</li>\n<li><p>render2.js</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> images = <span class=\"built_in\">require</span>(<span class=\"string\">'images'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\">viewport, element</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (element.style) &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// some code</span></span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (element.children) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> child <span class=\"keyword\">of</span> element.children) &#123;</span><br><span class=\"line\">      render(viewport, child)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = render</span><br></pre></td></tr></table></figure></li>\n<li><p>å¿½ç•¥ä¸€äº›ä¸éœ€è¦ç»˜åˆ¶çš„èŠ‚ç‚¹</p>\n</li>\n<li><p>å®é™…æµè§ˆå™¨ä¸­ï¼Œæ–‡å­—ç»˜åˆ¶æ˜¯éš¾ç‚¹ï¼Œéœ€è¦ä¾èµ–å­—ä½“åº“ï¼Œè¿™é‡Œå¿½ç•¥</p>\n</li>\n<li><p>å®é™…æµè§ˆå™¨ä¸­ï¼Œè¿˜ä¼šå¯¹ä¸€äº›å›¾å±‚åš compositingï¼Œè¿™é‡Œå¿½ç•¥</p>\n</li>\n<li><p>server.js å°†response Content-Type è®¾ç½®ä¸º text/html</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// some code</span></span><br><span class=\"line\"></span><br><span class=\"line\">res.writeHead(<span class=\"number\">200</span>, &#123; <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/html'</span> &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// some code</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/b04d62bb5f32ee07cb640e0b97014fb147655.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser/blob/master/render2.js\" target=\"_blank\" rel=\"noopener\">render2.js å®Œæ•´ä»£ç  ç‚¹å‡»ä¸€ä¸‹</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li><a href=\"https://github.com/Ele-Peng/toy-browser\" target=\"_blank\" rel=\"noopener\">toy-browser å®Œæ•´ä»£ç  ç‚¹å‡»ä¸€ä¸‹</a></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"UTF8_Encoing","date":"2020-04-21T13:53:02.000Z","description":["è®°å½•ä¸€ä¸‹å°† String å­—ç¬¦ä¸²ï¼Œè½¬æˆå­—èŠ‚æµçš„æ•´ä¸ªå®ç°è¿‡ç¨‹"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- å‘¨ä¸€å’Œå°å§å¦¹ Skady å®è´ç»ƒå®Œèˆåï¼Œäº¤æµäº†ä¸€ä¸ªå°æ—¶æŠ€æœ¯ï¼Œæ˜¯çš„ğŸ™†æˆ‘ä»¬æ²¡æœ‰æ‰¯çš®ï¼Œéš¾å¾—äº¤æµæŠ€æœ¯ã€‚ğŸ¤£å¥¹åœ¨ç©â€œåœ¨Cè¯­è¨€ä¸­ç¼–å†™JSä»£ç ï¼Œç„¶åå†ç¼–è¯‘æˆwasmï¼Œå¯ä»¥åœ¨æµè§ˆå™¨é‡Œè·‘â€ï¼Œæˆ‘ä»¬ç®€å•åœ°äº¤æµäº†ä¸€ä¸‹åº•å±‚å®ç°.<span style=\"color: #bfbfbf\">åº”è¯¥æ˜¯åŸºäº ArrayBuffer çš„</span>\n- ç„¶åä¸çŸ¥æ€ä¹ˆå°±æƒ³åˆ°äº† 0.1 + 0.2 â‰  0.3ï¼Œè¿™ä¸ªç»å…¸é—®é¢˜\n- æƒ³çœ‹çœ‹å®ƒåœ¨å†…å­˜ä¸­çš„è¡¨ç°\n- å¹¶è®°å½•ä¸€ä¸‹å°† String å­—ç¬¦ä¸²ï¼Œè½¬æˆå­—èŠ‚æµçš„æ•´ä¸ªå®ç°è¿‡ç¨‹\n- å¾€ä¸‹çœ‹å§~ ğŸ¤“\n\n<!-- more -->\n\n## å®è·µè¿‡ç¨‹\n#### æ€»ä½“æ€è·¯\n- ç»Ÿè®¡å­—ç¬¦ä¸²é•¿åº¦\n- å¾ªç¯éå†å­—ç¬¦ä¸²ï¼Œè¿›è¡Œç¼–ç \n- è¾“å‡ºç¼–ç åçš„å­—èŠ‚æµ\n\n```javascript\nfunction UTF8_Encoding(str) {\n   let length = str.length,\n        strIndex = -1,\n        strEnd = length - 1,\n        bytes = new Uint8Array(length),\n        index = 0;\n\n    while (strIndex++ < strEnd) {\n        bytes[index] = str.charCodeAt(strIndex) & 0xFF; // è®¾ç½®ä¸ºä½8ä½å€¼\n        index += 1;\n    }\n\n    return bytes;\n}\n```\n\n## å­—èŠ‚æµæ–‡ä»¶è½¬ String\n#### æ€»ä½“æ€è·¯\n- ç»Ÿè®¡å­—èŠ‚æµé•¿åº¦\n- å¾ªç¯éå†å­—èŠ‚æµï¼Œè¿›è¡Œè§£ç \n- è¾“å‡ºè§£ç åçš„å­—èŠ‚æµ\n\n```javascript\nfunction UTF8_Decoding(bytes) {\n    let str = \"\",\n        bytesIndex = -1,\n        bytesEnd = bytes.length - 1;\n\n    while (bytesIndex ++ < bytesEnd) {\n        str += String.fromCharCode(bytes[bytesIndex]);\n    }\n\n    return str;\n};\n```\n\n#### æµ‹è¯•æˆªå›¾\n- ![æµ‹è¯•æˆªå›¾](http://p0.meituan.net/myvideodistribute/c1770110908275e40343791324f7dfff154914.png)\n\n\n## ç±»å‹åŒ–æ•°ç»„\n- ç±»å‹åŒ–æ•°ç»„ä¸­çš„å…ƒç´ éƒ½æ˜¯æ•°å­—ã€‚ä½¿ç”¨æ„é€ å‡½æ•°åœ¨åˆ›å»ºç±»å‹åŒ–æ•°ç»„çš„æ—¶å€™å†³å®šäº†æ•°ç»„ä¸­æ•°å­—ï¼ˆæœ‰ç¬¦å·æˆ–è€…æ— ç¬¦å·æ•´æ•°æˆ–è€…æµ®ç‚¹æ•°ï¼‰çš„ç±»å‹å’Œå¤§å°ï¼ˆä»¥ä½ä¸ºå•ä½ï¼‰\n- ç±»å‹åŒ–æ•°ç»„æœ‰å›ºå®šçš„é•¿åº¦ã€‚\n- åœ¨åˆ›å»ºç±»å‹åŒ–æ•°ç»„çš„æ—¶å€™ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ æ€»æ˜¯é»˜è®¤åˆå§‹åŒ–ä¸º0.\n- **ç±»å‹åŒ–æ•°ç»„**\n\t- **TypedArray** è§†å›¾æ”¯æŒçš„æ•°æ®ç±»å‹ä¸€å…±æœ‰ 9 ç§ï¼ˆ **DataView** è§†å›¾æ”¯æŒé™¤ **Uint8C** ä»¥å¤–çš„å…¶ä»– 8 ç§ï¼‰ã€‚\n\n\t\t| æ•°æ®ç±»å‹ |  å­—èŠ‚é•¿åº¦  |  å«ä¹‰  | å¯¹åº”çš„ C è¯­è¨€ç±»å‹ |\n\t\t| --- | --- | --- | --- |\n\t\t| Int8 | 1 | 8 ä½å¸¦ç¬¦å·æ•´æ•° | signed char |\n\t\t| Uint8 |\t1 |\t8 ä½ä¸å¸¦ç¬¦å·æ•´æ•° |\tunsigned char |\n\t\t| Uint8C | 1 | 8 ä½ä¸å¸¦ç¬¦å·æ•´æ•°ï¼ˆè‡ªåŠ¨è¿‡æ»¤æº¢å‡ºï¼‰|unsigned char |\n\t\t| Int16 |\t2 |\t16 ä½å¸¦ç¬¦å·æ•´æ•° |\tshort |\n\t\t| Uint16 | 2 | 16 ä½ä¸å¸¦ç¬¦å·æ•´æ•° | unsigned short |\n\t\t| Int32 |\t4 | 32 ä½å¸¦ç¬¦å·æ•´æ•° | int |\n\t\t| Uint32 | 4 | 32 ä½ä¸å¸¦ç¬¦å·çš„æ•´æ•° | unsigned int |\n\t\t| Float32 | 4\t | 32 ä½æµ®ç‚¹æ•° | float |\n\t\t| Float64 | 8 |\t64 ä½æµ®ç‚¹æ•° | double |\n- åœ¨åˆ›å»ºä¸€ä¸ªç±»å‹åŒ–æ•°ç»„çš„æ—¶å€™ï¼Œå¯ä»¥ä¼ é€’æ•°ç»„å¤§å°ç»™æ„é€ å‡½æ•°ï¼Œæˆ–è€…ä¼ é€’ä¸€ä¸ªæ•°ç»„æˆ–è€…ç±»å‹åŒ–æ•°ç»„æ¥ç”¨äºåˆå§‹åŒ–æ•°ç»„å…ƒç´ ã€‚ä¸€æ—¦åˆ›å»ºäº†ç±»å‹åŒ–æ•°ç»„ï¼Œå°±å¯ä»¥åƒæ“ä½œå…¶ä»–ç±»æ•°ç»„å¯¹è±¡é‚£æ ·ï¼Œé€šè¿‡å¸¸è§„çš„ä¸­æ‹¬å·è¡¨ç¤ºæ³•æ¥å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œè¯»/å†™æ“ä½œã€‚\n\n\t```javascript\n\tvar bytes = new Uint8Array(1024); // 1kbå­—èŠ‚ \n\tfor (var i = 0; i < bytes.length; i ++) // å¾ªç¯æ•°ç»„çš„æ¯ä¸ªå…ƒç´ \n\tfor (var i = 0; i < bytes.length; i ++) // å¾ªç¯æ•°ç»„çš„æ¯ä¸ªå…ƒç´ \n\t\tbytes[i] = i & 0xFF; // è®¾ç½®ä¸ºç´¢å¼•çš„ä½8ä½å€¼\n\tvar copy = new Uint8Array(bytes); // åˆ›å»ºæ•°ç»„çš„å‰¯æœ¬\n\tvar ints = new Int32Array([0, 1, 2, 3]); // åŒ…å«è¿™4ä¸ªintå€¼çš„ç±»å‹åŒ–æ•°ç»„\n\t```\n- ç±»å‹åŒ–æ•°ç»„ï¼šä»–ä»¬éƒ½æ˜¯**åŸºæœ¬å­—èŠ‚å—çš„è§†å›¾**ï¼Œç§°ä¸ºä¸€ä¸ª ArrayBuffer ã€‚ArrayBuffer åªæ˜¯ä¸é€æ˜çš„å­—èŠ‚å—ã€‚å¯ä»¥é€šè¿‡ç±»å‹åŒ–æ•°ç»„è·å–è¿™äº›å­—èŠ‚ï¼Œä½†æ˜¯ ArrayBuffer è‡ªå·±å¹¶ä¸æ˜¯ä¸€ä¸ªç±»å‹åŒ–æ•°ç»„ã€‚å¯ä»¥åƒå¯¹ä»»æ„ Javascript å¯¹è±¡é‚£æ ·ï¼Œä½¿ç”¨æ•°å­—æ•°ç»„ç´¢å¼•æ¥æ“ä½œ ArrayBufferã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšå¹¶**ä¸èƒ½èµ‹äºˆè®¿é—®ç¼“å†²åŒºä¸­å­—èŠ‚çš„æƒé™**\n\t\n\t```javascript\n\tvar bytes = new Uint8Array(8); // åˆ†é…8ä¸ªå­—èŠ‚\n\tbytes[0] = 1 // æŠŠç¬¬ä¸€ä¸ªå­—èŠ‚è®¾ç½®ä¸º1\n\tbytes.buffer[0] = 255 // é”™è¯¯è·å–ï¼Œç¼“å†²åŒºä¸­æ²¡æœ‰ç´¢å¼•å€¼0\n\tbytes.buffer[1] = 255 // é”™è¯¯è®¾ç½®ç¼“å†²åŒºå­—èŠ‚\n\t\n\t```\n\n### â€œå­—èŠ‚é¡ºåºâ€\n- å­—èŠ‚ç»„ç»‡æˆæ›´é•¿çš„å­—çš„é¡ºåº\n- ä¸ºäº†é«˜æ•ˆï¼Œç±»å‹åŒ–æ•°ç»„é‡‡ç”¨åº•å±‚ç¡¬ä»¶çš„åŸç”Ÿé¡ºåºã€‚åœ¨ä½ä½ä¼˜å…ˆ(little-endian)ç³»ç»Ÿä¸­ï¼Œ ArrayBuffer ä¸­æ•°å­—çš„å­—èŠ‚æ˜¯æŒ‰ç…§ä»ä½ä½åˆ°é«˜ä½çš„é¡ºåºæ’åˆ—çš„ã€‚åœ¨é«˜ä½ä¼˜å…ˆ(big-endian)ç³»ç»Ÿä¸­ï¼Œå­—èŠ‚æ˜¯æŒ‰ç…§ä»é«˜ä½åˆ°ä½ä½çš„é¡ºåºæ’åˆ—çš„ã€‚\n- å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥æ£€æµ‹ç³»ç»Ÿçš„å­—èŠ‚é¡ºåºï¼š\n\n\t```javascript\n\t// å¦‚æœæ•´æ•° Ox00000001 åœ¨å†…å­˜ä¸­è¡¨ç¤ºæˆï¼š 01 00 00 00\n\t// åˆ™è¯´æ˜å½“å‰ç³»ç»Ÿæ˜¯ä½ä½ä¼˜å…ˆç³»ç»Ÿ\n\t// ç›¸åï¼Œåœ¨é«˜ä½ä¼˜å…ˆç³»ç»Ÿä¸­ï¼Œå®ƒä¼šè¡¨ç¤ºæˆï¼š00 00 00 01\n\tvar little_endian = new Int8Array(new Int32Array([1]).buffer)[0] === 1\n\t```\n\t\n## æ€è€ƒé—®é¢˜ 0.1 + 0.2 â‰  0.3\n- æˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹çœ‹ åè¿›åˆ¶å°æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼š\n\t- æ•´æ•°éƒ¨åˆ†ï¼šé™¤ä»¥2ï¼Œå–å‡ºä½™æ•°ï¼Œå•†ç»§ç»­é™¤ä»¥2ï¼Œç›´åˆ°å¾—åˆ°0ä¸ºæ­¢ï¼Œå°†å–å‡ºçš„ä½™æ•°é€†åº\n\t- å°æ•°éƒ¨åˆ†ï¼šä¹˜ä»¥2ï¼Œç„¶åå–å‡ºæ•´æ•°éƒ¨åˆ†ï¼Œå°†å‰©ä¸‹çš„å°æ•°éƒ¨åˆ†ç»§ç»­ä¹˜ä»¥2ï¼Œç„¶åå†å–æ•´æ•°éƒ¨åˆ†ï¼Œä¸€ç›´å–åˆ°å°æ•°éƒ¨åˆ†ä¸ºé›¶ä¸ºæ­¢ã€‚å¦‚æœæ°¸è¿œä¸ä¸ºé›¶ï¼Œåˆ™æŒ‰è¦æ±‚ä¿ç•™è¶³å¤Ÿä½æ•°çš„å°æ•°ï¼Œæœ€åä¸€ä½åš0èˆ1å…¥ã€‚å°†å–å‡ºçš„æ•´æ•°é¡ºåºæ’åˆ—ã€‚\n\t- æ‰€ä»¥ 0.1 å¯ä»¥è¡¨ç¤ºä¸º\n\t\t- 0.000110011001100110011...\n\t- 0.2 å¯ä»¥è¡¨ç¤ºä¸º\n\t\t- 0.00110011001100110011...\n\n\t\t\n```javascript\n// 0.1 å’Œ 0.2 éƒ½è½¬åŒ–æˆäºŒè¿›åˆ¶åå†è¿›è¡Œè¿ç®—\n0.00011001100110011001100110011001100110011001100110011010 +\n0.0011001100110011001100110011001100110011001100110011010 =\n0.0100110011001100110011001100110011001100110011001100111\n\n// è½¬æˆåè¿›åˆ¶æ­£å¥½æ˜¯ 0.30000000000000004\n```\n\n- äºŒè¿›åˆ¶æ•°è½¬æˆ IEEE 754 æ ‡å‡†\n\n\t- ![IEEE 754 æ ‡å‡†](http://p0.meituan.net/myvideodistribute/eefbaacb81e66deb742370e27d9e3bb876872.png)\n\n\t- ä½¿ç”¨ 64 ä½å›ºå®šé•¿åº¦æ¥è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†çš„double åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚\n\t- è¿™æ ·çš„å­˜å‚¨ç»“æ„ä¼˜ç‚¹æ˜¯å¯ä»¥å½’ä¸€åŒ–å¤„ç†æ•´æ•°å’Œå°æ•°ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚\n\t- è¿™64ä¸ªæ¯”ç‰¹åˆå¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œå³ï¼š\n\t\t- ç¬¬1ä½: æ˜¯ç¬¦å·çš„æ ‡å¿—ä½(S), 0ä»£è¡¨æ­£æ•°ï¼Œ1ä»£è¡¨è´Ÿæ•°\n\t\t- ç¬¬1-11ä½: æŒ‡æ•°ä½(E), å­˜å‚¨æŒ‡æ•°ï¼ˆexponentï¼‰ï¼Œç”¨æ¥è¡¨ç¤ºæ¬¡æ–¹æ•°\n\t\t- ç¬¬12-63ä½: å°¾æ•°(M), è¿™52 ä½æ˜¯å°¾æ•°ï¼Œè¶…å‡ºçš„éƒ¨åˆ†è‡ªåŠ¨è¿›ä¸€èˆé›¶\n\t- å®é™…æ•°å­—å°±å¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼æ¥è®¡ç®—ï¼š\n\t\t\n\t\t- ![IEEE 754æ•°å­¦å…¬å¼](http://p0.meituan.net/myvideodistribute/7b2c9fce00cfe3bf57fcede347257af276632.png)\n\n\t- å› æ­¤ 0.1 çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼š\t\n\n\t\t> 0.00011001100110011001100110011001100110011001100110011001100...\n\t\n\t\t- é¦–å…ˆ 0.1 æ˜¯æ­£æ•°ï¼Œæ ‡å¿—ä½ \n\t\t\n\t\t\t> Sign = 0\n\t\t\t\n\t\t- å…¶æ¬¡, å°†å°æ•°è½¬åŒ–ä¸ºç§‘å­¦è®¡æ•°æ³•\n\t\t\t\n\t\t\t> 1.100110011001100110011001100110011001100110011001100... * 2^-4\n\t\t\t\n\t\t\t- ç›¸å¯¹äºï¼Œå°æ•°ç‚¹ç§»äº†4ä½ï¼ŒæŒ‡æ•°å‡4\n\t\t\t\n\t\t\t\t> exponent = -4 + 1023 = 1019\n\t\t\t\t\n\t\t\t\t> 01111111011\n\n\t\t- ç”±äºç§‘å­¦è®¡æ•°æ³•, ç¬¬ä¸€ä¸ªæ•°å§‹ç»ˆæ˜¯1, æ‰€ä»¥å¯ä»¥å¿½ç•¥å­˜å‚¨, åªè¦å­˜åé¢çš„52ä½å°±å¯ä»¥äº†\n\t\t- **å¦‚æœè¶…è¿‡äº†52ä½, å°±æ˜¯å¯¹ç¬¬53ä½èˆ0è¿›1**ï¼ˆç²¾åº¦è¯¯å·®ï¼‰, ç»“æœä¹Ÿå°±æ˜¯\n\n\t\t\t> 1001100110011001100110011001100110011001100110011010\n\t\t\n\t- å› æ­¤ 0.1 çš„ IEEE 754 çš„è¡¨ç¤ºï¼š\n\t\n\t\t- ![0.1 çš„IEEE 754](http://p0.meituan.net/myvideodistribute/1ae3cf9f7bda61d8d0849ce05f7657f997288.png)\n\t- åŒç† 0.2 çš„ IEEE 754 çš„è¡¨ç¤ºï¼š\n\t\t\n\t\t- ![0.2 çš„ IEEE 754](http://p0.meituan.net/myvideodistribute/0c5d93145800b45b59a3ef23dc2abe4a97936.png)\n\n### æŸ¥çœ‹ 0.1 è¡¨ç¤ºæ–¹å¼\n\n```javascript\nlet b = new Float64Array([0.1])\nconsole.log(b)\nlet intArr = new Uint8Array(b.buffer)\nfor (let i = 7; i >= 0; i --) {\n    s = intArr[i].toString(2)\n    while(s.length < 8) {\n        s = '0' + s\n    }\n    console.log(s)\n\n}\n```\t\n\n- ![ä½ä½ä¼˜å…ˆç³»ç»Ÿ](http://p0.meituan.net/myvideodistribute/d996e0a508b796f5a3d4f4866c1bf43064783.png)\n- é¦–å…ˆæˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯ä½ä½ä¼˜å…ˆç³»ç»Ÿ(little_endian)\n- ![æŸ¥çœ‹ 0.1 è¡¨ç¤ºæ–¹å¼æˆªå›¾](http://p0.meituan.net/myvideodistribute/de79ee3caac77ddad9398cfeaaf3719f227171.png)\n\t- 0 --> æ ‡å¿—ä½\n\t- 011111111011 --> æŒ‡æ•°ä½\n\t- 1001{12}1010 --> å°¾æ•°\n\n\t\n## å‚è€ƒæ–‡çŒ®\n- ã€ŠJavascript æƒå¨æŒ‡å—ã€‹22.5ç«  ç±»å‹åŒ–æ•°ç»„å’Œ ArrayBuffer P678\n- [å½»åº•ææ‡‚Javascript æµ®ç‚¹æ•°](https://cloud.tencent.com/developer/article/1592651)\n- [äºŒè¿›åˆ¶è½¬æ¢å·¥å…·](http://www.binaryconvert.com/convert_double.html)\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/UTF8-Encoing.md","raw":"---\ntitle: UTF8_Encoing\ndate: 2020-04-21 21:53:02\ntags:\n- å‰ç«¯æ¦‚å¿µ\n- UTF-8\ncategories:\n- [å‰ç«¯æ¦‚å¿µ]\ndescription:\n- è®°å½•ä¸€ä¸‹å°† String å­—ç¬¦ä¸²ï¼Œè½¬æˆå­—èŠ‚æµçš„æ•´ä¸ªå®ç°è¿‡ç¨‹\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- å‘¨ä¸€å’Œå°å§å¦¹ Skady å®è´ç»ƒå®Œèˆåï¼Œäº¤æµäº†ä¸€ä¸ªå°æ—¶æŠ€æœ¯ï¼Œæ˜¯çš„ğŸ™†æˆ‘ä»¬æ²¡æœ‰æ‰¯çš®ï¼Œéš¾å¾—äº¤æµæŠ€æœ¯ã€‚ğŸ¤£å¥¹åœ¨ç©â€œåœ¨Cè¯­è¨€ä¸­ç¼–å†™JSä»£ç ï¼Œç„¶åå†ç¼–è¯‘æˆwasmï¼Œå¯ä»¥åœ¨æµè§ˆå™¨é‡Œè·‘â€ï¼Œæˆ‘ä»¬ç®€å•åœ°äº¤æµäº†ä¸€ä¸‹åº•å±‚å®ç°.<span style=\"color: #bfbfbf\">åº”è¯¥æ˜¯åŸºäº ArrayBuffer çš„</span>\n- ç„¶åä¸çŸ¥æ€ä¹ˆå°±æƒ³åˆ°äº† 0.1 + 0.2 â‰  0.3ï¼Œè¿™ä¸ªç»å…¸é—®é¢˜\n- æƒ³çœ‹çœ‹å®ƒåœ¨å†…å­˜ä¸­çš„è¡¨ç°\n- å¹¶è®°å½•ä¸€ä¸‹å°† String å­—ç¬¦ä¸²ï¼Œè½¬æˆå­—èŠ‚æµçš„æ•´ä¸ªå®ç°è¿‡ç¨‹\n- å¾€ä¸‹çœ‹å§~ ğŸ¤“\n\n<!-- more -->\n\n## å®è·µè¿‡ç¨‹\n#### æ€»ä½“æ€è·¯\n- ç»Ÿè®¡å­—ç¬¦ä¸²é•¿åº¦\n- å¾ªç¯éå†å­—ç¬¦ä¸²ï¼Œè¿›è¡Œç¼–ç \n- è¾“å‡ºç¼–ç åçš„å­—èŠ‚æµ\n\n```javascript\nfunction UTF8_Encoding(str) {\n   let length = str.length,\n        strIndex = -1,\n        strEnd = length - 1,\n        bytes = new Uint8Array(length),\n        index = 0;\n\n    while (strIndex++ < strEnd) {\n        bytes[index] = str.charCodeAt(strIndex) & 0xFF; // è®¾ç½®ä¸ºä½8ä½å€¼\n        index += 1;\n    }\n\n    return bytes;\n}\n```\n\n## å­—èŠ‚æµæ–‡ä»¶è½¬ String\n#### æ€»ä½“æ€è·¯\n- ç»Ÿè®¡å­—èŠ‚æµé•¿åº¦\n- å¾ªç¯éå†å­—èŠ‚æµï¼Œè¿›è¡Œè§£ç \n- è¾“å‡ºè§£ç åçš„å­—èŠ‚æµ\n\n```javascript\nfunction UTF8_Decoding(bytes) {\n    let str = \"\",\n        bytesIndex = -1,\n        bytesEnd = bytes.length - 1;\n\n    while (bytesIndex ++ < bytesEnd) {\n        str += String.fromCharCode(bytes[bytesIndex]);\n    }\n\n    return str;\n};\n```\n\n#### æµ‹è¯•æˆªå›¾\n- ![æµ‹è¯•æˆªå›¾](http://p0.meituan.net/myvideodistribute/c1770110908275e40343791324f7dfff154914.png)\n\n\n## ç±»å‹åŒ–æ•°ç»„\n- ç±»å‹åŒ–æ•°ç»„ä¸­çš„å…ƒç´ éƒ½æ˜¯æ•°å­—ã€‚ä½¿ç”¨æ„é€ å‡½æ•°åœ¨åˆ›å»ºç±»å‹åŒ–æ•°ç»„çš„æ—¶å€™å†³å®šäº†æ•°ç»„ä¸­æ•°å­—ï¼ˆæœ‰ç¬¦å·æˆ–è€…æ— ç¬¦å·æ•´æ•°æˆ–è€…æµ®ç‚¹æ•°ï¼‰çš„ç±»å‹å’Œå¤§å°ï¼ˆä»¥ä½ä¸ºå•ä½ï¼‰\n- ç±»å‹åŒ–æ•°ç»„æœ‰å›ºå®šçš„é•¿åº¦ã€‚\n- åœ¨åˆ›å»ºç±»å‹åŒ–æ•°ç»„çš„æ—¶å€™ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ æ€»æ˜¯é»˜è®¤åˆå§‹åŒ–ä¸º0.\n- **ç±»å‹åŒ–æ•°ç»„**\n\t- **TypedArray** è§†å›¾æ”¯æŒçš„æ•°æ®ç±»å‹ä¸€å…±æœ‰ 9 ç§ï¼ˆ **DataView** è§†å›¾æ”¯æŒé™¤ **Uint8C** ä»¥å¤–çš„å…¶ä»– 8 ç§ï¼‰ã€‚\n\n\t\t| æ•°æ®ç±»å‹ |  å­—èŠ‚é•¿åº¦  |  å«ä¹‰  | å¯¹åº”çš„ C è¯­è¨€ç±»å‹ |\n\t\t| --- | --- | --- | --- |\n\t\t| Int8 | 1 | 8 ä½å¸¦ç¬¦å·æ•´æ•° | signed char |\n\t\t| Uint8 |\t1 |\t8 ä½ä¸å¸¦ç¬¦å·æ•´æ•° |\tunsigned char |\n\t\t| Uint8C | 1 | 8 ä½ä¸å¸¦ç¬¦å·æ•´æ•°ï¼ˆè‡ªåŠ¨è¿‡æ»¤æº¢å‡ºï¼‰|unsigned char |\n\t\t| Int16 |\t2 |\t16 ä½å¸¦ç¬¦å·æ•´æ•° |\tshort |\n\t\t| Uint16 | 2 | 16 ä½ä¸å¸¦ç¬¦å·æ•´æ•° | unsigned short |\n\t\t| Int32 |\t4 | 32 ä½å¸¦ç¬¦å·æ•´æ•° | int |\n\t\t| Uint32 | 4 | 32 ä½ä¸å¸¦ç¬¦å·çš„æ•´æ•° | unsigned int |\n\t\t| Float32 | 4\t | 32 ä½æµ®ç‚¹æ•° | float |\n\t\t| Float64 | 8 |\t64 ä½æµ®ç‚¹æ•° | double |\n- åœ¨åˆ›å»ºä¸€ä¸ªç±»å‹åŒ–æ•°ç»„çš„æ—¶å€™ï¼Œå¯ä»¥ä¼ é€’æ•°ç»„å¤§å°ç»™æ„é€ å‡½æ•°ï¼Œæˆ–è€…ä¼ é€’ä¸€ä¸ªæ•°ç»„æˆ–è€…ç±»å‹åŒ–æ•°ç»„æ¥ç”¨äºåˆå§‹åŒ–æ•°ç»„å…ƒç´ ã€‚ä¸€æ—¦åˆ›å»ºäº†ç±»å‹åŒ–æ•°ç»„ï¼Œå°±å¯ä»¥åƒæ“ä½œå…¶ä»–ç±»æ•°ç»„å¯¹è±¡é‚£æ ·ï¼Œé€šè¿‡å¸¸è§„çš„ä¸­æ‹¬å·è¡¨ç¤ºæ³•æ¥å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œè¯»/å†™æ“ä½œã€‚\n\n\t```javascript\n\tvar bytes = new Uint8Array(1024); // 1kbå­—èŠ‚ \n\tfor (var i = 0; i < bytes.length; i ++) // å¾ªç¯æ•°ç»„çš„æ¯ä¸ªå…ƒç´ \n\tfor (var i = 0; i < bytes.length; i ++) // å¾ªç¯æ•°ç»„çš„æ¯ä¸ªå…ƒç´ \n\t\tbytes[i] = i & 0xFF; // è®¾ç½®ä¸ºç´¢å¼•çš„ä½8ä½å€¼\n\tvar copy = new Uint8Array(bytes); // åˆ›å»ºæ•°ç»„çš„å‰¯æœ¬\n\tvar ints = new Int32Array([0, 1, 2, 3]); // åŒ…å«è¿™4ä¸ªintå€¼çš„ç±»å‹åŒ–æ•°ç»„\n\t```\n- ç±»å‹åŒ–æ•°ç»„ï¼šä»–ä»¬éƒ½æ˜¯**åŸºæœ¬å­—èŠ‚å—çš„è§†å›¾**ï¼Œç§°ä¸ºä¸€ä¸ª ArrayBuffer ã€‚ArrayBuffer åªæ˜¯ä¸é€æ˜çš„å­—èŠ‚å—ã€‚å¯ä»¥é€šè¿‡ç±»å‹åŒ–æ•°ç»„è·å–è¿™äº›å­—èŠ‚ï¼Œä½†æ˜¯ ArrayBuffer è‡ªå·±å¹¶ä¸æ˜¯ä¸€ä¸ªç±»å‹åŒ–æ•°ç»„ã€‚å¯ä»¥åƒå¯¹ä»»æ„ Javascript å¯¹è±¡é‚£æ ·ï¼Œä½¿ç”¨æ•°å­—æ•°ç»„ç´¢å¼•æ¥æ“ä½œ ArrayBufferã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšå¹¶**ä¸èƒ½èµ‹äºˆè®¿é—®ç¼“å†²åŒºä¸­å­—èŠ‚çš„æƒé™**\n\t\n\t```javascript\n\tvar bytes = new Uint8Array(8); // åˆ†é…8ä¸ªå­—èŠ‚\n\tbytes[0] = 1 // æŠŠç¬¬ä¸€ä¸ªå­—èŠ‚è®¾ç½®ä¸º1\n\tbytes.buffer[0] = 255 // é”™è¯¯è·å–ï¼Œç¼“å†²åŒºä¸­æ²¡æœ‰ç´¢å¼•å€¼0\n\tbytes.buffer[1] = 255 // é”™è¯¯è®¾ç½®ç¼“å†²åŒºå­—èŠ‚\n\t\n\t```\n\n### â€œå­—èŠ‚é¡ºåºâ€\n- å­—èŠ‚ç»„ç»‡æˆæ›´é•¿çš„å­—çš„é¡ºåº\n- ä¸ºäº†é«˜æ•ˆï¼Œç±»å‹åŒ–æ•°ç»„é‡‡ç”¨åº•å±‚ç¡¬ä»¶çš„åŸç”Ÿé¡ºåºã€‚åœ¨ä½ä½ä¼˜å…ˆ(little-endian)ç³»ç»Ÿä¸­ï¼Œ ArrayBuffer ä¸­æ•°å­—çš„å­—èŠ‚æ˜¯æŒ‰ç…§ä»ä½ä½åˆ°é«˜ä½çš„é¡ºåºæ’åˆ—çš„ã€‚åœ¨é«˜ä½ä¼˜å…ˆ(big-endian)ç³»ç»Ÿä¸­ï¼Œå­—èŠ‚æ˜¯æŒ‰ç…§ä»é«˜ä½åˆ°ä½ä½çš„é¡ºåºæ’åˆ—çš„ã€‚\n- å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥æ£€æµ‹ç³»ç»Ÿçš„å­—èŠ‚é¡ºåºï¼š\n\n\t```javascript\n\t// å¦‚æœæ•´æ•° Ox00000001 åœ¨å†…å­˜ä¸­è¡¨ç¤ºæˆï¼š 01 00 00 00\n\t// åˆ™è¯´æ˜å½“å‰ç³»ç»Ÿæ˜¯ä½ä½ä¼˜å…ˆç³»ç»Ÿ\n\t// ç›¸åï¼Œåœ¨é«˜ä½ä¼˜å…ˆç³»ç»Ÿä¸­ï¼Œå®ƒä¼šè¡¨ç¤ºæˆï¼š00 00 00 01\n\tvar little_endian = new Int8Array(new Int32Array([1]).buffer)[0] === 1\n\t```\n\t\n## æ€è€ƒé—®é¢˜ 0.1 + 0.2 â‰  0.3\n- æˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹çœ‹ åè¿›åˆ¶å°æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼š\n\t- æ•´æ•°éƒ¨åˆ†ï¼šé™¤ä»¥2ï¼Œå–å‡ºä½™æ•°ï¼Œå•†ç»§ç»­é™¤ä»¥2ï¼Œç›´åˆ°å¾—åˆ°0ä¸ºæ­¢ï¼Œå°†å–å‡ºçš„ä½™æ•°é€†åº\n\t- å°æ•°éƒ¨åˆ†ï¼šä¹˜ä»¥2ï¼Œç„¶åå–å‡ºæ•´æ•°éƒ¨åˆ†ï¼Œå°†å‰©ä¸‹çš„å°æ•°éƒ¨åˆ†ç»§ç»­ä¹˜ä»¥2ï¼Œç„¶åå†å–æ•´æ•°éƒ¨åˆ†ï¼Œä¸€ç›´å–åˆ°å°æ•°éƒ¨åˆ†ä¸ºé›¶ä¸ºæ­¢ã€‚å¦‚æœæ°¸è¿œä¸ä¸ºé›¶ï¼Œåˆ™æŒ‰è¦æ±‚ä¿ç•™è¶³å¤Ÿä½æ•°çš„å°æ•°ï¼Œæœ€åä¸€ä½åš0èˆ1å…¥ã€‚å°†å–å‡ºçš„æ•´æ•°é¡ºåºæ’åˆ—ã€‚\n\t- æ‰€ä»¥ 0.1 å¯ä»¥è¡¨ç¤ºä¸º\n\t\t- 0.000110011001100110011...\n\t- 0.2 å¯ä»¥è¡¨ç¤ºä¸º\n\t\t- 0.00110011001100110011...\n\n\t\t\n```javascript\n// 0.1 å’Œ 0.2 éƒ½è½¬åŒ–æˆäºŒè¿›åˆ¶åå†è¿›è¡Œè¿ç®—\n0.00011001100110011001100110011001100110011001100110011010 +\n0.0011001100110011001100110011001100110011001100110011010 =\n0.0100110011001100110011001100110011001100110011001100111\n\n// è½¬æˆåè¿›åˆ¶æ­£å¥½æ˜¯ 0.30000000000000004\n```\n\n- äºŒè¿›åˆ¶æ•°è½¬æˆ IEEE 754 æ ‡å‡†\n\n\t- ![IEEE 754 æ ‡å‡†](http://p0.meituan.net/myvideodistribute/eefbaacb81e66deb742370e27d9e3bb876872.png)\n\n\t- ä½¿ç”¨ 64 ä½å›ºå®šé•¿åº¦æ¥è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†çš„double åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚\n\t- è¿™æ ·çš„å­˜å‚¨ç»“æ„ä¼˜ç‚¹æ˜¯å¯ä»¥å½’ä¸€åŒ–å¤„ç†æ•´æ•°å’Œå°æ•°ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚\n\t- è¿™64ä¸ªæ¯”ç‰¹åˆå¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œå³ï¼š\n\t\t- ç¬¬1ä½: æ˜¯ç¬¦å·çš„æ ‡å¿—ä½(S), 0ä»£è¡¨æ­£æ•°ï¼Œ1ä»£è¡¨è´Ÿæ•°\n\t\t- ç¬¬1-11ä½: æŒ‡æ•°ä½(E), å­˜å‚¨æŒ‡æ•°ï¼ˆexponentï¼‰ï¼Œç”¨æ¥è¡¨ç¤ºæ¬¡æ–¹æ•°\n\t\t- ç¬¬12-63ä½: å°¾æ•°(M), è¿™52 ä½æ˜¯å°¾æ•°ï¼Œè¶…å‡ºçš„éƒ¨åˆ†è‡ªåŠ¨è¿›ä¸€èˆé›¶\n\t- å®é™…æ•°å­—å°±å¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼æ¥è®¡ç®—ï¼š\n\t\t\n\t\t- ![IEEE 754æ•°å­¦å…¬å¼](http://p0.meituan.net/myvideodistribute/7b2c9fce00cfe3bf57fcede347257af276632.png)\n\n\t- å› æ­¤ 0.1 çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼š\t\n\n\t\t> 0.00011001100110011001100110011001100110011001100110011001100...\n\t\n\t\t- é¦–å…ˆ 0.1 æ˜¯æ­£æ•°ï¼Œæ ‡å¿—ä½ \n\t\t\n\t\t\t> Sign = 0\n\t\t\t\n\t\t- å…¶æ¬¡, å°†å°æ•°è½¬åŒ–ä¸ºç§‘å­¦è®¡æ•°æ³•\n\t\t\t\n\t\t\t> 1.100110011001100110011001100110011001100110011001100... * 2^-4\n\t\t\t\n\t\t\t- ç›¸å¯¹äºï¼Œå°æ•°ç‚¹ç§»äº†4ä½ï¼ŒæŒ‡æ•°å‡4\n\t\t\t\n\t\t\t\t> exponent = -4 + 1023 = 1019\n\t\t\t\t\n\t\t\t\t> 01111111011\n\n\t\t- ç”±äºç§‘å­¦è®¡æ•°æ³•, ç¬¬ä¸€ä¸ªæ•°å§‹ç»ˆæ˜¯1, æ‰€ä»¥å¯ä»¥å¿½ç•¥å­˜å‚¨, åªè¦å­˜åé¢çš„52ä½å°±å¯ä»¥äº†\n\t\t- **å¦‚æœè¶…è¿‡äº†52ä½, å°±æ˜¯å¯¹ç¬¬53ä½èˆ0è¿›1**ï¼ˆç²¾åº¦è¯¯å·®ï¼‰, ç»“æœä¹Ÿå°±æ˜¯\n\n\t\t\t> 1001100110011001100110011001100110011001100110011010\n\t\t\n\t- å› æ­¤ 0.1 çš„ IEEE 754 çš„è¡¨ç¤ºï¼š\n\t\n\t\t- ![0.1 çš„IEEE 754](http://p0.meituan.net/myvideodistribute/1ae3cf9f7bda61d8d0849ce05f7657f997288.png)\n\t- åŒç† 0.2 çš„ IEEE 754 çš„è¡¨ç¤ºï¼š\n\t\t\n\t\t- ![0.2 çš„ IEEE 754](http://p0.meituan.net/myvideodistribute/0c5d93145800b45b59a3ef23dc2abe4a97936.png)\n\n### æŸ¥çœ‹ 0.1 è¡¨ç¤ºæ–¹å¼\n\n```javascript\nlet b = new Float64Array([0.1])\nconsole.log(b)\nlet intArr = new Uint8Array(b.buffer)\nfor (let i = 7; i >= 0; i --) {\n    s = intArr[i].toString(2)\n    while(s.length < 8) {\n        s = '0' + s\n    }\n    console.log(s)\n\n}\n```\t\n\n- ![ä½ä½ä¼˜å…ˆç³»ç»Ÿ](http://p0.meituan.net/myvideodistribute/d996e0a508b796f5a3d4f4866c1bf43064783.png)\n- é¦–å…ˆæˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯ä½ä½ä¼˜å…ˆç³»ç»Ÿ(little_endian)\n- ![æŸ¥çœ‹ 0.1 è¡¨ç¤ºæ–¹å¼æˆªå›¾](http://p0.meituan.net/myvideodistribute/de79ee3caac77ddad9398cfeaaf3719f227171.png)\n\t- 0 --> æ ‡å¿—ä½\n\t- 011111111011 --> æŒ‡æ•°ä½\n\t- 1001{12}1010 --> å°¾æ•°\n\n\t\n## å‚è€ƒæ–‡çŒ®\n- ã€ŠJavascript æƒå¨æŒ‡å—ã€‹22.5ç«  ç±»å‹åŒ–æ•°ç»„å’Œ ArrayBuffer P678\n- [å½»åº•ææ‡‚Javascript æµ®ç‚¹æ•°](https://cloud.tencent.com/developer/article/1592651)\n- [äºŒè¿›åˆ¶è½¬æ¢å·¥å…·](http://www.binaryconvert.com/convert_double.html)\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"UTF8-Encoing","published":1,"updated":"2020-10-27T15:21:11.264Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u840028fw9kg7g434e7","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å‘¨ä¸€å’Œå°å§å¦¹ Skady å®è´ç»ƒå®Œèˆåï¼Œäº¤æµäº†ä¸€ä¸ªå°æ—¶æŠ€æœ¯ï¼Œæ˜¯çš„ğŸ™†æˆ‘ä»¬æ²¡æœ‰æ‰¯çš®ï¼Œéš¾å¾—äº¤æµæŠ€æœ¯ã€‚ğŸ¤£å¥¹åœ¨ç©â€œåœ¨Cè¯­è¨€ä¸­ç¼–å†™JSä»£ç ï¼Œç„¶åå†ç¼–è¯‘æˆwasmï¼Œå¯ä»¥åœ¨æµè§ˆå™¨é‡Œè·‘â€ï¼Œæˆ‘ä»¬ç®€å•åœ°äº¤æµäº†ä¸€ä¸‹åº•å±‚å®ç°.<span style=\"color: #bfbfbf\">åº”è¯¥æ˜¯åŸºäº ArrayBuffer çš„</span></li>\n<li>ç„¶åä¸çŸ¥æ€ä¹ˆå°±æƒ³åˆ°äº† 0.1 + 0.2 â‰  0.3ï¼Œè¿™ä¸ªç»å…¸é—®é¢˜</li>\n<li>æƒ³çœ‹çœ‹å®ƒåœ¨å†…å­˜ä¸­çš„è¡¨ç°</li>\n<li>å¹¶è®°å½•ä¸€ä¸‹å°† String å­—ç¬¦ä¸²ï¼Œè½¬æˆå­—èŠ‚æµçš„æ•´ä¸ªå®ç°è¿‡ç¨‹</li>\n<li>å¾€ä¸‹çœ‹å§~ ğŸ¤“</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"å®è·µè¿‡ç¨‹\"><a href=\"#å®è·µè¿‡ç¨‹\" class=\"headerlink\" title=\"å®è·µè¿‡ç¨‹\"></a>å®è·µè¿‡ç¨‹</h2><h4 id=\"æ€»ä½“æ€è·¯\"><a href=\"#æ€»ä½“æ€è·¯\" class=\"headerlink\" title=\"æ€»ä½“æ€è·¯\"></a>æ€»ä½“æ€è·¯</h4><ul>\n<li>ç»Ÿè®¡å­—ç¬¦ä¸²é•¿åº¦</li>\n<li>å¾ªç¯éå†å­—ç¬¦ä¸²ï¼Œè¿›è¡Œç¼–ç </li>\n<li>è¾“å‡ºç¼–ç åçš„å­—èŠ‚æµ</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UTF8_Encoding</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">let</span> length = str.length,</span><br><span class=\"line\">        strIndex = <span class=\"number\">-1</span>,</span><br><span class=\"line\">        strEnd = length - <span class=\"number\">1</span>,</span><br><span class=\"line\">        bytes = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>(length),</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (strIndex++ &lt; strEnd) &#123;</span><br><span class=\"line\">        bytes[index] = str.charCodeAt(strIndex) &amp; <span class=\"number\">0xFF</span>; <span class=\"comment\">// è®¾ç½®ä¸ºä½8ä½å€¼</span></span><br><span class=\"line\">        index += <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> bytes;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å­—èŠ‚æµæ–‡ä»¶è½¬-String\"><a href=\"#å­—èŠ‚æµæ–‡ä»¶è½¬-String\" class=\"headerlink\" title=\"å­—èŠ‚æµæ–‡ä»¶è½¬ String\"></a>å­—èŠ‚æµæ–‡ä»¶è½¬ String</h2><h4 id=\"æ€»ä½“æ€è·¯-1\"><a href=\"#æ€»ä½“æ€è·¯-1\" class=\"headerlink\" title=\"æ€»ä½“æ€è·¯\"></a>æ€»ä½“æ€è·¯</h4><ul>\n<li>ç»Ÿè®¡å­—èŠ‚æµé•¿åº¦</li>\n<li>å¾ªç¯éå†å­—èŠ‚æµï¼Œè¿›è¡Œè§£ç </li>\n<li>è¾“å‡ºè§£ç åçš„å­—èŠ‚æµ</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UTF8_Decoding</span>(<span class=\"params\">bytes</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> str = <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        bytesIndex = <span class=\"number\">-1</span>,</span><br><span class=\"line\">        bytesEnd = bytes.length - <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (bytesIndex ++ &lt; bytesEnd) &#123;</span><br><span class=\"line\">        str += <span class=\"built_in\">String</span>.fromCharCode(bytes[bytesIndex]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> str;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æµ‹è¯•æˆªå›¾\"><a href=\"#æµ‹è¯•æˆªå›¾\" class=\"headerlink\" title=\"æµ‹è¯•æˆªå›¾\"></a>æµ‹è¯•æˆªå›¾</h4><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c1770110908275e40343791324f7dfff154914.png\" alt=\"æµ‹è¯•æˆªå›¾\"></li>\n</ul>\n<h2 id=\"ç±»å‹åŒ–æ•°ç»„\"><a href=\"#ç±»å‹åŒ–æ•°ç»„\" class=\"headerlink\" title=\"ç±»å‹åŒ–æ•°ç»„\"></a>ç±»å‹åŒ–æ•°ç»„</h2><ul>\n<li><p>ç±»å‹åŒ–æ•°ç»„ä¸­çš„å…ƒç´ éƒ½æ˜¯æ•°å­—ã€‚ä½¿ç”¨æ„é€ å‡½æ•°åœ¨åˆ›å»ºç±»å‹åŒ–æ•°ç»„çš„æ—¶å€™å†³å®šäº†æ•°ç»„ä¸­æ•°å­—ï¼ˆæœ‰ç¬¦å·æˆ–è€…æ— ç¬¦å·æ•´æ•°æˆ–è€…æµ®ç‚¹æ•°ï¼‰çš„ç±»å‹å’Œå¤§å°ï¼ˆä»¥ä½ä¸ºå•ä½ï¼‰</p>\n</li>\n<li><p>ç±»å‹åŒ–æ•°ç»„æœ‰å›ºå®šçš„é•¿åº¦ã€‚</p>\n</li>\n<li><p>åœ¨åˆ›å»ºç±»å‹åŒ–æ•°ç»„çš„æ—¶å€™ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ æ€»æ˜¯é»˜è®¤åˆå§‹åŒ–ä¸º0.</p>\n</li>\n<li><p><strong>ç±»å‹åŒ–æ•°ç»„</strong></p>\n<ul>\n<li><p><strong>TypedArray</strong> è§†å›¾æ”¯æŒçš„æ•°æ®ç±»å‹ä¸€å…±æœ‰ 9 ç§ï¼ˆ <strong>DataView</strong> è§†å›¾æ”¯æŒé™¤ <strong>Uint8C</strong> ä»¥å¤–çš„å…¶ä»– 8 ç§ï¼‰ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>æ•°æ®ç±»å‹</th>\n<th>å­—èŠ‚é•¿åº¦</th>\n<th>å«ä¹‰</th>\n<th>å¯¹åº”çš„ C è¯­è¨€ç±»å‹</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Int8</td>\n<td>1</td>\n<td>8 ä½å¸¦ç¬¦å·æ•´æ•°</td>\n<td>signed char</td>\n</tr>\n<tr>\n<td>Uint8</td>\n<td>1</td>\n<td>8 ä½ä¸å¸¦ç¬¦å·æ•´æ•°</td>\n<td>unsigned char</td>\n</tr>\n<tr>\n<td>Uint8C</td>\n<td>1</td>\n<td>8 ä½ä¸å¸¦ç¬¦å·æ•´æ•°ï¼ˆè‡ªåŠ¨è¿‡æ»¤æº¢å‡ºï¼‰</td>\n<td>unsigned char</td>\n</tr>\n<tr>\n<td>Int16</td>\n<td>2</td>\n<td>16 ä½å¸¦ç¬¦å·æ•´æ•°</td>\n<td>short</td>\n</tr>\n<tr>\n<td>Uint16</td>\n<td>2</td>\n<td>16 ä½ä¸å¸¦ç¬¦å·æ•´æ•°</td>\n<td>unsigned short</td>\n</tr>\n<tr>\n<td>Int32</td>\n<td>4</td>\n<td>32 ä½å¸¦ç¬¦å·æ•´æ•°</td>\n<td>int</td>\n</tr>\n<tr>\n<td>Uint32</td>\n<td>4</td>\n<td>32 ä½ä¸å¸¦ç¬¦å·çš„æ•´æ•°</td>\n<td>unsigned int</td>\n</tr>\n<tr>\n<td>Float32</td>\n<td>4</td>\n<td>32 ä½æµ®ç‚¹æ•°</td>\n<td>float</td>\n</tr>\n<tr>\n<td>Float64</td>\n<td>8</td>\n<td>64 ä½æµ®ç‚¹æ•°</td>\n<td>double</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n</li>\n<li><p>åœ¨åˆ›å»ºä¸€ä¸ªç±»å‹åŒ–æ•°ç»„çš„æ—¶å€™ï¼Œå¯ä»¥ä¼ é€’æ•°ç»„å¤§å°ç»™æ„é€ å‡½æ•°ï¼Œæˆ–è€…ä¼ é€’ä¸€ä¸ªæ•°ç»„æˆ–è€…ç±»å‹åŒ–æ•°ç»„æ¥ç”¨äºåˆå§‹åŒ–æ•°ç»„å…ƒç´ ã€‚ä¸€æ—¦åˆ›å»ºäº†ç±»å‹åŒ–æ•°ç»„ï¼Œå°±å¯ä»¥åƒæ“ä½œå…¶ä»–ç±»æ•°ç»„å¯¹è±¡é‚£æ ·ï¼Œé€šè¿‡å¸¸è§„çš„ä¸­æ‹¬å·è¡¨ç¤ºæ³•æ¥å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œè¯»/å†™æ“ä½œã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> bytes = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>(<span class=\"number\">1024</span>); <span class=\"comment\">// 1kbå­—èŠ‚ </span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; bytes.length; i ++) <span class=\"comment\">// å¾ªç¯æ•°ç»„çš„æ¯ä¸ªå…ƒç´ </span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; bytes.length; i ++) <span class=\"comment\">// å¾ªç¯æ•°ç»„çš„æ¯ä¸ªå…ƒç´ </span></span><br><span class=\"line\">\tbytes[i] = i &amp; <span class=\"number\">0xFF</span>; <span class=\"comment\">// è®¾ç½®ä¸ºç´¢å¼•çš„ä½8ä½å€¼</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> copy = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>(bytes); <span class=\"comment\">// åˆ›å»ºæ•°ç»„çš„å‰¯æœ¬</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> ints = <span class=\"keyword\">new</span> <span class=\"built_in\">Int32Array</span>([<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]); <span class=\"comment\">// åŒ…å«è¿™4ä¸ªintå€¼çš„ç±»å‹åŒ–æ•°ç»„</span></span><br></pre></td></tr></table></figure></li>\n<li><p>ç±»å‹åŒ–æ•°ç»„ï¼šä»–ä»¬éƒ½æ˜¯<strong>åŸºæœ¬å­—èŠ‚å—çš„è§†å›¾</strong>ï¼Œç§°ä¸ºä¸€ä¸ª ArrayBuffer ã€‚ArrayBuffer åªæ˜¯ä¸é€æ˜çš„å­—èŠ‚å—ã€‚å¯ä»¥é€šè¿‡ç±»å‹åŒ–æ•°ç»„è·å–è¿™äº›å­—èŠ‚ï¼Œä½†æ˜¯ ArrayBuffer è‡ªå·±å¹¶ä¸æ˜¯ä¸€ä¸ªç±»å‹åŒ–æ•°ç»„ã€‚å¯ä»¥åƒå¯¹ä»»æ„ Javascript å¯¹è±¡é‚£æ ·ï¼Œä½¿ç”¨æ•°å­—æ•°ç»„ç´¢å¼•æ¥æ“ä½œ ArrayBufferã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšå¹¶<strong>ä¸èƒ½èµ‹äºˆè®¿é—®ç¼“å†²åŒºä¸­å­—èŠ‚çš„æƒé™</strong></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> bytes = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>(<span class=\"number\">8</span>); <span class=\"comment\">// åˆ†é…8ä¸ªå­—èŠ‚</span></span><br><span class=\"line\">bytes[<span class=\"number\">0</span>] = <span class=\"number\">1</span> <span class=\"comment\">// æŠŠç¬¬ä¸€ä¸ªå­—èŠ‚è®¾ç½®ä¸º1</span></span><br><span class=\"line\">bytes.buffer[<span class=\"number\">0</span>] = <span class=\"number\">255</span> <span class=\"comment\">// é”™è¯¯è·å–ï¼Œç¼“å†²åŒºä¸­æ²¡æœ‰ç´¢å¼•å€¼0</span></span><br><span class=\"line\">bytes.buffer[<span class=\"number\">1</span>] = <span class=\"number\">255</span> <span class=\"comment\">// é”™è¯¯è®¾ç½®ç¼“å†²åŒºå­—èŠ‚</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"â€œå­—èŠ‚é¡ºåºâ€\"><a href=\"#â€œå­—èŠ‚é¡ºåºâ€\" class=\"headerlink\" title=\"â€œå­—èŠ‚é¡ºåºâ€\"></a>â€œå­—èŠ‚é¡ºåºâ€</h3><ul>\n<li><p>å­—èŠ‚ç»„ç»‡æˆæ›´é•¿çš„å­—çš„é¡ºåº</p>\n</li>\n<li><p>ä¸ºäº†é«˜æ•ˆï¼Œç±»å‹åŒ–æ•°ç»„é‡‡ç”¨åº•å±‚ç¡¬ä»¶çš„åŸç”Ÿé¡ºåºã€‚åœ¨ä½ä½ä¼˜å…ˆ(little-endian)ç³»ç»Ÿä¸­ï¼Œ ArrayBuffer ä¸­æ•°å­—çš„å­—èŠ‚æ˜¯æŒ‰ç…§ä»ä½ä½åˆ°é«˜ä½çš„é¡ºåºæ’åˆ—çš„ã€‚åœ¨é«˜ä½ä¼˜å…ˆ(big-endian)ç³»ç»Ÿä¸­ï¼Œå­—èŠ‚æ˜¯æŒ‰ç…§ä»é«˜ä½åˆ°ä½ä½çš„é¡ºåºæ’åˆ—çš„ã€‚</p>\n</li>\n<li><p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥æ£€æµ‹ç³»ç»Ÿçš„å­—èŠ‚é¡ºåºï¼š</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¦‚æœæ•´æ•° Ox00000001 åœ¨å†…å­˜ä¸­è¡¨ç¤ºæˆï¼š 01 00 00 00</span></span><br><span class=\"line\"><span class=\"comment\">// åˆ™è¯´æ˜å½“å‰ç³»ç»Ÿæ˜¯ä½ä½ä¼˜å…ˆç³»ç»Ÿ</span></span><br><span class=\"line\"><span class=\"comment\">// ç›¸åï¼Œåœ¨é«˜ä½ä¼˜å…ˆç³»ç»Ÿä¸­ï¼Œå®ƒä¼šè¡¨ç¤ºæˆï¼š00 00 00 01</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> little_endian = <span class=\"keyword\">new</span> <span class=\"built_in\">Int8Array</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">Int32Array</span>([<span class=\"number\">1</span>]).buffer)[<span class=\"number\">0</span>] === <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h2 id=\"æ€è€ƒé—®é¢˜-0-1-0-2-â‰ -0-3\"><a href=\"#æ€è€ƒé—®é¢˜-0-1-0-2-â‰ -0-3\" class=\"headerlink\" title=\"æ€è€ƒé—®é¢˜ 0.1 + 0.2 â‰  0.3\"></a>æ€è€ƒé—®é¢˜ 0.1 + 0.2 â‰  0.3</h2><ul>\n<li>æˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹çœ‹ åè¿›åˆ¶å°æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼š<ul>\n<li>æ•´æ•°éƒ¨åˆ†ï¼šé™¤ä»¥2ï¼Œå–å‡ºä½™æ•°ï¼Œå•†ç»§ç»­é™¤ä»¥2ï¼Œç›´åˆ°å¾—åˆ°0ä¸ºæ­¢ï¼Œå°†å–å‡ºçš„ä½™æ•°é€†åº</li>\n<li>å°æ•°éƒ¨åˆ†ï¼šä¹˜ä»¥2ï¼Œç„¶åå–å‡ºæ•´æ•°éƒ¨åˆ†ï¼Œå°†å‰©ä¸‹çš„å°æ•°éƒ¨åˆ†ç»§ç»­ä¹˜ä»¥2ï¼Œç„¶åå†å–æ•´æ•°éƒ¨åˆ†ï¼Œä¸€ç›´å–åˆ°å°æ•°éƒ¨åˆ†ä¸ºé›¶ä¸ºæ­¢ã€‚å¦‚æœæ°¸è¿œä¸ä¸ºé›¶ï¼Œåˆ™æŒ‰è¦æ±‚ä¿ç•™è¶³å¤Ÿä½æ•°çš„å°æ•°ï¼Œæœ€åä¸€ä½åš0èˆ1å…¥ã€‚å°†å–å‡ºçš„æ•´æ•°é¡ºåºæ’åˆ—ã€‚</li>\n<li>æ‰€ä»¥ 0.1 å¯ä»¥è¡¨ç¤ºä¸º<ul>\n<li>0.000110011001100110011â€¦</li>\n</ul>\n</li>\n<li>0.2 å¯ä»¥è¡¨ç¤ºä¸º<ul>\n<li>0.00110011001100110011â€¦</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 0.1 å’Œ 0.2 éƒ½è½¬åŒ–æˆäºŒè¿›åˆ¶åå†è¿›è¡Œè¿ç®—</span></span><br><span class=\"line\"><span class=\"number\">0.00011001100110011001100110011001100110011001100110011010</span> +</span><br><span class=\"line\"><span class=\"number\">0.0011001100110011001100110011001100110011001100110011010</span> =</span><br><span class=\"line\"><span class=\"number\">0.0100110011001100110011001100110011001100110011001100111</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è½¬æˆåè¿›åˆ¶æ­£å¥½æ˜¯ 0.30000000000000004</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>äºŒè¿›åˆ¶æ•°è½¬æˆ IEEE 754 æ ‡å‡†</p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/eefbaacb81e66deb742370e27d9e3bb876872.png\" alt=\"IEEE 754 æ ‡å‡†\"></p>\n</li>\n<li><p>ä½¿ç”¨ 64 ä½å›ºå®šé•¿åº¦æ¥è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†çš„double åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚</p>\n</li>\n<li><p>è¿™æ ·çš„å­˜å‚¨ç»“æ„ä¼˜ç‚¹æ˜¯å¯ä»¥å½’ä¸€åŒ–å¤„ç†æ•´æ•°å’Œå°æ•°ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</p>\n</li>\n<li><p>è¿™64ä¸ªæ¯”ç‰¹åˆå¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œå³ï¼š</p>\n<ul>\n<li>ç¬¬1ä½: æ˜¯ç¬¦å·çš„æ ‡å¿—ä½(S), 0ä»£è¡¨æ­£æ•°ï¼Œ1ä»£è¡¨è´Ÿæ•°</li>\n<li>ç¬¬1-11ä½: æŒ‡æ•°ä½(E), å­˜å‚¨æŒ‡æ•°ï¼ˆexponentï¼‰ï¼Œç”¨æ¥è¡¨ç¤ºæ¬¡æ–¹æ•°</li>\n<li>ç¬¬12-63ä½: å°¾æ•°(M), è¿™52 ä½æ˜¯å°¾æ•°ï¼Œè¶…å‡ºçš„éƒ¨åˆ†è‡ªåŠ¨è¿›ä¸€èˆé›¶</li>\n</ul>\n</li>\n<li><p>å®é™…æ•°å­—å°±å¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼æ¥è®¡ç®—ï¼š</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/7b2c9fce00cfe3bf57fcede347257af276632.png\" alt=\"IEEE 754æ•°å­¦å…¬å¼\"></li>\n</ul>\n</li>\n<li><p>å› æ­¤ 0.1 çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼š    </p>\n<blockquote>\n<p>0.00011001100110011001100110011001100110011001100110011001100â€¦</p>\n</blockquote>\n<ul>\n<li><p>é¦–å…ˆ 0.1 æ˜¯æ­£æ•°ï¼Œæ ‡å¿—ä½ </p>\n<blockquote>\n<p>Sign = 0</p>\n</blockquote>\n</li>\n<li><p>å…¶æ¬¡, å°†å°æ•°è½¬åŒ–ä¸ºç§‘å­¦è®¡æ•°æ³•</p>\n<blockquote>\n<p>1.100110011001100110011001100110011001100110011001100â€¦ * 2^-4</p>\n</blockquote>\n<ul>\n<li><p>ç›¸å¯¹äºï¼Œå°æ•°ç‚¹ç§»äº†4ä½ï¼ŒæŒ‡æ•°å‡4</p>\n<blockquote>\n<p>exponent = -4 + 1023 = 1019</p>\n</blockquote>\n<blockquote>\n<p>01111111011</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p>ç”±äºç§‘å­¦è®¡æ•°æ³•, ç¬¬ä¸€ä¸ªæ•°å§‹ç»ˆæ˜¯1, æ‰€ä»¥å¯ä»¥å¿½ç•¥å­˜å‚¨, åªè¦å­˜åé¢çš„52ä½å°±å¯ä»¥äº†</p>\n</li>\n<li><p><strong>å¦‚æœè¶…è¿‡äº†52ä½, å°±æ˜¯å¯¹ç¬¬53ä½èˆ0è¿›1</strong>ï¼ˆç²¾åº¦è¯¯å·®ï¼‰, ç»“æœä¹Ÿå°±æ˜¯</p>\n<blockquote>\n<p>1001100110011001100110011001100110011001100110011010</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p>å› æ­¤ 0.1 çš„ IEEE 754 çš„è¡¨ç¤ºï¼š</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/1ae3cf9f7bda61d8d0849ce05f7657f997288.png\" alt=\"0.1 çš„IEEE 754\"></li>\n</ul>\n</li>\n<li><p>åŒç† 0.2 çš„ IEEE 754 çš„è¡¨ç¤ºï¼š</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/0c5d93145800b45b59a3ef23dc2abe4a97936.png\" alt=\"0.2 çš„ IEEE 754\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æŸ¥çœ‹-0-1-è¡¨ç¤ºæ–¹å¼\"><a href=\"#æŸ¥çœ‹-0-1-è¡¨ç¤ºæ–¹å¼\" class=\"headerlink\" title=\"æŸ¥çœ‹ 0.1 è¡¨ç¤ºæ–¹å¼\"></a>æŸ¥çœ‹ 0.1 è¡¨ç¤ºæ–¹å¼</h3><pre><code class=\"javascript\"><span class=\"keyword\">let</span> b = <span class=\"keyword\">new</span> <span class=\"built_in\">Float64Array</span>([<span class=\"number\">0.1</span>])\n<span class=\"built_in\">console</span>.log(b)\n<span class=\"keyword\">let</span> intArr = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>(b.buffer)\n<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">7</span>; i &gt;= <span class=\"number\">0</span>; i --) {\n    s = intArr[i].toString(<span class=\"number\">2</span>)\n    <span class=\"keyword\">while</span>(s.length &lt; <span class=\"number\">8</span>) {\n        s = <span class=\"string\">'0'</span> + s\n    }\n    <span class=\"built_in\">console</span>.log(s)\n\n}</code></pre>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/d996e0a508b796f5a3d4f4866c1bf43064783.png\" alt=\"ä½ä½ä¼˜å…ˆç³»ç»Ÿ\"></li>\n<li>é¦–å…ˆæˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯ä½ä½ä¼˜å…ˆç³»ç»Ÿ(little_endian)</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/de79ee3caac77ddad9398cfeaaf3719f227171.png\" alt=\"æŸ¥çœ‹ 0.1 è¡¨ç¤ºæ–¹å¼æˆªå›¾\"><ul>\n<li>0 â€“&gt; æ ‡å¿—ä½</li>\n<li>011111111011 â€“&gt; æŒ‡æ•°ä½</li>\n<li>1001{12}1010 â€“&gt; å°¾æ•°</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li>ã€ŠJavascript æƒå¨æŒ‡å—ã€‹22.5ç«  ç±»å‹åŒ–æ•°ç»„å’Œ ArrayBuffer P678</li>\n<li><a href=\"https://cloud.tencent.com/developer/article/1592651\" target=\"_blank\" rel=\"noopener\">å½»åº•ææ‡‚Javascript æµ®ç‚¹æ•°</a></li>\n<li><a href=\"http://www.binaryconvert.com/convert_double.html\" target=\"_blank\" rel=\"noopener\">äºŒè¿›åˆ¶è½¬æ¢å·¥å…·</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å‘¨ä¸€å’Œå°å§å¦¹ Skady å®è´ç»ƒå®Œèˆåï¼Œäº¤æµäº†ä¸€ä¸ªå°æ—¶æŠ€æœ¯ï¼Œæ˜¯çš„ğŸ™†æˆ‘ä»¬æ²¡æœ‰æ‰¯çš®ï¼Œéš¾å¾—äº¤æµæŠ€æœ¯ã€‚ğŸ¤£å¥¹åœ¨ç©â€œåœ¨Cè¯­è¨€ä¸­ç¼–å†™JSä»£ç ï¼Œç„¶åå†ç¼–è¯‘æˆwasmï¼Œå¯ä»¥åœ¨æµè§ˆå™¨é‡Œè·‘â€ï¼Œæˆ‘ä»¬ç®€å•åœ°äº¤æµäº†ä¸€ä¸‹åº•å±‚å®ç°.<span style=\"color: #bfbfbf\">åº”è¯¥æ˜¯åŸºäº ArrayBuffer çš„</span></li>\n<li>ç„¶åä¸çŸ¥æ€ä¹ˆå°±æƒ³åˆ°äº† 0.1 + 0.2 â‰  0.3ï¼Œè¿™ä¸ªç»å…¸é—®é¢˜</li>\n<li>æƒ³çœ‹çœ‹å®ƒåœ¨å†…å­˜ä¸­çš„è¡¨ç°</li>\n<li>å¹¶è®°å½•ä¸€ä¸‹å°† String å­—ç¬¦ä¸²ï¼Œè½¬æˆå­—èŠ‚æµçš„æ•´ä¸ªå®ç°è¿‡ç¨‹</li>\n<li>å¾€ä¸‹çœ‹å§~ ğŸ¤“</li>\n</ul>","more":"<h2 id=\"å®è·µè¿‡ç¨‹\"><a href=\"#å®è·µè¿‡ç¨‹\" class=\"headerlink\" title=\"å®è·µè¿‡ç¨‹\"></a>å®è·µè¿‡ç¨‹</h2><h4 id=\"æ€»ä½“æ€è·¯\"><a href=\"#æ€»ä½“æ€è·¯\" class=\"headerlink\" title=\"æ€»ä½“æ€è·¯\"></a>æ€»ä½“æ€è·¯</h4><ul>\n<li>ç»Ÿè®¡å­—ç¬¦ä¸²é•¿åº¦</li>\n<li>å¾ªç¯éå†å­—ç¬¦ä¸²ï¼Œè¿›è¡Œç¼–ç </li>\n<li>è¾“å‡ºç¼–ç åçš„å­—èŠ‚æµ</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UTF8_Encoding</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">let</span> length = str.length,</span><br><span class=\"line\">        strIndex = <span class=\"number\">-1</span>,</span><br><span class=\"line\">        strEnd = length - <span class=\"number\">1</span>,</span><br><span class=\"line\">        bytes = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>(length),</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (strIndex++ &lt; strEnd) &#123;</span><br><span class=\"line\">        bytes[index] = str.charCodeAt(strIndex) &amp; <span class=\"number\">0xFF</span>; <span class=\"comment\">// è®¾ç½®ä¸ºä½8ä½å€¼</span></span><br><span class=\"line\">        index += <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> bytes;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å­—èŠ‚æµæ–‡ä»¶è½¬-String\"><a href=\"#å­—èŠ‚æµæ–‡ä»¶è½¬-String\" class=\"headerlink\" title=\"å­—èŠ‚æµæ–‡ä»¶è½¬ String\"></a>å­—èŠ‚æµæ–‡ä»¶è½¬ String</h2><h4 id=\"æ€»ä½“æ€è·¯-1\"><a href=\"#æ€»ä½“æ€è·¯-1\" class=\"headerlink\" title=\"æ€»ä½“æ€è·¯\"></a>æ€»ä½“æ€è·¯</h4><ul>\n<li>ç»Ÿè®¡å­—èŠ‚æµé•¿åº¦</li>\n<li>å¾ªç¯éå†å­—èŠ‚æµï¼Œè¿›è¡Œè§£ç </li>\n<li>è¾“å‡ºè§£ç åçš„å­—èŠ‚æµ</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UTF8_Decoding</span>(<span class=\"params\">bytes</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> str = <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        bytesIndex = <span class=\"number\">-1</span>,</span><br><span class=\"line\">        bytesEnd = bytes.length - <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (bytesIndex ++ &lt; bytesEnd) &#123;</span><br><span class=\"line\">        str += <span class=\"built_in\">String</span>.fromCharCode(bytes[bytesIndex]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> str;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æµ‹è¯•æˆªå›¾\"><a href=\"#æµ‹è¯•æˆªå›¾\" class=\"headerlink\" title=\"æµ‹è¯•æˆªå›¾\"></a>æµ‹è¯•æˆªå›¾</h4><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/c1770110908275e40343791324f7dfff154914.png\" alt=\"æµ‹è¯•æˆªå›¾\"></li>\n</ul>\n<h2 id=\"ç±»å‹åŒ–æ•°ç»„\"><a href=\"#ç±»å‹åŒ–æ•°ç»„\" class=\"headerlink\" title=\"ç±»å‹åŒ–æ•°ç»„\"></a>ç±»å‹åŒ–æ•°ç»„</h2><ul>\n<li><p>ç±»å‹åŒ–æ•°ç»„ä¸­çš„å…ƒç´ éƒ½æ˜¯æ•°å­—ã€‚ä½¿ç”¨æ„é€ å‡½æ•°åœ¨åˆ›å»ºç±»å‹åŒ–æ•°ç»„çš„æ—¶å€™å†³å®šäº†æ•°ç»„ä¸­æ•°å­—ï¼ˆæœ‰ç¬¦å·æˆ–è€…æ— ç¬¦å·æ•´æ•°æˆ–è€…æµ®ç‚¹æ•°ï¼‰çš„ç±»å‹å’Œå¤§å°ï¼ˆä»¥ä½ä¸ºå•ä½ï¼‰</p>\n</li>\n<li><p>ç±»å‹åŒ–æ•°ç»„æœ‰å›ºå®šçš„é•¿åº¦ã€‚</p>\n</li>\n<li><p>åœ¨åˆ›å»ºç±»å‹åŒ–æ•°ç»„çš„æ—¶å€™ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ æ€»æ˜¯é»˜è®¤åˆå§‹åŒ–ä¸º0.</p>\n</li>\n<li><p><strong>ç±»å‹åŒ–æ•°ç»„</strong></p>\n<ul>\n<li><p><strong>TypedArray</strong> è§†å›¾æ”¯æŒçš„æ•°æ®ç±»å‹ä¸€å…±æœ‰ 9 ç§ï¼ˆ <strong>DataView</strong> è§†å›¾æ”¯æŒé™¤ <strong>Uint8C</strong> ä»¥å¤–çš„å…¶ä»– 8 ç§ï¼‰ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>æ•°æ®ç±»å‹</th>\n<th>å­—èŠ‚é•¿åº¦</th>\n<th>å«ä¹‰</th>\n<th>å¯¹åº”çš„ C è¯­è¨€ç±»å‹</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Int8</td>\n<td>1</td>\n<td>8 ä½å¸¦ç¬¦å·æ•´æ•°</td>\n<td>signed char</td>\n</tr>\n<tr>\n<td>Uint8</td>\n<td>1</td>\n<td>8 ä½ä¸å¸¦ç¬¦å·æ•´æ•°</td>\n<td>unsigned char</td>\n</tr>\n<tr>\n<td>Uint8C</td>\n<td>1</td>\n<td>8 ä½ä¸å¸¦ç¬¦å·æ•´æ•°ï¼ˆè‡ªåŠ¨è¿‡æ»¤æº¢å‡ºï¼‰</td>\n<td>unsigned char</td>\n</tr>\n<tr>\n<td>Int16</td>\n<td>2</td>\n<td>16 ä½å¸¦ç¬¦å·æ•´æ•°</td>\n<td>short</td>\n</tr>\n<tr>\n<td>Uint16</td>\n<td>2</td>\n<td>16 ä½ä¸å¸¦ç¬¦å·æ•´æ•°</td>\n<td>unsigned short</td>\n</tr>\n<tr>\n<td>Int32</td>\n<td>4</td>\n<td>32 ä½å¸¦ç¬¦å·æ•´æ•°</td>\n<td>int</td>\n</tr>\n<tr>\n<td>Uint32</td>\n<td>4</td>\n<td>32 ä½ä¸å¸¦ç¬¦å·çš„æ•´æ•°</td>\n<td>unsigned int</td>\n</tr>\n<tr>\n<td>Float32</td>\n<td>4</td>\n<td>32 ä½æµ®ç‚¹æ•°</td>\n<td>float</td>\n</tr>\n<tr>\n<td>Float64</td>\n<td>8</td>\n<td>64 ä½æµ®ç‚¹æ•°</td>\n<td>double</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n</li>\n<li><p>åœ¨åˆ›å»ºä¸€ä¸ªç±»å‹åŒ–æ•°ç»„çš„æ—¶å€™ï¼Œå¯ä»¥ä¼ é€’æ•°ç»„å¤§å°ç»™æ„é€ å‡½æ•°ï¼Œæˆ–è€…ä¼ é€’ä¸€ä¸ªæ•°ç»„æˆ–è€…ç±»å‹åŒ–æ•°ç»„æ¥ç”¨äºåˆå§‹åŒ–æ•°ç»„å…ƒç´ ã€‚ä¸€æ—¦åˆ›å»ºäº†ç±»å‹åŒ–æ•°ç»„ï¼Œå°±å¯ä»¥åƒæ“ä½œå…¶ä»–ç±»æ•°ç»„å¯¹è±¡é‚£æ ·ï¼Œé€šè¿‡å¸¸è§„çš„ä¸­æ‹¬å·è¡¨ç¤ºæ³•æ¥å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œè¯»/å†™æ“ä½œã€‚</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> bytes = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>(<span class=\"number\">1024</span>); <span class=\"comment\">// 1kbå­—èŠ‚ </span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; bytes.length; i ++) <span class=\"comment\">// å¾ªç¯æ•°ç»„çš„æ¯ä¸ªå…ƒç´ </span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; bytes.length; i ++) <span class=\"comment\">// å¾ªç¯æ•°ç»„çš„æ¯ä¸ªå…ƒç´ </span></span><br><span class=\"line\">\tbytes[i] = i &amp; <span class=\"number\">0xFF</span>; <span class=\"comment\">// è®¾ç½®ä¸ºç´¢å¼•çš„ä½8ä½å€¼</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> copy = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>(bytes); <span class=\"comment\">// åˆ›å»ºæ•°ç»„çš„å‰¯æœ¬</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> ints = <span class=\"keyword\">new</span> <span class=\"built_in\">Int32Array</span>([<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]); <span class=\"comment\">// åŒ…å«è¿™4ä¸ªintå€¼çš„ç±»å‹åŒ–æ•°ç»„</span></span><br></pre></td></tr></table></figure></li>\n<li><p>ç±»å‹åŒ–æ•°ç»„ï¼šä»–ä»¬éƒ½æ˜¯<strong>åŸºæœ¬å­—èŠ‚å—çš„è§†å›¾</strong>ï¼Œç§°ä¸ºä¸€ä¸ª ArrayBuffer ã€‚ArrayBuffer åªæ˜¯ä¸é€æ˜çš„å­—èŠ‚å—ã€‚å¯ä»¥é€šè¿‡ç±»å‹åŒ–æ•°ç»„è·å–è¿™äº›å­—èŠ‚ï¼Œä½†æ˜¯ ArrayBuffer è‡ªå·±å¹¶ä¸æ˜¯ä¸€ä¸ªç±»å‹åŒ–æ•°ç»„ã€‚å¯ä»¥åƒå¯¹ä»»æ„ Javascript å¯¹è±¡é‚£æ ·ï¼Œä½¿ç”¨æ•°å­—æ•°ç»„ç´¢å¼•æ¥æ“ä½œ ArrayBufferã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšå¹¶<strong>ä¸èƒ½èµ‹äºˆè®¿é—®ç¼“å†²åŒºä¸­å­—èŠ‚çš„æƒé™</strong></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> bytes = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>(<span class=\"number\">8</span>); <span class=\"comment\">// åˆ†é…8ä¸ªå­—èŠ‚</span></span><br><span class=\"line\">bytes[<span class=\"number\">0</span>] = <span class=\"number\">1</span> <span class=\"comment\">// æŠŠç¬¬ä¸€ä¸ªå­—èŠ‚è®¾ç½®ä¸º1</span></span><br><span class=\"line\">bytes.buffer[<span class=\"number\">0</span>] = <span class=\"number\">255</span> <span class=\"comment\">// é”™è¯¯è·å–ï¼Œç¼“å†²åŒºä¸­æ²¡æœ‰ç´¢å¼•å€¼0</span></span><br><span class=\"line\">bytes.buffer[<span class=\"number\">1</span>] = <span class=\"number\">255</span> <span class=\"comment\">// é”™è¯¯è®¾ç½®ç¼“å†²åŒºå­—èŠ‚</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"â€œå­—èŠ‚é¡ºåºâ€\"><a href=\"#â€œå­—èŠ‚é¡ºåºâ€\" class=\"headerlink\" title=\"â€œå­—èŠ‚é¡ºåºâ€\"></a>â€œå­—èŠ‚é¡ºåºâ€</h3><ul>\n<li><p>å­—èŠ‚ç»„ç»‡æˆæ›´é•¿çš„å­—çš„é¡ºåº</p>\n</li>\n<li><p>ä¸ºäº†é«˜æ•ˆï¼Œç±»å‹åŒ–æ•°ç»„é‡‡ç”¨åº•å±‚ç¡¬ä»¶çš„åŸç”Ÿé¡ºåºã€‚åœ¨ä½ä½ä¼˜å…ˆ(little-endian)ç³»ç»Ÿä¸­ï¼Œ ArrayBuffer ä¸­æ•°å­—çš„å­—èŠ‚æ˜¯æŒ‰ç…§ä»ä½ä½åˆ°é«˜ä½çš„é¡ºåºæ’åˆ—çš„ã€‚åœ¨é«˜ä½ä¼˜å…ˆ(big-endian)ç³»ç»Ÿä¸­ï¼Œå­—èŠ‚æ˜¯æŒ‰ç…§ä»é«˜ä½åˆ°ä½ä½çš„é¡ºåºæ’åˆ—çš„ã€‚</p>\n</li>\n<li><p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥æ£€æµ‹ç³»ç»Ÿçš„å­—èŠ‚é¡ºåºï¼š</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¦‚æœæ•´æ•° Ox00000001 åœ¨å†…å­˜ä¸­è¡¨ç¤ºæˆï¼š 01 00 00 00</span></span><br><span class=\"line\"><span class=\"comment\">// åˆ™è¯´æ˜å½“å‰ç³»ç»Ÿæ˜¯ä½ä½ä¼˜å…ˆç³»ç»Ÿ</span></span><br><span class=\"line\"><span class=\"comment\">// ç›¸åï¼Œåœ¨é«˜ä½ä¼˜å…ˆç³»ç»Ÿä¸­ï¼Œå®ƒä¼šè¡¨ç¤ºæˆï¼š00 00 00 01</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> little_endian = <span class=\"keyword\">new</span> <span class=\"built_in\">Int8Array</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">Int32Array</span>([<span class=\"number\">1</span>]).buffer)[<span class=\"number\">0</span>] === <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h2 id=\"æ€è€ƒé—®é¢˜-0-1-0-2-â‰ -0-3\"><a href=\"#æ€è€ƒé—®é¢˜-0-1-0-2-â‰ -0-3\" class=\"headerlink\" title=\"æ€è€ƒé—®é¢˜ 0.1 + 0.2 â‰  0.3\"></a>æ€è€ƒé—®é¢˜ 0.1 + 0.2 â‰  0.3</h2><ul>\n<li>æˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹çœ‹ åè¿›åˆ¶å°æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼š<ul>\n<li>æ•´æ•°éƒ¨åˆ†ï¼šé™¤ä»¥2ï¼Œå–å‡ºä½™æ•°ï¼Œå•†ç»§ç»­é™¤ä»¥2ï¼Œç›´åˆ°å¾—åˆ°0ä¸ºæ­¢ï¼Œå°†å–å‡ºçš„ä½™æ•°é€†åº</li>\n<li>å°æ•°éƒ¨åˆ†ï¼šä¹˜ä»¥2ï¼Œç„¶åå–å‡ºæ•´æ•°éƒ¨åˆ†ï¼Œå°†å‰©ä¸‹çš„å°æ•°éƒ¨åˆ†ç»§ç»­ä¹˜ä»¥2ï¼Œç„¶åå†å–æ•´æ•°éƒ¨åˆ†ï¼Œä¸€ç›´å–åˆ°å°æ•°éƒ¨åˆ†ä¸ºé›¶ä¸ºæ­¢ã€‚å¦‚æœæ°¸è¿œä¸ä¸ºé›¶ï¼Œåˆ™æŒ‰è¦æ±‚ä¿ç•™è¶³å¤Ÿä½æ•°çš„å°æ•°ï¼Œæœ€åä¸€ä½åš0èˆ1å…¥ã€‚å°†å–å‡ºçš„æ•´æ•°é¡ºåºæ’åˆ—ã€‚</li>\n<li>æ‰€ä»¥ 0.1 å¯ä»¥è¡¨ç¤ºä¸º<ul>\n<li>0.000110011001100110011â€¦</li>\n</ul>\n</li>\n<li>0.2 å¯ä»¥è¡¨ç¤ºä¸º<ul>\n<li>0.00110011001100110011â€¦</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 0.1 å’Œ 0.2 éƒ½è½¬åŒ–æˆäºŒè¿›åˆ¶åå†è¿›è¡Œè¿ç®—</span></span><br><span class=\"line\"><span class=\"number\">0.00011001100110011001100110011001100110011001100110011010</span> +</span><br><span class=\"line\"><span class=\"number\">0.0011001100110011001100110011001100110011001100110011010</span> =</span><br><span class=\"line\"><span class=\"number\">0.0100110011001100110011001100110011001100110011001100111</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è½¬æˆåè¿›åˆ¶æ­£å¥½æ˜¯ 0.30000000000000004</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>äºŒè¿›åˆ¶æ•°è½¬æˆ IEEE 754 æ ‡å‡†</p>\n<ul>\n<li><p><img src=\"http://p0.meituan.net/myvideodistribute/eefbaacb81e66deb742370e27d9e3bb876872.png\" alt=\"IEEE 754 æ ‡å‡†\"></p>\n</li>\n<li><p>ä½¿ç”¨ 64 ä½å›ºå®šé•¿åº¦æ¥è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†çš„double åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚</p>\n</li>\n<li><p>è¿™æ ·çš„å­˜å‚¨ç»“æ„ä¼˜ç‚¹æ˜¯å¯ä»¥å½’ä¸€åŒ–å¤„ç†æ•´æ•°å’Œå°æ•°ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</p>\n</li>\n<li><p>è¿™64ä¸ªæ¯”ç‰¹åˆå¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œå³ï¼š</p>\n<ul>\n<li>ç¬¬1ä½: æ˜¯ç¬¦å·çš„æ ‡å¿—ä½(S), 0ä»£è¡¨æ­£æ•°ï¼Œ1ä»£è¡¨è´Ÿæ•°</li>\n<li>ç¬¬1-11ä½: æŒ‡æ•°ä½(E), å­˜å‚¨æŒ‡æ•°ï¼ˆexponentï¼‰ï¼Œç”¨æ¥è¡¨ç¤ºæ¬¡æ–¹æ•°</li>\n<li>ç¬¬12-63ä½: å°¾æ•°(M), è¿™52 ä½æ˜¯å°¾æ•°ï¼Œè¶…å‡ºçš„éƒ¨åˆ†è‡ªåŠ¨è¿›ä¸€èˆé›¶</li>\n</ul>\n</li>\n<li><p>å®é™…æ•°å­—å°±å¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼æ¥è®¡ç®—ï¼š</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/7b2c9fce00cfe3bf57fcede347257af276632.png\" alt=\"IEEE 754æ•°å­¦å…¬å¼\"></li>\n</ul>\n</li>\n<li><p>å› æ­¤ 0.1 çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼š    </p>\n<blockquote>\n<p>0.00011001100110011001100110011001100110011001100110011001100â€¦</p>\n</blockquote>\n<ul>\n<li><p>é¦–å…ˆ 0.1 æ˜¯æ­£æ•°ï¼Œæ ‡å¿—ä½ </p>\n<blockquote>\n<p>Sign = 0</p>\n</blockquote>\n</li>\n<li><p>å…¶æ¬¡, å°†å°æ•°è½¬åŒ–ä¸ºç§‘å­¦è®¡æ•°æ³•</p>\n<blockquote>\n<p>1.100110011001100110011001100110011001100110011001100â€¦ * 2^-4</p>\n</blockquote>\n<ul>\n<li><p>ç›¸å¯¹äºï¼Œå°æ•°ç‚¹ç§»äº†4ä½ï¼ŒæŒ‡æ•°å‡4</p>\n<blockquote>\n<p>exponent = -4 + 1023 = 1019</p>\n</blockquote>\n<blockquote>\n<p>01111111011</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p>ç”±äºç§‘å­¦è®¡æ•°æ³•, ç¬¬ä¸€ä¸ªæ•°å§‹ç»ˆæ˜¯1, æ‰€ä»¥å¯ä»¥å¿½ç•¥å­˜å‚¨, åªè¦å­˜åé¢çš„52ä½å°±å¯ä»¥äº†</p>\n</li>\n<li><p><strong>å¦‚æœè¶…è¿‡äº†52ä½, å°±æ˜¯å¯¹ç¬¬53ä½èˆ0è¿›1</strong>ï¼ˆç²¾åº¦è¯¯å·®ï¼‰, ç»“æœä¹Ÿå°±æ˜¯</p>\n<blockquote>\n<p>1001100110011001100110011001100110011001100110011010</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p>å› æ­¤ 0.1 çš„ IEEE 754 çš„è¡¨ç¤ºï¼š</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/1ae3cf9f7bda61d8d0849ce05f7657f997288.png\" alt=\"0.1 çš„IEEE 754\"></li>\n</ul>\n</li>\n<li><p>åŒç† 0.2 çš„ IEEE 754 çš„è¡¨ç¤ºï¼š</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/0c5d93145800b45b59a3ef23dc2abe4a97936.png\" alt=\"0.2 çš„ IEEE 754\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æŸ¥çœ‹-0-1-è¡¨ç¤ºæ–¹å¼\"><a href=\"#æŸ¥çœ‹-0-1-è¡¨ç¤ºæ–¹å¼\" class=\"headerlink\" title=\"æŸ¥çœ‹ 0.1 è¡¨ç¤ºæ–¹å¼\"></a>æŸ¥çœ‹ 0.1 è¡¨ç¤ºæ–¹å¼</h3><pre><code class=\"javascript\"><span class=\"keyword\">let</span> b = <span class=\"keyword\">new</span> <span class=\"built_in\">Float64Array</span>([<span class=\"number\">0.1</span>])\n<span class=\"built_in\">console</span>.log(b)\n<span class=\"keyword\">let</span> intArr = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>(b.buffer)\n<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">7</span>; i &gt;= <span class=\"number\">0</span>; i --) {\n    s = intArr[i].toString(<span class=\"number\">2</span>)\n    <span class=\"keyword\">while</span>(s.length &lt; <span class=\"number\">8</span>) {\n        s = <span class=\"string\">'0'</span> + s\n    }\n    <span class=\"built_in\">console</span>.log(s)\n\n}</code></pre>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/d996e0a508b796f5a3d4f4866c1bf43064783.png\" alt=\"ä½ä½ä¼˜å…ˆç³»ç»Ÿ\"></li>\n<li>é¦–å…ˆæˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯ä½ä½ä¼˜å…ˆç³»ç»Ÿ(little_endian)</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/de79ee3caac77ddad9398cfeaaf3719f227171.png\" alt=\"æŸ¥çœ‹ 0.1 è¡¨ç¤ºæ–¹å¼æˆªå›¾\"><ul>\n<li>0 â€“&gt; æ ‡å¿—ä½</li>\n<li>011111111011 â€“&gt; æŒ‡æ•°ä½</li>\n<li>1001{12}1010 â€“&gt; å°¾æ•°</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li>ã€ŠJavascript æƒå¨æŒ‡å—ã€‹22.5ç«  ç±»å‹åŒ–æ•°ç»„å’Œ ArrayBuffer P678</li>\n<li><a href=\"https://cloud.tencent.com/developer/article/1592651\" target=\"_blank\" rel=\"noopener\">å½»åº•ææ‡‚Javascript æµ®ç‚¹æ•°</a></li>\n<li><a href=\"http://www.binaryconvert.com/convert_double.html\" target=\"_blank\" rel=\"noopener\">äºŒè¿›åˆ¶è½¬æ¢å·¥å…·</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"ã€æœªå®Œã€‘react-hooks","date":"2020-04-13T01:37:12.000Z","description":["è®°å½•å­¦ä¹  react-hooks è¿‡ç¨‹ä¸­çš„æ€è€ƒğŸ¤”"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- è®°å½•å­¦ä¹  react-hooks è¿‡ç¨‹ä¸­çš„æ€è€ƒğŸ¤”\n<!-- more -->\n\n## ä¸»è¦æ¦‚å¿µ\n- react 16.8 æ¨å‡º\n- èƒ½å¤Ÿåœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ä½¿ç”¨ state å’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•\n- å®šä¹‰ç»„ä»¶\n\t- class\n\t- F(x) + react-hooks(çµæ´»ã€å¯æµ‹è¯•ã€ä»£ç å¤ç”¨)\n- ä»€ä¹ˆæ˜¯ hooks ?\n\t- å…è®¸ä½ hookä¸€äº›ä¸šåŠ¡é€»è¾‘åˆ°ç»„ä»¶å†…éƒ¨ state å’Œ render å‡½æ•°ä¸Š\n\t- hooks å…è®¸æˆ‘ä»¬å»æ“ä½œè¿™ä¸ªå†…éƒ¨stateäº†\n\t- æ›´å¥½çš„å»å…³æ³¨åˆ†ç¦»å’Œä»£ç å¤ç”¨(ä¼ ç»Ÿ HOCï¼Œå‡½æ•°ä½œä¸ºå­ç»„ä»¶)ï¼Œå°†ç›¸å…³ä»£ç \n- Why Hooks?\n\t- Mixins\n\t\t- å‘½åç©ºé—´è€¦åˆ\n\t\t- é™æ€æ£€æŸ¥\n\t\t- ç»„ä»¶å‚æ•°ä¸æ¸…æ™°\n\t- HOC\n\t\t- è§£å†³å‘½åç©ºé—´è§£è€¦\n\t\t- å¯¹ Class è¿›è¡Œé™æ€æ£€æŸ¥\n\t\t- ç»„ä»¶å‚æ•°ä¸æ¸…æ™°\n\t\t- ç»„ä»¶å®ä¾‹å¢åŠ \n\t- Hooks\n\t\t- å‘½åç©ºé—´è§£è€¦\n\t\t- é™æ€æ£€æŸ¥\n\t\t- ç»„ä»¶å‚æ•°æ¸…æ™°\n\t\t- å•ç»„ä»¶å®ä¾‹\n- ä¸‰ä¸ªåŸºç¡€ hooks\n\t- useState\n\t\t- å…è®¸æ“ä½œç»„ä»¶çš„å†…éƒ¨çŠ¶æ€\n\t\t- å¦‚æœè¦æ ¹æ®ä¹‹å‰çš„çŠ¶æ€å†³å®šä¸‹ä¸€ä¸ªçŠ¶æ€\n\t\t\t- å‚æ•°å¯ä»¥å†™æˆä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥å—çš„å‚æ•°å°±æ˜¯ä¹‹å‰çš„çŠ¶æ€ï¼ŒprevState => nowState\n\t- useEffect\n\t\t- ä½¿ç”¨å‰¯ä½œç”¨\n\t\t- æŒ‡å®šä¸€ä¸ªå‡½æ•°åœ¨æ¯æ¬¡renderå®Œï¼Œå»æ‰§è¡Œä»€ä¹ˆæ ·çš„é€»è¾‘\n\t\t- ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æ˜¯å½“å‰é—­åŒ…ä¸­çš„ä»»ä½•å˜é‡\n\t\t\t- åªæœ‰å½“æ•°ç»„ä¸­çš„å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šè°ƒç”¨å›è°ƒå‡½æ•°\n\t\t\t- å‡½æ•°ç»„ä»¶å†…éƒ¨ï¼Œå¾ˆå®¹æ˜“ç›‘å¬propså˜åŒ–\n\t\t- å¯ä»¥åœ¨ useEffect å›è°ƒå‡½æ•°ä¸­ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä½œä¸ºç»„å»ºé”€æ¯æ—¶çš„ä¸€ä¸ªå›è°ƒï¼Œå…è®¸æ‰§è¡Œä¸€äº›èµ„æºå›æ”¶çš„é€»è¾‘\n\t\t- **useCallback**\n\t\t\t- å°†å›è°ƒå‡½æ•°è¿›è¡Œä¸€ä¸ªç¼“å­˜ï¼Œåªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šè¿”å›ä¸€ä¸ªæ–°çš„äº‹ä»¶å¤„ç†å‡½æ•°\n\t\t\t- useEffect å’Œ useCallbackï¼Œç°åœ¨éƒ½æœ‰ä¸€ä¸ªçº¦å®šï¼Œå›è°ƒå‡½æ•°å†…å¦‚æœä½¿ç”¨äº†å¤–éƒ¨é—­åŒ…ä¸­çš„å˜é‡ï¼Œé‚£ä¹ˆéƒ½åº”è¯¥åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­è¿›è¡Œå£°æ˜\n\t\t\t\t- eslint-plugin-react-hooks\n\t\t\t\t\t- \"react-hooks/rules-of-hooks\": \"error\"\n\t\t\t\t\t\t- ç¡®ä¿å¯¹hooksçš„è°ƒç”¨ï¼Œéƒ½å‘ç”Ÿåœ¨é¡¶å±‚ä½œç”¨åŸŸ\n\t\t\t\t\t- \"react-hooks/exhaustive-deps\": \"warn\"\n\t\t\t\t\t\t- å¿…é¡»æä¾› useEffect å’Œ useCallback ç­‰hooks çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå£°æ˜å›è°ƒå‡½æ•°ä¾èµ–çš„å˜é‡\n\t- useContext\n- è‡ªå®šä¹‰ hooks\n- é¢å¤– hooks\n\t- useReducer\n\t\t- [ç®€å•é¡¹ç›®ï¼šä½¿ç”¨ Hooksï¼šuseReducer ä»£æ›¿ Redux](https://fed.taobao.org/blog/taofed/do71ct/use-the-react-hooks-instead-of-the-redux/?spm=taofed.bloginfo.blog.3.707f5ac8tD5Gxz)\n\t\t\n\t\t\t```javascript\n\t\t\timport providers from './providers';\n\t\t\t\n\t\t\t// æ•°æ® Provider ç»„åˆå™¨\n\t\t\tconst ProvidersComposer = (props) => (\n\t\t\t  props.providers.reduceRight((children, Parent) => (\n\t\t\t    <Parent>{children}</Parent>\n\t\t\t  ), props.children)\n\t\t\t);\n\t\t\t\n\t\t\tconst Provider = (props) => {\n\t\t\t  return (\n\t\t\t    <ProvidersComposer providers={providers}>\n\t\t\t      {props.children}\n\t\t\t    </ProvidersComposer>\n\t\t\t  );\n\t\t\t};\n\t\t\t\n\t\t\texport default Provider;\n\t\t\t```\n\t- useCallback\n\t- useMemo\n\t- useRef\n\t- useImperativeHandle\n\t- useLayoutEffect\n\t- useDebugValue\n\n\t\n## react-hooks æ”¹å†™ TO DO Lists\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/react-hooks.md","raw":"---\ntitle: ã€æœªå®Œã€‘react-hooks\ndate: 2020-04-13 09:37:12\ntags: \n- react\ncategories:\n- react\ndescription:\n- è®°å½•å­¦ä¹  react-hooks è¿‡ç¨‹ä¸­çš„æ€è€ƒğŸ¤”\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- è®°å½•å­¦ä¹  react-hooks è¿‡ç¨‹ä¸­çš„æ€è€ƒğŸ¤”\n<!-- more -->\n\n## ä¸»è¦æ¦‚å¿µ\n- react 16.8 æ¨å‡º\n- èƒ½å¤Ÿåœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ä½¿ç”¨ state å’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•\n- å®šä¹‰ç»„ä»¶\n\t- class\n\t- F(x) + react-hooks(çµæ´»ã€å¯æµ‹è¯•ã€ä»£ç å¤ç”¨)\n- ä»€ä¹ˆæ˜¯ hooks ?\n\t- å…è®¸ä½ hookä¸€äº›ä¸šåŠ¡é€»è¾‘åˆ°ç»„ä»¶å†…éƒ¨ state å’Œ render å‡½æ•°ä¸Š\n\t- hooks å…è®¸æˆ‘ä»¬å»æ“ä½œè¿™ä¸ªå†…éƒ¨stateäº†\n\t- æ›´å¥½çš„å»å…³æ³¨åˆ†ç¦»å’Œä»£ç å¤ç”¨(ä¼ ç»Ÿ HOCï¼Œå‡½æ•°ä½œä¸ºå­ç»„ä»¶)ï¼Œå°†ç›¸å…³ä»£ç \n- Why Hooks?\n\t- Mixins\n\t\t- å‘½åç©ºé—´è€¦åˆ\n\t\t- é™æ€æ£€æŸ¥\n\t\t- ç»„ä»¶å‚æ•°ä¸æ¸…æ™°\n\t- HOC\n\t\t- è§£å†³å‘½åç©ºé—´è§£è€¦\n\t\t- å¯¹ Class è¿›è¡Œé™æ€æ£€æŸ¥\n\t\t- ç»„ä»¶å‚æ•°ä¸æ¸…æ™°\n\t\t- ç»„ä»¶å®ä¾‹å¢åŠ \n\t- Hooks\n\t\t- å‘½åç©ºé—´è§£è€¦\n\t\t- é™æ€æ£€æŸ¥\n\t\t- ç»„ä»¶å‚æ•°æ¸…æ™°\n\t\t- å•ç»„ä»¶å®ä¾‹\n- ä¸‰ä¸ªåŸºç¡€ hooks\n\t- useState\n\t\t- å…è®¸æ“ä½œç»„ä»¶çš„å†…éƒ¨çŠ¶æ€\n\t\t- å¦‚æœè¦æ ¹æ®ä¹‹å‰çš„çŠ¶æ€å†³å®šä¸‹ä¸€ä¸ªçŠ¶æ€\n\t\t\t- å‚æ•°å¯ä»¥å†™æˆä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥å—çš„å‚æ•°å°±æ˜¯ä¹‹å‰çš„çŠ¶æ€ï¼ŒprevState => nowState\n\t- useEffect\n\t\t- ä½¿ç”¨å‰¯ä½œç”¨\n\t\t- æŒ‡å®šä¸€ä¸ªå‡½æ•°åœ¨æ¯æ¬¡renderå®Œï¼Œå»æ‰§è¡Œä»€ä¹ˆæ ·çš„é€»è¾‘\n\t\t- ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æ˜¯å½“å‰é—­åŒ…ä¸­çš„ä»»ä½•å˜é‡\n\t\t\t- åªæœ‰å½“æ•°ç»„ä¸­çš„å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šè°ƒç”¨å›è°ƒå‡½æ•°\n\t\t\t- å‡½æ•°ç»„ä»¶å†…éƒ¨ï¼Œå¾ˆå®¹æ˜“ç›‘å¬propså˜åŒ–\n\t\t- å¯ä»¥åœ¨ useEffect å›è°ƒå‡½æ•°ä¸­ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä½œä¸ºç»„å»ºé”€æ¯æ—¶çš„ä¸€ä¸ªå›è°ƒï¼Œå…è®¸æ‰§è¡Œä¸€äº›èµ„æºå›æ”¶çš„é€»è¾‘\n\t\t- **useCallback**\n\t\t\t- å°†å›è°ƒå‡½æ•°è¿›è¡Œä¸€ä¸ªç¼“å­˜ï¼Œåªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šè¿”å›ä¸€ä¸ªæ–°çš„äº‹ä»¶å¤„ç†å‡½æ•°\n\t\t\t- useEffect å’Œ useCallbackï¼Œç°åœ¨éƒ½æœ‰ä¸€ä¸ªçº¦å®šï¼Œå›è°ƒå‡½æ•°å†…å¦‚æœä½¿ç”¨äº†å¤–éƒ¨é—­åŒ…ä¸­çš„å˜é‡ï¼Œé‚£ä¹ˆéƒ½åº”è¯¥åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­è¿›è¡Œå£°æ˜\n\t\t\t\t- eslint-plugin-react-hooks\n\t\t\t\t\t- \"react-hooks/rules-of-hooks\": \"error\"\n\t\t\t\t\t\t- ç¡®ä¿å¯¹hooksçš„è°ƒç”¨ï¼Œéƒ½å‘ç”Ÿåœ¨é¡¶å±‚ä½œç”¨åŸŸ\n\t\t\t\t\t- \"react-hooks/exhaustive-deps\": \"warn\"\n\t\t\t\t\t\t- å¿…é¡»æä¾› useEffect å’Œ useCallback ç­‰hooks çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå£°æ˜å›è°ƒå‡½æ•°ä¾èµ–çš„å˜é‡\n\t- useContext\n- è‡ªå®šä¹‰ hooks\n- é¢å¤– hooks\n\t- useReducer\n\t\t- [ç®€å•é¡¹ç›®ï¼šä½¿ç”¨ Hooksï¼šuseReducer ä»£æ›¿ Redux](https://fed.taobao.org/blog/taofed/do71ct/use-the-react-hooks-instead-of-the-redux/?spm=taofed.bloginfo.blog.3.707f5ac8tD5Gxz)\n\t\t\n\t\t\t```javascript\n\t\t\timport providers from './providers';\n\t\t\t\n\t\t\t// æ•°æ® Provider ç»„åˆå™¨\n\t\t\tconst ProvidersComposer = (props) => (\n\t\t\t  props.providers.reduceRight((children, Parent) => (\n\t\t\t    <Parent>{children}</Parent>\n\t\t\t  ), props.children)\n\t\t\t);\n\t\t\t\n\t\t\tconst Provider = (props) => {\n\t\t\t  return (\n\t\t\t    <ProvidersComposer providers={providers}>\n\t\t\t      {props.children}\n\t\t\t    </ProvidersComposer>\n\t\t\t  );\n\t\t\t};\n\t\t\t\n\t\t\texport default Provider;\n\t\t\t```\n\t- useCallback\n\t- useMemo\n\t- useRef\n\t- useImperativeHandle\n\t- useLayoutEffect\n\t- useDebugValue\n\n\t\n## react-hooks æ”¹å†™ TO DO Lists\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"react-hooks","published":1,"updated":"2020-10-27T15:21:11.265Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u85002bfw9k1wji5m9o","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>è®°å½•å­¦ä¹  react-hooks è¿‡ç¨‹ä¸­çš„æ€è€ƒğŸ¤”<a id=\"more\"></a>\n\n</li>\n</ul>\n<h2 id=\"ä¸»è¦æ¦‚å¿µ\"><a href=\"#ä¸»è¦æ¦‚å¿µ\" class=\"headerlink\" title=\"ä¸»è¦æ¦‚å¿µ\"></a>ä¸»è¦æ¦‚å¿µ</h2><ul>\n<li><p>react 16.8 æ¨å‡º</p>\n</li>\n<li><p>èƒ½å¤Ÿåœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ä½¿ç”¨ state å’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</p>\n</li>\n<li><p>å®šä¹‰ç»„ä»¶</p>\n<ul>\n<li>class</li>\n<li>F(x) + react-hooks(çµæ´»ã€å¯æµ‹è¯•ã€ä»£ç å¤ç”¨)</li>\n</ul>\n</li>\n<li><p>ä»€ä¹ˆæ˜¯ hooks ?</p>\n<ul>\n<li>å…è®¸ä½ hookä¸€äº›ä¸šåŠ¡é€»è¾‘åˆ°ç»„ä»¶å†…éƒ¨ state å’Œ render å‡½æ•°ä¸Š</li>\n<li>hooks å…è®¸æˆ‘ä»¬å»æ“ä½œè¿™ä¸ªå†…éƒ¨stateäº†</li>\n<li>æ›´å¥½çš„å»å…³æ³¨åˆ†ç¦»å’Œä»£ç å¤ç”¨(ä¼ ç»Ÿ HOCï¼Œå‡½æ•°ä½œä¸ºå­ç»„ä»¶)ï¼Œå°†ç›¸å…³ä»£ç </li>\n</ul>\n</li>\n<li><p>Why Hooks?</p>\n<ul>\n<li>Mixins<ul>\n<li>å‘½åç©ºé—´è€¦åˆ</li>\n<li>é™æ€æ£€æŸ¥</li>\n<li>ç»„ä»¶å‚æ•°ä¸æ¸…æ™°</li>\n</ul>\n</li>\n<li>HOC<ul>\n<li>è§£å†³å‘½åç©ºé—´è§£è€¦</li>\n<li>å¯¹ Class è¿›è¡Œé™æ€æ£€æŸ¥</li>\n<li>ç»„ä»¶å‚æ•°ä¸æ¸…æ™°</li>\n<li>ç»„ä»¶å®ä¾‹å¢åŠ </li>\n</ul>\n</li>\n<li>Hooks<ul>\n<li>å‘½åç©ºé—´è§£è€¦</li>\n<li>é™æ€æ£€æŸ¥</li>\n<li>ç»„ä»¶å‚æ•°æ¸…æ™°</li>\n<li>å•ç»„ä»¶å®ä¾‹</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ä¸‰ä¸ªåŸºç¡€ hooks</p>\n<ul>\n<li>useState<ul>\n<li>å…è®¸æ“ä½œç»„ä»¶çš„å†…éƒ¨çŠ¶æ€</li>\n<li>å¦‚æœè¦æ ¹æ®ä¹‹å‰çš„çŠ¶æ€å†³å®šä¸‹ä¸€ä¸ªçŠ¶æ€<ul>\n<li>å‚æ•°å¯ä»¥å†™æˆä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥å—çš„å‚æ•°å°±æ˜¯ä¹‹å‰çš„çŠ¶æ€ï¼ŒprevState =&gt; nowState</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>useEffect<ul>\n<li>ä½¿ç”¨å‰¯ä½œç”¨</li>\n<li>æŒ‡å®šä¸€ä¸ªå‡½æ•°åœ¨æ¯æ¬¡renderå®Œï¼Œå»æ‰§è¡Œä»€ä¹ˆæ ·çš„é€»è¾‘</li>\n<li>ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æ˜¯å½“å‰é—­åŒ…ä¸­çš„ä»»ä½•å˜é‡<ul>\n<li>åªæœ‰å½“æ•°ç»„ä¸­çš„å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šè°ƒç”¨å›è°ƒå‡½æ•°</li>\n<li>å‡½æ•°ç»„ä»¶å†…éƒ¨ï¼Œå¾ˆå®¹æ˜“ç›‘å¬propså˜åŒ–</li>\n</ul>\n</li>\n<li>å¯ä»¥åœ¨ useEffect å›è°ƒå‡½æ•°ä¸­ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä½œä¸ºç»„å»ºé”€æ¯æ—¶çš„ä¸€ä¸ªå›è°ƒï¼Œå…è®¸æ‰§è¡Œä¸€äº›èµ„æºå›æ”¶çš„é€»è¾‘</li>\n<li><strong>useCallback</strong><ul>\n<li>å°†å›è°ƒå‡½æ•°è¿›è¡Œä¸€ä¸ªç¼“å­˜ï¼Œåªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šè¿”å›ä¸€ä¸ªæ–°çš„äº‹ä»¶å¤„ç†å‡½æ•°</li>\n<li>useEffect å’Œ useCallbackï¼Œç°åœ¨éƒ½æœ‰ä¸€ä¸ªçº¦å®šï¼Œå›è°ƒå‡½æ•°å†…å¦‚æœä½¿ç”¨äº†å¤–éƒ¨é—­åŒ…ä¸­çš„å˜é‡ï¼Œé‚£ä¹ˆéƒ½åº”è¯¥åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­è¿›è¡Œå£°æ˜<ul>\n<li>eslint-plugin-react-hooks<ul>\n<li>â€œreact-hooks/rules-of-hooksâ€: â€œerrorâ€<ul>\n<li>ç¡®ä¿å¯¹hooksçš„è°ƒç”¨ï¼Œéƒ½å‘ç”Ÿåœ¨é¡¶å±‚ä½œç”¨åŸŸ</li>\n</ul>\n</li>\n<li>â€œreact-hooks/exhaustive-depsâ€: â€œwarnâ€<ul>\n<li>å¿…é¡»æä¾› useEffect å’Œ useCallback ç­‰hooks çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå£°æ˜å›è°ƒå‡½æ•°ä¾èµ–çš„å˜é‡</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>useContext</li>\n</ul>\n</li>\n<li><p>è‡ªå®šä¹‰ hooks</p>\n</li>\n<li><p>é¢å¤– hooks</p>\n<ul>\n<li><p>useReducer</p>\n<ul>\n<li><p><a href=\"https://fed.taobao.org/blog/taofed/do71ct/use-the-react-hooks-instead-of-the-redux/?spm=taofed.bloginfo.blog.3.707f5ac8tD5Gxz\" target=\"_blank\" rel=\"noopener\">ç®€å•é¡¹ç›®ï¼šä½¿ç”¨ Hooksï¼šuseReducer ä»£æ›¿ Redux</a></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> providers <span class=\"keyword\">from</span> <span class=\"string\">'./providers'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ•°æ® Provider ç»„åˆå™¨</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ProvidersComposer = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> (</span><br><span class=\"line\">  props.providers.reduceRight(<span class=\"function\">(<span class=\"params\">children, Parent</span>) =&gt;</span> (</span><br><span class=\"line\">    &lt;Parent&gt;&#123;children&#125;&lt;<span class=\"regexp\">/Parent&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  ), props.children)</span></span><br><span class=\"line\"><span class=\"regexp\">);</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">const Provider = (props) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"regexp\">  return (</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;ProvidersComposer providers=&#123;providers&#125;&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &#123;props.children&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>ProvidersComposer&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> Provider;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>useCallback</p>\n</li>\n<li><p>useMemo</p>\n</li>\n<li><p>useRef</p>\n</li>\n<li><p>useImperativeHandle</p>\n</li>\n<li><p>useLayoutEffect</p>\n</li>\n<li><p>useDebugValue</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"react-hooks-æ”¹å†™-TO-DO-Lists\"><a href=\"#react-hooks-æ”¹å†™-TO-DO-Lists\" class=\"headerlink\" title=\"react-hooks æ”¹å†™ TO DO Lists\"></a>react-hooks æ”¹å†™ TO DO Lists</h2><h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>è®°å½•å­¦ä¹  react-hooks è¿‡ç¨‹ä¸­çš„æ€è€ƒğŸ¤”","more":"</li>\n</ul>\n<h2 id=\"ä¸»è¦æ¦‚å¿µ\"><a href=\"#ä¸»è¦æ¦‚å¿µ\" class=\"headerlink\" title=\"ä¸»è¦æ¦‚å¿µ\"></a>ä¸»è¦æ¦‚å¿µ</h2><ul>\n<li><p>react 16.8 æ¨å‡º</p>\n</li>\n<li><p>èƒ½å¤Ÿåœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ä½¿ç”¨ state å’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</p>\n</li>\n<li><p>å®šä¹‰ç»„ä»¶</p>\n<ul>\n<li>class</li>\n<li>F(x) + react-hooks(çµæ´»ã€å¯æµ‹è¯•ã€ä»£ç å¤ç”¨)</li>\n</ul>\n</li>\n<li><p>ä»€ä¹ˆæ˜¯ hooks ?</p>\n<ul>\n<li>å…è®¸ä½ hookä¸€äº›ä¸šåŠ¡é€»è¾‘åˆ°ç»„ä»¶å†…éƒ¨ state å’Œ render å‡½æ•°ä¸Š</li>\n<li>hooks å…è®¸æˆ‘ä»¬å»æ“ä½œè¿™ä¸ªå†…éƒ¨stateäº†</li>\n<li>æ›´å¥½çš„å»å…³æ³¨åˆ†ç¦»å’Œä»£ç å¤ç”¨(ä¼ ç»Ÿ HOCï¼Œå‡½æ•°ä½œä¸ºå­ç»„ä»¶)ï¼Œå°†ç›¸å…³ä»£ç </li>\n</ul>\n</li>\n<li><p>Why Hooks?</p>\n<ul>\n<li>Mixins<ul>\n<li>å‘½åç©ºé—´è€¦åˆ</li>\n<li>é™æ€æ£€æŸ¥</li>\n<li>ç»„ä»¶å‚æ•°ä¸æ¸…æ™°</li>\n</ul>\n</li>\n<li>HOC<ul>\n<li>è§£å†³å‘½åç©ºé—´è§£è€¦</li>\n<li>å¯¹ Class è¿›è¡Œé™æ€æ£€æŸ¥</li>\n<li>ç»„ä»¶å‚æ•°ä¸æ¸…æ™°</li>\n<li>ç»„ä»¶å®ä¾‹å¢åŠ </li>\n</ul>\n</li>\n<li>Hooks<ul>\n<li>å‘½åç©ºé—´è§£è€¦</li>\n<li>é™æ€æ£€æŸ¥</li>\n<li>ç»„ä»¶å‚æ•°æ¸…æ™°</li>\n<li>å•ç»„ä»¶å®ä¾‹</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ä¸‰ä¸ªåŸºç¡€ hooks</p>\n<ul>\n<li>useState<ul>\n<li>å…è®¸æ“ä½œç»„ä»¶çš„å†…éƒ¨çŠ¶æ€</li>\n<li>å¦‚æœè¦æ ¹æ®ä¹‹å‰çš„çŠ¶æ€å†³å®šä¸‹ä¸€ä¸ªçŠ¶æ€<ul>\n<li>å‚æ•°å¯ä»¥å†™æˆä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥å—çš„å‚æ•°å°±æ˜¯ä¹‹å‰çš„çŠ¶æ€ï¼ŒprevState =&gt; nowState</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>useEffect<ul>\n<li>ä½¿ç”¨å‰¯ä½œç”¨</li>\n<li>æŒ‡å®šä¸€ä¸ªå‡½æ•°åœ¨æ¯æ¬¡renderå®Œï¼Œå»æ‰§è¡Œä»€ä¹ˆæ ·çš„é€»è¾‘</li>\n<li>ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æ˜¯å½“å‰é—­åŒ…ä¸­çš„ä»»ä½•å˜é‡<ul>\n<li>åªæœ‰å½“æ•°ç»„ä¸­çš„å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šè°ƒç”¨å›è°ƒå‡½æ•°</li>\n<li>å‡½æ•°ç»„ä»¶å†…éƒ¨ï¼Œå¾ˆå®¹æ˜“ç›‘å¬propså˜åŒ–</li>\n</ul>\n</li>\n<li>å¯ä»¥åœ¨ useEffect å›è°ƒå‡½æ•°ä¸­ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä½œä¸ºç»„å»ºé”€æ¯æ—¶çš„ä¸€ä¸ªå›è°ƒï¼Œå…è®¸æ‰§è¡Œä¸€äº›èµ„æºå›æ”¶çš„é€»è¾‘</li>\n<li><strong>useCallback</strong><ul>\n<li>å°†å›è°ƒå‡½æ•°è¿›è¡Œä¸€ä¸ªç¼“å­˜ï¼Œåªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šè¿”å›ä¸€ä¸ªæ–°çš„äº‹ä»¶å¤„ç†å‡½æ•°</li>\n<li>useEffect å’Œ useCallbackï¼Œç°åœ¨éƒ½æœ‰ä¸€ä¸ªçº¦å®šï¼Œå›è°ƒå‡½æ•°å†…å¦‚æœä½¿ç”¨äº†å¤–éƒ¨é—­åŒ…ä¸­çš„å˜é‡ï¼Œé‚£ä¹ˆéƒ½åº”è¯¥åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­è¿›è¡Œå£°æ˜<ul>\n<li>eslint-plugin-react-hooks<ul>\n<li>â€œreact-hooks/rules-of-hooksâ€: â€œerrorâ€<ul>\n<li>ç¡®ä¿å¯¹hooksçš„è°ƒç”¨ï¼Œéƒ½å‘ç”Ÿåœ¨é¡¶å±‚ä½œç”¨åŸŸ</li>\n</ul>\n</li>\n<li>â€œreact-hooks/exhaustive-depsâ€: â€œwarnâ€<ul>\n<li>å¿…é¡»æä¾› useEffect å’Œ useCallback ç­‰hooks çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå£°æ˜å›è°ƒå‡½æ•°ä¾èµ–çš„å˜é‡</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>useContext</li>\n</ul>\n</li>\n<li><p>è‡ªå®šä¹‰ hooks</p>\n</li>\n<li><p>é¢å¤– hooks</p>\n<ul>\n<li><p>useReducer</p>\n<ul>\n<li><p><a href=\"https://fed.taobao.org/blog/taofed/do71ct/use-the-react-hooks-instead-of-the-redux/?spm=taofed.bloginfo.blog.3.707f5ac8tD5Gxz\" target=\"_blank\" rel=\"noopener\">ç®€å•é¡¹ç›®ï¼šä½¿ç”¨ Hooksï¼šuseReducer ä»£æ›¿ Redux</a></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> providers <span class=\"keyword\">from</span> <span class=\"string\">'./providers'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ•°æ® Provider ç»„åˆå™¨</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ProvidersComposer = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> (</span><br><span class=\"line\">  props.providers.reduceRight(<span class=\"function\">(<span class=\"params\">children, Parent</span>) =&gt;</span> (</span><br><span class=\"line\">    &lt;Parent&gt;&#123;children&#125;&lt;<span class=\"regexp\">/Parent&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  ), props.children)</span></span><br><span class=\"line\"><span class=\"regexp\">);</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">const Provider = (props) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"regexp\">  return (</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;ProvidersComposer providers=&#123;providers&#125;&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &#123;props.children&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>ProvidersComposer&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> Provider;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>useCallback</p>\n</li>\n<li><p>useMemo</p>\n</li>\n<li><p>useRef</p>\n</li>\n<li><p>useImperativeHandle</p>\n</li>\n<li><p>useLayoutEffect</p>\n</li>\n<li><p>useDebugValue</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"react-hooks-æ”¹å†™-TO-DO-Lists\"><a href=\"#react-hooks-æ”¹å†™-TO-DO-Lists\" class=\"headerlink\" title=\"react-hooks æ”¹å†™ TO DO Lists\"></a>react-hooks æ”¹å†™ TO DO Lists</h2><h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"Javascript-convertStringToNumber","date":"2020-04-24T12:49:31.000Z","description":["æ˜¯çš„æˆ‘è¦æŠ˜è…¾ä¸€ä¸‹ Javascript parseInt+parseFloat å†…éƒ¨å®ç°ï¼ŒconvertStringToNumber äº†ğŸ™†"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- ç®€å•è®°å½•ä¸€ä¸‹ï¼ŒJavascript parseInt+parseFloat å†…éƒ¨å®ç°ï¼Œå¹¶å®ç° convertStringToNumber\n\n<!-- more -->\n\n## å®è·µå‡†å¤‡\n- é¦–å…ˆæˆ‘ä»¬éœ€è¦ç®€å•æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬çš„å®ç°è¿‡ç¨‹ï¼Œå†æ ¹æ® [ECMAScript-262](https://www.ecma-international.org/publications/standards/Ecma-262.htm) æ ‡å‡†å®Œå–„å®ç°\n- input: @params: { str } è¾“å…¥éœ€è¦è½¬æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n- å¯¹ input çš„ç®€å•å¤„ç† StringNumericLiteral\n\t- è§„æ ¼åŒ– str\n\t- ![StringNumericLiteral BNF](http://p0.meituan.net/myvideodistribute/6f4d129d30fe4d0b45743d72da9760ca14615.png)\n\t\t- å°† str ä¸­å¯èƒ½å‡ºç°çš„ StrWhiteSpace å»æ‰\n\t\t\t- ![StrWhiteSpace BNF](http://p0.meituan.net/myvideodistribute/3ab76a2ee0627ddeeec42e093ae8307717214.png)\n\t\t\t\t- ![LineTerminator BNF](http://p0.meituan.net/myvideodistribute/d9ba181d676994f053ba3ba067279cf48592.png)\n\t- åˆ¤æ–­ radix æ˜¯å¦åˆæ³•ï¼Œä»…æ”¯æŒ Decimal / BinaryInteger / OctalInteger / HexInteger radix\n\t\t- Decimal: 10\n\t\t- BinaryInteger: 2\n\t\t- OctalInteger: 8\n\t\t- HexInteger: 16\n- ç®€å•ç®—æ³•å¤„ç†è¿‡ç¨‹\n\t- åè¿›åˆ¶æ•°\n\t\t- ![StrDecimalLiteral BNF](http://p0.meituan.net/myvideodistribute/dbb89c490f4cbe92ce1e7b1025912cde51542.png)\n\t\t- å¤„ç† Infinity æƒ…å†µ\n\t\t- ç¬¦å·ä½å¤„ç†\n\t\t- å°æ•°ç‚¹\n\t\t- ç§‘å­¦è®¡æ•°æ³•\n\t- äºŒè¿›åˆ¶æ•°\n\t\t- ![BinaryInteger](http://p1.meituan.net/myvideodistribute/f12e98da62b6529c1d3781a6c1dc36a86760.png)\n\t- å…«è¿›åˆ¶æ•°\n\t\t- ![OctalInteger](http://p1.meituan.net/myvideodistribute/e11bf633f8350bb17f761b719762ed038371.png)\n\t- åå…­è¿›åˆ¶æ•°\n\t\t- ![HexInteger](http://p0.meituan.net/myvideodistribute/274e704676b7d52093ac555c4b43f61013946.png)\n- output: return number\n\n## è¯¦ç»†å®è·µ\n- æ ¹æ®ä¸Šé¢çš„å®è·µå‡†å¤‡\n\n```javascript\n/*\n* @params: { str } è¾“å…¥éœ€è¦è½¬æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n* return: number\n*/\nfunction convertStringToNumber(str, radix) {\n  const noWhiteSpaceStr = replaceWhiteSpaceInStr(str) /** å°† str ä¸­çš„ whitespace è¿›è¡ŒåŒ¹é… */\n  const checkedRadixStr = formatStrByRadix(str, radix) /** å°† str æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œè½¬æ¢ */\n  let resNum = 0\n  switch (radix) {\n    case 10:\n      resNum = converStringToDeciaml(str) /** å°† str è½¬æˆåè¿›åˆ¶ */\n      break;\n    case 2:\n      resNum = converStringToBinaryInteger(str) /** å°† str è½¬æˆäºŒè¿›åˆ¶*/\n      break;\n    case 8:\n      resNum = converStringToOctalInteger(str) /** å°† str è½¬æˆå…«è¿›åˆ¶*/\n      break;\n    case 16:\n      resNum = converStringToHexIntegers(str) /** å°† str è½¬æˆåå…­è¿›åˆ¶*/\n      break;\n    default:\n      return NaN\n  }\n  return resNum\n}\n```\n- å°† str ä¸­çš„ whitespace è¿›è¡ŒåŒ¹é…\n\t\n\t```javascript\n\t/*\n\t* @params: { str } è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸²\n\t* return: resStr æ—  whitespace å­—ç¬¦ä¸²\n\t*/\n\tfunction replaceWhiteSpaceInStr(str) {\n\t  let resStr = str.replace(/\\s*/g, '') // å»é™¤ç©ºæ ¼\n\t  // resStr = resStr.replace(/^[\\u000A|\\u000D|\\u2028|\\u2029]/g, '') // å»é™¤ LineTerminator unicodeè¾“å…¥æ–¹å¼\n\t  resStr =  resStr.replace(/[\\r|\\n]/g, '') // å»é™¤æ¢è¡Œ\n\t  return resStr\n\t}\n\t```\n\t- å•å…ƒæµ‹è¯•\n\t\t- ![å•å…ƒæµ‹è¯•æˆªå›¾](http://p0.meituan.net/myvideodistribute/a70fa86dd4d8261537f8cbf5c0e5bc2c71147.png)\n- å°† str æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œè½¬æ¢\n\t- [æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… Number å­—é¢é‡](https://ele-peng.github.io/2020/04/20/Reg-Number/)\n\t\n\t```javascript\n\t/*\n\t* @params: { str } è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n\t* return: resStr æ ¹æ®æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²\n\t*/\n\tfunction formatStrByRadix(str, radix) {\n\t  let resStr = ''\n\t  let testReg = null\n\t  switch (radix) {\n\t    case 10:\n\t      testReg = /^((0)|([1-9][0-9]*))?.?([0-9]*)((e|E)?(\\+|\\-)?([0-9]*))?/\n\t      break;\n\t    case 2:\n\t      // æ ¹æ® ECMA-262 æ˜¯ /^0(b|B)(0|1)+$/\n\t      // ä½†æ˜¯æˆ‘åœ¨ Chrome æµè§ˆå™¨ä¸Šæµ‹äº†ï¼ŒäºŒè¿›åˆ¶æ²¡æœ‰ 'b' or 'B'\n\t      testReg = /^(0|1)+/\n\t      break;\n\t    case 8:\n\t      // æ ¹æ® ECMA-262 æ˜¯ /^0(O|o)[0-7]+$/\n\t      // ä½†æ˜¯æˆ‘åœ¨ Chrome æµè§ˆå™¨ä¸Šæµ‹äº†ï¼ŒäºŒè¿›åˆ¶æ²¡æœ‰ 'o' or 'O'\n\t      testReg = /^[0-7]+/\n\t      break;\n\t    case 16:\n\t      // æ ¹æ® ECMA-262 æ˜¯ /^0(x|X)([0-9a-fA-F])+/\n\t      // ä½†æ˜¯æˆ‘åœ¨ Chrome æµè§ˆå™¨è‡ªæµ‹ä¸­å‘ç°ï¼Œæ²¡æœ‰è¡¨ç¤ºç¬¦ 'x' or 'X'ä¹Ÿå¯\n\t      testReg = /^0(x|X)?([0-9a-fA-F])+/\n\t      break;\n\t    default:\n\t      console.log(`radix: ${radix}, str:  ${str} illegal radix`)\n\t      return false\n\t  }\n\t  resStr = (testReg.exec(str) && testReg.exec(str)['0']) || 'convert fail'\n\t  console.log(`radix: ${radix}, ${str} --> resStr: `, resStr)\n\t}\n\tformatStrByRadix('001010101', 3)\n\tformatStrByRadix('001010101', 2)\n\tformatStrByRadix('001010101', 8)\n\tformatStrByRadix('0b01010101', 2)\n\tformatStrByRadix('012345677', 8)\n\tformatStrByRadix('012345677', 2)\n\tformatStrByRadix('0o12345677', 8)\n\tformatStrByRadix('1.01E+23', 10)\n\tformatStrByRadix('.012345677', 10)\n\tformatStrByRadix('.012345677', 10)\n\tformatStrByRadix('0123acfACF', 16)\n\tformatStrByRadix('0x123acfACF', 16)\n\tformatStrByRadix('0x123acfACFG', 16)\n\t```\n\t- å•å…ƒæµ‹è¯•\n\t\t- ![å•å…ƒæµ‹è¯•](http://p0.meituan.net/myvideodistribute/ff9d3e6a3cd279427f8873f91911290774369.png)\n\n- æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œç›¸åº”ç®—æ³•è½¬æ¢\n\t- äºŒè¿›åˆ¶ï¼š\n\t\t\n\t\t```javascript\n\t\t\n\t\t// å°† str è½¬æˆäºŒè¿›åˆ¶\n\t\tfunction converStringToBinaryInteger(str, radix) {\n\t\t  return strMultipleRadix(str, radix)\n\t\t}\n\t\t\n\t\t/*\n\t\t* @params: { str } è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n\t\t* return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²\n\t\t*/\n\t\tfunction strMultipleRadix(str, radix) {\n\t\t  let tempStrArr = str.split('')\n\t\t  let res = 0\n\t\t  for (let i = tempStrArr.length - 1; i > 0; i --) {\n\t\t    res += (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, tempStrArr.length - i - 1)\n\t\t  }\n\t\t  return res\n\t\t}\n\t\tconverStringToBinaryInteger('001010101', 2)\n\t\t```\n\t\t\n\t\t- å•å…ƒæµ‹è¯•\n\t\t\t- ![å•å…ƒæµ‹è¯•æˆªå›¾](http://p0.meituan.net/myvideodistribute/5f3f3d1a2d0851eddaa1e258a182831864745.png)\n\t- å…«è¿›åˆ¶\n\t\t- åŒä¸Š\n\n\t\t\t```javascript\n\t\t\t// å°† str è½¬æˆå…«è¿›åˆ¶\n\t\t\tfunction converStringToBinaryInteger(str, radix) {\n\t\t\t  return strMultipleRadix(str, radix)\n\t\t\t}\n\t\t\t\n\t\t\t/*\n\t\t\t* @params: { str } è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n\t\t\t* return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²\n\t\t\t*/\n\t\t\tfunction strMultipleRadix(str, radix) {\n\t\t\t  let tempStrArr = str.split('')\n\t\t\t  let res = 0\n\t\t\t  for (let i = tempStrArr.length - 1; i > 0; i --) {\n\t\t\t    res += (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, tempStrArr.length - i - 1)\n\t\t\t  }\n\t\t\t  return res\n\t\t\t}\n\t\t\tconverStringToBinaryInteger('001010101', 2)\n\t\t\t```\n\t\t- å•å…ƒæµ‹è¯•\n\t\t\t- ![å•å…ƒæµ‹è¯•æˆªå›¾](http://p1.meituan.net/myvideodistribute/e9db13d824513d4e72509cd571f90dc069034.png)\n\t- åå…­è¿›åˆ¶\n\t\t- éœ€è¦å¯¹ a-f A-F è¿›è¡Œåˆ¤æ–­ï¼Œåˆ«å¿˜äº†+10\n\n\t\t\t```javascript\n\t\t\t  // å°† str è½¬æˆåå…­è¿›åˆ¶\n\t\t\t  function converStringToBinaryInteger(str, radix) {\n\t\t\t    return strMultipleRadix(str, radix)\n\t\t\t  }\n\t\t\t\n\t\t\t  /*\n\t\t\t  * @params: { str } è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n\t\t\t  * return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²\n\t\t\t  */\n\t\t\t  function strMultipleRadix(str, radix) {\n\t\t\t    let tempStrArr = str.split('')\n\t\t\t    let res = 0\n\t\t\t    for (let i = tempStrArr.length - 1; i > 0; i--) {\n\t\t\t      if (radix === 16) {\n\t\t\t        if ((tempStrArr[i].codePointAt(0) - '0'.codePointAt(0) >= 0) && (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0) < 10)) {\n\t\t\t          res += (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, tempStrArr.length - i - 1)\n\t\t\t        } else if ((tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0) >= 0) && (tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0) < 6)) {\n\t\t\t          console.log('(tempStrArr[i].codePointAt(0)a', tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0))\n\t\t\t          res += (tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0) + 10) * Math.pow(radix, tempStrArr.length - i - 1)\n\t\t\t        } else if ((tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0) >= 0) && (tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0) < 6)) {\n\t\t\t          console.log('(tempStrArr[i].codePointAt(0)A', tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0))\n\t\t\t          res += (tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0) + 10) * Math.pow(radix, tempStrArr.length - i - 1)\n\t\t\t        }\n\t\t\t      } else {\n\t\t\t        res += (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, tempStrArr.length - i - 1)\n\t\t\t      }\n\t\t\t    }\n\t\t\t    return res\n\t\t\t  }\n\t\t\t  console.log(converStringToBinaryInteger('001010101', 16))\n\t\t\t  console.log(converStringToBinaryInteger('00101acfAFF', 16))\n\t\t\t```\n\t\t- å•å…ƒæµ‹è¯•\n\t\t\t- ![å•å…ƒæµ‹è¯•æˆªå›¾](http://p0.meituan.net/myvideodistribute/e2e319f170fe2334f7b589cfc0f77b06205824.png)\n- æœ€ç»ˆäºŒ/å…«/åå…­è¿›åˆ¶æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œç›¸åº”ç®—æ³•è½¬æ¢æ–¹æ³•ä¸ºï¼š\n\t\n\t```javascript\n\t\t/*\n\t  * @params: { str } è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n\t  * return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²\n\t  */\n\t  function strMultipleRadix(str, radix) {\n\t    let tempStrArr = str.split('')\n\t    let res = 0\n\t    for (let i = tempStrArr.length - 1; i > 0; i--) {\n\t      if (radix === 16) {\n\t        if ((tempStrArr[i].codePointAt(0) - '0'.codePointAt(0) >= 0) && (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0) < 10)) {\n\t          res += (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, tempStrArr.length - i - 1)\n\t        } else if ((tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0) >= 0) && (tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0) < 6)) {\n\t          res += (tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0) + 10) * Math.pow(radix, tempStrArr.length - i - 1)\n\t        } else if ((tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0) >= 0) && (tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0) < 6)) {\n\t          res += (tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0) + 10) * Math.pow(radix, tempStrArr.length - i - 1)\n\t        }\n\t      } else {\n\t        res += (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, tempStrArr.length - i - 1)\n\t      }\n\t    }\n\t    return res\n\t  }\n\t```\n### è½¬æ¢æˆåè¿›åˆ¶\n- å®è·µæ€è·¯\n\t1. åˆ¤æ–­æ­£è´Ÿç¬¦å·ä½\n\t2. åˆ¤æ–­æ˜¯å¦ä¸º Infinity\n\t3. åˆ¤æ–­æ˜¯å¦ä¸º æ•´æ•°\n\t\t1. æ•´æ•°\n\t\t\t1. æ˜¯å¦ä¸ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤º\n\t\t\t\t1. æ˜¯ï¼Œé€šè¿‡æŒ‡æ•°ä½ç½®åˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ•´æ•°éƒ¨åˆ†+æŒ‡æ•°éƒ¨åˆ†\n\t\t\t\t2. å¦ï¼Œåªéœ€å¤„ç†æ•´æ•°éƒ¨åˆ†\n\t\t2. å°æ•°\n\t\t\t1. æ˜¯å¦ä¸ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤º\n\t\t\t\t1. æ˜¯ï¼Œé€šè¿‡åˆ†å‰²æˆå°æ•°ç‚¹åˆ°æŒ‡æ•°ï¼Œåˆ†æˆä¸‰éƒ¨åˆ†ï¼šæ•´æ•°éƒ¨åˆ†+å°æ•°éƒ¨åˆ†+æŒ‡æ•°éƒ¨åˆ†\n\t\t\t\t2. å¦ï¼Œé€šè¿‡å°æ•°ç‚¹ä½ç½®ï¼Œåˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ•´æ•°éƒ¨åˆ†+å°æ•°éƒ¨åˆ†\n\t\n- ä»£ç å¤§è‡´ä¸ºï¼š\n\n\n```javascript \n  function converStringToDeciaml(str) {\n    // console.log('str-=-=--=-==-=', str)\n    const sign = getSign(str)\n    const strFormatBySign = formatStrBySign(str)\n    if (isInfinity(strFormatBySign)) return (1 / 0) * sign // å¦‚æœä¸º Inifity,ä¹˜ä»¥ç¬¦å·ä½è¾“å‡ºInfinity\n    const numberObject = splitStr(strFormatBySign)\n    const {int, float, exponentSign, exponent} = numberObject\n    // console.log('numberObject', numberObject)\n    const resInt = calculateInt(int) // è®¡ç®—æ•´æ•°éƒ¨åˆ†\n    // console.log('resInt', resInt)\n    const resFloat = calculateFloat(float) // è®¡ç®—å°æ•°éƒ¨åˆ†\n    // console.log('resFloat', resFloat)\n    const resExponent = calculateExponent(resInt, resFloat, exponentSign, exponent) // è®¡ç®—ï¼ˆæ•´æ•°+å°æ•°ï¼‰*  æŒ‡æ•°éƒ¨åˆ†\n    const res = sign * resExponent // æœ€åä¹˜ä»¥ç¬¦å·ä½\n    return res\n  }\n```\n\t\n#### åˆ¤æ–­æ­£è´Ÿï¼Œå¹¶æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²\n\n```javascript\n\n  // è·å–ç¬¦å·ä½\n  function getSign(str) {\n    // å¦‚æœSçš„é¦–å­—ç¬¦ä¸º'-'\n    if(str.indexOf('-') == 0) { \n      return -1\n    }\n    return 1\n  }\n```\n#### æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆç§»é™¤å­—ç¬¦å·ä½ï¼‰\n\n```javascript\n  // æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²\n  function formatStrBySign(str) {\n    // å¦‚æœ str çš„é¦–å­—ç¬¦ä¸ºâ€˜+â€™æˆ–'-'ï¼Œåˆ™ç§»é™¤é¦–å­—ç¬¦\n    if (str.indexOf('-') == 0 || str.indexOf('+') == 0) {\n      str = str.substring(1, str.length)\n    }\n    return str\n  }\n```\n\n#### åˆ¤æ–­æ˜¯å¦ä¸ºInfinity\n\n```javascript\n  // æ˜¯å¦ä¸º Infinity\n  function isInfinity(str) {\n    const testReg = /^Infinity/\n    let resReg = testReg.exec(str)\n    return resReg && resReg[0]\n  }\n```\n\n#### åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œåˆ†æˆæ•´æ•°+å°æ•°+æŒ‡æ•°ä½ç¬¦å·+æŒ‡æ•°éƒ¨åˆ†\n\n```javascript\n  // åˆ‡å‰²å­—ç¬¦ä¸²\n  /*\n  * @params: { str } è¾“å…¥éœ€è¦åˆ‡å‰²çš„å­—ç¬¦ä¸²\n  * return: res: Object {\n  *   int: æ•´æ•°ä½,\n  *   float: å°æ•°ä½,\n  *   exponentSign: æŒ‡æ•°ä½ç¬¦å·,\n  *   exponent: æŒ‡æ•°ä½\n  * }\n  */\n  function splitStr(str) {\n    const testReg = /^((0)|([1-9][0-9]*))?.?([0-9]*)(e|E)?((\\+|\\-)?([0-9]*))?/\n    let resReg = testReg.exec(str)\n    let res = {\n      int: resReg['1'] || 0,\n      float: resReg['4'] || 0,\n      exponentSign: resReg['7'] || '+',\n      exponent: resReg['8'] || 0\n    }\n    return res\n  }\n```\n\n#### æ•´æ•°éƒ¨åˆ†è¿ç®—\n\n```javascript\n\n  // æ•´æ•°éƒ¨åˆ†è¿ç®—\n  function calculateInt(str) {\n    let res = 0\n    const radix = 10\n    for (let i = str.length - 1; i >= 0; i--) {\n      res += (str[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, str.length - i - 1)\n    }\n    return res\n  }\n```\n\n\n#### å°æ•°éƒ¨åˆ†è¿ç®—\n\n```javascript\n\n  // å°æ•°éƒ¨åˆ†è¿ç®—\n  function calculateFloat(str) {\n    let res = 0\n    const radix = 10\n    for (let i = 0; i < str.length; i++) {\n      res += (str[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, i * -1)\n    }\n    return res\n  }\n```\n\n\n#### æŒ‡æ•°éƒ¨åˆ†è¿ç®—\n\n```javascript\n\n  // æŒ‡æ•°éƒ¨åˆ†è¿ç®—\n  function calculateExponent(int, float, exponentSign, exponent) {\n    // if (float)\n    let str = int + 0.1 * float\n    const radix = 10\n    const exponentInt = calculateInt(exponent)\n    if (exponentSign === '+') {\n      str = str * Math.pow(radix, exponentInt)\n    } else {\n      str = str * Math.pow(radix, exponentInt * -1)\n    }\n    // console.log('Math.abs(str)', Math.abs(str) -  Math.floor(str))\n    // // console.log('Number.EPSILON', Number.EPSILON)\n    // if (Math.abs(str) -  Math.floor(str)) {\n    //   return str.toFixed(1)\n    // }\n    return str\n  }\n```\n\n#### å•å…ƒæµ‹è¯•\n- æµ‹è¯•ç”¨ä¾‹\n\n```javascript\n  console.log(converStringToDeciaml('1.0e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('1.0e+10', 10))\n  console.log(converStringToDeciaml('-1.0e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('-1.0e+10', 10))\n  console.log(converStringToDeciaml('1.012e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('1.012e+10', 10))\n  console.log(converStringToDeciaml('-1.012e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('-1.012e+10', 10))\n  console.log(converStringToDeciaml('.012e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('.012e+10', 10))\n  console.log(converStringToDeciaml('-.012e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('-.012e+10', 10))\n  console.log(converStringToDeciaml('0.12e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('0.12e+10', 10))\n  console.log(converStringToDeciaml('-0.12e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('-0.12e+10', 10))\n  console.log(converStringToDeciaml('1.2e-10'))\n  console.log('parseFloat ç»“æœ', parseFloat('1.2e-10', 10))\n  console.log(converStringToDeciaml('-1.2e-10'))\n  console.log('parseFloat ç»“æœ', parseFloat('-1.2e-10', 10))\n  console.log(converStringToDeciaml('-1.22'))\n  console.log('parseFloat ç»“æœ', parseFloat('-1.22', 10))\n  console.log(converStringToDeciaml('Infinity'))\n  console.log('parseFloat ç»“æœ', parseFloat('Infinity', 10))\n  console.log(converStringToDeciaml('Infinity2222'))\n  console.log('parseFloat ç»“æœ', parseFloat('Infinity2222', 10))\n  console.log(converStringToDeciaml('22Infinity2222'))\n  console.log('parseFloat ç»“æœ', parseFloat('22Infinity2222', 10))\n```\n\n- æµ‹è¯•æˆªå›¾\n- ![ç¬¬ä¸€éƒ¨åˆ†æµ‹è¯•æˆªå›¾](http://p1.meituan.net/myvideodistribute/f3bc45ab42eea92318ad58711d21a666220332.png)\n- ![ç¬¬äºŒéƒ¨åˆ†æµ‹è¯•æˆªå›¾](http://p1.meituan.net/myvideodistribute/2cf7b8c0ae63f2009cbd77d83dec1e2c176792.png)\n\n## å¾…è§£å†³é—®é¢˜\n- æ˜¯çš„ ğŸ˜­ å®ƒçš„æµ®ç‚¹æ•°çš„èˆå…¥ï¼Œæˆ‘æ²¡æœ‰æƒ³åˆ°å¥½çš„æ–¹æ³•ï¼Œå“­å”§å”§\n- [ä»£ç åœ°å€](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week03/convertStringToNumber.html)\n\n\n## å†™åœ¨åé¢\n- ç­‰æˆ‘æœ‰ç©ºæŠŠåšå®¢è¯„è®ºæä¸€ä¸‹ï¼Œæ¬¢è¿å¤§å®¶æ¥å‘Šè¯‰æˆ‘çš„é—ç•™é—®é¢˜è¯¥æ€ä¹ˆè§£å†³ï¼Œä»¥åŠä½ ä»¬åœ¨å‚è€ƒæˆ‘çš„å®ç°æ—¶ï¼Œæœ‰æµ‹è¯•ç”¨ä¾‹è¿‡ä¸å»çš„åœ°æ–¹ï¼Œä¹Ÿå¯ä»¥è¯„è®ºå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼˜åŒ–ä»£ç ã€‚\n- å¤§å®¶ç­‰ä¸åŠçš„è¯ï¼Œå¯ä»¥å»æˆ‘çš„ [csdn](https://blog.csdn.net/Elle_Peng/article/details/105748022) è¯„è®ºå‘Šè¯‰æˆ‘ï¼Œå‘å¾®å°å½­ï¼Œåœ¨çº¿æ±‚è§£\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/convertStringToNumber.md","raw":"---\ntitle: Javascript-convertStringToNumber\ndate: 2020-04-24 20:49:31\ntags: \n- å‰ç«¯æ¦‚å¿µ\n- ç®—æ³•\ncategories:\n- [å‰ç«¯æ¦‚å¿µ]\ndescription:\n- æ˜¯çš„æˆ‘è¦æŠ˜è…¾ä¸€ä¸‹ Javascript parseInt+parseFloat å†…éƒ¨å®ç°ï¼ŒconvertStringToNumber äº†ğŸ™†\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- ç®€å•è®°å½•ä¸€ä¸‹ï¼ŒJavascript parseInt+parseFloat å†…éƒ¨å®ç°ï¼Œå¹¶å®ç° convertStringToNumber\n\n<!-- more -->\n\n## å®è·µå‡†å¤‡\n- é¦–å…ˆæˆ‘ä»¬éœ€è¦ç®€å•æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬çš„å®ç°è¿‡ç¨‹ï¼Œå†æ ¹æ® [ECMAScript-262](https://www.ecma-international.org/publications/standards/Ecma-262.htm) æ ‡å‡†å®Œå–„å®ç°\n- input: @params: { str } è¾“å…¥éœ€è¦è½¬æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n- å¯¹ input çš„ç®€å•å¤„ç† StringNumericLiteral\n\t- è§„æ ¼åŒ– str\n\t- ![StringNumericLiteral BNF](http://p0.meituan.net/myvideodistribute/6f4d129d30fe4d0b45743d72da9760ca14615.png)\n\t\t- å°† str ä¸­å¯èƒ½å‡ºç°çš„ StrWhiteSpace å»æ‰\n\t\t\t- ![StrWhiteSpace BNF](http://p0.meituan.net/myvideodistribute/3ab76a2ee0627ddeeec42e093ae8307717214.png)\n\t\t\t\t- ![LineTerminator BNF](http://p0.meituan.net/myvideodistribute/d9ba181d676994f053ba3ba067279cf48592.png)\n\t- åˆ¤æ–­ radix æ˜¯å¦åˆæ³•ï¼Œä»…æ”¯æŒ Decimal / BinaryInteger / OctalInteger / HexInteger radix\n\t\t- Decimal: 10\n\t\t- BinaryInteger: 2\n\t\t- OctalInteger: 8\n\t\t- HexInteger: 16\n- ç®€å•ç®—æ³•å¤„ç†è¿‡ç¨‹\n\t- åè¿›åˆ¶æ•°\n\t\t- ![StrDecimalLiteral BNF](http://p0.meituan.net/myvideodistribute/dbb89c490f4cbe92ce1e7b1025912cde51542.png)\n\t\t- å¤„ç† Infinity æƒ…å†µ\n\t\t- ç¬¦å·ä½å¤„ç†\n\t\t- å°æ•°ç‚¹\n\t\t- ç§‘å­¦è®¡æ•°æ³•\n\t- äºŒè¿›åˆ¶æ•°\n\t\t- ![BinaryInteger](http://p1.meituan.net/myvideodistribute/f12e98da62b6529c1d3781a6c1dc36a86760.png)\n\t- å…«è¿›åˆ¶æ•°\n\t\t- ![OctalInteger](http://p1.meituan.net/myvideodistribute/e11bf633f8350bb17f761b719762ed038371.png)\n\t- åå…­è¿›åˆ¶æ•°\n\t\t- ![HexInteger](http://p0.meituan.net/myvideodistribute/274e704676b7d52093ac555c4b43f61013946.png)\n- output: return number\n\n## è¯¦ç»†å®è·µ\n- æ ¹æ®ä¸Šé¢çš„å®è·µå‡†å¤‡\n\n```javascript\n/*\n* @params: { str } è¾“å…¥éœ€è¦è½¬æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n* return: number\n*/\nfunction convertStringToNumber(str, radix) {\n  const noWhiteSpaceStr = replaceWhiteSpaceInStr(str) /** å°† str ä¸­çš„ whitespace è¿›è¡ŒåŒ¹é… */\n  const checkedRadixStr = formatStrByRadix(str, radix) /** å°† str æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œè½¬æ¢ */\n  let resNum = 0\n  switch (radix) {\n    case 10:\n      resNum = converStringToDeciaml(str) /** å°† str è½¬æˆåè¿›åˆ¶ */\n      break;\n    case 2:\n      resNum = converStringToBinaryInteger(str) /** å°† str è½¬æˆäºŒè¿›åˆ¶*/\n      break;\n    case 8:\n      resNum = converStringToOctalInteger(str) /** å°† str è½¬æˆå…«è¿›åˆ¶*/\n      break;\n    case 16:\n      resNum = converStringToHexIntegers(str) /** å°† str è½¬æˆåå…­è¿›åˆ¶*/\n      break;\n    default:\n      return NaN\n  }\n  return resNum\n}\n```\n- å°† str ä¸­çš„ whitespace è¿›è¡ŒåŒ¹é…\n\t\n\t```javascript\n\t/*\n\t* @params: { str } è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸²\n\t* return: resStr æ—  whitespace å­—ç¬¦ä¸²\n\t*/\n\tfunction replaceWhiteSpaceInStr(str) {\n\t  let resStr = str.replace(/\\s*/g, '') // å»é™¤ç©ºæ ¼\n\t  // resStr = resStr.replace(/^[\\u000A|\\u000D|\\u2028|\\u2029]/g, '') // å»é™¤ LineTerminator unicodeè¾“å…¥æ–¹å¼\n\t  resStr =  resStr.replace(/[\\r|\\n]/g, '') // å»é™¤æ¢è¡Œ\n\t  return resStr\n\t}\n\t```\n\t- å•å…ƒæµ‹è¯•\n\t\t- ![å•å…ƒæµ‹è¯•æˆªå›¾](http://p0.meituan.net/myvideodistribute/a70fa86dd4d8261537f8cbf5c0e5bc2c71147.png)\n- å°† str æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œè½¬æ¢\n\t- [æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… Number å­—é¢é‡](https://ele-peng.github.io/2020/04/20/Reg-Number/)\n\t\n\t```javascript\n\t/*\n\t* @params: { str } è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n\t* return: resStr æ ¹æ®æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²\n\t*/\n\tfunction formatStrByRadix(str, radix) {\n\t  let resStr = ''\n\t  let testReg = null\n\t  switch (radix) {\n\t    case 10:\n\t      testReg = /^((0)|([1-9][0-9]*))?.?([0-9]*)((e|E)?(\\+|\\-)?([0-9]*))?/\n\t      break;\n\t    case 2:\n\t      // æ ¹æ® ECMA-262 æ˜¯ /^0(b|B)(0|1)+$/\n\t      // ä½†æ˜¯æˆ‘åœ¨ Chrome æµè§ˆå™¨ä¸Šæµ‹äº†ï¼ŒäºŒè¿›åˆ¶æ²¡æœ‰ 'b' or 'B'\n\t      testReg = /^(0|1)+/\n\t      break;\n\t    case 8:\n\t      // æ ¹æ® ECMA-262 æ˜¯ /^0(O|o)[0-7]+$/\n\t      // ä½†æ˜¯æˆ‘åœ¨ Chrome æµè§ˆå™¨ä¸Šæµ‹äº†ï¼ŒäºŒè¿›åˆ¶æ²¡æœ‰ 'o' or 'O'\n\t      testReg = /^[0-7]+/\n\t      break;\n\t    case 16:\n\t      // æ ¹æ® ECMA-262 æ˜¯ /^0(x|X)([0-9a-fA-F])+/\n\t      // ä½†æ˜¯æˆ‘åœ¨ Chrome æµè§ˆå™¨è‡ªæµ‹ä¸­å‘ç°ï¼Œæ²¡æœ‰è¡¨ç¤ºç¬¦ 'x' or 'X'ä¹Ÿå¯\n\t      testReg = /^0(x|X)?([0-9a-fA-F])+/\n\t      break;\n\t    default:\n\t      console.log(`radix: ${radix}, str:  ${str} illegal radix`)\n\t      return false\n\t  }\n\t  resStr = (testReg.exec(str) && testReg.exec(str)['0']) || 'convert fail'\n\t  console.log(`radix: ${radix}, ${str} --> resStr: `, resStr)\n\t}\n\tformatStrByRadix('001010101', 3)\n\tformatStrByRadix('001010101', 2)\n\tformatStrByRadix('001010101', 8)\n\tformatStrByRadix('0b01010101', 2)\n\tformatStrByRadix('012345677', 8)\n\tformatStrByRadix('012345677', 2)\n\tformatStrByRadix('0o12345677', 8)\n\tformatStrByRadix('1.01E+23', 10)\n\tformatStrByRadix('.012345677', 10)\n\tformatStrByRadix('.012345677', 10)\n\tformatStrByRadix('0123acfACF', 16)\n\tformatStrByRadix('0x123acfACF', 16)\n\tformatStrByRadix('0x123acfACFG', 16)\n\t```\n\t- å•å…ƒæµ‹è¯•\n\t\t- ![å•å…ƒæµ‹è¯•](http://p0.meituan.net/myvideodistribute/ff9d3e6a3cd279427f8873f91911290774369.png)\n\n- æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œç›¸åº”ç®—æ³•è½¬æ¢\n\t- äºŒè¿›åˆ¶ï¼š\n\t\t\n\t\t```javascript\n\t\t\n\t\t// å°† str è½¬æˆäºŒè¿›åˆ¶\n\t\tfunction converStringToBinaryInteger(str, radix) {\n\t\t  return strMultipleRadix(str, radix)\n\t\t}\n\t\t\n\t\t/*\n\t\t* @params: { str } è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n\t\t* return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²\n\t\t*/\n\t\tfunction strMultipleRadix(str, radix) {\n\t\t  let tempStrArr = str.split('')\n\t\t  let res = 0\n\t\t  for (let i = tempStrArr.length - 1; i > 0; i --) {\n\t\t    res += (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, tempStrArr.length - i - 1)\n\t\t  }\n\t\t  return res\n\t\t}\n\t\tconverStringToBinaryInteger('001010101', 2)\n\t\t```\n\t\t\n\t\t- å•å…ƒæµ‹è¯•\n\t\t\t- ![å•å…ƒæµ‹è¯•æˆªå›¾](http://p0.meituan.net/myvideodistribute/5f3f3d1a2d0851eddaa1e258a182831864745.png)\n\t- å…«è¿›åˆ¶\n\t\t- åŒä¸Š\n\n\t\t\t```javascript\n\t\t\t// å°† str è½¬æˆå…«è¿›åˆ¶\n\t\t\tfunction converStringToBinaryInteger(str, radix) {\n\t\t\t  return strMultipleRadix(str, radix)\n\t\t\t}\n\t\t\t\n\t\t\t/*\n\t\t\t* @params: { str } è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n\t\t\t* return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²\n\t\t\t*/\n\t\t\tfunction strMultipleRadix(str, radix) {\n\t\t\t  let tempStrArr = str.split('')\n\t\t\t  let res = 0\n\t\t\t  for (let i = tempStrArr.length - 1; i > 0; i --) {\n\t\t\t    res += (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, tempStrArr.length - i - 1)\n\t\t\t  }\n\t\t\t  return res\n\t\t\t}\n\t\t\tconverStringToBinaryInteger('001010101', 2)\n\t\t\t```\n\t\t- å•å…ƒæµ‹è¯•\n\t\t\t- ![å•å…ƒæµ‹è¯•æˆªå›¾](http://p1.meituan.net/myvideodistribute/e9db13d824513d4e72509cd571f90dc069034.png)\n\t- åå…­è¿›åˆ¶\n\t\t- éœ€è¦å¯¹ a-f A-F è¿›è¡Œåˆ¤æ–­ï¼Œåˆ«å¿˜äº†+10\n\n\t\t\t```javascript\n\t\t\t  // å°† str è½¬æˆåå…­è¿›åˆ¶\n\t\t\t  function converStringToBinaryInteger(str, radix) {\n\t\t\t    return strMultipleRadix(str, radix)\n\t\t\t  }\n\t\t\t\n\t\t\t  /*\n\t\t\t  * @params: { str } è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n\t\t\t  * return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²\n\t\t\t  */\n\t\t\t  function strMultipleRadix(str, radix) {\n\t\t\t    let tempStrArr = str.split('')\n\t\t\t    let res = 0\n\t\t\t    for (let i = tempStrArr.length - 1; i > 0; i--) {\n\t\t\t      if (radix === 16) {\n\t\t\t        if ((tempStrArr[i].codePointAt(0) - '0'.codePointAt(0) >= 0) && (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0) < 10)) {\n\t\t\t          res += (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, tempStrArr.length - i - 1)\n\t\t\t        } else if ((tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0) >= 0) && (tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0) < 6)) {\n\t\t\t          console.log('(tempStrArr[i].codePointAt(0)a', tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0))\n\t\t\t          res += (tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0) + 10) * Math.pow(radix, tempStrArr.length - i - 1)\n\t\t\t        } else if ((tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0) >= 0) && (tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0) < 6)) {\n\t\t\t          console.log('(tempStrArr[i].codePointAt(0)A', tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0))\n\t\t\t          res += (tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0) + 10) * Math.pow(radix, tempStrArr.length - i - 1)\n\t\t\t        }\n\t\t\t      } else {\n\t\t\t        res += (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, tempStrArr.length - i - 1)\n\t\t\t      }\n\t\t\t    }\n\t\t\t    return res\n\t\t\t  }\n\t\t\t  console.log(converStringToBinaryInteger('001010101', 16))\n\t\t\t  console.log(converStringToBinaryInteger('00101acfAFF', 16))\n\t\t\t```\n\t\t- å•å…ƒæµ‹è¯•\n\t\t\t- ![å•å…ƒæµ‹è¯•æˆªå›¾](http://p0.meituan.net/myvideodistribute/e2e319f170fe2334f7b589cfc0f77b06205824.png)\n- æœ€ç»ˆäºŒ/å…«/åå…­è¿›åˆ¶æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œç›¸åº”ç®—æ³•è½¬æ¢æ–¹æ³•ä¸ºï¼š\n\t\n\t```javascript\n\t\t/*\n\t  * @params: { str } è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n\t  * return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²\n\t  */\n\t  function strMultipleRadix(str, radix) {\n\t    let tempStrArr = str.split('')\n\t    let res = 0\n\t    for (let i = tempStrArr.length - 1; i > 0; i--) {\n\t      if (radix === 16) {\n\t        if ((tempStrArr[i].codePointAt(0) - '0'.codePointAt(0) >= 0) && (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0) < 10)) {\n\t          res += (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, tempStrArr.length - i - 1)\n\t        } else if ((tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0) >= 0) && (tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0) < 6)) {\n\t          res += (tempStrArr[i].codePointAt(0) - 'a'.codePointAt(0) + 10) * Math.pow(radix, tempStrArr.length - i - 1)\n\t        } else if ((tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0) >= 0) && (tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0) < 6)) {\n\t          res += (tempStrArr[i].codePointAt(0) - 'A'.codePointAt(0) + 10) * Math.pow(radix, tempStrArr.length - i - 1)\n\t        }\n\t      } else {\n\t        res += (tempStrArr[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, tempStrArr.length - i - 1)\n\t      }\n\t    }\n\t    return res\n\t  }\n\t```\n### è½¬æ¢æˆåè¿›åˆ¶\n- å®è·µæ€è·¯\n\t1. åˆ¤æ–­æ­£è´Ÿç¬¦å·ä½\n\t2. åˆ¤æ–­æ˜¯å¦ä¸º Infinity\n\t3. åˆ¤æ–­æ˜¯å¦ä¸º æ•´æ•°\n\t\t1. æ•´æ•°\n\t\t\t1. æ˜¯å¦ä¸ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤º\n\t\t\t\t1. æ˜¯ï¼Œé€šè¿‡æŒ‡æ•°ä½ç½®åˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ•´æ•°éƒ¨åˆ†+æŒ‡æ•°éƒ¨åˆ†\n\t\t\t\t2. å¦ï¼Œåªéœ€å¤„ç†æ•´æ•°éƒ¨åˆ†\n\t\t2. å°æ•°\n\t\t\t1. æ˜¯å¦ä¸ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤º\n\t\t\t\t1. æ˜¯ï¼Œé€šè¿‡åˆ†å‰²æˆå°æ•°ç‚¹åˆ°æŒ‡æ•°ï¼Œåˆ†æˆä¸‰éƒ¨åˆ†ï¼šæ•´æ•°éƒ¨åˆ†+å°æ•°éƒ¨åˆ†+æŒ‡æ•°éƒ¨åˆ†\n\t\t\t\t2. å¦ï¼Œé€šè¿‡å°æ•°ç‚¹ä½ç½®ï¼Œåˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ•´æ•°éƒ¨åˆ†+å°æ•°éƒ¨åˆ†\n\t\n- ä»£ç å¤§è‡´ä¸ºï¼š\n\n\n```javascript \n  function converStringToDeciaml(str) {\n    // console.log('str-=-=--=-==-=', str)\n    const sign = getSign(str)\n    const strFormatBySign = formatStrBySign(str)\n    if (isInfinity(strFormatBySign)) return (1 / 0) * sign // å¦‚æœä¸º Inifity,ä¹˜ä»¥ç¬¦å·ä½è¾“å‡ºInfinity\n    const numberObject = splitStr(strFormatBySign)\n    const {int, float, exponentSign, exponent} = numberObject\n    // console.log('numberObject', numberObject)\n    const resInt = calculateInt(int) // è®¡ç®—æ•´æ•°éƒ¨åˆ†\n    // console.log('resInt', resInt)\n    const resFloat = calculateFloat(float) // è®¡ç®—å°æ•°éƒ¨åˆ†\n    // console.log('resFloat', resFloat)\n    const resExponent = calculateExponent(resInt, resFloat, exponentSign, exponent) // è®¡ç®—ï¼ˆæ•´æ•°+å°æ•°ï¼‰*  æŒ‡æ•°éƒ¨åˆ†\n    const res = sign * resExponent // æœ€åä¹˜ä»¥ç¬¦å·ä½\n    return res\n  }\n```\n\t\n#### åˆ¤æ–­æ­£è´Ÿï¼Œå¹¶æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²\n\n```javascript\n\n  // è·å–ç¬¦å·ä½\n  function getSign(str) {\n    // å¦‚æœSçš„é¦–å­—ç¬¦ä¸º'-'\n    if(str.indexOf('-') == 0) { \n      return -1\n    }\n    return 1\n  }\n```\n#### æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆç§»é™¤å­—ç¬¦å·ä½ï¼‰\n\n```javascript\n  // æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²\n  function formatStrBySign(str) {\n    // å¦‚æœ str çš„é¦–å­—ç¬¦ä¸ºâ€˜+â€™æˆ–'-'ï¼Œåˆ™ç§»é™¤é¦–å­—ç¬¦\n    if (str.indexOf('-') == 0 || str.indexOf('+') == 0) {\n      str = str.substring(1, str.length)\n    }\n    return str\n  }\n```\n\n#### åˆ¤æ–­æ˜¯å¦ä¸ºInfinity\n\n```javascript\n  // æ˜¯å¦ä¸º Infinity\n  function isInfinity(str) {\n    const testReg = /^Infinity/\n    let resReg = testReg.exec(str)\n    return resReg && resReg[0]\n  }\n```\n\n#### åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œåˆ†æˆæ•´æ•°+å°æ•°+æŒ‡æ•°ä½ç¬¦å·+æŒ‡æ•°éƒ¨åˆ†\n\n```javascript\n  // åˆ‡å‰²å­—ç¬¦ä¸²\n  /*\n  * @params: { str } è¾“å…¥éœ€è¦åˆ‡å‰²çš„å­—ç¬¦ä¸²\n  * return: res: Object {\n  *   int: æ•´æ•°ä½,\n  *   float: å°æ•°ä½,\n  *   exponentSign: æŒ‡æ•°ä½ç¬¦å·,\n  *   exponent: æŒ‡æ•°ä½\n  * }\n  */\n  function splitStr(str) {\n    const testReg = /^((0)|([1-9][0-9]*))?.?([0-9]*)(e|E)?((\\+|\\-)?([0-9]*))?/\n    let resReg = testReg.exec(str)\n    let res = {\n      int: resReg['1'] || 0,\n      float: resReg['4'] || 0,\n      exponentSign: resReg['7'] || '+',\n      exponent: resReg['8'] || 0\n    }\n    return res\n  }\n```\n\n#### æ•´æ•°éƒ¨åˆ†è¿ç®—\n\n```javascript\n\n  // æ•´æ•°éƒ¨åˆ†è¿ç®—\n  function calculateInt(str) {\n    let res = 0\n    const radix = 10\n    for (let i = str.length - 1; i >= 0; i--) {\n      res += (str[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, str.length - i - 1)\n    }\n    return res\n  }\n```\n\n\n#### å°æ•°éƒ¨åˆ†è¿ç®—\n\n```javascript\n\n  // å°æ•°éƒ¨åˆ†è¿ç®—\n  function calculateFloat(str) {\n    let res = 0\n    const radix = 10\n    for (let i = 0; i < str.length; i++) {\n      res += (str[i].codePointAt(0) - '0'.codePointAt(0)) * Math.pow(radix, i * -1)\n    }\n    return res\n  }\n```\n\n\n#### æŒ‡æ•°éƒ¨åˆ†è¿ç®—\n\n```javascript\n\n  // æŒ‡æ•°éƒ¨åˆ†è¿ç®—\n  function calculateExponent(int, float, exponentSign, exponent) {\n    // if (float)\n    let str = int + 0.1 * float\n    const radix = 10\n    const exponentInt = calculateInt(exponent)\n    if (exponentSign === '+') {\n      str = str * Math.pow(radix, exponentInt)\n    } else {\n      str = str * Math.pow(radix, exponentInt * -1)\n    }\n    // console.log('Math.abs(str)', Math.abs(str) -  Math.floor(str))\n    // // console.log('Number.EPSILON', Number.EPSILON)\n    // if (Math.abs(str) -  Math.floor(str)) {\n    //   return str.toFixed(1)\n    // }\n    return str\n  }\n```\n\n#### å•å…ƒæµ‹è¯•\n- æµ‹è¯•ç”¨ä¾‹\n\n```javascript\n  console.log(converStringToDeciaml('1.0e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('1.0e+10', 10))\n  console.log(converStringToDeciaml('-1.0e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('-1.0e+10', 10))\n  console.log(converStringToDeciaml('1.012e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('1.012e+10', 10))\n  console.log(converStringToDeciaml('-1.012e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('-1.012e+10', 10))\n  console.log(converStringToDeciaml('.012e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('.012e+10', 10))\n  console.log(converStringToDeciaml('-.012e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('-.012e+10', 10))\n  console.log(converStringToDeciaml('0.12e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('0.12e+10', 10))\n  console.log(converStringToDeciaml('-0.12e+10'))\n  console.log('parseFloat ç»“æœ', parseFloat('-0.12e+10', 10))\n  console.log(converStringToDeciaml('1.2e-10'))\n  console.log('parseFloat ç»“æœ', parseFloat('1.2e-10', 10))\n  console.log(converStringToDeciaml('-1.2e-10'))\n  console.log('parseFloat ç»“æœ', parseFloat('-1.2e-10', 10))\n  console.log(converStringToDeciaml('-1.22'))\n  console.log('parseFloat ç»“æœ', parseFloat('-1.22', 10))\n  console.log(converStringToDeciaml('Infinity'))\n  console.log('parseFloat ç»“æœ', parseFloat('Infinity', 10))\n  console.log(converStringToDeciaml('Infinity2222'))\n  console.log('parseFloat ç»“æœ', parseFloat('Infinity2222', 10))\n  console.log(converStringToDeciaml('22Infinity2222'))\n  console.log('parseFloat ç»“æœ', parseFloat('22Infinity2222', 10))\n```\n\n- æµ‹è¯•æˆªå›¾\n- ![ç¬¬ä¸€éƒ¨åˆ†æµ‹è¯•æˆªå›¾](http://p1.meituan.net/myvideodistribute/f3bc45ab42eea92318ad58711d21a666220332.png)\n- ![ç¬¬äºŒéƒ¨åˆ†æµ‹è¯•æˆªå›¾](http://p1.meituan.net/myvideodistribute/2cf7b8c0ae63f2009cbd77d83dec1e2c176792.png)\n\n## å¾…è§£å†³é—®é¢˜\n- æ˜¯çš„ ğŸ˜­ å®ƒçš„æµ®ç‚¹æ•°çš„èˆå…¥ï¼Œæˆ‘æ²¡æœ‰æƒ³åˆ°å¥½çš„æ–¹æ³•ï¼Œå“­å”§å”§\n- [ä»£ç åœ°å€](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week03/convertStringToNumber.html)\n\n\n## å†™åœ¨åé¢\n- ç­‰æˆ‘æœ‰ç©ºæŠŠåšå®¢è¯„è®ºæä¸€ä¸‹ï¼Œæ¬¢è¿å¤§å®¶æ¥å‘Šè¯‰æˆ‘çš„é—ç•™é—®é¢˜è¯¥æ€ä¹ˆè§£å†³ï¼Œä»¥åŠä½ ä»¬åœ¨å‚è€ƒæˆ‘çš„å®ç°æ—¶ï¼Œæœ‰æµ‹è¯•ç”¨ä¾‹è¿‡ä¸å»çš„åœ°æ–¹ï¼Œä¹Ÿå¯ä»¥è¯„è®ºå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼˜åŒ–ä»£ç ã€‚\n- å¤§å®¶ç­‰ä¸åŠçš„è¯ï¼Œå¯ä»¥å»æˆ‘çš„ [csdn](https://blog.csdn.net/Elle_Peng/article/details/105748022) è¯„è®ºå‘Šè¯‰æˆ‘ï¼Œå‘å¾®å°å½­ï¼Œåœ¨çº¿æ±‚è§£\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"convertStringToNumber","published":1,"updated":"2020-10-27T15:21:11.265Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u87002gfw9k1uscb42a","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>ç®€å•è®°å½•ä¸€ä¸‹ï¼ŒJavascript parseInt+parseFloat å†…éƒ¨å®ç°ï¼Œå¹¶å®ç° convertStringToNumber</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"å®è·µå‡†å¤‡\"><a href=\"#å®è·µå‡†å¤‡\" class=\"headerlink\" title=\"å®è·µå‡†å¤‡\"></a>å®è·µå‡†å¤‡</h2><ul>\n<li>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç®€å•æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬çš„å®ç°è¿‡ç¨‹ï¼Œå†æ ¹æ® <a href=\"https://www.ecma-international.org/publications/standards/Ecma-262.htm\" target=\"_blank\" rel=\"noopener\">ECMAScript-262</a> æ ‡å‡†å®Œå–„å®ç°</li>\n<li>input: @params: { str } è¾“å…¥éœ€è¦è½¬æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°</li>\n<li>å¯¹ input çš„ç®€å•å¤„ç† StringNumericLiteral<ul>\n<li>è§„æ ¼åŒ– str</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6f4d129d30fe4d0b45743d72da9760ca14615.png\" alt=\"StringNumericLiteral BNF\"><ul>\n<li>å°† str ä¸­å¯èƒ½å‡ºç°çš„ StrWhiteSpace å»æ‰<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/3ab76a2ee0627ddeeec42e093ae8307717214.png\" alt=\"StrWhiteSpace BNF\"><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/d9ba181d676994f053ba3ba067279cf48592.png\" alt=\"LineTerminator BNF\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>åˆ¤æ–­ radix æ˜¯å¦åˆæ³•ï¼Œä»…æ”¯æŒ Decimal / BinaryInteger / OctalInteger / HexInteger radix<ul>\n<li>Decimal: 10</li>\n<li>BinaryInteger: 2</li>\n<li>OctalInteger: 8</li>\n<li>HexInteger: 16</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ç®€å•ç®—æ³•å¤„ç†è¿‡ç¨‹<ul>\n<li>åè¿›åˆ¶æ•°<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/dbb89c490f4cbe92ce1e7b1025912cde51542.png\" alt=\"StrDecimalLiteral BNF\"></li>\n<li>å¤„ç† Infinity æƒ…å†µ</li>\n<li>ç¬¦å·ä½å¤„ç†</li>\n<li>å°æ•°ç‚¹</li>\n<li>ç§‘å­¦è®¡æ•°æ³•</li>\n</ul>\n</li>\n<li>äºŒè¿›åˆ¶æ•°<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/f12e98da62b6529c1d3781a6c1dc36a86760.png\" alt=\"BinaryInteger\"></li>\n</ul>\n</li>\n<li>å…«è¿›åˆ¶æ•°<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/e11bf633f8350bb17f761b719762ed038371.png\" alt=\"OctalInteger\"></li>\n</ul>\n</li>\n<li>åå…­è¿›åˆ¶æ•°<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/274e704676b7d52093ac555c4b43f61013946.png\" alt=\"HexInteger\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>output: return number</li>\n</ul>\n<h2 id=\"è¯¦ç»†å®è·µ\"><a href=\"#è¯¦ç»†å®è·µ\" class=\"headerlink\" title=\"è¯¦ç»†å®è·µ\"></a>è¯¦ç»†å®è·µ</h2><ul>\n<li>æ ¹æ®ä¸Šé¢çš„å®è·µå‡†å¤‡</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦è½¬æ¢çš„å­—ç¬¦ä¸², &#123; radix &#125; è½¬æ¢çš„æŒ‡å®šåŸºæ•°</span></span><br><span class=\"line\"><span class=\"comment\">* return: number</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">convertStringToNumber</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> noWhiteSpaceStr = replaceWhiteSpaceInStr(str) <span class=\"comment\">/** å°† str ä¸­çš„ whitespace è¿›è¡ŒåŒ¹é… */</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> checkedRadixStr = formatStrByRadix(str, radix) <span class=\"comment\">/** å°† str æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œè½¬æ¢ */</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resNum = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (radix) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">10</span>:</span><br><span class=\"line\">      resNum = converStringToDeciaml(str) <span class=\"comment\">/** å°† str è½¬æˆåè¿›åˆ¶ */</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">      resNum = converStringToBinaryInteger(str) <span class=\"comment\">/** å°† str è½¬æˆäºŒè¿›åˆ¶*/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">8</span>:</span><br><span class=\"line\">      resNum = converStringToOctalInteger(str) <span class=\"comment\">/** å°† str è½¬æˆå…«è¿›åˆ¶*/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">16</span>:</span><br><span class=\"line\">      resNum = converStringToHexIntegers(str) <span class=\"comment\">/** å°† str è½¬æˆåå…­è¿›åˆ¶*/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">NaN</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> resNum</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>å°† str ä¸­çš„ whitespace è¿›è¡ŒåŒ¹é…</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">* return: resStr æ—  whitespace å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">replaceWhiteSpaceInStr</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> resStr = str.replace(<span class=\"regexp\">/\\s*/g</span>, <span class=\"string\">''</span>) <span class=\"comment\">// å»é™¤ç©ºæ ¼</span></span><br><span class=\"line\">  <span class=\"comment\">// resStr = resStr.replace(/^[\\u000A|\\u000D|\\u2028|\\u2029]/g, '') // å»é™¤ LineTerminator unicodeè¾“å…¥æ–¹å¼</span></span><br><span class=\"line\">  resStr =  resStr.replace(<span class=\"regexp\">/[\\r|\\n]/g</span>, <span class=\"string\">''</span>) <span class=\"comment\">// å»é™¤æ¢è¡Œ</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> resStr</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>å•å…ƒæµ‹è¯•<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/a70fa86dd4d8261537f8cbf5c0e5bc2c71147.png\" alt=\"å•å…ƒæµ‹è¯•æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å°† str æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œè½¬æ¢</p>\n<ul>\n<li><p><a href=\"https://ele-peng.github.io/2020/04/20/Reg-Number/\" target=\"_blank\" rel=\"noopener\">æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… Number å­—é¢é‡</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², &#123; radix &#125; è½¬æ¢çš„æŒ‡å®šåŸºæ•°</span></span><br><span class=\"line\"><span class=\"comment\">* return: resStr æ ¹æ®æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">formatStrByRadix</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> resStr = <span class=\"string\">''</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> testReg = <span class=\"literal\">null</span></span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (radix) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">10</span>:</span><br><span class=\"line\">      testReg = <span class=\"regexp\">/^((0)|([1-9][0-9]*))?.?([0-9]*)((e|E)?(\\+|\\-)?([0-9]*))?/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">      <span class=\"comment\">// æ ¹æ® ECMA-262 æ˜¯ /^0(b|B)(0|1)+$/</span></span><br><span class=\"line\">      <span class=\"comment\">// ä½†æ˜¯æˆ‘åœ¨ Chrome æµè§ˆå™¨ä¸Šæµ‹äº†ï¼ŒäºŒè¿›åˆ¶æ²¡æœ‰ 'b' or 'B'</span></span><br><span class=\"line\">      testReg = <span class=\"regexp\">/^(0|1)+/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">8</span>:</span><br><span class=\"line\">      <span class=\"comment\">// æ ¹æ® ECMA-262 æ˜¯ /^0(O|o)[0-7]+$/</span></span><br><span class=\"line\">      <span class=\"comment\">// ä½†æ˜¯æˆ‘åœ¨ Chrome æµè§ˆå™¨ä¸Šæµ‹äº†ï¼ŒäºŒè¿›åˆ¶æ²¡æœ‰ 'o' or 'O'</span></span><br><span class=\"line\">      testReg = <span class=\"regexp\">/^[0-7]+/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">16</span>:</span><br><span class=\"line\">      <span class=\"comment\">// æ ¹æ® ECMA-262 æ˜¯ /^0(x|X)([0-9a-fA-F])+/</span></span><br><span class=\"line\">      <span class=\"comment\">// ä½†æ˜¯æˆ‘åœ¨ Chrome æµè§ˆå™¨è‡ªæµ‹ä¸­å‘ç°ï¼Œæ²¡æœ‰è¡¨ç¤ºç¬¦ 'x' or 'X'ä¹Ÿå¯</span></span><br><span class=\"line\">      testReg = <span class=\"regexp\">/^0(x|X)?([0-9a-fA-F])+/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`radix: <span class=\"subst\">$&#123;radix&#125;</span>, str:  <span class=\"subst\">$&#123;str&#125;</span> illegal radix`</span>)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  resStr = (testReg.exec(str) &amp;&amp; testReg.exec(str)[<span class=\"string\">'0'</span>]) || <span class=\"string\">'convert fail'</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`radix: <span class=\"subst\">$&#123;radix&#125;</span>, <span class=\"subst\">$&#123;str&#125;</span> --&gt; resStr: `</span>, resStr)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'001010101'</span>, <span class=\"number\">3</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'001010101'</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'001010101'</span>, <span class=\"number\">8</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'0b01010101'</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'012345677'</span>, <span class=\"number\">8</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'012345677'</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'0o12345677'</span>, <span class=\"number\">8</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'1.01E+23'</span>, <span class=\"number\">10</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'.012345677'</span>, <span class=\"number\">10</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'.012345677'</span>, <span class=\"number\">10</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'0123acfACF'</span>, <span class=\"number\">16</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'0x123acfACF'</span>, <span class=\"number\">16</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'0x123acfACFG'</span>, <span class=\"number\">16</span>)</span><br></pre></td></tr></table></figure></li>\n<li><p>å•å…ƒæµ‹è¯•</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/ff9d3e6a3cd279427f8873f91911290774369.png\" alt=\"å•å…ƒæµ‹è¯•\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œç›¸åº”ç®—æ³•è½¬æ¢</p>\n<ul>\n<li><p>äºŒè¿›åˆ¶ï¼š</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å°† str è½¬æˆäºŒè¿›åˆ¶</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">converStringToBinaryInteger</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> strMultipleRadix(str, radix)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², &#123; radix &#125; è½¬æ¢çš„æŒ‡å®šåŸºæ•°</span></span><br><span class=\"line\"><span class=\"comment\">* return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">strMultipleRadix</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> tempStrArr = str.split(<span class=\"string\">''</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = tempStrArr.length - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i --) &#123;</span><br><span class=\"line\">    res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">converStringToBinaryInteger(<span class=\"string\">'001010101'</span>, <span class=\"number\">2</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å•å…ƒæµ‹è¯•<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5f3f3d1a2d0851eddaa1e258a182831864745.png\" alt=\"å•å…ƒæµ‹è¯•æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å…«è¿›åˆ¶</p>\n<ul>\n<li><p>åŒä¸Š</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å°† str è½¬æˆå…«è¿›åˆ¶</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">converStringToBinaryInteger</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> strMultipleRadix(str, radix)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², &#123; radix &#125; è½¬æ¢çš„æŒ‡å®šåŸºæ•°</span></span><br><span class=\"line\"><span class=\"comment\">* return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">strMultipleRadix</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> tempStrArr = str.split(<span class=\"string\">''</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = tempStrArr.length - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i --) &#123;</span><br><span class=\"line\">    res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">converStringToBinaryInteger(<span class=\"string\">'001010101'</span>, <span class=\"number\">2</span>)</span><br></pre></td></tr></table></figure></li>\n<li><p>å•å…ƒæµ‹è¯•</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/e9db13d824513d4e72509cd571f90dc069034.png\" alt=\"å•å…ƒæµ‹è¯•æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>åå…­è¿›åˆ¶</p>\n<ul>\n<li><p>éœ€è¦å¯¹ a-f A-F è¿›è¡Œåˆ¤æ–­ï¼Œåˆ«å¿˜äº†+10</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å°† str è½¬æˆåå…­è¿›åˆ¶</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">converStringToBinaryInteger</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> strMultipleRadix(str, radix)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², &#123; radix &#125; è½¬æ¢çš„æŒ‡å®šåŸºæ•°</span></span><br><span class=\"line\"><span class=\"comment\">* return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">strMultipleRadix</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> tempStrArr = str.split(<span class=\"string\">''</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = tempStrArr.length - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (radix === <span class=\"number\">16</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> ((tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>) &gt;= <span class=\"number\">0</span>) &amp;&amp; (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>) &lt; <span class=\"number\">10</span>)) &#123;</span><br><span class=\"line\">        res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>) &gt;= <span class=\"number\">0</span>) &amp;&amp; (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>) &lt; <span class=\"number\">6</span>)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'(tempStrArr[i].codePointAt(0)a'</span>, tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>))</span><br><span class=\"line\">        res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>) + <span class=\"number\">10</span>) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>) &gt;= <span class=\"number\">0</span>) &amp;&amp; (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>) &lt; <span class=\"number\">6</span>)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'(tempStrArr[i].codePointAt(0)A'</span>, tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>))</span><br><span class=\"line\">        res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>) + <span class=\"number\">10</span>) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToBinaryInteger(<span class=\"string\">'001010101'</span>, <span class=\"number\">16</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToBinaryInteger(<span class=\"string\">'00101acfAFF'</span>, <span class=\"number\">16</span>))</span><br></pre></td></tr></table></figure></li>\n<li><p>å•å…ƒæµ‹è¯•</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/e2e319f170fe2334f7b589cfc0f77b06205824.png\" alt=\"å•å…ƒæµ‹è¯•æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>æœ€ç»ˆäºŒ/å…«/åå…­è¿›åˆ¶æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œç›¸åº”ç®—æ³•è½¬æ¢æ–¹æ³•ä¸ºï¼š</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> * @params: &#123; str &#125; è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², &#123; radix &#125; è½¬æ¢çš„æŒ‡å®šåŸºæ•°</span></span><br><span class=\"line\"><span class=\"comment\"> * return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">strMultipleRadix</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">let</span> tempStrArr = str.split(<span class=\"string\">''</span>)</span><br><span class=\"line\">   <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = tempStrArr.length - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (radix === <span class=\"number\">16</span>) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> ((tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>) &gt;= <span class=\"number\">0</span>) &amp;&amp; (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>) &lt; <span class=\"number\">10</span>)) &#123;</span><br><span class=\"line\">         res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>) &gt;= <span class=\"number\">0</span>) &amp;&amp; (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>) &lt; <span class=\"number\">6</span>)) &#123;</span><br><span class=\"line\">         res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>) + <span class=\"number\">10</span>) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>) &gt;= <span class=\"number\">0</span>) &amp;&amp; (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>) &lt; <span class=\"number\">6</span>)) &#123;</span><br><span class=\"line\">         res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>) + <span class=\"number\">10</span>) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">       res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> res</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"è½¬æ¢æˆåè¿›åˆ¶\"><a href=\"#è½¬æ¢æˆåè¿›åˆ¶\" class=\"headerlink\" title=\"è½¬æ¢æˆåè¿›åˆ¶\"></a>è½¬æ¢æˆåè¿›åˆ¶</h3></li>\n<li><p>å®è·µæ€è·¯</p>\n<ol>\n<li>åˆ¤æ–­æ­£è´Ÿç¬¦å·ä½</li>\n<li>åˆ¤æ–­æ˜¯å¦ä¸º Infinity</li>\n<li>åˆ¤æ–­æ˜¯å¦ä¸º æ•´æ•°<ol>\n<li>æ•´æ•°<ol>\n<li>æ˜¯å¦ä¸ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤º<ol>\n<li>æ˜¯ï¼Œé€šè¿‡æŒ‡æ•°ä½ç½®åˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ•´æ•°éƒ¨åˆ†+æŒ‡æ•°éƒ¨åˆ†</li>\n<li>å¦ï¼Œåªéœ€å¤„ç†æ•´æ•°éƒ¨åˆ†</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>å°æ•°<ol>\n<li>æ˜¯å¦ä¸ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤º<ol>\n<li>æ˜¯ï¼Œé€šè¿‡åˆ†å‰²æˆå°æ•°ç‚¹åˆ°æŒ‡æ•°ï¼Œåˆ†æˆä¸‰éƒ¨åˆ†ï¼šæ•´æ•°éƒ¨åˆ†+å°æ•°éƒ¨åˆ†+æŒ‡æ•°éƒ¨åˆ†</li>\n<li>å¦ï¼Œé€šè¿‡å°æ•°ç‚¹ä½ç½®ï¼Œåˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ•´æ•°éƒ¨åˆ†+å°æ•°éƒ¨åˆ†</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>ä»£ç å¤§è‡´ä¸ºï¼š</p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">converStringToDeciaml</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log('str-=-=--=-==-=', str)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> sign = getSign(str)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> strFormatBySign = formatStrBySign(str)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isInfinity(strFormatBySign)) <span class=\"keyword\">return</span> (<span class=\"number\">1</span> / <span class=\"number\">0</span>) * sign <span class=\"comment\">// å¦‚æœä¸º Inifity,ä¹˜ä»¥ç¬¦å·ä½è¾“å‡ºInfinity</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> numberObject = splitStr(strFormatBySign)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;int, float, exponentSign, exponent&#125; = numberObject</span><br><span class=\"line\">  <span class=\"comment\">// console.log('numberObject', numberObject)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> resInt = calculateInt(int) <span class=\"comment\">// è®¡ç®—æ•´æ•°éƒ¨åˆ†</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log('resInt', resInt)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> resFloat = calculateFloat(float) <span class=\"comment\">// è®¡ç®—å°æ•°éƒ¨åˆ†</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log('resFloat', resFloat)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> resExponent = calculateExponent(resInt, resFloat, exponentSign, exponent) <span class=\"comment\">// è®¡ç®—ï¼ˆæ•´æ•°+å°æ•°ï¼‰*  æŒ‡æ•°éƒ¨åˆ†</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> res = sign * resExponent <span class=\"comment\">// æœ€åä¹˜ä»¥ç¬¦å·ä½</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åˆ¤æ–­æ­£è´Ÿï¼Œå¹¶æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²\"><a href=\"#åˆ¤æ–­æ­£è´Ÿï¼Œå¹¶æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²\" class=\"headerlink\" title=\"åˆ¤æ–­æ­£è´Ÿï¼Œå¹¶æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²\"></a>åˆ¤æ–­æ­£è´Ÿï¼Œå¹¶æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è·å–ç¬¦å·ä½</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSign</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœSçš„é¦–å­—ç¬¦ä¸º'-'</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(str.indexOf(<span class=\"string\">'-'</span>) == <span class=\"number\">0</span>) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆç§»é™¤å­—ç¬¦å·ä½ï¼‰\"><a href=\"#æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆç§»é™¤å­—ç¬¦å·ä½ï¼‰\" class=\"headerlink\" title=\"æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆç§»é™¤å­—ç¬¦å·ä½ï¼‰\"></a>æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆç§»é™¤å­—ç¬¦å·ä½ï¼‰</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">formatStrBySign</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœ str çš„é¦–å­—ç¬¦ä¸ºâ€˜+â€™æˆ–'-'ï¼Œåˆ™ç§»é™¤é¦–å­—ç¬¦</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (str.indexOf(<span class=\"string\">'-'</span>) == <span class=\"number\">0</span> || str.indexOf(<span class=\"string\">'+'</span>) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    str = str.substring(<span class=\"number\">1</span>, str.length)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> str</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åˆ¤æ–­æ˜¯å¦ä¸ºInfinity\"><a href=\"#åˆ¤æ–­æ˜¯å¦ä¸ºInfinity\" class=\"headerlink\" title=\"åˆ¤æ–­æ˜¯å¦ä¸ºInfinity\"></a>åˆ¤æ–­æ˜¯å¦ä¸ºInfinity</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ˜¯å¦ä¸º Infinity</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isInfinity</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> testReg = <span class=\"regexp\">/^Infinity/</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resReg = testReg.exec(str)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> resReg &amp;&amp; resReg[<span class=\"number\">0</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œåˆ†æˆæ•´æ•°-å°æ•°-æŒ‡æ•°ä½ç¬¦å·-æŒ‡æ•°éƒ¨åˆ†\"><a href=\"#åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œåˆ†æˆæ•´æ•°-å°æ•°-æŒ‡æ•°ä½ç¬¦å·-æŒ‡æ•°éƒ¨åˆ†\" class=\"headerlink\" title=\"åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œåˆ†æˆæ•´æ•°+å°æ•°+æŒ‡æ•°ä½ç¬¦å·+æŒ‡æ•°éƒ¨åˆ†\"></a>åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œåˆ†æˆæ•´æ•°+å°æ•°+æŒ‡æ•°ä½ç¬¦å·+æŒ‡æ•°éƒ¨åˆ†</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åˆ‡å‰²å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦åˆ‡å‰²çš„å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">* return: res: Object &#123;</span></span><br><span class=\"line\"><span class=\"comment\">*   int: æ•´æ•°ä½,</span></span><br><span class=\"line\"><span class=\"comment\">*   float: å°æ•°ä½,</span></span><br><span class=\"line\"><span class=\"comment\">*   exponentSign: æŒ‡æ•°ä½ç¬¦å·,</span></span><br><span class=\"line\"><span class=\"comment\">*   exponent: æŒ‡æ•°ä½</span></span><br><span class=\"line\"><span class=\"comment\">* &#125;</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">splitStr</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> testReg = <span class=\"regexp\">/^((0)|([1-9][0-9]*))?.?([0-9]*)(e|E)?((\\+|\\-)?([0-9]*))?/</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resReg = testReg.exec(str)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = &#123;</span><br><span class=\"line\">    int: resReg[<span class=\"string\">'1'</span>] || <span class=\"number\">0</span>,</span><br><span class=\"line\">    float: resReg[<span class=\"string\">'4'</span>] || <span class=\"number\">0</span>,</span><br><span class=\"line\">    exponentSign: resReg[<span class=\"string\">'7'</span>] || <span class=\"string\">'+'</span>,</span><br><span class=\"line\">    exponent: resReg[<span class=\"string\">'8'</span>] || <span class=\"number\">0</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æ•´æ•°éƒ¨åˆ†è¿ç®—\"><a href=\"#æ•´æ•°éƒ¨åˆ†è¿ç®—\" class=\"headerlink\" title=\"æ•´æ•°éƒ¨åˆ†è¿ç®—\"></a>æ•´æ•°éƒ¨åˆ†è¿ç®—</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ•´æ•°éƒ¨åˆ†è¿ç®—</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculateInt</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> radix = <span class=\"number\">10</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = str.length - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">    res += (str[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, str.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"å°æ•°éƒ¨åˆ†è¿ç®—\"><a href=\"#å°æ•°éƒ¨åˆ†è¿ç®—\" class=\"headerlink\" title=\"å°æ•°éƒ¨åˆ†è¿ç®—\"></a>å°æ•°éƒ¨åˆ†è¿ç®—</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å°æ•°éƒ¨åˆ†è¿ç®—</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculateFloat</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> radix = <span class=\"number\">10</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; str.length; i++) &#123;</span><br><span class=\"line\">    res += (str[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, i * <span class=\"number\">-1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"æŒ‡æ•°éƒ¨åˆ†è¿ç®—\"><a href=\"#æŒ‡æ•°éƒ¨åˆ†è¿ç®—\" class=\"headerlink\" title=\"æŒ‡æ•°éƒ¨åˆ†è¿ç®—\"></a>æŒ‡æ•°éƒ¨åˆ†è¿ç®—</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æŒ‡æ•°éƒ¨åˆ†è¿ç®—</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculateExponent</span>(<span class=\"params\">int, float, exponentSign, exponent</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// if (float)</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> str = int + <span class=\"number\">0.1</span> * float</span><br><span class=\"line\">  <span class=\"keyword\">const</span> radix = <span class=\"number\">10</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> exponentInt = calculateInt(exponent)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (exponentSign === <span class=\"string\">'+'</span>) &#123;</span><br><span class=\"line\">    str = str * <span class=\"built_in\">Math</span>.pow(radix, exponentInt)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    str = str * <span class=\"built_in\">Math</span>.pow(radix, exponentInt * <span class=\"number\">-1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// console.log('Math.abs(str)', Math.abs(str) -  Math.floor(str))</span></span><br><span class=\"line\">  <span class=\"comment\">// // console.log('Number.EPSILON', Number.EPSILON)</span></span><br><span class=\"line\">  <span class=\"comment\">// if (Math.abs(str) -  Math.floor(str)) &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//   return str.toFixed(1)</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> str</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å•å…ƒæµ‹è¯•\"><a href=\"#å•å…ƒæµ‹è¯•\" class=\"headerlink\" title=\"å•å…ƒæµ‹è¯•\"></a>å•å…ƒæµ‹è¯•</h4><ul>\n<li>æµ‹è¯•ç”¨ä¾‹</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'1.0e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'1.0e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'-1.0e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'-1.0e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'1.012e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'1.012e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'-1.012e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'-1.012e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'.012e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'.012e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'-.012e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'-.012e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'0.12e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'0.12e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'-0.12e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'-0.12e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'1.2e-10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'1.2e-10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'-1.2e-10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'-1.2e-10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'-1.22'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'-1.22'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'Infinity'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'Infinity'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'Infinity2222'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'Infinity2222'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'22Infinity2222'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'22Infinity2222'</span>, <span class=\"number\">10</span>))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æµ‹è¯•æˆªå›¾</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/f3bc45ab42eea92318ad58711d21a666220332.png\" alt=\"ç¬¬ä¸€éƒ¨åˆ†æµ‹è¯•æˆªå›¾\"></li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/2cf7b8c0ae63f2009cbd77d83dec1e2c176792.png\" alt=\"ç¬¬äºŒéƒ¨åˆ†æµ‹è¯•æˆªå›¾\"></li>\n</ul>\n<h2 id=\"å¾…è§£å†³é—®é¢˜\"><a href=\"#å¾…è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"å¾…è§£å†³é—®é¢˜\"></a>å¾…è§£å†³é—®é¢˜</h2><ul>\n<li>æ˜¯çš„ ğŸ˜­ å®ƒçš„æµ®ç‚¹æ•°çš„èˆå…¥ï¼Œæˆ‘æ²¡æœ‰æƒ³åˆ°å¥½çš„æ–¹æ³•ï¼Œå“­å”§å”§</li>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week03/convertStringToNumber.html\" target=\"_blank\" rel=\"noopener\">ä»£ç åœ°å€</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç­‰æˆ‘æœ‰ç©ºæŠŠåšå®¢è¯„è®ºæä¸€ä¸‹ï¼Œæ¬¢è¿å¤§å®¶æ¥å‘Šè¯‰æˆ‘çš„é—ç•™é—®é¢˜è¯¥æ€ä¹ˆè§£å†³ï¼Œä»¥åŠä½ ä»¬åœ¨å‚è€ƒæˆ‘çš„å®ç°æ—¶ï¼Œæœ‰æµ‹è¯•ç”¨ä¾‹è¿‡ä¸å»çš„åœ°æ–¹ï¼Œä¹Ÿå¯ä»¥è¯„è®ºå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼˜åŒ–ä»£ç ã€‚</li>\n<li>å¤§å®¶ç­‰ä¸åŠçš„è¯ï¼Œå¯ä»¥å»æˆ‘çš„ <a href=\"https://blog.csdn.net/Elle_Peng/article/details/105748022\" target=\"_blank\" rel=\"noopener\">csdn</a> è¯„è®ºå‘Šè¯‰æˆ‘ï¼Œå‘å¾®å°å½­ï¼Œåœ¨çº¿æ±‚è§£</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>ç®€å•è®°å½•ä¸€ä¸‹ï¼ŒJavascript parseInt+parseFloat å†…éƒ¨å®ç°ï¼Œå¹¶å®ç° convertStringToNumber</li>\n</ul>","more":"<h2 id=\"å®è·µå‡†å¤‡\"><a href=\"#å®è·µå‡†å¤‡\" class=\"headerlink\" title=\"å®è·µå‡†å¤‡\"></a>å®è·µå‡†å¤‡</h2><ul>\n<li>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç®€å•æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬çš„å®ç°è¿‡ç¨‹ï¼Œå†æ ¹æ® <a href=\"https://www.ecma-international.org/publications/standards/Ecma-262.htm\" target=\"_blank\" rel=\"noopener\">ECMAScript-262</a> æ ‡å‡†å®Œå–„å®ç°</li>\n<li>input: @params: { str } è¾“å…¥éœ€è¦è½¬æ¢çš„å­—ç¬¦ä¸², { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°</li>\n<li>å¯¹ input çš„ç®€å•å¤„ç† StringNumericLiteral<ul>\n<li>è§„æ ¼åŒ– str</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6f4d129d30fe4d0b45743d72da9760ca14615.png\" alt=\"StringNumericLiteral BNF\"><ul>\n<li>å°† str ä¸­å¯èƒ½å‡ºç°çš„ StrWhiteSpace å»æ‰<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/3ab76a2ee0627ddeeec42e093ae8307717214.png\" alt=\"StrWhiteSpace BNF\"><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/d9ba181d676994f053ba3ba067279cf48592.png\" alt=\"LineTerminator BNF\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>åˆ¤æ–­ radix æ˜¯å¦åˆæ³•ï¼Œä»…æ”¯æŒ Decimal / BinaryInteger / OctalInteger / HexInteger radix<ul>\n<li>Decimal: 10</li>\n<li>BinaryInteger: 2</li>\n<li>OctalInteger: 8</li>\n<li>HexInteger: 16</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ç®€å•ç®—æ³•å¤„ç†è¿‡ç¨‹<ul>\n<li>åè¿›åˆ¶æ•°<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/dbb89c490f4cbe92ce1e7b1025912cde51542.png\" alt=\"StrDecimalLiteral BNF\"></li>\n<li>å¤„ç† Infinity æƒ…å†µ</li>\n<li>ç¬¦å·ä½å¤„ç†</li>\n<li>å°æ•°ç‚¹</li>\n<li>ç§‘å­¦è®¡æ•°æ³•</li>\n</ul>\n</li>\n<li>äºŒè¿›åˆ¶æ•°<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/f12e98da62b6529c1d3781a6c1dc36a86760.png\" alt=\"BinaryInteger\"></li>\n</ul>\n</li>\n<li>å…«è¿›åˆ¶æ•°<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/e11bf633f8350bb17f761b719762ed038371.png\" alt=\"OctalInteger\"></li>\n</ul>\n</li>\n<li>åå…­è¿›åˆ¶æ•°<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/274e704676b7d52093ac555c4b43f61013946.png\" alt=\"HexInteger\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>output: return number</li>\n</ul>\n<h2 id=\"è¯¦ç»†å®è·µ\"><a href=\"#è¯¦ç»†å®è·µ\" class=\"headerlink\" title=\"è¯¦ç»†å®è·µ\"></a>è¯¦ç»†å®è·µ</h2><ul>\n<li>æ ¹æ®ä¸Šé¢çš„å®è·µå‡†å¤‡</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦è½¬æ¢çš„å­—ç¬¦ä¸², &#123; radix &#125; è½¬æ¢çš„æŒ‡å®šåŸºæ•°</span></span><br><span class=\"line\"><span class=\"comment\">* return: number</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">convertStringToNumber</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> noWhiteSpaceStr = replaceWhiteSpaceInStr(str) <span class=\"comment\">/** å°† str ä¸­çš„ whitespace è¿›è¡ŒåŒ¹é… */</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> checkedRadixStr = formatStrByRadix(str, radix) <span class=\"comment\">/** å°† str æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œè½¬æ¢ */</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resNum = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (radix) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">10</span>:</span><br><span class=\"line\">      resNum = converStringToDeciaml(str) <span class=\"comment\">/** å°† str è½¬æˆåè¿›åˆ¶ */</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">      resNum = converStringToBinaryInteger(str) <span class=\"comment\">/** å°† str è½¬æˆäºŒè¿›åˆ¶*/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">8</span>:</span><br><span class=\"line\">      resNum = converStringToOctalInteger(str) <span class=\"comment\">/** å°† str è½¬æˆå…«è¿›åˆ¶*/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">16</span>:</span><br><span class=\"line\">      resNum = converStringToHexIntegers(str) <span class=\"comment\">/** å°† str è½¬æˆåå…­è¿›åˆ¶*/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">NaN</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> resNum</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>å°† str ä¸­çš„ whitespace è¿›è¡ŒåŒ¹é…</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">* return: resStr æ—  whitespace å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">replaceWhiteSpaceInStr</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> resStr = str.replace(<span class=\"regexp\">/\\s*/g</span>, <span class=\"string\">''</span>) <span class=\"comment\">// å»é™¤ç©ºæ ¼</span></span><br><span class=\"line\">  <span class=\"comment\">// resStr = resStr.replace(/^[\\u000A|\\u000D|\\u2028|\\u2029]/g, '') // å»é™¤ LineTerminator unicodeè¾“å…¥æ–¹å¼</span></span><br><span class=\"line\">  resStr =  resStr.replace(<span class=\"regexp\">/[\\r|\\n]/g</span>, <span class=\"string\">''</span>) <span class=\"comment\">// å»é™¤æ¢è¡Œ</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> resStr</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>å•å…ƒæµ‹è¯•<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/a70fa86dd4d8261537f8cbf5c0e5bc2c71147.png\" alt=\"å•å…ƒæµ‹è¯•æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å°† str æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œè½¬æ¢</p>\n<ul>\n<li><p><a href=\"https://ele-peng.github.io/2020/04/20/Reg-Number/\" target=\"_blank\" rel=\"noopener\">æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… Number å­—é¢é‡</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², &#123; radix &#125; è½¬æ¢çš„æŒ‡å®šåŸºæ•°</span></span><br><span class=\"line\"><span class=\"comment\">* return: resStr æ ¹æ®æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">formatStrByRadix</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> resStr = <span class=\"string\">''</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> testReg = <span class=\"literal\">null</span></span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (radix) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">10</span>:</span><br><span class=\"line\">      testReg = <span class=\"regexp\">/^((0)|([1-9][0-9]*))?.?([0-9]*)((e|E)?(\\+|\\-)?([0-9]*))?/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">      <span class=\"comment\">// æ ¹æ® ECMA-262 æ˜¯ /^0(b|B)(0|1)+$/</span></span><br><span class=\"line\">      <span class=\"comment\">// ä½†æ˜¯æˆ‘åœ¨ Chrome æµè§ˆå™¨ä¸Šæµ‹äº†ï¼ŒäºŒè¿›åˆ¶æ²¡æœ‰ 'b' or 'B'</span></span><br><span class=\"line\">      testReg = <span class=\"regexp\">/^(0|1)+/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">8</span>:</span><br><span class=\"line\">      <span class=\"comment\">// æ ¹æ® ECMA-262 æ˜¯ /^0(O|o)[0-7]+$/</span></span><br><span class=\"line\">      <span class=\"comment\">// ä½†æ˜¯æˆ‘åœ¨ Chrome æµè§ˆå™¨ä¸Šæµ‹äº†ï¼ŒäºŒè¿›åˆ¶æ²¡æœ‰ 'o' or 'O'</span></span><br><span class=\"line\">      testReg = <span class=\"regexp\">/^[0-7]+/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">16</span>:</span><br><span class=\"line\">      <span class=\"comment\">// æ ¹æ® ECMA-262 æ˜¯ /^0(x|X)([0-9a-fA-F])+/</span></span><br><span class=\"line\">      <span class=\"comment\">// ä½†æ˜¯æˆ‘åœ¨ Chrome æµè§ˆå™¨è‡ªæµ‹ä¸­å‘ç°ï¼Œæ²¡æœ‰è¡¨ç¤ºç¬¦ 'x' or 'X'ä¹Ÿå¯</span></span><br><span class=\"line\">      testReg = <span class=\"regexp\">/^0(x|X)?([0-9a-fA-F])+/</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`radix: <span class=\"subst\">$&#123;radix&#125;</span>, str:  <span class=\"subst\">$&#123;str&#125;</span> illegal radix`</span>)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  resStr = (testReg.exec(str) &amp;&amp; testReg.exec(str)[<span class=\"string\">'0'</span>]) || <span class=\"string\">'convert fail'</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`radix: <span class=\"subst\">$&#123;radix&#125;</span>, <span class=\"subst\">$&#123;str&#125;</span> --&gt; resStr: `</span>, resStr)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'001010101'</span>, <span class=\"number\">3</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'001010101'</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'001010101'</span>, <span class=\"number\">8</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'0b01010101'</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'012345677'</span>, <span class=\"number\">8</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'012345677'</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'0o12345677'</span>, <span class=\"number\">8</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'1.01E+23'</span>, <span class=\"number\">10</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'.012345677'</span>, <span class=\"number\">10</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'.012345677'</span>, <span class=\"number\">10</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'0123acfACF'</span>, <span class=\"number\">16</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'0x123acfACF'</span>, <span class=\"number\">16</span>)</span><br><span class=\"line\">formatStrByRadix(<span class=\"string\">'0x123acfACFG'</span>, <span class=\"number\">16</span>)</span><br></pre></td></tr></table></figure></li>\n<li><p>å•å…ƒæµ‹è¯•</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/ff9d3e6a3cd279427f8873f91911290774369.png\" alt=\"å•å…ƒæµ‹è¯•\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œç›¸åº”ç®—æ³•è½¬æ¢</p>\n<ul>\n<li><p>äºŒè¿›åˆ¶ï¼š</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å°† str è½¬æˆäºŒè¿›åˆ¶</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">converStringToBinaryInteger</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> strMultipleRadix(str, radix)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², &#123; radix &#125; è½¬æ¢çš„æŒ‡å®šåŸºæ•°</span></span><br><span class=\"line\"><span class=\"comment\">* return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">strMultipleRadix</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> tempStrArr = str.split(<span class=\"string\">''</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = tempStrArr.length - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i --) &#123;</span><br><span class=\"line\">    res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">converStringToBinaryInteger(<span class=\"string\">'001010101'</span>, <span class=\"number\">2</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å•å…ƒæµ‹è¯•<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5f3f3d1a2d0851eddaa1e258a182831864745.png\" alt=\"å•å…ƒæµ‹è¯•æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å…«è¿›åˆ¶</p>\n<ul>\n<li><p>åŒä¸Š</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å°† str è½¬æˆå…«è¿›åˆ¶</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">converStringToBinaryInteger</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> strMultipleRadix(str, radix)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², &#123; radix &#125; è½¬æ¢çš„æŒ‡å®šåŸºæ•°</span></span><br><span class=\"line\"><span class=\"comment\">* return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">strMultipleRadix</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> tempStrArr = str.split(<span class=\"string\">''</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = tempStrArr.length - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i --) &#123;</span><br><span class=\"line\">    res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">converStringToBinaryInteger(<span class=\"string\">'001010101'</span>, <span class=\"number\">2</span>)</span><br></pre></td></tr></table></figure></li>\n<li><p>å•å…ƒæµ‹è¯•</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/e9db13d824513d4e72509cd571f90dc069034.png\" alt=\"å•å…ƒæµ‹è¯•æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>åå…­è¿›åˆ¶</p>\n<ul>\n<li><p>éœ€è¦å¯¹ a-f A-F è¿›è¡Œåˆ¤æ–­ï¼Œåˆ«å¿˜äº†+10</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å°† str è½¬æˆåå…­è¿›åˆ¶</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">converStringToBinaryInteger</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> strMultipleRadix(str, radix)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², &#123; radix &#125; è½¬æ¢çš„æŒ‡å®šåŸºæ•°</span></span><br><span class=\"line\"><span class=\"comment\">* return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">strMultipleRadix</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> tempStrArr = str.split(<span class=\"string\">''</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = tempStrArr.length - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (radix === <span class=\"number\">16</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> ((tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>) &gt;= <span class=\"number\">0</span>) &amp;&amp; (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>) &lt; <span class=\"number\">10</span>)) &#123;</span><br><span class=\"line\">        res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>) &gt;= <span class=\"number\">0</span>) &amp;&amp; (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>) &lt; <span class=\"number\">6</span>)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'(tempStrArr[i].codePointAt(0)a'</span>, tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>))</span><br><span class=\"line\">        res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>) + <span class=\"number\">10</span>) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>) &gt;= <span class=\"number\">0</span>) &amp;&amp; (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>) &lt; <span class=\"number\">6</span>)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'(tempStrArr[i].codePointAt(0)A'</span>, tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>))</span><br><span class=\"line\">        res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>) + <span class=\"number\">10</span>) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToBinaryInteger(<span class=\"string\">'001010101'</span>, <span class=\"number\">16</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToBinaryInteger(<span class=\"string\">'00101acfAFF'</span>, <span class=\"number\">16</span>))</span><br></pre></td></tr></table></figure></li>\n<li><p>å•å…ƒæµ‹è¯•</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/e2e319f170fe2334f7b589cfc0f77b06205824.png\" alt=\"å•å…ƒæµ‹è¯•æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>æœ€ç»ˆäºŒ/å…«/åå…­è¿›åˆ¶æ ¹æ®æŒ‡å®šåŸºæ•°è¿›è¡Œç›¸åº”ç®—æ³•è½¬æ¢æ–¹æ³•ä¸ºï¼š</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> * @params: &#123; str &#125; è¾“å…¥éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸², &#123; radix &#125; è½¬æ¢çš„æŒ‡å®šåŸºæ•°</span></span><br><span class=\"line\"><span class=\"comment\"> * return: resStr ä¹˜ä»¥æŒ‡å®šåŸºæ•°è½¬æ¢è¿‡å¾—å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">strMultipleRadix</span>(<span class=\"params\">str, radix</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">let</span> tempStrArr = str.split(<span class=\"string\">''</span>)</span><br><span class=\"line\">   <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = tempStrArr.length - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (radix === <span class=\"number\">16</span>) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> ((tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>) &gt;= <span class=\"number\">0</span>) &amp;&amp; (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>) &lt; <span class=\"number\">10</span>)) &#123;</span><br><span class=\"line\">         res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>) &gt;= <span class=\"number\">0</span>) &amp;&amp; (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>) &lt; <span class=\"number\">6</span>)) &#123;</span><br><span class=\"line\">         res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'a'</span>.codePointAt(<span class=\"number\">0</span>) + <span class=\"number\">10</span>) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>) &gt;= <span class=\"number\">0</span>) &amp;&amp; (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>) &lt; <span class=\"number\">6</span>)) &#123;</span><br><span class=\"line\">         res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'A'</span>.codePointAt(<span class=\"number\">0</span>) + <span class=\"number\">10</span>) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">       res += (tempStrArr[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, tempStrArr.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> res</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"è½¬æ¢æˆåè¿›åˆ¶\"><a href=\"#è½¬æ¢æˆåè¿›åˆ¶\" class=\"headerlink\" title=\"è½¬æ¢æˆåè¿›åˆ¶\"></a>è½¬æ¢æˆåè¿›åˆ¶</h3></li>\n<li><p>å®è·µæ€è·¯</p>\n<ol>\n<li>åˆ¤æ–­æ­£è´Ÿç¬¦å·ä½</li>\n<li>åˆ¤æ–­æ˜¯å¦ä¸º Infinity</li>\n<li>åˆ¤æ–­æ˜¯å¦ä¸º æ•´æ•°<ol>\n<li>æ•´æ•°<ol>\n<li>æ˜¯å¦ä¸ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤º<ol>\n<li>æ˜¯ï¼Œé€šè¿‡æŒ‡æ•°ä½ç½®åˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ•´æ•°éƒ¨åˆ†+æŒ‡æ•°éƒ¨åˆ†</li>\n<li>å¦ï¼Œåªéœ€å¤„ç†æ•´æ•°éƒ¨åˆ†</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>å°æ•°<ol>\n<li>æ˜¯å¦ä¸ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤º<ol>\n<li>æ˜¯ï¼Œé€šè¿‡åˆ†å‰²æˆå°æ•°ç‚¹åˆ°æŒ‡æ•°ï¼Œåˆ†æˆä¸‰éƒ¨åˆ†ï¼šæ•´æ•°éƒ¨åˆ†+å°æ•°éƒ¨åˆ†+æŒ‡æ•°éƒ¨åˆ†</li>\n<li>å¦ï¼Œé€šè¿‡å°æ•°ç‚¹ä½ç½®ï¼Œåˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ•´æ•°éƒ¨åˆ†+å°æ•°éƒ¨åˆ†</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>ä»£ç å¤§è‡´ä¸ºï¼š</p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">converStringToDeciaml</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log('str-=-=--=-==-=', str)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> sign = getSign(str)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> strFormatBySign = formatStrBySign(str)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isInfinity(strFormatBySign)) <span class=\"keyword\">return</span> (<span class=\"number\">1</span> / <span class=\"number\">0</span>) * sign <span class=\"comment\">// å¦‚æœä¸º Inifity,ä¹˜ä»¥ç¬¦å·ä½è¾“å‡ºInfinity</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> numberObject = splitStr(strFormatBySign)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;int, float, exponentSign, exponent&#125; = numberObject</span><br><span class=\"line\">  <span class=\"comment\">// console.log('numberObject', numberObject)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> resInt = calculateInt(int) <span class=\"comment\">// è®¡ç®—æ•´æ•°éƒ¨åˆ†</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log('resInt', resInt)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> resFloat = calculateFloat(float) <span class=\"comment\">// è®¡ç®—å°æ•°éƒ¨åˆ†</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log('resFloat', resFloat)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> resExponent = calculateExponent(resInt, resFloat, exponentSign, exponent) <span class=\"comment\">// è®¡ç®—ï¼ˆæ•´æ•°+å°æ•°ï¼‰*  æŒ‡æ•°éƒ¨åˆ†</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> res = sign * resExponent <span class=\"comment\">// æœ€åä¹˜ä»¥ç¬¦å·ä½</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åˆ¤æ–­æ­£è´Ÿï¼Œå¹¶æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²\"><a href=\"#åˆ¤æ–­æ­£è´Ÿï¼Œå¹¶æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²\" class=\"headerlink\" title=\"åˆ¤æ–­æ­£è´Ÿï¼Œå¹¶æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²\"></a>åˆ¤æ–­æ­£è´Ÿï¼Œå¹¶æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è·å–ç¬¦å·ä½</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSign</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœSçš„é¦–å­—ç¬¦ä¸º'-'</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(str.indexOf(<span class=\"string\">'-'</span>) == <span class=\"number\">0</span>) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆç§»é™¤å­—ç¬¦å·ä½ï¼‰\"><a href=\"#æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆç§»é™¤å­—ç¬¦å·ä½ï¼‰\" class=\"headerlink\" title=\"æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆç§»é™¤å­—ç¬¦å·ä½ï¼‰\"></a>æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆç§»é™¤å­—ç¬¦å·ä½ï¼‰</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ ¹æ®ç¬¦å·ä½æ ¼å¼åŒ–å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">formatStrBySign</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœ str çš„é¦–å­—ç¬¦ä¸ºâ€˜+â€™æˆ–'-'ï¼Œåˆ™ç§»é™¤é¦–å­—ç¬¦</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (str.indexOf(<span class=\"string\">'-'</span>) == <span class=\"number\">0</span> || str.indexOf(<span class=\"string\">'+'</span>) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    str = str.substring(<span class=\"number\">1</span>, str.length)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> str</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åˆ¤æ–­æ˜¯å¦ä¸ºInfinity\"><a href=\"#åˆ¤æ–­æ˜¯å¦ä¸ºInfinity\" class=\"headerlink\" title=\"åˆ¤æ–­æ˜¯å¦ä¸ºInfinity\"></a>åˆ¤æ–­æ˜¯å¦ä¸ºInfinity</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ˜¯å¦ä¸º Infinity</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isInfinity</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> testReg = <span class=\"regexp\">/^Infinity/</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resReg = testReg.exec(str)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> resReg &amp;&amp; resReg[<span class=\"number\">0</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œåˆ†æˆæ•´æ•°-å°æ•°-æŒ‡æ•°ä½ç¬¦å·-æŒ‡æ•°éƒ¨åˆ†\"><a href=\"#åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œåˆ†æˆæ•´æ•°-å°æ•°-æŒ‡æ•°ä½ç¬¦å·-æŒ‡æ•°éƒ¨åˆ†\" class=\"headerlink\" title=\"åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œåˆ†æˆæ•´æ•°+å°æ•°+æŒ‡æ•°ä½ç¬¦å·+æŒ‡æ•°éƒ¨åˆ†\"></a>åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œåˆ†æˆæ•´æ•°+å°æ•°+æŒ‡æ•°ä½ç¬¦å·+æŒ‡æ•°éƒ¨åˆ†</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åˆ‡å‰²å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* @params: &#123; str &#125; è¾“å…¥éœ€è¦åˆ‡å‰²çš„å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">* return: res: Object &#123;</span></span><br><span class=\"line\"><span class=\"comment\">*   int: æ•´æ•°ä½,</span></span><br><span class=\"line\"><span class=\"comment\">*   float: å°æ•°ä½,</span></span><br><span class=\"line\"><span class=\"comment\">*   exponentSign: æŒ‡æ•°ä½ç¬¦å·,</span></span><br><span class=\"line\"><span class=\"comment\">*   exponent: æŒ‡æ•°ä½</span></span><br><span class=\"line\"><span class=\"comment\">* &#125;</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">splitStr</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> testReg = <span class=\"regexp\">/^((0)|([1-9][0-9]*))?.?([0-9]*)(e|E)?((\\+|\\-)?([0-9]*))?/</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resReg = testReg.exec(str)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = &#123;</span><br><span class=\"line\">    int: resReg[<span class=\"string\">'1'</span>] || <span class=\"number\">0</span>,</span><br><span class=\"line\">    float: resReg[<span class=\"string\">'4'</span>] || <span class=\"number\">0</span>,</span><br><span class=\"line\">    exponentSign: resReg[<span class=\"string\">'7'</span>] || <span class=\"string\">'+'</span>,</span><br><span class=\"line\">    exponent: resReg[<span class=\"string\">'8'</span>] || <span class=\"number\">0</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æ•´æ•°éƒ¨åˆ†è¿ç®—\"><a href=\"#æ•´æ•°éƒ¨åˆ†è¿ç®—\" class=\"headerlink\" title=\"æ•´æ•°éƒ¨åˆ†è¿ç®—\"></a>æ•´æ•°éƒ¨åˆ†è¿ç®—</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ•´æ•°éƒ¨åˆ†è¿ç®—</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculateInt</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> radix = <span class=\"number\">10</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = str.length - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">    res += (str[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, str.length - i - <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"å°æ•°éƒ¨åˆ†è¿ç®—\"><a href=\"#å°æ•°éƒ¨åˆ†è¿ç®—\" class=\"headerlink\" title=\"å°æ•°éƒ¨åˆ†è¿ç®—\"></a>å°æ•°éƒ¨åˆ†è¿ç®—</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å°æ•°éƒ¨åˆ†è¿ç®—</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculateFloat</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> radix = <span class=\"number\">10</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; str.length; i++) &#123;</span><br><span class=\"line\">    res += (str[i].codePointAt(<span class=\"number\">0</span>) - <span class=\"string\">'0'</span>.codePointAt(<span class=\"number\">0</span>)) * <span class=\"built_in\">Math</span>.pow(radix, i * <span class=\"number\">-1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"æŒ‡æ•°éƒ¨åˆ†è¿ç®—\"><a href=\"#æŒ‡æ•°éƒ¨åˆ†è¿ç®—\" class=\"headerlink\" title=\"æŒ‡æ•°éƒ¨åˆ†è¿ç®—\"></a>æŒ‡æ•°éƒ¨åˆ†è¿ç®—</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æŒ‡æ•°éƒ¨åˆ†è¿ç®—</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculateExponent</span>(<span class=\"params\">int, float, exponentSign, exponent</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// if (float)</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> str = int + <span class=\"number\">0.1</span> * float</span><br><span class=\"line\">  <span class=\"keyword\">const</span> radix = <span class=\"number\">10</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> exponentInt = calculateInt(exponent)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (exponentSign === <span class=\"string\">'+'</span>) &#123;</span><br><span class=\"line\">    str = str * <span class=\"built_in\">Math</span>.pow(radix, exponentInt)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    str = str * <span class=\"built_in\">Math</span>.pow(radix, exponentInt * <span class=\"number\">-1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// console.log('Math.abs(str)', Math.abs(str) -  Math.floor(str))</span></span><br><span class=\"line\">  <span class=\"comment\">// // console.log('Number.EPSILON', Number.EPSILON)</span></span><br><span class=\"line\">  <span class=\"comment\">// if (Math.abs(str) -  Math.floor(str)) &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//   return str.toFixed(1)</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> str</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å•å…ƒæµ‹è¯•\"><a href=\"#å•å…ƒæµ‹è¯•\" class=\"headerlink\" title=\"å•å…ƒæµ‹è¯•\"></a>å•å…ƒæµ‹è¯•</h4><ul>\n<li>æµ‹è¯•ç”¨ä¾‹</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'1.0e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'1.0e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'-1.0e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'-1.0e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'1.012e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'1.012e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'-1.012e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'-1.012e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'.012e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'.012e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'-.012e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'-.012e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'0.12e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'0.12e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'-0.12e+10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'-0.12e+10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'1.2e-10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'1.2e-10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'-1.2e-10'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'-1.2e-10'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'-1.22'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'-1.22'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'Infinity'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'Infinity'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'Infinity2222'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'Infinity2222'</span>, <span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(converStringToDeciaml(<span class=\"string\">'22Infinity2222'</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'parseFloat ç»“æœ'</span>, <span class=\"built_in\">parseFloat</span>(<span class=\"string\">'22Infinity2222'</span>, <span class=\"number\">10</span>))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æµ‹è¯•æˆªå›¾</li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/f3bc45ab42eea92318ad58711d21a666220332.png\" alt=\"ç¬¬ä¸€éƒ¨åˆ†æµ‹è¯•æˆªå›¾\"></li>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/2cf7b8c0ae63f2009cbd77d83dec1e2c176792.png\" alt=\"ç¬¬äºŒéƒ¨åˆ†æµ‹è¯•æˆªå›¾\"></li>\n</ul>\n<h2 id=\"å¾…è§£å†³é—®é¢˜\"><a href=\"#å¾…è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"å¾…è§£å†³é—®é¢˜\"></a>å¾…è§£å†³é—®é¢˜</h2><ul>\n<li>æ˜¯çš„ ğŸ˜­ å®ƒçš„æµ®ç‚¹æ•°çš„èˆå…¥ï¼Œæˆ‘æ²¡æœ‰æƒ³åˆ°å¥½çš„æ–¹æ³•ï¼Œå“­å”§å”§</li>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week03/convertStringToNumber.html\" target=\"_blank\" rel=\"noopener\">ä»£ç åœ°å€</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç­‰æˆ‘æœ‰ç©ºæŠŠåšå®¢è¯„è®ºæä¸€ä¸‹ï¼Œæ¬¢è¿å¤§å®¶æ¥å‘Šè¯‰æˆ‘çš„é—ç•™é—®é¢˜è¯¥æ€ä¹ˆè§£å†³ï¼Œä»¥åŠä½ ä»¬åœ¨å‚è€ƒæˆ‘çš„å®ç°æ—¶ï¼Œæœ‰æµ‹è¯•ç”¨ä¾‹è¿‡ä¸å»çš„åœ°æ–¹ï¼Œä¹Ÿå¯ä»¥è¯„è®ºå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼˜åŒ–ä»£ç ã€‚</li>\n<li>å¤§å®¶ç­‰ä¸åŠçš„è¯ï¼Œå¯ä»¥å»æˆ‘çš„ <a href=\"https://blog.csdn.net/Elle_Peng/article/details/105748022\" target=\"_blank\" rel=\"noopener\">csdn</a> è¯„è®ºå‘Šè¯‰æˆ‘ï¼Œå‘å¾®å°å½­ï¼Œåœ¨çº¿æ±‚è§£</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"convertNumberToString","date":"2020-04-25T05:48:55.000Z","description":["æ˜¯çš„æˆ‘è¦æŠ˜è…¾ä¸€ä¸‹ Javascript convertNumberToString äº†ğŸ™†"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- æ˜¯çš„æˆ‘è¦æŠ˜è…¾ä¸€ä¸‹ Javascript convertNumberToString äº†ğŸ™†\n- [convertStringToNumber å®ç°](https://ele-peng.github.io/2020/04/24/convertStringToNumber/)\n\n<!-- more -->\n## å®è·µå‡†å¤‡\n- é¦–å…ˆæˆ‘ä»¬ä¾æ—§éœ€è¦ç®€å•æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬çš„å®è·µè¿‡ç¨‹ï¼Œå†æ ¹æ® [ECMAScript-262](https://www.ecma-international.org/publications/standards/Ecma-262.htm) æ ‡å‡†P61å®Œå–„å®è·µ\n- input: @params: { num } è¾“å…¥éœ€è¦è½¬æ¢çš„number, { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n- å¯¹ input-num çš„ç‰¹æ®Šå¤„ç†\n\t- ![input-num çš„ç‰¹æ®Šå¤„ç†](http://p1.meituan.net/myvideodistribute/e0405830e24314df04f89a21078cc64198443.png)\n- ç®€å•ç®—æ³•å¤„ç†\n\t- è·å–ç¬¦å·ä½\n\t\t- \\- è´Ÿ æ˜¾ç¤º\n\t\t- \\+ æ­£ ä¸æ˜¾ç¤º\n\t- åè¿›åˆ¶\n\t- äºŒè¿›åˆ¶\n\t- å…«è¿›åˆ¶\n\t- åå…­è¿›åˆ¶\n\n- output: return resStr\n\n## å®è·µè¿‡ç¨‹\n- ç»è¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬ä»£ç å¯ä»¥å…ˆå†™æˆ\n\n\t```javascript\n\t  function convertNumberToString(num) {\n\t    try {\n\t      const formatNum = Number(num) // å¤„ç†Numberä¸ºåè¿›åˆ¶\n\t      if (isNaN(formatNum)) return 'NaN'\n\t      if (isZero(formatNum)) return '0'\n\t      const sign = getSign(formatNum)\n\t      if (!isFinite(formatNum)) return sign + 'Infinity'\n\t      return convertDecimalNumberToString(formatNum)\n\t    } catch (err) {\n\t      throw new Error(err)\n\t    }\n\t  }\n\t```\n- input number çš„ç‰¹æ®Šå¤„ç†\n\t- If m is NaN, return the String \"NaN\".\n\t\n\t\t> if (isNaN(formatNum)) return 'NaN'\n\t\n\t- If m is +0 or -0, return the String \"0\".\n\t\t\n\t\t```javascript\n\t\t  if (isZero(formatNum)) return '0'\n\t\t  function isZero(num) {\n\t\t    if (1 / num === Infinity || 1 / num === -Infinity) {\n\t\t      return true\n\t\t    }\n\t\t    return false\n\t\t  }\n\t\t```\n\t- If m is less than zero, return the string-concatenation of \"-\" and ! NumberToString(-m).\n\n\t\t```javascript\n\t\t  const sign = getSign(formatNum)\n\t\t  function getSign(num) {\n\t\t    if (num === -Infinity) {\n\t\t      return \"-\"\n\t\t    } else if (num === Infinity) {\n\t\t      return \"\"\n\t\t    } // ç‰¹æ®Šæƒ…å†µ 0 å‰é¢å·²ç»å¤„ç†\n\t\t    return num / Math.abs(num) === 1 ? \"\" : \"-\"\n\t\t  }\n\t\t```\n\t\n\t- If m is +âˆ, return the String \"Infinity\".\n\n\t\t> if (!isFinite(formatNum)) return sign + 'Infinity'\n\n- å¸¸è§„ Decimal Number å¤„ç†\n\n\t```javascript\n\t  function convertDecimalNumberToString(num) {\n\t    const radix = 10\n\t    let int = Math.floor(num)\n\t    let float = (num - int) * 100 / 100\n\t    let resInt = ''\n\t    let resFloat = ''\n\t    // æ•´æ•°éƒ¨åˆ† å–ä½™ï¼Œé™¤ä»¥åŸºæ•°\n\t    while (int > 0) {\n\t      resInt = String(int % radix) + resInt\n\t      int = Math.floor(int / radix)\n\t    }\n\t    if (float) {\n\t      resFloat = '.'\n\t      // å°æ•°éƒ¨åˆ†ï¼Œä¹˜ä»¥åŸºæ•°ï¼Œå–æ•´\n\t      while (float > 0) {\n\t        resFloat = resFloat + Math.floor(float * radix)\n\t        float -= Math.floor(float * radix)\n\t      }\n\t    }\n\t    return resInt + resFloat\n\t  }\n\t```\n\t\n## æµ‹è¯•ç”¨ä¾‹\n\n```javascript\n  console.log(convertNumberToString(-Infinity))\n  console.log('toString', -Infinity.toString())\n  console.log(convertNumberToString(+Infinity))\n  console.log('toString', +Infinity.toString())\n  console.log(convertNumberToString(120.11112))\n  console.log('toString', 120.11112.toString())\n  console.log(convertNumberToString(120))\n  console.log('toString', (120).toString())\n```\n- æµ‹è¯•æˆªå›¾\n\t- ![æµ‹è¯•æˆªå›¾](http://p0.meituan.net/myvideodistribute/b741d6a87bab9c52f01871781745689124911.png)\n\n## å†™åœ¨åé¢\n- å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å†™çš„ converNumbertoString é‡åˆ°æµ®ç‚¹æ•°ï¼Œå°±å¤±çµäº†ï¼Œæœ‰æƒ³åˆ°è¯´ ç”¨ toStringï¼Œç„¶åæ­£åˆ™åŒ¹é…å‡ºå°æ•°ç‚¹åé¢çš„æµ®ç‚¹æ•°ï¼Œèˆå…¥ç›¸åº”ä½æ•°ï¼Œä½†æ˜¯è¿™æ ·ï¼Œå°±ç”¨åˆ°äº† toString æ–¹æ³•ï¼Œä¼¼ä¹ä¸æˆ‘çš„æœ€åˆæƒ³æ³•å®ç° convertNumbertToString æ­»é”äº† ğŸ™ƒ\n- å¤§å®¶æœ‰å…¶ä»–çš„ä¸ç”¨ toString å®è·µï¼Œæ¬¢è¿è¯„è®ºå‘Šè¯‰æˆ‘å‘€~\n- [ä»£ç åœ°å€](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week03/convertNumberToString.html)\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/convertNumberToString.md","raw":"---\ntitle: convertNumberToString\ndate: 2020-04-25 13:48:55\ntags: \n- å‰ç«¯æ¦‚å¿µ\n- ç®—æ³•\ncategories:\n- å‰ç«¯æ¦‚å¿µ\ndescription:\n- æ˜¯çš„æˆ‘è¦æŠ˜è…¾ä¸€ä¸‹ Javascript convertNumberToString äº†ğŸ™†\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- æ˜¯çš„æˆ‘è¦æŠ˜è…¾ä¸€ä¸‹ Javascript convertNumberToString äº†ğŸ™†\n- [convertStringToNumber å®ç°](https://ele-peng.github.io/2020/04/24/convertStringToNumber/)\n\n<!-- more -->\n## å®è·µå‡†å¤‡\n- é¦–å…ˆæˆ‘ä»¬ä¾æ—§éœ€è¦ç®€å•æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬çš„å®è·µè¿‡ç¨‹ï¼Œå†æ ¹æ® [ECMAScript-262](https://www.ecma-international.org/publications/standards/Ecma-262.htm) æ ‡å‡†P61å®Œå–„å®è·µ\n- input: @params: { num } è¾“å…¥éœ€è¦è½¬æ¢çš„number, { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°\n- å¯¹ input-num çš„ç‰¹æ®Šå¤„ç†\n\t- ![input-num çš„ç‰¹æ®Šå¤„ç†](http://p1.meituan.net/myvideodistribute/e0405830e24314df04f89a21078cc64198443.png)\n- ç®€å•ç®—æ³•å¤„ç†\n\t- è·å–ç¬¦å·ä½\n\t\t- \\- è´Ÿ æ˜¾ç¤º\n\t\t- \\+ æ­£ ä¸æ˜¾ç¤º\n\t- åè¿›åˆ¶\n\t- äºŒè¿›åˆ¶\n\t- å…«è¿›åˆ¶\n\t- åå…­è¿›åˆ¶\n\n- output: return resStr\n\n## å®è·µè¿‡ç¨‹\n- ç»è¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬ä»£ç å¯ä»¥å…ˆå†™æˆ\n\n\t```javascript\n\t  function convertNumberToString(num) {\n\t    try {\n\t      const formatNum = Number(num) // å¤„ç†Numberä¸ºåè¿›åˆ¶\n\t      if (isNaN(formatNum)) return 'NaN'\n\t      if (isZero(formatNum)) return '0'\n\t      const sign = getSign(formatNum)\n\t      if (!isFinite(formatNum)) return sign + 'Infinity'\n\t      return convertDecimalNumberToString(formatNum)\n\t    } catch (err) {\n\t      throw new Error(err)\n\t    }\n\t  }\n\t```\n- input number çš„ç‰¹æ®Šå¤„ç†\n\t- If m is NaN, return the String \"NaN\".\n\t\n\t\t> if (isNaN(formatNum)) return 'NaN'\n\t\n\t- If m is +0 or -0, return the String \"0\".\n\t\t\n\t\t```javascript\n\t\t  if (isZero(formatNum)) return '0'\n\t\t  function isZero(num) {\n\t\t    if (1 / num === Infinity || 1 / num === -Infinity) {\n\t\t      return true\n\t\t    }\n\t\t    return false\n\t\t  }\n\t\t```\n\t- If m is less than zero, return the string-concatenation of \"-\" and ! NumberToString(-m).\n\n\t\t```javascript\n\t\t  const sign = getSign(formatNum)\n\t\t  function getSign(num) {\n\t\t    if (num === -Infinity) {\n\t\t      return \"-\"\n\t\t    } else if (num === Infinity) {\n\t\t      return \"\"\n\t\t    } // ç‰¹æ®Šæƒ…å†µ 0 å‰é¢å·²ç»å¤„ç†\n\t\t    return num / Math.abs(num) === 1 ? \"\" : \"-\"\n\t\t  }\n\t\t```\n\t\n\t- If m is +âˆ, return the String \"Infinity\".\n\n\t\t> if (!isFinite(formatNum)) return sign + 'Infinity'\n\n- å¸¸è§„ Decimal Number å¤„ç†\n\n\t```javascript\n\t  function convertDecimalNumberToString(num) {\n\t    const radix = 10\n\t    let int = Math.floor(num)\n\t    let float = (num - int) * 100 / 100\n\t    let resInt = ''\n\t    let resFloat = ''\n\t    // æ•´æ•°éƒ¨åˆ† å–ä½™ï¼Œé™¤ä»¥åŸºæ•°\n\t    while (int > 0) {\n\t      resInt = String(int % radix) + resInt\n\t      int = Math.floor(int / radix)\n\t    }\n\t    if (float) {\n\t      resFloat = '.'\n\t      // å°æ•°éƒ¨åˆ†ï¼Œä¹˜ä»¥åŸºæ•°ï¼Œå–æ•´\n\t      while (float > 0) {\n\t        resFloat = resFloat + Math.floor(float * radix)\n\t        float -= Math.floor(float * radix)\n\t      }\n\t    }\n\t    return resInt + resFloat\n\t  }\n\t```\n\t\n## æµ‹è¯•ç”¨ä¾‹\n\n```javascript\n  console.log(convertNumberToString(-Infinity))\n  console.log('toString', -Infinity.toString())\n  console.log(convertNumberToString(+Infinity))\n  console.log('toString', +Infinity.toString())\n  console.log(convertNumberToString(120.11112))\n  console.log('toString', 120.11112.toString())\n  console.log(convertNumberToString(120))\n  console.log('toString', (120).toString())\n```\n- æµ‹è¯•æˆªå›¾\n\t- ![æµ‹è¯•æˆªå›¾](http://p0.meituan.net/myvideodistribute/b741d6a87bab9c52f01871781745689124911.png)\n\n## å†™åœ¨åé¢\n- å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å†™çš„ converNumbertoString é‡åˆ°æµ®ç‚¹æ•°ï¼Œå°±å¤±çµäº†ï¼Œæœ‰æƒ³åˆ°è¯´ ç”¨ toStringï¼Œç„¶åæ­£åˆ™åŒ¹é…å‡ºå°æ•°ç‚¹åé¢çš„æµ®ç‚¹æ•°ï¼Œèˆå…¥ç›¸åº”ä½æ•°ï¼Œä½†æ˜¯è¿™æ ·ï¼Œå°±ç”¨åˆ°äº† toString æ–¹æ³•ï¼Œä¼¼ä¹ä¸æˆ‘çš„æœ€åˆæƒ³æ³•å®ç° convertNumbertToString æ­»é”äº† ğŸ™ƒ\n- å¤§å®¶æœ‰å…¶ä»–çš„ä¸ç”¨ toString å®è·µï¼Œæ¬¢è¿è¯„è®ºå‘Šè¯‰æˆ‘å‘€~\n- [ä»£ç åœ°å€](https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week03/convertNumberToString.html)\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"convertNumberToString","published":1,"updated":"2020-10-27T15:21:11.265Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u88002jfw9k3ssi5rso","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>æ˜¯çš„æˆ‘è¦æŠ˜è…¾ä¸€ä¸‹ Javascript convertNumberToString äº†ğŸ™†</li>\n<li><a href=\"https://ele-peng.github.io/2020/04/24/convertStringToNumber/\" target=\"_blank\" rel=\"noopener\">convertStringToNumber å®ç°</a></li>\n</ul>\n<a id=\"more\"></a>\n<h2 id=\"å®è·µå‡†å¤‡\"><a href=\"#å®è·µå‡†å¤‡\" class=\"headerlink\" title=\"å®è·µå‡†å¤‡\"></a>å®è·µå‡†å¤‡</h2><ul>\n<li><p>é¦–å…ˆæˆ‘ä»¬ä¾æ—§éœ€è¦ç®€å•æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬çš„å®è·µè¿‡ç¨‹ï¼Œå†æ ¹æ® <a href=\"https://www.ecma-international.org/publications/standards/Ecma-262.htm\" target=\"_blank\" rel=\"noopener\">ECMAScript-262</a> æ ‡å‡†P61å®Œå–„å®è·µ</p>\n</li>\n<li><p>input: @params: { num } è¾“å…¥éœ€è¦è½¬æ¢çš„number, { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°</p>\n</li>\n<li><p>å¯¹ input-num çš„ç‰¹æ®Šå¤„ç†</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/e0405830e24314df04f89a21078cc64198443.png\" alt=\"input-num çš„ç‰¹æ®Šå¤„ç†\"></li>\n</ul>\n</li>\n<li><p>ç®€å•ç®—æ³•å¤„ç†</p>\n<ul>\n<li>è·å–ç¬¦å·ä½<ul>\n<li>- è´Ÿ æ˜¾ç¤º</li>\n<li>+ æ­£ ä¸æ˜¾ç¤º</li>\n</ul>\n</li>\n<li>åè¿›åˆ¶</li>\n<li>äºŒè¿›åˆ¶</li>\n<li>å…«è¿›åˆ¶</li>\n<li>åå…­è¿›åˆ¶</li>\n</ul>\n</li>\n<li><p>output: return resStr</p>\n</li>\n</ul>\n<h2 id=\"å®è·µè¿‡ç¨‹\"><a href=\"#å®è·µè¿‡ç¨‹\" class=\"headerlink\" title=\"å®è·µè¿‡ç¨‹\"></a>å®è·µè¿‡ç¨‹</h2><ul>\n<li><p>ç»è¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬ä»£ç å¯ä»¥å…ˆå†™æˆ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">convertNumberToString</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> formatNum = <span class=\"built_in\">Number</span>(num) <span class=\"comment\">// å¤„ç†Numberä¸ºåè¿›åˆ¶</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">isNaN</span>(formatNum)) <span class=\"keyword\">return</span> <span class=\"string\">'NaN'</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isZero(formatNum)) <span class=\"keyword\">return</span> <span class=\"string\">'0'</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> sign = getSign(formatNum)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">isFinite</span>(formatNum)) <span class=\"keyword\">return</span> sign + <span class=\"string\">'Infinity'</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> convertDecimalNumberToString(formatNum)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(err)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>input number çš„ç‰¹æ®Šå¤„ç†</p>\n<ul>\n<li><p>If m is NaN, return the String â€œNaNâ€.</p>\n<blockquote>\n<p>if (isNaN(formatNum)) return â€˜NaNâ€™</p>\n</blockquote>\n</li>\n<li><p>If m is +0 or -0, return the String â€œ0â€.</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (isZero(formatNum)) <span class=\"keyword\">return</span> <span class=\"string\">'0'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isZero</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"number\">1</span> / num === <span class=\"literal\">Infinity</span> || <span class=\"number\">1</span> / num === -<span class=\"literal\">Infinity</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>If m is less than zero, return the string-concatenation of â€œ-â€œ and ! NumberToString(-m).</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> sign = getSign(formatNum)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSign</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (num === -<span class=\"literal\">Infinity</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"-\"</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (num === <span class=\"literal\">Infinity</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span></span><br><span class=\"line\">  &#125; <span class=\"comment\">// ç‰¹æ®Šæƒ…å†µ 0 å‰é¢å·²ç»å¤„ç†</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> num / <span class=\"built_in\">Math</span>.abs(num) === <span class=\"number\">1</span> ? <span class=\"string\">\"\"</span> : <span class=\"string\">\"-\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>If m is +âˆ, return the String â€œInfinityâ€.</p>\n<blockquote>\n<p>if (!isFinite(formatNum)) return sign + â€˜Infinityâ€™</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p>å¸¸è§„ Decimal Number å¤„ç†</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">convertDecimalNumberToString</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> radix = <span class=\"number\">10</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> int = <span class=\"built_in\">Math</span>.floor(num)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> float = (num - int) * <span class=\"number\">100</span> / <span class=\"number\">100</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resInt = <span class=\"string\">''</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resFloat = <span class=\"string\">''</span></span><br><span class=\"line\">  <span class=\"comment\">// æ•´æ•°éƒ¨åˆ† å–ä½™ï¼Œé™¤ä»¥åŸºæ•°</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (int &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    resInt = <span class=\"built_in\">String</span>(int % radix) + resInt</span><br><span class=\"line\">    int = <span class=\"built_in\">Math</span>.floor(int / radix)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (float) &#123;</span><br><span class=\"line\">    resFloat = <span class=\"string\">'.'</span></span><br><span class=\"line\">    <span class=\"comment\">// å°æ•°éƒ¨åˆ†ï¼Œä¹˜ä»¥åŸºæ•°ï¼Œå–æ•´</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (float &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      resFloat = resFloat + <span class=\"built_in\">Math</span>.floor(float * radix)</span><br><span class=\"line\">      float -= <span class=\"built_in\">Math</span>.floor(float * radix)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> resInt + resFloat</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h2 id=\"æµ‹è¯•ç”¨ä¾‹\"><a href=\"#æµ‹è¯•ç”¨ä¾‹\" class=\"headerlink\" title=\"æµ‹è¯•ç”¨ä¾‹\"></a>æµ‹è¯•ç”¨ä¾‹</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(convertNumberToString(-<span class=\"literal\">Infinity</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'toString'</span>, -<span class=\"literal\">Infinity</span>.toString())</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(convertNumberToString(+<span class=\"literal\">Infinity</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'toString'</span>, +<span class=\"literal\">Infinity</span>.toString())</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(convertNumberToString(<span class=\"number\">120.11112</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'toString'</span>, <span class=\"number\">120.11112</span>.toString())</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(convertNumberToString(<span class=\"number\">120</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'toString'</span>, (<span class=\"number\">120</span>).toString())</span><br></pre></td></tr></table></figure>\n<ul>\n<li>æµ‹è¯•æˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/b741d6a87bab9c52f01871781745689124911.png\" alt=\"æµ‹è¯•æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å†™çš„ converNumbertoString é‡åˆ°æµ®ç‚¹æ•°ï¼Œå°±å¤±çµäº†ï¼Œæœ‰æƒ³åˆ°è¯´ ç”¨ toStringï¼Œç„¶åæ­£åˆ™åŒ¹é…å‡ºå°æ•°ç‚¹åé¢çš„æµ®ç‚¹æ•°ï¼Œèˆå…¥ç›¸åº”ä½æ•°ï¼Œä½†æ˜¯è¿™æ ·ï¼Œå°±ç”¨åˆ°äº† toString æ–¹æ³•ï¼Œä¼¼ä¹ä¸æˆ‘çš„æœ€åˆæƒ³æ³•å®ç° convertNumbertToString æ­»é”äº† ğŸ™ƒ</li>\n<li>å¤§å®¶æœ‰å…¶ä»–çš„ä¸ç”¨ toString å®è·µï¼Œæ¬¢è¿è¯„è®ºå‘Šè¯‰æˆ‘å‘€~</li>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week03/convertNumberToString.html\" target=\"_blank\" rel=\"noopener\">ä»£ç åœ°å€</a></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>æ˜¯çš„æˆ‘è¦æŠ˜è…¾ä¸€ä¸‹ Javascript convertNumberToString äº†ğŸ™†</li>\n<li><a href=\"https://ele-peng.github.io/2020/04/24/convertStringToNumber/\" target=\"_blank\" rel=\"noopener\">convertStringToNumber å®ç°</a></li>\n</ul>","more":"<h2 id=\"å®è·µå‡†å¤‡\"><a href=\"#å®è·µå‡†å¤‡\" class=\"headerlink\" title=\"å®è·µå‡†å¤‡\"></a>å®è·µå‡†å¤‡</h2><ul>\n<li><p>é¦–å…ˆæˆ‘ä»¬ä¾æ—§éœ€è¦ç®€å•æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬çš„å®è·µè¿‡ç¨‹ï¼Œå†æ ¹æ® <a href=\"https://www.ecma-international.org/publications/standards/Ecma-262.htm\" target=\"_blank\" rel=\"noopener\">ECMAScript-262</a> æ ‡å‡†P61å®Œå–„å®è·µ</p>\n</li>\n<li><p>input: @params: { num } è¾“å…¥éœ€è¦è½¬æ¢çš„number, { radix } è½¬æ¢çš„æŒ‡å®šåŸºæ•°</p>\n</li>\n<li><p>å¯¹ input-num çš„ç‰¹æ®Šå¤„ç†</p>\n<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/e0405830e24314df04f89a21078cc64198443.png\" alt=\"input-num çš„ç‰¹æ®Šå¤„ç†\"></li>\n</ul>\n</li>\n<li><p>ç®€å•ç®—æ³•å¤„ç†</p>\n<ul>\n<li>è·å–ç¬¦å·ä½<ul>\n<li>- è´Ÿ æ˜¾ç¤º</li>\n<li>+ æ­£ ä¸æ˜¾ç¤º</li>\n</ul>\n</li>\n<li>åè¿›åˆ¶</li>\n<li>äºŒè¿›åˆ¶</li>\n<li>å…«è¿›åˆ¶</li>\n<li>åå…­è¿›åˆ¶</li>\n</ul>\n</li>\n<li><p>output: return resStr</p>\n</li>\n</ul>\n<h2 id=\"å®è·µè¿‡ç¨‹\"><a href=\"#å®è·µè¿‡ç¨‹\" class=\"headerlink\" title=\"å®è·µè¿‡ç¨‹\"></a>å®è·µè¿‡ç¨‹</h2><ul>\n<li><p>ç»è¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬ä»£ç å¯ä»¥å…ˆå†™æˆ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">convertNumberToString</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> formatNum = <span class=\"built_in\">Number</span>(num) <span class=\"comment\">// å¤„ç†Numberä¸ºåè¿›åˆ¶</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">isNaN</span>(formatNum)) <span class=\"keyword\">return</span> <span class=\"string\">'NaN'</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isZero(formatNum)) <span class=\"keyword\">return</span> <span class=\"string\">'0'</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> sign = getSign(formatNum)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">isFinite</span>(formatNum)) <span class=\"keyword\">return</span> sign + <span class=\"string\">'Infinity'</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> convertDecimalNumberToString(formatNum)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(err)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>input number çš„ç‰¹æ®Šå¤„ç†</p>\n<ul>\n<li><p>If m is NaN, return the String â€œNaNâ€.</p>\n<blockquote>\n<p>if (isNaN(formatNum)) return â€˜NaNâ€™</p>\n</blockquote>\n</li>\n<li><p>If m is +0 or -0, return the String â€œ0â€.</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (isZero(formatNum)) <span class=\"keyword\">return</span> <span class=\"string\">'0'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isZero</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"number\">1</span> / num === <span class=\"literal\">Infinity</span> || <span class=\"number\">1</span> / num === -<span class=\"literal\">Infinity</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>If m is less than zero, return the string-concatenation of â€œ-â€œ and ! NumberToString(-m).</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> sign = getSign(formatNum)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSign</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (num === -<span class=\"literal\">Infinity</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"-\"</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (num === <span class=\"literal\">Infinity</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span></span><br><span class=\"line\">  &#125; <span class=\"comment\">// ç‰¹æ®Šæƒ…å†µ 0 å‰é¢å·²ç»å¤„ç†</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> num / <span class=\"built_in\">Math</span>.abs(num) === <span class=\"number\">1</span> ? <span class=\"string\">\"\"</span> : <span class=\"string\">\"-\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>If m is +âˆ, return the String â€œInfinityâ€.</p>\n<blockquote>\n<p>if (!isFinite(formatNum)) return sign + â€˜Infinityâ€™</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p>å¸¸è§„ Decimal Number å¤„ç†</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">convertDecimalNumberToString</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> radix = <span class=\"number\">10</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> int = <span class=\"built_in\">Math</span>.floor(num)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> float = (num - int) * <span class=\"number\">100</span> / <span class=\"number\">100</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resInt = <span class=\"string\">''</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> resFloat = <span class=\"string\">''</span></span><br><span class=\"line\">  <span class=\"comment\">// æ•´æ•°éƒ¨åˆ† å–ä½™ï¼Œé™¤ä»¥åŸºæ•°</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (int &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    resInt = <span class=\"built_in\">String</span>(int % radix) + resInt</span><br><span class=\"line\">    int = <span class=\"built_in\">Math</span>.floor(int / radix)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (float) &#123;</span><br><span class=\"line\">    resFloat = <span class=\"string\">'.'</span></span><br><span class=\"line\">    <span class=\"comment\">// å°æ•°éƒ¨åˆ†ï¼Œä¹˜ä»¥åŸºæ•°ï¼Œå–æ•´</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (float &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      resFloat = resFloat + <span class=\"built_in\">Math</span>.floor(float * radix)</span><br><span class=\"line\">      float -= <span class=\"built_in\">Math</span>.floor(float * radix)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> resInt + resFloat</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h2 id=\"æµ‹è¯•ç”¨ä¾‹\"><a href=\"#æµ‹è¯•ç”¨ä¾‹\" class=\"headerlink\" title=\"æµ‹è¯•ç”¨ä¾‹\"></a>æµ‹è¯•ç”¨ä¾‹</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(convertNumberToString(-<span class=\"literal\">Infinity</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'toString'</span>, -<span class=\"literal\">Infinity</span>.toString())</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(convertNumberToString(+<span class=\"literal\">Infinity</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'toString'</span>, +<span class=\"literal\">Infinity</span>.toString())</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(convertNumberToString(<span class=\"number\">120.11112</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'toString'</span>, <span class=\"number\">120.11112</span>.toString())</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(convertNumberToString(<span class=\"number\">120</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'toString'</span>, (<span class=\"number\">120</span>).toString())</span><br></pre></td></tr></table></figure>\n<ul>\n<li>æµ‹è¯•æˆªå›¾<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/b741d6a87bab9c52f01871781745689124911.png\" alt=\"æµ‹è¯•æˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å†™çš„ converNumbertoString é‡åˆ°æµ®ç‚¹æ•°ï¼Œå°±å¤±çµäº†ï¼Œæœ‰æƒ³åˆ°è¯´ ç”¨ toStringï¼Œç„¶åæ­£åˆ™åŒ¹é…å‡ºå°æ•°ç‚¹åé¢çš„æµ®ç‚¹æ•°ï¼Œèˆå…¥ç›¸åº”ä½æ•°ï¼Œä½†æ˜¯è¿™æ ·ï¼Œå°±ç”¨åˆ°äº† toString æ–¹æ³•ï¼Œä¼¼ä¹ä¸æˆ‘çš„æœ€åˆæƒ³æ³•å®ç° convertNumbertToString æ­»é”äº† ğŸ™ƒ</li>\n<li>å¤§å®¶æœ‰å…¶ä»–çš„ä¸ç”¨ toString å®è·µï¼Œæ¬¢è¿è¯„è®ºå‘Šè¯‰æˆ‘å‘€~</li>\n<li><a href=\"https://github.com/Ele-Peng/Frontend-01-Template/blob/master/week03/convertNumberToString.html\" target=\"_blank\" rel=\"noopener\">ä»£ç åœ°å€</a></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"ã€æœªå®Œã€‘ä»URLè¾“å…¥åˆ°...ï¼ˆä¸€ï¼‰","date":"2020-05-12T08:51:50.000Z","description":["ä»URLè¾“å…¥åˆ°..."],"_content":"\n\n## å†™åœ¨å‰é¢\n- å˜¿å˜¿å˜¿ ğŸ˜±\n- åˆ«æƒ³æ­ªï¼Œæˆ‘ä»¬è¿™ä¸ªç³»åˆ—è¦åšçš„æ˜¯ä»ç»å…¸é¢è¯•é¢˜å…¥æ‰‹\n\t- ä» URL è¾“å…¥ https://ele-peng.github.io/ åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ\n- ç®€å•äº†è§£ä¸€ä¸‹è®¡ç®—æœºç½‘ç»œç›¸å…³çŸ¥è¯†ã€‚æ˜¯çš„ï¼ŒElle å¾ˆæƒ¨ğŸ˜­ è®¡ç®—æœºç½‘ç»œå­¦å¾—ç¨€çƒ‚\n\t\n\n<!-- more -->\n\n## ç®€å•è¿‡ç¨‹\n- ä½ å…ˆåœ¨æµè§ˆå™¨é‡Œé¢è¾“å…¥ https://ele-peng.github.io/ ï¼Œè¿™æ˜¯ä¸€ä¸ª URLã€‚æµè§ˆå™¨åªçŸ¥é“åå­—æ˜¯â€œele-peng.github.ioâ€ï¼Œä½†æ˜¯ä¸çŸ¥é“å…·ä½“çš„åœ°ç‚¹ï¼Œæ‰€ä»¥ä¸çŸ¥é“åº”è¯¥å¦‚ä½•è®¿é—®ã€‚äºæ˜¯ï¼Œå®ƒæ‰“å¼€åœ°å€ç°¿å»æŸ¥æ‰¾ã€‚å¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„åœ°å€ç°¿åè®® DNS å»æŸ¥æ‰¾ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ›´åŠ ç²¾å‡†çš„åœ°å€ç°¿æŸ¥æ‰¾åè®® HTTPDNS ã€‚\n- æ— è®ºç”¨å“ªä¸€ç§æ–¹æ³•æŸ¥æ‰¾ï¼Œæœ€ç»ˆéƒ½ä¼šå¾—åˆ°è¿™ä¸ªåœ°å€ï¼š52.74.223.119ã€‚è¿™ä¸ªæ˜¯ IP åœ°å€ï¼Œæ˜¯äº’è”ç½‘ä¸–ç•Œçš„â€œé—¨ç‰Œå·â€ã€‚\n- çŸ¥é“äº†ç›®æ ‡åœ°å€ï¼Œæµè§ˆå™¨å°±å¼€å§‹æ‰“åŒ…å®ƒçš„è¯·æ±‚ã€‚è¿™é‡Œä¼šä½¿ç”¨HTTPSåè®®ã€‚æ— è®ºæ˜¯ä»€ä¹ˆåè®®ï¼Œé‡Œé¢éƒ½ä¼šå†™æ˜â€œä½ è¦è¯·æ±‚ä»€ä¹ˆâ€ã€‚ï»¿\n- DNSã€HTTPã€HTTPS æ‰€åœ¨çš„å±‚æˆ‘ä»¬ç§°ä¸º**åº”ç”¨å±‚**ã€‚ç»è¿‡åº”ç”¨å±‚å°è£…åï¼Œæµè§ˆå™¨ä¼šå°†åº”ç”¨å±‚çš„åŒ…äº¤ç»™ä¸‹ä¸€å±‚å»å®Œæˆï¼Œ**é€šè¿‡ socket ç¼–ç¨‹æ¥å®ç°**ã€‚ä¸‹ä¸€å±‚æ˜¯**ä¼ è¾“å±‚**ã€‚ä¼ è¾“å±‚æœ‰ä¸¤ç§åè®®ï¼Œä¸€ç§æ˜¯æ— è¿æ¥çš„åè®®UDPï¼Œä¸€ç§æ˜¯é¢å‘è¿æ¥çš„åè®®TCPã€‚è¿™é‡Œä½¿ç”¨ TCP åè®®ã€‚æ‰€è°“çš„é¢å‘è¿æ¥å°±æ˜¯ï¼ŒTCP ä¼šä¿è¯è¿™ä¸ªåŒ…èƒ½å¤Ÿåˆ°è¾¾ç›®çš„åœ°ã€‚å¦‚æœä¸èƒ½åˆ°è¾¾ï¼Œå°±ä¼šé‡æ–°å‘é€ï¼Œç›´è‡³åˆ°è¾¾ã€‚\n- TCP åè®®é‡Œé¢ä¼šæœ‰ä¸¤ä¸ªç«¯å£ï¼Œä¸€ä¸ªæ˜¯æµè§ˆå™¨ç›‘å¬çš„ç«¯å£ï¼Œä¸€ä¸ªæ˜¯ github çš„æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£ã€‚æ“ä½œç³»ç»Ÿå¾€å¾€é€šè¿‡ç«¯å£æ¥åˆ¤æ–­ï¼Œå®ƒå¾—åˆ°çš„åŒ…åº”è¯¥ç»™å“ªä¸ªè¿›ç¨‹ã€‚\n- ä¼ è¾“å±‚å°è£…å®Œæ¯•åï¼Œæµè§ˆå™¨ä¼šå°†åŒ…äº¤ç»™æ“ä½œç³»ç»Ÿçš„**ç½‘ç»œå±‚**ã€‚ç½‘ç»œå±‚çš„åè®®æ˜¯ IP åè®®ã€‚åœ¨ IP åè®®é‡Œé¢ä¼šæœ‰æº IP åœ°å€ï¼Œå³æµè§ˆå™¨æ‰€åœ¨æœºå™¨çš„ IP åœ°å€å’Œç›®æ ‡ IP åœ°å€ï¼Œä¹Ÿå³ github æ‰€åœ¨æœåŠ¡å™¨çš„ IP åœ°å€ã€‚\n- æ“ä½œç³»ç»Ÿæ—¢ç„¶çŸ¥é“äº†ç›®æ ‡ IP åœ°å€ï¼Œå°±å¼€å§‹æƒ³å¦‚ä½•æ ¹æ®è¿™ä¸ªé—¨ç‰Œå·æ‰¾åˆ°ç›®æ ‡æœºå™¨ã€‚æ“ä½œç³»ç»Ÿå¾€å¾€ä¼šåˆ¤æ–­ï¼Œè¿™ä¸ªç›®æ ‡ IP åœ°å€æ˜¯æœ¬åœ°äººï¼Œè¿˜æ˜¯å¤–åœ°äººã€‚å¦‚æœæ˜¯æœ¬åœ°äººï¼Œä»é—¨ç‰Œå·å°±èƒ½çœ‹å‡ºæ¥ï¼Œä½†æ˜¯æ˜¾ç„¶ github ç½‘ç«™ä¸åœ¨æœ¬åœ°ï¼Œè€Œåœ¨é¥è¿œçš„åœ°æ–¹ã€‚\n- æ“ä½œç³»ç»ŸçŸ¥é“è¦ç¦»å¼€æœ¬åœ°å»è¿œæ–¹ã€‚è™½ç„¶ä¸çŸ¥é“è¿œæ–¹åœ¨ä½•å¤„ï¼Œä½†æ˜¯å¯ä»¥è¿™æ ·ç±»æ¯”ä¸€ä¸‹ï¼šå¦‚æœå»å›½å¤–è¦å»æµ·å…³ï¼Œå»å¤–åœ°å°±è¦å»ç½‘å…³ã€‚è€Œæ“ä½œç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šè¢« DHCP åè®®é…ç½® IP åœ°å€ï¼Œä»¥åŠé»˜è®¤çš„ç½‘å…³çš„ IP åœ°å€ 192.168.1.1ã€‚\n- æ“ä½œç³»ç»Ÿå¦‚ä½•å°† IP åœ°å€å‘ç»™ç½‘å…³å‘¢ï¼Ÿåœ¨æœ¬åœ°é€šä¿¡åŸºæœ¬é å¼ï¼Œäºæ˜¯æ“ä½œç³»ç»Ÿå¤§å¼ä¸€å£°ï¼Œè°æ˜¯ 192.168.1.1 å•Šï¼Ÿç½‘å…³ä¼šå›ç­”å®ƒï¼Œæˆ‘å°±æ˜¯ï¼Œæˆ‘çš„æœ¬åœ°åœ°å€åœ¨æ‘ä¸œå¤´ã€‚è¿™ä¸ªæœ¬åœ°åœ°å€å°±æ˜¯ MAC åœ°å€ï¼Œè€Œå¤§å¼çš„é‚£ä¸€å£°æ˜¯ ARP åè®®ã€‚\n- äºæ˜¯æ“ä½œç³»ç»Ÿå°† IP åŒ…äº¤ç»™äº†ä¸‹ä¸€å±‚ï¼Œä¹Ÿå°±æ˜¯ **MAC å±‚**ã€‚ç½‘å¡å†å°†åŒ…å‘å‡ºå»ã€‚ç”±äºè¿™ä¸ªåŒ…é‡Œé¢æ˜¯æœ‰ MAC åœ°å€çš„ï¼Œå› è€Œå®ƒèƒ½å¤Ÿåˆ°è¾¾ç½‘å…³ã€‚\n- ç½‘å…³æ”¶åˆ°åŒ…ä¹‹åï¼Œä¼šæ ¹æ®è‡ªå·±çš„çŸ¥è¯†ï¼Œåˆ¤æ–­ä¸‹ä¸€æ­¥åº”è¯¥æ€ä¹ˆèµ°ã€‚ç½‘å…³å¾€å¾€æ˜¯ä¸€ä¸ªè·¯ç”±å™¨ï¼Œåˆ°æŸä¸ª IP åœ°å€åº”è¯¥æ€ä¹ˆèµ°ï¼Œè¿™ä¸ªå«ä½œè·¯ç”±è¡¨ã€‚\n- è·¯ç”±å™¨æœ‰ç‚¹åƒç„å¥˜è¥¿è¡Œè·¯è¿‡çš„ä¸€ä¸ªä¸ªå›½å®¶çš„ä¸€ä¸ªä¸ªåŸå…³ã€‚æ¯ä¸ªåŸå…³éƒ½è¿ç€ä¸¤ä¸ªå›½å®¶ï¼Œæ¯ä¸ªå›½å®¶ç›¸å½“äºä¸€ä¸ªå±€åŸŸç½‘ï¼Œåœ¨æ¯ä¸ªå›½å®¶å†…éƒ¨ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æœ¬åœ°çš„åœ°å€ MAC è¿›è¡Œé€šä¿¡ã€‚\n- ä¸€æ—¦è·¨è¶ŠåŸå…³ï¼Œå°±éœ€è¦æ‹¿å‡º IP å¤´æ¥é—®ï¼Œç›®æ ‡ IP åœ°å€æ€ä¹ˆèµ°ï¼Ÿ\n- åŸå…³å¾€å¾€æ˜¯çŸ¥é“è¿™äº›â€œçŸ¥è¯†â€çš„ï¼Œå› ä¸ºåŸå…³å’Œä¸´è¿‘çš„åŸå…³ä¹Ÿä¼šç»å¸¸æ²Ÿé€šã€‚åˆ°å“ªé‡Œåº”è¯¥æ€ä¹ˆèµ°ï¼Œè¿™ç§æ²Ÿé€šçš„åè®®ç§°ä¸ºè·¯ç”±åè®®ï¼Œå¸¸ç”¨çš„æœ‰ OSP Få’Œ BGP ã€‚ï»¿\n- åŸå…³ä¸åŸå…³ä¹‹é—´æ˜¯ä¸€ä¸ªå›½å®¶ï¼Œå½“ç½‘ç»œåŒ…çŸ¥é“äº†ä¸‹ä¸€æ­¥å»å“ªä¸ªåŸå…³ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨å›½å®¶å†…éƒ¨çš„ MAC åœ°å€ï¼Œé€šè¿‡ä¸‹ä¸€ä¸ªåŸå…³çš„ MAC åœ°å€ï¼Œæ‰¾åˆ°ä¸‹ä¸€ä¸ªåŸå…³ï¼Œç„¶åå†é—®ä¸‹ä¸€æ­¥çš„è·¯æ€ä¹ˆèµ°ï¼Œä¸€ç›´åˆ°èµ°å‡ºæœ€åä¸€ä¸ªåŸå…³ã€‚\n- æœ€åä¸€ä¸ªåŸå…³çŸ¥é“è¿™ä¸ªç½‘ç»œåŒ…è¦å»çš„åœ°æ–¹ã€‚äºæ˜¯ï¼Œå¯¹ç€è¿™ä¸ªå›½å®¶å¼ä¸€å£°ï¼Œè°æ˜¯ç›®æ ‡ IP å•Šï¼Ÿç›®æ ‡æœåŠ¡å™¨å°±ä¼šå›å¤ä¸€ä¸ª MAC åœ°å€ã€‚ç½‘ç»œåŒ…è¿‡å…³åï¼Œé€šè¿‡è¿™ä¸ª MAC åœ°å€å°±èƒ½æ‰¾åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚\n- ç›®æ ‡æœåŠ¡å™¨å‘ç° MAC åœ°å€å¯¹ä¸Šäº†ï¼Œå–ä¸‹ MAC å¤´æ¥ï¼Œå‘é€ç»™æ“ä½œç³»ç»Ÿçš„ç½‘ç»œå±‚ã€‚å‘ç° IP ä¹Ÿå¯¹ä¸Šäº†ï¼Œå°±å–ä¸‹ IP å¤´ã€‚IP å¤´é‡Œä¼šå†™ä¸Šä¸€å±‚å°è£…çš„æ˜¯ TCP åè®®ï¼Œç„¶åå°†å…¶äº¤ç»™ä¼ è¾“å±‚ï¼Œå³TCP å±‚ã€‚\n- åœ¨è¿™ä¸€å±‚é‡Œï¼Œå¯¹äºæ”¶åˆ°çš„æ¯ä¸ªåŒ…ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªå›å¤çš„åŒ…è¯´æ˜æ”¶åˆ°äº†ã€‚è¿™ä¸ªå›å¤çš„åŒ…ç»éè¿™æ¬¡æŸ¥è¯¢è¯·æ±‚çš„ç»“æœï¼Œè€Œä»…ä»…æ˜¯ TCP å±‚çš„ä¸€ä¸ªè¯´æ˜ï¼Œå³æ”¶åˆ°ä¹‹åçš„å›å¤ã€‚å½“ç„¶è¿™ä¸ªå›å¤ï¼Œä¼šæ²¿ç€åˆšæ‰æ¥çš„æ–¹å‘èµ°å›å»ï¼ŒæŠ¥ä¸ªå¹³å®‰ã€‚\n- å¦‚æœè¿‡ä¸€æ®µæ—¶é—´è¿˜æ˜¯æ²¡åˆ°ï¼Œå‘é€ç«¯çš„ TCP å±‚ä¼šé‡æ–°å‘é€è¿™ä¸ªåŒ…ï¼Œè¿˜æ˜¯ä¸Šé¢çš„è¿‡ç¨‹ï¼Œç›´åˆ°æœ‰ä¸€å¤©æ”¶åˆ°å¹³å®‰åˆ°è¾¾çš„å›å¤ã€‚è¿™ä¸ªé‡è¯•ç»éä½ çš„æµè§ˆå™¨é‡æ–°è¯·æ±‚ github ä¸ªäººä¸»é¡µã€‚å¯¹äºæµè§ˆå™¨æ¥è®²ï¼Œå°±å‘é€äº†ä¸€æ¬¡ github ä¸ªäººä¸»é¡µè¯·æ±‚ï¼ŒTCP å±‚ä¸æ–­è‡ªå·±é—·å¤´é‡è¯•ã€‚é™¤é TCP è¿™ä¸€å±‚å‡ºäº†é—®é¢˜ï¼Œä¾‹å¦‚è¿æ¥æ–­äº†ï¼Œæ‰è½®åˆ°æµè§ˆå™¨çš„åº”ç”¨å±‚é‡æ–°å‘é€ github ä¸ªäººä¸»é¡µè¯·æ±‚ã€‚\n- å½“ç½‘ç»œåŒ…å¹³å®‰åˆ°è¾¾ TCP å±‚ä¹‹åï¼ŒTCP å¤´ä¸­æœ‰ç›®æ ‡ç«¯å£å·ï¼Œé€šè¿‡è¿™ä¸ªç«¯å£å·ï¼Œå¯ä»¥æ‰¾åˆ° github ç½‘ç«™çš„è¿›ç¨‹æ­£åœ¨ç›‘å¬è¿™ä¸ªç«¯å£å·ï¼Œå‡è®¾ä¸€ä¸ª Tomcatï¼Œå°†è¿™ä¸ªåŒ…å‘ç»™ github ç½‘ç«™ã€‚ï»¿\n- github ç½‘ç«™çš„è¿›ç¨‹å¾—åˆ° HTTP è¯·æ±‚çš„å†…å®¹ï¼ŒçŸ¥é“äº†è¦å“åº”å•¥ã€‚å¾€å¾€ä¸€ä¸ªç”µå•†ç½‘ç«™æœ€åˆæ¥å¾…è¯·æ±‚çš„è¿™ä¸ª Tomcat åªæ˜¯ä¸ªæ¥å¾…å‘˜ï¼Œè´Ÿè´£ç»Ÿç­¹å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„äº‹æƒ…éƒ½è‡ªå·±åšã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªæ¥å¾…å‘˜è¦å‘Šè¯‰ä¸“é—¨ç®¡ç† GitHub ä¸ªäººä¸»é¡µçš„è¿›ç¨‹ï¼Œè¦å“åº”å•¥ç­‰ç­‰ã€‚\n- å¦‚ä½•å‘Šè¯‰ç›¸å…³çš„è¿›ç¨‹å‘¢ï¼Ÿå¾€å¾€é€šè¿‡ RPC è°ƒç”¨ï¼Œå³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„æ–¹å¼æ¥å®ç°ã€‚è¿œç¨‹è¿‡ç¨‹è°ƒç”¨å°±æ˜¯å½“å‘Šè¯‰ç®¡ç† GitHub ä¸ªäººä¸»é¡µçš„è¿›ç¨‹çš„æ—¶å€™ï¼Œæ¥å¾…å‘˜ä¸ç”¨å…³å¿ƒä¸­é—´çš„ç½‘ç»œäº’è¿é—®é¢˜ï¼Œä¼šç”± RPC æ¡†æ¶ç»Ÿä¸€å¤„ç†ã€‚RPC æ¡†æ¶æœ‰å¾ˆå¤šç§ï¼Œæœ‰åŸºäº HTTP åè®®æ”¾åœ¨ HTTP çš„æŠ¥æ–‡é‡Œé¢çš„ï¼Œæœ‰ç›´æ¥å°è£…åœ¨ TCP æŠ¥æ–‡é‡Œé¢çš„ã€‚\n- å½“æ¥å¾…å‘˜å‘ç°ç›¸åº”çš„éƒ¨é—¨éƒ½å¤„ç†å®Œæ¯•ï¼Œå°±å›å¤ä¸€ä¸ª HTTPS çš„åŒ…ï¼Œå‘ŠçŸ¥æŸ¥è¯¢æˆåŠŸã€‚è¿™ä¸ª HTTPS çš„åŒ…ï¼Œä¼šåƒæ¥çš„æ—¶å€™ä¸€æ ·ï¼Œç»è¿‡åƒéš¾ä¸‡é™©åˆ°è¾¾ä½ çš„ä¸ªäººç”µè„‘ï¼Œæœ€ç»ˆè¿›å…¥æµè§ˆå™¨ï¼Œæ˜¾ç¤ºä¸ªäººä¸»é¡µã€‚\n\n## ç½‘ç»œåˆ†å±‚æ¨¡å‹\n### TCP/IP åè®®æ ˆ\n- ![TCP/IP åè®®æ ˆ](http://p0.meituan.net/myvideodistribute/6fea0628affaf34d09b59d845ffeb60a75766.png)\n- **link layer é“¾æ¥å±‚**ï¼šè´Ÿè´£åœ¨ä»¥å¤ªç½‘ã€WiFi è¿™æ ·çš„åº•å±‚ç½‘ç»œä¸Šå‘é€åŸå§‹æ•°æ®åŒ…ï¼ˆframe å¸§ï¼‰ï¼Œå·¥ä½œåœ¨ç½‘å¡è¿™ä¸ªå±‚æ¬¡ï¼Œä½¿ç”¨ MAC åœ°å€æ¥æ ‡è®°ç½‘ç»œä¸Šçš„è®¾å¤‡ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿå« MAC å±‚ã€‚\n- **internet layer ç½‘é™…å±‚**ï¼šIP åè®®å°±å¤„åœ¨è¿™ä¸€å±‚ã€‚å› ä¸º IP åè®®å®šä¹‰äº†â€œIP åœ°å€â€çš„æ¦‚å¿µï¼Œæ‰€ä»¥å°±å¯ä»¥åœ¨â€œé“¾æ¥å±‚â€çš„åŸºç¡€ä¸Šï¼Œç”¨ IP åœ°å€å–ä»£ MAC åœ°å€ï¼ŒæŠŠè®¸è®¸å¤šå¤šçš„å±€åŸŸç½‘ã€å¹¿åŸŸç½‘è¿æ¥æˆä¸€ä¸ªè™šæ‹Ÿçš„å·¨å¤§ç½‘ç»œï¼Œåœ¨è¿™ä¸ªç½‘ç»œé‡Œæ‰¾è®¾å¤‡æ—¶åªè¦æŠŠ IP åœ°å€å†â€œç¿»è¯‘â€æˆ MAC åœ°å€å°±å¯ä»¥äº†ã€‚ä¼ è¾“å•ä½æ˜¯åŒ…ï¼ˆpacketï¼‰\n- **transport layer ä¼ è¾“å±‚**ï¼šTCP/UDP åè®®å·¥ä½œçš„å±‚æ¬¡\n\t- TCP æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„åè®®ï¼Œéœ€è¦å…ˆä¸å¯¹æ–¹å»ºç«‹è¿æ¥ç„¶åæ‰èƒ½å‘é€æ•°æ®ï¼Œè€Œä¸”ä¿è¯æ•°æ®ä¸ä¸¢å¤±ä¸é‡å¤ã€‚è€Œ UDP åˆ™æ¯”è¾ƒç®€å•ï¼Œå®ƒæ— çŠ¶æ€ï¼Œä¸ç”¨äº‹å…ˆå»ºç«‹è¿æ¥å°±å¯ä»¥ä»»æ„å‘é€æ•°æ®ï¼Œä½†ä¸ä¿è¯æ•°æ®ä¸€å®šä¼šå‘åˆ°å¯¹æ–¹ã€‚ä¸¤ä¸ªåè®®çš„å¦ä¸€ä¸ªé‡è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å½¢å¼ã€‚TCP çš„æ•°æ®æ˜¯è¿ç»­çš„â€œå­—èŠ‚æµâ€ï¼Œæœ‰å…ˆåé¡ºåºï¼Œè€Œ UDP åˆ™æ˜¯åˆ†æ•£çš„å°æ•°æ®åŒ…ï¼Œæ˜¯é¡ºåºå‘ï¼Œä¹±åºæ”¶ã€‚\n\t- TCP å±‚çš„ä¼ è¾“å•ä½æ˜¯æ®µï¼ˆsegmentï¼‰\n- **application layer åº”ç”¨å±‚**ï¼šå„ç§é¢å‘å…·ä½“åº”ç”¨çš„åè®®ï¼Œä¾‹å¦‚ DHCPã€HTTPã€HTTPSã€RTMPã€DNSã€P2Pã€GTPã€RPCã€Telnetã€SSHã€FTPã€SMTP ç­‰ç­‰ã€‚\n\t- HTTP çš„ä¼ è¾“å•ä½åˆ™æ˜¯æ¶ˆæ¯æˆ–æŠ¥æ–‡ï¼ˆmessageï¼‰\n\n### OSI (Open System Interconnection Reference Model) å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹\n- ![OSIå‚è€ƒæ¨¡å‹](http://p1.meituan.net/myvideodistribute/53145af5e2b1d0846761c3382cce24c5104243.png)\n- **physical layer ç‰©ç†å±‚**ï¼šç½‘ç»œçš„ç‰©ç†å½¢å¼ï¼Œä¾‹å¦‚ç”µç¼†ã€å…‰çº¤ã€ç½‘å¡ã€é›†çº¿å™¨ç­‰ç­‰\n- **data link layer æ•°æ®é“¾è·¯å±‚**ï¼šåŸºæœ¬ç›¸å½“äº TCP/IP çš„é“¾æ¥å±‚\n- **network layer ç½‘ç»œå±‚**ï¼šç›¸å½“äº TCP/IP é‡Œçš„ç½‘é™…å±‚\n- **transport layer ä¼ è¾“å±‚**ï¼šç›¸å½“äº TCP/IP é‡Œçš„ä¼ è¾“å±‚\n- **session layer ä¼šè¯å±‚**ï¼šç»´æŠ¤ç½‘ç»œä¸­çš„è¿æ¥çŠ¶æ€ï¼Œå³ä¿æŒä¼šè¯å’ŒåŒæ­¥\n- **presentation layer è¡¨ç¤ºå±‚**ï¼šæŠŠæ•°æ®è½¬æ¢ä¸ºåˆé€‚ã€å¯ç†è§£çš„è¯­æ³•å’Œè¯­ä¹‰\n- **application layer åº”ç”¨å±‚**ï¼šé¢å‘å…·ä½“çš„åº”ç”¨ä¼ è¾“æ•°æ®\n\n### ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»\n- ![ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»](http://p0.meituan.net/myvideodistribute/0042adbffe9810c7913862252fa27662164155.png)\n- ç¬¬ä¸€å±‚ï¼šç‰©ç†å±‚ï¼ŒTCP/IP é‡Œæ— å¯¹åº”\n- ç¬¬äºŒå±‚ï¼šæ•°æ®é“¾è·¯å±‚ï¼Œå¯¹åº” TCP/IP çš„é“¾æ¥å±‚\n- ç¬¬ä¸‰å±‚ï¼šç½‘ç»œå±‚ï¼Œå¯¹åº” TCP/IP çš„ç½‘é™…å±‚\n- ç¬¬å››å±‚ï¼šä¼ è¾“å±‚ï¼Œå¯¹åº” TCP/IP çš„ä¼ è¾“å±‚\n- ç¬¬äº”ã€å…­ã€ä¸ƒå±‚ï¼šç»Ÿä¸€å¯¹åº”åˆ° TCP/IP çš„åº”ç”¨å±‚\n\t-  TCP/IP å®é™…åº”ç”¨æ—¶çš„ä¼šè¯ç®¡ç†ã€ç¼–ç è½¬æ¢ã€å‹ç¼©ç­‰å’Œå…·ä½“åº”ç”¨ç»å¸¸è”ç³»çš„å¾ˆç´§å¯†ï¼Œå¾ˆéš¾åˆ†å¼€\n\n\t\n\n## HTTP - HyperText Transfer Protocol\n- ![HTTPæ¦‚è§ˆå›¾](http://p0.meituan.net/myvideodistribute/0eac1c72dc8c7c0ac87363d73f51b19b30633.png)\n- Protocol\n\t- åè®®å¿…é¡»è¦æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªå‚ä¸è€…ï¼Œä¹Ÿå°±æ˜¯â€œåâ€\n\t- åè®®æ˜¯å¯¹å‚ä¸è€…çš„ä¸€ç§è¡Œä¸ºçº¦å®šå’Œè§„èŒƒï¼Œä¹Ÿå°±æ˜¯â€œè®®â€ï¼ŒåŒ…æ‹¬è¯­æ³•ã€è¯­ä¹‰ã€åŒæ­¥è§„åˆ™å’Œé”™è¯¯å¤„ç†\n\t- æ€»ç»“ï¼š**HTTP æ˜¯ä¸€ä¸ªç”¨åœ¨è®¡ç®—æœºä¸–ç•Œé‡Œçš„åè®®ã€‚å®ƒä½¿ç”¨è®¡ç®—æœºèƒ½å¤Ÿç†è§£çš„è¯­è¨€ç¡®ç«‹äº†ä¸€ç§è®¡ç®—æœºä¹‹é—´äº¤æµé€šä¿¡çš„è§„èŒƒï¼Œä»¥åŠç›¸å…³çš„å„ç§æ§åˆ¶å’Œé”™è¯¯å¤„ç†æ–¹å¼ã€‚**\n- Transfer\n\t- HTTP åè®®æ˜¯ä¸€ä¸ªâ€œåŒå‘åè®®â€\n\t- æ•°æ®è™½ç„¶æ˜¯åœ¨ A å’Œ B ä¹‹é—´ä¼ è¾“ï¼Œä½†å¹¶æ²¡æœ‰é™åˆ¶åªæœ‰ A å’Œ B è¿™ä¸¤ä¸ªè§’è‰²ï¼Œå…è®¸ä¸­é—´æœ‰â€œä¸­è½¬â€æˆ–è€…â€œæ¥åŠ›â€\n\t\t- ä¼ è¾“æ–¹å¼ä»â€œA<===>Bâ€ å¯ä»¥å˜æˆäº† â€œA<=>X<=>Y<=>Z<=>Bâ€\n\t\t- A åˆ° B çš„ä¼ è¾“è¿‡ç¨‹ä¸­å¯ä»¥å­˜åœ¨ä»»æ„å¤šä¸ªâ€œä¸­é—´äººâ€ï¼Œè€Œè¿™äº›ä¸­é—´äººä¹Ÿéƒ½éµä» HTTP åè®®ï¼Œåªè¦ä¸æ‰“æ‰°åŸºæœ¬çš„æ•°æ®ä¼ è¾“ï¼Œå°±å¯ä»¥æ·»åŠ ä»»æ„çš„é¢å¤–åŠŸèƒ½ï¼Œä¾‹å¦‚å®‰å…¨è®¤è¯ã€æ•°æ®å‹ç¼©ã€ç¼–ç è½¬æ¢ç­‰ç­‰ï¼Œä¼˜åŒ–æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ã€‚\n\t- æ€»ç»“ï¼š**HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨ç”¨æ¥åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ•°æ®çš„çº¦å®šå’Œè§„èŒƒã€‚**\n- HyperText\n\t- Text\n\t\t- è¡¨ç¤º HTTP ä¼ è¾“çš„ä¸æ˜¯ TCP/UDP è¿™äº›åº•å±‚åè®®é‡Œè¢«åˆ‡åˆ†çš„æ‚ä¹±æ— ç« çš„äºŒè¿›åˆ¶åŒ…ï¼ˆdatagramï¼‰ï¼Œè€Œæ˜¯å®Œæ•´çš„ã€æœ‰æ„ä¹‰çš„æ•°æ®ï¼Œå¯ä»¥è¢«æµè§ˆå™¨ã€æœåŠ¡å™¨è¿™æ ·çš„ä¸Šå±‚åº”ç”¨ç¨‹åºå¤„ç†ã€‚\n\t- è¶…æ–‡æœ¬ï¼šæ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘ç­‰çš„æ··åˆä½“ï¼Œæœ€å…³é”®çš„æ˜¯å«æœ‰â€œè¶…é“¾æ¥â€ï¼Œèƒ½å¤Ÿä»ä¸€ä¸ªâ€œè¶…æ–‡æœ¬â€è·³è·ƒåˆ°å¦ä¸€ä¸ªâ€œè¶…æ–‡æœ¬â€ï¼Œå½¢æˆå¤æ‚çš„éçº¿æ€§ã€ç½‘çŠ¶çš„ç»“æ„å…³ç³»ã€‚\n- æ€»ç»“ï¼š**HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®çš„çº¦å®šå’Œè§„èŒƒ**\n\n### HTTPä¸æ˜¯ï¼Ÿ\n- **ä¸å­˜åœ¨â€œå•ç‹¬çš„å®ä½“â€**ï¼Œä½† HTTP åˆä¸åº”ç”¨ç¨‹åºã€æ“ä½œç³»ç»Ÿã€Web æœåŠ¡å™¨å¯†åˆ‡ç›¸å…³ï¼Œåœ¨å®ƒä»¬ä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹ä¸­å­˜åœ¨ï¼Œè€Œä¸”æ˜¯ä¸€ç§â€œåŠ¨æ€çš„å­˜åœ¨â€ï¼Œæ˜¯å‘ç”Ÿåœ¨ç½‘ç»œè¿æ¥ã€ä¼ è¾“è¶…æ–‡æœ¬æ•°æ®æ—¶çš„ä¸€ä¸ªâ€œåŠ¨æ€è¿‡ç¨‹â€ã€‚\n- **HTTP ä¸æ˜¯äº’è”ç½‘**\n\t- äº’è”ç½‘ï¼ˆInternetï¼‰æ˜¯éå¸ƒäºå…¨çƒçš„è®¸å¤šç½‘ç»œäº’ç›¸è¿æ¥è€Œå½¢æˆçš„ä¸€ä¸ªå·¨å¤§çš„å›½é™…ç½‘ç»œï¼Œåœ¨å®ƒä¸Šé¢å­˜æ”¾ç€å„å¼å„æ ·çš„èµ„æºï¼Œä¹Ÿå¯¹åº”ç€å„å¼å„æ ·çš„åè®®ï¼Œä¾‹å¦‚è¶…æ–‡æœ¬èµ„æºä½¿ç”¨ HTTPï¼Œæ™®é€šæ–‡ä»¶ä½¿ç”¨ FTPï¼Œç”µå­é‚®ä»¶ä½¿ç”¨ SMTP å’Œ POP3 ç­‰ã€‚\n- **HTTP ä¸æ˜¯ç¼–ç¨‹è¯­è¨€**\n\t- ç¼–ç¨‹è¯­è¨€æ˜¯äººä¸è®¡ç®—æœºæ²Ÿé€šäº¤æµæ‰€ä½¿ç”¨çš„è¯­è¨€ï¼Œè€Œ HTTP æ˜¯è®¡ç®—æœºä¸è®¡ç®—æœºæ²Ÿé€šäº¤æµçš„è¯­è¨€\n\t- æ— æ³•ä½¿ç”¨ HTTP æ¥ç¼–ç¨‹ï¼Œä½†å¯ä»¥åè¿‡æ¥ï¼Œç”¨ç¼–ç¨‹è¯­è¨€å»å®ç° HTTPï¼Œå‘Šè¯‰è®¡ç®—æœºå¦‚ä½•ç”¨ HTTP æ¥ä¸å¤–ç•Œé€šä¿¡\n- **HTTP ä¸æ˜¯ç”¨äºä»äº’è”ç½‘æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„åè®®**\n\t- è¿‡äºç‰‡é¢ï¼ŒHTTP å‘ç”Ÿåœ¨ä¸¤ç‚¹ä¹‹é—´ï¼Œå³æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¸æ˜¯åªåŒ…æ‹¬æœ¬åœ°æµè§ˆå™¨ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥ä½œä¸ºå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿä¸ä»…ä»…åªæœ‰æµè§ˆå™¨ï¼Œè¿˜å¯ä»¥æœ‰ Appã€å°ç¨‹åºï¼Œæµè§ˆå™¨åªèƒ½ä½œä¸ºå®¢æˆ·ç«¯\n- **HTTP ä¸æ˜¯ä¸€ä¸ªå­¤ç«‹çš„åè®®**\n\t- HTTP é€šå¸¸è·‘åœ¨ TCP/IP åè®®æ ˆä¹‹ä¸Šï¼Œä¾é  IP åè®®å®ç°å¯»å€å’Œè·¯ç”±ã€TCP åè®®å®ç°å¯é æ•°æ®ä¼ è¾“ã€DNS åè®®å®ç°åŸŸåæŸ¥æ‰¾ã€SSL/TLS åè®®å®ç°å®‰å…¨é€šä¿¡\n\t- è¿˜æœ‰ä¸€äº›åè®®ä¾èµ–äº HTTPï¼Œä¾‹å¦‚ WebSocketã€HTTPDNS ç­‰\n- æ€»ç»“ï¼š**HTTP æ˜¯æ„å»ºäº’è”ç½‘çš„é‡è¦åŸºç¡€æŠ€æœ¯ï¼Œå®ƒæ²¡æœ‰å®ä½“ï¼Œä¾èµ–è®¸å¤šå…¶ä»–çš„æŠ€æœ¯æ¥å®ç°ï¼Œä½†åŒæ—¶è®¸å¤šæŠ€æœ¯ä¹Ÿéƒ½ä¾èµ–äºå®ƒã€‚**\n\n\n## Domain\n### Domain å½¢å¼\n- åŸŸåæ˜¯ä¸€ä¸ªæœ‰å±‚æ¬¡çš„ç»“æ„ï¼Œæ˜¯ä¸€ä¸²ç”¨â€œ.â€åˆ†éš”çš„å¤šä¸ªå•è¯ï¼Œæœ€å³è¾¹çš„è¢«ç§°ä¸ºâ€œé¡¶çº§åŸŸåâ€ï¼Œç„¶åæ˜¯â€œäºŒçº§åŸŸåâ€ï¼Œå±‚çº§å…³ç³»å‘å·¦ä¾æ¬¡é™ä½ã€‚\n- æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸ªåå­—ç©ºé—´ç³»ç»Ÿ\n\n### DNS Domain Name System\n- å°±åƒ IP åœ°å€å¿…é¡»è½¬æ¢æˆ MAC åœ°å€æ‰èƒ½è®¿é—®ä¸»æœºä¸€æ ·ï¼ŒåŸŸåä¹Ÿå¿…é¡»è¦è½¬æ¢æˆ IP åœ°å€ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯â€œåŸŸåè§£æâ€ã€‚\n- DNS ä½¿ç”¨ TCP å’Œ UDP ç«¯å£53\n- DNS çš„æ ¸å¿ƒç³»ç»Ÿæ˜¯ä¸€ä¸ªä¸‰å±‚çš„æ ‘çŠ¶ã€åˆ†å¸ƒå¼æœåŠ¡ï¼ŒåŸºæœ¬å¯¹åº”åŸŸåçš„ç»“æ„ï¼š\n\t- æ ¹åŸŸåæœåŠ¡å™¨ï¼ˆRoot DNS Serverï¼‰ï¼šç®¡ç†é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œè¿”å›â€œcomâ€â€œnetâ€â€œcnâ€ç­‰é¡¶çº§åŸŸåæœåŠ¡å™¨çš„ IP åœ°å€\n\t\t- å…¨ä¸–ç•Œå…±æœ‰ 13 ç»„æ ¹åŸŸåæœåŠ¡å™¨ï¼Œåˆæœ‰æ•°ç™¾å°çš„é•œåƒï¼Œä¿è¯ä¸€å®šèƒ½å¤Ÿè¢«è®¿é—®åˆ°\n\t- çº§åŸŸåæœåŠ¡å™¨ï¼ˆTop-level DNS Serverï¼‰ï¼šç®¡ç†å„è‡ªåŸŸåä¸‹çš„æƒå¨åŸŸåæœåŠ¡å™¨ï¼Œæ¯”å¦‚ com é¡¶çº§åŸŸåæœåŠ¡å™¨å¯ä»¥è¿”å› apple.com åŸŸåæœåŠ¡å™¨çš„ IP åœ°å€\n\t- æƒå¨åŸŸåæœåŠ¡å™¨ï¼ˆAuthoritative DNS Serverï¼‰ï¼šç®¡ç†è‡ªå·±åŸŸåä¸‹ä¸»æœºçš„ IP åœ°å€ï¼Œæ¯”å¦‚ apple.com æƒå¨åŸŸåæœåŠ¡å™¨å¯ä»¥è¿”å› www.apple.com çš„ IP åœ°å€\n\t- ![DNS ä¸‰å±‚çš„æ ‘çŠ¶](http://p0.meituan.net/myvideodistribute/5ac55ff4d8109df28c9afb3fbfc27208625512.png)\n- æ‰€ä»¥æˆ‘ä»¬è®¿é—® https://ele-peng.github.io/ å°±éœ€è¦è¿›è¡Œä¸‹é¢çš„ä¸‰æ¬¡æŸ¥è¯¢\n\t- è®¿é—®æ ¹åŸŸåæœåŠ¡å™¨ï¼Œå®ƒä¼šå‘Šè¯‰ä½  \"io\" é¡¶çº§åŸŸåæœåŠ¡å™¨çš„åœ°å€\n\t- è®¿é—® \"io\" é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œå®ƒå†å‘Šè¯‰ä½  \"github.io\" åŸŸåæœåŠ¡å™¨çš„åœ°å€\n\t- æœ€åè®¿é—® \"github.io\" åŸŸåæœåŠ¡å™¨ï¼Œå°±å¾—åˆ°äº† \"ele-peng.github.io\" çš„åœ°å€\n- DNS æ˜¯ä¸€ä¸ªæ ‘çŠ¶çš„åˆ†å¸ƒå¼æŸ¥è¯¢ç³»ç»Ÿï¼Œä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå¤–å›´æœ‰å¤šçº§çš„ç¼“å­˜ï¼ˆéæƒå¨åŸŸåæœåŠ¡å™¨ã€æ“ä½œç³»ç»Ÿç¼“å­˜å’Œ hosts æ–‡ä»¶ç­‰æ‰‹æ®µï¼‰ç”¨æ¥å‡è½»åŸŸåè§£æçš„å‹åŠ›ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ›´å¿«åœ°è·å–ç»“æœï¼ŒåŸºæœ¬æ€è·¯éƒ½æ˜¯**â€œç¼“å­˜â€**\n\t- è®¸å¤šå¤§å…¬å¸ã€ç½‘ç»œè¿è¡Œå•†éƒ½ä¼šå»ºç«‹è‡ªå·±çš„ DNS æœåŠ¡å™¨ï¼Œä½œä¸ºç”¨æˆ· DNS æŸ¥è¯¢çš„ä»£ç†ï¼Œä»£æ›¿ç”¨æˆ·è®¿é—®æ ¸å¿ƒ DNS ç³»ç»Ÿã€‚è¿™äº›â€œé‡ç”Ÿâ€æœåŠ¡å™¨è¢«ç§°ä¸ºâ€œéæƒå¨åŸŸåæœåŠ¡å™¨â€ï¼Œå¯ä»¥ç¼“å­˜ä¹‹å‰çš„æŸ¥è¯¢ç»“æœï¼Œå¦‚æœå·²ç»æœ‰äº†è®°å½•ï¼Œå°±æ— éœ€å†å‘æ ¹æœåŠ¡å™¨å‘èµ·æŸ¥è¯¢ï¼Œç›´æ¥è¿”å›å¯¹åº”çš„ IP åœ°å€\n\t\t- è¿™äº› DNS æœåŠ¡å™¨çš„æ•°é‡è¦æ¯”æ ¸å¿ƒç³»ç»Ÿçš„æœåŠ¡å™¨å¤šå¾ˆå¤šï¼Œè€Œä¸”å¤§å¤šéƒ¨ç½²åœ¨ç¦»ç”¨æˆ·å¾ˆè¿‘çš„åœ°æ–¹ã€‚æ¯”è¾ƒçŸ¥åçš„ DNS æœ‰ Google çš„â€œ8.8.8.8â€ï¼ŒMicrosoft çš„â€œ4.2.2.1â€ï¼Œè¿˜æœ‰ CloudFlare çš„â€œ1.1.1.1â€ç­‰ç­‰ã€‚\n\t- å…¶æ¬¡ï¼Œæ“ä½œç³»ç»Ÿé‡Œä¹Ÿä¼šå¯¹ DNS è§£æç»“æœåšç¼“å­˜ï¼Œå¦‚æœä½ ä¹‹å‰è®¿é—®è¿‡â€œele-peng.github.ioâ€ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡åœ¨æµè§ˆå™¨é‡Œå†è¾“å…¥è¿™ä¸ªç½‘å€çš„æ—¶å€™å°±ä¸ä¼šå†è·‘åˆ° DNS é‚£é‡Œå»é—®äº†ï¼Œç›´æ¥åœ¨æ“ä½œç³»ç»Ÿé‡Œå°±å¯ä»¥æ‹¿åˆ° IP åœ°å€\n\t- å¦å¤–ï¼Œæ“ä½œç³»ç»Ÿé‡Œè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„â€œä¸»æœºæ˜ å°„â€æ–‡ä»¶\n- å‡å¦‚è®¿é—® www.ä¸å­˜åœ¨.com \n\t- www.ä¸å­˜åœ¨.com -> Hosts æ–‡ä»¶ -> æ“ä½œç³»ç»Ÿæœ¬åœ°ç¼“å­˜ -> éæƒå¨åŸŸåæœåŠ¡å™¨æŸ¥è¯¢å…¶ç¼“å­˜ -> æŸ¥è¯¢æ ¹åŸŸåã€é¡¶çº§åŸŸåã€ä»¥åŠåŸŸåæœåŠ¡å™¨ï¼Œå½“åé¢çš„æŸ¥è¯¢å¾—åˆ°ç»“æœæ—¶ï¼Œå°†ä¼šå†™å…¥æœ¬åœ°ç¼“å­˜\n- ç°åœ¨çš„ DNS æ¶æ„\n\t- ![ç°åœ¨çš„ DNS æ¶æ„](http://p0.meituan.net/myvideodistribute/3ba7d376ea3f43fcb761deeb78932622389661.png)\n- **ä½¿ç”¨ DNS å¯ä»¥å®ç°åŸºäºåŸŸåçš„è´Ÿè½½å‡è¡¡ï¼Œæ—¢å¯ä»¥åœ¨å†…ç½‘ï¼Œä¹Ÿå¯ä»¥åœ¨å¤–ç½‘**\n\n\n\n\n## å†™åœ¨åé¢\n- å­¦è€Œä¸æ€åˆ™ç½” äº’å‹‰\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢ee","source":"_posts/ä»URLè¾“å…¥åˆ°.md","raw":"---\ntitle: ã€æœªå®Œã€‘ä»URLè¾“å…¥åˆ°...ï¼ˆä¸€ï¼‰\ndate: 2020-05-12 16:51:50\ntags:\n- è®¡ç®—æœºç½‘ç»œ\ncategories:\n- è®¡ç®—æœºç½‘ç»œ\ndescription:\n- ä»URLè¾“å…¥åˆ°...\n---\n\n\n## å†™åœ¨å‰é¢\n- å˜¿å˜¿å˜¿ ğŸ˜±\n- åˆ«æƒ³æ­ªï¼Œæˆ‘ä»¬è¿™ä¸ªç³»åˆ—è¦åšçš„æ˜¯ä»ç»å…¸é¢è¯•é¢˜å…¥æ‰‹\n\t- ä» URL è¾“å…¥ https://ele-peng.github.io/ åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ\n- ç®€å•äº†è§£ä¸€ä¸‹è®¡ç®—æœºç½‘ç»œç›¸å…³çŸ¥è¯†ã€‚æ˜¯çš„ï¼ŒElle å¾ˆæƒ¨ğŸ˜­ è®¡ç®—æœºç½‘ç»œå­¦å¾—ç¨€çƒ‚\n\t\n\n<!-- more -->\n\n## ç®€å•è¿‡ç¨‹\n- ä½ å…ˆåœ¨æµè§ˆå™¨é‡Œé¢è¾“å…¥ https://ele-peng.github.io/ ï¼Œè¿™æ˜¯ä¸€ä¸ª URLã€‚æµè§ˆå™¨åªçŸ¥é“åå­—æ˜¯â€œele-peng.github.ioâ€ï¼Œä½†æ˜¯ä¸çŸ¥é“å…·ä½“çš„åœ°ç‚¹ï¼Œæ‰€ä»¥ä¸çŸ¥é“åº”è¯¥å¦‚ä½•è®¿é—®ã€‚äºæ˜¯ï¼Œå®ƒæ‰“å¼€åœ°å€ç°¿å»æŸ¥æ‰¾ã€‚å¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„åœ°å€ç°¿åè®® DNS å»æŸ¥æ‰¾ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ›´åŠ ç²¾å‡†çš„åœ°å€ç°¿æŸ¥æ‰¾åè®® HTTPDNS ã€‚\n- æ— è®ºç”¨å“ªä¸€ç§æ–¹æ³•æŸ¥æ‰¾ï¼Œæœ€ç»ˆéƒ½ä¼šå¾—åˆ°è¿™ä¸ªåœ°å€ï¼š52.74.223.119ã€‚è¿™ä¸ªæ˜¯ IP åœ°å€ï¼Œæ˜¯äº’è”ç½‘ä¸–ç•Œçš„â€œé—¨ç‰Œå·â€ã€‚\n- çŸ¥é“äº†ç›®æ ‡åœ°å€ï¼Œæµè§ˆå™¨å°±å¼€å§‹æ‰“åŒ…å®ƒçš„è¯·æ±‚ã€‚è¿™é‡Œä¼šä½¿ç”¨HTTPSåè®®ã€‚æ— è®ºæ˜¯ä»€ä¹ˆåè®®ï¼Œé‡Œé¢éƒ½ä¼šå†™æ˜â€œä½ è¦è¯·æ±‚ä»€ä¹ˆâ€ã€‚ï»¿\n- DNSã€HTTPã€HTTPS æ‰€åœ¨çš„å±‚æˆ‘ä»¬ç§°ä¸º**åº”ç”¨å±‚**ã€‚ç»è¿‡åº”ç”¨å±‚å°è£…åï¼Œæµè§ˆå™¨ä¼šå°†åº”ç”¨å±‚çš„åŒ…äº¤ç»™ä¸‹ä¸€å±‚å»å®Œæˆï¼Œ**é€šè¿‡ socket ç¼–ç¨‹æ¥å®ç°**ã€‚ä¸‹ä¸€å±‚æ˜¯**ä¼ è¾“å±‚**ã€‚ä¼ è¾“å±‚æœ‰ä¸¤ç§åè®®ï¼Œä¸€ç§æ˜¯æ— è¿æ¥çš„åè®®UDPï¼Œä¸€ç§æ˜¯é¢å‘è¿æ¥çš„åè®®TCPã€‚è¿™é‡Œä½¿ç”¨ TCP åè®®ã€‚æ‰€è°“çš„é¢å‘è¿æ¥å°±æ˜¯ï¼ŒTCP ä¼šä¿è¯è¿™ä¸ªåŒ…èƒ½å¤Ÿåˆ°è¾¾ç›®çš„åœ°ã€‚å¦‚æœä¸èƒ½åˆ°è¾¾ï¼Œå°±ä¼šé‡æ–°å‘é€ï¼Œç›´è‡³åˆ°è¾¾ã€‚\n- TCP åè®®é‡Œé¢ä¼šæœ‰ä¸¤ä¸ªç«¯å£ï¼Œä¸€ä¸ªæ˜¯æµè§ˆå™¨ç›‘å¬çš„ç«¯å£ï¼Œä¸€ä¸ªæ˜¯ github çš„æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£ã€‚æ“ä½œç³»ç»Ÿå¾€å¾€é€šè¿‡ç«¯å£æ¥åˆ¤æ–­ï¼Œå®ƒå¾—åˆ°çš„åŒ…åº”è¯¥ç»™å“ªä¸ªè¿›ç¨‹ã€‚\n- ä¼ è¾“å±‚å°è£…å®Œæ¯•åï¼Œæµè§ˆå™¨ä¼šå°†åŒ…äº¤ç»™æ“ä½œç³»ç»Ÿçš„**ç½‘ç»œå±‚**ã€‚ç½‘ç»œå±‚çš„åè®®æ˜¯ IP åè®®ã€‚åœ¨ IP åè®®é‡Œé¢ä¼šæœ‰æº IP åœ°å€ï¼Œå³æµè§ˆå™¨æ‰€åœ¨æœºå™¨çš„ IP åœ°å€å’Œç›®æ ‡ IP åœ°å€ï¼Œä¹Ÿå³ github æ‰€åœ¨æœåŠ¡å™¨çš„ IP åœ°å€ã€‚\n- æ“ä½œç³»ç»Ÿæ—¢ç„¶çŸ¥é“äº†ç›®æ ‡ IP åœ°å€ï¼Œå°±å¼€å§‹æƒ³å¦‚ä½•æ ¹æ®è¿™ä¸ªé—¨ç‰Œå·æ‰¾åˆ°ç›®æ ‡æœºå™¨ã€‚æ“ä½œç³»ç»Ÿå¾€å¾€ä¼šåˆ¤æ–­ï¼Œè¿™ä¸ªç›®æ ‡ IP åœ°å€æ˜¯æœ¬åœ°äººï¼Œè¿˜æ˜¯å¤–åœ°äººã€‚å¦‚æœæ˜¯æœ¬åœ°äººï¼Œä»é—¨ç‰Œå·å°±èƒ½çœ‹å‡ºæ¥ï¼Œä½†æ˜¯æ˜¾ç„¶ github ç½‘ç«™ä¸åœ¨æœ¬åœ°ï¼Œè€Œåœ¨é¥è¿œçš„åœ°æ–¹ã€‚\n- æ“ä½œç³»ç»ŸçŸ¥é“è¦ç¦»å¼€æœ¬åœ°å»è¿œæ–¹ã€‚è™½ç„¶ä¸çŸ¥é“è¿œæ–¹åœ¨ä½•å¤„ï¼Œä½†æ˜¯å¯ä»¥è¿™æ ·ç±»æ¯”ä¸€ä¸‹ï¼šå¦‚æœå»å›½å¤–è¦å»æµ·å…³ï¼Œå»å¤–åœ°å°±è¦å»ç½‘å…³ã€‚è€Œæ“ä½œç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šè¢« DHCP åè®®é…ç½® IP åœ°å€ï¼Œä»¥åŠé»˜è®¤çš„ç½‘å…³çš„ IP åœ°å€ 192.168.1.1ã€‚\n- æ“ä½œç³»ç»Ÿå¦‚ä½•å°† IP åœ°å€å‘ç»™ç½‘å…³å‘¢ï¼Ÿåœ¨æœ¬åœ°é€šä¿¡åŸºæœ¬é å¼ï¼Œäºæ˜¯æ“ä½œç³»ç»Ÿå¤§å¼ä¸€å£°ï¼Œè°æ˜¯ 192.168.1.1 å•Šï¼Ÿç½‘å…³ä¼šå›ç­”å®ƒï¼Œæˆ‘å°±æ˜¯ï¼Œæˆ‘çš„æœ¬åœ°åœ°å€åœ¨æ‘ä¸œå¤´ã€‚è¿™ä¸ªæœ¬åœ°åœ°å€å°±æ˜¯ MAC åœ°å€ï¼Œè€Œå¤§å¼çš„é‚£ä¸€å£°æ˜¯ ARP åè®®ã€‚\n- äºæ˜¯æ“ä½œç³»ç»Ÿå°† IP åŒ…äº¤ç»™äº†ä¸‹ä¸€å±‚ï¼Œä¹Ÿå°±æ˜¯ **MAC å±‚**ã€‚ç½‘å¡å†å°†åŒ…å‘å‡ºå»ã€‚ç”±äºè¿™ä¸ªåŒ…é‡Œé¢æ˜¯æœ‰ MAC åœ°å€çš„ï¼Œå› è€Œå®ƒèƒ½å¤Ÿåˆ°è¾¾ç½‘å…³ã€‚\n- ç½‘å…³æ”¶åˆ°åŒ…ä¹‹åï¼Œä¼šæ ¹æ®è‡ªå·±çš„çŸ¥è¯†ï¼Œåˆ¤æ–­ä¸‹ä¸€æ­¥åº”è¯¥æ€ä¹ˆèµ°ã€‚ç½‘å…³å¾€å¾€æ˜¯ä¸€ä¸ªè·¯ç”±å™¨ï¼Œåˆ°æŸä¸ª IP åœ°å€åº”è¯¥æ€ä¹ˆèµ°ï¼Œè¿™ä¸ªå«ä½œè·¯ç”±è¡¨ã€‚\n- è·¯ç”±å™¨æœ‰ç‚¹åƒç„å¥˜è¥¿è¡Œè·¯è¿‡çš„ä¸€ä¸ªä¸ªå›½å®¶çš„ä¸€ä¸ªä¸ªåŸå…³ã€‚æ¯ä¸ªåŸå…³éƒ½è¿ç€ä¸¤ä¸ªå›½å®¶ï¼Œæ¯ä¸ªå›½å®¶ç›¸å½“äºä¸€ä¸ªå±€åŸŸç½‘ï¼Œåœ¨æ¯ä¸ªå›½å®¶å†…éƒ¨ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æœ¬åœ°çš„åœ°å€ MAC è¿›è¡Œé€šä¿¡ã€‚\n- ä¸€æ—¦è·¨è¶ŠåŸå…³ï¼Œå°±éœ€è¦æ‹¿å‡º IP å¤´æ¥é—®ï¼Œç›®æ ‡ IP åœ°å€æ€ä¹ˆèµ°ï¼Ÿ\n- åŸå…³å¾€å¾€æ˜¯çŸ¥é“è¿™äº›â€œçŸ¥è¯†â€çš„ï¼Œå› ä¸ºåŸå…³å’Œä¸´è¿‘çš„åŸå…³ä¹Ÿä¼šç»å¸¸æ²Ÿé€šã€‚åˆ°å“ªé‡Œåº”è¯¥æ€ä¹ˆèµ°ï¼Œè¿™ç§æ²Ÿé€šçš„åè®®ç§°ä¸ºè·¯ç”±åè®®ï¼Œå¸¸ç”¨çš„æœ‰ OSP Få’Œ BGP ã€‚ï»¿\n- åŸå…³ä¸åŸå…³ä¹‹é—´æ˜¯ä¸€ä¸ªå›½å®¶ï¼Œå½“ç½‘ç»œåŒ…çŸ¥é“äº†ä¸‹ä¸€æ­¥å»å“ªä¸ªåŸå…³ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨å›½å®¶å†…éƒ¨çš„ MAC åœ°å€ï¼Œé€šè¿‡ä¸‹ä¸€ä¸ªåŸå…³çš„ MAC åœ°å€ï¼Œæ‰¾åˆ°ä¸‹ä¸€ä¸ªåŸå…³ï¼Œç„¶åå†é—®ä¸‹ä¸€æ­¥çš„è·¯æ€ä¹ˆèµ°ï¼Œä¸€ç›´åˆ°èµ°å‡ºæœ€åä¸€ä¸ªåŸå…³ã€‚\n- æœ€åä¸€ä¸ªåŸå…³çŸ¥é“è¿™ä¸ªç½‘ç»œåŒ…è¦å»çš„åœ°æ–¹ã€‚äºæ˜¯ï¼Œå¯¹ç€è¿™ä¸ªå›½å®¶å¼ä¸€å£°ï¼Œè°æ˜¯ç›®æ ‡ IP å•Šï¼Ÿç›®æ ‡æœåŠ¡å™¨å°±ä¼šå›å¤ä¸€ä¸ª MAC åœ°å€ã€‚ç½‘ç»œåŒ…è¿‡å…³åï¼Œé€šè¿‡è¿™ä¸ª MAC åœ°å€å°±èƒ½æ‰¾åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚\n- ç›®æ ‡æœåŠ¡å™¨å‘ç° MAC åœ°å€å¯¹ä¸Šäº†ï¼Œå–ä¸‹ MAC å¤´æ¥ï¼Œå‘é€ç»™æ“ä½œç³»ç»Ÿçš„ç½‘ç»œå±‚ã€‚å‘ç° IP ä¹Ÿå¯¹ä¸Šäº†ï¼Œå°±å–ä¸‹ IP å¤´ã€‚IP å¤´é‡Œä¼šå†™ä¸Šä¸€å±‚å°è£…çš„æ˜¯ TCP åè®®ï¼Œç„¶åå°†å…¶äº¤ç»™ä¼ è¾“å±‚ï¼Œå³TCP å±‚ã€‚\n- åœ¨è¿™ä¸€å±‚é‡Œï¼Œå¯¹äºæ”¶åˆ°çš„æ¯ä¸ªåŒ…ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªå›å¤çš„åŒ…è¯´æ˜æ”¶åˆ°äº†ã€‚è¿™ä¸ªå›å¤çš„åŒ…ç»éè¿™æ¬¡æŸ¥è¯¢è¯·æ±‚çš„ç»“æœï¼Œè€Œä»…ä»…æ˜¯ TCP å±‚çš„ä¸€ä¸ªè¯´æ˜ï¼Œå³æ”¶åˆ°ä¹‹åçš„å›å¤ã€‚å½“ç„¶è¿™ä¸ªå›å¤ï¼Œä¼šæ²¿ç€åˆšæ‰æ¥çš„æ–¹å‘èµ°å›å»ï¼ŒæŠ¥ä¸ªå¹³å®‰ã€‚\n- å¦‚æœè¿‡ä¸€æ®µæ—¶é—´è¿˜æ˜¯æ²¡åˆ°ï¼Œå‘é€ç«¯çš„ TCP å±‚ä¼šé‡æ–°å‘é€è¿™ä¸ªåŒ…ï¼Œè¿˜æ˜¯ä¸Šé¢çš„è¿‡ç¨‹ï¼Œç›´åˆ°æœ‰ä¸€å¤©æ”¶åˆ°å¹³å®‰åˆ°è¾¾çš„å›å¤ã€‚è¿™ä¸ªé‡è¯•ç»éä½ çš„æµè§ˆå™¨é‡æ–°è¯·æ±‚ github ä¸ªäººä¸»é¡µã€‚å¯¹äºæµè§ˆå™¨æ¥è®²ï¼Œå°±å‘é€äº†ä¸€æ¬¡ github ä¸ªäººä¸»é¡µè¯·æ±‚ï¼ŒTCP å±‚ä¸æ–­è‡ªå·±é—·å¤´é‡è¯•ã€‚é™¤é TCP è¿™ä¸€å±‚å‡ºäº†é—®é¢˜ï¼Œä¾‹å¦‚è¿æ¥æ–­äº†ï¼Œæ‰è½®åˆ°æµè§ˆå™¨çš„åº”ç”¨å±‚é‡æ–°å‘é€ github ä¸ªäººä¸»é¡µè¯·æ±‚ã€‚\n- å½“ç½‘ç»œåŒ…å¹³å®‰åˆ°è¾¾ TCP å±‚ä¹‹åï¼ŒTCP å¤´ä¸­æœ‰ç›®æ ‡ç«¯å£å·ï¼Œé€šè¿‡è¿™ä¸ªç«¯å£å·ï¼Œå¯ä»¥æ‰¾åˆ° github ç½‘ç«™çš„è¿›ç¨‹æ­£åœ¨ç›‘å¬è¿™ä¸ªç«¯å£å·ï¼Œå‡è®¾ä¸€ä¸ª Tomcatï¼Œå°†è¿™ä¸ªåŒ…å‘ç»™ github ç½‘ç«™ã€‚ï»¿\n- github ç½‘ç«™çš„è¿›ç¨‹å¾—åˆ° HTTP è¯·æ±‚çš„å†…å®¹ï¼ŒçŸ¥é“äº†è¦å“åº”å•¥ã€‚å¾€å¾€ä¸€ä¸ªç”µå•†ç½‘ç«™æœ€åˆæ¥å¾…è¯·æ±‚çš„è¿™ä¸ª Tomcat åªæ˜¯ä¸ªæ¥å¾…å‘˜ï¼Œè´Ÿè´£ç»Ÿç­¹å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„äº‹æƒ…éƒ½è‡ªå·±åšã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªæ¥å¾…å‘˜è¦å‘Šè¯‰ä¸“é—¨ç®¡ç† GitHub ä¸ªäººä¸»é¡µçš„è¿›ç¨‹ï¼Œè¦å“åº”å•¥ç­‰ç­‰ã€‚\n- å¦‚ä½•å‘Šè¯‰ç›¸å…³çš„è¿›ç¨‹å‘¢ï¼Ÿå¾€å¾€é€šè¿‡ RPC è°ƒç”¨ï¼Œå³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„æ–¹å¼æ¥å®ç°ã€‚è¿œç¨‹è¿‡ç¨‹è°ƒç”¨å°±æ˜¯å½“å‘Šè¯‰ç®¡ç† GitHub ä¸ªäººä¸»é¡µçš„è¿›ç¨‹çš„æ—¶å€™ï¼Œæ¥å¾…å‘˜ä¸ç”¨å…³å¿ƒä¸­é—´çš„ç½‘ç»œäº’è¿é—®é¢˜ï¼Œä¼šç”± RPC æ¡†æ¶ç»Ÿä¸€å¤„ç†ã€‚RPC æ¡†æ¶æœ‰å¾ˆå¤šç§ï¼Œæœ‰åŸºäº HTTP åè®®æ”¾åœ¨ HTTP çš„æŠ¥æ–‡é‡Œé¢çš„ï¼Œæœ‰ç›´æ¥å°è£…åœ¨ TCP æŠ¥æ–‡é‡Œé¢çš„ã€‚\n- å½“æ¥å¾…å‘˜å‘ç°ç›¸åº”çš„éƒ¨é—¨éƒ½å¤„ç†å®Œæ¯•ï¼Œå°±å›å¤ä¸€ä¸ª HTTPS çš„åŒ…ï¼Œå‘ŠçŸ¥æŸ¥è¯¢æˆåŠŸã€‚è¿™ä¸ª HTTPS çš„åŒ…ï¼Œä¼šåƒæ¥çš„æ—¶å€™ä¸€æ ·ï¼Œç»è¿‡åƒéš¾ä¸‡é™©åˆ°è¾¾ä½ çš„ä¸ªäººç”µè„‘ï¼Œæœ€ç»ˆè¿›å…¥æµè§ˆå™¨ï¼Œæ˜¾ç¤ºä¸ªäººä¸»é¡µã€‚\n\n## ç½‘ç»œåˆ†å±‚æ¨¡å‹\n### TCP/IP åè®®æ ˆ\n- ![TCP/IP åè®®æ ˆ](http://p0.meituan.net/myvideodistribute/6fea0628affaf34d09b59d845ffeb60a75766.png)\n- **link layer é“¾æ¥å±‚**ï¼šè´Ÿè´£åœ¨ä»¥å¤ªç½‘ã€WiFi è¿™æ ·çš„åº•å±‚ç½‘ç»œä¸Šå‘é€åŸå§‹æ•°æ®åŒ…ï¼ˆframe å¸§ï¼‰ï¼Œå·¥ä½œåœ¨ç½‘å¡è¿™ä¸ªå±‚æ¬¡ï¼Œä½¿ç”¨ MAC åœ°å€æ¥æ ‡è®°ç½‘ç»œä¸Šçš„è®¾å¤‡ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿå« MAC å±‚ã€‚\n- **internet layer ç½‘é™…å±‚**ï¼šIP åè®®å°±å¤„åœ¨è¿™ä¸€å±‚ã€‚å› ä¸º IP åè®®å®šä¹‰äº†â€œIP åœ°å€â€çš„æ¦‚å¿µï¼Œæ‰€ä»¥å°±å¯ä»¥åœ¨â€œé“¾æ¥å±‚â€çš„åŸºç¡€ä¸Šï¼Œç”¨ IP åœ°å€å–ä»£ MAC åœ°å€ï¼ŒæŠŠè®¸è®¸å¤šå¤šçš„å±€åŸŸç½‘ã€å¹¿åŸŸç½‘è¿æ¥æˆä¸€ä¸ªè™šæ‹Ÿçš„å·¨å¤§ç½‘ç»œï¼Œåœ¨è¿™ä¸ªç½‘ç»œé‡Œæ‰¾è®¾å¤‡æ—¶åªè¦æŠŠ IP åœ°å€å†â€œç¿»è¯‘â€æˆ MAC åœ°å€å°±å¯ä»¥äº†ã€‚ä¼ è¾“å•ä½æ˜¯åŒ…ï¼ˆpacketï¼‰\n- **transport layer ä¼ è¾“å±‚**ï¼šTCP/UDP åè®®å·¥ä½œçš„å±‚æ¬¡\n\t- TCP æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„åè®®ï¼Œéœ€è¦å…ˆä¸å¯¹æ–¹å»ºç«‹è¿æ¥ç„¶åæ‰èƒ½å‘é€æ•°æ®ï¼Œè€Œä¸”ä¿è¯æ•°æ®ä¸ä¸¢å¤±ä¸é‡å¤ã€‚è€Œ UDP åˆ™æ¯”è¾ƒç®€å•ï¼Œå®ƒæ— çŠ¶æ€ï¼Œä¸ç”¨äº‹å…ˆå»ºç«‹è¿æ¥å°±å¯ä»¥ä»»æ„å‘é€æ•°æ®ï¼Œä½†ä¸ä¿è¯æ•°æ®ä¸€å®šä¼šå‘åˆ°å¯¹æ–¹ã€‚ä¸¤ä¸ªåè®®çš„å¦ä¸€ä¸ªé‡è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å½¢å¼ã€‚TCP çš„æ•°æ®æ˜¯è¿ç»­çš„â€œå­—èŠ‚æµâ€ï¼Œæœ‰å…ˆåé¡ºåºï¼Œè€Œ UDP åˆ™æ˜¯åˆ†æ•£çš„å°æ•°æ®åŒ…ï¼Œæ˜¯é¡ºåºå‘ï¼Œä¹±åºæ”¶ã€‚\n\t- TCP å±‚çš„ä¼ è¾“å•ä½æ˜¯æ®µï¼ˆsegmentï¼‰\n- **application layer åº”ç”¨å±‚**ï¼šå„ç§é¢å‘å…·ä½“åº”ç”¨çš„åè®®ï¼Œä¾‹å¦‚ DHCPã€HTTPã€HTTPSã€RTMPã€DNSã€P2Pã€GTPã€RPCã€Telnetã€SSHã€FTPã€SMTP ç­‰ç­‰ã€‚\n\t- HTTP çš„ä¼ è¾“å•ä½åˆ™æ˜¯æ¶ˆæ¯æˆ–æŠ¥æ–‡ï¼ˆmessageï¼‰\n\n### OSI (Open System Interconnection Reference Model) å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹\n- ![OSIå‚è€ƒæ¨¡å‹](http://p1.meituan.net/myvideodistribute/53145af5e2b1d0846761c3382cce24c5104243.png)\n- **physical layer ç‰©ç†å±‚**ï¼šç½‘ç»œçš„ç‰©ç†å½¢å¼ï¼Œä¾‹å¦‚ç”µç¼†ã€å…‰çº¤ã€ç½‘å¡ã€é›†çº¿å™¨ç­‰ç­‰\n- **data link layer æ•°æ®é“¾è·¯å±‚**ï¼šåŸºæœ¬ç›¸å½“äº TCP/IP çš„é“¾æ¥å±‚\n- **network layer ç½‘ç»œå±‚**ï¼šç›¸å½“äº TCP/IP é‡Œçš„ç½‘é™…å±‚\n- **transport layer ä¼ è¾“å±‚**ï¼šç›¸å½“äº TCP/IP é‡Œçš„ä¼ è¾“å±‚\n- **session layer ä¼šè¯å±‚**ï¼šç»´æŠ¤ç½‘ç»œä¸­çš„è¿æ¥çŠ¶æ€ï¼Œå³ä¿æŒä¼šè¯å’ŒåŒæ­¥\n- **presentation layer è¡¨ç¤ºå±‚**ï¼šæŠŠæ•°æ®è½¬æ¢ä¸ºåˆé€‚ã€å¯ç†è§£çš„è¯­æ³•å’Œè¯­ä¹‰\n- **application layer åº”ç”¨å±‚**ï¼šé¢å‘å…·ä½“çš„åº”ç”¨ä¼ è¾“æ•°æ®\n\n### ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»\n- ![ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»](http://p0.meituan.net/myvideodistribute/0042adbffe9810c7913862252fa27662164155.png)\n- ç¬¬ä¸€å±‚ï¼šç‰©ç†å±‚ï¼ŒTCP/IP é‡Œæ— å¯¹åº”\n- ç¬¬äºŒå±‚ï¼šæ•°æ®é“¾è·¯å±‚ï¼Œå¯¹åº” TCP/IP çš„é“¾æ¥å±‚\n- ç¬¬ä¸‰å±‚ï¼šç½‘ç»œå±‚ï¼Œå¯¹åº” TCP/IP çš„ç½‘é™…å±‚\n- ç¬¬å››å±‚ï¼šä¼ è¾“å±‚ï¼Œå¯¹åº” TCP/IP çš„ä¼ è¾“å±‚\n- ç¬¬äº”ã€å…­ã€ä¸ƒå±‚ï¼šç»Ÿä¸€å¯¹åº”åˆ° TCP/IP çš„åº”ç”¨å±‚\n\t-  TCP/IP å®é™…åº”ç”¨æ—¶çš„ä¼šè¯ç®¡ç†ã€ç¼–ç è½¬æ¢ã€å‹ç¼©ç­‰å’Œå…·ä½“åº”ç”¨ç»å¸¸è”ç³»çš„å¾ˆç´§å¯†ï¼Œå¾ˆéš¾åˆ†å¼€\n\n\t\n\n## HTTP - HyperText Transfer Protocol\n- ![HTTPæ¦‚è§ˆå›¾](http://p0.meituan.net/myvideodistribute/0eac1c72dc8c7c0ac87363d73f51b19b30633.png)\n- Protocol\n\t- åè®®å¿…é¡»è¦æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªå‚ä¸è€…ï¼Œä¹Ÿå°±æ˜¯â€œåâ€\n\t- åè®®æ˜¯å¯¹å‚ä¸è€…çš„ä¸€ç§è¡Œä¸ºçº¦å®šå’Œè§„èŒƒï¼Œä¹Ÿå°±æ˜¯â€œè®®â€ï¼ŒåŒ…æ‹¬è¯­æ³•ã€è¯­ä¹‰ã€åŒæ­¥è§„åˆ™å’Œé”™è¯¯å¤„ç†\n\t- æ€»ç»“ï¼š**HTTP æ˜¯ä¸€ä¸ªç”¨åœ¨è®¡ç®—æœºä¸–ç•Œé‡Œçš„åè®®ã€‚å®ƒä½¿ç”¨è®¡ç®—æœºèƒ½å¤Ÿç†è§£çš„è¯­è¨€ç¡®ç«‹äº†ä¸€ç§è®¡ç®—æœºä¹‹é—´äº¤æµé€šä¿¡çš„è§„èŒƒï¼Œä»¥åŠç›¸å…³çš„å„ç§æ§åˆ¶å’Œé”™è¯¯å¤„ç†æ–¹å¼ã€‚**\n- Transfer\n\t- HTTP åè®®æ˜¯ä¸€ä¸ªâ€œåŒå‘åè®®â€\n\t- æ•°æ®è™½ç„¶æ˜¯åœ¨ A å’Œ B ä¹‹é—´ä¼ è¾“ï¼Œä½†å¹¶æ²¡æœ‰é™åˆ¶åªæœ‰ A å’Œ B è¿™ä¸¤ä¸ªè§’è‰²ï¼Œå…è®¸ä¸­é—´æœ‰â€œä¸­è½¬â€æˆ–è€…â€œæ¥åŠ›â€\n\t\t- ä¼ è¾“æ–¹å¼ä»â€œA<===>Bâ€ å¯ä»¥å˜æˆäº† â€œA<=>X<=>Y<=>Z<=>Bâ€\n\t\t- A åˆ° B çš„ä¼ è¾“è¿‡ç¨‹ä¸­å¯ä»¥å­˜åœ¨ä»»æ„å¤šä¸ªâ€œä¸­é—´äººâ€ï¼Œè€Œè¿™äº›ä¸­é—´äººä¹Ÿéƒ½éµä» HTTP åè®®ï¼Œåªè¦ä¸æ‰“æ‰°åŸºæœ¬çš„æ•°æ®ä¼ è¾“ï¼Œå°±å¯ä»¥æ·»åŠ ä»»æ„çš„é¢å¤–åŠŸèƒ½ï¼Œä¾‹å¦‚å®‰å…¨è®¤è¯ã€æ•°æ®å‹ç¼©ã€ç¼–ç è½¬æ¢ç­‰ç­‰ï¼Œä¼˜åŒ–æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ã€‚\n\t- æ€»ç»“ï¼š**HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨ç”¨æ¥åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ•°æ®çš„çº¦å®šå’Œè§„èŒƒã€‚**\n- HyperText\n\t- Text\n\t\t- è¡¨ç¤º HTTP ä¼ è¾“çš„ä¸æ˜¯ TCP/UDP è¿™äº›åº•å±‚åè®®é‡Œè¢«åˆ‡åˆ†çš„æ‚ä¹±æ— ç« çš„äºŒè¿›åˆ¶åŒ…ï¼ˆdatagramï¼‰ï¼Œè€Œæ˜¯å®Œæ•´çš„ã€æœ‰æ„ä¹‰çš„æ•°æ®ï¼Œå¯ä»¥è¢«æµè§ˆå™¨ã€æœåŠ¡å™¨è¿™æ ·çš„ä¸Šå±‚åº”ç”¨ç¨‹åºå¤„ç†ã€‚\n\t- è¶…æ–‡æœ¬ï¼šæ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘ç­‰çš„æ··åˆä½“ï¼Œæœ€å…³é”®çš„æ˜¯å«æœ‰â€œè¶…é“¾æ¥â€ï¼Œèƒ½å¤Ÿä»ä¸€ä¸ªâ€œè¶…æ–‡æœ¬â€è·³è·ƒåˆ°å¦ä¸€ä¸ªâ€œè¶…æ–‡æœ¬â€ï¼Œå½¢æˆå¤æ‚çš„éçº¿æ€§ã€ç½‘çŠ¶çš„ç»“æ„å…³ç³»ã€‚\n- æ€»ç»“ï¼š**HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®çš„çº¦å®šå’Œè§„èŒƒ**\n\n### HTTPä¸æ˜¯ï¼Ÿ\n- **ä¸å­˜åœ¨â€œå•ç‹¬çš„å®ä½“â€**ï¼Œä½† HTTP åˆä¸åº”ç”¨ç¨‹åºã€æ“ä½œç³»ç»Ÿã€Web æœåŠ¡å™¨å¯†åˆ‡ç›¸å…³ï¼Œåœ¨å®ƒä»¬ä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹ä¸­å­˜åœ¨ï¼Œè€Œä¸”æ˜¯ä¸€ç§â€œåŠ¨æ€çš„å­˜åœ¨â€ï¼Œæ˜¯å‘ç”Ÿåœ¨ç½‘ç»œè¿æ¥ã€ä¼ è¾“è¶…æ–‡æœ¬æ•°æ®æ—¶çš„ä¸€ä¸ªâ€œåŠ¨æ€è¿‡ç¨‹â€ã€‚\n- **HTTP ä¸æ˜¯äº’è”ç½‘**\n\t- äº’è”ç½‘ï¼ˆInternetï¼‰æ˜¯éå¸ƒäºå…¨çƒçš„è®¸å¤šç½‘ç»œäº’ç›¸è¿æ¥è€Œå½¢æˆçš„ä¸€ä¸ªå·¨å¤§çš„å›½é™…ç½‘ç»œï¼Œåœ¨å®ƒä¸Šé¢å­˜æ”¾ç€å„å¼å„æ ·çš„èµ„æºï¼Œä¹Ÿå¯¹åº”ç€å„å¼å„æ ·çš„åè®®ï¼Œä¾‹å¦‚è¶…æ–‡æœ¬èµ„æºä½¿ç”¨ HTTPï¼Œæ™®é€šæ–‡ä»¶ä½¿ç”¨ FTPï¼Œç”µå­é‚®ä»¶ä½¿ç”¨ SMTP å’Œ POP3 ç­‰ã€‚\n- **HTTP ä¸æ˜¯ç¼–ç¨‹è¯­è¨€**\n\t- ç¼–ç¨‹è¯­è¨€æ˜¯äººä¸è®¡ç®—æœºæ²Ÿé€šäº¤æµæ‰€ä½¿ç”¨çš„è¯­è¨€ï¼Œè€Œ HTTP æ˜¯è®¡ç®—æœºä¸è®¡ç®—æœºæ²Ÿé€šäº¤æµçš„è¯­è¨€\n\t- æ— æ³•ä½¿ç”¨ HTTP æ¥ç¼–ç¨‹ï¼Œä½†å¯ä»¥åè¿‡æ¥ï¼Œç”¨ç¼–ç¨‹è¯­è¨€å»å®ç° HTTPï¼Œå‘Šè¯‰è®¡ç®—æœºå¦‚ä½•ç”¨ HTTP æ¥ä¸å¤–ç•Œé€šä¿¡\n- **HTTP ä¸æ˜¯ç”¨äºä»äº’è”ç½‘æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„åè®®**\n\t- è¿‡äºç‰‡é¢ï¼ŒHTTP å‘ç”Ÿåœ¨ä¸¤ç‚¹ä¹‹é—´ï¼Œå³æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¸æ˜¯åªåŒ…æ‹¬æœ¬åœ°æµè§ˆå™¨ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥ä½œä¸ºå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿä¸ä»…ä»…åªæœ‰æµè§ˆå™¨ï¼Œè¿˜å¯ä»¥æœ‰ Appã€å°ç¨‹åºï¼Œæµè§ˆå™¨åªèƒ½ä½œä¸ºå®¢æˆ·ç«¯\n- **HTTP ä¸æ˜¯ä¸€ä¸ªå­¤ç«‹çš„åè®®**\n\t- HTTP é€šå¸¸è·‘åœ¨ TCP/IP åè®®æ ˆä¹‹ä¸Šï¼Œä¾é  IP åè®®å®ç°å¯»å€å’Œè·¯ç”±ã€TCP åè®®å®ç°å¯é æ•°æ®ä¼ è¾“ã€DNS åè®®å®ç°åŸŸåæŸ¥æ‰¾ã€SSL/TLS åè®®å®ç°å®‰å…¨é€šä¿¡\n\t- è¿˜æœ‰ä¸€äº›åè®®ä¾èµ–äº HTTPï¼Œä¾‹å¦‚ WebSocketã€HTTPDNS ç­‰\n- æ€»ç»“ï¼š**HTTP æ˜¯æ„å»ºäº’è”ç½‘çš„é‡è¦åŸºç¡€æŠ€æœ¯ï¼Œå®ƒæ²¡æœ‰å®ä½“ï¼Œä¾èµ–è®¸å¤šå…¶ä»–çš„æŠ€æœ¯æ¥å®ç°ï¼Œä½†åŒæ—¶è®¸å¤šæŠ€æœ¯ä¹Ÿéƒ½ä¾èµ–äºå®ƒã€‚**\n\n\n## Domain\n### Domain å½¢å¼\n- åŸŸåæ˜¯ä¸€ä¸ªæœ‰å±‚æ¬¡çš„ç»“æ„ï¼Œæ˜¯ä¸€ä¸²ç”¨â€œ.â€åˆ†éš”çš„å¤šä¸ªå•è¯ï¼Œæœ€å³è¾¹çš„è¢«ç§°ä¸ºâ€œé¡¶çº§åŸŸåâ€ï¼Œç„¶åæ˜¯â€œäºŒçº§åŸŸåâ€ï¼Œå±‚çº§å…³ç³»å‘å·¦ä¾æ¬¡é™ä½ã€‚\n- æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸ªåå­—ç©ºé—´ç³»ç»Ÿ\n\n### DNS Domain Name System\n- å°±åƒ IP åœ°å€å¿…é¡»è½¬æ¢æˆ MAC åœ°å€æ‰èƒ½è®¿é—®ä¸»æœºä¸€æ ·ï¼ŒåŸŸåä¹Ÿå¿…é¡»è¦è½¬æ¢æˆ IP åœ°å€ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯â€œåŸŸåè§£æâ€ã€‚\n- DNS ä½¿ç”¨ TCP å’Œ UDP ç«¯å£53\n- DNS çš„æ ¸å¿ƒç³»ç»Ÿæ˜¯ä¸€ä¸ªä¸‰å±‚çš„æ ‘çŠ¶ã€åˆ†å¸ƒå¼æœåŠ¡ï¼ŒåŸºæœ¬å¯¹åº”åŸŸåçš„ç»“æ„ï¼š\n\t- æ ¹åŸŸåæœåŠ¡å™¨ï¼ˆRoot DNS Serverï¼‰ï¼šç®¡ç†é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œè¿”å›â€œcomâ€â€œnetâ€â€œcnâ€ç­‰é¡¶çº§åŸŸåæœåŠ¡å™¨çš„ IP åœ°å€\n\t\t- å…¨ä¸–ç•Œå…±æœ‰ 13 ç»„æ ¹åŸŸåæœåŠ¡å™¨ï¼Œåˆæœ‰æ•°ç™¾å°çš„é•œåƒï¼Œä¿è¯ä¸€å®šèƒ½å¤Ÿè¢«è®¿é—®åˆ°\n\t- çº§åŸŸåæœåŠ¡å™¨ï¼ˆTop-level DNS Serverï¼‰ï¼šç®¡ç†å„è‡ªåŸŸåä¸‹çš„æƒå¨åŸŸåæœåŠ¡å™¨ï¼Œæ¯”å¦‚ com é¡¶çº§åŸŸåæœåŠ¡å™¨å¯ä»¥è¿”å› apple.com åŸŸåæœåŠ¡å™¨çš„ IP åœ°å€\n\t- æƒå¨åŸŸåæœåŠ¡å™¨ï¼ˆAuthoritative DNS Serverï¼‰ï¼šç®¡ç†è‡ªå·±åŸŸåä¸‹ä¸»æœºçš„ IP åœ°å€ï¼Œæ¯”å¦‚ apple.com æƒå¨åŸŸåæœåŠ¡å™¨å¯ä»¥è¿”å› www.apple.com çš„ IP åœ°å€\n\t- ![DNS ä¸‰å±‚çš„æ ‘çŠ¶](http://p0.meituan.net/myvideodistribute/5ac55ff4d8109df28c9afb3fbfc27208625512.png)\n- æ‰€ä»¥æˆ‘ä»¬è®¿é—® https://ele-peng.github.io/ å°±éœ€è¦è¿›è¡Œä¸‹é¢çš„ä¸‰æ¬¡æŸ¥è¯¢\n\t- è®¿é—®æ ¹åŸŸåæœåŠ¡å™¨ï¼Œå®ƒä¼šå‘Šè¯‰ä½  \"io\" é¡¶çº§åŸŸåæœåŠ¡å™¨çš„åœ°å€\n\t- è®¿é—® \"io\" é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œå®ƒå†å‘Šè¯‰ä½  \"github.io\" åŸŸåæœåŠ¡å™¨çš„åœ°å€\n\t- æœ€åè®¿é—® \"github.io\" åŸŸåæœåŠ¡å™¨ï¼Œå°±å¾—åˆ°äº† \"ele-peng.github.io\" çš„åœ°å€\n- DNS æ˜¯ä¸€ä¸ªæ ‘çŠ¶çš„åˆ†å¸ƒå¼æŸ¥è¯¢ç³»ç»Ÿï¼Œä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå¤–å›´æœ‰å¤šçº§çš„ç¼“å­˜ï¼ˆéæƒå¨åŸŸåæœåŠ¡å™¨ã€æ“ä½œç³»ç»Ÿç¼“å­˜å’Œ hosts æ–‡ä»¶ç­‰æ‰‹æ®µï¼‰ç”¨æ¥å‡è½»åŸŸåè§£æçš„å‹åŠ›ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ›´å¿«åœ°è·å–ç»“æœï¼ŒåŸºæœ¬æ€è·¯éƒ½æ˜¯**â€œç¼“å­˜â€**\n\t- è®¸å¤šå¤§å…¬å¸ã€ç½‘ç»œè¿è¡Œå•†éƒ½ä¼šå»ºç«‹è‡ªå·±çš„ DNS æœåŠ¡å™¨ï¼Œä½œä¸ºç”¨æˆ· DNS æŸ¥è¯¢çš„ä»£ç†ï¼Œä»£æ›¿ç”¨æˆ·è®¿é—®æ ¸å¿ƒ DNS ç³»ç»Ÿã€‚è¿™äº›â€œé‡ç”Ÿâ€æœåŠ¡å™¨è¢«ç§°ä¸ºâ€œéæƒå¨åŸŸåæœåŠ¡å™¨â€ï¼Œå¯ä»¥ç¼“å­˜ä¹‹å‰çš„æŸ¥è¯¢ç»“æœï¼Œå¦‚æœå·²ç»æœ‰äº†è®°å½•ï¼Œå°±æ— éœ€å†å‘æ ¹æœåŠ¡å™¨å‘èµ·æŸ¥è¯¢ï¼Œç›´æ¥è¿”å›å¯¹åº”çš„ IP åœ°å€\n\t\t- è¿™äº› DNS æœåŠ¡å™¨çš„æ•°é‡è¦æ¯”æ ¸å¿ƒç³»ç»Ÿçš„æœåŠ¡å™¨å¤šå¾ˆå¤šï¼Œè€Œä¸”å¤§å¤šéƒ¨ç½²åœ¨ç¦»ç”¨æˆ·å¾ˆè¿‘çš„åœ°æ–¹ã€‚æ¯”è¾ƒçŸ¥åçš„ DNS æœ‰ Google çš„â€œ8.8.8.8â€ï¼ŒMicrosoft çš„â€œ4.2.2.1â€ï¼Œè¿˜æœ‰ CloudFlare çš„â€œ1.1.1.1â€ç­‰ç­‰ã€‚\n\t- å…¶æ¬¡ï¼Œæ“ä½œç³»ç»Ÿé‡Œä¹Ÿä¼šå¯¹ DNS è§£æç»“æœåšç¼“å­˜ï¼Œå¦‚æœä½ ä¹‹å‰è®¿é—®è¿‡â€œele-peng.github.ioâ€ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡åœ¨æµè§ˆå™¨é‡Œå†è¾“å…¥è¿™ä¸ªç½‘å€çš„æ—¶å€™å°±ä¸ä¼šå†è·‘åˆ° DNS é‚£é‡Œå»é—®äº†ï¼Œç›´æ¥åœ¨æ“ä½œç³»ç»Ÿé‡Œå°±å¯ä»¥æ‹¿åˆ° IP åœ°å€\n\t- å¦å¤–ï¼Œæ“ä½œç³»ç»Ÿé‡Œè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„â€œä¸»æœºæ˜ å°„â€æ–‡ä»¶\n- å‡å¦‚è®¿é—® www.ä¸å­˜åœ¨.com \n\t- www.ä¸å­˜åœ¨.com -> Hosts æ–‡ä»¶ -> æ“ä½œç³»ç»Ÿæœ¬åœ°ç¼“å­˜ -> éæƒå¨åŸŸåæœåŠ¡å™¨æŸ¥è¯¢å…¶ç¼“å­˜ -> æŸ¥è¯¢æ ¹åŸŸåã€é¡¶çº§åŸŸåã€ä»¥åŠåŸŸåæœåŠ¡å™¨ï¼Œå½“åé¢çš„æŸ¥è¯¢å¾—åˆ°ç»“æœæ—¶ï¼Œå°†ä¼šå†™å…¥æœ¬åœ°ç¼“å­˜\n- ç°åœ¨çš„ DNS æ¶æ„\n\t- ![ç°åœ¨çš„ DNS æ¶æ„](http://p0.meituan.net/myvideodistribute/3ba7d376ea3f43fcb761deeb78932622389661.png)\n- **ä½¿ç”¨ DNS å¯ä»¥å®ç°åŸºäºåŸŸåçš„è´Ÿè½½å‡è¡¡ï¼Œæ—¢å¯ä»¥åœ¨å†…ç½‘ï¼Œä¹Ÿå¯ä»¥åœ¨å¤–ç½‘**\n\n\n\n\n## å†™åœ¨åé¢\n- å­¦è€Œä¸æ€åˆ™ç½” äº’å‹‰\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢ee","slug":"ä»URLè¾“å…¥åˆ°","published":1,"updated":"2020-10-27T15:21:11.265Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u89002nfw9k2fy725x8","content":"<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å˜¿å˜¿å˜¿ ğŸ˜±</li>\n<li>åˆ«æƒ³æ­ªï¼Œæˆ‘ä»¬è¿™ä¸ªç³»åˆ—è¦åšçš„æ˜¯ä»ç»å…¸é¢è¯•é¢˜å…¥æ‰‹<ul>\n<li>ä» URL è¾“å…¥ <a href=\"https://ele-peng.github.io/\" target=\"_blank\" rel=\"noopener\">https://ele-peng.github.io/</a> åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</li>\n</ul>\n</li>\n<li>ç®€å•äº†è§£ä¸€ä¸‹è®¡ç®—æœºç½‘ç»œç›¸å…³çŸ¥è¯†ã€‚æ˜¯çš„ï¼ŒElle å¾ˆæƒ¨ğŸ˜­ è®¡ç®—æœºç½‘ç»œå­¦å¾—ç¨€çƒ‚</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"ç®€å•è¿‡ç¨‹\"><a href=\"#ç®€å•è¿‡ç¨‹\" class=\"headerlink\" title=\"ç®€å•è¿‡ç¨‹\"></a>ç®€å•è¿‡ç¨‹</h2><ul>\n<li>ä½ å…ˆåœ¨æµè§ˆå™¨é‡Œé¢è¾“å…¥ <a href=\"https://ele-peng.github.io/\" target=\"_blank\" rel=\"noopener\">https://ele-peng.github.io/</a> ï¼Œè¿™æ˜¯ä¸€ä¸ª URLã€‚æµè§ˆå™¨åªçŸ¥é“åå­—æ˜¯â€œele-peng.github.ioâ€ï¼Œä½†æ˜¯ä¸çŸ¥é“å…·ä½“çš„åœ°ç‚¹ï¼Œæ‰€ä»¥ä¸çŸ¥é“åº”è¯¥å¦‚ä½•è®¿é—®ã€‚äºæ˜¯ï¼Œå®ƒæ‰“å¼€åœ°å€ç°¿å»æŸ¥æ‰¾ã€‚å¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„åœ°å€ç°¿åè®® DNS å»æŸ¥æ‰¾ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ›´åŠ ç²¾å‡†çš„åœ°å€ç°¿æŸ¥æ‰¾åè®® HTTPDNS ã€‚</li>\n<li>æ— è®ºç”¨å“ªä¸€ç§æ–¹æ³•æŸ¥æ‰¾ï¼Œæœ€ç»ˆéƒ½ä¼šå¾—åˆ°è¿™ä¸ªåœ°å€ï¼š52.74.223.119ã€‚è¿™ä¸ªæ˜¯ IP åœ°å€ï¼Œæ˜¯äº’è”ç½‘ä¸–ç•Œçš„â€œé—¨ç‰Œå·â€ã€‚</li>\n<li>çŸ¥é“äº†ç›®æ ‡åœ°å€ï¼Œæµè§ˆå™¨å°±å¼€å§‹æ‰“åŒ…å®ƒçš„è¯·æ±‚ã€‚è¿™é‡Œä¼šä½¿ç”¨HTTPSåè®®ã€‚æ— è®ºæ˜¯ä»€ä¹ˆåè®®ï¼Œé‡Œé¢éƒ½ä¼šå†™æ˜â€œä½ è¦è¯·æ±‚ä»€ä¹ˆâ€ã€‚ï»¿</li>\n<li>DNSã€HTTPã€HTTPS æ‰€åœ¨çš„å±‚æˆ‘ä»¬ç§°ä¸º<strong>åº”ç”¨å±‚</strong>ã€‚ç»è¿‡åº”ç”¨å±‚å°è£…åï¼Œæµè§ˆå™¨ä¼šå°†åº”ç”¨å±‚çš„åŒ…äº¤ç»™ä¸‹ä¸€å±‚å»å®Œæˆï¼Œ<strong>é€šè¿‡ socket ç¼–ç¨‹æ¥å®ç°</strong>ã€‚ä¸‹ä¸€å±‚æ˜¯<strong>ä¼ è¾“å±‚</strong>ã€‚ä¼ è¾“å±‚æœ‰ä¸¤ç§åè®®ï¼Œä¸€ç§æ˜¯æ— è¿æ¥çš„åè®®UDPï¼Œä¸€ç§æ˜¯é¢å‘è¿æ¥çš„åè®®TCPã€‚è¿™é‡Œä½¿ç”¨ TCP åè®®ã€‚æ‰€è°“çš„é¢å‘è¿æ¥å°±æ˜¯ï¼ŒTCP ä¼šä¿è¯è¿™ä¸ªåŒ…èƒ½å¤Ÿåˆ°è¾¾ç›®çš„åœ°ã€‚å¦‚æœä¸èƒ½åˆ°è¾¾ï¼Œå°±ä¼šé‡æ–°å‘é€ï¼Œç›´è‡³åˆ°è¾¾ã€‚</li>\n<li>TCP åè®®é‡Œé¢ä¼šæœ‰ä¸¤ä¸ªç«¯å£ï¼Œä¸€ä¸ªæ˜¯æµè§ˆå™¨ç›‘å¬çš„ç«¯å£ï¼Œä¸€ä¸ªæ˜¯ github çš„æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£ã€‚æ“ä½œç³»ç»Ÿå¾€å¾€é€šè¿‡ç«¯å£æ¥åˆ¤æ–­ï¼Œå®ƒå¾—åˆ°çš„åŒ…åº”è¯¥ç»™å“ªä¸ªè¿›ç¨‹ã€‚</li>\n<li>ä¼ è¾“å±‚å°è£…å®Œæ¯•åï¼Œæµè§ˆå™¨ä¼šå°†åŒ…äº¤ç»™æ“ä½œç³»ç»Ÿçš„<strong>ç½‘ç»œå±‚</strong>ã€‚ç½‘ç»œå±‚çš„åè®®æ˜¯ IP åè®®ã€‚åœ¨ IP åè®®é‡Œé¢ä¼šæœ‰æº IP åœ°å€ï¼Œå³æµè§ˆå™¨æ‰€åœ¨æœºå™¨çš„ IP åœ°å€å’Œç›®æ ‡ IP åœ°å€ï¼Œä¹Ÿå³ github æ‰€åœ¨æœåŠ¡å™¨çš„ IP åœ°å€ã€‚</li>\n<li>æ“ä½œç³»ç»Ÿæ—¢ç„¶çŸ¥é“äº†ç›®æ ‡ IP åœ°å€ï¼Œå°±å¼€å§‹æƒ³å¦‚ä½•æ ¹æ®è¿™ä¸ªé—¨ç‰Œå·æ‰¾åˆ°ç›®æ ‡æœºå™¨ã€‚æ“ä½œç³»ç»Ÿå¾€å¾€ä¼šåˆ¤æ–­ï¼Œè¿™ä¸ªç›®æ ‡ IP åœ°å€æ˜¯æœ¬åœ°äººï¼Œè¿˜æ˜¯å¤–åœ°äººã€‚å¦‚æœæ˜¯æœ¬åœ°äººï¼Œä»é—¨ç‰Œå·å°±èƒ½çœ‹å‡ºæ¥ï¼Œä½†æ˜¯æ˜¾ç„¶ github ç½‘ç«™ä¸åœ¨æœ¬åœ°ï¼Œè€Œåœ¨é¥è¿œçš„åœ°æ–¹ã€‚</li>\n<li>æ“ä½œç³»ç»ŸçŸ¥é“è¦ç¦»å¼€æœ¬åœ°å»è¿œæ–¹ã€‚è™½ç„¶ä¸çŸ¥é“è¿œæ–¹åœ¨ä½•å¤„ï¼Œä½†æ˜¯å¯ä»¥è¿™æ ·ç±»æ¯”ä¸€ä¸‹ï¼šå¦‚æœå»å›½å¤–è¦å»æµ·å…³ï¼Œå»å¤–åœ°å°±è¦å»ç½‘å…³ã€‚è€Œæ“ä½œç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šè¢« DHCP åè®®é…ç½® IP åœ°å€ï¼Œä»¥åŠé»˜è®¤çš„ç½‘å…³çš„ IP åœ°å€ 192.168.1.1ã€‚</li>\n<li>æ“ä½œç³»ç»Ÿå¦‚ä½•å°† IP åœ°å€å‘ç»™ç½‘å…³å‘¢ï¼Ÿåœ¨æœ¬åœ°é€šä¿¡åŸºæœ¬é å¼ï¼Œäºæ˜¯æ“ä½œç³»ç»Ÿå¤§å¼ä¸€å£°ï¼Œè°æ˜¯ 192.168.1.1 å•Šï¼Ÿç½‘å…³ä¼šå›ç­”å®ƒï¼Œæˆ‘å°±æ˜¯ï¼Œæˆ‘çš„æœ¬åœ°åœ°å€åœ¨æ‘ä¸œå¤´ã€‚è¿™ä¸ªæœ¬åœ°åœ°å€å°±æ˜¯ MAC åœ°å€ï¼Œè€Œå¤§å¼çš„é‚£ä¸€å£°æ˜¯ ARP åè®®ã€‚</li>\n<li>äºæ˜¯æ“ä½œç³»ç»Ÿå°† IP åŒ…äº¤ç»™äº†ä¸‹ä¸€å±‚ï¼Œä¹Ÿå°±æ˜¯ <strong>MAC å±‚</strong>ã€‚ç½‘å¡å†å°†åŒ…å‘å‡ºå»ã€‚ç”±äºè¿™ä¸ªåŒ…é‡Œé¢æ˜¯æœ‰ MAC åœ°å€çš„ï¼Œå› è€Œå®ƒèƒ½å¤Ÿåˆ°è¾¾ç½‘å…³ã€‚</li>\n<li>ç½‘å…³æ”¶åˆ°åŒ…ä¹‹åï¼Œä¼šæ ¹æ®è‡ªå·±çš„çŸ¥è¯†ï¼Œåˆ¤æ–­ä¸‹ä¸€æ­¥åº”è¯¥æ€ä¹ˆèµ°ã€‚ç½‘å…³å¾€å¾€æ˜¯ä¸€ä¸ªè·¯ç”±å™¨ï¼Œåˆ°æŸä¸ª IP åœ°å€åº”è¯¥æ€ä¹ˆèµ°ï¼Œè¿™ä¸ªå«ä½œè·¯ç”±è¡¨ã€‚</li>\n<li>è·¯ç”±å™¨æœ‰ç‚¹åƒç„å¥˜è¥¿è¡Œè·¯è¿‡çš„ä¸€ä¸ªä¸ªå›½å®¶çš„ä¸€ä¸ªä¸ªåŸå…³ã€‚æ¯ä¸ªåŸå…³éƒ½è¿ç€ä¸¤ä¸ªå›½å®¶ï¼Œæ¯ä¸ªå›½å®¶ç›¸å½“äºä¸€ä¸ªå±€åŸŸç½‘ï¼Œåœ¨æ¯ä¸ªå›½å®¶å†…éƒ¨ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æœ¬åœ°çš„åœ°å€ MAC è¿›è¡Œé€šä¿¡ã€‚</li>\n<li>ä¸€æ—¦è·¨è¶ŠåŸå…³ï¼Œå°±éœ€è¦æ‹¿å‡º IP å¤´æ¥é—®ï¼Œç›®æ ‡ IP åœ°å€æ€ä¹ˆèµ°ï¼Ÿ</li>\n<li>åŸå…³å¾€å¾€æ˜¯çŸ¥é“è¿™äº›â€œçŸ¥è¯†â€çš„ï¼Œå› ä¸ºåŸå…³å’Œä¸´è¿‘çš„åŸå…³ä¹Ÿä¼šç»å¸¸æ²Ÿé€šã€‚åˆ°å“ªé‡Œåº”è¯¥æ€ä¹ˆèµ°ï¼Œè¿™ç§æ²Ÿé€šçš„åè®®ç§°ä¸ºè·¯ç”±åè®®ï¼Œå¸¸ç”¨çš„æœ‰ OSP Få’Œ BGP ã€‚ï»¿</li>\n<li>åŸå…³ä¸åŸå…³ä¹‹é—´æ˜¯ä¸€ä¸ªå›½å®¶ï¼Œå½“ç½‘ç»œåŒ…çŸ¥é“äº†ä¸‹ä¸€æ­¥å»å“ªä¸ªåŸå…³ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨å›½å®¶å†…éƒ¨çš„ MAC åœ°å€ï¼Œé€šè¿‡ä¸‹ä¸€ä¸ªåŸå…³çš„ MAC åœ°å€ï¼Œæ‰¾åˆ°ä¸‹ä¸€ä¸ªåŸå…³ï¼Œç„¶åå†é—®ä¸‹ä¸€æ­¥çš„è·¯æ€ä¹ˆèµ°ï¼Œä¸€ç›´åˆ°èµ°å‡ºæœ€åä¸€ä¸ªåŸå…³ã€‚</li>\n<li>æœ€åä¸€ä¸ªåŸå…³çŸ¥é“è¿™ä¸ªç½‘ç»œåŒ…è¦å»çš„åœ°æ–¹ã€‚äºæ˜¯ï¼Œå¯¹ç€è¿™ä¸ªå›½å®¶å¼ä¸€å£°ï¼Œè°æ˜¯ç›®æ ‡ IP å•Šï¼Ÿç›®æ ‡æœåŠ¡å™¨å°±ä¼šå›å¤ä¸€ä¸ª MAC åœ°å€ã€‚ç½‘ç»œåŒ…è¿‡å…³åï¼Œé€šè¿‡è¿™ä¸ª MAC åœ°å€å°±èƒ½æ‰¾åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚</li>\n<li>ç›®æ ‡æœåŠ¡å™¨å‘ç° MAC åœ°å€å¯¹ä¸Šäº†ï¼Œå–ä¸‹ MAC å¤´æ¥ï¼Œå‘é€ç»™æ“ä½œç³»ç»Ÿçš„ç½‘ç»œå±‚ã€‚å‘ç° IP ä¹Ÿå¯¹ä¸Šäº†ï¼Œå°±å–ä¸‹ IP å¤´ã€‚IP å¤´é‡Œä¼šå†™ä¸Šä¸€å±‚å°è£…çš„æ˜¯ TCP åè®®ï¼Œç„¶åå°†å…¶äº¤ç»™ä¼ è¾“å±‚ï¼Œå³TCP å±‚ã€‚</li>\n<li>åœ¨è¿™ä¸€å±‚é‡Œï¼Œå¯¹äºæ”¶åˆ°çš„æ¯ä¸ªåŒ…ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªå›å¤çš„åŒ…è¯´æ˜æ”¶åˆ°äº†ã€‚è¿™ä¸ªå›å¤çš„åŒ…ç»éè¿™æ¬¡æŸ¥è¯¢è¯·æ±‚çš„ç»“æœï¼Œè€Œä»…ä»…æ˜¯ TCP å±‚çš„ä¸€ä¸ªè¯´æ˜ï¼Œå³æ”¶åˆ°ä¹‹åçš„å›å¤ã€‚å½“ç„¶è¿™ä¸ªå›å¤ï¼Œä¼šæ²¿ç€åˆšæ‰æ¥çš„æ–¹å‘èµ°å›å»ï¼ŒæŠ¥ä¸ªå¹³å®‰ã€‚</li>\n<li>å¦‚æœè¿‡ä¸€æ®µæ—¶é—´è¿˜æ˜¯æ²¡åˆ°ï¼Œå‘é€ç«¯çš„ TCP å±‚ä¼šé‡æ–°å‘é€è¿™ä¸ªåŒ…ï¼Œè¿˜æ˜¯ä¸Šé¢çš„è¿‡ç¨‹ï¼Œç›´åˆ°æœ‰ä¸€å¤©æ”¶åˆ°å¹³å®‰åˆ°è¾¾çš„å›å¤ã€‚è¿™ä¸ªé‡è¯•ç»éä½ çš„æµè§ˆå™¨é‡æ–°è¯·æ±‚ github ä¸ªäººä¸»é¡µã€‚å¯¹äºæµè§ˆå™¨æ¥è®²ï¼Œå°±å‘é€äº†ä¸€æ¬¡ github ä¸ªäººä¸»é¡µè¯·æ±‚ï¼ŒTCP å±‚ä¸æ–­è‡ªå·±é—·å¤´é‡è¯•ã€‚é™¤é TCP è¿™ä¸€å±‚å‡ºäº†é—®é¢˜ï¼Œä¾‹å¦‚è¿æ¥æ–­äº†ï¼Œæ‰è½®åˆ°æµè§ˆå™¨çš„åº”ç”¨å±‚é‡æ–°å‘é€ github ä¸ªäººä¸»é¡µè¯·æ±‚ã€‚</li>\n<li>å½“ç½‘ç»œåŒ…å¹³å®‰åˆ°è¾¾ TCP å±‚ä¹‹åï¼ŒTCP å¤´ä¸­æœ‰ç›®æ ‡ç«¯å£å·ï¼Œé€šè¿‡è¿™ä¸ªç«¯å£å·ï¼Œå¯ä»¥æ‰¾åˆ° github ç½‘ç«™çš„è¿›ç¨‹æ­£åœ¨ç›‘å¬è¿™ä¸ªç«¯å£å·ï¼Œå‡è®¾ä¸€ä¸ª Tomcatï¼Œå°†è¿™ä¸ªåŒ…å‘ç»™ github ç½‘ç«™ã€‚ï»¿</li>\n<li>github ç½‘ç«™çš„è¿›ç¨‹å¾—åˆ° HTTP è¯·æ±‚çš„å†…å®¹ï¼ŒçŸ¥é“äº†è¦å“åº”å•¥ã€‚å¾€å¾€ä¸€ä¸ªç”µå•†ç½‘ç«™æœ€åˆæ¥å¾…è¯·æ±‚çš„è¿™ä¸ª Tomcat åªæ˜¯ä¸ªæ¥å¾…å‘˜ï¼Œè´Ÿè´£ç»Ÿç­¹å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„äº‹æƒ…éƒ½è‡ªå·±åšã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªæ¥å¾…å‘˜è¦å‘Šè¯‰ä¸“é—¨ç®¡ç† GitHub ä¸ªäººä¸»é¡µçš„è¿›ç¨‹ï¼Œè¦å“åº”å•¥ç­‰ç­‰ã€‚</li>\n<li>å¦‚ä½•å‘Šè¯‰ç›¸å…³çš„è¿›ç¨‹å‘¢ï¼Ÿå¾€å¾€é€šè¿‡ RPC è°ƒç”¨ï¼Œå³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„æ–¹å¼æ¥å®ç°ã€‚è¿œç¨‹è¿‡ç¨‹è°ƒç”¨å°±æ˜¯å½“å‘Šè¯‰ç®¡ç† GitHub ä¸ªäººä¸»é¡µçš„è¿›ç¨‹çš„æ—¶å€™ï¼Œæ¥å¾…å‘˜ä¸ç”¨å…³å¿ƒä¸­é—´çš„ç½‘ç»œäº’è¿é—®é¢˜ï¼Œä¼šç”± RPC æ¡†æ¶ç»Ÿä¸€å¤„ç†ã€‚RPC æ¡†æ¶æœ‰å¾ˆå¤šç§ï¼Œæœ‰åŸºäº HTTP åè®®æ”¾åœ¨ HTTP çš„æŠ¥æ–‡é‡Œé¢çš„ï¼Œæœ‰ç›´æ¥å°è£…åœ¨ TCP æŠ¥æ–‡é‡Œé¢çš„ã€‚</li>\n<li>å½“æ¥å¾…å‘˜å‘ç°ç›¸åº”çš„éƒ¨é—¨éƒ½å¤„ç†å®Œæ¯•ï¼Œå°±å›å¤ä¸€ä¸ª HTTPS çš„åŒ…ï¼Œå‘ŠçŸ¥æŸ¥è¯¢æˆåŠŸã€‚è¿™ä¸ª HTTPS çš„åŒ…ï¼Œä¼šåƒæ¥çš„æ—¶å€™ä¸€æ ·ï¼Œç»è¿‡åƒéš¾ä¸‡é™©åˆ°è¾¾ä½ çš„ä¸ªäººç”µè„‘ï¼Œæœ€ç»ˆè¿›å…¥æµè§ˆå™¨ï¼Œæ˜¾ç¤ºä¸ªäººä¸»é¡µã€‚</li>\n</ul>\n<h2 id=\"ç½‘ç»œåˆ†å±‚æ¨¡å‹\"><a href=\"#ç½‘ç»œåˆ†å±‚æ¨¡å‹\" class=\"headerlink\" title=\"ç½‘ç»œåˆ†å±‚æ¨¡å‹\"></a>ç½‘ç»œåˆ†å±‚æ¨¡å‹</h2><h3 id=\"TCP-IP-åè®®æ ˆ\"><a href=\"#TCP-IP-åè®®æ ˆ\" class=\"headerlink\" title=\"TCP/IP åè®®æ ˆ\"></a>TCP/IP åè®®æ ˆ</h3><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6fea0628affaf34d09b59d845ffeb60a75766.png\" alt=\"TCP/IP åè®®æ ˆ\"></li>\n<li><strong>link layer é“¾æ¥å±‚</strong>ï¼šè´Ÿè´£åœ¨ä»¥å¤ªç½‘ã€WiFi è¿™æ ·çš„åº•å±‚ç½‘ç»œä¸Šå‘é€åŸå§‹æ•°æ®åŒ…ï¼ˆframe å¸§ï¼‰ï¼Œå·¥ä½œåœ¨ç½‘å¡è¿™ä¸ªå±‚æ¬¡ï¼Œä½¿ç”¨ MAC åœ°å€æ¥æ ‡è®°ç½‘ç»œä¸Šçš„è®¾å¤‡ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿå« MAC å±‚ã€‚</li>\n<li><strong>internet layer ç½‘é™…å±‚</strong>ï¼šIP åè®®å°±å¤„åœ¨è¿™ä¸€å±‚ã€‚å› ä¸º IP åè®®å®šä¹‰äº†â€œIP åœ°å€â€çš„æ¦‚å¿µï¼Œæ‰€ä»¥å°±å¯ä»¥åœ¨â€œé“¾æ¥å±‚â€çš„åŸºç¡€ä¸Šï¼Œç”¨ IP åœ°å€å–ä»£ MAC åœ°å€ï¼ŒæŠŠè®¸è®¸å¤šå¤šçš„å±€åŸŸç½‘ã€å¹¿åŸŸç½‘è¿æ¥æˆä¸€ä¸ªè™šæ‹Ÿçš„å·¨å¤§ç½‘ç»œï¼Œåœ¨è¿™ä¸ªç½‘ç»œé‡Œæ‰¾è®¾å¤‡æ—¶åªè¦æŠŠ IP åœ°å€å†â€œç¿»è¯‘â€æˆ MAC åœ°å€å°±å¯ä»¥äº†ã€‚ä¼ è¾“å•ä½æ˜¯åŒ…ï¼ˆpacketï¼‰</li>\n<li><strong>transport layer ä¼ è¾“å±‚</strong>ï¼šTCP/UDP åè®®å·¥ä½œçš„å±‚æ¬¡<ul>\n<li>TCP æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„åè®®ï¼Œéœ€è¦å…ˆä¸å¯¹æ–¹å»ºç«‹è¿æ¥ç„¶åæ‰èƒ½å‘é€æ•°æ®ï¼Œè€Œä¸”ä¿è¯æ•°æ®ä¸ä¸¢å¤±ä¸é‡å¤ã€‚è€Œ UDP åˆ™æ¯”è¾ƒç®€å•ï¼Œå®ƒæ— çŠ¶æ€ï¼Œä¸ç”¨äº‹å…ˆå»ºç«‹è¿æ¥å°±å¯ä»¥ä»»æ„å‘é€æ•°æ®ï¼Œä½†ä¸ä¿è¯æ•°æ®ä¸€å®šä¼šå‘åˆ°å¯¹æ–¹ã€‚ä¸¤ä¸ªåè®®çš„å¦ä¸€ä¸ªé‡è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å½¢å¼ã€‚TCP çš„æ•°æ®æ˜¯è¿ç»­çš„â€œå­—èŠ‚æµâ€ï¼Œæœ‰å…ˆåé¡ºåºï¼Œè€Œ UDP åˆ™æ˜¯åˆ†æ•£çš„å°æ•°æ®åŒ…ï¼Œæ˜¯é¡ºåºå‘ï¼Œä¹±åºæ”¶ã€‚</li>\n<li>TCP å±‚çš„ä¼ è¾“å•ä½æ˜¯æ®µï¼ˆsegmentï¼‰</li>\n</ul>\n</li>\n<li><strong>application layer åº”ç”¨å±‚</strong>ï¼šå„ç§é¢å‘å…·ä½“åº”ç”¨çš„åè®®ï¼Œä¾‹å¦‚ DHCPã€HTTPã€HTTPSã€RTMPã€DNSã€P2Pã€GTPã€RPCã€Telnetã€SSHã€FTPã€SMTP ç­‰ç­‰ã€‚<ul>\n<li>HTTP çš„ä¼ è¾“å•ä½åˆ™æ˜¯æ¶ˆæ¯æˆ–æŠ¥æ–‡ï¼ˆmessageï¼‰</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"OSI-Open-System-Interconnection-Reference-Model-å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹\"><a href=\"#OSI-Open-System-Interconnection-Reference-Model-å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹\" class=\"headerlink\" title=\"OSI (Open System Interconnection Reference Model) å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹\"></a>OSI (Open System Interconnection Reference Model) å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹</h3><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/53145af5e2b1d0846761c3382cce24c5104243.png\" alt=\"OSIå‚è€ƒæ¨¡å‹\"></li>\n<li><strong>physical layer ç‰©ç†å±‚</strong>ï¼šç½‘ç»œçš„ç‰©ç†å½¢å¼ï¼Œä¾‹å¦‚ç”µç¼†ã€å…‰çº¤ã€ç½‘å¡ã€é›†çº¿å™¨ç­‰ç­‰</li>\n<li><strong>data link layer æ•°æ®é“¾è·¯å±‚</strong>ï¼šåŸºæœ¬ç›¸å½“äº TCP/IP çš„é“¾æ¥å±‚</li>\n<li><strong>network layer ç½‘ç»œå±‚</strong>ï¼šç›¸å½“äº TCP/IP é‡Œçš„ç½‘é™…å±‚</li>\n<li><strong>transport layer ä¼ è¾“å±‚</strong>ï¼šç›¸å½“äº TCP/IP é‡Œçš„ä¼ è¾“å±‚</li>\n<li><strong>session layer ä¼šè¯å±‚</strong>ï¼šç»´æŠ¤ç½‘ç»œä¸­çš„è¿æ¥çŠ¶æ€ï¼Œå³ä¿æŒä¼šè¯å’ŒåŒæ­¥</li>\n<li><strong>presentation layer è¡¨ç¤ºå±‚</strong>ï¼šæŠŠæ•°æ®è½¬æ¢ä¸ºåˆé€‚ã€å¯ç†è§£çš„è¯­æ³•å’Œè¯­ä¹‰</li>\n<li><strong>application layer åº”ç”¨å±‚</strong>ï¼šé¢å‘å…·ä½“çš„åº”ç”¨ä¼ è¾“æ•°æ®</li>\n</ul>\n<h3 id=\"ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»\"><a href=\"#ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»\" class=\"headerlink\" title=\"ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»\"></a>ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»</h3><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/0042adbffe9810c7913862252fa27662164155.png\" alt=\"ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»\"></li>\n<li>ç¬¬ä¸€å±‚ï¼šç‰©ç†å±‚ï¼ŒTCP/IP é‡Œæ— å¯¹åº”</li>\n<li>ç¬¬äºŒå±‚ï¼šæ•°æ®é“¾è·¯å±‚ï¼Œå¯¹åº” TCP/IP çš„é“¾æ¥å±‚</li>\n<li>ç¬¬ä¸‰å±‚ï¼šç½‘ç»œå±‚ï¼Œå¯¹åº” TCP/IP çš„ç½‘é™…å±‚</li>\n<li>ç¬¬å››å±‚ï¼šä¼ è¾“å±‚ï¼Œå¯¹åº” TCP/IP çš„ä¼ è¾“å±‚</li>\n<li>ç¬¬äº”ã€å…­ã€ä¸ƒå±‚ï¼šç»Ÿä¸€å¯¹åº”åˆ° TCP/IP çš„åº”ç”¨å±‚<ul>\n<li>TCP/IP å®é™…åº”ç”¨æ—¶çš„ä¼šè¯ç®¡ç†ã€ç¼–ç è½¬æ¢ã€å‹ç¼©ç­‰å’Œå…·ä½“åº”ç”¨ç»å¸¸è”ç³»çš„å¾ˆç´§å¯†ï¼Œå¾ˆéš¾åˆ†å¼€</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"HTTP-HyperText-Transfer-Protocol\"><a href=\"#HTTP-HyperText-Transfer-Protocol\" class=\"headerlink\" title=\"HTTP - HyperText Transfer Protocol\"></a>HTTP - HyperText Transfer Protocol</h2><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/0eac1c72dc8c7c0ac87363d73f51b19b30633.png\" alt=\"HTTPæ¦‚è§ˆå›¾\"></li>\n<li>Protocol<ul>\n<li>åè®®å¿…é¡»è¦æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªå‚ä¸è€…ï¼Œä¹Ÿå°±æ˜¯â€œåâ€</li>\n<li>åè®®æ˜¯å¯¹å‚ä¸è€…çš„ä¸€ç§è¡Œä¸ºçº¦å®šå’Œè§„èŒƒï¼Œä¹Ÿå°±æ˜¯â€œè®®â€ï¼ŒåŒ…æ‹¬è¯­æ³•ã€è¯­ä¹‰ã€åŒæ­¥è§„åˆ™å’Œé”™è¯¯å¤„ç†</li>\n<li>æ€»ç»“ï¼š<strong>HTTP æ˜¯ä¸€ä¸ªç”¨åœ¨è®¡ç®—æœºä¸–ç•Œé‡Œçš„åè®®ã€‚å®ƒä½¿ç”¨è®¡ç®—æœºèƒ½å¤Ÿç†è§£çš„è¯­è¨€ç¡®ç«‹äº†ä¸€ç§è®¡ç®—æœºä¹‹é—´äº¤æµé€šä¿¡çš„è§„èŒƒï¼Œä»¥åŠç›¸å…³çš„å„ç§æ§åˆ¶å’Œé”™è¯¯å¤„ç†æ–¹å¼ã€‚</strong></li>\n</ul>\n</li>\n<li>Transfer<ul>\n<li>HTTP åè®®æ˜¯ä¸€ä¸ªâ€œåŒå‘åè®®â€</li>\n<li>æ•°æ®è™½ç„¶æ˜¯åœ¨ A å’Œ B ä¹‹é—´ä¼ è¾“ï¼Œä½†å¹¶æ²¡æœ‰é™åˆ¶åªæœ‰ A å’Œ B è¿™ä¸¤ä¸ªè§’è‰²ï¼Œå…è®¸ä¸­é—´æœ‰â€œä¸­è½¬â€æˆ–è€…â€œæ¥åŠ›â€<ul>\n<li>ä¼ è¾“æ–¹å¼ä»â€œA&lt;===&gt;Bâ€ å¯ä»¥å˜æˆäº† â€œA&lt;=&gt;X&lt;=&gt;Y&lt;=&gt;Z&lt;=&gt;Bâ€</li>\n<li>A åˆ° B çš„ä¼ è¾“è¿‡ç¨‹ä¸­å¯ä»¥å­˜åœ¨ä»»æ„å¤šä¸ªâ€œä¸­é—´äººâ€ï¼Œè€Œè¿™äº›ä¸­é—´äººä¹Ÿéƒ½éµä» HTTP åè®®ï¼Œåªè¦ä¸æ‰“æ‰°åŸºæœ¬çš„æ•°æ®ä¼ è¾“ï¼Œå°±å¯ä»¥æ·»åŠ ä»»æ„çš„é¢å¤–åŠŸèƒ½ï¼Œä¾‹å¦‚å®‰å…¨è®¤è¯ã€æ•°æ®å‹ç¼©ã€ç¼–ç è½¬æ¢ç­‰ç­‰ï¼Œä¼˜åŒ–æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ã€‚</li>\n</ul>\n</li>\n<li>æ€»ç»“ï¼š<strong>HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨ç”¨æ¥åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ•°æ®çš„çº¦å®šå’Œè§„èŒƒã€‚</strong></li>\n</ul>\n</li>\n<li>HyperText<ul>\n<li>Text<ul>\n<li>è¡¨ç¤º HTTP ä¼ è¾“çš„ä¸æ˜¯ TCP/UDP è¿™äº›åº•å±‚åè®®é‡Œè¢«åˆ‡åˆ†çš„æ‚ä¹±æ— ç« çš„äºŒè¿›åˆ¶åŒ…ï¼ˆdatagramï¼‰ï¼Œè€Œæ˜¯å®Œæ•´çš„ã€æœ‰æ„ä¹‰çš„æ•°æ®ï¼Œå¯ä»¥è¢«æµè§ˆå™¨ã€æœåŠ¡å™¨è¿™æ ·çš„ä¸Šå±‚åº”ç”¨ç¨‹åºå¤„ç†ã€‚</li>\n</ul>\n</li>\n<li>è¶…æ–‡æœ¬ï¼šæ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘ç­‰çš„æ··åˆä½“ï¼Œæœ€å…³é”®çš„æ˜¯å«æœ‰â€œè¶…é“¾æ¥â€ï¼Œèƒ½å¤Ÿä»ä¸€ä¸ªâ€œè¶…æ–‡æœ¬â€è·³è·ƒåˆ°å¦ä¸€ä¸ªâ€œè¶…æ–‡æœ¬â€ï¼Œå½¢æˆå¤æ‚çš„éçº¿æ€§ã€ç½‘çŠ¶çš„ç»“æ„å…³ç³»ã€‚</li>\n</ul>\n</li>\n<li>æ€»ç»“ï¼š<strong>HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®çš„çº¦å®šå’Œè§„èŒƒ</strong></li>\n</ul>\n<h3 id=\"HTTPä¸æ˜¯ï¼Ÿ\"><a href=\"#HTTPä¸æ˜¯ï¼Ÿ\" class=\"headerlink\" title=\"HTTPä¸æ˜¯ï¼Ÿ\"></a>HTTPä¸æ˜¯ï¼Ÿ</h3><ul>\n<li><strong>ä¸å­˜åœ¨â€œå•ç‹¬çš„å®ä½“â€</strong>ï¼Œä½† HTTP åˆä¸åº”ç”¨ç¨‹åºã€æ“ä½œç³»ç»Ÿã€Web æœåŠ¡å™¨å¯†åˆ‡ç›¸å…³ï¼Œåœ¨å®ƒä»¬ä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹ä¸­å­˜åœ¨ï¼Œè€Œä¸”æ˜¯ä¸€ç§â€œåŠ¨æ€çš„å­˜åœ¨â€ï¼Œæ˜¯å‘ç”Ÿåœ¨ç½‘ç»œè¿æ¥ã€ä¼ è¾“è¶…æ–‡æœ¬æ•°æ®æ—¶çš„ä¸€ä¸ªâ€œåŠ¨æ€è¿‡ç¨‹â€ã€‚</li>\n<li><strong>HTTP ä¸æ˜¯äº’è”ç½‘</strong><ul>\n<li>äº’è”ç½‘ï¼ˆInternetï¼‰æ˜¯éå¸ƒäºå…¨çƒçš„è®¸å¤šç½‘ç»œäº’ç›¸è¿æ¥è€Œå½¢æˆçš„ä¸€ä¸ªå·¨å¤§çš„å›½é™…ç½‘ç»œï¼Œåœ¨å®ƒä¸Šé¢å­˜æ”¾ç€å„å¼å„æ ·çš„èµ„æºï¼Œä¹Ÿå¯¹åº”ç€å„å¼å„æ ·çš„åè®®ï¼Œä¾‹å¦‚è¶…æ–‡æœ¬èµ„æºä½¿ç”¨ HTTPï¼Œæ™®é€šæ–‡ä»¶ä½¿ç”¨ FTPï¼Œç”µå­é‚®ä»¶ä½¿ç”¨ SMTP å’Œ POP3 ç­‰ã€‚</li>\n</ul>\n</li>\n<li><strong>HTTP ä¸æ˜¯ç¼–ç¨‹è¯­è¨€</strong><ul>\n<li>ç¼–ç¨‹è¯­è¨€æ˜¯äººä¸è®¡ç®—æœºæ²Ÿé€šäº¤æµæ‰€ä½¿ç”¨çš„è¯­è¨€ï¼Œè€Œ HTTP æ˜¯è®¡ç®—æœºä¸è®¡ç®—æœºæ²Ÿé€šäº¤æµçš„è¯­è¨€</li>\n<li>æ— æ³•ä½¿ç”¨ HTTP æ¥ç¼–ç¨‹ï¼Œä½†å¯ä»¥åè¿‡æ¥ï¼Œç”¨ç¼–ç¨‹è¯­è¨€å»å®ç° HTTPï¼Œå‘Šè¯‰è®¡ç®—æœºå¦‚ä½•ç”¨ HTTP æ¥ä¸å¤–ç•Œé€šä¿¡</li>\n</ul>\n</li>\n<li><strong>HTTP ä¸æ˜¯ç”¨äºä»äº’è”ç½‘æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„åè®®</strong><ul>\n<li>è¿‡äºç‰‡é¢ï¼ŒHTTP å‘ç”Ÿåœ¨ä¸¤ç‚¹ä¹‹é—´ï¼Œå³æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¸æ˜¯åªåŒ…æ‹¬æœ¬åœ°æµè§ˆå™¨ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥ä½œä¸ºå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿä¸ä»…ä»…åªæœ‰æµè§ˆå™¨ï¼Œè¿˜å¯ä»¥æœ‰ Appã€å°ç¨‹åºï¼Œæµè§ˆå™¨åªèƒ½ä½œä¸ºå®¢æˆ·ç«¯</li>\n</ul>\n</li>\n<li><strong>HTTP ä¸æ˜¯ä¸€ä¸ªå­¤ç«‹çš„åè®®</strong><ul>\n<li>HTTP é€šå¸¸è·‘åœ¨ TCP/IP åè®®æ ˆä¹‹ä¸Šï¼Œä¾é  IP åè®®å®ç°å¯»å€å’Œè·¯ç”±ã€TCP åè®®å®ç°å¯é æ•°æ®ä¼ è¾“ã€DNS åè®®å®ç°åŸŸåæŸ¥æ‰¾ã€SSL/TLS åè®®å®ç°å®‰å…¨é€šä¿¡</li>\n<li>è¿˜æœ‰ä¸€äº›åè®®ä¾èµ–äº HTTPï¼Œä¾‹å¦‚ WebSocketã€HTTPDNS ç­‰</li>\n</ul>\n</li>\n<li>æ€»ç»“ï¼š<strong>HTTP æ˜¯æ„å»ºäº’è”ç½‘çš„é‡è¦åŸºç¡€æŠ€æœ¯ï¼Œå®ƒæ²¡æœ‰å®ä½“ï¼Œä¾èµ–è®¸å¤šå…¶ä»–çš„æŠ€æœ¯æ¥å®ç°ï¼Œä½†åŒæ—¶è®¸å¤šæŠ€æœ¯ä¹Ÿéƒ½ä¾èµ–äºå®ƒã€‚</strong></li>\n</ul>\n<h2 id=\"Domain\"><a href=\"#Domain\" class=\"headerlink\" title=\"Domain\"></a>Domain</h2><h3 id=\"Domain-å½¢å¼\"><a href=\"#Domain-å½¢å¼\" class=\"headerlink\" title=\"Domain å½¢å¼\"></a>Domain å½¢å¼</h3><ul>\n<li>åŸŸåæ˜¯ä¸€ä¸ªæœ‰å±‚æ¬¡çš„ç»“æ„ï¼Œæ˜¯ä¸€ä¸²ç”¨â€œ.â€åˆ†éš”çš„å¤šä¸ªå•è¯ï¼Œæœ€å³è¾¹çš„è¢«ç§°ä¸ºâ€œé¡¶çº§åŸŸåâ€ï¼Œç„¶åæ˜¯â€œäºŒçº§åŸŸåâ€ï¼Œå±‚çº§å…³ç³»å‘å·¦ä¾æ¬¡é™ä½ã€‚</li>\n<li>æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸ªåå­—ç©ºé—´ç³»ç»Ÿ</li>\n</ul>\n<h3 id=\"DNS-Domain-Name-System\"><a href=\"#DNS-Domain-Name-System\" class=\"headerlink\" title=\"DNS Domain Name System\"></a>DNS Domain Name System</h3><ul>\n<li>å°±åƒ IP åœ°å€å¿…é¡»è½¬æ¢æˆ MAC åœ°å€æ‰èƒ½è®¿é—®ä¸»æœºä¸€æ ·ï¼ŒåŸŸåä¹Ÿå¿…é¡»è¦è½¬æ¢æˆ IP åœ°å€ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯â€œåŸŸåè§£æâ€ã€‚</li>\n<li>DNS ä½¿ç”¨ TCP å’Œ UDP ç«¯å£53</li>\n<li>DNS çš„æ ¸å¿ƒç³»ç»Ÿæ˜¯ä¸€ä¸ªä¸‰å±‚çš„æ ‘çŠ¶ã€åˆ†å¸ƒå¼æœåŠ¡ï¼ŒåŸºæœ¬å¯¹åº”åŸŸåçš„ç»“æ„ï¼š<ul>\n<li>æ ¹åŸŸåæœåŠ¡å™¨ï¼ˆRoot DNS Serverï¼‰ï¼šç®¡ç†é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œè¿”å›â€œcomâ€â€œnetâ€â€œcnâ€ç­‰é¡¶çº§åŸŸåæœåŠ¡å™¨çš„ IP åœ°å€<ul>\n<li>å…¨ä¸–ç•Œå…±æœ‰ 13 ç»„æ ¹åŸŸåæœåŠ¡å™¨ï¼Œåˆæœ‰æ•°ç™¾å°çš„é•œåƒï¼Œä¿è¯ä¸€å®šèƒ½å¤Ÿè¢«è®¿é—®åˆ°</li>\n</ul>\n</li>\n<li>çº§åŸŸåæœåŠ¡å™¨ï¼ˆTop-level DNS Serverï¼‰ï¼šç®¡ç†å„è‡ªåŸŸåä¸‹çš„æƒå¨åŸŸåæœåŠ¡å™¨ï¼Œæ¯”å¦‚ com é¡¶çº§åŸŸåæœåŠ¡å™¨å¯ä»¥è¿”å› apple.com åŸŸåæœåŠ¡å™¨çš„ IP åœ°å€</li>\n<li>æƒå¨åŸŸåæœåŠ¡å™¨ï¼ˆAuthoritative DNS Serverï¼‰ï¼šç®¡ç†è‡ªå·±åŸŸåä¸‹ä¸»æœºçš„ IP åœ°å€ï¼Œæ¯”å¦‚ apple.com æƒå¨åŸŸåæœåŠ¡å™¨å¯ä»¥è¿”å› <a href=\"http://www.apple.com\" target=\"_blank\" rel=\"noopener\">www.apple.com</a> çš„ IP åœ°å€</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5ac55ff4d8109df28c9afb3fbfc27208625512.png\" alt=\"DNS ä¸‰å±‚çš„æ ‘çŠ¶\"></li>\n</ul>\n</li>\n<li>æ‰€ä»¥æˆ‘ä»¬è®¿é—® <a href=\"https://ele-peng.github.io/\" target=\"_blank\" rel=\"noopener\">https://ele-peng.github.io/</a> å°±éœ€è¦è¿›è¡Œä¸‹é¢çš„ä¸‰æ¬¡æŸ¥è¯¢<ul>\n<li>è®¿é—®æ ¹åŸŸåæœåŠ¡å™¨ï¼Œå®ƒä¼šå‘Šè¯‰ä½  â€œioâ€ é¡¶çº§åŸŸåæœåŠ¡å™¨çš„åœ°å€</li>\n<li>è®¿é—® â€œioâ€ é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œå®ƒå†å‘Šè¯‰ä½  â€œgithub.ioâ€ åŸŸåæœåŠ¡å™¨çš„åœ°å€</li>\n<li>æœ€åè®¿é—® â€œgithub.ioâ€ åŸŸåæœåŠ¡å™¨ï¼Œå°±å¾—åˆ°äº† â€œele-peng.github.ioâ€ çš„åœ°å€</li>\n</ul>\n</li>\n<li>DNS æ˜¯ä¸€ä¸ªæ ‘çŠ¶çš„åˆ†å¸ƒå¼æŸ¥è¯¢ç³»ç»Ÿï¼Œä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå¤–å›´æœ‰å¤šçº§çš„ç¼“å­˜ï¼ˆéæƒå¨åŸŸåæœåŠ¡å™¨ã€æ“ä½œç³»ç»Ÿç¼“å­˜å’Œ hosts æ–‡ä»¶ç­‰æ‰‹æ®µï¼‰ç”¨æ¥å‡è½»åŸŸåè§£æçš„å‹åŠ›ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ›´å¿«åœ°è·å–ç»“æœï¼ŒåŸºæœ¬æ€è·¯éƒ½æ˜¯<strong>â€œç¼“å­˜â€</strong><ul>\n<li>è®¸å¤šå¤§å…¬å¸ã€ç½‘ç»œè¿è¡Œå•†éƒ½ä¼šå»ºç«‹è‡ªå·±çš„ DNS æœåŠ¡å™¨ï¼Œä½œä¸ºç”¨æˆ· DNS æŸ¥è¯¢çš„ä»£ç†ï¼Œä»£æ›¿ç”¨æˆ·è®¿é—®æ ¸å¿ƒ DNS ç³»ç»Ÿã€‚è¿™äº›â€œé‡ç”Ÿâ€æœåŠ¡å™¨è¢«ç§°ä¸ºâ€œéæƒå¨åŸŸåæœåŠ¡å™¨â€ï¼Œå¯ä»¥ç¼“å­˜ä¹‹å‰çš„æŸ¥è¯¢ç»“æœï¼Œå¦‚æœå·²ç»æœ‰äº†è®°å½•ï¼Œå°±æ— éœ€å†å‘æ ¹æœåŠ¡å™¨å‘èµ·æŸ¥è¯¢ï¼Œç›´æ¥è¿”å›å¯¹åº”çš„ IP åœ°å€<ul>\n<li>è¿™äº› DNS æœåŠ¡å™¨çš„æ•°é‡è¦æ¯”æ ¸å¿ƒç³»ç»Ÿçš„æœåŠ¡å™¨å¤šå¾ˆå¤šï¼Œè€Œä¸”å¤§å¤šéƒ¨ç½²åœ¨ç¦»ç”¨æˆ·å¾ˆè¿‘çš„åœ°æ–¹ã€‚æ¯”è¾ƒçŸ¥åçš„ DNS æœ‰ Google çš„â€œ8.8.8.8â€ï¼ŒMicrosoft çš„â€œ4.2.2.1â€ï¼Œè¿˜æœ‰ CloudFlare çš„â€œ1.1.1.1â€ç­‰ç­‰ã€‚</li>\n</ul>\n</li>\n<li>å…¶æ¬¡ï¼Œæ“ä½œç³»ç»Ÿé‡Œä¹Ÿä¼šå¯¹ DNS è§£æç»“æœåšç¼“å­˜ï¼Œå¦‚æœä½ ä¹‹å‰è®¿é—®è¿‡â€œele-peng.github.ioâ€ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡åœ¨æµè§ˆå™¨é‡Œå†è¾“å…¥è¿™ä¸ªç½‘å€çš„æ—¶å€™å°±ä¸ä¼šå†è·‘åˆ° DNS é‚£é‡Œå»é—®äº†ï¼Œç›´æ¥åœ¨æ“ä½œç³»ç»Ÿé‡Œå°±å¯ä»¥æ‹¿åˆ° IP åœ°å€</li>\n<li>å¦å¤–ï¼Œæ“ä½œç³»ç»Ÿé‡Œè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„â€œä¸»æœºæ˜ å°„â€æ–‡ä»¶</li>\n</ul>\n</li>\n<li>å‡å¦‚è®¿é—® www.ä¸å­˜åœ¨.com <ul>\n<li>www.ä¸å­˜åœ¨.com -&gt; Hosts æ–‡ä»¶ -&gt; æ“ä½œç³»ç»Ÿæœ¬åœ°ç¼“å­˜ -&gt; éæƒå¨åŸŸåæœåŠ¡å™¨æŸ¥è¯¢å…¶ç¼“å­˜ -&gt; æŸ¥è¯¢æ ¹åŸŸåã€é¡¶çº§åŸŸåã€ä»¥åŠåŸŸåæœåŠ¡å™¨ï¼Œå½“åé¢çš„æŸ¥è¯¢å¾—åˆ°ç»“æœæ—¶ï¼Œå°†ä¼šå†™å…¥æœ¬åœ°ç¼“å­˜</li>\n</ul>\n</li>\n<li>ç°åœ¨çš„ DNS æ¶æ„<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/3ba7d376ea3f43fcb761deeb78932622389661.png\" alt=\"ç°åœ¨çš„ DNS æ¶æ„\"></li>\n</ul>\n</li>\n<li><strong>ä½¿ç”¨ DNS å¯ä»¥å®ç°åŸºäºåŸŸåçš„è´Ÿè½½å‡è¡¡ï¼Œæ—¢å¯ä»¥åœ¨å†…ç½‘ï¼Œä¹Ÿå¯ä»¥åœ¨å¤–ç½‘</strong></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>å­¦è€Œä¸æ€åˆ™ç½” äº’å‹‰</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢ee</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å˜¿å˜¿å˜¿ ğŸ˜±</li>\n<li>åˆ«æƒ³æ­ªï¼Œæˆ‘ä»¬è¿™ä¸ªç³»åˆ—è¦åšçš„æ˜¯ä»ç»å…¸é¢è¯•é¢˜å…¥æ‰‹<ul>\n<li>ä» URL è¾“å…¥ <a href=\"https://ele-peng.github.io/\" target=\"_blank\" rel=\"noopener\">https://ele-peng.github.io/</a> åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</li>\n</ul>\n</li>\n<li>ç®€å•äº†è§£ä¸€ä¸‹è®¡ç®—æœºç½‘ç»œç›¸å…³çŸ¥è¯†ã€‚æ˜¯çš„ï¼ŒElle å¾ˆæƒ¨ğŸ˜­ è®¡ç®—æœºç½‘ç»œå­¦å¾—ç¨€çƒ‚</li>\n</ul>","more":"<h2 id=\"ç®€å•è¿‡ç¨‹\"><a href=\"#ç®€å•è¿‡ç¨‹\" class=\"headerlink\" title=\"ç®€å•è¿‡ç¨‹\"></a>ç®€å•è¿‡ç¨‹</h2><ul>\n<li>ä½ å…ˆåœ¨æµè§ˆå™¨é‡Œé¢è¾“å…¥ <a href=\"https://ele-peng.github.io/\" target=\"_blank\" rel=\"noopener\">https://ele-peng.github.io/</a> ï¼Œè¿™æ˜¯ä¸€ä¸ª URLã€‚æµè§ˆå™¨åªçŸ¥é“åå­—æ˜¯â€œele-peng.github.ioâ€ï¼Œä½†æ˜¯ä¸çŸ¥é“å…·ä½“çš„åœ°ç‚¹ï¼Œæ‰€ä»¥ä¸çŸ¥é“åº”è¯¥å¦‚ä½•è®¿é—®ã€‚äºæ˜¯ï¼Œå®ƒæ‰“å¼€åœ°å€ç°¿å»æŸ¥æ‰¾ã€‚å¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„åœ°å€ç°¿åè®® DNS å»æŸ¥æ‰¾ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ›´åŠ ç²¾å‡†çš„åœ°å€ç°¿æŸ¥æ‰¾åè®® HTTPDNS ã€‚</li>\n<li>æ— è®ºç”¨å“ªä¸€ç§æ–¹æ³•æŸ¥æ‰¾ï¼Œæœ€ç»ˆéƒ½ä¼šå¾—åˆ°è¿™ä¸ªåœ°å€ï¼š52.74.223.119ã€‚è¿™ä¸ªæ˜¯ IP åœ°å€ï¼Œæ˜¯äº’è”ç½‘ä¸–ç•Œçš„â€œé—¨ç‰Œå·â€ã€‚</li>\n<li>çŸ¥é“äº†ç›®æ ‡åœ°å€ï¼Œæµè§ˆå™¨å°±å¼€å§‹æ‰“åŒ…å®ƒçš„è¯·æ±‚ã€‚è¿™é‡Œä¼šä½¿ç”¨HTTPSåè®®ã€‚æ— è®ºæ˜¯ä»€ä¹ˆåè®®ï¼Œé‡Œé¢éƒ½ä¼šå†™æ˜â€œä½ è¦è¯·æ±‚ä»€ä¹ˆâ€ã€‚ï»¿</li>\n<li>DNSã€HTTPã€HTTPS æ‰€åœ¨çš„å±‚æˆ‘ä»¬ç§°ä¸º<strong>åº”ç”¨å±‚</strong>ã€‚ç»è¿‡åº”ç”¨å±‚å°è£…åï¼Œæµè§ˆå™¨ä¼šå°†åº”ç”¨å±‚çš„åŒ…äº¤ç»™ä¸‹ä¸€å±‚å»å®Œæˆï¼Œ<strong>é€šè¿‡ socket ç¼–ç¨‹æ¥å®ç°</strong>ã€‚ä¸‹ä¸€å±‚æ˜¯<strong>ä¼ è¾“å±‚</strong>ã€‚ä¼ è¾“å±‚æœ‰ä¸¤ç§åè®®ï¼Œä¸€ç§æ˜¯æ— è¿æ¥çš„åè®®UDPï¼Œä¸€ç§æ˜¯é¢å‘è¿æ¥çš„åè®®TCPã€‚è¿™é‡Œä½¿ç”¨ TCP åè®®ã€‚æ‰€è°“çš„é¢å‘è¿æ¥å°±æ˜¯ï¼ŒTCP ä¼šä¿è¯è¿™ä¸ªåŒ…èƒ½å¤Ÿåˆ°è¾¾ç›®çš„åœ°ã€‚å¦‚æœä¸èƒ½åˆ°è¾¾ï¼Œå°±ä¼šé‡æ–°å‘é€ï¼Œç›´è‡³åˆ°è¾¾ã€‚</li>\n<li>TCP åè®®é‡Œé¢ä¼šæœ‰ä¸¤ä¸ªç«¯å£ï¼Œä¸€ä¸ªæ˜¯æµè§ˆå™¨ç›‘å¬çš„ç«¯å£ï¼Œä¸€ä¸ªæ˜¯ github çš„æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£ã€‚æ“ä½œç³»ç»Ÿå¾€å¾€é€šè¿‡ç«¯å£æ¥åˆ¤æ–­ï¼Œå®ƒå¾—åˆ°çš„åŒ…åº”è¯¥ç»™å“ªä¸ªè¿›ç¨‹ã€‚</li>\n<li>ä¼ è¾“å±‚å°è£…å®Œæ¯•åï¼Œæµè§ˆå™¨ä¼šå°†åŒ…äº¤ç»™æ“ä½œç³»ç»Ÿçš„<strong>ç½‘ç»œå±‚</strong>ã€‚ç½‘ç»œå±‚çš„åè®®æ˜¯ IP åè®®ã€‚åœ¨ IP åè®®é‡Œé¢ä¼šæœ‰æº IP åœ°å€ï¼Œå³æµè§ˆå™¨æ‰€åœ¨æœºå™¨çš„ IP åœ°å€å’Œç›®æ ‡ IP åœ°å€ï¼Œä¹Ÿå³ github æ‰€åœ¨æœåŠ¡å™¨çš„ IP åœ°å€ã€‚</li>\n<li>æ“ä½œç³»ç»Ÿæ—¢ç„¶çŸ¥é“äº†ç›®æ ‡ IP åœ°å€ï¼Œå°±å¼€å§‹æƒ³å¦‚ä½•æ ¹æ®è¿™ä¸ªé—¨ç‰Œå·æ‰¾åˆ°ç›®æ ‡æœºå™¨ã€‚æ“ä½œç³»ç»Ÿå¾€å¾€ä¼šåˆ¤æ–­ï¼Œè¿™ä¸ªç›®æ ‡ IP åœ°å€æ˜¯æœ¬åœ°äººï¼Œè¿˜æ˜¯å¤–åœ°äººã€‚å¦‚æœæ˜¯æœ¬åœ°äººï¼Œä»é—¨ç‰Œå·å°±èƒ½çœ‹å‡ºæ¥ï¼Œä½†æ˜¯æ˜¾ç„¶ github ç½‘ç«™ä¸åœ¨æœ¬åœ°ï¼Œè€Œåœ¨é¥è¿œçš„åœ°æ–¹ã€‚</li>\n<li>æ“ä½œç³»ç»ŸçŸ¥é“è¦ç¦»å¼€æœ¬åœ°å»è¿œæ–¹ã€‚è™½ç„¶ä¸çŸ¥é“è¿œæ–¹åœ¨ä½•å¤„ï¼Œä½†æ˜¯å¯ä»¥è¿™æ ·ç±»æ¯”ä¸€ä¸‹ï¼šå¦‚æœå»å›½å¤–è¦å»æµ·å…³ï¼Œå»å¤–åœ°å°±è¦å»ç½‘å…³ã€‚è€Œæ“ä½œç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šè¢« DHCP åè®®é…ç½® IP åœ°å€ï¼Œä»¥åŠé»˜è®¤çš„ç½‘å…³çš„ IP åœ°å€ 192.168.1.1ã€‚</li>\n<li>æ“ä½œç³»ç»Ÿå¦‚ä½•å°† IP åœ°å€å‘ç»™ç½‘å…³å‘¢ï¼Ÿåœ¨æœ¬åœ°é€šä¿¡åŸºæœ¬é å¼ï¼Œäºæ˜¯æ“ä½œç³»ç»Ÿå¤§å¼ä¸€å£°ï¼Œè°æ˜¯ 192.168.1.1 å•Šï¼Ÿç½‘å…³ä¼šå›ç­”å®ƒï¼Œæˆ‘å°±æ˜¯ï¼Œæˆ‘çš„æœ¬åœ°åœ°å€åœ¨æ‘ä¸œå¤´ã€‚è¿™ä¸ªæœ¬åœ°åœ°å€å°±æ˜¯ MAC åœ°å€ï¼Œè€Œå¤§å¼çš„é‚£ä¸€å£°æ˜¯ ARP åè®®ã€‚</li>\n<li>äºæ˜¯æ“ä½œç³»ç»Ÿå°† IP åŒ…äº¤ç»™äº†ä¸‹ä¸€å±‚ï¼Œä¹Ÿå°±æ˜¯ <strong>MAC å±‚</strong>ã€‚ç½‘å¡å†å°†åŒ…å‘å‡ºå»ã€‚ç”±äºè¿™ä¸ªåŒ…é‡Œé¢æ˜¯æœ‰ MAC åœ°å€çš„ï¼Œå› è€Œå®ƒèƒ½å¤Ÿåˆ°è¾¾ç½‘å…³ã€‚</li>\n<li>ç½‘å…³æ”¶åˆ°åŒ…ä¹‹åï¼Œä¼šæ ¹æ®è‡ªå·±çš„çŸ¥è¯†ï¼Œåˆ¤æ–­ä¸‹ä¸€æ­¥åº”è¯¥æ€ä¹ˆèµ°ã€‚ç½‘å…³å¾€å¾€æ˜¯ä¸€ä¸ªè·¯ç”±å™¨ï¼Œåˆ°æŸä¸ª IP åœ°å€åº”è¯¥æ€ä¹ˆèµ°ï¼Œè¿™ä¸ªå«ä½œè·¯ç”±è¡¨ã€‚</li>\n<li>è·¯ç”±å™¨æœ‰ç‚¹åƒç„å¥˜è¥¿è¡Œè·¯è¿‡çš„ä¸€ä¸ªä¸ªå›½å®¶çš„ä¸€ä¸ªä¸ªåŸå…³ã€‚æ¯ä¸ªåŸå…³éƒ½è¿ç€ä¸¤ä¸ªå›½å®¶ï¼Œæ¯ä¸ªå›½å®¶ç›¸å½“äºä¸€ä¸ªå±€åŸŸç½‘ï¼Œåœ¨æ¯ä¸ªå›½å®¶å†…éƒ¨ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æœ¬åœ°çš„åœ°å€ MAC è¿›è¡Œé€šä¿¡ã€‚</li>\n<li>ä¸€æ—¦è·¨è¶ŠåŸå…³ï¼Œå°±éœ€è¦æ‹¿å‡º IP å¤´æ¥é—®ï¼Œç›®æ ‡ IP åœ°å€æ€ä¹ˆèµ°ï¼Ÿ</li>\n<li>åŸå…³å¾€å¾€æ˜¯çŸ¥é“è¿™äº›â€œçŸ¥è¯†â€çš„ï¼Œå› ä¸ºåŸå…³å’Œä¸´è¿‘çš„åŸå…³ä¹Ÿä¼šç»å¸¸æ²Ÿé€šã€‚åˆ°å“ªé‡Œåº”è¯¥æ€ä¹ˆèµ°ï¼Œè¿™ç§æ²Ÿé€šçš„åè®®ç§°ä¸ºè·¯ç”±åè®®ï¼Œå¸¸ç”¨çš„æœ‰ OSP Få’Œ BGP ã€‚ï»¿</li>\n<li>åŸå…³ä¸åŸå…³ä¹‹é—´æ˜¯ä¸€ä¸ªå›½å®¶ï¼Œå½“ç½‘ç»œåŒ…çŸ¥é“äº†ä¸‹ä¸€æ­¥å»å“ªä¸ªåŸå…³ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨å›½å®¶å†…éƒ¨çš„ MAC åœ°å€ï¼Œé€šè¿‡ä¸‹ä¸€ä¸ªåŸå…³çš„ MAC åœ°å€ï¼Œæ‰¾åˆ°ä¸‹ä¸€ä¸ªåŸå…³ï¼Œç„¶åå†é—®ä¸‹ä¸€æ­¥çš„è·¯æ€ä¹ˆèµ°ï¼Œä¸€ç›´åˆ°èµ°å‡ºæœ€åä¸€ä¸ªåŸå…³ã€‚</li>\n<li>æœ€åä¸€ä¸ªåŸå…³çŸ¥é“è¿™ä¸ªç½‘ç»œåŒ…è¦å»çš„åœ°æ–¹ã€‚äºæ˜¯ï¼Œå¯¹ç€è¿™ä¸ªå›½å®¶å¼ä¸€å£°ï¼Œè°æ˜¯ç›®æ ‡ IP å•Šï¼Ÿç›®æ ‡æœåŠ¡å™¨å°±ä¼šå›å¤ä¸€ä¸ª MAC åœ°å€ã€‚ç½‘ç»œåŒ…è¿‡å…³åï¼Œé€šè¿‡è¿™ä¸ª MAC åœ°å€å°±èƒ½æ‰¾åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚</li>\n<li>ç›®æ ‡æœåŠ¡å™¨å‘ç° MAC åœ°å€å¯¹ä¸Šäº†ï¼Œå–ä¸‹ MAC å¤´æ¥ï¼Œå‘é€ç»™æ“ä½œç³»ç»Ÿçš„ç½‘ç»œå±‚ã€‚å‘ç° IP ä¹Ÿå¯¹ä¸Šäº†ï¼Œå°±å–ä¸‹ IP å¤´ã€‚IP å¤´é‡Œä¼šå†™ä¸Šä¸€å±‚å°è£…çš„æ˜¯ TCP åè®®ï¼Œç„¶åå°†å…¶äº¤ç»™ä¼ è¾“å±‚ï¼Œå³TCP å±‚ã€‚</li>\n<li>åœ¨è¿™ä¸€å±‚é‡Œï¼Œå¯¹äºæ”¶åˆ°çš„æ¯ä¸ªåŒ…ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªå›å¤çš„åŒ…è¯´æ˜æ”¶åˆ°äº†ã€‚è¿™ä¸ªå›å¤çš„åŒ…ç»éè¿™æ¬¡æŸ¥è¯¢è¯·æ±‚çš„ç»“æœï¼Œè€Œä»…ä»…æ˜¯ TCP å±‚çš„ä¸€ä¸ªè¯´æ˜ï¼Œå³æ”¶åˆ°ä¹‹åçš„å›å¤ã€‚å½“ç„¶è¿™ä¸ªå›å¤ï¼Œä¼šæ²¿ç€åˆšæ‰æ¥çš„æ–¹å‘èµ°å›å»ï¼ŒæŠ¥ä¸ªå¹³å®‰ã€‚</li>\n<li>å¦‚æœè¿‡ä¸€æ®µæ—¶é—´è¿˜æ˜¯æ²¡åˆ°ï¼Œå‘é€ç«¯çš„ TCP å±‚ä¼šé‡æ–°å‘é€è¿™ä¸ªåŒ…ï¼Œè¿˜æ˜¯ä¸Šé¢çš„è¿‡ç¨‹ï¼Œç›´åˆ°æœ‰ä¸€å¤©æ”¶åˆ°å¹³å®‰åˆ°è¾¾çš„å›å¤ã€‚è¿™ä¸ªé‡è¯•ç»éä½ çš„æµè§ˆå™¨é‡æ–°è¯·æ±‚ github ä¸ªäººä¸»é¡µã€‚å¯¹äºæµè§ˆå™¨æ¥è®²ï¼Œå°±å‘é€äº†ä¸€æ¬¡ github ä¸ªäººä¸»é¡µè¯·æ±‚ï¼ŒTCP å±‚ä¸æ–­è‡ªå·±é—·å¤´é‡è¯•ã€‚é™¤é TCP è¿™ä¸€å±‚å‡ºäº†é—®é¢˜ï¼Œä¾‹å¦‚è¿æ¥æ–­äº†ï¼Œæ‰è½®åˆ°æµè§ˆå™¨çš„åº”ç”¨å±‚é‡æ–°å‘é€ github ä¸ªäººä¸»é¡µè¯·æ±‚ã€‚</li>\n<li>å½“ç½‘ç»œåŒ…å¹³å®‰åˆ°è¾¾ TCP å±‚ä¹‹åï¼ŒTCP å¤´ä¸­æœ‰ç›®æ ‡ç«¯å£å·ï¼Œé€šè¿‡è¿™ä¸ªç«¯å£å·ï¼Œå¯ä»¥æ‰¾åˆ° github ç½‘ç«™çš„è¿›ç¨‹æ­£åœ¨ç›‘å¬è¿™ä¸ªç«¯å£å·ï¼Œå‡è®¾ä¸€ä¸ª Tomcatï¼Œå°†è¿™ä¸ªåŒ…å‘ç»™ github ç½‘ç«™ã€‚ï»¿</li>\n<li>github ç½‘ç«™çš„è¿›ç¨‹å¾—åˆ° HTTP è¯·æ±‚çš„å†…å®¹ï¼ŒçŸ¥é“äº†è¦å“åº”å•¥ã€‚å¾€å¾€ä¸€ä¸ªç”µå•†ç½‘ç«™æœ€åˆæ¥å¾…è¯·æ±‚çš„è¿™ä¸ª Tomcat åªæ˜¯ä¸ªæ¥å¾…å‘˜ï¼Œè´Ÿè´£ç»Ÿç­¹å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„äº‹æƒ…éƒ½è‡ªå·±åšã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªæ¥å¾…å‘˜è¦å‘Šè¯‰ä¸“é—¨ç®¡ç† GitHub ä¸ªäººä¸»é¡µçš„è¿›ç¨‹ï¼Œè¦å“åº”å•¥ç­‰ç­‰ã€‚</li>\n<li>å¦‚ä½•å‘Šè¯‰ç›¸å…³çš„è¿›ç¨‹å‘¢ï¼Ÿå¾€å¾€é€šè¿‡ RPC è°ƒç”¨ï¼Œå³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„æ–¹å¼æ¥å®ç°ã€‚è¿œç¨‹è¿‡ç¨‹è°ƒç”¨å°±æ˜¯å½“å‘Šè¯‰ç®¡ç† GitHub ä¸ªäººä¸»é¡µçš„è¿›ç¨‹çš„æ—¶å€™ï¼Œæ¥å¾…å‘˜ä¸ç”¨å…³å¿ƒä¸­é—´çš„ç½‘ç»œäº’è¿é—®é¢˜ï¼Œä¼šç”± RPC æ¡†æ¶ç»Ÿä¸€å¤„ç†ã€‚RPC æ¡†æ¶æœ‰å¾ˆå¤šç§ï¼Œæœ‰åŸºäº HTTP åè®®æ”¾åœ¨ HTTP çš„æŠ¥æ–‡é‡Œé¢çš„ï¼Œæœ‰ç›´æ¥å°è£…åœ¨ TCP æŠ¥æ–‡é‡Œé¢çš„ã€‚</li>\n<li>å½“æ¥å¾…å‘˜å‘ç°ç›¸åº”çš„éƒ¨é—¨éƒ½å¤„ç†å®Œæ¯•ï¼Œå°±å›å¤ä¸€ä¸ª HTTPS çš„åŒ…ï¼Œå‘ŠçŸ¥æŸ¥è¯¢æˆåŠŸã€‚è¿™ä¸ª HTTPS çš„åŒ…ï¼Œä¼šåƒæ¥çš„æ—¶å€™ä¸€æ ·ï¼Œç»è¿‡åƒéš¾ä¸‡é™©åˆ°è¾¾ä½ çš„ä¸ªäººç”µè„‘ï¼Œæœ€ç»ˆè¿›å…¥æµè§ˆå™¨ï¼Œæ˜¾ç¤ºä¸ªäººä¸»é¡µã€‚</li>\n</ul>\n<h2 id=\"ç½‘ç»œåˆ†å±‚æ¨¡å‹\"><a href=\"#ç½‘ç»œåˆ†å±‚æ¨¡å‹\" class=\"headerlink\" title=\"ç½‘ç»œåˆ†å±‚æ¨¡å‹\"></a>ç½‘ç»œåˆ†å±‚æ¨¡å‹</h2><h3 id=\"TCP-IP-åè®®æ ˆ\"><a href=\"#TCP-IP-åè®®æ ˆ\" class=\"headerlink\" title=\"TCP/IP åè®®æ ˆ\"></a>TCP/IP åè®®æ ˆ</h3><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6fea0628affaf34d09b59d845ffeb60a75766.png\" alt=\"TCP/IP åè®®æ ˆ\"></li>\n<li><strong>link layer é“¾æ¥å±‚</strong>ï¼šè´Ÿè´£åœ¨ä»¥å¤ªç½‘ã€WiFi è¿™æ ·çš„åº•å±‚ç½‘ç»œä¸Šå‘é€åŸå§‹æ•°æ®åŒ…ï¼ˆframe å¸§ï¼‰ï¼Œå·¥ä½œåœ¨ç½‘å¡è¿™ä¸ªå±‚æ¬¡ï¼Œä½¿ç”¨ MAC åœ°å€æ¥æ ‡è®°ç½‘ç»œä¸Šçš„è®¾å¤‡ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿå« MAC å±‚ã€‚</li>\n<li><strong>internet layer ç½‘é™…å±‚</strong>ï¼šIP åè®®å°±å¤„åœ¨è¿™ä¸€å±‚ã€‚å› ä¸º IP åè®®å®šä¹‰äº†â€œIP åœ°å€â€çš„æ¦‚å¿µï¼Œæ‰€ä»¥å°±å¯ä»¥åœ¨â€œé“¾æ¥å±‚â€çš„åŸºç¡€ä¸Šï¼Œç”¨ IP åœ°å€å–ä»£ MAC åœ°å€ï¼ŒæŠŠè®¸è®¸å¤šå¤šçš„å±€åŸŸç½‘ã€å¹¿åŸŸç½‘è¿æ¥æˆä¸€ä¸ªè™šæ‹Ÿçš„å·¨å¤§ç½‘ç»œï¼Œåœ¨è¿™ä¸ªç½‘ç»œé‡Œæ‰¾è®¾å¤‡æ—¶åªè¦æŠŠ IP åœ°å€å†â€œç¿»è¯‘â€æˆ MAC åœ°å€å°±å¯ä»¥äº†ã€‚ä¼ è¾“å•ä½æ˜¯åŒ…ï¼ˆpacketï¼‰</li>\n<li><strong>transport layer ä¼ è¾“å±‚</strong>ï¼šTCP/UDP åè®®å·¥ä½œçš„å±‚æ¬¡<ul>\n<li>TCP æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„åè®®ï¼Œéœ€è¦å…ˆä¸å¯¹æ–¹å»ºç«‹è¿æ¥ç„¶åæ‰èƒ½å‘é€æ•°æ®ï¼Œè€Œä¸”ä¿è¯æ•°æ®ä¸ä¸¢å¤±ä¸é‡å¤ã€‚è€Œ UDP åˆ™æ¯”è¾ƒç®€å•ï¼Œå®ƒæ— çŠ¶æ€ï¼Œä¸ç”¨äº‹å…ˆå»ºç«‹è¿æ¥å°±å¯ä»¥ä»»æ„å‘é€æ•°æ®ï¼Œä½†ä¸ä¿è¯æ•°æ®ä¸€å®šä¼šå‘åˆ°å¯¹æ–¹ã€‚ä¸¤ä¸ªåè®®çš„å¦ä¸€ä¸ªé‡è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å½¢å¼ã€‚TCP çš„æ•°æ®æ˜¯è¿ç»­çš„â€œå­—èŠ‚æµâ€ï¼Œæœ‰å…ˆåé¡ºåºï¼Œè€Œ UDP åˆ™æ˜¯åˆ†æ•£çš„å°æ•°æ®åŒ…ï¼Œæ˜¯é¡ºåºå‘ï¼Œä¹±åºæ”¶ã€‚</li>\n<li>TCP å±‚çš„ä¼ è¾“å•ä½æ˜¯æ®µï¼ˆsegmentï¼‰</li>\n</ul>\n</li>\n<li><strong>application layer åº”ç”¨å±‚</strong>ï¼šå„ç§é¢å‘å…·ä½“åº”ç”¨çš„åè®®ï¼Œä¾‹å¦‚ DHCPã€HTTPã€HTTPSã€RTMPã€DNSã€P2Pã€GTPã€RPCã€Telnetã€SSHã€FTPã€SMTP ç­‰ç­‰ã€‚<ul>\n<li>HTTP çš„ä¼ è¾“å•ä½åˆ™æ˜¯æ¶ˆæ¯æˆ–æŠ¥æ–‡ï¼ˆmessageï¼‰</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"OSI-Open-System-Interconnection-Reference-Model-å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹\"><a href=\"#OSI-Open-System-Interconnection-Reference-Model-å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹\" class=\"headerlink\" title=\"OSI (Open System Interconnection Reference Model) å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹\"></a>OSI (Open System Interconnection Reference Model) å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹</h3><ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/53145af5e2b1d0846761c3382cce24c5104243.png\" alt=\"OSIå‚è€ƒæ¨¡å‹\"></li>\n<li><strong>physical layer ç‰©ç†å±‚</strong>ï¼šç½‘ç»œçš„ç‰©ç†å½¢å¼ï¼Œä¾‹å¦‚ç”µç¼†ã€å…‰çº¤ã€ç½‘å¡ã€é›†çº¿å™¨ç­‰ç­‰</li>\n<li><strong>data link layer æ•°æ®é“¾è·¯å±‚</strong>ï¼šåŸºæœ¬ç›¸å½“äº TCP/IP çš„é“¾æ¥å±‚</li>\n<li><strong>network layer ç½‘ç»œå±‚</strong>ï¼šç›¸å½“äº TCP/IP é‡Œçš„ç½‘é™…å±‚</li>\n<li><strong>transport layer ä¼ è¾“å±‚</strong>ï¼šç›¸å½“äº TCP/IP é‡Œçš„ä¼ è¾“å±‚</li>\n<li><strong>session layer ä¼šè¯å±‚</strong>ï¼šç»´æŠ¤ç½‘ç»œä¸­çš„è¿æ¥çŠ¶æ€ï¼Œå³ä¿æŒä¼šè¯å’ŒåŒæ­¥</li>\n<li><strong>presentation layer è¡¨ç¤ºå±‚</strong>ï¼šæŠŠæ•°æ®è½¬æ¢ä¸ºåˆé€‚ã€å¯ç†è§£çš„è¯­æ³•å’Œè¯­ä¹‰</li>\n<li><strong>application layer åº”ç”¨å±‚</strong>ï¼šé¢å‘å…·ä½“çš„åº”ç”¨ä¼ è¾“æ•°æ®</li>\n</ul>\n<h3 id=\"ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»\"><a href=\"#ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»\" class=\"headerlink\" title=\"ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»\"></a>ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»</h3><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/0042adbffe9810c7913862252fa27662164155.png\" alt=\"ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„æ˜ å°„å…³ç³»\"></li>\n<li>ç¬¬ä¸€å±‚ï¼šç‰©ç†å±‚ï¼ŒTCP/IP é‡Œæ— å¯¹åº”</li>\n<li>ç¬¬äºŒå±‚ï¼šæ•°æ®é“¾è·¯å±‚ï¼Œå¯¹åº” TCP/IP çš„é“¾æ¥å±‚</li>\n<li>ç¬¬ä¸‰å±‚ï¼šç½‘ç»œå±‚ï¼Œå¯¹åº” TCP/IP çš„ç½‘é™…å±‚</li>\n<li>ç¬¬å››å±‚ï¼šä¼ è¾“å±‚ï¼Œå¯¹åº” TCP/IP çš„ä¼ è¾“å±‚</li>\n<li>ç¬¬äº”ã€å…­ã€ä¸ƒå±‚ï¼šç»Ÿä¸€å¯¹åº”åˆ° TCP/IP çš„åº”ç”¨å±‚<ul>\n<li>TCP/IP å®é™…åº”ç”¨æ—¶çš„ä¼šè¯ç®¡ç†ã€ç¼–ç è½¬æ¢ã€å‹ç¼©ç­‰å’Œå…·ä½“åº”ç”¨ç»å¸¸è”ç³»çš„å¾ˆç´§å¯†ï¼Œå¾ˆéš¾åˆ†å¼€</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"HTTP-HyperText-Transfer-Protocol\"><a href=\"#HTTP-HyperText-Transfer-Protocol\" class=\"headerlink\" title=\"HTTP - HyperText Transfer Protocol\"></a>HTTP - HyperText Transfer Protocol</h2><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/0eac1c72dc8c7c0ac87363d73f51b19b30633.png\" alt=\"HTTPæ¦‚è§ˆå›¾\"></li>\n<li>Protocol<ul>\n<li>åè®®å¿…é¡»è¦æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªå‚ä¸è€…ï¼Œä¹Ÿå°±æ˜¯â€œåâ€</li>\n<li>åè®®æ˜¯å¯¹å‚ä¸è€…çš„ä¸€ç§è¡Œä¸ºçº¦å®šå’Œè§„èŒƒï¼Œä¹Ÿå°±æ˜¯â€œè®®â€ï¼ŒåŒ…æ‹¬è¯­æ³•ã€è¯­ä¹‰ã€åŒæ­¥è§„åˆ™å’Œé”™è¯¯å¤„ç†</li>\n<li>æ€»ç»“ï¼š<strong>HTTP æ˜¯ä¸€ä¸ªç”¨åœ¨è®¡ç®—æœºä¸–ç•Œé‡Œçš„åè®®ã€‚å®ƒä½¿ç”¨è®¡ç®—æœºèƒ½å¤Ÿç†è§£çš„è¯­è¨€ç¡®ç«‹äº†ä¸€ç§è®¡ç®—æœºä¹‹é—´äº¤æµé€šä¿¡çš„è§„èŒƒï¼Œä»¥åŠç›¸å…³çš„å„ç§æ§åˆ¶å’Œé”™è¯¯å¤„ç†æ–¹å¼ã€‚</strong></li>\n</ul>\n</li>\n<li>Transfer<ul>\n<li>HTTP åè®®æ˜¯ä¸€ä¸ªâ€œåŒå‘åè®®â€</li>\n<li>æ•°æ®è™½ç„¶æ˜¯åœ¨ A å’Œ B ä¹‹é—´ä¼ è¾“ï¼Œä½†å¹¶æ²¡æœ‰é™åˆ¶åªæœ‰ A å’Œ B è¿™ä¸¤ä¸ªè§’è‰²ï¼Œå…è®¸ä¸­é—´æœ‰â€œä¸­è½¬â€æˆ–è€…â€œæ¥åŠ›â€<ul>\n<li>ä¼ è¾“æ–¹å¼ä»â€œA&lt;===&gt;Bâ€ å¯ä»¥å˜æˆäº† â€œA&lt;=&gt;X&lt;=&gt;Y&lt;=&gt;Z&lt;=&gt;Bâ€</li>\n<li>A åˆ° B çš„ä¼ è¾“è¿‡ç¨‹ä¸­å¯ä»¥å­˜åœ¨ä»»æ„å¤šä¸ªâ€œä¸­é—´äººâ€ï¼Œè€Œè¿™äº›ä¸­é—´äººä¹Ÿéƒ½éµä» HTTP åè®®ï¼Œåªè¦ä¸æ‰“æ‰°åŸºæœ¬çš„æ•°æ®ä¼ è¾“ï¼Œå°±å¯ä»¥æ·»åŠ ä»»æ„çš„é¢å¤–åŠŸèƒ½ï¼Œä¾‹å¦‚å®‰å…¨è®¤è¯ã€æ•°æ®å‹ç¼©ã€ç¼–ç è½¬æ¢ç­‰ç­‰ï¼Œä¼˜åŒ–æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ã€‚</li>\n</ul>\n</li>\n<li>æ€»ç»“ï¼š<strong>HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨ç”¨æ¥åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ•°æ®çš„çº¦å®šå’Œè§„èŒƒã€‚</strong></li>\n</ul>\n</li>\n<li>HyperText<ul>\n<li>Text<ul>\n<li>è¡¨ç¤º HTTP ä¼ è¾“çš„ä¸æ˜¯ TCP/UDP è¿™äº›åº•å±‚åè®®é‡Œè¢«åˆ‡åˆ†çš„æ‚ä¹±æ— ç« çš„äºŒè¿›åˆ¶åŒ…ï¼ˆdatagramï¼‰ï¼Œè€Œæ˜¯å®Œæ•´çš„ã€æœ‰æ„ä¹‰çš„æ•°æ®ï¼Œå¯ä»¥è¢«æµè§ˆå™¨ã€æœåŠ¡å™¨è¿™æ ·çš„ä¸Šå±‚åº”ç”¨ç¨‹åºå¤„ç†ã€‚</li>\n</ul>\n</li>\n<li>è¶…æ–‡æœ¬ï¼šæ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘ç­‰çš„æ··åˆä½“ï¼Œæœ€å…³é”®çš„æ˜¯å«æœ‰â€œè¶…é“¾æ¥â€ï¼Œèƒ½å¤Ÿä»ä¸€ä¸ªâ€œè¶…æ–‡æœ¬â€è·³è·ƒåˆ°å¦ä¸€ä¸ªâ€œè¶…æ–‡æœ¬â€ï¼Œå½¢æˆå¤æ‚çš„éçº¿æ€§ã€ç½‘çŠ¶çš„ç»“æ„å…³ç³»ã€‚</li>\n</ul>\n</li>\n<li>æ€»ç»“ï¼š<strong>HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®çš„çº¦å®šå’Œè§„èŒƒ</strong></li>\n</ul>\n<h3 id=\"HTTPä¸æ˜¯ï¼Ÿ\"><a href=\"#HTTPä¸æ˜¯ï¼Ÿ\" class=\"headerlink\" title=\"HTTPä¸æ˜¯ï¼Ÿ\"></a>HTTPä¸æ˜¯ï¼Ÿ</h3><ul>\n<li><strong>ä¸å­˜åœ¨â€œå•ç‹¬çš„å®ä½“â€</strong>ï¼Œä½† HTTP åˆä¸åº”ç”¨ç¨‹åºã€æ“ä½œç³»ç»Ÿã€Web æœåŠ¡å™¨å¯†åˆ‡ç›¸å…³ï¼Œåœ¨å®ƒä»¬ä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹ä¸­å­˜åœ¨ï¼Œè€Œä¸”æ˜¯ä¸€ç§â€œåŠ¨æ€çš„å­˜åœ¨â€ï¼Œæ˜¯å‘ç”Ÿåœ¨ç½‘ç»œè¿æ¥ã€ä¼ è¾“è¶…æ–‡æœ¬æ•°æ®æ—¶çš„ä¸€ä¸ªâ€œåŠ¨æ€è¿‡ç¨‹â€ã€‚</li>\n<li><strong>HTTP ä¸æ˜¯äº’è”ç½‘</strong><ul>\n<li>äº’è”ç½‘ï¼ˆInternetï¼‰æ˜¯éå¸ƒäºå…¨çƒçš„è®¸å¤šç½‘ç»œäº’ç›¸è¿æ¥è€Œå½¢æˆçš„ä¸€ä¸ªå·¨å¤§çš„å›½é™…ç½‘ç»œï¼Œåœ¨å®ƒä¸Šé¢å­˜æ”¾ç€å„å¼å„æ ·çš„èµ„æºï¼Œä¹Ÿå¯¹åº”ç€å„å¼å„æ ·çš„åè®®ï¼Œä¾‹å¦‚è¶…æ–‡æœ¬èµ„æºä½¿ç”¨ HTTPï¼Œæ™®é€šæ–‡ä»¶ä½¿ç”¨ FTPï¼Œç”µå­é‚®ä»¶ä½¿ç”¨ SMTP å’Œ POP3 ç­‰ã€‚</li>\n</ul>\n</li>\n<li><strong>HTTP ä¸æ˜¯ç¼–ç¨‹è¯­è¨€</strong><ul>\n<li>ç¼–ç¨‹è¯­è¨€æ˜¯äººä¸è®¡ç®—æœºæ²Ÿé€šäº¤æµæ‰€ä½¿ç”¨çš„è¯­è¨€ï¼Œè€Œ HTTP æ˜¯è®¡ç®—æœºä¸è®¡ç®—æœºæ²Ÿé€šäº¤æµçš„è¯­è¨€</li>\n<li>æ— æ³•ä½¿ç”¨ HTTP æ¥ç¼–ç¨‹ï¼Œä½†å¯ä»¥åè¿‡æ¥ï¼Œç”¨ç¼–ç¨‹è¯­è¨€å»å®ç° HTTPï¼Œå‘Šè¯‰è®¡ç®—æœºå¦‚ä½•ç”¨ HTTP æ¥ä¸å¤–ç•Œé€šä¿¡</li>\n</ul>\n</li>\n<li><strong>HTTP ä¸æ˜¯ç”¨äºä»äº’è”ç½‘æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„åè®®</strong><ul>\n<li>è¿‡äºç‰‡é¢ï¼ŒHTTP å‘ç”Ÿåœ¨ä¸¤ç‚¹ä¹‹é—´ï¼Œå³æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¸æ˜¯åªåŒ…æ‹¬æœ¬åœ°æµè§ˆå™¨ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥ä½œä¸ºå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿä¸ä»…ä»…åªæœ‰æµè§ˆå™¨ï¼Œè¿˜å¯ä»¥æœ‰ Appã€å°ç¨‹åºï¼Œæµè§ˆå™¨åªèƒ½ä½œä¸ºå®¢æˆ·ç«¯</li>\n</ul>\n</li>\n<li><strong>HTTP ä¸æ˜¯ä¸€ä¸ªå­¤ç«‹çš„åè®®</strong><ul>\n<li>HTTP é€šå¸¸è·‘åœ¨ TCP/IP åè®®æ ˆä¹‹ä¸Šï¼Œä¾é  IP åè®®å®ç°å¯»å€å’Œè·¯ç”±ã€TCP åè®®å®ç°å¯é æ•°æ®ä¼ è¾“ã€DNS åè®®å®ç°åŸŸåæŸ¥æ‰¾ã€SSL/TLS åè®®å®ç°å®‰å…¨é€šä¿¡</li>\n<li>è¿˜æœ‰ä¸€äº›åè®®ä¾èµ–äº HTTPï¼Œä¾‹å¦‚ WebSocketã€HTTPDNS ç­‰</li>\n</ul>\n</li>\n<li>æ€»ç»“ï¼š<strong>HTTP æ˜¯æ„å»ºäº’è”ç½‘çš„é‡è¦åŸºç¡€æŠ€æœ¯ï¼Œå®ƒæ²¡æœ‰å®ä½“ï¼Œä¾èµ–è®¸å¤šå…¶ä»–çš„æŠ€æœ¯æ¥å®ç°ï¼Œä½†åŒæ—¶è®¸å¤šæŠ€æœ¯ä¹Ÿéƒ½ä¾èµ–äºå®ƒã€‚</strong></li>\n</ul>\n<h2 id=\"Domain\"><a href=\"#Domain\" class=\"headerlink\" title=\"Domain\"></a>Domain</h2><h3 id=\"Domain-å½¢å¼\"><a href=\"#Domain-å½¢å¼\" class=\"headerlink\" title=\"Domain å½¢å¼\"></a>Domain å½¢å¼</h3><ul>\n<li>åŸŸåæ˜¯ä¸€ä¸ªæœ‰å±‚æ¬¡çš„ç»“æ„ï¼Œæ˜¯ä¸€ä¸²ç”¨â€œ.â€åˆ†éš”çš„å¤šä¸ªå•è¯ï¼Œæœ€å³è¾¹çš„è¢«ç§°ä¸ºâ€œé¡¶çº§åŸŸåâ€ï¼Œç„¶åæ˜¯â€œäºŒçº§åŸŸåâ€ï¼Œå±‚çº§å…³ç³»å‘å·¦ä¾æ¬¡é™ä½ã€‚</li>\n<li>æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸ªåå­—ç©ºé—´ç³»ç»Ÿ</li>\n</ul>\n<h3 id=\"DNS-Domain-Name-System\"><a href=\"#DNS-Domain-Name-System\" class=\"headerlink\" title=\"DNS Domain Name System\"></a>DNS Domain Name System</h3><ul>\n<li>å°±åƒ IP åœ°å€å¿…é¡»è½¬æ¢æˆ MAC åœ°å€æ‰èƒ½è®¿é—®ä¸»æœºä¸€æ ·ï¼ŒåŸŸåä¹Ÿå¿…é¡»è¦è½¬æ¢æˆ IP åœ°å€ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯â€œåŸŸåè§£æâ€ã€‚</li>\n<li>DNS ä½¿ç”¨ TCP å’Œ UDP ç«¯å£53</li>\n<li>DNS çš„æ ¸å¿ƒç³»ç»Ÿæ˜¯ä¸€ä¸ªä¸‰å±‚çš„æ ‘çŠ¶ã€åˆ†å¸ƒå¼æœåŠ¡ï¼ŒåŸºæœ¬å¯¹åº”åŸŸåçš„ç»“æ„ï¼š<ul>\n<li>æ ¹åŸŸåæœåŠ¡å™¨ï¼ˆRoot DNS Serverï¼‰ï¼šç®¡ç†é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œè¿”å›â€œcomâ€â€œnetâ€â€œcnâ€ç­‰é¡¶çº§åŸŸåæœåŠ¡å™¨çš„ IP åœ°å€<ul>\n<li>å…¨ä¸–ç•Œå…±æœ‰ 13 ç»„æ ¹åŸŸåæœåŠ¡å™¨ï¼Œåˆæœ‰æ•°ç™¾å°çš„é•œåƒï¼Œä¿è¯ä¸€å®šèƒ½å¤Ÿè¢«è®¿é—®åˆ°</li>\n</ul>\n</li>\n<li>çº§åŸŸåæœåŠ¡å™¨ï¼ˆTop-level DNS Serverï¼‰ï¼šç®¡ç†å„è‡ªåŸŸåä¸‹çš„æƒå¨åŸŸåæœåŠ¡å™¨ï¼Œæ¯”å¦‚ com é¡¶çº§åŸŸåæœåŠ¡å™¨å¯ä»¥è¿”å› apple.com åŸŸåæœåŠ¡å™¨çš„ IP åœ°å€</li>\n<li>æƒå¨åŸŸåæœåŠ¡å™¨ï¼ˆAuthoritative DNS Serverï¼‰ï¼šç®¡ç†è‡ªå·±åŸŸåä¸‹ä¸»æœºçš„ IP åœ°å€ï¼Œæ¯”å¦‚ apple.com æƒå¨åŸŸåæœåŠ¡å™¨å¯ä»¥è¿”å› <a href=\"http://www.apple.com\" target=\"_blank\" rel=\"noopener\">www.apple.com</a> çš„ IP åœ°å€</li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/5ac55ff4d8109df28c9afb3fbfc27208625512.png\" alt=\"DNS ä¸‰å±‚çš„æ ‘çŠ¶\"></li>\n</ul>\n</li>\n<li>æ‰€ä»¥æˆ‘ä»¬è®¿é—® <a href=\"https://ele-peng.github.io/\" target=\"_blank\" rel=\"noopener\">https://ele-peng.github.io/</a> å°±éœ€è¦è¿›è¡Œä¸‹é¢çš„ä¸‰æ¬¡æŸ¥è¯¢<ul>\n<li>è®¿é—®æ ¹åŸŸåæœåŠ¡å™¨ï¼Œå®ƒä¼šå‘Šè¯‰ä½  â€œioâ€ é¡¶çº§åŸŸåæœåŠ¡å™¨çš„åœ°å€</li>\n<li>è®¿é—® â€œioâ€ é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œå®ƒå†å‘Šè¯‰ä½  â€œgithub.ioâ€ åŸŸåæœåŠ¡å™¨çš„åœ°å€</li>\n<li>æœ€åè®¿é—® â€œgithub.ioâ€ åŸŸåæœåŠ¡å™¨ï¼Œå°±å¾—åˆ°äº† â€œele-peng.github.ioâ€ çš„åœ°å€</li>\n</ul>\n</li>\n<li>DNS æ˜¯ä¸€ä¸ªæ ‘çŠ¶çš„åˆ†å¸ƒå¼æŸ¥è¯¢ç³»ç»Ÿï¼Œä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå¤–å›´æœ‰å¤šçº§çš„ç¼“å­˜ï¼ˆéæƒå¨åŸŸåæœåŠ¡å™¨ã€æ“ä½œç³»ç»Ÿç¼“å­˜å’Œ hosts æ–‡ä»¶ç­‰æ‰‹æ®µï¼‰ç”¨æ¥å‡è½»åŸŸåè§£æçš„å‹åŠ›ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ›´å¿«åœ°è·å–ç»“æœï¼ŒåŸºæœ¬æ€è·¯éƒ½æ˜¯<strong>â€œç¼“å­˜â€</strong><ul>\n<li>è®¸å¤šå¤§å…¬å¸ã€ç½‘ç»œè¿è¡Œå•†éƒ½ä¼šå»ºç«‹è‡ªå·±çš„ DNS æœåŠ¡å™¨ï¼Œä½œä¸ºç”¨æˆ· DNS æŸ¥è¯¢çš„ä»£ç†ï¼Œä»£æ›¿ç”¨æˆ·è®¿é—®æ ¸å¿ƒ DNS ç³»ç»Ÿã€‚è¿™äº›â€œé‡ç”Ÿâ€æœåŠ¡å™¨è¢«ç§°ä¸ºâ€œéæƒå¨åŸŸåæœåŠ¡å™¨â€ï¼Œå¯ä»¥ç¼“å­˜ä¹‹å‰çš„æŸ¥è¯¢ç»“æœï¼Œå¦‚æœå·²ç»æœ‰äº†è®°å½•ï¼Œå°±æ— éœ€å†å‘æ ¹æœåŠ¡å™¨å‘èµ·æŸ¥è¯¢ï¼Œç›´æ¥è¿”å›å¯¹åº”çš„ IP åœ°å€<ul>\n<li>è¿™äº› DNS æœåŠ¡å™¨çš„æ•°é‡è¦æ¯”æ ¸å¿ƒç³»ç»Ÿçš„æœåŠ¡å™¨å¤šå¾ˆå¤šï¼Œè€Œä¸”å¤§å¤šéƒ¨ç½²åœ¨ç¦»ç”¨æˆ·å¾ˆè¿‘çš„åœ°æ–¹ã€‚æ¯”è¾ƒçŸ¥åçš„ DNS æœ‰ Google çš„â€œ8.8.8.8â€ï¼ŒMicrosoft çš„â€œ4.2.2.1â€ï¼Œè¿˜æœ‰ CloudFlare çš„â€œ1.1.1.1â€ç­‰ç­‰ã€‚</li>\n</ul>\n</li>\n<li>å…¶æ¬¡ï¼Œæ“ä½œç³»ç»Ÿé‡Œä¹Ÿä¼šå¯¹ DNS è§£æç»“æœåšç¼“å­˜ï¼Œå¦‚æœä½ ä¹‹å‰è®¿é—®è¿‡â€œele-peng.github.ioâ€ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡åœ¨æµè§ˆå™¨é‡Œå†è¾“å…¥è¿™ä¸ªç½‘å€çš„æ—¶å€™å°±ä¸ä¼šå†è·‘åˆ° DNS é‚£é‡Œå»é—®äº†ï¼Œç›´æ¥åœ¨æ“ä½œç³»ç»Ÿé‡Œå°±å¯ä»¥æ‹¿åˆ° IP åœ°å€</li>\n<li>å¦å¤–ï¼Œæ“ä½œç³»ç»Ÿé‡Œè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„â€œä¸»æœºæ˜ å°„â€æ–‡ä»¶</li>\n</ul>\n</li>\n<li>å‡å¦‚è®¿é—® www.ä¸å­˜åœ¨.com <ul>\n<li>www.ä¸å­˜åœ¨.com -&gt; Hosts æ–‡ä»¶ -&gt; æ“ä½œç³»ç»Ÿæœ¬åœ°ç¼“å­˜ -&gt; éæƒå¨åŸŸåæœåŠ¡å™¨æŸ¥è¯¢å…¶ç¼“å­˜ -&gt; æŸ¥è¯¢æ ¹åŸŸåã€é¡¶çº§åŸŸåã€ä»¥åŠåŸŸåæœåŠ¡å™¨ï¼Œå½“åé¢çš„æŸ¥è¯¢å¾—åˆ°ç»“æœæ—¶ï¼Œå°†ä¼šå†™å…¥æœ¬åœ°ç¼“å­˜</li>\n</ul>\n</li>\n<li>ç°åœ¨çš„ DNS æ¶æ„<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/3ba7d376ea3f43fcb761deeb78932622389661.png\" alt=\"ç°åœ¨çš„ DNS æ¶æ„\"></li>\n</ul>\n</li>\n<li><strong>ä½¿ç”¨ DNS å¯ä»¥å®ç°åŸºäºåŸŸåçš„è´Ÿè½½å‡è¡¡ï¼Œæ—¢å¯ä»¥åœ¨å†…ç½‘ï¼Œä¹Ÿå¯ä»¥åœ¨å¤–ç½‘</strong></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>å­¦è€Œä¸æ€åˆ™ç½” äº’å‹‰</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢ee</li>\n</ul>"},{"title":"ã€æœªå®Œã€‘å‰ç«¯æ€§èƒ½ç›‘æ§","date":"2020-04-16T01:40:54.000Z","description":["è®°å½• æ€§èƒ½ç›‘æ§ æ–¹é¢çš„å­¦ä¹ è¿‡ç¨‹ğŸ¤”"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- è®°å½• æ€§èƒ½ç›‘æ§ æ–¹é¢çš„å­¦ä¹ è¿‡ç¨‹ğŸ¤”\n\n<!-- more -->\n\n## å­¦ä¹ è¿‡ç¨‹\n### å¤§å‰ç«¯æ—¶ä»£å‰ç«¯å˜åŒ–\n- Gmail SPA\n- Angular/React/Vue MVVM/å·¥ç¨‹åŒ–\n- weex/react native è·¨ç«¯\n- Node å…¨æ ˆ\n\n### å‰ç«¯å˜åŒ–ç»™ç›‘æ§å¸¦æ¥äº†ä»€ä¹ˆæ ·çš„æ”¹å˜\n- ä¼ ç»Ÿç›‘æ§æ¨¡å¼èƒ½å¦ä½¿ç”¨äºæ–°çš„æŠ€æœ¯ï¼Ÿæ¯”å¦‚ PV ç»Ÿè®¡\n\t- å¯¼è‡´ PV ä¸‹é™çš„åŸå› å’Œè§£æ³•\n\t- åŸå› \n\t\t- ä¸šå†…è·¯ç”±æ›¿ä»£äº†è¯·æ±‚æ–°çš„é¡µé¢\n\t- è§£æ³•\n\t\t- å“ˆå¸Œè·¯ç”±ï¼šç›‘å¬ hash change å˜åŒ–ä¸ŠæŠ¥ PV\n\t\t- éå“ˆå¸Œè·¯ç”±(Angular): è½»é‡ hack pushState å’Œ replaceState\n\t- æ¡ˆä¾‹\n\t\t- ä¸‹æ‹‰åˆ·æ–°\n\t\t- æ»šå±åˆ†é¡µ\n\t\t- é˜¿é‡Œäº‘é‚®åå°ä¸€ç›´å¼€ç€ï¼Œæ¯å‘¨ä¸Šç™¾æ¬¡æŸ¥çœ‹\n\t\t- æœªå…³é—­çš„æµè§ˆå™¨ Ta bå‡ å°æ—¶åå†æ¬¡æµè§ˆ\n\t\t- æŸ¥æ‰¾ä¿¡æ¯æ—¶ï¼Œæµè§ˆå™¨ Tab ä¹‹é—´å¿«é€Ÿåˆ‡æ¢\n- SPAæ¨¡å¼ä¸‹é¦–å±å¦‚ä½•è®¡ç®—ï¼Ÿ\n\t- ç¬¬ä¸€é˜¶æ®µï¼šè‡ªå®šä¹‰æ‰“ç‚¹æ—¶æœŸ\n\t\t- é¡µå¤´å’Œé¦–å±domå¤„åˆ†åˆ«é€šè¿‡ new Date() æ‰“ç‚¹\n\t- ç¬¬äºŒé˜¶æ®µï¼šW3Cæ ‡å‡†æ—¶æœŸ\n\t\t- Navigaion Timing API\n\t- ç¬¬ä¸‰é˜¶æ®µï¼šSPAç››è¡Œå¯¼è‡´w3cæ ‡å‡†å¤±å»åŸæ¥çš„æ„ä¹‰\n\t- ç°é˜¶æ®µï¼šç”¨æˆ·æ„Ÿå®˜æŒ‡æ ‡FMP\n\t\t- FMPï¼šä¸»è¦å†…å®¹å¯è§æ—¶é—´\n\t\t- çŒœæƒ³ï¼šä¸»è¦å†…å®¹ = å…ƒç´ å¢é‡æœ€å¤§çš„ç‚¹ ï¼ˆçŒœæƒ³ä¸æˆç«‹ï¼‰\n\t\t\t- ä»€ä¹ˆåŸå› å¯¼è‡´çŒœæƒ³ä¸æˆç«‹ï¼Ÿ\n\t\t\t\t- å…ƒç´ æ˜¯å¦å¯è§\n\t\t\t\t- æ¯ä¸ªå…ƒç´ å¯¹é¡µé¢çš„å½±å“æ˜¯å¦ç­‰æ•ˆï¼Ÿ --> æƒé‡\n\t- ä¸‹ä¸€é˜¶æ®µï¼šW3C/paint-timing é¦–å±åŠ è½½æ—¶é—´è®¡ç®—å·²ç»åœ¨ææ¡ˆä¸­\n- è·¨ç«¯å¼€å‘ç»™ç›‘æ§å¸¦æ¥ä»€ä¹ˆæŒ‘æˆ˜ï¼Ÿ\n- å‰ç«¯ç›‘æ§çš„ä¸ŠæŠ¥æ¨¡å¼åœ¨ Node.js ç«¯æ˜¯å¦åˆç†ï¼Ÿ\n\n### å‰ç«¯ç›‘æ§çš„æœ€ä½³å®è·µ\n- ä¸»åŠ¨ç›‘æ§\n- æ€§èƒ½æ ·æœ¬åˆ†å¸ƒ & æ…¢ä¼šè¯\n\t- æ…¢ä¼šè¯è¿½è¸ª\n- æœç´¢æŠ¥é”™æ˜ç»†\n- å‡ºé”™è¡Œä¸ºè¿˜åŸ\n\n### é˜¿é‡Œäº‘ARMSå‰ç«¯ç›‘æ§ç³»ç»Ÿæ¶æ„\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/å‰ç«¯æ€§èƒ½ç›‘æ§.md","raw":"---\ntitle: ã€æœªå®Œã€‘å‰ç«¯æ€§èƒ½ç›‘æ§\ndate: 2020-04-16 09:40:54\ntags:\n- æ€§èƒ½ç›‘æ§\ncategories:\n- æ€§èƒ½ç›‘æ§\ndescription:\n- è®°å½• æ€§èƒ½ç›‘æ§ æ–¹é¢çš„å­¦ä¹ è¿‡ç¨‹ğŸ¤”\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- è®°å½• æ€§èƒ½ç›‘æ§ æ–¹é¢çš„å­¦ä¹ è¿‡ç¨‹ğŸ¤”\n\n<!-- more -->\n\n## å­¦ä¹ è¿‡ç¨‹\n### å¤§å‰ç«¯æ—¶ä»£å‰ç«¯å˜åŒ–\n- Gmail SPA\n- Angular/React/Vue MVVM/å·¥ç¨‹åŒ–\n- weex/react native è·¨ç«¯\n- Node å…¨æ ˆ\n\n### å‰ç«¯å˜åŒ–ç»™ç›‘æ§å¸¦æ¥äº†ä»€ä¹ˆæ ·çš„æ”¹å˜\n- ä¼ ç»Ÿç›‘æ§æ¨¡å¼èƒ½å¦ä½¿ç”¨äºæ–°çš„æŠ€æœ¯ï¼Ÿæ¯”å¦‚ PV ç»Ÿè®¡\n\t- å¯¼è‡´ PV ä¸‹é™çš„åŸå› å’Œè§£æ³•\n\t- åŸå› \n\t\t- ä¸šå†…è·¯ç”±æ›¿ä»£äº†è¯·æ±‚æ–°çš„é¡µé¢\n\t- è§£æ³•\n\t\t- å“ˆå¸Œè·¯ç”±ï¼šç›‘å¬ hash change å˜åŒ–ä¸ŠæŠ¥ PV\n\t\t- éå“ˆå¸Œè·¯ç”±(Angular): è½»é‡ hack pushState å’Œ replaceState\n\t- æ¡ˆä¾‹\n\t\t- ä¸‹æ‹‰åˆ·æ–°\n\t\t- æ»šå±åˆ†é¡µ\n\t\t- é˜¿é‡Œäº‘é‚®åå°ä¸€ç›´å¼€ç€ï¼Œæ¯å‘¨ä¸Šç™¾æ¬¡æŸ¥çœ‹\n\t\t- æœªå…³é—­çš„æµè§ˆå™¨ Ta bå‡ å°æ—¶åå†æ¬¡æµè§ˆ\n\t\t- æŸ¥æ‰¾ä¿¡æ¯æ—¶ï¼Œæµè§ˆå™¨ Tab ä¹‹é—´å¿«é€Ÿåˆ‡æ¢\n- SPAæ¨¡å¼ä¸‹é¦–å±å¦‚ä½•è®¡ç®—ï¼Ÿ\n\t- ç¬¬ä¸€é˜¶æ®µï¼šè‡ªå®šä¹‰æ‰“ç‚¹æ—¶æœŸ\n\t\t- é¡µå¤´å’Œé¦–å±domå¤„åˆ†åˆ«é€šè¿‡ new Date() æ‰“ç‚¹\n\t- ç¬¬äºŒé˜¶æ®µï¼šW3Cæ ‡å‡†æ—¶æœŸ\n\t\t- Navigaion Timing API\n\t- ç¬¬ä¸‰é˜¶æ®µï¼šSPAç››è¡Œå¯¼è‡´w3cæ ‡å‡†å¤±å»åŸæ¥çš„æ„ä¹‰\n\t- ç°é˜¶æ®µï¼šç”¨æˆ·æ„Ÿå®˜æŒ‡æ ‡FMP\n\t\t- FMPï¼šä¸»è¦å†…å®¹å¯è§æ—¶é—´\n\t\t- çŒœæƒ³ï¼šä¸»è¦å†…å®¹ = å…ƒç´ å¢é‡æœ€å¤§çš„ç‚¹ ï¼ˆçŒœæƒ³ä¸æˆç«‹ï¼‰\n\t\t\t- ä»€ä¹ˆåŸå› å¯¼è‡´çŒœæƒ³ä¸æˆç«‹ï¼Ÿ\n\t\t\t\t- å…ƒç´ æ˜¯å¦å¯è§\n\t\t\t\t- æ¯ä¸ªå…ƒç´ å¯¹é¡µé¢çš„å½±å“æ˜¯å¦ç­‰æ•ˆï¼Ÿ --> æƒé‡\n\t- ä¸‹ä¸€é˜¶æ®µï¼šW3C/paint-timing é¦–å±åŠ è½½æ—¶é—´è®¡ç®—å·²ç»åœ¨ææ¡ˆä¸­\n- è·¨ç«¯å¼€å‘ç»™ç›‘æ§å¸¦æ¥ä»€ä¹ˆæŒ‘æˆ˜ï¼Ÿ\n- å‰ç«¯ç›‘æ§çš„ä¸ŠæŠ¥æ¨¡å¼åœ¨ Node.js ç«¯æ˜¯å¦åˆç†ï¼Ÿ\n\n### å‰ç«¯ç›‘æ§çš„æœ€ä½³å®è·µ\n- ä¸»åŠ¨ç›‘æ§\n- æ€§èƒ½æ ·æœ¬åˆ†å¸ƒ & æ…¢ä¼šè¯\n\t- æ…¢ä¼šè¯è¿½è¸ª\n- æœç´¢æŠ¥é”™æ˜ç»†\n- å‡ºé”™è¡Œä¸ºè¿˜åŸ\n\n### é˜¿é‡Œäº‘ARMSå‰ç«¯ç›‘æ§ç³»ç»Ÿæ¶æ„\n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"å‰ç«¯æ€§èƒ½ç›‘æ§","published":1,"updated":"2020-10-27T15:21:11.265Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u8a002rfw9kfz05gcdr","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>è®°å½• æ€§èƒ½ç›‘æ§ æ–¹é¢çš„å­¦ä¹ è¿‡ç¨‹ğŸ¤”</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"å­¦ä¹ è¿‡ç¨‹\"><a href=\"#å­¦ä¹ è¿‡ç¨‹\" class=\"headerlink\" title=\"å­¦ä¹ è¿‡ç¨‹\"></a>å­¦ä¹ è¿‡ç¨‹</h2><h3 id=\"å¤§å‰ç«¯æ—¶ä»£å‰ç«¯å˜åŒ–\"><a href=\"#å¤§å‰ç«¯æ—¶ä»£å‰ç«¯å˜åŒ–\" class=\"headerlink\" title=\"å¤§å‰ç«¯æ—¶ä»£å‰ç«¯å˜åŒ–\"></a>å¤§å‰ç«¯æ—¶ä»£å‰ç«¯å˜åŒ–</h3><ul>\n<li>Gmail SPA</li>\n<li>Angular/React/Vue MVVM/å·¥ç¨‹åŒ–</li>\n<li>weex/react native è·¨ç«¯</li>\n<li>Node å…¨æ ˆ</li>\n</ul>\n<h3 id=\"å‰ç«¯å˜åŒ–ç»™ç›‘æ§å¸¦æ¥äº†ä»€ä¹ˆæ ·çš„æ”¹å˜\"><a href=\"#å‰ç«¯å˜åŒ–ç»™ç›‘æ§å¸¦æ¥äº†ä»€ä¹ˆæ ·çš„æ”¹å˜\" class=\"headerlink\" title=\"å‰ç«¯å˜åŒ–ç»™ç›‘æ§å¸¦æ¥äº†ä»€ä¹ˆæ ·çš„æ”¹å˜\"></a>å‰ç«¯å˜åŒ–ç»™ç›‘æ§å¸¦æ¥äº†ä»€ä¹ˆæ ·çš„æ”¹å˜</h3><ul>\n<li>ä¼ ç»Ÿç›‘æ§æ¨¡å¼èƒ½å¦ä½¿ç”¨äºæ–°çš„æŠ€æœ¯ï¼Ÿæ¯”å¦‚ PV ç»Ÿè®¡<ul>\n<li>å¯¼è‡´ PV ä¸‹é™çš„åŸå› å’Œè§£æ³•</li>\n<li>åŸå› <ul>\n<li>ä¸šå†…è·¯ç”±æ›¿ä»£äº†è¯·æ±‚æ–°çš„é¡µé¢</li>\n</ul>\n</li>\n<li>è§£æ³•<ul>\n<li>å“ˆå¸Œè·¯ç”±ï¼šç›‘å¬ hash change å˜åŒ–ä¸ŠæŠ¥ PV</li>\n<li>éå“ˆå¸Œè·¯ç”±(Angular): è½»é‡ hack pushState å’Œ replaceState</li>\n</ul>\n</li>\n<li>æ¡ˆä¾‹<ul>\n<li>ä¸‹æ‹‰åˆ·æ–°</li>\n<li>æ»šå±åˆ†é¡µ</li>\n<li>é˜¿é‡Œäº‘é‚®åå°ä¸€ç›´å¼€ç€ï¼Œæ¯å‘¨ä¸Šç™¾æ¬¡æŸ¥çœ‹</li>\n<li>æœªå…³é—­çš„æµè§ˆå™¨ Ta bå‡ å°æ—¶åå†æ¬¡æµè§ˆ</li>\n<li>æŸ¥æ‰¾ä¿¡æ¯æ—¶ï¼Œæµè§ˆå™¨ Tab ä¹‹é—´å¿«é€Ÿåˆ‡æ¢</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>SPAæ¨¡å¼ä¸‹é¦–å±å¦‚ä½•è®¡ç®—ï¼Ÿ<ul>\n<li>ç¬¬ä¸€é˜¶æ®µï¼šè‡ªå®šä¹‰æ‰“ç‚¹æ—¶æœŸ<ul>\n<li>é¡µå¤´å’Œé¦–å±domå¤„åˆ†åˆ«é€šè¿‡ new Date() æ‰“ç‚¹</li>\n</ul>\n</li>\n<li>ç¬¬äºŒé˜¶æ®µï¼šW3Cæ ‡å‡†æ—¶æœŸ<ul>\n<li>Navigaion Timing API</li>\n</ul>\n</li>\n<li>ç¬¬ä¸‰é˜¶æ®µï¼šSPAç››è¡Œå¯¼è‡´w3cæ ‡å‡†å¤±å»åŸæ¥çš„æ„ä¹‰</li>\n<li>ç°é˜¶æ®µï¼šç”¨æˆ·æ„Ÿå®˜æŒ‡æ ‡FMP<ul>\n<li>FMPï¼šä¸»è¦å†…å®¹å¯è§æ—¶é—´</li>\n<li>çŒœæƒ³ï¼šä¸»è¦å†…å®¹ = å…ƒç´ å¢é‡æœ€å¤§çš„ç‚¹ ï¼ˆçŒœæƒ³ä¸æˆç«‹ï¼‰<ul>\n<li>ä»€ä¹ˆåŸå› å¯¼è‡´çŒœæƒ³ä¸æˆç«‹ï¼Ÿ<ul>\n<li>å…ƒç´ æ˜¯å¦å¯è§</li>\n<li>æ¯ä¸ªå…ƒç´ å¯¹é¡µé¢çš„å½±å“æ˜¯å¦ç­‰æ•ˆï¼Ÿ â€“&gt; æƒé‡</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ä¸‹ä¸€é˜¶æ®µï¼šW3C/paint-timing é¦–å±åŠ è½½æ—¶é—´è®¡ç®—å·²ç»åœ¨ææ¡ˆä¸­</li>\n</ul>\n</li>\n<li>è·¨ç«¯å¼€å‘ç»™ç›‘æ§å¸¦æ¥ä»€ä¹ˆæŒ‘æˆ˜ï¼Ÿ</li>\n<li>å‰ç«¯ç›‘æ§çš„ä¸ŠæŠ¥æ¨¡å¼åœ¨ Node.js ç«¯æ˜¯å¦åˆç†ï¼Ÿ</li>\n</ul>\n<h3 id=\"å‰ç«¯ç›‘æ§çš„æœ€ä½³å®è·µ\"><a href=\"#å‰ç«¯ç›‘æ§çš„æœ€ä½³å®è·µ\" class=\"headerlink\" title=\"å‰ç«¯ç›‘æ§çš„æœ€ä½³å®è·µ\"></a>å‰ç«¯ç›‘æ§çš„æœ€ä½³å®è·µ</h3><ul>\n<li>ä¸»åŠ¨ç›‘æ§</li>\n<li>æ€§èƒ½æ ·æœ¬åˆ†å¸ƒ &amp; æ…¢ä¼šè¯<ul>\n<li>æ…¢ä¼šè¯è¿½è¸ª</li>\n</ul>\n</li>\n<li>æœç´¢æŠ¥é”™æ˜ç»†</li>\n<li>å‡ºé”™è¡Œä¸ºè¿˜åŸ</li>\n</ul>\n<h3 id=\"é˜¿é‡Œäº‘ARMSå‰ç«¯ç›‘æ§ç³»ç»Ÿæ¶æ„\"><a href=\"#é˜¿é‡Œäº‘ARMSå‰ç«¯ç›‘æ§ç³»ç»Ÿæ¶æ„\" class=\"headerlink\" title=\"é˜¿é‡Œäº‘ARMSå‰ç«¯ç›‘æ§ç³»ç»Ÿæ¶æ„\"></a>é˜¿é‡Œäº‘ARMSå‰ç«¯ç›‘æ§ç³»ç»Ÿæ¶æ„</h3><h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>è®°å½• æ€§èƒ½ç›‘æ§ æ–¹é¢çš„å­¦ä¹ è¿‡ç¨‹ğŸ¤”</li>\n</ul>","more":"<h2 id=\"å­¦ä¹ è¿‡ç¨‹\"><a href=\"#å­¦ä¹ è¿‡ç¨‹\" class=\"headerlink\" title=\"å­¦ä¹ è¿‡ç¨‹\"></a>å­¦ä¹ è¿‡ç¨‹</h2><h3 id=\"å¤§å‰ç«¯æ—¶ä»£å‰ç«¯å˜åŒ–\"><a href=\"#å¤§å‰ç«¯æ—¶ä»£å‰ç«¯å˜åŒ–\" class=\"headerlink\" title=\"å¤§å‰ç«¯æ—¶ä»£å‰ç«¯å˜åŒ–\"></a>å¤§å‰ç«¯æ—¶ä»£å‰ç«¯å˜åŒ–</h3><ul>\n<li>Gmail SPA</li>\n<li>Angular/React/Vue MVVM/å·¥ç¨‹åŒ–</li>\n<li>weex/react native è·¨ç«¯</li>\n<li>Node å…¨æ ˆ</li>\n</ul>\n<h3 id=\"å‰ç«¯å˜åŒ–ç»™ç›‘æ§å¸¦æ¥äº†ä»€ä¹ˆæ ·çš„æ”¹å˜\"><a href=\"#å‰ç«¯å˜åŒ–ç»™ç›‘æ§å¸¦æ¥äº†ä»€ä¹ˆæ ·çš„æ”¹å˜\" class=\"headerlink\" title=\"å‰ç«¯å˜åŒ–ç»™ç›‘æ§å¸¦æ¥äº†ä»€ä¹ˆæ ·çš„æ”¹å˜\"></a>å‰ç«¯å˜åŒ–ç»™ç›‘æ§å¸¦æ¥äº†ä»€ä¹ˆæ ·çš„æ”¹å˜</h3><ul>\n<li>ä¼ ç»Ÿç›‘æ§æ¨¡å¼èƒ½å¦ä½¿ç”¨äºæ–°çš„æŠ€æœ¯ï¼Ÿæ¯”å¦‚ PV ç»Ÿè®¡<ul>\n<li>å¯¼è‡´ PV ä¸‹é™çš„åŸå› å’Œè§£æ³•</li>\n<li>åŸå› <ul>\n<li>ä¸šå†…è·¯ç”±æ›¿ä»£äº†è¯·æ±‚æ–°çš„é¡µé¢</li>\n</ul>\n</li>\n<li>è§£æ³•<ul>\n<li>å“ˆå¸Œè·¯ç”±ï¼šç›‘å¬ hash change å˜åŒ–ä¸ŠæŠ¥ PV</li>\n<li>éå“ˆå¸Œè·¯ç”±(Angular): è½»é‡ hack pushState å’Œ replaceState</li>\n</ul>\n</li>\n<li>æ¡ˆä¾‹<ul>\n<li>ä¸‹æ‹‰åˆ·æ–°</li>\n<li>æ»šå±åˆ†é¡µ</li>\n<li>é˜¿é‡Œäº‘é‚®åå°ä¸€ç›´å¼€ç€ï¼Œæ¯å‘¨ä¸Šç™¾æ¬¡æŸ¥çœ‹</li>\n<li>æœªå…³é—­çš„æµè§ˆå™¨ Ta bå‡ å°æ—¶åå†æ¬¡æµè§ˆ</li>\n<li>æŸ¥æ‰¾ä¿¡æ¯æ—¶ï¼Œæµè§ˆå™¨ Tab ä¹‹é—´å¿«é€Ÿåˆ‡æ¢</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>SPAæ¨¡å¼ä¸‹é¦–å±å¦‚ä½•è®¡ç®—ï¼Ÿ<ul>\n<li>ç¬¬ä¸€é˜¶æ®µï¼šè‡ªå®šä¹‰æ‰“ç‚¹æ—¶æœŸ<ul>\n<li>é¡µå¤´å’Œé¦–å±domå¤„åˆ†åˆ«é€šè¿‡ new Date() æ‰“ç‚¹</li>\n</ul>\n</li>\n<li>ç¬¬äºŒé˜¶æ®µï¼šW3Cæ ‡å‡†æ—¶æœŸ<ul>\n<li>Navigaion Timing API</li>\n</ul>\n</li>\n<li>ç¬¬ä¸‰é˜¶æ®µï¼šSPAç››è¡Œå¯¼è‡´w3cæ ‡å‡†å¤±å»åŸæ¥çš„æ„ä¹‰</li>\n<li>ç°é˜¶æ®µï¼šç”¨æˆ·æ„Ÿå®˜æŒ‡æ ‡FMP<ul>\n<li>FMPï¼šä¸»è¦å†…å®¹å¯è§æ—¶é—´</li>\n<li>çŒœæƒ³ï¼šä¸»è¦å†…å®¹ = å…ƒç´ å¢é‡æœ€å¤§çš„ç‚¹ ï¼ˆçŒœæƒ³ä¸æˆç«‹ï¼‰<ul>\n<li>ä»€ä¹ˆåŸå› å¯¼è‡´çŒœæƒ³ä¸æˆç«‹ï¼Ÿ<ul>\n<li>å…ƒç´ æ˜¯å¦å¯è§</li>\n<li>æ¯ä¸ªå…ƒç´ å¯¹é¡µé¢çš„å½±å“æ˜¯å¦ç­‰æ•ˆï¼Ÿ â€“&gt; æƒé‡</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ä¸‹ä¸€é˜¶æ®µï¼šW3C/paint-timing é¦–å±åŠ è½½æ—¶é—´è®¡ç®—å·²ç»åœ¨ææ¡ˆä¸­</li>\n</ul>\n</li>\n<li>è·¨ç«¯å¼€å‘ç»™ç›‘æ§å¸¦æ¥ä»€ä¹ˆæŒ‘æˆ˜ï¼Ÿ</li>\n<li>å‰ç«¯ç›‘æ§çš„ä¸ŠæŠ¥æ¨¡å¼åœ¨ Node.js ç«¯æ˜¯å¦åˆç†ï¼Ÿ</li>\n</ul>\n<h3 id=\"å‰ç«¯ç›‘æ§çš„æœ€ä½³å®è·µ\"><a href=\"#å‰ç«¯ç›‘æ§çš„æœ€ä½³å®è·µ\" class=\"headerlink\" title=\"å‰ç«¯ç›‘æ§çš„æœ€ä½³å®è·µ\"></a>å‰ç«¯ç›‘æ§çš„æœ€ä½³å®è·µ</h3><ul>\n<li>ä¸»åŠ¨ç›‘æ§</li>\n<li>æ€§èƒ½æ ·æœ¬åˆ†å¸ƒ &amp; æ…¢ä¼šè¯<ul>\n<li>æ…¢ä¼šè¯è¿½è¸ª</li>\n</ul>\n</li>\n<li>æœç´¢æŠ¥é”™æ˜ç»†</li>\n<li>å‡ºé”™è¡Œä¸ºè¿˜åŸ</li>\n</ul>\n<h3 id=\"é˜¿é‡Œäº‘ARMSå‰ç«¯ç›‘æ§ç³»ç»Ÿæ¶æ„\"><a href=\"#é˜¿é‡Œäº‘ARMSå‰ç«¯ç›‘æ§ç³»ç»Ÿæ¶æ„\" class=\"headerlink\" title=\"é˜¿é‡Œäº‘ARMSå‰ç«¯ç›‘æ§ç³»ç»Ÿæ¶æ„\"></a>é˜¿é‡Œäº‘ARMSå‰ç«¯ç›‘æ§ç³»ç»Ÿæ¶æ„</h3><h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"åŸºäºKMPçš„FSMå¤„ç†æœªçŸ¥ pattern","date":"2020-05-16T07:10:28.000Z","description":["åŸºäºKMPçš„FSM pattern"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- å‡†å¤‡æ•´ä¸€ä¸‹ â€œåŸºäºKMPçš„FSMå¤„ç† patternâ€ å•¦ï¼Œç¥æˆ‘æˆåŠŸ ğŸ™‹\n- è¿™é‡Œå‘¢~ å‡†å¤‡åˆ†ä¸ºä¸‰æ­¥å»å®ç°\n\t- FSM å¤„ç†å­—ç¬¦ä¸²\n\t- KMP ç®—æ³•æ¦‚è¿°\n\t- åŸºäº KMP çš„ FSM å¤„ç† pattern çš„å®ç°\n\n<!-- more -->\n\n## å®è·µè®°å½•\n\n### FSM å¤„ç†å­—ç¬¦ä¸²\n#### FSM æ¦‚å¿µ\n- æ¯ä¸€ä¸ªçŠ¶æ€éƒ½æ˜¯ä¸€ä¸ªæœºå™¨\n\t- åœ¨æ¯ä¸€ä¸ªæœºå™¨é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åšè®¡ç®—ã€å­˜å‚¨ã€è¾“å‡º\n\t- æ‰€æœ‰çš„è¿™äº›æœºå™¨æ¥å—çš„è¾“å…¥æ˜¯ä¸€è‡´çš„\n\t- çŠ¶æ€æœºçš„æ¯ä¸€ä¸ªæœºå™¨æœ¬èº«æ²¡æœ‰çŠ¶æ€ï¼Œå¦‚æœæˆ‘ä»¬ç”¨å‡½æ•°æ¥è¡¨ç¤ºçš„è¯ï¼Œå®ƒåº”è¯¥æ˜¯çº¯å‡½æ•°ï¼ˆæ— å‰¯ä½œç”¨ï¼‰\n- æ¯ä¸€ä¸ªæœºå™¨çŸ¥é“ä¸‹ä¸€ä¸ªçŠ¶æ€\n\t- æ¯ä¸ªæœºå™¨éƒ½æœ‰ç¡®å®šçš„ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆMooreï¼‰\n\t- æ¯ä¸ªæœºå™¨æ ¹æ®è¾“å…¥å†³å®šä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆMealyï¼‰\n\n#### åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdef\n- ä¸ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdefæ‰¾åˆ°å­—ç¬¦ä¸² abcdef\n\n\t```javascript\n\t  function match(string) {\n\t    let foundA = false\n\t    let foundB = false\n\t    let foundC = false\n\t    let foundD = false\n\t    let foundE = false\n\t    for (let char of string) {\n\t      if (char == 'a')\n\t        foundA = true\n\t      else if (foundA && char == 'b')\n\t        foundB = true\n\t      else if (foundB && char == 'c')\n\t        foundC = true\n\t      else if (foundC && char == 'd')\n\t        foundD = true\n\t      else if (foundD && char == 'e')\n\t        foundE = true\n\t      else if (foundD && char == 'f')\n\t        return true\n\t      else {\n\t        let foundA = false\n\t        let foundB = false\n\t        let foundC = false\n\t        let foundD = false\n\t        let foundE = false\n\t      }\n\t    }\n\t    return false\n\t  }\n\t  console.log(match(\"I aabcdefghm grood.\"))\n\t  console.log(match(\"I aacdefghm grood.\"))\n\t```\n\t- è¿è¡Œç»“æœ\n\t\t- ![ç¬¬ä¸€ç‰ˆè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/40a9e9395d783093ae5e9af1bc2d081c58822.png)\n\t- ç¼ºç‚¹ï¼š\n\t\t1. ä¸å¯æ‰©å±•ä»£ç è¾ƒå¤š\n\t\t2. if else å¤šæ¬¡åˆ¤æ–­\n\n- ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdef \n\n\t```javascript\n\t  function match(string) {\n\t    let state = start\n\t    for (let char of string) {\n\t      state = state(char)\n\t    }\n\t    return state === end\n\t  }\n\t  function start(char) {\n\t    if (char === 'a')\n\t      return findA\n\t    else\n\t      return start\n\t  }\n\t  function end(char) {\n\t    return end\n\t  }\n\t  function findA(char) {\n\t    if (char === 'b')\n\t      return findB\n\t    else\n\t      return start(char)\n\t  }\n\t  function findB(char) {\n\t    if (char === 'c')\n\t      return findC\n\t    else\n\t      return start(char)\n\t  }\n\t  function findC(char) {\n\t    if (char === 'd')\n\t      return findD\n\t    else\n\t      return start(char)\n\t  }\n\t  function findD(char) {\n\t    if (char === 'e')\n\t      return findE\n\t    else\n\t      return start(char)\n\t  }\n\t  function findE(char) {\n\t    if (char === 'f')\n\t      return end\n\t    else\n\t      return start\n\t  }\n\t  console.log(match(\"I aabcdefghm grood.\"))\n\t  console.log(match(\"I aacdefghm grood.\"))\n\t```\n\t- è¿è¡Œç»“æœ\n\t\t- ![FSM å¤„ç†å­—ç¬¦ä¸² abcdef](http://p0.meituan.net/myvideodistribute/74431b7630e0a9f8b3aeb65907987b9a80908.png)\n\n### JS ä¸­çš„æœ‰é™çŠ¶æ€æœº\n\n```javascript\n// æ¯ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€\nfunction state(input) { // å‡½æ•°å‚æ•°å°±æ˜¯è¾“å…¥\n  // åœ¨å‡½æ•°ä¸­ï¼Œå¯ä»¥è‡ªç”±åœ°ç¼–å†™ä»£ç ï¼Œå¤„ç†æ¯ä¸ªçŠ¶æ€çš„é€»è¾‘\n  return next;\n}\n\n/** ä»¥ä¸‹æ˜¯è°ƒç”¨ **/\nwhile(input) {\n  // è·å–è¾“å…¥\n  state = state(input) // æŠŠçŠ¶æ€æœºçš„è¿”å›å€¼ä½œä¸ºä¸‹ä¸€ä¸ªçŠ¶æ€\n}\n```\n\n#### ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcabx\n\n```javascript\n\n  function match(string) {\n    let state = start\n    for (let char of string) {\n      state = state(char)\n    }\n    return state === end\n  }\n  function start(char) {\n    if (char === 'a')\n      return findA\n    else\n      return start\n  }\n  function end(char) {\n    return end\n  }\n  function findA(char) {\n    if (char === 'b')\n      return findB\n    else\n      return start(char)\n  }\n  function findB(char) {\n    if (char === 'c')\n      return findC\n    else\n      return start(char)\n  }\n  function findC(char) {\n    if (char === 'a')\n      return findA2\n    else\n      return start(char)\n  }\n  function findA2(char) {\n    if (char === 'b')\n      return findB2\n    else\n      return start(char)\n  }\n  function findB2(char) {\n    if (char === 'x')\n      return end\n    else\n      return findB(char)\n  }\n  match(\"I aabcabcabx grood.\")\n```\n- è¿è¡Œç»“æœ\n\t- ![FSM æ‰¾åˆ° abcabx](http://p1.meituan.net/myvideodistribute/c09493a569d2d4e21d1600ebd9fcb84589625.png)\n\n#### ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² ababx\n\n```javascript\n  function match(string) {\n    let state = start\n    for (let char of string) {\n      state = state(char)\n    }\n    return state === end\n  }\n  function start(char) {\n    if (char === 'a')\n      return findA1\n    else\n      return start\n  }\n  function end(char) {\n    return end\n  }\n  function findA1(char) {\n    if (char === 'b')\n      return findB1\n    else\n      return start(char)\n  }\n  function findB1(char) {\n    if (char === 'a')\n      return findA2\n    else\n      return start(char)\n  }\n  function findA2(char) {\n    if (char === 'b')\n      return findB2\n    else\n      return start(char)\n  }\n  function findB2(char) {\n    if (char === 'a')\n      return findA3\n    else\n      return start(char)\n  }\n  function findA3(char) {\n    if (char === 'b')\n      return findB3\n    else\n      return start(char)\n  }\n  function findB3(char) {\n    if (char === 'x')\n      return end\n    else\n      return findB2(char)\n  }\n  console.log(match(\"I aababababx grood.\"))\n  console.log(match(\"I aabababababx grood.\"))\n  console.log(match(\"I aababaeababx grood.\"))\n  console.log(match(\"I aabababaabx grood.\"))\n```\n- è¿è¡Œç»“æœ\n\t- ![abababx](http://p0.meituan.net/myvideodistribute/6c000a617a3f594e24bf99c52d4d0848101059.png)\n\nã€é‚£æˆ‘ä»¬è¯¥å¦‚ä½•åˆ©ç”¨ FSM å¤„ç†æœªçŸ¥ pattern å‘¢ï¼ŸğŸ¤”\n\nã€å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜å°±æ˜¯åœ¨ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²Tä¸­æœç´¢æŸä¸ªæ¨¡å¼å­—ç¬¦ä¸²Pçš„æ‰€æœ‰å‡ºç°ä½ç½®ã€‚\n\n### KMP ç®—æ³•æ¦‚è¿°\n#### KMP æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\n- å‡å¦‚ pattern ä¸º ABABCABAA\n\t- å‰ç¼€ä¾æ¬¡ä¸º A AB ABA ABAB ABABC ABABCA ABABCAB ABABCABA\n\t- åç¼€ä¾æ¬¡ä¸º A AA BAA ABAA CABAA BCABAA ABCABAA BABCABAA\n- é‚£ä¹ˆå®ƒçš„æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦ä¸ºå¤šå°‘å‘¢ï¼Ÿ\n\t- A --> 0\n\t\t- æ— å‰ç¼€\n\t\t- æ— åç¼€\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼š\"\"ï¼Œlen = 0\n\t- AB --> 0\n\t\t- å‰ç¼€ A\n\t\t- åç¼€ B\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼š\"\"ï¼Œlen = 0\n\t- ABA --> 1\n\t\t- å‰ç¼€ A AB\n\t\t- åç¼€ A BA \n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼šAï¼Œlen = 1\n\t- ABAB --> 2\n\t\t- å‰ç¼€ A AB ABA\n\t\t- åç¼€ B AB BAB \n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼šABï¼Œlen = 2\n\t- ABABC --> 0\n\t\t- å‰ç¼€ A AB ABA ABAB\n\t\t- åç¼€ C BC ABC BABC\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼š\"\"ï¼Œlen = 0\n\t- ABABCA --> 1\n\t\t- å‰ç¼€ A AB ABA ABAB ABABC\n\t\t- åç¼€ A CA BCA ABCA BABCA\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼šAï¼Œlen = 1\n\t- ABABCAB --> 2\n\t\t- å‰ç¼€ A AB ABA ABAB ABABC ABABCA\n\t\t- åç¼€ B AB CAB BCAB ABCAB BACAB\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼šABï¼Œlen = 2\n\t- ABABCABA --> 3\n\t\t- å‰ç¼€ A AB ABA ABAB ABABC ABABCA ABABCAB\n\t\t- åç¼€ A BA ABA CABA BCABA ABCABA BABCABA\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼šABAï¼Œlen = 3\n\t- ABABCABAA --> 1\n\t\t- å‰ç¼€ A AB ABA ABAB ABABC ABABCA ABABCAB ABABCABA\n\t\t- åç¼€ A AA BAA ABAA CABAA BCABAA ABCABAA BABCABAA\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼šAï¼Œlen = 1\n- å› æ­¤æˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºï¼Œæœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦ä¸º\n\t- [0, 0, 1, 2, 0, 1, 2, 3, 1] å¯¹åº” pattern å­—ç¬¦ä¸²æ•°ç»„\n\t- [A, B, A, B, C, A, B, A, A]\n\t- [0, 1, 2, 3, 4, 5, 6, 7, 8]\n- é‚£ä¹ˆæ ¹æ®\n\t- A --> len = 0, i = 0\n\t- AB --> len = 0, i = 1\n\t- <u>A</u>B<u>A</u> --> len = 1, i = 2, pattern[i] = A, pattern[ä¸Šä¸€ä¸ªlen] = A\n\t- <u>AB</u><u>AB</u> --> len = 2, i = 3, pattern[i] = B, pattern[ä¸Šä¸€ä¸ªlen] = B\n\t- ABABC --> len = 0, i = 4\n\t- <u>A</u>BABC<u>A</u> --> len = 1, i = 5, pattern[i] = A, pattern[ä¸Šä¸€ä¸ªlen] = A\n\t- <u>AB</u>ABC<u>AB</u> --> len = 2, i = 6, pattern[i] = B, pattern[ä¸Šä¸€ä¸ªlen] = B\n\t- <u>ABA</u>BC<u>ABA</u> --> len = 3, i = 7, pattern[i] = A, pattern[ä¸Šä¸€ä¸ªlen] = A\n\t- ABABCABAA --> len = 1, i = 8\n\t- æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿå¾—åˆ°\n\t\t\n\t\t```javascript\n\t\tif (pattern[i] === pattern[len]) {\n\t        len ++;\n\t        prefix[i] = len;\n\t        i ++;\n\t    }\n\t\t```\n\t- é™¤æ­¤ä¹‹å¤–çš„æƒ…å†µå‘¢ï¼Ÿæ¯”å¦‚æœ€åçš„ ABABCABAA --> len = 1, i = 8\n\t\t- [0, 1, 2, 3, 4, 5, 6, 7, 8] å­—ç¬¦ä¸²æ•°ç»„ä¸‹æ ‡ç´¢å¼•\n\t\t- [A, B, A, B, C, A, B, A, A] å­—ç¬¦ä¸²æ•°ç»„\n\t\t- [0, 0, 1, 2, 0, 1, 2, 3, ?] prefixTable\n\t\t\t- æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå‰ä¸€ä¸ªå­—ç¬¦ A å¯¹åº”çš„ prefix ä¸º 3ï¼Œå¯¹åº”çš„pattern[3]ä¸º Bï¼ˆprefix[len - 1] === Bï¼‰ï¼ŒBçš„å‰ä¸€ä¸ªå­—ç¬¦ A å¯¹åº”çš„ prefix ä¸º 1ï¼ˆlen = prefix[len - 1] --> 0ï¼‰ï¼Œpattern[1] ä¸º Aï¼Œå†æ‰§è¡Œä¸Šå±‚ä»£ç  prefix[8] === len[0]\n\t\n\t\n- KMP æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦å®ç°\n\n\t```javascript\n\tfunction prefixTable(pattern, prefix, n) {\n\t    prefix[0] = 0; // prefix åˆå§‹\n\t    let len = 0; // æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\n\t    let i = 1;\n\t    while(i < n) {\n\t      if (pattern[i] === pattern[len]) {\n\t        len ++;\n\t        prefix[i] = len;\n\t        i ++;\n\t      } else {\n\t        if (len > 0) {\n\t          len = prefix[len - 1]\n\t        }\n\t        else {\n\t          prefix[i] = len\n\t          i ++\n\t        }\n\t      }\n\t      console.log(prefix)\n\t    }\n\t  }\n\t```\n- è¿è¡Œç»“æœ\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/354d6d33c10aa23f150c26a68a09f19084870.png)\n- å†æ·»ä¸€å±‚å¤„ç†ï¼Œå› ä¸ºå‰ç¼€æ˜¯ä¸ä¸ä¼šåŒ…æ‹¬è‡ªå·±æœ¬èº«çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ•´ä½“åç§»ä¸€ä½ï¼Œå¹¶ä¸”ï¼Œç©ºå‡ºæ¥çš„ç¬¬ä¸€é¡¹ç½®ä¸º -1\n\n\t```javascript\n\tfunction movePrefixTable(prefix, n) {\n\t    for (let i = n - 1; i > 0; i --) {\n\t      prefix[i] = prefix[i - 1]\n\t    }\n\t    prefix[0] = -1\n\t}\n\t```\n\t\n#### KMP å¤„ç† pattern\n\n```javascript\n  function prefixTable(pattern, prefix, n) {\n    prefix[0] = 0; // prefix åˆå§‹\n    let len = 0; // æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\n    let i = 1;\n    while(i < n) {\n      if (pattern[i] === pattern[len]) {\n        len ++;\n        prefix[i] = len;\n        i ++;\n      } else {\n        if (len > 0) {\n          len = prefix[len - 1]\n        }\n        else {\n          prefix[i] = len\n          i ++\n        }\n      }\n      console.log(prefix)\n    }\n  }\n\n  function movePrefixTable(prefix, n) {\n    for (let i = n - 1; i > 0; i --) {\n      prefix[i] = prefix[i - 1]\n    }\n    prefix[0] = -1\n  }\n\n  function kmpSearch(text, pattern) {\n    const patternArray = pattern.split(\"\")\n    let patternLen = patternArray.length\n    const textArray = text.split(\"\")\n    let textLen = textArray.length\n\n    let prefixArray = new Array(patternLen)\n    prefixTable(patternArray, prefixArray, patternLen)\n    movePrefixTable(prefixArray, patternLen)\n\n    // console.log('prefixTemp', prefixTemp)\n    console.log('prefixArray', prefixArray)\n\n    // textArray len m\n    // pattern len n\n\n    let i = 0, j = 0;\n    while(i < textLen) {\n      if (j === patternLen - 1 && textArray[i] === patternArray[j]) {\n        console.log(\"Found pattern at \", i - j)\n        j = prefixArray[j]\n      }\n      if (textArray[i] === patternArray[j]) {\n        i ++;\n        j ++;\n      } else {\n        j = prefixArray[j]\n        if (j === -1) {\n          i ++;\n          j ++;\n        }\n      }\n    }\n  }\n\n  kmpSearch(\"ABABABABCABAAB\", \"ABABCABAA\")\n```\n- è¿è¡Œç»“æœ\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/f4273ce6b530673651ce3a9f513c730760549.png)\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/214a8fcf81cda92716e44270f816392663018.png)\n\n### åŸºäº KMP çš„ FSM å¤„ç† pattern\n\n```javascript\n\n\n  let textArray = [] // æœªçŸ¥å­—ç¬¦ä¸²\n  let text = \"\"\n  let textLen = 0 // æœªçŸ¥å­—ç¬¦ä¸²é•¿åº¦\n  let patternArray = [] // pattern å­—ç¬¦ä¸²\n  let pattern = \"\"\n  let patternLen // æœªçŸ¥ pattern é•¿åº¦\n  let prefixArray = null // KMP prefix table\n  let len = 0 // æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\n\n\n  function initState() {\n    patternArray = pattern.split(\"\")\n    patternLen = patternArray.length\n    textArray = text.split(\"\")\n    textLen = textArray.length\n    prefixArray = new Array(patternLen)\n    prefixArray[0] = 0\n    let len = 0\n    return patteranStart\n  }\n\n\n  function patteranStart(i) {\n    if (patternArray[i] === patternArray[len]) {\n      len++;\n      prefixArray[i] = len;\n      return { needAdd: true };\n    } else {\n      if (len > 0) {\n        len = prefixArray[len - 1]\n        return { needAdd: false }\n      }\n      else {\n        prefixArray[i] = len\n        return { needAdd: true }\n      }\n    }\n    if (i ===  patternLen) {\n      return movePrefixTable\n    }\n  }\n\n\n  function movePrefixTable() {\n    for (let i = patternLen - 1; i > 0; i--) {\n      prefixArray[i] = prefixArray[i - 1]\n    }\n    prefixArray[0] = -1\n    return KMPSearch\n  }\n\n\n  function KMPSearch(i, j) {\n    if (j === patternLen - 1 && textArray[i] === patternArray[j]) {\n      j = prefixArray[j]\n      return { iNeedAdd: false, jNeedAdd: false, isMatched: true }\n    }\n    if (textArray[i] === patternArray[j]) {\n      return { iNeedAdd: true, jNeedAdd: true, isMatched: false }\n    } else {\n      j = prefixArray[j]\n      if (j === -1) {\n        return { iNeedAdd: true, jNeedAdd: true, isMatched: false }\n      }\n    }\n    return { iNeedAdd: true, jNeedAdd: false, isMatched: false }\n  }\n  \n  const STATUS_MAP = {\n    \"init\": initState,\n    \"prefixtable\": patteranStart,\n    \"movePrefixTable\": movePrefixTable,\n    \"KMPSearch\": KMPSearch\n  }\n\n  function match(_text, _pattern) {\n    text = _text\n    pattern = _pattern\n\n    let patternState = initState\n    let STATUS_MAP_KEYS = Object.keys(STATUS_MAP)\n\n    for (let status = 0; status < STATUS_MAP_KEYS.length; status++) {\n      patternState = STATUS_MAP[STATUS_MAP_KEYS[status]]\n      if (STATUS_MAP_KEYS[status] === \"init\") {\n\n        patternState()\n\n      } else if (STATUS_MAP_KEYS[status] === \"prefixtable\") {\n\n        let res = { len: 0, needAdd: true }\n        for (let i = 1; i <= patternLen; res.needAdd && i++) {\n          res = patternState(i)\n        }\n\n      } else if (STATUS_MAP_KEYS[status] === \"movePrefixTable\") {\n\n        patternState()\n\n      } else if (STATUS_MAP_KEYS[status] === \"KMPSearch\") {\n\n        let kmpSearchRes = { iNeedAdd: false, jNeedAdd: false, isMatched: false }\n        for (let i = 0, j = 0; i < textLen;) {\n          kmpSearchRes = patternState(i, j)\n          if (kmpSearchRes.isMatched) {\n            console.log(\"First Found pattern at \", i - j)\n            return kmpSearchRes.isMatched\n          }\n          if (kmpSearchRes.iNeedAdd)\n            i++\n          if (kmpSearchRes.jNeedAdd)\n            j++\n        }\n        return kmpSearchRes.isMatched\n\n      }\n    }\n  }\n\n  match(\"ABABABABCABAAB\", \"ABABCABAA\")\n```\n\n- è¿è¡Œç»“æœ\n\t- ![åŸºäº KMP çš„ FSM å¤„ç† pattern è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/7079d40d337c97ae742c21e0f7a2f87320359.png)\n\n\t\n## å‚è€ƒ\n- [KMP ç®—æ³•è§†é¢‘è®²è§£](https://www.bilibili.com/video/BV1Px411z7Yo)\n- [KMP-æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦](http://www.ruanyifeng.com/blog/2013/05/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html)\n\n\n\n## å†™åœ¨åé¢\n- æ„Ÿè°¢åœ¨ KMP ç®—æ³•æŠ˜è…¾æ—¶ï¼Œæä¾›å¸®åŠ©çš„ ç”°ç¥å¤§å¤§ã€ ğŸ¤« ç­‰æˆ‘æœ‰ä»–è”ç³»æ–¹å¼äº†ï¼Œæˆ‘æ‚„æ‚„åŒæ­¥ç»™ä½ ä»¬\n- å­¦è€Œä¸æ€åˆ™ç½”\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","source":"_posts/åŸºäºKMPçš„FSMå¤„ç†å­—ç¬¦ä¸².md","raw":"---\ntitle: åŸºäºKMPçš„FSMå¤„ç†æœªçŸ¥ pattern\ndate: 2020-05-16 15:10:28\ntags: \n- ç®—æ³•\ncategories:\n- ç®—æ³•\ndescription:\n- åŸºäºKMPçš„FSM pattern\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n## å†™åœ¨å‰é¢\n- å‡†å¤‡æ•´ä¸€ä¸‹ â€œåŸºäºKMPçš„FSMå¤„ç† patternâ€ å•¦ï¼Œç¥æˆ‘æˆåŠŸ ğŸ™‹\n- è¿™é‡Œå‘¢~ å‡†å¤‡åˆ†ä¸ºä¸‰æ­¥å»å®ç°\n\t- FSM å¤„ç†å­—ç¬¦ä¸²\n\t- KMP ç®—æ³•æ¦‚è¿°\n\t- åŸºäº KMP çš„ FSM å¤„ç† pattern çš„å®ç°\n\n<!-- more -->\n\n## å®è·µè®°å½•\n\n### FSM å¤„ç†å­—ç¬¦ä¸²\n#### FSM æ¦‚å¿µ\n- æ¯ä¸€ä¸ªçŠ¶æ€éƒ½æ˜¯ä¸€ä¸ªæœºå™¨\n\t- åœ¨æ¯ä¸€ä¸ªæœºå™¨é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åšè®¡ç®—ã€å­˜å‚¨ã€è¾“å‡º\n\t- æ‰€æœ‰çš„è¿™äº›æœºå™¨æ¥å—çš„è¾“å…¥æ˜¯ä¸€è‡´çš„\n\t- çŠ¶æ€æœºçš„æ¯ä¸€ä¸ªæœºå™¨æœ¬èº«æ²¡æœ‰çŠ¶æ€ï¼Œå¦‚æœæˆ‘ä»¬ç”¨å‡½æ•°æ¥è¡¨ç¤ºçš„è¯ï¼Œå®ƒåº”è¯¥æ˜¯çº¯å‡½æ•°ï¼ˆæ— å‰¯ä½œç”¨ï¼‰\n- æ¯ä¸€ä¸ªæœºå™¨çŸ¥é“ä¸‹ä¸€ä¸ªçŠ¶æ€\n\t- æ¯ä¸ªæœºå™¨éƒ½æœ‰ç¡®å®šçš„ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆMooreï¼‰\n\t- æ¯ä¸ªæœºå™¨æ ¹æ®è¾“å…¥å†³å®šä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆMealyï¼‰\n\n#### åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdef\n- ä¸ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdefæ‰¾åˆ°å­—ç¬¦ä¸² abcdef\n\n\t```javascript\n\t  function match(string) {\n\t    let foundA = false\n\t    let foundB = false\n\t    let foundC = false\n\t    let foundD = false\n\t    let foundE = false\n\t    for (let char of string) {\n\t      if (char == 'a')\n\t        foundA = true\n\t      else if (foundA && char == 'b')\n\t        foundB = true\n\t      else if (foundB && char == 'c')\n\t        foundC = true\n\t      else if (foundC && char == 'd')\n\t        foundD = true\n\t      else if (foundD && char == 'e')\n\t        foundE = true\n\t      else if (foundD && char == 'f')\n\t        return true\n\t      else {\n\t        let foundA = false\n\t        let foundB = false\n\t        let foundC = false\n\t        let foundD = false\n\t        let foundE = false\n\t      }\n\t    }\n\t    return false\n\t  }\n\t  console.log(match(\"I aabcdefghm grood.\"))\n\t  console.log(match(\"I aacdefghm grood.\"))\n\t```\n\t- è¿è¡Œç»“æœ\n\t\t- ![ç¬¬ä¸€ç‰ˆè¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/40a9e9395d783093ae5e9af1bc2d081c58822.png)\n\t- ç¼ºç‚¹ï¼š\n\t\t1. ä¸å¯æ‰©å±•ä»£ç è¾ƒå¤š\n\t\t2. if else å¤šæ¬¡åˆ¤æ–­\n\n- ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdef \n\n\t```javascript\n\t  function match(string) {\n\t    let state = start\n\t    for (let char of string) {\n\t      state = state(char)\n\t    }\n\t    return state === end\n\t  }\n\t  function start(char) {\n\t    if (char === 'a')\n\t      return findA\n\t    else\n\t      return start\n\t  }\n\t  function end(char) {\n\t    return end\n\t  }\n\t  function findA(char) {\n\t    if (char === 'b')\n\t      return findB\n\t    else\n\t      return start(char)\n\t  }\n\t  function findB(char) {\n\t    if (char === 'c')\n\t      return findC\n\t    else\n\t      return start(char)\n\t  }\n\t  function findC(char) {\n\t    if (char === 'd')\n\t      return findD\n\t    else\n\t      return start(char)\n\t  }\n\t  function findD(char) {\n\t    if (char === 'e')\n\t      return findE\n\t    else\n\t      return start(char)\n\t  }\n\t  function findE(char) {\n\t    if (char === 'f')\n\t      return end\n\t    else\n\t      return start\n\t  }\n\t  console.log(match(\"I aabcdefghm grood.\"))\n\t  console.log(match(\"I aacdefghm grood.\"))\n\t```\n\t- è¿è¡Œç»“æœ\n\t\t- ![FSM å¤„ç†å­—ç¬¦ä¸² abcdef](http://p0.meituan.net/myvideodistribute/74431b7630e0a9f8b3aeb65907987b9a80908.png)\n\n### JS ä¸­çš„æœ‰é™çŠ¶æ€æœº\n\n```javascript\n// æ¯ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€\nfunction state(input) { // å‡½æ•°å‚æ•°å°±æ˜¯è¾“å…¥\n  // åœ¨å‡½æ•°ä¸­ï¼Œå¯ä»¥è‡ªç”±åœ°ç¼–å†™ä»£ç ï¼Œå¤„ç†æ¯ä¸ªçŠ¶æ€çš„é€»è¾‘\n  return next;\n}\n\n/** ä»¥ä¸‹æ˜¯è°ƒç”¨ **/\nwhile(input) {\n  // è·å–è¾“å…¥\n  state = state(input) // æŠŠçŠ¶æ€æœºçš„è¿”å›å€¼ä½œä¸ºä¸‹ä¸€ä¸ªçŠ¶æ€\n}\n```\n\n#### ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcabx\n\n```javascript\n\n  function match(string) {\n    let state = start\n    for (let char of string) {\n      state = state(char)\n    }\n    return state === end\n  }\n  function start(char) {\n    if (char === 'a')\n      return findA\n    else\n      return start\n  }\n  function end(char) {\n    return end\n  }\n  function findA(char) {\n    if (char === 'b')\n      return findB\n    else\n      return start(char)\n  }\n  function findB(char) {\n    if (char === 'c')\n      return findC\n    else\n      return start(char)\n  }\n  function findC(char) {\n    if (char === 'a')\n      return findA2\n    else\n      return start(char)\n  }\n  function findA2(char) {\n    if (char === 'b')\n      return findB2\n    else\n      return start(char)\n  }\n  function findB2(char) {\n    if (char === 'x')\n      return end\n    else\n      return findB(char)\n  }\n  match(\"I aabcabcabx grood.\")\n```\n- è¿è¡Œç»“æœ\n\t- ![FSM æ‰¾åˆ° abcabx](http://p1.meituan.net/myvideodistribute/c09493a569d2d4e21d1600ebd9fcb84589625.png)\n\n#### ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² ababx\n\n```javascript\n  function match(string) {\n    let state = start\n    for (let char of string) {\n      state = state(char)\n    }\n    return state === end\n  }\n  function start(char) {\n    if (char === 'a')\n      return findA1\n    else\n      return start\n  }\n  function end(char) {\n    return end\n  }\n  function findA1(char) {\n    if (char === 'b')\n      return findB1\n    else\n      return start(char)\n  }\n  function findB1(char) {\n    if (char === 'a')\n      return findA2\n    else\n      return start(char)\n  }\n  function findA2(char) {\n    if (char === 'b')\n      return findB2\n    else\n      return start(char)\n  }\n  function findB2(char) {\n    if (char === 'a')\n      return findA3\n    else\n      return start(char)\n  }\n  function findA3(char) {\n    if (char === 'b')\n      return findB3\n    else\n      return start(char)\n  }\n  function findB3(char) {\n    if (char === 'x')\n      return end\n    else\n      return findB2(char)\n  }\n  console.log(match(\"I aababababx grood.\"))\n  console.log(match(\"I aabababababx grood.\"))\n  console.log(match(\"I aababaeababx grood.\"))\n  console.log(match(\"I aabababaabx grood.\"))\n```\n- è¿è¡Œç»“æœ\n\t- ![abababx](http://p0.meituan.net/myvideodistribute/6c000a617a3f594e24bf99c52d4d0848101059.png)\n\nã€é‚£æˆ‘ä»¬è¯¥å¦‚ä½•åˆ©ç”¨ FSM å¤„ç†æœªçŸ¥ pattern å‘¢ï¼ŸğŸ¤”\n\nã€å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜å°±æ˜¯åœ¨ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²Tä¸­æœç´¢æŸä¸ªæ¨¡å¼å­—ç¬¦ä¸²Pçš„æ‰€æœ‰å‡ºç°ä½ç½®ã€‚\n\n### KMP ç®—æ³•æ¦‚è¿°\n#### KMP æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\n- å‡å¦‚ pattern ä¸º ABABCABAA\n\t- å‰ç¼€ä¾æ¬¡ä¸º A AB ABA ABAB ABABC ABABCA ABABCAB ABABCABA\n\t- åç¼€ä¾æ¬¡ä¸º A AA BAA ABAA CABAA BCABAA ABCABAA BABCABAA\n- é‚£ä¹ˆå®ƒçš„æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦ä¸ºå¤šå°‘å‘¢ï¼Ÿ\n\t- A --> 0\n\t\t- æ— å‰ç¼€\n\t\t- æ— åç¼€\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼š\"\"ï¼Œlen = 0\n\t- AB --> 0\n\t\t- å‰ç¼€ A\n\t\t- åç¼€ B\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼š\"\"ï¼Œlen = 0\n\t- ABA --> 1\n\t\t- å‰ç¼€ A AB\n\t\t- åç¼€ A BA \n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼šAï¼Œlen = 1\n\t- ABAB --> 2\n\t\t- å‰ç¼€ A AB ABA\n\t\t- åç¼€ B AB BAB \n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼šABï¼Œlen = 2\n\t- ABABC --> 0\n\t\t- å‰ç¼€ A AB ABA ABAB\n\t\t- åç¼€ C BC ABC BABC\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼š\"\"ï¼Œlen = 0\n\t- ABABCA --> 1\n\t\t- å‰ç¼€ A AB ABA ABAB ABABC\n\t\t- åç¼€ A CA BCA ABCA BABCA\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼šAï¼Œlen = 1\n\t- ABABCAB --> 2\n\t\t- å‰ç¼€ A AB ABA ABAB ABABC ABABCA\n\t\t- åç¼€ B AB CAB BCAB ABCAB BACAB\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼šABï¼Œlen = 2\n\t- ABABCABA --> 3\n\t\t- å‰ç¼€ A AB ABA ABAB ABABC ABABCA ABABCAB\n\t\t- åç¼€ A BA ABA CABA BCABA ABCABA BABCABA\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼šABAï¼Œlen = 3\n\t- ABABCABAA --> 1\n\t\t- å‰ç¼€ A AB ABA ABAB ABABC ABABCA ABABCAB ABABCABA\n\t\t- åç¼€ A AA BAA ABAA CABAA BCABAA ABCABAA BABCABAA\n\t\t- æœ€é•¿å…¬å…±å‰åç¼€ï¼šAï¼Œlen = 1\n- å› æ­¤æˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºï¼Œæœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦ä¸º\n\t- [0, 0, 1, 2, 0, 1, 2, 3, 1] å¯¹åº” pattern å­—ç¬¦ä¸²æ•°ç»„\n\t- [A, B, A, B, C, A, B, A, A]\n\t- [0, 1, 2, 3, 4, 5, 6, 7, 8]\n- é‚£ä¹ˆæ ¹æ®\n\t- A --> len = 0, i = 0\n\t- AB --> len = 0, i = 1\n\t- <u>A</u>B<u>A</u> --> len = 1, i = 2, pattern[i] = A, pattern[ä¸Šä¸€ä¸ªlen] = A\n\t- <u>AB</u><u>AB</u> --> len = 2, i = 3, pattern[i] = B, pattern[ä¸Šä¸€ä¸ªlen] = B\n\t- ABABC --> len = 0, i = 4\n\t- <u>A</u>BABC<u>A</u> --> len = 1, i = 5, pattern[i] = A, pattern[ä¸Šä¸€ä¸ªlen] = A\n\t- <u>AB</u>ABC<u>AB</u> --> len = 2, i = 6, pattern[i] = B, pattern[ä¸Šä¸€ä¸ªlen] = B\n\t- <u>ABA</u>BC<u>ABA</u> --> len = 3, i = 7, pattern[i] = A, pattern[ä¸Šä¸€ä¸ªlen] = A\n\t- ABABCABAA --> len = 1, i = 8\n\t- æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿå¾—åˆ°\n\t\t\n\t\t```javascript\n\t\tif (pattern[i] === pattern[len]) {\n\t        len ++;\n\t        prefix[i] = len;\n\t        i ++;\n\t    }\n\t\t```\n\t- é™¤æ­¤ä¹‹å¤–çš„æƒ…å†µå‘¢ï¼Ÿæ¯”å¦‚æœ€åçš„ ABABCABAA --> len = 1, i = 8\n\t\t- [0, 1, 2, 3, 4, 5, 6, 7, 8] å­—ç¬¦ä¸²æ•°ç»„ä¸‹æ ‡ç´¢å¼•\n\t\t- [A, B, A, B, C, A, B, A, A] å­—ç¬¦ä¸²æ•°ç»„\n\t\t- [0, 0, 1, 2, 0, 1, 2, 3, ?] prefixTable\n\t\t\t- æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå‰ä¸€ä¸ªå­—ç¬¦ A å¯¹åº”çš„ prefix ä¸º 3ï¼Œå¯¹åº”çš„pattern[3]ä¸º Bï¼ˆprefix[len - 1] === Bï¼‰ï¼ŒBçš„å‰ä¸€ä¸ªå­—ç¬¦ A å¯¹åº”çš„ prefix ä¸º 1ï¼ˆlen = prefix[len - 1] --> 0ï¼‰ï¼Œpattern[1] ä¸º Aï¼Œå†æ‰§è¡Œä¸Šå±‚ä»£ç  prefix[8] === len[0]\n\t\n\t\n- KMP æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦å®ç°\n\n\t```javascript\n\tfunction prefixTable(pattern, prefix, n) {\n\t    prefix[0] = 0; // prefix åˆå§‹\n\t    let len = 0; // æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\n\t    let i = 1;\n\t    while(i < n) {\n\t      if (pattern[i] === pattern[len]) {\n\t        len ++;\n\t        prefix[i] = len;\n\t        i ++;\n\t      } else {\n\t        if (len > 0) {\n\t          len = prefix[len - 1]\n\t        }\n\t        else {\n\t          prefix[i] = len\n\t          i ++\n\t        }\n\t      }\n\t      console.log(prefix)\n\t    }\n\t  }\n\t```\n- è¿è¡Œç»“æœ\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/354d6d33c10aa23f150c26a68a09f19084870.png)\n- å†æ·»ä¸€å±‚å¤„ç†ï¼Œå› ä¸ºå‰ç¼€æ˜¯ä¸ä¸ä¼šåŒ…æ‹¬è‡ªå·±æœ¬èº«çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ•´ä½“åç§»ä¸€ä½ï¼Œå¹¶ä¸”ï¼Œç©ºå‡ºæ¥çš„ç¬¬ä¸€é¡¹ç½®ä¸º -1\n\n\t```javascript\n\tfunction movePrefixTable(prefix, n) {\n\t    for (let i = n - 1; i > 0; i --) {\n\t      prefix[i] = prefix[i - 1]\n\t    }\n\t    prefix[0] = -1\n\t}\n\t```\n\t\n#### KMP å¤„ç† pattern\n\n```javascript\n  function prefixTable(pattern, prefix, n) {\n    prefix[0] = 0; // prefix åˆå§‹\n    let len = 0; // æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\n    let i = 1;\n    while(i < n) {\n      if (pattern[i] === pattern[len]) {\n        len ++;\n        prefix[i] = len;\n        i ++;\n      } else {\n        if (len > 0) {\n          len = prefix[len - 1]\n        }\n        else {\n          prefix[i] = len\n          i ++\n        }\n      }\n      console.log(prefix)\n    }\n  }\n\n  function movePrefixTable(prefix, n) {\n    for (let i = n - 1; i > 0; i --) {\n      prefix[i] = prefix[i - 1]\n    }\n    prefix[0] = -1\n  }\n\n  function kmpSearch(text, pattern) {\n    const patternArray = pattern.split(\"\")\n    let patternLen = patternArray.length\n    const textArray = text.split(\"\")\n    let textLen = textArray.length\n\n    let prefixArray = new Array(patternLen)\n    prefixTable(patternArray, prefixArray, patternLen)\n    movePrefixTable(prefixArray, patternLen)\n\n    // console.log('prefixTemp', prefixTemp)\n    console.log('prefixArray', prefixArray)\n\n    // textArray len m\n    // pattern len n\n\n    let i = 0, j = 0;\n    while(i < textLen) {\n      if (j === patternLen - 1 && textArray[i] === patternArray[j]) {\n        console.log(\"Found pattern at \", i - j)\n        j = prefixArray[j]\n      }\n      if (textArray[i] === patternArray[j]) {\n        i ++;\n        j ++;\n      } else {\n        j = prefixArray[j]\n        if (j === -1) {\n          i ++;\n          j ++;\n        }\n      }\n    }\n  }\n\n  kmpSearch(\"ABABABABCABAAB\", \"ABABCABAA\")\n```\n- è¿è¡Œç»“æœ\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/f4273ce6b530673651ce3a9f513c730760549.png)\n\t- ![è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/214a8fcf81cda92716e44270f816392663018.png)\n\n### åŸºäº KMP çš„ FSM å¤„ç† pattern\n\n```javascript\n\n\n  let textArray = [] // æœªçŸ¥å­—ç¬¦ä¸²\n  let text = \"\"\n  let textLen = 0 // æœªçŸ¥å­—ç¬¦ä¸²é•¿åº¦\n  let patternArray = [] // pattern å­—ç¬¦ä¸²\n  let pattern = \"\"\n  let patternLen // æœªçŸ¥ pattern é•¿åº¦\n  let prefixArray = null // KMP prefix table\n  let len = 0 // æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\n\n\n  function initState() {\n    patternArray = pattern.split(\"\")\n    patternLen = patternArray.length\n    textArray = text.split(\"\")\n    textLen = textArray.length\n    prefixArray = new Array(patternLen)\n    prefixArray[0] = 0\n    let len = 0\n    return patteranStart\n  }\n\n\n  function patteranStart(i) {\n    if (patternArray[i] === patternArray[len]) {\n      len++;\n      prefixArray[i] = len;\n      return { needAdd: true };\n    } else {\n      if (len > 0) {\n        len = prefixArray[len - 1]\n        return { needAdd: false }\n      }\n      else {\n        prefixArray[i] = len\n        return { needAdd: true }\n      }\n    }\n    if (i ===  patternLen) {\n      return movePrefixTable\n    }\n  }\n\n\n  function movePrefixTable() {\n    for (let i = patternLen - 1; i > 0; i--) {\n      prefixArray[i] = prefixArray[i - 1]\n    }\n    prefixArray[0] = -1\n    return KMPSearch\n  }\n\n\n  function KMPSearch(i, j) {\n    if (j === patternLen - 1 && textArray[i] === patternArray[j]) {\n      j = prefixArray[j]\n      return { iNeedAdd: false, jNeedAdd: false, isMatched: true }\n    }\n    if (textArray[i] === patternArray[j]) {\n      return { iNeedAdd: true, jNeedAdd: true, isMatched: false }\n    } else {\n      j = prefixArray[j]\n      if (j === -1) {\n        return { iNeedAdd: true, jNeedAdd: true, isMatched: false }\n      }\n    }\n    return { iNeedAdd: true, jNeedAdd: false, isMatched: false }\n  }\n  \n  const STATUS_MAP = {\n    \"init\": initState,\n    \"prefixtable\": patteranStart,\n    \"movePrefixTable\": movePrefixTable,\n    \"KMPSearch\": KMPSearch\n  }\n\n  function match(_text, _pattern) {\n    text = _text\n    pattern = _pattern\n\n    let patternState = initState\n    let STATUS_MAP_KEYS = Object.keys(STATUS_MAP)\n\n    for (let status = 0; status < STATUS_MAP_KEYS.length; status++) {\n      patternState = STATUS_MAP[STATUS_MAP_KEYS[status]]\n      if (STATUS_MAP_KEYS[status] === \"init\") {\n\n        patternState()\n\n      } else if (STATUS_MAP_KEYS[status] === \"prefixtable\") {\n\n        let res = { len: 0, needAdd: true }\n        for (let i = 1; i <= patternLen; res.needAdd && i++) {\n          res = patternState(i)\n        }\n\n      } else if (STATUS_MAP_KEYS[status] === \"movePrefixTable\") {\n\n        patternState()\n\n      } else if (STATUS_MAP_KEYS[status] === \"KMPSearch\") {\n\n        let kmpSearchRes = { iNeedAdd: false, jNeedAdd: false, isMatched: false }\n        for (let i = 0, j = 0; i < textLen;) {\n          kmpSearchRes = patternState(i, j)\n          if (kmpSearchRes.isMatched) {\n            console.log(\"First Found pattern at \", i - j)\n            return kmpSearchRes.isMatched\n          }\n          if (kmpSearchRes.iNeedAdd)\n            i++\n          if (kmpSearchRes.jNeedAdd)\n            j++\n        }\n        return kmpSearchRes.isMatched\n\n      }\n    }\n  }\n\n  match(\"ABABABABCABAAB\", \"ABABCABAA\")\n```\n\n- è¿è¡Œç»“æœ\n\t- ![åŸºäº KMP çš„ FSM å¤„ç† pattern è¿è¡Œç»“æœ](http://p0.meituan.net/myvideodistribute/7079d40d337c97ae742c21e0f7a2f87320359.png)\n\n\t\n## å‚è€ƒ\n- [KMP ç®—æ³•è§†é¢‘è®²è§£](https://www.bilibili.com/video/BV1Px411z7Yo)\n- [KMP-æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦](http://www.ruanyifeng.com/blog/2013/05/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html)\n\n\n\n## å†™åœ¨åé¢\n- æ„Ÿè°¢åœ¨ KMP ç®—æ³•æŠ˜è…¾æ—¶ï¼Œæä¾›å¸®åŠ©çš„ ç”°ç¥å¤§å¤§ã€ ğŸ¤« ç­‰æˆ‘æœ‰ä»–è”ç³»æ–¹å¼äº†ï¼Œæˆ‘æ‚„æ‚„åŒæ­¥ç»™ä½ ä»¬\n- å­¦è€Œä¸æ€åˆ™ç½”\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢","slug":"åŸºäºKMPçš„FSMå¤„ç†å­—ç¬¦ä¸²","published":1,"updated":"2020-10-27T15:21:11.266Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u8b002vfw9kglfrf0c5","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å‡†å¤‡æ•´ä¸€ä¸‹ â€œåŸºäºKMPçš„FSMå¤„ç† patternâ€ å•¦ï¼Œç¥æˆ‘æˆåŠŸ ğŸ™‹</li>\n<li>è¿™é‡Œå‘¢~ å‡†å¤‡åˆ†ä¸ºä¸‰æ­¥å»å®ç°<ul>\n<li>FSM å¤„ç†å­—ç¬¦ä¸²</li>\n<li>KMP ç®—æ³•æ¦‚è¿°</li>\n<li>åŸºäº KMP çš„ FSM å¤„ç† pattern çš„å®ç°</li>\n</ul>\n</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"å®è·µè®°å½•\"><a href=\"#å®è·µè®°å½•\" class=\"headerlink\" title=\"å®è·µè®°å½•\"></a>å®è·µè®°å½•</h2><h3 id=\"FSM-å¤„ç†å­—ç¬¦ä¸²\"><a href=\"#FSM-å¤„ç†å­—ç¬¦ä¸²\" class=\"headerlink\" title=\"FSM å¤„ç†å­—ç¬¦ä¸²\"></a>FSM å¤„ç†å­—ç¬¦ä¸²</h3><h4 id=\"FSM-æ¦‚å¿µ\"><a href=\"#FSM-æ¦‚å¿µ\" class=\"headerlink\" title=\"FSM æ¦‚å¿µ\"></a>FSM æ¦‚å¿µ</h4><ul>\n<li>æ¯ä¸€ä¸ªçŠ¶æ€éƒ½æ˜¯ä¸€ä¸ªæœºå™¨<ul>\n<li>åœ¨æ¯ä¸€ä¸ªæœºå™¨é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åšè®¡ç®—ã€å­˜å‚¨ã€è¾“å‡º</li>\n<li>æ‰€æœ‰çš„è¿™äº›æœºå™¨æ¥å—çš„è¾“å…¥æ˜¯ä¸€è‡´çš„</li>\n<li>çŠ¶æ€æœºçš„æ¯ä¸€ä¸ªæœºå™¨æœ¬èº«æ²¡æœ‰çŠ¶æ€ï¼Œå¦‚æœæˆ‘ä»¬ç”¨å‡½æ•°æ¥è¡¨ç¤ºçš„è¯ï¼Œå®ƒåº”è¯¥æ˜¯çº¯å‡½æ•°ï¼ˆæ— å‰¯ä½œç”¨ï¼‰</li>\n</ul>\n</li>\n<li>æ¯ä¸€ä¸ªæœºå™¨çŸ¥é“ä¸‹ä¸€ä¸ªçŠ¶æ€<ul>\n<li>æ¯ä¸ªæœºå™¨éƒ½æœ‰ç¡®å®šçš„ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆMooreï¼‰</li>\n<li>æ¯ä¸ªæœºå™¨æ ¹æ®è¾“å…¥å†³å®šä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆMealyï¼‰</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²-abcdef\"><a href=\"#åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²-abcdef\" class=\"headerlink\" title=\"åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdef\"></a>åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdef</h4><ul>\n<li><p>ä¸ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdefæ‰¾åˆ°å­—ç¬¦ä¸² abcdef</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">string</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> foundA = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> foundB = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> foundC = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> foundD = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> foundE = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> string) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char == <span class=\"string\">'a'</span>)</span><br><span class=\"line\">      foundA = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (foundA &amp;&amp; char == <span class=\"string\">'b'</span>)</span><br><span class=\"line\">      foundB = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (foundB &amp;&amp; char == <span class=\"string\">'c'</span>)</span><br><span class=\"line\">      foundC = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (foundC &amp;&amp; char == <span class=\"string\">'d'</span>)</span><br><span class=\"line\">      foundD = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (foundD &amp;&amp; char == <span class=\"string\">'e'</span>)</span><br><span class=\"line\">      foundE = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (foundD &amp;&amp; char == <span class=\"string\">'f'</span>)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> foundA = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> foundB = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> foundC = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> foundD = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> foundE = <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aabcdefghm grood.\"</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aacdefghm grood.\"</span>))</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/40a9e9395d783093ae5e9af1bc2d081c58822.png\" alt=\"ç¬¬ä¸€ç‰ˆè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li>ç¼ºç‚¹ï¼š<ol>\n<li>ä¸å¯æ‰©å±•ä»£ç è¾ƒå¤š</li>\n<li>if else å¤šæ¬¡åˆ¤æ–­</li>\n</ol>\n</li>\n</ul>\n</li>\n<li><p>ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdef </p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">string</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = start</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> string) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state === end</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'a'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findA</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">end</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> end</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findA</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'b'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findB</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'c'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findC</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findC</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'d'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findD</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findD</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'e'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findE</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findE</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'f'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> end</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aabcdefghm grood.\"</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aacdefghm grood.\"</span>))</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/74431b7630e0a9f8b3aeb65907987b9a80908.png\" alt=\"FSM å¤„ç†å­—ç¬¦ä¸² abcdef\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"JS-ä¸­çš„æœ‰é™çŠ¶æ€æœº\"><a href=\"#JS-ä¸­çš„æœ‰é™çŠ¶æ€æœº\" class=\"headerlink\" title=\"JS ä¸­çš„æœ‰é™çŠ¶æ€æœº\"></a>JS ä¸­çš„æœ‰é™çŠ¶æ€æœº</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ¯ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">state</span>(<span class=\"params\">input</span>) </span>&#123; <span class=\"comment\">// å‡½æ•°å‚æ•°å°±æ˜¯è¾“å…¥</span></span><br><span class=\"line\">  <span class=\"comment\">// åœ¨å‡½æ•°ä¸­ï¼Œå¯ä»¥è‡ªç”±åœ°ç¼–å†™ä»£ç ï¼Œå¤„ç†æ¯ä¸ªçŠ¶æ€çš„é€»è¾‘</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** ä»¥ä¸‹æ˜¯è°ƒç”¨ **/</span></span><br><span class=\"line\"><span class=\"keyword\">while</span>(input) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// è·å–è¾“å…¥</span></span><br><span class=\"line\">  state = state(input) <span class=\"comment\">// æŠŠçŠ¶æ€æœºçš„è¿”å›å€¼ä½œä¸ºä¸‹ä¸€ä¸ªçŠ¶æ€</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä½¿ç”¨-FSM-ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²-abcabx\"><a href=\"#ä½¿ç”¨-FSM-ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²-abcabx\" class=\"headerlink\" title=\"ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcabx\"></a>ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcabx</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">string</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = start</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> string) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state === end</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'a'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findA</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">end</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> end</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findA</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'b'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findB</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'c'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findC</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findC</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'a'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findA2</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findA2</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'b'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB2</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findB2</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'x'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> end</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">match(<span class=\"string\">\"I aabcabcabx grood.\"</span>)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/c09493a569d2d4e21d1600ebd9fcb84589625.png\" alt=\"FSM æ‰¾åˆ° abcabx\"></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ä½¿ç”¨-FSM-ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²-ababx\"><a href=\"#ä½¿ç”¨-FSM-ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²-ababx\" class=\"headerlink\" title=\"ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² ababx\"></a>ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² ababx</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">string</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = start</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> string) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state === end</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'a'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findA1</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">end</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> end</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findA1</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'b'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB1</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findB1</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'a'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findA2</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findA2</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'b'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB2</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findB2</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'a'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findA3</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findA3</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'b'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB3</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findB3</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'x'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> end</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB2(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aababababx grood.\"</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aabababababx grood.\"</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aababaeababx grood.\"</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aabababaabx grood.\"</span>))</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6c000a617a3f594e24bf99c52d4d0848101059.png\" alt=\"abababx\"></li>\n</ul>\n</li>\n</ul>\n<p>ã€é‚£æˆ‘ä»¬è¯¥å¦‚ä½•åˆ©ç”¨ FSM å¤„ç†æœªçŸ¥ pattern å‘¢ï¼ŸğŸ¤”</p>\n<p>ã€å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜å°±æ˜¯åœ¨ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²Tä¸­æœç´¢æŸä¸ªæ¨¡å¼å­—ç¬¦ä¸²Pçš„æ‰€æœ‰å‡ºç°ä½ç½®ã€‚</p>\n<h3 id=\"KMP-ç®—æ³•æ¦‚è¿°\"><a href=\"#KMP-ç®—æ³•æ¦‚è¿°\" class=\"headerlink\" title=\"KMP ç®—æ³•æ¦‚è¿°\"></a>KMP ç®—æ³•æ¦‚è¿°</h3><h4 id=\"KMP-æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\"><a href=\"#KMP-æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\" class=\"headerlink\" title=\"KMP æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\"></a>KMP æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦</h4><ul>\n<li><p>å‡å¦‚ pattern ä¸º ABABCABAA</p>\n<ul>\n<li>å‰ç¼€ä¾æ¬¡ä¸º A AB ABA ABAB ABABC ABABCA ABABCAB ABABCABA</li>\n<li>åç¼€ä¾æ¬¡ä¸º A AA BAA ABAA CABAA BCABAA ABCABAA BABCABAA</li>\n</ul>\n</li>\n<li><p>é‚£ä¹ˆå®ƒçš„æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦ä¸ºå¤šå°‘å‘¢ï¼Ÿ</p>\n<ul>\n<li>A â€“&gt; 0<ul>\n<li>æ— å‰ç¼€</li>\n<li>æ— åç¼€</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šâ€â€ï¼Œlen = 0</li>\n</ul>\n</li>\n<li>AB â€“&gt; 0<ul>\n<li>å‰ç¼€ A</li>\n<li>åç¼€ B</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šâ€â€ï¼Œlen = 0</li>\n</ul>\n</li>\n<li>ABA â€“&gt; 1<ul>\n<li>å‰ç¼€ A AB</li>\n<li>åç¼€ A BA </li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šAï¼Œlen = 1</li>\n</ul>\n</li>\n<li>ABAB â€“&gt; 2<ul>\n<li>å‰ç¼€ A AB ABA</li>\n<li>åç¼€ B AB BAB </li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šABï¼Œlen = 2</li>\n</ul>\n</li>\n<li>ABABC â€“&gt; 0<ul>\n<li>å‰ç¼€ A AB ABA ABAB</li>\n<li>åç¼€ C BC ABC BABC</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šâ€â€ï¼Œlen = 0</li>\n</ul>\n</li>\n<li>ABABCA â€“&gt; 1<ul>\n<li>å‰ç¼€ A AB ABA ABAB ABABC</li>\n<li>åç¼€ A CA BCA ABCA BABCA</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šAï¼Œlen = 1</li>\n</ul>\n</li>\n<li>ABABCAB â€“&gt; 2<ul>\n<li>å‰ç¼€ A AB ABA ABAB ABABC ABABCA</li>\n<li>åç¼€ B AB CAB BCAB ABCAB BACAB</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šABï¼Œlen = 2</li>\n</ul>\n</li>\n<li>ABABCABA â€“&gt; 3<ul>\n<li>å‰ç¼€ A AB ABA ABAB ABABC ABABCA ABABCAB</li>\n<li>åç¼€ A BA ABA CABA BCABA ABCABA BABCABA</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šABAï¼Œlen = 3</li>\n</ul>\n</li>\n<li>ABABCABAA â€“&gt; 1<ul>\n<li>å‰ç¼€ A AB ABA ABAB ABABC ABABCA ABABCAB ABABCABA</li>\n<li>åç¼€ A AA BAA ABAA CABAA BCABAA ABCABAA BABCABAA</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šAï¼Œlen = 1</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å› æ­¤æˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºï¼Œæœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦ä¸º</p>\n<ul>\n<li>[0, 0, 1, 2, 0, 1, 2, 3, 1] å¯¹åº” pattern å­—ç¬¦ä¸²æ•°ç»„</li>\n<li>[A, B, A, B, C, A, B, A, A]</li>\n<li>[0, 1, 2, 3, 4, 5, 6, 7, 8]</li>\n</ul>\n</li>\n<li><p>é‚£ä¹ˆæ ¹æ®</p>\n<ul>\n<li><p>A â€“&gt; len = 0, i = 0</p>\n</li>\n<li><p>AB â€“&gt; len = 0, i = 1</p>\n</li>\n<li><p><u>A</u>B<u>A</u> â€“&gt; len = 1, i = 2, pattern[i] = A, pattern[ä¸Šä¸€ä¸ªlen] = A</p>\n</li>\n<li><p><u>AB</u><u>AB</u> â€“&gt; len = 2, i = 3, pattern[i] = B, pattern[ä¸Šä¸€ä¸ªlen] = B</p>\n</li>\n<li><p>ABABC â€“&gt; len = 0, i = 4</p>\n</li>\n<li><p><u>A</u>BABC<u>A</u> â€“&gt; len = 1, i = 5, pattern[i] = A, pattern[ä¸Šä¸€ä¸ªlen] = A</p>\n</li>\n<li><p><u>AB</u>ABC<u>AB</u> â€“&gt; len = 2, i = 6, pattern[i] = B, pattern[ä¸Šä¸€ä¸ªlen] = B</p>\n</li>\n<li><p><u>ABA</u>BC<u>ABA</u> â€“&gt; len = 3, i = 7, pattern[i] = A, pattern[ä¸Šä¸€ä¸ªlen] = A</p>\n</li>\n<li><p>ABABCABAA â€“&gt; len = 1, i = 8</p>\n</li>\n<li><p>æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿå¾—åˆ°</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (pattern[i] === pattern[len]) &#123;</span><br><span class=\"line\">       len ++;</span><br><span class=\"line\">       prefix[i] = len;</span><br><span class=\"line\">       i ++;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>é™¤æ­¤ä¹‹å¤–çš„æƒ…å†µå‘¢ï¼Ÿæ¯”å¦‚æœ€åçš„ ABABCABAA â€“&gt; len = 1, i = 8</p>\n<ul>\n<li>[0, 1, 2, 3, 4, 5, 6, 7, 8] å­—ç¬¦ä¸²æ•°ç»„ä¸‹æ ‡ç´¢å¼•</li>\n<li>[A, B, A, B, C, A, B, A, A] å­—ç¬¦ä¸²æ•°ç»„</li>\n<li>[0, 0, 1, 2, 0, 1, 2, 3, ?] prefixTable<ul>\n<li>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå‰ä¸€ä¸ªå­—ç¬¦ A å¯¹åº”çš„ prefix ä¸º 3ï¼Œå¯¹åº”çš„pattern[3]ä¸º Bï¼ˆprefix[len - 1] === Bï¼‰ï¼ŒBçš„å‰ä¸€ä¸ªå­—ç¬¦ A å¯¹åº”çš„ prefix ä¸º 1ï¼ˆlen = prefix[len - 1] â€“&gt; 0ï¼‰ï¼Œpattern[1] ä¸º Aï¼Œå†æ‰§è¡Œä¸Šå±‚ä»£ç  prefix[8] === len[0]</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>KMP æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦å®ç°</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">prefixTable</span>(<span class=\"params\">pattern, prefix, n</span>) </span>&#123;</span><br><span class=\"line\">    prefix[<span class=\"number\">0</span>] = <span class=\"number\">0</span>; <span class=\"comment\">// prefix åˆå§‹</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> len = <span class=\"number\">0</span>; <span class=\"comment\">// æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> i = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt; n) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (pattern[i] === pattern[len]) &#123;</span><br><span class=\"line\">        len ++;</span><br><span class=\"line\">        prefix[i] = len;</span><br><span class=\"line\">        i ++;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (len &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          len = prefix[len - <span class=\"number\">1</span>]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          prefix[i] = len</span><br><span class=\"line\">          i ++</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(prefix)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/354d6d33c10aa23f150c26a68a09f19084870.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p>å†æ·»ä¸€å±‚å¤„ç†ï¼Œå› ä¸ºå‰ç¼€æ˜¯ä¸ä¸ä¼šåŒ…æ‹¬è‡ªå·±æœ¬èº«çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ•´ä½“åç§»ä¸€ä½ï¼Œå¹¶ä¸”ï¼Œç©ºå‡ºæ¥çš„ç¬¬ä¸€é¡¹ç½®ä¸º -1</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">movePrefixTable</span>(<span class=\"params\">prefix, n</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = n - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i --) &#123;</span><br><span class=\"line\">      prefix[i] = prefix[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    prefix[<span class=\"number\">0</span>] = <span class=\"number\">-1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"KMP-å¤„ç†-pattern\"><a href=\"#KMP-å¤„ç†-pattern\" class=\"headerlink\" title=\"KMP å¤„ç† pattern\"></a>KMP å¤„ç† pattern</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">prefixTable</span>(<span class=\"params\">pattern, prefix, n</span>) </span>&#123;</span><br><span class=\"line\">  prefix[<span class=\"number\">0</span>] = <span class=\"number\">0</span>; <span class=\"comment\">// prefix åˆå§‹</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = <span class=\"number\">0</span>; <span class=\"comment\">// æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> i = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(i &lt; n) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (pattern[i] === pattern[len]) &#123;</span><br><span class=\"line\">      len ++;</span><br><span class=\"line\">      prefix[i] = len;</span><br><span class=\"line\">      i ++;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (len &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        len = prefix[len - <span class=\"number\">1</span>]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        prefix[i] = len</span><br><span class=\"line\">        i ++</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(prefix)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">movePrefixTable</span>(<span class=\"params\">prefix, n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = n - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i --) &#123;</span><br><span class=\"line\">    prefix[i] = prefix[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  prefix[<span class=\"number\">0</span>] = <span class=\"number\">-1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">kmpSearch</span>(<span class=\"params\">text, pattern</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> patternArray = pattern.split(<span class=\"string\">\"\"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> patternLen = patternArray.length</span><br><span class=\"line\">  <span class=\"keyword\">const</span> textArray = text.split(<span class=\"string\">\"\"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> textLen = textArray.length</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> prefixArray = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(patternLen)</span><br><span class=\"line\">  prefixTable(patternArray, prefixArray, patternLen)</span><br><span class=\"line\">  movePrefixTable(prefixArray, patternLen)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// console.log('prefixTemp', prefixTemp)</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'prefixArray'</span>, prefixArray)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// textArray len m</span></span><br><span class=\"line\">  <span class=\"comment\">// pattern len n</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(i &lt; textLen) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (j === patternLen - <span class=\"number\">1</span> &amp;&amp; textArray[i] === patternArray[j]) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Found pattern at \"</span>, i - j)</span><br><span class=\"line\">      j = prefixArray[j]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (textArray[i] === patternArray[j]) &#123;</span><br><span class=\"line\">      i ++;</span><br><span class=\"line\">      j ++;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      j = prefixArray[j]</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (j === <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">        i ++;</span><br><span class=\"line\">        j ++;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">kmpSearch(<span class=\"string\">\"ABABABABCABAAB\"</span>, <span class=\"string\">\"ABABCABAA\"</span>)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/f4273ce6b530673651ce3a9f513c730760549.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/214a8fcf81cda92716e44270f816392663018.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"åŸºäº-KMP-çš„-FSM-å¤„ç†-pattern\"><a href=\"#åŸºäº-KMP-çš„-FSM-å¤„ç†-pattern\" class=\"headerlink\" title=\"åŸºäº KMP çš„ FSM å¤„ç† pattern\"></a>åŸºäº KMP çš„ FSM å¤„ç† pattern</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> textArray = [] <span class=\"comment\">// æœªçŸ¥å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> text = <span class=\"string\">\"\"</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> textLen = <span class=\"number\">0</span> <span class=\"comment\">// æœªçŸ¥å­—ç¬¦ä¸²é•¿åº¦</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> patternArray = [] <span class=\"comment\">// pattern å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> pattern = <span class=\"string\">\"\"</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> patternLen <span class=\"comment\">// æœªçŸ¥ pattern é•¿åº¦</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> prefixArray = <span class=\"literal\">null</span> <span class=\"comment\">// KMP prefix table</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> len = <span class=\"number\">0</span> <span class=\"comment\">// æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">initState</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  patternArray = pattern.split(<span class=\"string\">\"\"</span>)</span><br><span class=\"line\">  patternLen = patternArray.length</span><br><span class=\"line\">  textArray = text.split(<span class=\"string\">\"\"</span>)</span><br><span class=\"line\">  textLen = textArray.length</span><br><span class=\"line\">  prefixArray = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(patternLen)</span><br><span class=\"line\">  prefixArray[<span class=\"number\">0</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> patteranStart</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">patteranStart</span>(<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (patternArray[i] === patternArray[len]) &#123;</span><br><span class=\"line\">    len++;</span><br><span class=\"line\">    prefixArray[i] = len;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">needAdd</span>: <span class=\"literal\">true</span> &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (len &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      len = prefixArray[len - <span class=\"number\">1</span>]</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">needAdd</span>: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      prefixArray[i] = len</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">needAdd</span>: <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (i ===  patternLen) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> movePrefixTable</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">movePrefixTable</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = patternLen - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">    prefixArray[i] = prefixArray[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  prefixArray[<span class=\"number\">0</span>] = <span class=\"number\">-1</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> KMPSearch</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">KMPSearch</span>(<span class=\"params\">i, j</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (j === patternLen - <span class=\"number\">1</span> &amp;&amp; textArray[i] === patternArray[j]) &#123;</span><br><span class=\"line\">    j = prefixArray[j]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">iNeedAdd</span>: <span class=\"literal\">false</span>, <span class=\"attr\">jNeedAdd</span>: <span class=\"literal\">false</span>, <span class=\"attr\">isMatched</span>: <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (textArray[i] === patternArray[j]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">iNeedAdd</span>: <span class=\"literal\">true</span>, <span class=\"attr\">jNeedAdd</span>: <span class=\"literal\">true</span>, <span class=\"attr\">isMatched</span>: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    j = prefixArray[j]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (j === <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">iNeedAdd</span>: <span class=\"literal\">true</span>, <span class=\"attr\">jNeedAdd</span>: <span class=\"literal\">true</span>, <span class=\"attr\">isMatched</span>: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123; <span class=\"attr\">iNeedAdd</span>: <span class=\"literal\">true</span>, <span class=\"attr\">jNeedAdd</span>: <span class=\"literal\">false</span>, <span class=\"attr\">isMatched</span>: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> STATUS_MAP = &#123;</span><br><span class=\"line\">  <span class=\"string\">\"init\"</span>: initState,</span><br><span class=\"line\">  <span class=\"string\">\"prefixtable\"</span>: patteranStart,</span><br><span class=\"line\">  <span class=\"string\">\"movePrefixTable\"</span>: movePrefixTable,</span><br><span class=\"line\">  <span class=\"string\">\"KMPSearch\"</span>: KMPSearch</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">_text, _pattern</span>) </span>&#123;</span><br><span class=\"line\">  text = _text</span><br><span class=\"line\">  pattern = _pattern</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> patternState = initState</span><br><span class=\"line\">  <span class=\"keyword\">let</span> STATUS_MAP_KEYS = <span class=\"built_in\">Object</span>.keys(STATUS_MAP)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> status = <span class=\"number\">0</span>; status &lt; STATUS_MAP_KEYS.length; status++) &#123;</span><br><span class=\"line\">    patternState = STATUS_MAP[STATUS_MAP_KEYS[status]]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (STATUS_MAP_KEYS[status] === <span class=\"string\">\"init\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      patternState()</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (STATUS_MAP_KEYS[status] === <span class=\"string\">\"prefixtable\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">let</span> res = &#123; <span class=\"attr\">len</span>: <span class=\"number\">0</span>, <span class=\"attr\">needAdd</span>: <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt;= patternLen; res.needAdd &amp;&amp; i++) &#123;</span><br><span class=\"line\">        res = patternState(i)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (STATUS_MAP_KEYS[status] === <span class=\"string\">\"movePrefixTable\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      patternState()</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (STATUS_MAP_KEYS[status] === <span class=\"string\">\"KMPSearch\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">let</span> kmpSearchRes = &#123; <span class=\"attr\">iNeedAdd</span>: <span class=\"literal\">false</span>, <span class=\"attr\">jNeedAdd</span>: <span class=\"literal\">false</span>, <span class=\"attr\">isMatched</span>: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>; i &lt; textLen;) &#123;</span><br><span class=\"line\">        kmpSearchRes = patternState(i, j)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (kmpSearchRes.isMatched) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">\"First Found pattern at \"</span>, i - j)</span><br><span class=\"line\">          <span class=\"keyword\">return</span> kmpSearchRes.isMatched</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (kmpSearchRes.iNeedAdd)</span><br><span class=\"line\">          i++</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (kmpSearchRes.jNeedAdd)</span><br><span class=\"line\">          j++</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> kmpSearchRes.isMatched</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">match(<span class=\"string\">\"ABABABABCABAAB\"</span>, <span class=\"string\">\"ABABCABAA\"</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/7079d40d337c97ae742c21e0f7a2f87320359.png\" alt=\"åŸºäº KMP çš„ FSM å¤„ç† pattern è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h2><ul>\n<li><a href=\"https://www.bilibili.com/video/BV1Px411z7Yo\" target=\"_blank\" rel=\"noopener\">KMP ç®—æ³•è§†é¢‘è®²è§£</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2013/05/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html\" target=\"_blank\" rel=\"noopener\">KMP-æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>æ„Ÿè°¢åœ¨ KMP ç®—æ³•æŠ˜è…¾æ—¶ï¼Œæä¾›å¸®åŠ©çš„ ç”°ç¥å¤§å¤§ã€ ğŸ¤« ç­‰æˆ‘æœ‰ä»–è”ç³»æ–¹å¼äº†ï¼Œæˆ‘æ‚„æ‚„åŒæ­¥ç»™ä½ ä»¬</li>\n<li>å­¦è€Œä¸æ€åˆ™ç½”</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å‡†å¤‡æ•´ä¸€ä¸‹ â€œåŸºäºKMPçš„FSMå¤„ç† patternâ€ å•¦ï¼Œç¥æˆ‘æˆåŠŸ ğŸ™‹</li>\n<li>è¿™é‡Œå‘¢~ å‡†å¤‡åˆ†ä¸ºä¸‰æ­¥å»å®ç°<ul>\n<li>FSM å¤„ç†å­—ç¬¦ä¸²</li>\n<li>KMP ç®—æ³•æ¦‚è¿°</li>\n<li>åŸºäº KMP çš„ FSM å¤„ç† pattern çš„å®ç°</li>\n</ul>\n</li>\n</ul>","more":"<h2 id=\"å®è·µè®°å½•\"><a href=\"#å®è·µè®°å½•\" class=\"headerlink\" title=\"å®è·µè®°å½•\"></a>å®è·µè®°å½•</h2><h3 id=\"FSM-å¤„ç†å­—ç¬¦ä¸²\"><a href=\"#FSM-å¤„ç†å­—ç¬¦ä¸²\" class=\"headerlink\" title=\"FSM å¤„ç†å­—ç¬¦ä¸²\"></a>FSM å¤„ç†å­—ç¬¦ä¸²</h3><h4 id=\"FSM-æ¦‚å¿µ\"><a href=\"#FSM-æ¦‚å¿µ\" class=\"headerlink\" title=\"FSM æ¦‚å¿µ\"></a>FSM æ¦‚å¿µ</h4><ul>\n<li>æ¯ä¸€ä¸ªçŠ¶æ€éƒ½æ˜¯ä¸€ä¸ªæœºå™¨<ul>\n<li>åœ¨æ¯ä¸€ä¸ªæœºå™¨é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åšè®¡ç®—ã€å­˜å‚¨ã€è¾“å‡º</li>\n<li>æ‰€æœ‰çš„è¿™äº›æœºå™¨æ¥å—çš„è¾“å…¥æ˜¯ä¸€è‡´çš„</li>\n<li>çŠ¶æ€æœºçš„æ¯ä¸€ä¸ªæœºå™¨æœ¬èº«æ²¡æœ‰çŠ¶æ€ï¼Œå¦‚æœæˆ‘ä»¬ç”¨å‡½æ•°æ¥è¡¨ç¤ºçš„è¯ï¼Œå®ƒåº”è¯¥æ˜¯çº¯å‡½æ•°ï¼ˆæ— å‰¯ä½œç”¨ï¼‰</li>\n</ul>\n</li>\n<li>æ¯ä¸€ä¸ªæœºå™¨çŸ¥é“ä¸‹ä¸€ä¸ªçŠ¶æ€<ul>\n<li>æ¯ä¸ªæœºå™¨éƒ½æœ‰ç¡®å®šçš„ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆMooreï¼‰</li>\n<li>æ¯ä¸ªæœºå™¨æ ¹æ®è¾“å…¥å†³å®šä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆMealyï¼‰</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²-abcdef\"><a href=\"#åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²-abcdef\" class=\"headerlink\" title=\"åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdef\"></a>åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdef</h4><ul>\n<li><p>ä¸ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdefæ‰¾åˆ°å­—ç¬¦ä¸² abcdef</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">string</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> foundA = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> foundB = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> foundC = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> foundD = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> foundE = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> string) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char == <span class=\"string\">'a'</span>)</span><br><span class=\"line\">      foundA = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (foundA &amp;&amp; char == <span class=\"string\">'b'</span>)</span><br><span class=\"line\">      foundB = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (foundB &amp;&amp; char == <span class=\"string\">'c'</span>)</span><br><span class=\"line\">      foundC = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (foundC &amp;&amp; char == <span class=\"string\">'d'</span>)</span><br><span class=\"line\">      foundD = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (foundD &amp;&amp; char == <span class=\"string\">'e'</span>)</span><br><span class=\"line\">      foundE = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (foundD &amp;&amp; char == <span class=\"string\">'f'</span>)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> foundA = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> foundB = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> foundC = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> foundD = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> foundE = <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aabcdefghm grood.\"</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aacdefghm grood.\"</span>))</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/40a9e9395d783093ae5e9af1bc2d081c58822.png\" alt=\"ç¬¬ä¸€ç‰ˆè¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li>ç¼ºç‚¹ï¼š<ol>\n<li>ä¸å¯æ‰©å±•ä»£ç è¾ƒå¤š</li>\n<li>if else å¤šæ¬¡åˆ¤æ–­</li>\n</ol>\n</li>\n</ul>\n</li>\n<li><p>ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcdef </p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">string</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = start</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> string) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state === end</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'a'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findA</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">end</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> end</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findA</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'b'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findB</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'c'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findC</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findC</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'d'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findD</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findD</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'e'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findE</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findE</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'f'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> end</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aabcdefghm grood.\"</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aacdefghm grood.\"</span>))</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/74431b7630e0a9f8b3aeb65907987b9a80908.png\" alt=\"FSM å¤„ç†å­—ç¬¦ä¸² abcdef\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"JS-ä¸­çš„æœ‰é™çŠ¶æ€æœº\"><a href=\"#JS-ä¸­çš„æœ‰é™çŠ¶æ€æœº\" class=\"headerlink\" title=\"JS ä¸­çš„æœ‰é™çŠ¶æ€æœº\"></a>JS ä¸­çš„æœ‰é™çŠ¶æ€æœº</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ¯ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">state</span>(<span class=\"params\">input</span>) </span>&#123; <span class=\"comment\">// å‡½æ•°å‚æ•°å°±æ˜¯è¾“å…¥</span></span><br><span class=\"line\">  <span class=\"comment\">// åœ¨å‡½æ•°ä¸­ï¼Œå¯ä»¥è‡ªç”±åœ°ç¼–å†™ä»£ç ï¼Œå¤„ç†æ¯ä¸ªçŠ¶æ€çš„é€»è¾‘</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** ä»¥ä¸‹æ˜¯è°ƒç”¨ **/</span></span><br><span class=\"line\"><span class=\"keyword\">while</span>(input) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// è·å–è¾“å…¥</span></span><br><span class=\"line\">  state = state(input) <span class=\"comment\">// æŠŠçŠ¶æ€æœºçš„è¿”å›å€¼ä½œä¸ºä¸‹ä¸€ä¸ªçŠ¶æ€</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä½¿ç”¨-FSM-ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²-abcabx\"><a href=\"#ä½¿ç”¨-FSM-ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²-abcabx\" class=\"headerlink\" title=\"ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcabx\"></a>ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² abcabx</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">string</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = start</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> string) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state === end</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'a'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findA</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">end</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> end</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findA</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'b'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findB</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'c'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findC</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findC</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'a'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findA2</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findA2</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'b'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB2</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findB2</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'x'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> end</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">match(<span class=\"string\">\"I aabcabcabx grood.\"</span>)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/c09493a569d2d4e21d1600ebd9fcb84589625.png\" alt=\"FSM æ‰¾åˆ° abcabx\"></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ä½¿ç”¨-FSM-ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²-ababx\"><a href=\"#ä½¿ç”¨-FSM-ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²-ababx\" class=\"headerlink\" title=\"ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² ababx\"></a>ä½¿ç”¨ FSM ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸² ababx</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">string</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> state = start</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> char <span class=\"keyword\">of</span> string) &#123;</span><br><span class=\"line\">    state = state(char)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state === end</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'a'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findA1</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">end</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> end</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findA1</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'b'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB1</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findB1</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'a'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findA2</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findA2</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'b'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB2</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findB2</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'a'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findA3</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findA3</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'b'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB3</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> start(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findB3</span>(<span class=\"params\">char</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (char === <span class=\"string\">'x'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> end</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> findB2(char)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aababababx grood.\"</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aabababababx grood.\"</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aababaeababx grood.\"</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(match(<span class=\"string\">\"I aabababaabx grood.\"</span>))</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/6c000a617a3f594e24bf99c52d4d0848101059.png\" alt=\"abababx\"></li>\n</ul>\n</li>\n</ul>\n<p>ã€é‚£æˆ‘ä»¬è¯¥å¦‚ä½•åˆ©ç”¨ FSM å¤„ç†æœªçŸ¥ pattern å‘¢ï¼ŸğŸ¤”</p>\n<p>ã€å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜å°±æ˜¯åœ¨ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²Tä¸­æœç´¢æŸä¸ªæ¨¡å¼å­—ç¬¦ä¸²Pçš„æ‰€æœ‰å‡ºç°ä½ç½®ã€‚</p>\n<h3 id=\"KMP-ç®—æ³•æ¦‚è¿°\"><a href=\"#KMP-ç®—æ³•æ¦‚è¿°\" class=\"headerlink\" title=\"KMP ç®—æ³•æ¦‚è¿°\"></a>KMP ç®—æ³•æ¦‚è¿°</h3><h4 id=\"KMP-æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\"><a href=\"#KMP-æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\" class=\"headerlink\" title=\"KMP æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦\"></a>KMP æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦</h4><ul>\n<li><p>å‡å¦‚ pattern ä¸º ABABCABAA</p>\n<ul>\n<li>å‰ç¼€ä¾æ¬¡ä¸º A AB ABA ABAB ABABC ABABCA ABABCAB ABABCABA</li>\n<li>åç¼€ä¾æ¬¡ä¸º A AA BAA ABAA CABAA BCABAA ABCABAA BABCABAA</li>\n</ul>\n</li>\n<li><p>é‚£ä¹ˆå®ƒçš„æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦ä¸ºå¤šå°‘å‘¢ï¼Ÿ</p>\n<ul>\n<li>A â€“&gt; 0<ul>\n<li>æ— å‰ç¼€</li>\n<li>æ— åç¼€</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šâ€â€ï¼Œlen = 0</li>\n</ul>\n</li>\n<li>AB â€“&gt; 0<ul>\n<li>å‰ç¼€ A</li>\n<li>åç¼€ B</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šâ€â€ï¼Œlen = 0</li>\n</ul>\n</li>\n<li>ABA â€“&gt; 1<ul>\n<li>å‰ç¼€ A AB</li>\n<li>åç¼€ A BA </li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šAï¼Œlen = 1</li>\n</ul>\n</li>\n<li>ABAB â€“&gt; 2<ul>\n<li>å‰ç¼€ A AB ABA</li>\n<li>åç¼€ B AB BAB </li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šABï¼Œlen = 2</li>\n</ul>\n</li>\n<li>ABABC â€“&gt; 0<ul>\n<li>å‰ç¼€ A AB ABA ABAB</li>\n<li>åç¼€ C BC ABC BABC</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šâ€â€ï¼Œlen = 0</li>\n</ul>\n</li>\n<li>ABABCA â€“&gt; 1<ul>\n<li>å‰ç¼€ A AB ABA ABAB ABABC</li>\n<li>åç¼€ A CA BCA ABCA BABCA</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šAï¼Œlen = 1</li>\n</ul>\n</li>\n<li>ABABCAB â€“&gt; 2<ul>\n<li>å‰ç¼€ A AB ABA ABAB ABABC ABABCA</li>\n<li>åç¼€ B AB CAB BCAB ABCAB BACAB</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šABï¼Œlen = 2</li>\n</ul>\n</li>\n<li>ABABCABA â€“&gt; 3<ul>\n<li>å‰ç¼€ A AB ABA ABAB ABABC ABABCA ABABCAB</li>\n<li>åç¼€ A BA ABA CABA BCABA ABCABA BABCABA</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šABAï¼Œlen = 3</li>\n</ul>\n</li>\n<li>ABABCABAA â€“&gt; 1<ul>\n<li>å‰ç¼€ A AB ABA ABAB ABABC ABABCA ABABCAB ABABCABA</li>\n<li>åç¼€ A AA BAA ABAA CABAA BCABAA ABCABAA BABCABAA</li>\n<li>æœ€é•¿å…¬å…±å‰åç¼€ï¼šAï¼Œlen = 1</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å› æ­¤æˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºï¼Œæœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦ä¸º</p>\n<ul>\n<li>[0, 0, 1, 2, 0, 1, 2, 3, 1] å¯¹åº” pattern å­—ç¬¦ä¸²æ•°ç»„</li>\n<li>[A, B, A, B, C, A, B, A, A]</li>\n<li>[0, 1, 2, 3, 4, 5, 6, 7, 8]</li>\n</ul>\n</li>\n<li><p>é‚£ä¹ˆæ ¹æ®</p>\n<ul>\n<li><p>A â€“&gt; len = 0, i = 0</p>\n</li>\n<li><p>AB â€“&gt; len = 0, i = 1</p>\n</li>\n<li><p><u>A</u>B<u>A</u> â€“&gt; len = 1, i = 2, pattern[i] = A, pattern[ä¸Šä¸€ä¸ªlen] = A</p>\n</li>\n<li><p><u>AB</u><u>AB</u> â€“&gt; len = 2, i = 3, pattern[i] = B, pattern[ä¸Šä¸€ä¸ªlen] = B</p>\n</li>\n<li><p>ABABC â€“&gt; len = 0, i = 4</p>\n</li>\n<li><p><u>A</u>BABC<u>A</u> â€“&gt; len = 1, i = 5, pattern[i] = A, pattern[ä¸Šä¸€ä¸ªlen] = A</p>\n</li>\n<li><p><u>AB</u>ABC<u>AB</u> â€“&gt; len = 2, i = 6, pattern[i] = B, pattern[ä¸Šä¸€ä¸ªlen] = B</p>\n</li>\n<li><p><u>ABA</u>BC<u>ABA</u> â€“&gt; len = 3, i = 7, pattern[i] = A, pattern[ä¸Šä¸€ä¸ªlen] = A</p>\n</li>\n<li><p>ABABCABAA â€“&gt; len = 1, i = 8</p>\n</li>\n<li><p>æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿå¾—åˆ°</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (pattern[i] === pattern[len]) &#123;</span><br><span class=\"line\">       len ++;</span><br><span class=\"line\">       prefix[i] = len;</span><br><span class=\"line\">       i ++;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>é™¤æ­¤ä¹‹å¤–çš„æƒ…å†µå‘¢ï¼Ÿæ¯”å¦‚æœ€åçš„ ABABCABAA â€“&gt; len = 1, i = 8</p>\n<ul>\n<li>[0, 1, 2, 3, 4, 5, 6, 7, 8] å­—ç¬¦ä¸²æ•°ç»„ä¸‹æ ‡ç´¢å¼•</li>\n<li>[A, B, A, B, C, A, B, A, A] å­—ç¬¦ä¸²æ•°ç»„</li>\n<li>[0, 0, 1, 2, 0, 1, 2, 3, ?] prefixTable<ul>\n<li>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå‰ä¸€ä¸ªå­—ç¬¦ A å¯¹åº”çš„ prefix ä¸º 3ï¼Œå¯¹åº”çš„pattern[3]ä¸º Bï¼ˆprefix[len - 1] === Bï¼‰ï¼ŒBçš„å‰ä¸€ä¸ªå­—ç¬¦ A å¯¹åº”çš„ prefix ä¸º 1ï¼ˆlen = prefix[len - 1] â€“&gt; 0ï¼‰ï¼Œpattern[1] ä¸º Aï¼Œå†æ‰§è¡Œä¸Šå±‚ä»£ç  prefix[8] === len[0]</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>KMP æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦å®ç°</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">prefixTable</span>(<span class=\"params\">pattern, prefix, n</span>) </span>&#123;</span><br><span class=\"line\">    prefix[<span class=\"number\">0</span>] = <span class=\"number\">0</span>; <span class=\"comment\">// prefix åˆå§‹</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> len = <span class=\"number\">0</span>; <span class=\"comment\">// æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> i = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt; n) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (pattern[i] === pattern[len]) &#123;</span><br><span class=\"line\">        len ++;</span><br><span class=\"line\">        prefix[i] = len;</span><br><span class=\"line\">        i ++;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (len &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          len = prefix[len - <span class=\"number\">1</span>]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          prefix[i] = len</span><br><span class=\"line\">          i ++</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(prefix)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>è¿è¡Œç»“æœ</p>\n<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/354d6d33c10aa23f150c26a68a09f19084870.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n<li><p>å†æ·»ä¸€å±‚å¤„ç†ï¼Œå› ä¸ºå‰ç¼€æ˜¯ä¸ä¸ä¼šåŒ…æ‹¬è‡ªå·±æœ¬èº«çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ•´ä½“åç§»ä¸€ä½ï¼Œå¹¶ä¸”ï¼Œç©ºå‡ºæ¥çš„ç¬¬ä¸€é¡¹ç½®ä¸º -1</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">movePrefixTable</span>(<span class=\"params\">prefix, n</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = n - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i --) &#123;</span><br><span class=\"line\">      prefix[i] = prefix[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    prefix[<span class=\"number\">0</span>] = <span class=\"number\">-1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"KMP-å¤„ç†-pattern\"><a href=\"#KMP-å¤„ç†-pattern\" class=\"headerlink\" title=\"KMP å¤„ç† pattern\"></a>KMP å¤„ç† pattern</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">prefixTable</span>(<span class=\"params\">pattern, prefix, n</span>) </span>&#123;</span><br><span class=\"line\">  prefix[<span class=\"number\">0</span>] = <span class=\"number\">0</span>; <span class=\"comment\">// prefix åˆå§‹</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = <span class=\"number\">0</span>; <span class=\"comment\">// æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> i = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(i &lt; n) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (pattern[i] === pattern[len]) &#123;</span><br><span class=\"line\">      len ++;</span><br><span class=\"line\">      prefix[i] = len;</span><br><span class=\"line\">      i ++;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (len &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        len = prefix[len - <span class=\"number\">1</span>]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        prefix[i] = len</span><br><span class=\"line\">        i ++</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(prefix)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">movePrefixTable</span>(<span class=\"params\">prefix, n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = n - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i --) &#123;</span><br><span class=\"line\">    prefix[i] = prefix[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  prefix[<span class=\"number\">0</span>] = <span class=\"number\">-1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">kmpSearch</span>(<span class=\"params\">text, pattern</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> patternArray = pattern.split(<span class=\"string\">\"\"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> patternLen = patternArray.length</span><br><span class=\"line\">  <span class=\"keyword\">const</span> textArray = text.split(<span class=\"string\">\"\"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> textLen = textArray.length</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> prefixArray = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(patternLen)</span><br><span class=\"line\">  prefixTable(patternArray, prefixArray, patternLen)</span><br><span class=\"line\">  movePrefixTable(prefixArray, patternLen)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// console.log('prefixTemp', prefixTemp)</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'prefixArray'</span>, prefixArray)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// textArray len m</span></span><br><span class=\"line\">  <span class=\"comment\">// pattern len n</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(i &lt; textLen) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (j === patternLen - <span class=\"number\">1</span> &amp;&amp; textArray[i] === patternArray[j]) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Found pattern at \"</span>, i - j)</span><br><span class=\"line\">      j = prefixArray[j]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (textArray[i] === patternArray[j]) &#123;</span><br><span class=\"line\">      i ++;</span><br><span class=\"line\">      j ++;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      j = prefixArray[j]</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (j === <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">        i ++;</span><br><span class=\"line\">        j ++;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">kmpSearch(<span class=\"string\">\"ABABABABCABAAB\"</span>, <span class=\"string\">\"ABABCABAA\"</span>)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/f4273ce6b530673651ce3a9f513c730760549.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/214a8fcf81cda92716e44270f816392663018.png\" alt=\"è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"åŸºäº-KMP-çš„-FSM-å¤„ç†-pattern\"><a href=\"#åŸºäº-KMP-çš„-FSM-å¤„ç†-pattern\" class=\"headerlink\" title=\"åŸºäº KMP çš„ FSM å¤„ç† pattern\"></a>åŸºäº KMP çš„ FSM å¤„ç† pattern</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> textArray = [] <span class=\"comment\">// æœªçŸ¥å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> text = <span class=\"string\">\"\"</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> textLen = <span class=\"number\">0</span> <span class=\"comment\">// æœªçŸ¥å­—ç¬¦ä¸²é•¿åº¦</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> patternArray = [] <span class=\"comment\">// pattern å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> pattern = <span class=\"string\">\"\"</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> patternLen <span class=\"comment\">// æœªçŸ¥ pattern é•¿åº¦</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> prefixArray = <span class=\"literal\">null</span> <span class=\"comment\">// KMP prefix table</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> len = <span class=\"number\">0</span> <span class=\"comment\">// æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">initState</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  patternArray = pattern.split(<span class=\"string\">\"\"</span>)</span><br><span class=\"line\">  patternLen = patternArray.length</span><br><span class=\"line\">  textArray = text.split(<span class=\"string\">\"\"</span>)</span><br><span class=\"line\">  textLen = textArray.length</span><br><span class=\"line\">  prefixArray = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(patternLen)</span><br><span class=\"line\">  prefixArray[<span class=\"number\">0</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> patteranStart</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">patteranStart</span>(<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (patternArray[i] === patternArray[len]) &#123;</span><br><span class=\"line\">    len++;</span><br><span class=\"line\">    prefixArray[i] = len;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">needAdd</span>: <span class=\"literal\">true</span> &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (len &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      len = prefixArray[len - <span class=\"number\">1</span>]</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">needAdd</span>: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      prefixArray[i] = len</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">needAdd</span>: <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (i ===  patternLen) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> movePrefixTable</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">movePrefixTable</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = patternLen - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">    prefixArray[i] = prefixArray[i - <span class=\"number\">1</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  prefixArray[<span class=\"number\">0</span>] = <span class=\"number\">-1</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> KMPSearch</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">KMPSearch</span>(<span class=\"params\">i, j</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (j === patternLen - <span class=\"number\">1</span> &amp;&amp; textArray[i] === patternArray[j]) &#123;</span><br><span class=\"line\">    j = prefixArray[j]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">iNeedAdd</span>: <span class=\"literal\">false</span>, <span class=\"attr\">jNeedAdd</span>: <span class=\"literal\">false</span>, <span class=\"attr\">isMatched</span>: <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (textArray[i] === patternArray[j]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">iNeedAdd</span>: <span class=\"literal\">true</span>, <span class=\"attr\">jNeedAdd</span>: <span class=\"literal\">true</span>, <span class=\"attr\">isMatched</span>: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    j = prefixArray[j]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (j === <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">iNeedAdd</span>: <span class=\"literal\">true</span>, <span class=\"attr\">jNeedAdd</span>: <span class=\"literal\">true</span>, <span class=\"attr\">isMatched</span>: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123; <span class=\"attr\">iNeedAdd</span>: <span class=\"literal\">true</span>, <span class=\"attr\">jNeedAdd</span>: <span class=\"literal\">false</span>, <span class=\"attr\">isMatched</span>: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> STATUS_MAP = &#123;</span><br><span class=\"line\">  <span class=\"string\">\"init\"</span>: initState,</span><br><span class=\"line\">  <span class=\"string\">\"prefixtable\"</span>: patteranStart,</span><br><span class=\"line\">  <span class=\"string\">\"movePrefixTable\"</span>: movePrefixTable,</span><br><span class=\"line\">  <span class=\"string\">\"KMPSearch\"</span>: KMPSearch</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">match</span>(<span class=\"params\">_text, _pattern</span>) </span>&#123;</span><br><span class=\"line\">  text = _text</span><br><span class=\"line\">  pattern = _pattern</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> patternState = initState</span><br><span class=\"line\">  <span class=\"keyword\">let</span> STATUS_MAP_KEYS = <span class=\"built_in\">Object</span>.keys(STATUS_MAP)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> status = <span class=\"number\">0</span>; status &lt; STATUS_MAP_KEYS.length; status++) &#123;</span><br><span class=\"line\">    patternState = STATUS_MAP[STATUS_MAP_KEYS[status]]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (STATUS_MAP_KEYS[status] === <span class=\"string\">\"init\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      patternState()</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (STATUS_MAP_KEYS[status] === <span class=\"string\">\"prefixtable\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">let</span> res = &#123; <span class=\"attr\">len</span>: <span class=\"number\">0</span>, <span class=\"attr\">needAdd</span>: <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt;= patternLen; res.needAdd &amp;&amp; i++) &#123;</span><br><span class=\"line\">        res = patternState(i)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (STATUS_MAP_KEYS[status] === <span class=\"string\">\"movePrefixTable\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      patternState()</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (STATUS_MAP_KEYS[status] === <span class=\"string\">\"KMPSearch\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">let</span> kmpSearchRes = &#123; <span class=\"attr\">iNeedAdd</span>: <span class=\"literal\">false</span>, <span class=\"attr\">jNeedAdd</span>: <span class=\"literal\">false</span>, <span class=\"attr\">isMatched</span>: <span class=\"literal\">false</span> &#125;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>; i &lt; textLen;) &#123;</span><br><span class=\"line\">        kmpSearchRes = patternState(i, j)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (kmpSearchRes.isMatched) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">\"First Found pattern at \"</span>, i - j)</span><br><span class=\"line\">          <span class=\"keyword\">return</span> kmpSearchRes.isMatched</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (kmpSearchRes.iNeedAdd)</span><br><span class=\"line\">          i++</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (kmpSearchRes.jNeedAdd)</span><br><span class=\"line\">          j++</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> kmpSearchRes.isMatched</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">match(<span class=\"string\">\"ABABABABCABAAB\"</span>, <span class=\"string\">\"ABABCABAA\"</span>)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿è¡Œç»“æœ<ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/7079d40d337c97ae742c21e0f7a2f87320359.png\" alt=\"åŸºäº KMP çš„ FSM å¤„ç† pattern è¿è¡Œç»“æœ\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h2><ul>\n<li><a href=\"https://www.bilibili.com/video/BV1Px411z7Yo\" target=\"_blank\" rel=\"noopener\">KMP ç®—æ³•è§†é¢‘è®²è§£</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2013/05/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html\" target=\"_blank\" rel=\"noopener\">KMP-æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>æ„Ÿè°¢åœ¨ KMP ç®—æ³•æŠ˜è…¾æ—¶ï¼Œæä¾›å¸®åŠ©çš„ ç”°ç¥å¤§å¤§ã€ ğŸ¤« ç­‰æˆ‘æœ‰ä»–è”ç³»æ–¹å¼äº†ï¼Œæˆ‘æ‚„æ‚„åŒæ­¥ç»™ä½ ä»¬</li>\n<li>å­¦è€Œä¸æ€åˆ™ç½”</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"layout":"å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†","title":"å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†","date":"2020-04-05T03:47:05.000Z","description":["è®°å½•åŸºäº[å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†](https://developers.weixin.qq.com/community/develop/doc/000e4e7103c3c090e517e0cdb5b806)å®ç°ä¸­äº§ç”Ÿçš„é—®é¢˜åŠæ€è€ƒ"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n##  å†™åœ¨å‰é¢\n- è®°å½•åŸºäº[å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†](https://developers.weixin.qq.com/community/develop/doc/000e4e7103c3c090e517e0cdb5b806)å®ç°ä¸­äº§ç”Ÿçš„é—®é¢˜åŠæ€è€ƒ\n- - -\n## é—®é¢˜æˆªå›¾\n![popoveré—®é¢˜æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzlkMGY1NmUxOTVkNzFjMjAyYzVkYzI0OGMxMzg0NmUxMTQ3MTQucG5n?x-oss-process=image/format,png)\n## é—®é¢˜æè¿°\n- æ¨¡æ‹Ÿå™¨æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†åœ¨çœŸæœºä¸Šç‚¹å‡»åï¼Œæ°”æ³¡æ¡†çš„ç®­å¤´å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œä¸”ç‚¹å‡»åŒä¸€çº§åˆ«åŒºåŸŸï¼Œèƒ½åˆ©ç”¨è¦†ç›–æ¶ˆé™¤ç®­å¤´ã€‚ã€æ˜¯ä¸æ˜¯ä¸€ä¸ªå¾ˆå¯çˆ±çš„bugï¼Ÿ\n<!-- more -->\n\n## é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\n- å®šä½é—®é¢˜å‘ç”Ÿçš„åŸå› èŒƒå›´\n\t- æ ·å¼\n\t\t- æ ·å¼åœ¨åˆ¤æ–­æ˜¾ç¤ºæ¡ä»¶(wx:if=\"{{visible}}\")ç”Ÿæ•ˆåï¼Œä»ç„¶æ¸²æŸ“\n\t\t- å¦å®šåŸå› \n\t\t\t- æŸ¥è¯¢ä»£ç å‘ç°ï¼Œæ•´ä¸ªæ ·å¼èƒŒæ™¯çš„è®¾å®šæ˜¯åœ¨::beforeä¼ªå…ƒç´ é€‰æ‹©å™¨ä¸­\n\t\t\t- ä¸”æ˜¾ç¤ºæ¡ä»¶ç”Ÿæ•ˆï¼Œåœ¨è°ƒè¯•å™¨ä¸­å·²æ²¡æœ‰è¯¥å…ƒç´ ï¼Œä½†ä»æ˜¾ç¤º\n\t- é€»è¾‘\n\t\t- ä¼šä¸ä¼šæ˜¯ç»„ä»¶åœ¨æ¸²æŸ“æ—¶ï¼Œå¤šæ¸²æŸ“ä¸€ä»½ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ¤æ–­æ¡ä»¶è¿›è¡Œå¼€å…³æ—¶ï¼Œåªæ˜¯å¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œäº†æ“ä½œ\n\t\t- æ€€ç–‘ä¾æ®\n\t\t\t- ![popoveré—®é¢˜ä¾æ®æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzk5ZjcwMDAwZmViM2IwYzc0MWJmNjFiYzE5YTUwMDIxMjYyMTI3LnBuZw?x-oss-process=image/format,png)\n\t\t\t- ä¸Šå›¾å¯è§ï¼šåœ¨popoverç»„ä»¶ä¸‹ï¼Œæœ‰2ä¸ªé€šè¿‡&lt;slot&gt;æ’å…¥çš„ç›¸åŒå†…å®¹\n\n- å¼€å§‹è§£å†³é—®é¢˜\n\t- æŸ¥è¯¢å®˜æ–¹å…³äº[slot](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html)æ–¹é¢çš„ä»‹ç»\n\t\t- ![å®˜æ–¹slotåŸºç¡€ä¾‹å­](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JjMTE0ZmI0YTdhOWZkY2ZlYzU3ZDE5ZWQyYWY0YzI3MzE1NTU4LnBuZw?x-oss-process=image/format,png)\n\t- åŸºäºå®˜æ–¹åŸºç¡€ä»£ç ï¼Œå¤ç°é—®é¢˜\n\t\t- äº§ç”Ÿä¸€ä¸ªchild-tagç»„ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­ç¼–å†™\n\t\t\t```javascript\n\t\t\t// components/child-tag.js.js\n\t\t\tComponent({\n\t\t\t  options: {\n\t\t\t    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ\n\t\t\t  },\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨\n\t\t\t   */\n\t\t\t  properties: {\n\t\t\t\n\t\t\t  },\n\t\t\t  relations: {\n\t\t\t    './component-tag-name': {\n\t\t\t      type: 'parent',\n\t\t\t    }\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„åˆå§‹æ•°æ®\n\t\t\t   */\n\t\t\t  data: {\n\t\t\t\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨\n\t\t\t   */\n\t\t\t  methods: {\n\t\t\t\n\t\t\t  }\n\t\t\t})\n\t\t\t```\n\t\t- ä¸component-tag-nameç»‘å®šå½¢æˆçˆ¶å­ç»„ä»¶\n\t\t\t```javascript\n\t\t\t// components/component-tag-name.js\n\t\t\tComponent({\n\t\t\t  options: {\n\t\t\t    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ\n\t\t\t  },\n\t\t\t  relations: {\n\t\t\t    './child-tag': {\n\t\t\t      type: 'child',\n\t\t\t    }\n\t\t\t  },\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨\n\t\t\t   */\n\t\t\t  properties: {\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„åˆå§‹æ•°æ®\n\t\t\t   */\n\t\t\t  data: {\n\t\t\t    visible: false\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨\n\t\t\t   */\n\t\t\t  methods: {\n\t\t\t  \n\t\t\t  }\n\t\t\t})\n\t\t\t```\n\t\t- å¹¶å°†index.htmlä¸­è¿›è¡Œè°ƒç”¨\n\t\t\t```html\n\t\t\t<!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡ç‰ˆ -->\n\t\t\t<view>\n\t\t\t  <button type=\"primary\" bindtap=\"onTap\">222</button>\n\t\t\t\t<my-component id=\"component\">\n\t\t\t\t\t<view slot=\"content\">\n\t\t\t\t\t\tè¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"content\"ä¸­çš„å†…å®¹\n\t\t\t\t\t\t<child-component>\n\t\t\t\t\t\t\t<view slot=\"child\">è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"child\"ä¸­çš„å†…å®¹</view>\n\t\t\t\t\t\t</child-component>\n\t\t\t\t\t</view>\n\t\t\t\t</my-component>\n\t\t\t</view>\n\t\t\t```\n\t\t- ä½†æ˜¯å…¶ç»“æ„æ ‘ä»ç„¶éå¸¸æ­£å¸¸ï¼Œå¹¶æ²¡æœ‰å‡ºç°é‚£ä¸ªæ‰€è°“çš„\"æ‹·è´\"ç»„ä»¶\n\t\t\t- ![æ”¹å†™v1.1åçš„ç»“æ„æ ‘æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzcwNTRhNjJkYmM2MGEyNmU5ZGI1ODYzNzNjOGY2OTgyMzg3NTI0LnBuZw?x-oss-process=image/format,png)\n\t\t\t- ä»”ç»†å¤ç°äº†å‡ æ¬¡ï¼Œå‘ç°ï¼šå¤šå‡ºæ¥çš„é‚£ä¸ªç»„ä»¶ä¼šæœ‰æ‰€å»¶è¿Ÿã€‚æŠ“ä½è¿™ä¸ªé—®é¢˜ï¼Œæƒ³åˆ°æˆ‘ä»¬åœ¨onReadyä¸­ï¼Œæ³¨å†Œäº†è¯¥ç»„ä»¶ï¼Œäºæ˜¯ï¼Œç»§ç»­æ¨¡æ‹Ÿ\n\t\t- ä¿®æ”¹index.jsä»£ç ï¼Œå¹¶åœ¨component-tag-nameç»„ä»¶æ³¨å†ŒonTapæ–¹æ³•ï¼Œæ§åˆ¶æ˜¾éš\n\t\t\t```javascript\n\t\t\t  onReady() {\n\t\t\t    this.component = this.selectComponent('#component')\n\t\t\t  },\n\t\t\t  onTap() {\n\t\t\t    console.log('onTap')\n\t\t\t    wx.createSelectorQuery().select('#component').boundingClientRect(res => {\n\t\t\t        // è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶ popover ä¸­çš„ onDisplay æ–¹æ³•\n\t\t\t        this.component.onTap();\n\t\t\t    }).exec();\n\t\t\t  }\n\t\t\t\t```\n\t\t- æœ€ç»ˆå¤ç°\n\t\t\t- ![å®˜æ–¹æ¨¡æ‹Ÿæœ€ç»ˆè¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmZjQ3OTNhMjUwYTNjMzlhYjBlOGQxMGJhYTllZmI2NDc1NjIyLnBuZw?x-oss-process=image/format,png)\n\t- å¾—å‡ºé—®é¢˜æ¥æºï¼š\n\t\t- åœ¨ç»„ä»¶ä¸­è¿›è¡Œäº†ä¸€æ¬¡setData\n\t- æ€è€ƒèƒŒåé—®é¢˜\n\t\t- åœ¨ç»„ä»¶ä¸­setDataä¸ºä»€ä¹ˆä¼šâ€æ‹·è´â€œä¸€ä»½ç›¸åŒçš„åœ¨é¡µé¢çº§wxmlä¸­ï¼Ÿ\n\t\t- çŒœæƒ³ä¸€ï¼šä»[WXSå“åº”äº‹ä»¶](https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88)ä¸­ï¼Œæˆ‘éšéšå¾—åˆ°äº†ç­”æ¡ˆ\n\t\t- ![wxsç›¸åº”äº‹ä»¶](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzZlYWJjYjdjOTliMzAxNWMwOGQwZmM2YWM3ZmMxMGMzNDU5NDAxLnBuZw?x-oss-process=image/format,png)\n\t\t- æˆ‘ä»¬åœ¨é¡µé¢çº§é€šè¿‡selectComponentå®ä¾‹åŒ–ç»„ä»¶ï¼Œå¯¹é€‰ä¸­çš„ç»„ä»¶è¿›è¡Œæ“ä½œï¼Œå®˜æ–¹å¯ä»¥é€šè¿‡æ‹·è´ä¸€ä»½ç›¸åŒçš„ç»„ä»¶ï¼Œä½¿æˆ‘ä»¬ä¾¿æ·çš„å°†äº‹ä»¶çš„å¤„ç†ä»2æ¬¡çš„é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ï¼Œå‡å°‘åˆ°ç›´æ¥å¯¹é¡µé¢ä¸Šå…ƒç´ è¿›è¡Œæ“ä½œï¼Œå³ä¸€æ¬¡é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ã€‚\n\t\t- çŒœæƒ³äºŒï¼šé—®é¢˜å±‚é¢æ˜¯åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­çš„wxmlï¼Œæ¸²æŸ“æ–¹å¼å¯¹äºè¿™ç§æƒ…å†µå°±æ˜¯è¿™æ ·å¤„ç†çš„ã€‚\n- å®˜æ–¹å·²ç»™å‡ºé—®é¢˜åŸå› \n\t- ![wxmlé¢æ¿](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzJkMWVkZmYyNWIwM2YxZDU2ZGVjYjZhM2NkYjAwMGU5NTE5ODQucG5n?x-oss-process=image/format,png)\n\n## å¦‚ä½•è§£å†³é—®é¢˜\n- åœ¨popoverä»¥åŠpopover-itemåŠ å…¥\n\t```javascript\n\toptions: {\n\t\t\t    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ\n\t\t\t  },\n\t```\n- å°±å¯ä»¥è§£å†³äº†ã€‚æœ€åå»ºè®®slotä¸­å¯ä»¥å†™ä¸Šnameè¿™æ ·ä»£ç å¯èƒ½ä¼šæ›´æ˜“è¯»ã€‚\n##  å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n---","source":"_posts/å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡† Popover.md","raw":"---\nlayout: å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†\ntitle: å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†\ndate: 2020-04-05 11:47:05\ntags: \n- å¾®ä¿¡å°ç¨‹åº\ncategories:\n- å¾®ä¿¡å°ç¨‹åº\ndescription:\n  - è®°å½•åŸºäº[å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†](https://developers.weixin.qq.com/community/develop/doc/000e4e7103c3c090e517e0cdb5b806)å®ç°ä¸­äº§ç”Ÿçš„é—®é¢˜åŠæ€è€ƒ\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n##  å†™åœ¨å‰é¢\n- è®°å½•åŸºäº[å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†](https://developers.weixin.qq.com/community/develop/doc/000e4e7103c3c090e517e0cdb5b806)å®ç°ä¸­äº§ç”Ÿçš„é—®é¢˜åŠæ€è€ƒ\n- - -\n## é—®é¢˜æˆªå›¾\n![popoveré—®é¢˜æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzlkMGY1NmUxOTVkNzFjMjAyYzVkYzI0OGMxMzg0NmUxMTQ3MTQucG5n?x-oss-process=image/format,png)\n## é—®é¢˜æè¿°\n- æ¨¡æ‹Ÿå™¨æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†åœ¨çœŸæœºä¸Šç‚¹å‡»åï¼Œæ°”æ³¡æ¡†çš„ç®­å¤´å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œä¸”ç‚¹å‡»åŒä¸€çº§åˆ«åŒºåŸŸï¼Œèƒ½åˆ©ç”¨è¦†ç›–æ¶ˆé™¤ç®­å¤´ã€‚ã€æ˜¯ä¸æ˜¯ä¸€ä¸ªå¾ˆå¯çˆ±çš„bugï¼Ÿ\n<!-- more -->\n\n## é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\n- å®šä½é—®é¢˜å‘ç”Ÿçš„åŸå› èŒƒå›´\n\t- æ ·å¼\n\t\t- æ ·å¼åœ¨åˆ¤æ–­æ˜¾ç¤ºæ¡ä»¶(wx:if=\"{{visible}}\")ç”Ÿæ•ˆåï¼Œä»ç„¶æ¸²æŸ“\n\t\t- å¦å®šåŸå› \n\t\t\t- æŸ¥è¯¢ä»£ç å‘ç°ï¼Œæ•´ä¸ªæ ·å¼èƒŒæ™¯çš„è®¾å®šæ˜¯åœ¨::beforeä¼ªå…ƒç´ é€‰æ‹©å™¨ä¸­\n\t\t\t- ä¸”æ˜¾ç¤ºæ¡ä»¶ç”Ÿæ•ˆï¼Œåœ¨è°ƒè¯•å™¨ä¸­å·²æ²¡æœ‰è¯¥å…ƒç´ ï¼Œä½†ä»æ˜¾ç¤º\n\t- é€»è¾‘\n\t\t- ä¼šä¸ä¼šæ˜¯ç»„ä»¶åœ¨æ¸²æŸ“æ—¶ï¼Œå¤šæ¸²æŸ“ä¸€ä»½ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ¤æ–­æ¡ä»¶è¿›è¡Œå¼€å…³æ—¶ï¼Œåªæ˜¯å¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œäº†æ“ä½œ\n\t\t- æ€€ç–‘ä¾æ®\n\t\t\t- ![popoveré—®é¢˜ä¾æ®æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzk5ZjcwMDAwZmViM2IwYzc0MWJmNjFiYzE5YTUwMDIxMjYyMTI3LnBuZw?x-oss-process=image/format,png)\n\t\t\t- ä¸Šå›¾å¯è§ï¼šåœ¨popoverç»„ä»¶ä¸‹ï¼Œæœ‰2ä¸ªé€šè¿‡&lt;slot&gt;æ’å…¥çš„ç›¸åŒå†…å®¹\n\n- å¼€å§‹è§£å†³é—®é¢˜\n\t- æŸ¥è¯¢å®˜æ–¹å…³äº[slot](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html)æ–¹é¢çš„ä»‹ç»\n\t\t- ![å®˜æ–¹slotåŸºç¡€ä¾‹å­](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JjMTE0ZmI0YTdhOWZkY2ZlYzU3ZDE5ZWQyYWY0YzI3MzE1NTU4LnBuZw?x-oss-process=image/format,png)\n\t- åŸºäºå®˜æ–¹åŸºç¡€ä»£ç ï¼Œå¤ç°é—®é¢˜\n\t\t- äº§ç”Ÿä¸€ä¸ªchild-tagç»„ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­ç¼–å†™\n\t\t\t```javascript\n\t\t\t// components/child-tag.js.js\n\t\t\tComponent({\n\t\t\t  options: {\n\t\t\t    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ\n\t\t\t  },\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨\n\t\t\t   */\n\t\t\t  properties: {\n\t\t\t\n\t\t\t  },\n\t\t\t  relations: {\n\t\t\t    './component-tag-name': {\n\t\t\t      type: 'parent',\n\t\t\t    }\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„åˆå§‹æ•°æ®\n\t\t\t   */\n\t\t\t  data: {\n\t\t\t\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨\n\t\t\t   */\n\t\t\t  methods: {\n\t\t\t\n\t\t\t  }\n\t\t\t})\n\t\t\t```\n\t\t- ä¸component-tag-nameç»‘å®šå½¢æˆçˆ¶å­ç»„ä»¶\n\t\t\t```javascript\n\t\t\t// components/component-tag-name.js\n\t\t\tComponent({\n\t\t\t  options: {\n\t\t\t    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ\n\t\t\t  },\n\t\t\t  relations: {\n\t\t\t    './child-tag': {\n\t\t\t      type: 'child',\n\t\t\t    }\n\t\t\t  },\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨\n\t\t\t   */\n\t\t\t  properties: {\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„åˆå§‹æ•°æ®\n\t\t\t   */\n\t\t\t  data: {\n\t\t\t    visible: false\n\t\t\t  },\n\t\t\t\n\t\t\t  /**\n\t\t\t   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨\n\t\t\t   */\n\t\t\t  methods: {\n\t\t\t  \n\t\t\t  }\n\t\t\t})\n\t\t\t```\n\t\t- å¹¶å°†index.htmlä¸­è¿›è¡Œè°ƒç”¨\n\t\t\t```html\n\t\t\t<!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡ç‰ˆ -->\n\t\t\t<view>\n\t\t\t  <button type=\"primary\" bindtap=\"onTap\">222</button>\n\t\t\t\t<my-component id=\"component\">\n\t\t\t\t\t<view slot=\"content\">\n\t\t\t\t\t\tè¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"content\"ä¸­çš„å†…å®¹\n\t\t\t\t\t\t<child-component>\n\t\t\t\t\t\t\t<view slot=\"child\">è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"child\"ä¸­çš„å†…å®¹</view>\n\t\t\t\t\t\t</child-component>\n\t\t\t\t\t</view>\n\t\t\t\t</my-component>\n\t\t\t</view>\n\t\t\t```\n\t\t- ä½†æ˜¯å…¶ç»“æ„æ ‘ä»ç„¶éå¸¸æ­£å¸¸ï¼Œå¹¶æ²¡æœ‰å‡ºç°é‚£ä¸ªæ‰€è°“çš„\"æ‹·è´\"ç»„ä»¶\n\t\t\t- ![æ”¹å†™v1.1åçš„ç»“æ„æ ‘æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzcwNTRhNjJkYmM2MGEyNmU5ZGI1ODYzNzNjOGY2OTgyMzg3NTI0LnBuZw?x-oss-process=image/format,png)\n\t\t\t- ä»”ç»†å¤ç°äº†å‡ æ¬¡ï¼Œå‘ç°ï¼šå¤šå‡ºæ¥çš„é‚£ä¸ªç»„ä»¶ä¼šæœ‰æ‰€å»¶è¿Ÿã€‚æŠ“ä½è¿™ä¸ªé—®é¢˜ï¼Œæƒ³åˆ°æˆ‘ä»¬åœ¨onReadyä¸­ï¼Œæ³¨å†Œäº†è¯¥ç»„ä»¶ï¼Œäºæ˜¯ï¼Œç»§ç»­æ¨¡æ‹Ÿ\n\t\t- ä¿®æ”¹index.jsä»£ç ï¼Œå¹¶åœ¨component-tag-nameç»„ä»¶æ³¨å†ŒonTapæ–¹æ³•ï¼Œæ§åˆ¶æ˜¾éš\n\t\t\t```javascript\n\t\t\t  onReady() {\n\t\t\t    this.component = this.selectComponent('#component')\n\t\t\t  },\n\t\t\t  onTap() {\n\t\t\t    console.log('onTap')\n\t\t\t    wx.createSelectorQuery().select('#component').boundingClientRect(res => {\n\t\t\t        // è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶ popover ä¸­çš„ onDisplay æ–¹æ³•\n\t\t\t        this.component.onTap();\n\t\t\t    }).exec();\n\t\t\t  }\n\t\t\t\t```\n\t\t- æœ€ç»ˆå¤ç°\n\t\t\t- ![å®˜æ–¹æ¨¡æ‹Ÿæœ€ç»ˆè¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmZjQ3OTNhMjUwYTNjMzlhYjBlOGQxMGJhYTllZmI2NDc1NjIyLnBuZw?x-oss-process=image/format,png)\n\t- å¾—å‡ºé—®é¢˜æ¥æºï¼š\n\t\t- åœ¨ç»„ä»¶ä¸­è¿›è¡Œäº†ä¸€æ¬¡setData\n\t- æ€è€ƒèƒŒåé—®é¢˜\n\t\t- åœ¨ç»„ä»¶ä¸­setDataä¸ºä»€ä¹ˆä¼šâ€æ‹·è´â€œä¸€ä»½ç›¸åŒçš„åœ¨é¡µé¢çº§wxmlä¸­ï¼Ÿ\n\t\t- çŒœæƒ³ä¸€ï¼šä»[WXSå“åº”äº‹ä»¶](https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88)ä¸­ï¼Œæˆ‘éšéšå¾—åˆ°äº†ç­”æ¡ˆ\n\t\t- ![wxsç›¸åº”äº‹ä»¶](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzZlYWJjYjdjOTliMzAxNWMwOGQwZmM2YWM3ZmMxMGMzNDU5NDAxLnBuZw?x-oss-process=image/format,png)\n\t\t- æˆ‘ä»¬åœ¨é¡µé¢çº§é€šè¿‡selectComponentå®ä¾‹åŒ–ç»„ä»¶ï¼Œå¯¹é€‰ä¸­çš„ç»„ä»¶è¿›è¡Œæ“ä½œï¼Œå®˜æ–¹å¯ä»¥é€šè¿‡æ‹·è´ä¸€ä»½ç›¸åŒçš„ç»„ä»¶ï¼Œä½¿æˆ‘ä»¬ä¾¿æ·çš„å°†äº‹ä»¶çš„å¤„ç†ä»2æ¬¡çš„é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ï¼Œå‡å°‘åˆ°ç›´æ¥å¯¹é¡µé¢ä¸Šå…ƒç´ è¿›è¡Œæ“ä½œï¼Œå³ä¸€æ¬¡é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ã€‚\n\t\t- çŒœæƒ³äºŒï¼šé—®é¢˜å±‚é¢æ˜¯åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­çš„wxmlï¼Œæ¸²æŸ“æ–¹å¼å¯¹äºè¿™ç§æƒ…å†µå°±æ˜¯è¿™æ ·å¤„ç†çš„ã€‚\n- å®˜æ–¹å·²ç»™å‡ºé—®é¢˜åŸå› \n\t- ![wxmlé¢æ¿](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzJkMWVkZmYyNWIwM2YxZDU2ZGVjYjZhM2NkYjAwMGU5NTE5ODQucG5n?x-oss-process=image/format,png)\n\n## å¦‚ä½•è§£å†³é—®é¢˜\n- åœ¨popoverä»¥åŠpopover-itemåŠ å…¥\n\t```javascript\n\toptions: {\n\t\t\t    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ\n\t\t\t  },\n\t```\n- å°±å¯ä»¥è§£å†³äº†ã€‚æœ€åå»ºè®®slotä¸­å¯ä»¥å†™ä¸Šnameè¿™æ ·ä»£ç å¯èƒ½ä¼šæ›´æ˜“è¯»ã€‚\n##  å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n---","slug":"å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡† Popover","published":1,"updated":"2020-10-27T15:21:11.266Z","comments":1,"photos":[],"link":"","_id":"ckguz3u8c002zfw9k8fbh5p92","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>è®°å½•åŸºäº<a href=\"https://developers.weixin.qq.com/community/develop/doc/000e4e7103c3c090e517e0cdb5b806\" target=\"_blank\" rel=\"noopener\">å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†</a>å®ç°ä¸­äº§ç”Ÿçš„é—®é¢˜åŠæ€è€ƒ</li>\n</ul>\n<hr>\n<h2 id=\"é—®é¢˜æˆªå›¾\"><a href=\"#é—®é¢˜æˆªå›¾\" class=\"headerlink\" title=\"é—®é¢˜æˆªå›¾\"></a>é—®é¢˜æˆªå›¾</h2><p><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzlkMGY1NmUxOTVkNzFjMjAyYzVkYzI0OGMxMzg0NmUxMTQ3MTQucG5n?x-oss-process=image/format,png\" alt=\"popoveré—®é¢˜æˆªå›¾\"></p>\n<h2 id=\"é—®é¢˜æè¿°\"><a href=\"#é—®é¢˜æè¿°\" class=\"headerlink\" title=\"é—®é¢˜æè¿°\"></a>é—®é¢˜æè¿°</h2><ul>\n<li>æ¨¡æ‹Ÿå™¨æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†åœ¨çœŸæœºä¸Šç‚¹å‡»åï¼Œæ°”æ³¡æ¡†çš„ç®­å¤´å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œä¸”ç‚¹å‡»åŒä¸€çº§åˆ«åŒºåŸŸï¼Œèƒ½åˆ©ç”¨è¦†ç›–æ¶ˆé™¤ç®­å¤´ã€‚ã€æ˜¯ä¸æ˜¯ä¸€ä¸ªå¾ˆå¯çˆ±çš„bugï¼Ÿ<a id=\"more\"></a>\n\n</li>\n</ul>\n<h2 id=\"é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\"><a href=\"#é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\" class=\"headerlink\" title=\"é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\"></a>é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•</h2><ul>\n<li><p>å®šä½é—®é¢˜å‘ç”Ÿçš„åŸå› èŒƒå›´</p>\n<ul>\n<li>æ ·å¼<ul>\n<li>æ ·å¼åœ¨åˆ¤æ–­æ˜¾ç¤ºæ¡ä»¶(wx:if=â€â€œ)ç”Ÿæ•ˆåï¼Œä»ç„¶æ¸²æŸ“</li>\n<li>å¦å®šåŸå› <ul>\n<li>æŸ¥è¯¢ä»£ç å‘ç°ï¼Œæ•´ä¸ªæ ·å¼èƒŒæ™¯çš„è®¾å®šæ˜¯åœ¨::beforeä¼ªå…ƒç´ é€‰æ‹©å™¨ä¸­</li>\n<li>ä¸”æ˜¾ç¤ºæ¡ä»¶ç”Ÿæ•ˆï¼Œåœ¨è°ƒè¯•å™¨ä¸­å·²æ²¡æœ‰è¯¥å…ƒç´ ï¼Œä½†ä»æ˜¾ç¤º</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>é€»è¾‘<ul>\n<li>ä¼šä¸ä¼šæ˜¯ç»„ä»¶åœ¨æ¸²æŸ“æ—¶ï¼Œå¤šæ¸²æŸ“ä¸€ä»½ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ¤æ–­æ¡ä»¶è¿›è¡Œå¼€å…³æ—¶ï¼Œåªæ˜¯å¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œäº†æ“ä½œ</li>\n<li>æ€€ç–‘ä¾æ®<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzk5ZjcwMDAwZmViM2IwYzc0MWJmNjFiYzE5YTUwMDIxMjYyMTI3LnBuZw?x-oss-process=image/format,png\" alt=\"popoveré—®é¢˜ä¾æ®æˆªå›¾\"></li>\n<li>ä¸Šå›¾å¯è§ï¼šåœ¨popoverç»„ä»¶ä¸‹ï¼Œæœ‰2ä¸ªé€šè¿‡&lt;slot&gt;æ’å…¥çš„ç›¸åŒå†…å®¹</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å¼€å§‹è§£å†³é—®é¢˜</p>\n<ul>\n<li>æŸ¥è¯¢å®˜æ–¹å…³äº<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html\" target=\"_blank\" rel=\"noopener\">slot</a>æ–¹é¢çš„ä»‹ç»<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JjMTE0ZmI0YTdhOWZkY2ZlYzU3ZDE5ZWQyYWY0YzI3MzE1NTU4LnBuZw?x-oss-process=image/format,png\" alt=\"å®˜æ–¹slotåŸºç¡€ä¾‹å­\"></li>\n</ul>\n</li>\n<li>åŸºäºå®˜æ–¹åŸºç¡€ä»£ç ï¼Œå¤ç°é—®é¢˜<ul>\n<li>äº§ç”Ÿä¸€ä¸ªchild-tagç»„ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­ç¼–å†™  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// components/child-tag.js.js</span></span><br><span class=\"line\">Component(&#123;</span><br><span class=\"line\">  options: &#123;</span><br><span class=\"line\">    multipleSlots: <span class=\"literal\">true</span> <span class=\"comment\">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  properties: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  relations: &#123;</span><br><span class=\"line\">    <span class=\"string\">'./component-tag-name'</span>: &#123;</span><br><span class=\"line\">      type: <span class=\"string\">'parent'</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>ä¸component-tag-nameç»‘å®šå½¢æˆçˆ¶å­ç»„ä»¶  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// components/component-tag-name.js</span></span><br><span class=\"line\">Component(&#123;</span><br><span class=\"line\">  options: &#123;</span><br><span class=\"line\">    multipleSlots: <span class=\"literal\">true</span> <span class=\"comment\">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  relations: &#123;</span><br><span class=\"line\">    <span class=\"string\">'./child-tag'</span>: &#123;</span><br><span class=\"line\">      type: <span class=\"string\">'child'</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  properties: &#123;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    visible: <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>å¹¶å°†index.htmlä¸­è¿›è¡Œè°ƒç”¨  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡ç‰ˆ --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"primary\"</span> <span class=\"attr\">bindtap</span>=<span class=\"string\">\"onTap\"</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">my-component</span> <span class=\"attr\">id</span>=<span class=\"string\">\"component\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"content\"</span>&gt;</span></span><br><span class=\"line\">\t\t\tè¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"content\"ä¸­çš„å†…å®¹</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">child-component</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"child\"</span>&gt;</span>è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"child\"ä¸­çš„å†…å®¹<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">child-component</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">my-component</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>ä½†æ˜¯å…¶ç»“æ„æ ‘ä»ç„¶éå¸¸æ­£å¸¸ï¼Œå¹¶æ²¡æœ‰å‡ºç°é‚£ä¸ªæ‰€è°“çš„â€æ‹·è´â€ç»„ä»¶<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzcwNTRhNjJkYmM2MGEyNmU5ZGI1ODYzNzNjOGY2OTgyMzg3NTI0LnBuZw?x-oss-process=image/format,png\" alt=\"æ”¹å†™v1.1åçš„ç»“æ„æ ‘æˆªå›¾\"></li>\n<li>ä»”ç»†å¤ç°äº†å‡ æ¬¡ï¼Œå‘ç°ï¼šå¤šå‡ºæ¥çš„é‚£ä¸ªç»„ä»¶ä¼šæœ‰æ‰€å»¶è¿Ÿã€‚æŠ“ä½è¿™ä¸ªé—®é¢˜ï¼Œæƒ³åˆ°æˆ‘ä»¬åœ¨onReadyä¸­ï¼Œæ³¨å†Œäº†è¯¥ç»„ä»¶ï¼Œäºæ˜¯ï¼Œç»§ç»­æ¨¡æ‹Ÿ</li>\n</ul>\n</li>\n<li>ä¿®æ”¹index.jsä»£ç ï¼Œå¹¶åœ¨component-tag-nameç»„ä»¶æ³¨å†ŒonTapæ–¹æ³•ï¼Œæ§åˆ¶æ˜¾éš  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">onReady() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.component = <span class=\"keyword\">this</span>.selectComponent(<span class=\"string\">'#component'</span>)</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">onTap() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'onTap'</span>)</span><br><span class=\"line\">  wx.createSelectorQuery().select(<span class=\"string\">'#component'</span>).boundingClientRect(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶ popover ä¸­çš„ onDisplay æ–¹æ³•</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.component.onTap();</span><br><span class=\"line\">  &#125;).exec();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>æœ€ç»ˆå¤ç°<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmZjQ3OTNhMjUwYTNjMzlhYjBlOGQxMGJhYTllZmI2NDc1NjIyLnBuZw?x-oss-process=image/format,png\" alt=\"å®˜æ–¹æ¨¡æ‹Ÿæœ€ç»ˆè¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å¾—å‡ºé—®é¢˜æ¥æºï¼š<ul>\n<li>åœ¨ç»„ä»¶ä¸­è¿›è¡Œäº†ä¸€æ¬¡setData</li>\n</ul>\n</li>\n<li>æ€è€ƒèƒŒåé—®é¢˜<ul>\n<li>åœ¨ç»„ä»¶ä¸­setDataä¸ºä»€ä¹ˆä¼šâ€æ‹·è´â€œä¸€ä»½ç›¸åŒçš„åœ¨é¡µé¢çº§wxmlä¸­ï¼Ÿ</li>\n<li>çŒœæƒ³ä¸€ï¼šä»<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88\" target=\"_blank\" rel=\"noopener\">WXSå“åº”äº‹ä»¶</a>ä¸­ï¼Œæˆ‘éšéšå¾—åˆ°äº†ç­”æ¡ˆ</li>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzZlYWJjYjdjOTliMzAxNWMwOGQwZmM2YWM3ZmMxMGMzNDU5NDAxLnBuZw?x-oss-process=image/format,png\" alt=\"wxsç›¸åº”äº‹ä»¶\"></li>\n<li>æˆ‘ä»¬åœ¨é¡µé¢çº§é€šè¿‡selectComponentå®ä¾‹åŒ–ç»„ä»¶ï¼Œå¯¹é€‰ä¸­çš„ç»„ä»¶è¿›è¡Œæ“ä½œï¼Œå®˜æ–¹å¯ä»¥é€šè¿‡æ‹·è´ä¸€ä»½ç›¸åŒçš„ç»„ä»¶ï¼Œä½¿æˆ‘ä»¬ä¾¿æ·çš„å°†äº‹ä»¶çš„å¤„ç†ä»2æ¬¡çš„é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ï¼Œå‡å°‘åˆ°ç›´æ¥å¯¹é¡µé¢ä¸Šå…ƒç´ è¿›è¡Œæ“ä½œï¼Œå³ä¸€æ¬¡é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ã€‚</li>\n<li>çŒœæƒ³äºŒï¼šé—®é¢˜å±‚é¢æ˜¯åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­çš„wxmlï¼Œæ¸²æŸ“æ–¹å¼å¯¹äºè¿™ç§æƒ…å†µå°±æ˜¯è¿™æ ·å¤„ç†çš„ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å®˜æ–¹å·²ç»™å‡ºé—®é¢˜åŸå› </p>\n<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzJkMWVkZmYyNWIwM2YxZDU2ZGVjYjZhM2NkYjAwMGU5NTE5ODQucG5n?x-oss-process=image/format,png\" alt=\"wxmlé¢æ¿\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å¦‚ä½•è§£å†³é—®é¢˜\"><a href=\"#å¦‚ä½•è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"å¦‚ä½•è§£å†³é—®é¢˜\"></a>å¦‚ä½•è§£å†³é—®é¢˜</h2><ul>\n<li>åœ¨popoverä»¥åŠpopover-itemåŠ å…¥  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">options: &#123;</span><br><span class=\"line\">\t\t    multipleSlots: <span class=\"literal\">true</span> <span class=\"comment\">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class=\"line\">\t\t  &#125;,</span><br></pre></td></tr></table></figure></li>\n<li>å°±å¯ä»¥è§£å†³äº†ã€‚æœ€åå»ºè®®slotä¸­å¯ä»¥å†™ä¸Šnameè¿™æ ·ä»£ç å¯èƒ½ä¼šæ›´æ˜“è¯»ã€‚<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n<hr>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>è®°å½•åŸºäº<a href=\"https://developers.weixin.qq.com/community/develop/doc/000e4e7103c3c090e517e0cdb5b806\" target=\"_blank\" rel=\"noopener\">å¾®ä¿¡å°ç¨‹åº-æ°”æ³¡æ¡†</a>å®ç°ä¸­äº§ç”Ÿçš„é—®é¢˜åŠæ€è€ƒ</li>\n</ul>\n<hr>\n<h2 id=\"é—®é¢˜æˆªå›¾\"><a href=\"#é—®é¢˜æˆªå›¾\" class=\"headerlink\" title=\"é—®é¢˜æˆªå›¾\"></a>é—®é¢˜æˆªå›¾</h2><p><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzlkMGY1NmUxOTVkNzFjMjAyYzVkYzI0OGMxMzg0NmUxMTQ3MTQucG5n?x-oss-process=image/format,png\" alt=\"popoveré—®é¢˜æˆªå›¾\"></p>\n<h2 id=\"é—®é¢˜æè¿°\"><a href=\"#é—®é¢˜æè¿°\" class=\"headerlink\" title=\"é—®é¢˜æè¿°\"></a>é—®é¢˜æè¿°</h2><ul>\n<li>æ¨¡æ‹Ÿå™¨æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†åœ¨çœŸæœºä¸Šç‚¹å‡»åï¼Œæ°”æ³¡æ¡†çš„ç®­å¤´å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œä¸”ç‚¹å‡»åŒä¸€çº§åˆ«åŒºåŸŸï¼Œèƒ½åˆ©ç”¨è¦†ç›–æ¶ˆé™¤ç®­å¤´ã€‚ã€æ˜¯ä¸æ˜¯ä¸€ä¸ªå¾ˆå¯çˆ±çš„bugï¼Ÿ","more":"</li>\n</ul>\n<h2 id=\"é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\"><a href=\"#é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\" class=\"headerlink\" title=\"é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•\"></a>é—®é¢˜è§£å†³è¿‡ç¨‹è®°å½•</h2><ul>\n<li><p>å®šä½é—®é¢˜å‘ç”Ÿçš„åŸå› èŒƒå›´</p>\n<ul>\n<li>æ ·å¼<ul>\n<li>æ ·å¼åœ¨åˆ¤æ–­æ˜¾ç¤ºæ¡ä»¶(wx:if=â€â€œ)ç”Ÿæ•ˆåï¼Œä»ç„¶æ¸²æŸ“</li>\n<li>å¦å®šåŸå› <ul>\n<li>æŸ¥è¯¢ä»£ç å‘ç°ï¼Œæ•´ä¸ªæ ·å¼èƒŒæ™¯çš„è®¾å®šæ˜¯åœ¨::beforeä¼ªå…ƒç´ é€‰æ‹©å™¨ä¸­</li>\n<li>ä¸”æ˜¾ç¤ºæ¡ä»¶ç”Ÿæ•ˆï¼Œåœ¨è°ƒè¯•å™¨ä¸­å·²æ²¡æœ‰è¯¥å…ƒç´ ï¼Œä½†ä»æ˜¾ç¤º</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>é€»è¾‘<ul>\n<li>ä¼šä¸ä¼šæ˜¯ç»„ä»¶åœ¨æ¸²æŸ“æ—¶ï¼Œå¤šæ¸²æŸ“ä¸€ä»½ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ¤æ–­æ¡ä»¶è¿›è¡Œå¼€å…³æ—¶ï¼Œåªæ˜¯å¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œäº†æ“ä½œ</li>\n<li>æ€€ç–‘ä¾æ®<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzk5ZjcwMDAwZmViM2IwYzc0MWJmNjFiYzE5YTUwMDIxMjYyMTI3LnBuZw?x-oss-process=image/format,png\" alt=\"popoveré—®é¢˜ä¾æ®æˆªå›¾\"></li>\n<li>ä¸Šå›¾å¯è§ï¼šåœ¨popoverç»„ä»¶ä¸‹ï¼Œæœ‰2ä¸ªé€šè¿‡&lt;slot&gt;æ’å…¥çš„ç›¸åŒå†…å®¹</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å¼€å§‹è§£å†³é—®é¢˜</p>\n<ul>\n<li>æŸ¥è¯¢å®˜æ–¹å…³äº<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html\" target=\"_blank\" rel=\"noopener\">slot</a>æ–¹é¢çš„ä»‹ç»<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JjMTE0ZmI0YTdhOWZkY2ZlYzU3ZDE5ZWQyYWY0YzI3MzE1NTU4LnBuZw?x-oss-process=image/format,png\" alt=\"å®˜æ–¹slotåŸºç¡€ä¾‹å­\"></li>\n</ul>\n</li>\n<li>åŸºäºå®˜æ–¹åŸºç¡€ä»£ç ï¼Œå¤ç°é—®é¢˜<ul>\n<li>äº§ç”Ÿä¸€ä¸ªchild-tagç»„ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­ç¼–å†™  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// components/child-tag.js.js</span></span><br><span class=\"line\">Component(&#123;</span><br><span class=\"line\">  options: &#123;</span><br><span class=\"line\">    multipleSlots: <span class=\"literal\">true</span> <span class=\"comment\">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  properties: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  relations: &#123;</span><br><span class=\"line\">    <span class=\"string\">'./component-tag-name'</span>: &#123;</span><br><span class=\"line\">      type: <span class=\"string\">'parent'</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>ä¸component-tag-nameç»‘å®šå½¢æˆçˆ¶å­ç»„ä»¶  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// components/component-tag-name.js</span></span><br><span class=\"line\">Component(&#123;</span><br><span class=\"line\">  options: &#123;</span><br><span class=\"line\">    multipleSlots: <span class=\"literal\">true</span> <span class=\"comment\">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  relations: &#123;</span><br><span class=\"line\">    <span class=\"string\">'./child-tag'</span>: &#123;</span><br><span class=\"line\">      type: <span class=\"string\">'child'</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  properties: &#123;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    visible: <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>å¹¶å°†index.htmlä¸­è¿›è¡Œè°ƒç”¨  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡ç‰ˆ --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"primary\"</span> <span class=\"attr\">bindtap</span>=<span class=\"string\">\"onTap\"</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">my-component</span> <span class=\"attr\">id</span>=<span class=\"string\">\"component\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"content\"</span>&gt;</span></span><br><span class=\"line\">\t\t\tè¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"content\"ä¸­çš„å†…å®¹</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">child-component</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"child\"</span>&gt;</span>è¿™é‡Œæ˜¯æ’å…¥åˆ°ç»„ä»¶slot name=\"child\"ä¸­çš„å†…å®¹<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">child-component</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">my-component</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>ä½†æ˜¯å…¶ç»“æ„æ ‘ä»ç„¶éå¸¸æ­£å¸¸ï¼Œå¹¶æ²¡æœ‰å‡ºç°é‚£ä¸ªæ‰€è°“çš„â€æ‹·è´â€ç»„ä»¶<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzcwNTRhNjJkYmM2MGEyNmU5ZGI1ODYzNzNjOGY2OTgyMzg3NTI0LnBuZw?x-oss-process=image/format,png\" alt=\"æ”¹å†™v1.1åçš„ç»“æ„æ ‘æˆªå›¾\"></li>\n<li>ä»”ç»†å¤ç°äº†å‡ æ¬¡ï¼Œå‘ç°ï¼šå¤šå‡ºæ¥çš„é‚£ä¸ªç»„ä»¶ä¼šæœ‰æ‰€å»¶è¿Ÿã€‚æŠ“ä½è¿™ä¸ªé—®é¢˜ï¼Œæƒ³åˆ°æˆ‘ä»¬åœ¨onReadyä¸­ï¼Œæ³¨å†Œäº†è¯¥ç»„ä»¶ï¼Œäºæ˜¯ï¼Œç»§ç»­æ¨¡æ‹Ÿ</li>\n</ul>\n</li>\n<li>ä¿®æ”¹index.jsä»£ç ï¼Œå¹¶åœ¨component-tag-nameç»„ä»¶æ³¨å†ŒonTapæ–¹æ³•ï¼Œæ§åˆ¶æ˜¾éš  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">onReady() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.component = <span class=\"keyword\">this</span>.selectComponent(<span class=\"string\">'#component'</span>)</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">onTap() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'onTap'</span>)</span><br><span class=\"line\">  wx.createSelectorQuery().select(<span class=\"string\">'#component'</span>).boundingClientRect(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶ popover ä¸­çš„ onDisplay æ–¹æ³•</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.component.onTap();</span><br><span class=\"line\">  &#125;).exec();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>æœ€ç»ˆå¤ç°<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmZjQ3OTNhMjUwYTNjMzlhYjBlOGQxMGJhYTllZmI2NDc1NjIyLnBuZw?x-oss-process=image/format,png\" alt=\"å®˜æ–¹æ¨¡æ‹Ÿæœ€ç»ˆè¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å¾—å‡ºé—®é¢˜æ¥æºï¼š<ul>\n<li>åœ¨ç»„ä»¶ä¸­è¿›è¡Œäº†ä¸€æ¬¡setData</li>\n</ul>\n</li>\n<li>æ€è€ƒèƒŒåé—®é¢˜<ul>\n<li>åœ¨ç»„ä»¶ä¸­setDataä¸ºä»€ä¹ˆä¼šâ€æ‹·è´â€œä¸€ä»½ç›¸åŒçš„åœ¨é¡µé¢çº§wxmlä¸­ï¼Ÿ</li>\n<li>çŒœæƒ³ä¸€ï¼šä»<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88\" target=\"_blank\" rel=\"noopener\">WXSå“åº”äº‹ä»¶</a>ä¸­ï¼Œæˆ‘éšéšå¾—åˆ°äº†ç­”æ¡ˆ</li>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzZlYWJjYjdjOTliMzAxNWMwOGQwZmM2YWM3ZmMxMGMzNDU5NDAxLnBuZw?x-oss-process=image/format,png\" alt=\"wxsç›¸åº”äº‹ä»¶\"></li>\n<li>æˆ‘ä»¬åœ¨é¡µé¢çº§é€šè¿‡selectComponentå®ä¾‹åŒ–ç»„ä»¶ï¼Œå¯¹é€‰ä¸­çš„ç»„ä»¶è¿›è¡Œæ“ä½œï¼Œå®˜æ–¹å¯ä»¥é€šè¿‡æ‹·è´ä¸€ä»½ç›¸åŒçš„ç»„ä»¶ï¼Œä½¿æˆ‘ä»¬ä¾¿æ·çš„å°†äº‹ä»¶çš„å¤„ç†ä»2æ¬¡çš„é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ï¼Œå‡å°‘åˆ°ç›´æ¥å¯¹é¡µé¢ä¸Šå…ƒç´ è¿›è¡Œæ“ä½œï¼Œå³ä¸€æ¬¡é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ã€‚</li>\n<li>çŒœæƒ³äºŒï¼šé—®é¢˜å±‚é¢æ˜¯åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­çš„wxmlï¼Œæ¸²æŸ“æ–¹å¼å¯¹äºè¿™ç§æƒ…å†µå°±æ˜¯è¿™æ ·å¤„ç†çš„ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å®˜æ–¹å·²ç»™å‡ºé—®é¢˜åŸå› </p>\n<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzJkMWVkZmYyNWIwM2YxZDU2ZGVjYjZhM2NkYjAwMGU5NTE5ODQucG5n?x-oss-process=image/format,png\" alt=\"wxmlé¢æ¿\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å¦‚ä½•è§£å†³é—®é¢˜\"><a href=\"#å¦‚ä½•è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"å¦‚ä½•è§£å†³é—®é¢˜\"></a>å¦‚ä½•è§£å†³é—®é¢˜</h2><ul>\n<li>åœ¨popoverä»¥åŠpopover-itemåŠ å…¥  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">options: &#123;</span><br><span class=\"line\">\t\t    multipleSlots: <span class=\"literal\">true</span> <span class=\"comment\">// åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ</span></span><br><span class=\"line\">\t\t  &#125;,</span><br></pre></td></tr></table></figure></li>\n<li>å°±å¯ä»¥è§£å†³äº†ã€‚æœ€åå»ºè®®slotä¸­å¯ä»¥å†™ä¸Šnameè¿™æ ·ä»£ç å¯èƒ½ä¼šæ›´æ˜“è¯»ã€‚<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2></li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n<hr>"},{"title":"æ•°ç»„ã€é“¾è¡¨ã€è·³è¡¨","date":"2020-04-07T08:18:49.000Z","_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## è·³è¡¨\n- è¡¥è¶³é“¾è¡¨linked listï¼Œlook up O(n) çš„ç¼ºé™·ï¼Œå‡ç»´æ€æƒ³ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´\n- æ•°å­¦å½’çº³æ³•\n- æ‰¾æœ€è¿‘é‡å¤é—®é¢˜","source":"_posts/æ•°ç»„ã€é“¾è¡¨ã€è·³è¡¨.md","raw":"---\ntitle: æ•°ç»„ã€é“¾è¡¨ã€è·³è¡¨\ndate: 2020-04-07 16:18:49\ntags:\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## è·³è¡¨\n- è¡¥è¶³é“¾è¡¨linked listï¼Œlook up O(n) çš„ç¼ºé™·ï¼Œå‡ç»´æ€æƒ³ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´\n- æ•°å­¦å½’çº³æ³•\n- æ‰¾æœ€è¿‘é‡å¤é—®é¢˜","slug":"æ•°ç»„ã€é“¾è¡¨ã€è·³è¡¨","published":1,"updated":"2020-10-27T15:21:11.266Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u8d0032fw9kcx7v06u5","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"è·³è¡¨\"><a href=\"#è·³è¡¨\" class=\"headerlink\" title=\"è·³è¡¨\"></a>è·³è¡¨</h2><ul>\n<li>è¡¥è¶³é“¾è¡¨linked listï¼Œlook up O(n) çš„ç¼ºé™·ï¼Œå‡ç»´æ€æƒ³ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´</li>\n<li>æ•°å­¦å½’çº³æ³•</li>\n<li>æ‰¾æœ€è¿‘é‡å¤é—®é¢˜</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"è·³è¡¨\"><a href=\"#è·³è¡¨\" class=\"headerlink\" title=\"è·³è¡¨\"></a>è·³è¡¨</h2><ul>\n<li>è¡¥è¶³é“¾è¡¨linked listï¼Œlook up O(n) çš„ç¼ºé™·ï¼Œå‡ç»´æ€æƒ³ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´</li>\n<li>æ•°å­¦å½’çº³æ³•</li>\n<li>æ‰¾æœ€è¿‘é‡å¤é—®é¢˜</li>\n</ul>\n"},{"layout":"å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚","title":"å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚","date":"2020-04-05T04:04:24.000Z","description":["å¤§å®¶åº”è¯¥éƒ½çŸ¥é“è¿‡ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œcanvasç­‰åŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œé¡µé¢ä¸­æ— è®ºä½ è®¾ç½®å¤šå¤§çš„z-indexéƒ½æ— æ³•è¦†ç›–åœ¨å…¶ä¹‹ä¸Šï¼Œè¿™å°±å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- å¤§å®¶åº”è¯¥éƒ½çŸ¥é“è¿‡ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œcanvasç­‰åŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œé¡µé¢ä¸­æ— è®ºä½ è®¾ç½®å¤šå¤§çš„z-indexéƒ½æ— æ³•è¦†ç›–åœ¨å…¶ä¹‹ä¸Šï¼Œè¿™å°±å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜\n- å°±åƒè¿™æ ·\n\t- ![canvasé¡¶å±‚é—®é¢˜æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxYmQ5OTM2M2VkYjU1NTRmYjc5MzBlZDllMTA0ZjEwMTc2MDM0LnBuZw?x-oss-process=image/format,png)\n\t- æŸ±çŠ¶å›¾æ˜¯ç”¨canvasç”»çš„ï¼Œå®ƒç½®äºäº†æˆ‘çš„tooltipä¹‹ä¸Šã€‚ã€è¿™çœ‹èµ·æ¥çœŸæ˜¯ä¸€ä¸ªå¯æ€•çš„é—®é¢˜\n  <!-- more -->\n---\n\n## è§£å†³é—®é¢˜\n- å¾®ä¿¡å®˜æ–¹æä¾›äº†[cover-view](https://developers.weixin.qq.com/miniprogram/dev/component/cover-view.html)åŸç”Ÿç»„ä»¶ï¼Œè¦†ç›–åœ¨åŸç”Ÿç»„ä»¶ä¹‹ä¸Šçš„æ–‡æœ¬è§†å›¾\n- å¾®ä¿¡å®˜æ–¹æä¾›äº†å°†canvasè½¬åŒ–ä¸ºå›¾ç‰‡çš„æ–¹å¼--[wx.canvasToTempFilePath](https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html)ï¼Œè¿™æ ·å°±å¯ä»¥â€é™çº§â€œ\n\n\n### æ–¹æ³•ä¸€ï¼šcover-view\n- å°†tooltipç”¨cover-viewæ”¹å†™ï¼Œæ•ˆæœå¦‚ä¸‹\n\t- ![cover-view version0.1 æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2Y0MTZjZjhlMjNiZWEwMjNjYTM1M2JhOGExMDM1MDM2MzYyOTIucG5n?x-oss-process=image/format,png)\n\t- çœ‹ä¸Šå»ï¼Œæ˜¯è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œä¸”tooltipåçš„ç°è‰²èƒŒæ™¯ä¸èƒ½æ»‘åŠ¨äº†ï¼Œã€å¦ˆè€¶ï¼Œå¥½æ£’ï¼\n\t- ä½†æ˜¯ï¼Œè¿™äº§ç”Ÿäº†ä¸€ä¸ªï¼š**å½“æ–‡æœ¬è¶…å‡ºtooltipå®½åº¦æ—¶ï¼Œscroll-y: autoï¼Œå¤±æ•ˆäº†ï¼Œæº¢å‡ºéƒ¨åˆ†è¢«ç›´æ¥æˆªå–**\n\t- ç½ªé­ç¥¸é¦–å°±æ˜¯å®ƒ\n\t\t- ![coverå†…ç½®æ ·å¼](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2M5ZDljYjZiZTQ0ZGY3YmJmNmRlMjAxNDM1ZmYzOTJjNDMxNDMucG5n?x-oss-process=image/format,png)\n\t- é‚£æˆ‘ä»¬å¯ä»¥ï¼š\n\t\t- åœ¨tooltipåˆ†æ®µå†…å®¹ä¸­åŠ ä¸Š\n\t\t\t```css\n\t\t\t.modal-layer-content-rule {\n\t\t\t    white-space: pre-wrap;\n\t\t\t}\n\t\t\t```\n\t\t- åœ¨å†…å®¹wrapperä¸­åŠ ä¸Š\n\t\t\t```css\n\t\t\t.modal-layer-content {\n\t\t\t    overflow: scroll;\n\t\t\t}\n\t\t\t```\n\t- å®Œç¾è§£å†³\n\t\t- ![cover-viewè§£å†³å›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2FhZjRkMDAyODdjZGI4M2Y0NWRhMGVkOTg3Mzc5MGNhNDQxMjkucG5n?x-oss-process=image/format,png)\n### æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath\n- é¦–å…ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œå®˜æ–¹å…³äºcanvasç±»å‹æœ‰ä¸¤ç§\n![ä¸¤ç§canvasç±»å‹](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2E4ZjJmNjA5OGYxNmQ4MzY3NWJiN2I3OWY0ZDM1NWM1MTAwMDg3LnBuZw?x-oss-process=image/format,png)\n- æ–°canvas 2Dæ¥å£å°è¯•\n\t```javascript\n\tconst query = wx.createSelectorQuery().in(this)\n    query.select('#myCanvas')\n      .fields({ node: true, size: true })\n      .exec((res) => {\n        const canvas = res[0].node\n        const ctx = canvas.getContext('2d')\n        const img = canvas.createImage()\n        img.onload = () => {\n          ctx.drawImage(img, 0, 0, 100, 100)\n        }\n        img.src = 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'\n        // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n        console.log(ctx.getImageData(0, 0, 150, 100).data)\n      })\n\t```\n\t```html\n\t<canvas type=\"2d\" id=\"myCanvas\" canvas-id=\"myCanvas\"></canvas>\n\t```\n- è¿è¡Œæˆªå›¾![canvas2d è¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzE5ZWE3ZGYxYjg2ODUzOWFhNzVhY2E0OTAxYzI2MzU2OTk4NDYucG5n?x-oss-process=image/format,png)\n- ç¬¬äºŒç§æ—§canvas\n\t```javascript\n\tconst ctx = wx.createCanvasContext('myCanvas')\n    wx.getImageInfo({\n        src: 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg',\n        success: function (res) {\n          console.log('res', res)\n          const poster = res.path                                  \n          ctx.drawImage(poster, 0, 0, 150, 100)\n          ctx.draw()\n        }\n      })\n      // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n      wx.canvasGetImageData({\n        canvasId: 'myCanvas',\n        x: 0,\n        y: 0,\n        width: 150,\n        height: 100,\n        success(res) {\n          console.log(res.width) // 150\n          console.log(res.height) // 100\n          console.log(res.data instanceof Uint8ClampedArray) // true\n          console.log(res.data) // 150 * 100 * 4\n          console.log(res.data.length) // 150 * 100 * 4\n        }\n      })\n\t```\n\t```html\n\t<canvas id=\"myCanvas\" canvas-id=\"myCanvas\"></canvas>\n\t```\n- è¿è¡Œæˆªå›¾![æ—§canvas](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzU4NTg5MzQ4MDc3Njk3OTA0OTRmZmIzOWRiNDdjMWRmNjk4ODQucG5n?x-oss-process=image/format,png)\n- è™½ç„¶ä¸¤ç§æ–¹æ³•ï¼Œéƒ½èƒ½å®ç°å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œä½†æ–°ç‰ˆçš„è¿›è¡Œäº†createImageï¼Œå°†å…¶æ‰“å°çš„è¯ï¼Œå…¶å®å°±æ˜¯æ–°å»ºäº†ä¸€ä¸ªimgæ ‡ç­¾ï¼Œå¹¶å°†imgæ ‡ç­¾çš„ä¸œè¥¿ç»˜åˆ¶è¿›canvas\n\t- ![img console](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzFjMjE1NzMzZTRkY2UzNGZiNzI4NDFhZWEyMDc0ZWIwMjQ1OTQucG5n?x-oss-process=image/format,png)\n\t- ä¸ºä»€ä¹ˆå¾®ä¿¡å®˜æ–¹ä¼šä»…æ”¯æŒä»¥ä¸‹æ–¹å¼è¿›è¡Œæ–°ç‰ˆcanvas2d å›¾ç‰‡çš„ç»˜åˆ¶ï¼Œè€ƒè™‘æ˜¯ä»€ä¹ˆï¼Ÿ\n\t- ![ç»å…¸æŠ¥é”™](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JhYWQ1OWRhNDI4M2FjZmViZTY1NGQ0ZWZiNTAxZDZlMjAxMjE2LnBuZw?x-oss-process=image/format,png)\n- ç°åœ¨æˆ‘ä»¬è¦å°†canvasçš„å†…å®¹å¯¼æˆå›¾ç‰‡ï¼ŒåŒæ ·åˆ†æˆæ–°æ—§ä¸¤ç‰ˆ\n- ä¸»è¦æ€è·¯éƒ½æ˜¯ï¼šåœ¨wxmlä¸­ï¼Œå¦‚æœcanvasç»˜åˆ¶å›¾ç‰‡æ²¡æœ‰å®Œæˆï¼Œåˆ™æ˜¾ç¤ºcanvaså†…å®¹ï¼Œç»˜åˆ¶å®Œæˆåï¼Œå°±åˆ©ç”¨canvasToTempFilePathï¼Œå°†å›¾å±‚å†…å®¹ç”ŸæˆæŒ‡å®šå¤§å°å›¾ç‰‡ï¼Œæ˜¾ç¤ºimage\n\t- canvas2d \n\t\t```javascript\n\t\tconst that = this\n\t    const query = wx.createSelectorQuery().in(this)\n\t    query.select('#myCanvas')\n\t      .fields({ node: true, size: true })\n\t      .exec((res) => {\n\t        const canvas = res[0].node\n\t        const ctx = canvas.getContext('2d')\n\t        const img = canvas.createImage()\n\t        console.log('img', img)\n\t        img.onload = () => {\n\t          ctx.drawImage(img, 0, 0, 100, 100)\n\t            wx.canvasToTempFilePath({\n\t              x: 0,\n\t              y: 0,\n\t              width: 100,\n\t              height: 100,\n\t              destWidth: 100,\n\t              destHeight: 100,\n\t              canvas: canvas,\n\t              success(res) {\n\t                that.setData({\n\t                  imgPath: res.tempFilePath\n\t                })\n\t              },\n\t              fail(err) {\n\t                console.log('err', err)\n\t              }\n\t            })\n\t        }\n\t        img.src = 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'\n\t        // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n\t        console.log(ctx.getImageData(0, 0, 100, 100).data)\n\t      })\n\t\t```\n\t\t```html\n\t\t<canvas wx:if=\"{{!imgPath}}\" type=\"2d\" id=\"myCanvas\" canvas-id=\"myCanvas\" style=\"width: 330px;height: 340px;\"></canvas>\n\t\t<image wx:else src=\"{{imgPath}}\" style=\"width: 330px;height: 340px;\" />\n\t\t```\n\t\t- canvas2d éœ€è¦è¸©å¾—å‘æ˜¯ï¼šå®ƒçš„å®˜æ–¹æ–‡æ¡£ğŸ™ƒ\n\t\t\t- ![canvas2d è½¬å›¾ç‰‡è¯¯å¯¼](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UwM2Q1ZDg0YzYyNmI0NzlmZjBjOTlmNzA1YmRhYjg5NDc5MjcucG5n?x-oss-process=image/format,png)\n\t\t\t- å°è¯•ä¸‹æ¥ï¼Œä¼š\n\t\t\t\t- ![ctx.drawæŠ¥é”™](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxMjRiY2Q3ZmNjYWI5ODBlNDdkMTk2YTMyZGQyODI4NDUzODcucG5n?x-oss-process=image/format,png)\n\t\t\t- é‚£æˆ‘ä»¬å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹\n\t\t\t\t- ![canvas2d tempathæ­£ç¡®å®åŠ›](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxODk5NWFiNDY4N2IwYmZlYzhjZTZkZWU2ZWQxYmZjMTA1MTY1LnBuZw?x-oss-process=image/format,png)è¿™æ‰æ˜¯ç¬¦åˆæˆ‘ä»¬éœ€è¦\n\t\t- è¿è¡Œæˆªå›¾\n\t\t\t- ![canvas2dè¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JmMzVlMzY4YzRjMmRhYTgxNTA0NzM0YTIxZGMxM2I2NDYwNzIucG5n?x-oss-process=image/format,png)\n\t- æ—§ç‰ˆcanvas\n\t\t```javascript\n\t    const ctx = wx.createCanvasContext('myCanvas')\n\t    const that = this\n\t    wx.getImageInfo({\n\t      src: 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg',\n\t      success: function (res) {\n\t        console.log('res', res)\n\t        const poster = res.path\n\t        ctx.drawImage(poster, 0, 0, 150, 100)\n\t        ctx.draw(false, () => {\n\t          wx.canvasToTempFilePath({\n\t            x: 0,\n\t            y: 0,\n\t            width: 100,\n\t            height: 100,\n\t            destWidth: 100,\n\t            destHeight: 100,\n\t            canvasId: \"myCanvas\",\n\t            success(res) {\n\t              that.setData({\n\t                imgPath: res.tempFilePath\n\t              })\n\t              console.log(res.tempFilePath)\n\t            },\n\t            fail(err) {\n\t              console.log('err', err)\n\t            }\n\t          })\n\t        })\n\t        // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n\t        wx.canvasGetImageData({\n\t          canvasId: 'myCanvas',\n\t          x: 0,\n\t          y: 0,\n\t          width: 150,\n\t          height: 100,\n\t          success(res) {\n\t            console.log(res.width) // 150\n\t            console.log(res.height) // 100\n\t            console.log(res.data instanceof Uint8ClampedArray) // true\n\t            console.log(res.data) // 150 * 100 * 4\n\t            console.log(res.data.length) // 150 * 100 * 4\n\t          }\n\t        })\n\t      }\n\t    })\n\t\t```\n\t\t```html\n\t\t<canvas wx:if=\"{{!imgPath}}\" id=\"myCanvas\" canvas-id=\"myCanvas\" style=\"width: 330px;height: 340px;\"></canvas>\n\t\t<image wx:else src=\"{{imgPath}}\" style=\"width: 330px;height: 340px;\" />\n\t\t```\n\t\t- è¿è¡Œæˆªå›¾\n\t\t\t- ![æ—§ç‰ˆcanvasè¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2EzZTRiYTBkYzc2NDgzYTM1NTYxZDcwNDUzNzZkNjZmNDU5MTgucG5n?x-oss-process=image/format,png)\n## å†™åœ¨åé¢\n- æ„Ÿè°¢[Skadyå®è´](https://github.com/skadieyes)åœ¨æ¢è®¨é—®é¢˜ä¸­ç»™äºˆçš„å¸®åŠ©ï¼Œæ¬¢è¿å¤§å®¶å»githubæ‰¾å¥¹ç©ğŸ‘ˆ\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n----\n\t\t\n","source":"_posts/å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚.md","raw":"---\nlayout: å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚\ntitle: å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚\ndate: 2020-04-05 12:04:24\ntags: \n- å¾®ä¿¡å°ç¨‹åº\ncategories:\n- å¾®ä¿¡å°ç¨‹åº\ndescription:\n  - å¤§å®¶åº”è¯¥éƒ½çŸ¥é“è¿‡ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œcanvasç­‰åŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œé¡µé¢ä¸­æ— è®ºä½ è®¾ç½®å¤šå¤§çš„z-indexéƒ½æ— æ³•è¦†ç›–åœ¨å…¶ä¹‹ä¸Šï¼Œè¿™å°±å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- å¤§å®¶åº”è¯¥éƒ½çŸ¥é“è¿‡ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œcanvasç­‰åŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œé¡µé¢ä¸­æ— è®ºä½ è®¾ç½®å¤šå¤§çš„z-indexéƒ½æ— æ³•è¦†ç›–åœ¨å…¶ä¹‹ä¸Šï¼Œè¿™å°±å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜\n- å°±åƒè¿™æ ·\n\t- ![canvasé¡¶å±‚é—®é¢˜æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxYmQ5OTM2M2VkYjU1NTRmYjc5MzBlZDllMTA0ZjEwMTc2MDM0LnBuZw?x-oss-process=image/format,png)\n\t- æŸ±çŠ¶å›¾æ˜¯ç”¨canvasç”»çš„ï¼Œå®ƒç½®äºäº†æˆ‘çš„tooltipä¹‹ä¸Šã€‚ã€è¿™çœ‹èµ·æ¥çœŸæ˜¯ä¸€ä¸ªå¯æ€•çš„é—®é¢˜\n  <!-- more -->\n---\n\n## è§£å†³é—®é¢˜\n- å¾®ä¿¡å®˜æ–¹æä¾›äº†[cover-view](https://developers.weixin.qq.com/miniprogram/dev/component/cover-view.html)åŸç”Ÿç»„ä»¶ï¼Œè¦†ç›–åœ¨åŸç”Ÿç»„ä»¶ä¹‹ä¸Šçš„æ–‡æœ¬è§†å›¾\n- å¾®ä¿¡å®˜æ–¹æä¾›äº†å°†canvasè½¬åŒ–ä¸ºå›¾ç‰‡çš„æ–¹å¼--[wx.canvasToTempFilePath](https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html)ï¼Œè¿™æ ·å°±å¯ä»¥â€é™çº§â€œ\n\n\n### æ–¹æ³•ä¸€ï¼šcover-view\n- å°†tooltipç”¨cover-viewæ”¹å†™ï¼Œæ•ˆæœå¦‚ä¸‹\n\t- ![cover-view version0.1 æˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2Y0MTZjZjhlMjNiZWEwMjNjYTM1M2JhOGExMDM1MDM2MzYyOTIucG5n?x-oss-process=image/format,png)\n\t- çœ‹ä¸Šå»ï¼Œæ˜¯è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œä¸”tooltipåçš„ç°è‰²èƒŒæ™¯ä¸èƒ½æ»‘åŠ¨äº†ï¼Œã€å¦ˆè€¶ï¼Œå¥½æ£’ï¼\n\t- ä½†æ˜¯ï¼Œè¿™äº§ç”Ÿäº†ä¸€ä¸ªï¼š**å½“æ–‡æœ¬è¶…å‡ºtooltipå®½åº¦æ—¶ï¼Œscroll-y: autoï¼Œå¤±æ•ˆäº†ï¼Œæº¢å‡ºéƒ¨åˆ†è¢«ç›´æ¥æˆªå–**\n\t- ç½ªé­ç¥¸é¦–å°±æ˜¯å®ƒ\n\t\t- ![coverå†…ç½®æ ·å¼](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2M5ZDljYjZiZTQ0ZGY3YmJmNmRlMjAxNDM1ZmYzOTJjNDMxNDMucG5n?x-oss-process=image/format,png)\n\t- é‚£æˆ‘ä»¬å¯ä»¥ï¼š\n\t\t- åœ¨tooltipåˆ†æ®µå†…å®¹ä¸­åŠ ä¸Š\n\t\t\t```css\n\t\t\t.modal-layer-content-rule {\n\t\t\t    white-space: pre-wrap;\n\t\t\t}\n\t\t\t```\n\t\t- åœ¨å†…å®¹wrapperä¸­åŠ ä¸Š\n\t\t\t```css\n\t\t\t.modal-layer-content {\n\t\t\t    overflow: scroll;\n\t\t\t}\n\t\t\t```\n\t- å®Œç¾è§£å†³\n\t\t- ![cover-viewè§£å†³å›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2FhZjRkMDAyODdjZGI4M2Y0NWRhMGVkOTg3Mzc5MGNhNDQxMjkucG5n?x-oss-process=image/format,png)\n### æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath\n- é¦–å…ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œå®˜æ–¹å…³äºcanvasç±»å‹æœ‰ä¸¤ç§\n![ä¸¤ç§canvasç±»å‹](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2E4ZjJmNjA5OGYxNmQ4MzY3NWJiN2I3OWY0ZDM1NWM1MTAwMDg3LnBuZw?x-oss-process=image/format,png)\n- æ–°canvas 2Dæ¥å£å°è¯•\n\t```javascript\n\tconst query = wx.createSelectorQuery().in(this)\n    query.select('#myCanvas')\n      .fields({ node: true, size: true })\n      .exec((res) => {\n        const canvas = res[0].node\n        const ctx = canvas.getContext('2d')\n        const img = canvas.createImage()\n        img.onload = () => {\n          ctx.drawImage(img, 0, 0, 100, 100)\n        }\n        img.src = 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'\n        // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n        console.log(ctx.getImageData(0, 0, 150, 100).data)\n      })\n\t```\n\t```html\n\t<canvas type=\"2d\" id=\"myCanvas\" canvas-id=\"myCanvas\"></canvas>\n\t```\n- è¿è¡Œæˆªå›¾![canvas2d è¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzE5ZWE3ZGYxYjg2ODUzOWFhNzVhY2E0OTAxYzI2MzU2OTk4NDYucG5n?x-oss-process=image/format,png)\n- ç¬¬äºŒç§æ—§canvas\n\t```javascript\n\tconst ctx = wx.createCanvasContext('myCanvas')\n    wx.getImageInfo({\n        src: 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg',\n        success: function (res) {\n          console.log('res', res)\n          const poster = res.path                                  \n          ctx.drawImage(poster, 0, 0, 150, 100)\n          ctx.draw()\n        }\n      })\n      // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n      wx.canvasGetImageData({\n        canvasId: 'myCanvas',\n        x: 0,\n        y: 0,\n        width: 150,\n        height: 100,\n        success(res) {\n          console.log(res.width) // 150\n          console.log(res.height) // 100\n          console.log(res.data instanceof Uint8ClampedArray) // true\n          console.log(res.data) // 150 * 100 * 4\n          console.log(res.data.length) // 150 * 100 * 4\n        }\n      })\n\t```\n\t```html\n\t<canvas id=\"myCanvas\" canvas-id=\"myCanvas\"></canvas>\n\t```\n- è¿è¡Œæˆªå›¾![æ—§canvas](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzU4NTg5MzQ4MDc3Njk3OTA0OTRmZmIzOWRiNDdjMWRmNjk4ODQucG5n?x-oss-process=image/format,png)\n- è™½ç„¶ä¸¤ç§æ–¹æ³•ï¼Œéƒ½èƒ½å®ç°å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œä½†æ–°ç‰ˆçš„è¿›è¡Œäº†createImageï¼Œå°†å…¶æ‰“å°çš„è¯ï¼Œå…¶å®å°±æ˜¯æ–°å»ºäº†ä¸€ä¸ªimgæ ‡ç­¾ï¼Œå¹¶å°†imgæ ‡ç­¾çš„ä¸œè¥¿ç»˜åˆ¶è¿›canvas\n\t- ![img console](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzFjMjE1NzMzZTRkY2UzNGZiNzI4NDFhZWEyMDc0ZWIwMjQ1OTQucG5n?x-oss-process=image/format,png)\n\t- ä¸ºä»€ä¹ˆå¾®ä¿¡å®˜æ–¹ä¼šä»…æ”¯æŒä»¥ä¸‹æ–¹å¼è¿›è¡Œæ–°ç‰ˆcanvas2d å›¾ç‰‡çš„ç»˜åˆ¶ï¼Œè€ƒè™‘æ˜¯ä»€ä¹ˆï¼Ÿ\n\t- ![ç»å…¸æŠ¥é”™](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JhYWQ1OWRhNDI4M2FjZmViZTY1NGQ0ZWZiNTAxZDZlMjAxMjE2LnBuZw?x-oss-process=image/format,png)\n- ç°åœ¨æˆ‘ä»¬è¦å°†canvasçš„å†…å®¹å¯¼æˆå›¾ç‰‡ï¼ŒåŒæ ·åˆ†æˆæ–°æ—§ä¸¤ç‰ˆ\n- ä¸»è¦æ€è·¯éƒ½æ˜¯ï¼šåœ¨wxmlä¸­ï¼Œå¦‚æœcanvasç»˜åˆ¶å›¾ç‰‡æ²¡æœ‰å®Œæˆï¼Œåˆ™æ˜¾ç¤ºcanvaså†…å®¹ï¼Œç»˜åˆ¶å®Œæˆåï¼Œå°±åˆ©ç”¨canvasToTempFilePathï¼Œå°†å›¾å±‚å†…å®¹ç”ŸæˆæŒ‡å®šå¤§å°å›¾ç‰‡ï¼Œæ˜¾ç¤ºimage\n\t- canvas2d \n\t\t```javascript\n\t\tconst that = this\n\t    const query = wx.createSelectorQuery().in(this)\n\t    query.select('#myCanvas')\n\t      .fields({ node: true, size: true })\n\t      .exec((res) => {\n\t        const canvas = res[0].node\n\t        const ctx = canvas.getContext('2d')\n\t        const img = canvas.createImage()\n\t        console.log('img', img)\n\t        img.onload = () => {\n\t          ctx.drawImage(img, 0, 0, 100, 100)\n\t            wx.canvasToTempFilePath({\n\t              x: 0,\n\t              y: 0,\n\t              width: 100,\n\t              height: 100,\n\t              destWidth: 100,\n\t              destHeight: 100,\n\t              canvas: canvas,\n\t              success(res) {\n\t                that.setData({\n\t                  imgPath: res.tempFilePath\n\t                })\n\t              },\n\t              fail(err) {\n\t                console.log('err', err)\n\t              }\n\t            })\n\t        }\n\t        img.src = 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'\n\t        // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n\t        console.log(ctx.getImageData(0, 0, 100, 100).data)\n\t      })\n\t\t```\n\t\t```html\n\t\t<canvas wx:if=\"{{!imgPath}}\" type=\"2d\" id=\"myCanvas\" canvas-id=\"myCanvas\" style=\"width: 330px;height: 340px;\"></canvas>\n\t\t<image wx:else src=\"{{imgPath}}\" style=\"width: 330px;height: 340px;\" />\n\t\t```\n\t\t- canvas2d éœ€è¦è¸©å¾—å‘æ˜¯ï¼šå®ƒçš„å®˜æ–¹æ–‡æ¡£ğŸ™ƒ\n\t\t\t- ![canvas2d è½¬å›¾ç‰‡è¯¯å¯¼](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UwM2Q1ZDg0YzYyNmI0NzlmZjBjOTlmNzA1YmRhYjg5NDc5MjcucG5n?x-oss-process=image/format,png)\n\t\t\t- å°è¯•ä¸‹æ¥ï¼Œä¼š\n\t\t\t\t- ![ctx.drawæŠ¥é”™](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxMjRiY2Q3ZmNjYWI5ODBlNDdkMTk2YTMyZGQyODI4NDUzODcucG5n?x-oss-process=image/format,png)\n\t\t\t- é‚£æˆ‘ä»¬å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹\n\t\t\t\t- ![canvas2d tempathæ­£ç¡®å®åŠ›](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxODk5NWFiNDY4N2IwYmZlYzhjZTZkZWU2ZWQxYmZjMTA1MTY1LnBuZw?x-oss-process=image/format,png)è¿™æ‰æ˜¯ç¬¦åˆæˆ‘ä»¬éœ€è¦\n\t\t- è¿è¡Œæˆªå›¾\n\t\t\t- ![canvas2dè¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JmMzVlMzY4YzRjMmRhYTgxNTA0NzM0YTIxZGMxM2I2NDYwNzIucG5n?x-oss-process=image/format,png)\n\t- æ—§ç‰ˆcanvas\n\t\t```javascript\n\t    const ctx = wx.createCanvasContext('myCanvas')\n\t    const that = this\n\t    wx.getImageInfo({\n\t      src: 'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg',\n\t      success: function (res) {\n\t        console.log('res', res)\n\t        const poster = res.path\n\t        ctx.drawImage(poster, 0, 0, 150, 100)\n\t        ctx.draw(false, () => {\n\t          wx.canvasToTempFilePath({\n\t            x: 0,\n\t            y: 0,\n\t            width: 100,\n\t            height: 100,\n\t            destWidth: 100,\n\t            destHeight: 100,\n\t            canvasId: \"myCanvas\",\n\t            success(res) {\n\t              that.setData({\n\t                imgPath: res.tempFilePath\n\t              })\n\t              console.log(res.tempFilePath)\n\t            },\n\t            fail(err) {\n\t              console.log('err', err)\n\t            }\n\t          })\n\t        })\n\t        // è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®\n\t        wx.canvasGetImageData({\n\t          canvasId: 'myCanvas',\n\t          x: 0,\n\t          y: 0,\n\t          width: 150,\n\t          height: 100,\n\t          success(res) {\n\t            console.log(res.width) // 150\n\t            console.log(res.height) // 100\n\t            console.log(res.data instanceof Uint8ClampedArray) // true\n\t            console.log(res.data) // 150 * 100 * 4\n\t            console.log(res.data.length) // 150 * 100 * 4\n\t          }\n\t        })\n\t      }\n\t    })\n\t\t```\n\t\t```html\n\t\t<canvas wx:if=\"{{!imgPath}}\" id=\"myCanvas\" canvas-id=\"myCanvas\" style=\"width: 330px;height: 340px;\"></canvas>\n\t\t<image wx:else src=\"{{imgPath}}\" style=\"width: 330px;height: 340px;\" />\n\t\t```\n\t\t- è¿è¡Œæˆªå›¾\n\t\t\t- ![æ—§ç‰ˆcanvasè¿è¡Œæˆªå›¾](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2EzZTRiYTBkYzc2NDgzYTM1NTYxZDcwNDUzNzZkNjZmNDU5MTgucG5n?x-oss-process=image/format,png)\n## å†™åœ¨åé¢\n- æ„Ÿè°¢[Skadyå®è´](https://github.com/skadieyes)åœ¨æ¢è®¨é—®é¢˜ä¸­ç»™äºˆçš„å¸®åŠ©ï¼Œæ¬¢è¿å¤§å®¶å»githubæ‰¾å¥¹ç©ğŸ‘ˆ\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n----\n\t\t\n","slug":"å¾®ä¿¡å°ç¨‹åº-fix canvasåŸç”Ÿç»„ä»¶æœ€é¡¶å±‚","published":1,"updated":"2020-10-27T15:21:11.266Z","comments":1,"photos":[],"link":"","_id":"ckguz3u8e0037fw9k5n5v4rmd","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å¤§å®¶åº”è¯¥éƒ½çŸ¥é“è¿‡ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œcanvasç­‰åŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œé¡µé¢ä¸­æ— è®ºä½ è®¾ç½®å¤šå¤§çš„z-indexéƒ½æ— æ³•è¦†ç›–åœ¨å…¶ä¹‹ä¸Šï¼Œè¿™å°±å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜</li>\n<li>å°±åƒè¿™æ ·<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxYmQ5OTM2M2VkYjU1NTRmYjc5MzBlZDllMTA0ZjEwMTc2MDM0LnBuZw?x-oss-process=image/format,png\" alt=\"canvasé¡¶å±‚é—®é¢˜æˆªå›¾\"></li>\n<li>æŸ±çŠ¶å›¾æ˜¯ç”¨canvasç”»çš„ï¼Œå®ƒç½®äºäº†æˆ‘çš„tooltipä¹‹ä¸Šã€‚ã€è¿™çœ‹èµ·æ¥çœŸæ˜¯ä¸€ä¸ªå¯æ€•çš„é—®é¢˜<a id=\"more\"></a>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"è§£å†³é—®é¢˜\"><a href=\"#è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"è§£å†³é—®é¢˜\"></a>è§£å†³é—®é¢˜</h2><ul>\n<li>å¾®ä¿¡å®˜æ–¹æä¾›äº†<a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/cover-view.html\" target=\"_blank\" rel=\"noopener\">cover-view</a>åŸç”Ÿç»„ä»¶ï¼Œè¦†ç›–åœ¨åŸç”Ÿç»„ä»¶ä¹‹ä¸Šçš„æ–‡æœ¬è§†å›¾</li>\n<li>å¾®ä¿¡å®˜æ–¹æä¾›äº†å°†canvasè½¬åŒ–ä¸ºå›¾ç‰‡çš„æ–¹å¼â€“<a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html\" target=\"_blank\" rel=\"noopener\">wx.canvasToTempFilePath</a>ï¼Œè¿™æ ·å°±å¯ä»¥â€é™çº§â€œ</li>\n</ul>\n<h3 id=\"æ–¹æ³•ä¸€ï¼šcover-view\"><a href=\"#æ–¹æ³•ä¸€ï¼šcover-view\" class=\"headerlink\" title=\"æ–¹æ³•ä¸€ï¼šcover-view\"></a>æ–¹æ³•ä¸€ï¼šcover-view</h3><ul>\n<li>å°†tooltipç”¨cover-viewæ”¹å†™ï¼Œæ•ˆæœå¦‚ä¸‹<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2Y0MTZjZjhlMjNiZWEwMjNjYTM1M2JhOGExMDM1MDM2MzYyOTIucG5n?x-oss-process=image/format,png\" alt=\"cover-view version0.1 æˆªå›¾\"></li>\n<li>çœ‹ä¸Šå»ï¼Œæ˜¯è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œä¸”tooltipåçš„ç°è‰²èƒŒæ™¯ä¸èƒ½æ»‘åŠ¨äº†ï¼Œã€å¦ˆè€¶ï¼Œå¥½æ£’ï¼</li>\n<li>ä½†æ˜¯ï¼Œè¿™äº§ç”Ÿäº†ä¸€ä¸ªï¼š<strong>å½“æ–‡æœ¬è¶…å‡ºtooltipå®½åº¦æ—¶ï¼Œscroll-y: autoï¼Œå¤±æ•ˆäº†ï¼Œæº¢å‡ºéƒ¨åˆ†è¢«ç›´æ¥æˆªå–</strong></li>\n<li>ç½ªé­ç¥¸é¦–å°±æ˜¯å®ƒ<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2M5ZDljYjZiZTQ0ZGY3YmJmNmRlMjAxNDM1ZmYzOTJjNDMxNDMucG5n?x-oss-process=image/format,png\" alt=\"coverå†…ç½®æ ·å¼\"></li>\n</ul>\n</li>\n<li>é‚£æˆ‘ä»¬å¯ä»¥ï¼š<ul>\n<li>åœ¨tooltipåˆ†æ®µå†…å®¹ä¸­åŠ ä¸Š  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.modal-layer-content-rule</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">white-space</span>: pre-wrap;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>åœ¨å†…å®¹wrapperä¸­åŠ ä¸Š  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.modal-layer-content</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: scroll;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>å®Œç¾è§£å†³<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2FhZjRkMDAyODdjZGI4M2Y0NWRhMGVkOTg3Mzc5MGNhNDQxMjkucG5n?x-oss-process=image/format,png\" alt=\"cover-viewè§£å†³å›¾\"><h3 id=\"æ–¹æ³•äºŒï¼šwx-canvasToTempFilePath\"><a href=\"#æ–¹æ³•äºŒï¼šwx-canvasToTempFilePath\" class=\"headerlink\" title=\"æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath\"></a>æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath</h3></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>é¦–å…ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œå®˜æ–¹å…³äºcanvasç±»å‹æœ‰ä¸¤ç§<br><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2E4ZjJmNjA5OGYxNmQ4MzY3NWJiN2I3OWY0ZDM1NWM1MTAwMDg3LnBuZw?x-oss-process=image/format,png\" alt=\"ä¸¤ç§canvasç±»å‹\"></li>\n<li>æ–°canvas 2Dæ¥å£å°è¯•  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> query = wx.createSelectorQuery().in(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">   query.select(<span class=\"string\">'#myCanvas'</span>)</span><br><span class=\"line\">     .fields(&#123; <span class=\"attr\">node</span>: <span class=\"literal\">true</span>, <span class=\"attr\">size</span>: <span class=\"literal\">true</span> &#125;)</span><br><span class=\"line\">     .exec(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">       <span class=\"keyword\">const</span> canvas = res[<span class=\"number\">0</span>].node</span><br><span class=\"line\">       <span class=\"keyword\">const</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">const</span> img = canvas.createImage()</span><br><span class=\"line\">       img.onload = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">         ctx.drawImage(img, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       img.src = <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span></span><br><span class=\"line\">       <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(ctx.getImageData(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">150</span>, <span class=\"number\">100</span>).data)</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">type</span>=<span class=\"string\">\"2d\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzE5ZWE3ZGYxYjg2ODUzOWFhNzVhY2E0OTAxYzI2MzU2OTk4NDYucG5n?x-oss-process=image/format,png\" alt=\"canvas2d è¿è¡Œæˆªå›¾\"></li>\n<li>ç¬¬äºŒç§æ—§canvas  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ctx = wx.createCanvasContext(<span class=\"string\">'myCanvas'</span>)</span><br><span class=\"line\">   wx.getImageInfo(&#123;</span><br><span class=\"line\">       src: <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span>,</span><br><span class=\"line\">       success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(<span class=\"string\">'res'</span>, res)</span><br><span class=\"line\">         <span class=\"keyword\">const</span> poster = res.path                                  </span><br><span class=\"line\">         ctx.drawImage(poster, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">150</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">         ctx.draw()</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;)</span><br><span class=\"line\">     <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">     wx.canvasGetImageData(&#123;</span><br><span class=\"line\">       canvasId: <span class=\"string\">'myCanvas'</span>,</span><br><span class=\"line\">       x: <span class=\"number\">0</span>,</span><br><span class=\"line\">       y: <span class=\"number\">0</span>,</span><br><span class=\"line\">       width: <span class=\"number\">150</span>,</span><br><span class=\"line\">       height: <span class=\"number\">100</span>,</span><br><span class=\"line\">       success(res) &#123;</span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.width) <span class=\"comment\">// 150</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.height) <span class=\"comment\">// 100</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.data <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Uint8ClampedArray</span>) <span class=\"comment\">// true</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.data) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.data.length) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzU4NTg5MzQ4MDc3Njk3OTA0OTRmZmIzOWRiNDdjMWRmNjk4ODQucG5n?x-oss-process=image/format,png\" alt=\"æ—§canvas\"></li>\n<li>è™½ç„¶ä¸¤ç§æ–¹æ³•ï¼Œéƒ½èƒ½å®ç°å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œä½†æ–°ç‰ˆçš„è¿›è¡Œäº†createImageï¼Œå°†å…¶æ‰“å°çš„è¯ï¼Œå…¶å®å°±æ˜¯æ–°å»ºäº†ä¸€ä¸ªimgæ ‡ç­¾ï¼Œå¹¶å°†imgæ ‡ç­¾çš„ä¸œè¥¿ç»˜åˆ¶è¿›canvas<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzFjMjE1NzMzZTRkY2UzNGZiNzI4NDFhZWEyMDc0ZWIwMjQ1OTQucG5n?x-oss-process=image/format,png\" alt=\"img console\"></li>\n<li>ä¸ºä»€ä¹ˆå¾®ä¿¡å®˜æ–¹ä¼šä»…æ”¯æŒä»¥ä¸‹æ–¹å¼è¿›è¡Œæ–°ç‰ˆcanvas2d å›¾ç‰‡çš„ç»˜åˆ¶ï¼Œè€ƒè™‘æ˜¯ä»€ä¹ˆï¼Ÿ</li>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JhYWQ1OWRhNDI4M2FjZmViZTY1NGQ0ZWZiNTAxZDZlMjAxMjE2LnBuZw?x-oss-process=image/format,png\" alt=\"ç»å…¸æŠ¥é”™\"></li>\n</ul>\n</li>\n<li>ç°åœ¨æˆ‘ä»¬è¦å°†canvasçš„å†…å®¹å¯¼æˆå›¾ç‰‡ï¼ŒåŒæ ·åˆ†æˆæ–°æ—§ä¸¤ç‰ˆ</li>\n<li>ä¸»è¦æ€è·¯éƒ½æ˜¯ï¼šåœ¨wxmlä¸­ï¼Œå¦‚æœcanvasç»˜åˆ¶å›¾ç‰‡æ²¡æœ‰å®Œæˆï¼Œåˆ™æ˜¾ç¤ºcanvaså†…å®¹ï¼Œç»˜åˆ¶å®Œæˆåï¼Œå°±åˆ©ç”¨canvasToTempFilePathï¼Œå°†å›¾å±‚å†…å®¹ç”ŸæˆæŒ‡å®šå¤§å°å›¾ç‰‡ï¼Œæ˜¾ç¤ºimage<ul>\n<li>canvas2d   <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> that = <span class=\"keyword\">this</span></span><br><span class=\"line\">   <span class=\"keyword\">const</span> query = wx.createSelectorQuery().in(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">   query.select(<span class=\"string\">'#myCanvas'</span>)</span><br><span class=\"line\">     .fields(&#123; <span class=\"attr\">node</span>: <span class=\"literal\">true</span>, <span class=\"attr\">size</span>: <span class=\"literal\">true</span> &#125;)</span><br><span class=\"line\">     .exec(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">       <span class=\"keyword\">const</span> canvas = res[<span class=\"number\">0</span>].node</span><br><span class=\"line\">       <span class=\"keyword\">const</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">const</span> img = canvas.createImage()</span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(<span class=\"string\">'img'</span>, img)</span><br><span class=\"line\">       img.onload = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">         ctx.drawImage(img, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">           wx.canvasToTempFilePath(&#123;</span><br><span class=\"line\">             x: <span class=\"number\">0</span>,</span><br><span class=\"line\">             y: <span class=\"number\">0</span>,</span><br><span class=\"line\">             width: <span class=\"number\">100</span>,</span><br><span class=\"line\">             height: <span class=\"number\">100</span>,</span><br><span class=\"line\">             destWidth: <span class=\"number\">100</span>,</span><br><span class=\"line\">             destHeight: <span class=\"number\">100</span>,</span><br><span class=\"line\">             canvas: canvas,</span><br><span class=\"line\">             success(res) &#123;</span><br><span class=\"line\">               that.setData(&#123;</span><br><span class=\"line\">                 imgPath: res.tempFilePath</span><br><span class=\"line\">               &#125;)</span><br><span class=\"line\">             &#125;,</span><br><span class=\"line\">             fail(err) &#123;</span><br><span class=\"line\">               <span class=\"built_in\">console</span>.log(<span class=\"string\">'err'</span>, err)</span><br><span class=\"line\">             &#125;</span><br><span class=\"line\">           &#125;)</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       img.src = <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span></span><br><span class=\"line\">       <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(ctx.getImageData(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>).data)</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">\"&#123;&#123;!imgPath&#125;&#125;\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"2d\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">image</span> <span class=\"attr\">wx:else</span> <span class=\"attr\">src</span>=<span class=\"string\">\"&#123;&#123;imgPath&#125;&#125;\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>canvas2d éœ€è¦è¸©å¾—å‘æ˜¯ï¼šå®ƒçš„å®˜æ–¹æ–‡æ¡£ğŸ™ƒ<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UwM2Q1ZDg0YzYyNmI0NzlmZjBjOTlmNzA1YmRhYjg5NDc5MjcucG5n?x-oss-process=image/format,png\" alt=\"canvas2d è½¬å›¾ç‰‡è¯¯å¯¼\"></li>\n<li>å°è¯•ä¸‹æ¥ï¼Œä¼š<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxMjRiY2Q3ZmNjYWI5ODBlNDdkMTk2YTMyZGQyODI4NDUzODcucG5n?x-oss-process=image/format,png\" alt=\"ctx.drawæŠ¥é”™\"></li>\n</ul>\n</li>\n<li>é‚£æˆ‘ä»¬å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxODk5NWFiNDY4N2IwYmZlYzhjZTZkZWU2ZWQxYmZjMTA1MTY1LnBuZw?x-oss-process=image/format,png\" alt=\"canvas2d tempathæ­£ç¡®å®åŠ›\">è¿™æ‰æ˜¯ç¬¦åˆæˆ‘ä»¬éœ€è¦</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JmMzVlMzY4YzRjMmRhYTgxNTA0NzM0YTIxZGMxM2I2NDYwNzIucG5n?x-oss-process=image/format,png\" alt=\"canvas2dè¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>æ—§ç‰ˆcanvas  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ctx = wx.createCanvasContext(<span class=\"string\">'myCanvas'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> that = <span class=\"keyword\">this</span></span><br><span class=\"line\">wx.getImageInfo(&#123;</span><br><span class=\"line\">  src: <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span>,</span><br><span class=\"line\">  success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'res'</span>, res)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> poster = res.path</span><br><span class=\"line\">    ctx.drawImage(poster, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">150</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">    ctx.draw(<span class=\"literal\">false</span>, () =&gt; &#123;</span><br><span class=\"line\">      wx.canvasToTempFilePath(&#123;</span><br><span class=\"line\">        x: <span class=\"number\">0</span>,</span><br><span class=\"line\">        y: <span class=\"number\">0</span>,</span><br><span class=\"line\">        width: <span class=\"number\">100</span>,</span><br><span class=\"line\">        height: <span class=\"number\">100</span>,</span><br><span class=\"line\">        destWidth: <span class=\"number\">100</span>,</span><br><span class=\"line\">        destHeight: <span class=\"number\">100</span>,</span><br><span class=\"line\">        canvasId: <span class=\"string\">\"myCanvas\"</span>,</span><br><span class=\"line\">        success(res) &#123;</span><br><span class=\"line\">          that.setData(&#123;</span><br><span class=\"line\">            imgPath: res.tempFilePath</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(res.tempFilePath)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        fail(err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'err'</span>, err)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">    wx.canvasGetImageData(&#123;</span><br><span class=\"line\">      canvasId: <span class=\"string\">'myCanvas'</span>,</span><br><span class=\"line\">      x: <span class=\"number\">0</span>,</span><br><span class=\"line\">      y: <span class=\"number\">0</span>,</span><br><span class=\"line\">      width: <span class=\"number\">150</span>,</span><br><span class=\"line\">      height: <span class=\"number\">100</span>,</span><br><span class=\"line\">      success(res) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.width) <span class=\"comment\">// 150</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.height) <span class=\"comment\">// 100</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.data <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Uint8ClampedArray</span>) <span class=\"comment\">// true</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.data) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.data.length) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">\"&#123;&#123;!imgPath&#125;&#125;\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">image</span> <span class=\"attr\">wx:else</span> <span class=\"attr\">src</span>=<span class=\"string\">\"&#123;&#123;imgPath&#125;&#125;\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2EzZTRiYTBkYzc2NDgzYTM1NTYxZDcwNDUzNzZkNjZmNDU5MTgucG5n?x-oss-process=image/format,png\" alt=\"æ—§ç‰ˆcanvasè¿è¡Œæˆªå›¾\"><h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>æ„Ÿè°¢<a href=\"https://github.com/skadieyes\" target=\"_blank\" rel=\"noopener\">Skadyå®è´</a>åœ¨æ¢è®¨é—®é¢˜ä¸­ç»™äºˆçš„å¸®åŠ©ï¼Œæ¬¢è¿å¤§å®¶å»githubæ‰¾å¥¹ç©ğŸ‘ˆ</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n<hr>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å¤§å®¶åº”è¯¥éƒ½çŸ¥é“è¿‡ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œcanvasç­‰åŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œé¡µé¢ä¸­æ— è®ºä½ è®¾ç½®å¤šå¤§çš„z-indexéƒ½æ— æ³•è¦†ç›–åœ¨å…¶ä¹‹ä¸Šï¼Œè¿™å°±å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜</li>\n<li>å°±åƒè¿™æ ·<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxYmQ5OTM2M2VkYjU1NTRmYjc5MzBlZDllMTA0ZjEwMTc2MDM0LnBuZw?x-oss-process=image/format,png\" alt=\"canvasé¡¶å±‚é—®é¢˜æˆªå›¾\"></li>\n<li>æŸ±çŠ¶å›¾æ˜¯ç”¨canvasç”»çš„ï¼Œå®ƒç½®äºäº†æˆ‘çš„tooltipä¹‹ä¸Šã€‚ã€è¿™çœ‹èµ·æ¥çœŸæ˜¯ä¸€ä¸ªå¯æ€•çš„é—®é¢˜","more":"</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"è§£å†³é—®é¢˜\"><a href=\"#è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"è§£å†³é—®é¢˜\"></a>è§£å†³é—®é¢˜</h2><ul>\n<li>å¾®ä¿¡å®˜æ–¹æä¾›äº†<a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/cover-view.html\" target=\"_blank\" rel=\"noopener\">cover-view</a>åŸç”Ÿç»„ä»¶ï¼Œè¦†ç›–åœ¨åŸç”Ÿç»„ä»¶ä¹‹ä¸Šçš„æ–‡æœ¬è§†å›¾</li>\n<li>å¾®ä¿¡å®˜æ–¹æä¾›äº†å°†canvasè½¬åŒ–ä¸ºå›¾ç‰‡çš„æ–¹å¼â€“<a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html\" target=\"_blank\" rel=\"noopener\">wx.canvasToTempFilePath</a>ï¼Œè¿™æ ·å°±å¯ä»¥â€é™çº§â€œ</li>\n</ul>\n<h3 id=\"æ–¹æ³•ä¸€ï¼šcover-view\"><a href=\"#æ–¹æ³•ä¸€ï¼šcover-view\" class=\"headerlink\" title=\"æ–¹æ³•ä¸€ï¼šcover-view\"></a>æ–¹æ³•ä¸€ï¼šcover-view</h3><ul>\n<li>å°†tooltipç”¨cover-viewæ”¹å†™ï¼Œæ•ˆæœå¦‚ä¸‹<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2Y0MTZjZjhlMjNiZWEwMjNjYTM1M2JhOGExMDM1MDM2MzYyOTIucG5n?x-oss-process=image/format,png\" alt=\"cover-view version0.1 æˆªå›¾\"></li>\n<li>çœ‹ä¸Šå»ï¼Œæ˜¯è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œä¸”tooltipåçš„ç°è‰²èƒŒæ™¯ä¸èƒ½æ»‘åŠ¨äº†ï¼Œã€å¦ˆè€¶ï¼Œå¥½æ£’ï¼</li>\n<li>ä½†æ˜¯ï¼Œè¿™äº§ç”Ÿäº†ä¸€ä¸ªï¼š<strong>å½“æ–‡æœ¬è¶…å‡ºtooltipå®½åº¦æ—¶ï¼Œscroll-y: autoï¼Œå¤±æ•ˆäº†ï¼Œæº¢å‡ºéƒ¨åˆ†è¢«ç›´æ¥æˆªå–</strong></li>\n<li>ç½ªé­ç¥¸é¦–å°±æ˜¯å®ƒ<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2M5ZDljYjZiZTQ0ZGY3YmJmNmRlMjAxNDM1ZmYzOTJjNDMxNDMucG5n?x-oss-process=image/format,png\" alt=\"coverå†…ç½®æ ·å¼\"></li>\n</ul>\n</li>\n<li>é‚£æˆ‘ä»¬å¯ä»¥ï¼š<ul>\n<li>åœ¨tooltipåˆ†æ®µå†…å®¹ä¸­åŠ ä¸Š  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.modal-layer-content-rule</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">white-space</span>: pre-wrap;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>åœ¨å†…å®¹wrapperä¸­åŠ ä¸Š  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.modal-layer-content</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: scroll;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>å®Œç¾è§£å†³<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2FhZjRkMDAyODdjZGI4M2Y0NWRhMGVkOTg3Mzc5MGNhNDQxMjkucG5n?x-oss-process=image/format,png\" alt=\"cover-viewè§£å†³å›¾\"><h3 id=\"æ–¹æ³•äºŒï¼šwx-canvasToTempFilePath\"><a href=\"#æ–¹æ³•äºŒï¼šwx-canvasToTempFilePath\" class=\"headerlink\" title=\"æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath\"></a>æ–¹æ³•äºŒï¼šwx.canvasToTempFilePath</h3></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>é¦–å…ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œå®˜æ–¹å…³äºcanvasç±»å‹æœ‰ä¸¤ç§<br><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2E4ZjJmNjA5OGYxNmQ4MzY3NWJiN2I3OWY0ZDM1NWM1MTAwMDg3LnBuZw?x-oss-process=image/format,png\" alt=\"ä¸¤ç§canvasç±»å‹\"></li>\n<li>æ–°canvas 2Dæ¥å£å°è¯•  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> query = wx.createSelectorQuery().in(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">   query.select(<span class=\"string\">'#myCanvas'</span>)</span><br><span class=\"line\">     .fields(&#123; <span class=\"attr\">node</span>: <span class=\"literal\">true</span>, <span class=\"attr\">size</span>: <span class=\"literal\">true</span> &#125;)</span><br><span class=\"line\">     .exec(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">       <span class=\"keyword\">const</span> canvas = res[<span class=\"number\">0</span>].node</span><br><span class=\"line\">       <span class=\"keyword\">const</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">const</span> img = canvas.createImage()</span><br><span class=\"line\">       img.onload = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">         ctx.drawImage(img, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       img.src = <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span></span><br><span class=\"line\">       <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(ctx.getImageData(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">150</span>, <span class=\"number\">100</span>).data)</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">type</span>=<span class=\"string\">\"2d\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzE5ZWE3ZGYxYjg2ODUzOWFhNzVhY2E0OTAxYzI2MzU2OTk4NDYucG5n?x-oss-process=image/format,png\" alt=\"canvas2d è¿è¡Œæˆªå›¾\"></li>\n<li>ç¬¬äºŒç§æ—§canvas  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ctx = wx.createCanvasContext(<span class=\"string\">'myCanvas'</span>)</span><br><span class=\"line\">   wx.getImageInfo(&#123;</span><br><span class=\"line\">       src: <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span>,</span><br><span class=\"line\">       success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(<span class=\"string\">'res'</span>, res)</span><br><span class=\"line\">         <span class=\"keyword\">const</span> poster = res.path                                  </span><br><span class=\"line\">         ctx.drawImage(poster, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">150</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">         ctx.draw()</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;)</span><br><span class=\"line\">     <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">     wx.canvasGetImageData(&#123;</span><br><span class=\"line\">       canvasId: <span class=\"string\">'myCanvas'</span>,</span><br><span class=\"line\">       x: <span class=\"number\">0</span>,</span><br><span class=\"line\">       y: <span class=\"number\">0</span>,</span><br><span class=\"line\">       width: <span class=\"number\">150</span>,</span><br><span class=\"line\">       height: <span class=\"number\">100</span>,</span><br><span class=\"line\">       success(res) &#123;</span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.width) <span class=\"comment\">// 150</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.height) <span class=\"comment\">// 100</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.data <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Uint8ClampedArray</span>) <span class=\"comment\">// true</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.data) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(res.data.length) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzU4NTg5MzQ4MDc3Njk3OTA0OTRmZmIzOWRiNDdjMWRmNjk4ODQucG5n?x-oss-process=image/format,png\" alt=\"æ—§canvas\"></li>\n<li>è™½ç„¶ä¸¤ç§æ–¹æ³•ï¼Œéƒ½èƒ½å®ç°å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasï¼Œä½†æ–°ç‰ˆçš„è¿›è¡Œäº†createImageï¼Œå°†å…¶æ‰“å°çš„è¯ï¼Œå…¶å®å°±æ˜¯æ–°å»ºäº†ä¸€ä¸ªimgæ ‡ç­¾ï¼Œå¹¶å°†imgæ ‡ç­¾çš„ä¸œè¥¿ç»˜åˆ¶è¿›canvas<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzFjMjE1NzMzZTRkY2UzNGZiNzI4NDFhZWEyMDc0ZWIwMjQ1OTQucG5n?x-oss-process=image/format,png\" alt=\"img console\"></li>\n<li>ä¸ºä»€ä¹ˆå¾®ä¿¡å®˜æ–¹ä¼šä»…æ”¯æŒä»¥ä¸‹æ–¹å¼è¿›è¡Œæ–°ç‰ˆcanvas2d å›¾ç‰‡çš„ç»˜åˆ¶ï¼Œè€ƒè™‘æ˜¯ä»€ä¹ˆï¼Ÿ</li>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JhYWQ1OWRhNDI4M2FjZmViZTY1NGQ0ZWZiNTAxZDZlMjAxMjE2LnBuZw?x-oss-process=image/format,png\" alt=\"ç»å…¸æŠ¥é”™\"></li>\n</ul>\n</li>\n<li>ç°åœ¨æˆ‘ä»¬è¦å°†canvasçš„å†…å®¹å¯¼æˆå›¾ç‰‡ï¼ŒåŒæ ·åˆ†æˆæ–°æ—§ä¸¤ç‰ˆ</li>\n<li>ä¸»è¦æ€è·¯éƒ½æ˜¯ï¼šåœ¨wxmlä¸­ï¼Œå¦‚æœcanvasç»˜åˆ¶å›¾ç‰‡æ²¡æœ‰å®Œæˆï¼Œåˆ™æ˜¾ç¤ºcanvaså†…å®¹ï¼Œç»˜åˆ¶å®Œæˆåï¼Œå°±åˆ©ç”¨canvasToTempFilePathï¼Œå°†å›¾å±‚å†…å®¹ç”ŸæˆæŒ‡å®šå¤§å°å›¾ç‰‡ï¼Œæ˜¾ç¤ºimage<ul>\n<li>canvas2d   <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> that = <span class=\"keyword\">this</span></span><br><span class=\"line\">   <span class=\"keyword\">const</span> query = wx.createSelectorQuery().in(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">   query.select(<span class=\"string\">'#myCanvas'</span>)</span><br><span class=\"line\">     .fields(&#123; <span class=\"attr\">node</span>: <span class=\"literal\">true</span>, <span class=\"attr\">size</span>: <span class=\"literal\">true</span> &#125;)</span><br><span class=\"line\">     .exec(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">       <span class=\"keyword\">const</span> canvas = res[<span class=\"number\">0</span>].node</span><br><span class=\"line\">       <span class=\"keyword\">const</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">const</span> img = canvas.createImage()</span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(<span class=\"string\">'img'</span>, img)</span><br><span class=\"line\">       img.onload = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">         ctx.drawImage(img, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">           wx.canvasToTempFilePath(&#123;</span><br><span class=\"line\">             x: <span class=\"number\">0</span>,</span><br><span class=\"line\">             y: <span class=\"number\">0</span>,</span><br><span class=\"line\">             width: <span class=\"number\">100</span>,</span><br><span class=\"line\">             height: <span class=\"number\">100</span>,</span><br><span class=\"line\">             destWidth: <span class=\"number\">100</span>,</span><br><span class=\"line\">             destHeight: <span class=\"number\">100</span>,</span><br><span class=\"line\">             canvas: canvas,</span><br><span class=\"line\">             success(res) &#123;</span><br><span class=\"line\">               that.setData(&#123;</span><br><span class=\"line\">                 imgPath: res.tempFilePath</span><br><span class=\"line\">               &#125;)</span><br><span class=\"line\">             &#125;,</span><br><span class=\"line\">             fail(err) &#123;</span><br><span class=\"line\">               <span class=\"built_in\">console</span>.log(<span class=\"string\">'err'</span>, err)</span><br><span class=\"line\">             &#125;</span><br><span class=\"line\">           &#125;)</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       img.src = <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span></span><br><span class=\"line\">       <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(ctx.getImageData(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>).data)</span><br><span class=\"line\">     &#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">\"&#123;&#123;!imgPath&#125;&#125;\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"2d\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">image</span> <span class=\"attr\">wx:else</span> <span class=\"attr\">src</span>=<span class=\"string\">\"&#123;&#123;imgPath&#125;&#125;\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>canvas2d éœ€è¦è¸©å¾—å‘æ˜¯ï¼šå®ƒçš„å®˜æ–¹æ–‡æ¡£ğŸ™ƒ<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UwM2Q1ZDg0YzYyNmI0NzlmZjBjOTlmNzA1YmRhYjg5NDc5MjcucG5n?x-oss-process=image/format,png\" alt=\"canvas2d è½¬å›¾ç‰‡è¯¯å¯¼\"></li>\n<li>å°è¯•ä¸‹æ¥ï¼Œä¼š<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2UxMjRiY2Q3ZmNjYWI5ODBlNDdkMTk2YTMyZGQyODI4NDUzODcucG5n?x-oss-process=image/format,png\" alt=\"ctx.drawæŠ¥é”™\"></li>\n</ul>\n</li>\n<li>é‚£æˆ‘ä»¬å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxODk5NWFiNDY4N2IwYmZlYzhjZTZkZWU2ZWQxYmZjMTA1MTY1LnBuZw?x-oss-process=image/format,png\" alt=\"canvas2d tempathæ­£ç¡®å®åŠ›\">è¿™æ‰æ˜¯ç¬¦åˆæˆ‘ä»¬éœ€è¦</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AxLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2JmMzVlMzY4YzRjMmRhYTgxNTA0NzM0YTIxZGMxM2I2NDYwNzIucG5n?x-oss-process=image/format,png\" alt=\"canvas2dè¿è¡Œæˆªå›¾\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>æ—§ç‰ˆcanvas  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ctx = wx.createCanvasContext(<span class=\"string\">'myCanvas'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> that = <span class=\"keyword\">this</span></span><br><span class=\"line\">wx.getImageInfo(&#123;</span><br><span class=\"line\">  src: <span class=\"string\">'https://p0.meituan.net/myvideodistribute/0990cc2062e81ab6cc11fd8690f8755042005.jpg'</span>,</span><br><span class=\"line\">  success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'res'</span>, res)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> poster = res.path</span><br><span class=\"line\">    ctx.drawImage(poster, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">150</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">    ctx.draw(<span class=\"literal\">false</span>, () =&gt; &#123;</span><br><span class=\"line\">      wx.canvasToTempFilePath(&#123;</span><br><span class=\"line\">        x: <span class=\"number\">0</span>,</span><br><span class=\"line\">        y: <span class=\"number\">0</span>,</span><br><span class=\"line\">        width: <span class=\"number\">100</span>,</span><br><span class=\"line\">        height: <span class=\"number\">100</span>,</span><br><span class=\"line\">        destWidth: <span class=\"number\">100</span>,</span><br><span class=\"line\">        destHeight: <span class=\"number\">100</span>,</span><br><span class=\"line\">        canvasId: <span class=\"string\">\"myCanvas\"</span>,</span><br><span class=\"line\">        success(res) &#123;</span><br><span class=\"line\">          that.setData(&#123;</span><br><span class=\"line\">            imgPath: res.tempFilePath</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(res.tempFilePath)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        fail(err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'err'</span>, err)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// è¿™ç§æ–¹å¼è·å–canvasåŒºåŸŸéšå«çš„åƒç´ æ•°æ®</span></span><br><span class=\"line\">    wx.canvasGetImageData(&#123;</span><br><span class=\"line\">      canvasId: <span class=\"string\">'myCanvas'</span>,</span><br><span class=\"line\">      x: <span class=\"number\">0</span>,</span><br><span class=\"line\">      y: <span class=\"number\">0</span>,</span><br><span class=\"line\">      width: <span class=\"number\">150</span>,</span><br><span class=\"line\">      height: <span class=\"number\">100</span>,</span><br><span class=\"line\">      success(res) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.width) <span class=\"comment\">// 150</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.height) <span class=\"comment\">// 100</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.data <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Uint8ClampedArray</span>) <span class=\"comment\">// true</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.data) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res.data.length) <span class=\"comment\">// 150 * 100 * 4</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">\"&#123;&#123;!imgPath&#125;&#125;\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">canvas-id</span>=<span class=\"string\">\"myCanvas\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">image</span> <span class=\"attr\">wx:else</span> <span class=\"attr\">src</span>=<span class=\"string\">\"&#123;&#123;imgPath&#125;&#125;\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 330px;height: 340px;\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2EzZTRiYTBkYzc2NDgzYTM1NTYxZDcwNDUzNzZkNjZmNDU5MTgucG5n?x-oss-process=image/format,png\" alt=\"æ—§ç‰ˆcanvasè¿è¡Œæˆªå›¾\"><h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>æ„Ÿè°¢<a href=\"https://github.com/skadieyes\" target=\"_blank\" rel=\"noopener\">Skadyå®è´</a>åœ¨æ¢è®¨é—®é¢˜ä¸­ç»™äºˆçš„å¸®åŠ©ï¼Œæ¬¢è¿å¤§å®¶å»githubæ‰¾å¥¹ç©ğŸ‘ˆ</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n<hr>"},{"title":"å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ","date":"2020-04-05T04:06:48.000Z","description":["æ˜¯çš„æˆ‘è¦å¼€å§‹åšï¼šæ ¹æ®å›¾ç‰‡çš„ä¸»è‰²è°ƒæ¥æ”¹å˜ä¸€ä¸‹é¡µé¢èƒŒæ™¯é¢œè‰²äº†ğŸ™†","è®°å½•ä¸€ä¸‹ï¼Œè‡ªå·±ç¢°åˆ°çš„é—®é¢˜ä»¥åŠæ€è€ƒ","æ—¶é—´å¤šçš„è¯ï¼Œä¼šè€ƒè™‘å°†ä»£ç å‘åœ¨githubï¼Œæ¬¢è¿å¤§å®¶å»starğŸ˜˜ - ç†ä¸€ä¸‹æ€è·¯ 1. å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvas 2. é€šè¿‡canvasçš„getImageDataè·å–å›¾ç‰‡çš„åƒç´ æ•°æ® -  [canvas 2d ä¸æ—§ç‰ˆ canvas å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasçš„ä¸¤ç§æ–¹æ³•å®è·µ](https://blog.csdn.net/Elle_Peng/article/details/105030971) 3. åˆ†æç›®å‰ä¸»è¦ç”¨äºè·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„ç®—æ³•ï¼Œå¹¶å®è·µ 4. å¾—åˆ°ä¸»è¦è‰²è°ƒï¼Œå†å°†rgbè½¬æ¢æˆhsbï¼Œå¹¶å¯¹bå€¼ï¼Œè¿›è¡Œä¿®æ”¹ï¼Œåˆ¶ä½œæ¸å˜ï¼Œå·¦ä¾§35ï¼Œå³ä¾§15"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- æ˜¯çš„æˆ‘è¦å¼€å§‹åšï¼šæ ¹æ®å›¾ç‰‡çš„ä¸»è‰²è°ƒæ¥æ”¹å˜ä¸€ä¸‹é¡µé¢èƒŒæ™¯é¢œè‰²äº†ğŸ™†\n- è®°å½•ä¸€ä¸‹ï¼Œè‡ªå·±ç¢°åˆ°çš„é—®é¢˜ä»¥åŠæ€è€ƒ\n- [miniprogram-main-color å®Œæ•´ä»£ç  ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/miniprogram-main-color) æ¬¢è¿å¤§å®¶å»starğŸ˜˜\n---\n\n## å¼€å‘å‡†å¤‡\n - ç†ä¸€ä¸‹æ€è·¯\n\t1. å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvas\n\t2. é€šè¿‡canvasçš„getImageDataè·å–å›¾ç‰‡çš„åƒç´ æ•°æ®\n\t\t-  [canvas 2d ä¸æ—§ç‰ˆ canvas å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasçš„ä¸¤ç§æ–¹æ³•å®è·µ](https://blog.csdn.net/Elle_Peng/article/details/105030971)\n\t3. åˆ†æç›®å‰ä¸»è¦ç”¨äºè·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„ç®—æ³•ï¼Œå¹¶å®è·µ\n\t4. å¾—åˆ°ä¸»è¦è‰²è°ƒï¼Œå†å°†rgbè½¬æ¢æˆhsbï¼Œå¹¶å¯¹bå€¼ï¼Œè¿›è¡Œä¿®æ”¹ï¼Œåˆ¶ä½œæ¸å˜ï¼Œå·¦ä¾§35ï¼Œå³ä¾§15\n<!-- more -->\n- å—¯ï¼Œç¥æˆ‘æˆåŠŸ\n## é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•\n- [é¢œè‰²ç©ºé—´ RGB CMY HSV HSL LAB](http://www.360doc.com/content/17/0417/19/41797635_646363886.shtml)\n- å›¾ç‰‡é¢œè‰²é‡åŒ–ç®—æ³•\n\t- æ¯”è¾ƒå¸¸è§çš„åº”ç”¨å°±æ˜¯ç”¨äºæå–å›¾ç‰‡çš„ä¸»è‰²è°ƒç”¨äºä¸Šè‰²é…è‰²,å½“ç„¶ä¹Ÿå¯ä»¥ç”¨äºå›¾åƒåˆ†å‰²\n\t- ä¸»æµç®—æ³•\n\t\t- ä¸¤ä¸ªå¤§æ–¹å‘\n\t\t- **åœ¨é¢œè‰²ç©ºé—´åˆç†åœ°é€‰å–é‡‡æ ·ç‚¹æ¥æ„é€ é¢œè‰²è¡¨ï¼Œä½¿å¾—å‡è‰²åçš„å›¾åƒå’ŒåŸå›¾å°½å¯èƒ½åœ°æ¥è¿‘**\n\t\t\t- ç›´æ¥é‡åŒ–\n\t\t\t\t- å¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£\n\t\t\t- ç»Ÿè®¡é‡åŒ–\n\t\t\t\t- æ ¸å¿ƒï¼šè°ƒæ•´ç›´æ–¹å›¾ä½¿å¾—ç´¯ç§¯åˆ†å¸ƒæ›²çº¿å‘ˆçº¿æ€§ï¼Œä»è€Œä½¿å›¾åƒåƒç´ ç‚¹çš„äº®åº¦å€¼å°½å¯èƒ½å‡åŒ€åœ°åˆ†å¸ƒ\n\t\t\t\t- åˆ©ç”¨åŸå›¾çš„ç›´æ–¹å›¾æ¥å¼•å¯¼é‡‡æ ·ç‚¹çš„é€‰å–ï¼Œä½¿å¾—æ¯ä¸ªé‡‡æ ·ç‚¹å¯ä»¥å¤§è‡´è¦†ç›–ç›¸åŒæ•°é‡çš„åƒç´ ç‚¹\n\t\t\t\t- å¯¹æ¯ä¸ªé¢œè‰²é€šé“å»ºç«‹ç›´æ–¹å›¾ï¼Œç„¶åæ ¹æ®è¿™äº›ç›´æ–¹å›¾å¯¹å„ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡‡æ ·ï¼Œåœ¨åƒç´ å€¼åˆ†å¸ƒå¤šçš„åŒºåŸŸè¿›è¡Œå¯†é›†é‡‡æ ·ï¼Œåˆ«çš„åŒºåŸŸç¨€ç–é‡‡æ ·ï¼Œå†åˆ©ç”¨è¿™äº›é‡‡æ ·ç‚¹æ¥ç»„åˆæˆæœ€ç»ˆçš„é¢œè‰²è¡¨ï¼ŒåŸå›¾ä¸­çš„æ¯ä¸ªåƒç´ ç‚¹ç”¨é¢œè‰²è¡¨ä¸­æœ€æ¥è¿‘çš„é¢œè‰²æ›¿æ¢æ‰\n\t\t\t- é¢œè‰²ç©ºé—´åˆ†å‰²(Median-Cut)\n\t\t\t\t- æ ¸å¿ƒï¼šåœ¨é¢œè‰²ç©ºé—´å»ºç«‹ä¸€æ£µäºŒå‰æ ‘ï¼Œé€šè¿‡ä¸æ–­åœ°ç»†åŒ–è¿™æ£µæ ‘æ¥è¿‘ä¼¼å¾—åˆ°ä¸€ä¸ªé¢œè‰²ä¸‰ç»´ç›´æ–¹å›¾ï¼Œç„¶åå†æ ¹æ®è¿™æ£µæ ‘æ¥åˆ†é…é‡‡æ ·ç‚¹\n\t\t\t\t- åŸºäºå›¾åƒé¢œè‰²æ ·æœ¬åˆ†å¸ƒçš„è‡ªé€‚åº”æ–¹æ³•ï¼Œä¸è®ºå›¾åƒä¸­é¢œè‰²æ ·æœ¬çš„åˆ†å¸ƒå¦‚ä½•ï¼Œæ€»æ˜¯å¯ä»¥ç”Ÿæˆä¸€ä¸ªå’Œé¢œè‰²æ ·æœ¬åˆ†å¸ƒåŒ¹é…è‰¯å¥½çš„é¢œè‰²è¡¨ï¼šåœ¨é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸå†…é‡‡æ ·ç‚¹åˆ†å¸ƒä¹Ÿç›¸å¯¹å¯†é›†ï¼Œå…¶ä»–åŒºåŸŸåˆ™åˆ†é…äº†è¾ƒå°‘çš„é‡‡æ ·ç‚¹ã€‚ä¸”ç›¸åŒæ•°ç›®çš„é¢œè‰²æ ·æœ¬æ€»æ˜¯ç”¨åŒæ ·æ•°é‡çš„é‡‡æ ·ç‚¹æ¥ä»£è¡¨ï¼Œæ‰€ä»¥é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸï¼Œé‡‡æ ·ç‚¹çš„æ•°é‡è‡ªç„¶å°±ä¼šå¤šï¼Œåä¹‹åˆ™ç›¸åº”çš„æ¯”è¾ƒå°‘\n\t\t\t\t- æœ€é‡è¦ã€åº”ç”¨æœ€å¹¿æ³›çš„å‡è‰²ç®—æ³•ä¹‹ä¸€\n\t\t\t- kå‡å€¼èšç±»(k-Means clustering)\n\t\t\t\t- æ ¸å¿ƒï¼šå°†åƒç´ æŒ‰é¢œè‰²çš„ç›¸ä¼¼ç¨‹åº¦å½’ç±»\n\t\t- **ä»ä¸€ä¸ªåˆå§‹çš„é¢œè‰²è¡¨å‡ºå‘ï¼Œé€šè¿‡ä¸æ–­ä¿®æ”¹é¢œè‰²è¡¨æ¥æ”¹å–„å‡è‰²æ•ˆæœ**\n\t\t\t- ç¥ç»ç½‘ç»œæ–¹æ³•(ANN)\n\t\t\t\t- é¢œè‰²è¡¨é€šè¿‡ç¥ç»å…ƒæ¥ç¼–ç ï¼Œé€šè¿‡ç¼“æ…¢çš„è°ƒèŠ‚ç¥ç»å…ƒçš„é¢œè‰²å€¼ä»¥ä¿è¯æ•´ä¸ªç¥ç»ç½‘ç»œé€æ­¥æ”¶æ•›äºæœ€å°è¯¯å·®çŠ¶æ€ï¼ˆå³é€šè¿‡ç¥ç»ç½‘ç»œäº§ç”Ÿçš„å›¾åƒå’ŒåŸå›¾ä¹‹é—´è¯¯å·®æœ€å°ï¼‰\n## ç›´æ¥é‡åŒ–å®è·µ\n- é¦–å…ˆæˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€çœ‹getImageDataåçš„æ•°æ®\n\t- ![getImageDataæ•°æ®](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzljZjVjMjQzMDI0NmE0YjE0YzFlYmMzMjYwZDkwYTgwNTQzMDIucG5n?x-oss-process=image/format,png)\n\t- å¯ä»¥ç®€å•çœ‹ä½œæ˜¯å¤–å±‚å¾ªç¯ä¸ºrgbaçš„æ‰“å¹³äº†äºŒç»´æ•°ç»„\n- å¦‚æœæŒ‰æ»¡è¶³éœ€æ±‚åšï¼Œåªè¦ä¸€ä¸ªä¸»è‰²è°ƒçš„è¯ï¼Œå¯ä»¥æŠŠæ•´ä¸ªgetImageDataè·å¾—çš„æ•°æ®ï¼Œè¿›è¡Œå„ä¸ªé€šé“çš„å¹³å‡å€¼æ±‚å€¼ï¼Œå†æ‹¼æ¥ï¼Œåƒè¿™æ ·\n\t```javascript\n\tgetUniqueColor(imageData) {\n    let res_r = 0\n    let res_g = 0\n    let res_b = 0\n    let res_a = 0\n    for (let i = 0; i < imageData.length; i += 1) {\n      if (i % 4 === 0) {\n        res_r += imageData[i]\n      } else if (i % 4 === 1) {\n        res_g += imageData[i]\n      } else if (i % 4 === 2) {\n        res_b += imageData[i]\n      } else if (i % 4 === 3) {\n        res_a += imageData[i]\n      } \n    }\n    res_r = Math.round(res_r / (imageData.length / 4))\n    res_g =  Math.round(res_g / (imageData.length / 4))\n    res_b =  Math.round(res_b / (imageData.length / 4))\n    res_a =  Math.round(res_a / (imageData.length / 4))\n    console.log('res_r', res_r)\n    console.log('res_g', res_g)\n    console.log('res_b', res_b)\n    console.log('res_a', res_a)\n  },\n\t```\n\t- è¿è¡Œæˆªå›¾\n\t\t- ![æš´åŠ›æ³•æ±‚ä¸»è‰²è°ƒ](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzc4NzFiOTVmYzA4NWQ3NGQwNDc4OWY0ZWI5Yzc0YThmNzQ5OTYucG5n?x-oss-process=image/format,png)\n\t\t- æ— ç›¸å…³ç‚¹è¶Šå¤šï¼Œè¯¯å·®è¶Šå¤§ğŸ‘\n- æˆ‘ä»¬å¯ä»¥â€œå¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£â€\n\t```javascript\n\tconst COLOR_SIZE = 40 // å•ä½è‰²å—çš„å¤§å°ï¼ˆåƒç´ ä¸ªæ•°ï¼Œé»˜è®¤40ï¼‰ã€‚ä»¥å•ä½è‰²å—çš„å¹³å‡åƒç´ å€¼ä¸ºä½œä¸ºç»Ÿè®¡å•ä½\n\tconst LEVEL = 32 // è‰²æ·±ï¼Œé¢œè‰²åˆ†åŒºå‚æ•°ï¼ˆ0-255ï¼‰ï¼Œæ€»256ï¼Œ2^8ï¼Œå³8bitï¼Œ4ä¸ªé€šé“ï¼ˆrgbaï¼‰ï¼Œå³é»˜è®¤è‰²æ·±4*8bitï¼Œ32bit\n\t// åˆ†åŒºå—ï¼Œå¯ä»¥æ‹“å±•æ€§çš„æ±‚ä¸»è¦è‰²æ¿ï¼Œç”¨æ¥åšpalette\n    const mapData = that.getLevelData(imageData);\n    const colors = that.getMostColor(mapData);\n    if (!colors) {\n      return\n    } else {\n      const color = that.getAverageColor(colors)\n      console.log('color', color)\n    }\n\t```\n\t- å°†getImageDataæ•°æ®åˆ†æˆç‰¹å®šå¤§å°çš„åŒºå—ï¼Œåˆ†åˆ«ç®—å‡ºå„ä¸ªåŒºå—çš„averageColorï¼Œå†åˆ©ç”¨mapç‰¹æ€§ï¼Œå°†averageColorä½œkeyï¼Œcountå„ä¸ªaverageColorä¸ªæ•°\n\t\t```javascript\n\t\t  // è·å–æ¯æ®µçš„é¢œè‰²æ•°æ®\n\t\t  // æ ¹æ®åƒç´ æ•°æ®ï¼ŒæŒ‰å•ä½è‰²å—è¿›è¡Œåˆ‡å‰²\n\t\t  getLevelData(imageData) {\n\t\t    const len = imageData.length;\n\t\t    const mapData = {};\n\t\t    for (let i = 0; i < len; i += COLOR_SIZE * 4) {\n\t\t      const blockColor = this.getBlockColor(imageData, i); // è¯¥åŒºå—å¹³å‡rgba [{r,g,b,a}]æ•°æ®\n\t\t      // è·å–å„ä¸ªåŒºå—çš„å¹³å‡rgbaæ•°æ®ï¼Œå°†å„ä¸ªé€šé“çš„é¢œè‰²è¿›è¡ŒLEVELè‰²æ·±é™çº§\n\t\t      // æ ¹æ®r_g_b_a å»ºç«‹mapç´¢å¼•\n\t\t      const key = this.getColorLevel(blockColor);\n\t\t      !mapData[key] && (mapData[key] = []);\n\t\t      mapData[key].push(blockColor);\n\t\t    }\n\t\t    return mapData;\n\t\t  },\n\t\t\n\t\t  // è·å–å•ä½å—çš„å…¨éƒ¨è‰²å€¼\n\t\t  // å¹¶æ ¹æ®å…¨éƒ¨è‰²å€¼ï¼Œè®¡ç®—å¹³å‡è‰²å€¼\n\t\t  // å¤„ç†æœ€åè¾¹ç•Œå€¼ï¼Œå°äºCOLOR_SIZE\n\t\t  getBlockColor(imageData, start) {\n\t\t    let data = [],\n\t\t      count = COLOR_SIZE,\n\t\t      len = COLOR_SIZE * 4;\n\t\t    imageData.length <= start + len && (count = Math.floor((imageData.length - start - 1) / 4));\n\t\t    for (let i = 0; i < count; i += 4) {\n\t\t      data.push({\n\t\t        r: imageData[start + i + 0],\n\t\t        g: imageData[start + i + 1],\n\t\t        b: imageData[start + i + 2],\n\t\t        a: imageData[start + i + 3]\n\t\t      })\n\t\t    }\n\t\t    return this.getAverageColor(data);\n\t\t  },\n\t\t\n\t\t  // å–å‡ºå„ä¸ªé€šé“çš„å¹³å‡å€¼ï¼Œå³ä¸ºæ”¹è‰²å—çš„å¹³å‡è‰²å€¼\n\t\t  getAverageColor(colorArr) {\n\t\t    const len = colorArr.length;\n\t\t    let sr = 0, sg = 0, sb = 0, sa = 0;\n\t\t    colorArr.map(function (item) {\n\t\t      sr += item.r;\n\t\t      sg += item.g;\n\t\t      sb += item.b;\n\t\t      sa += item.a;\n\t\t    });\n\t\t    return {\n\t\t      r: Math.round(sr / len),\n\t\t      g: Math.round(sg / len),\n\t\t      b: Math.round(sb / len),\n\t\t      a: Math.round(sa / len)\n\t\t    }\n\t\t  },\n\t\t\n\t\t  getColorLevel(color) {\n\t\t    return this.getLevel(color.r) + '_' + this.getLevel(color.g) + '_' + this.getLevel(color.b) + '_' + this.getLevel(color.a)\n\t\t  },\n\t\t\n\t\t  // è‰²æ·±é™çº§\n\t\t  getLevel(value) {\n\t\t    return Math.round(value / LEVEL)\n\t\t  },\n\t\t```\n\t- æŠŠå‡ºç°æ¬¡æ•°æœ€å¤šçš„averageColoråŒºå—ï¼Œä½œä¸ºé‡‡æ ·åŒºå—ï¼Œå†è·å–ä¸€éaverageColorï¼Œå³æ˜¯æœ€ç»ˆä¸»è‰²è°ƒ\n\t\t```javascript\n\t\t  // æ ¹æ®è‰²å—é¢œè‰²ï¼Œè·å–\n\t\t  getMostColor(colorData) {\n\t\t    let rst = null, len = 0;\n\t\t    for (let key in colorData) {\n\t\t      console.log('colorData[key].length', colorData[key].length)\n\t\t      console.log('colorData[key].length', colorData[key])\n\t\t      console.log('colorData[key].length', key)\n\t\t      colorData[key].length > len && (\n\t\t        rst = colorData[key],\n\t\t        len = colorData[key].length\n\t\t      )\n\t\t    }\n\t\t    return rst;\n\t\t  },\n\t\t```\n\t- è¿è¡Œæˆªå›¾\n\t\t- ![åŒºå—è·å–ä¸»è‰²è°ƒ](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2ViYzI3MmNkNzU2NjNhODUxYmM2MWQ0MDE4OWJjZGI3NzQ5NDUucG5n?x-oss-process=image/format,png)\n\t\t- é¢œè‰²å¯ä¿¡åº¦æé«˜äº†å¾ˆå¤š\n## æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\n- æ ¸å¿ƒï¼šå°†**ä¸‰é€šé“è½¬æˆå•é€šé“**å³å¯\n\t```javascript\n\tlet greyImageData = that.greyTheImage(imageData)\n    wx.canvasPutImageData({\n      canvasId: 'myCanvas',\n      x: 150,\n      y: 0,\n      width: 150,\n      height: 100,\n      data: greyImageData,\n      success (res) {\n        console.log('canvasPutImageData it worked!')\n      }\n    })\n\n  greyTheImage(imageData) {\n      // imageDataæœ‰4ä¸ªé€šé“rgba\n      for (let i = 0; i < imageData.length; i += 4) {\n        let sum_rgb = 0\n        // ä½†æˆ‘ä»¬åªéœ€è¦rgbä¸‰é€šé“ï¼Œa-alphaé€šé“æ— ç”¨\n        for (let j = 0; j < 3; j += 1) {\n          sum_rgb = sum_rgb + imageData[i + j]\n        }\n        let grey = Math.round(sum_rgb / 3)\n        imageData[i] = grey\n        imageData[i + 1] = grey\n        imageData[i + 2] = grey\n      }\n      return imageData\n  },\n\t```\n- è¿è¡Œæˆªå›¾\n![åŒ»å­¦ç°è‰²å½±åƒ](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmNWJhNzk2OTJjOWEwOTA2MDNlMzkxMzBlMDRiZTY4MTAwNzcwLnBuZw?x-oss-process=image/format,png)\n\n## æ ¼å¼åŒ–rgbaè¾“å‡º\n- åƒè¿™æ ·![æ ¼å¼åŒ–rgbaè¾“å‡º](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxNDVhYzM4YzQ1MjFkNDgzNGNkZGQ5NTNmNjQ1MWQ3NTI0NTkucG5n?x-oss-process=image/format,png)\n\t```javascript\n\t  // å¯¹æœ€ç»ˆé¢œè‰²çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–\n\t  /**\n\t   * result:{\n\t   *   hex:'#ffffff',            åå…­ä½å€¼\n\t   *   hexa:'#ffffff00',         åå…­ä½å€¼å¸¦alphaå€¼\n\t   *   rgb:'rgb(0,0,0)',         RGBå€¼\n\t   *   rgba:'rgba(0,0,0,0)'      RGBå€¼å¸¦alphaå€¼\n\t   * }\n\t   */\n\t\n\t  colorStrFormat(color) {\n\t    const rgba = 'rgba(' + color.r + ',' + color.g + ',' + color.b + ',' + (color.a / 255).toFixed(4).replace(/\\.*0+$/, '') + ')';\n\t    const rgb = 'rgb(' + color.r + ',' + color.g + ',' + color.b + ')';\n\t    const hex = '#' + this.Num2Hex(color.r) + this.Num2Hex(color.g) + this.Num2Hex(color.b);\n\t    const hexa = hex + this.Num2Hex(color.a);\n\t    return {\n\t      rgba: rgba,\n\t      rgb: rgb,\n\t      hex: hex,\n\t      hexa: hexa\n\t    }\n\t  },\n\t\n\t  Num2Hex(num) {\n\t    const hex = num.toString(16) + '';\n\t    if (hex.length < 2) {\n\t      return '0' + hex;\n\t    } else {\n\t      return hex;\n\t    }\n\t  },\n\t```\n## å‚è€ƒæ–‡çŒ®\n- [phg1024 JavaScriptå›¾åƒå¤„ç†(6) - å‡è‰²ç®—æ³•(Color Reduction)](https://blog.csdn.net/u012843346/article/details/16839649)\n- [è·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„æ’ä»¶](https://github.com/whoiam2007s/ImgMainColor)\n- å…¶å®ä¹Ÿå¯ä»¥åˆ©ç”¨ [CSSæ–°ç‰¹æ€§å»æ”¹å˜èƒŒæ™¯é¢œè‰²](https://blog.csdn.net/nanhupatar/article/details/82793637)ï¼Œæ¯”å¦‚é«˜æ–¯æ¨¡ç³Šç­‰æ¥è¾¾åˆ°ä¸šåŠ¡éœ€æ±‚\n## å†™åœ¨åé¢\n- å‘¨å…­å¬äº†ä¸€å¤© John Lennon æ­Œæ›²ã€è¿™ä¹Ÿæ˜¯æˆ‘æ‹–æ›´çš„åŸå› ğŸ˜¶ ç¾¡æ…•ä»–å’Œ Yoko é‚£æ®µä¼Šç”¸å›­èˆ¬çš„çˆ±æƒ…ï¼Œä»–å¯¹ Yoko çš„ç—´çˆ±ï¼Œä»–å’Œæ¯äº²çš„ä¸¤æ¬¡åˆ†åˆ«æ„ŸåŒèº«å—ï¼ŒBeatlesåœ¨ä¸€èµ·åšéŸ³ä¹çš„æ¬¢ä¹ï¼Œä»–å¯¹ Sean çš„å® æººçˆ¶çˆ±ï¼Œä½†ä»–çš„äººç”Ÿå´åœ¨ä¸€æ¬¡æªæ€åæˆ›ç„¶è€Œæ­¢ï¼Œå¿ƒç—› å¿ƒç—› ğŸŒ§\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n---\n","source":"_posts/å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ.md","raw":"---\ntitle: å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ\ndate: 2020-04-05 12:06:48\ntags: \n- å¾®ä¿¡å°ç¨‹åº\ncategories:\n- å¾®ä¿¡å°ç¨‹åº\ndescription:\n- æ˜¯çš„æˆ‘è¦å¼€å§‹åšï¼šæ ¹æ®å›¾ç‰‡çš„ä¸»è‰²è°ƒæ¥æ”¹å˜ä¸€ä¸‹é¡µé¢èƒŒæ™¯é¢œè‰²äº†ğŸ™†\n- è®°å½•ä¸€ä¸‹ï¼Œè‡ªå·±ç¢°åˆ°çš„é—®é¢˜ä»¥åŠæ€è€ƒ\n- æ—¶é—´å¤šçš„è¯ï¼Œä¼šè€ƒè™‘å°†ä»£ç å‘åœ¨githubï¼Œæ¬¢è¿å¤§å®¶å»starğŸ˜˜\n  - ç†ä¸€ä¸‹æ€è·¯\n    1. å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvas\n    2. é€šè¿‡canvasçš„getImageDataè·å–å›¾ç‰‡çš„åƒç´ æ•°æ®\n      -  [canvas 2d ä¸æ—§ç‰ˆ canvas å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasçš„ä¸¤ç§æ–¹æ³•å®è·µ](https://blog.csdn.net/Elle_Peng/article/details/105030971)\n    3. åˆ†æç›®å‰ä¸»è¦ç”¨äºè·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„ç®—æ³•ï¼Œå¹¶å®è·µ\n    4. å¾—åˆ°ä¸»è¦è‰²è°ƒï¼Œå†å°†rgbè½¬æ¢æˆhsbï¼Œå¹¶å¯¹bå€¼ï¼Œè¿›è¡Œä¿®æ”¹ï¼Œåˆ¶ä½œæ¸å˜ï¼Œå·¦ä¾§35ï¼Œå³ä¾§15\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- æ˜¯çš„æˆ‘è¦å¼€å§‹åšï¼šæ ¹æ®å›¾ç‰‡çš„ä¸»è‰²è°ƒæ¥æ”¹å˜ä¸€ä¸‹é¡µé¢èƒŒæ™¯é¢œè‰²äº†ğŸ™†\n- è®°å½•ä¸€ä¸‹ï¼Œè‡ªå·±ç¢°åˆ°çš„é—®é¢˜ä»¥åŠæ€è€ƒ\n- [miniprogram-main-color å®Œæ•´ä»£ç  ç‚¹å‡»ä¸€ä¸‹](https://github.com/Ele-Peng/miniprogram-main-color) æ¬¢è¿å¤§å®¶å»starğŸ˜˜\n---\n\n## å¼€å‘å‡†å¤‡\n - ç†ä¸€ä¸‹æ€è·¯\n\t1. å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvas\n\t2. é€šè¿‡canvasçš„getImageDataè·å–å›¾ç‰‡çš„åƒç´ æ•°æ®\n\t\t-  [canvas 2d ä¸æ—§ç‰ˆ canvas å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasçš„ä¸¤ç§æ–¹æ³•å®è·µ](https://blog.csdn.net/Elle_Peng/article/details/105030971)\n\t3. åˆ†æç›®å‰ä¸»è¦ç”¨äºè·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„ç®—æ³•ï¼Œå¹¶å®è·µ\n\t4. å¾—åˆ°ä¸»è¦è‰²è°ƒï¼Œå†å°†rgbè½¬æ¢æˆhsbï¼Œå¹¶å¯¹bå€¼ï¼Œè¿›è¡Œä¿®æ”¹ï¼Œåˆ¶ä½œæ¸å˜ï¼Œå·¦ä¾§35ï¼Œå³ä¾§15\n<!-- more -->\n- å—¯ï¼Œç¥æˆ‘æˆåŠŸ\n## é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•\n- [é¢œè‰²ç©ºé—´ RGB CMY HSV HSL LAB](http://www.360doc.com/content/17/0417/19/41797635_646363886.shtml)\n- å›¾ç‰‡é¢œè‰²é‡åŒ–ç®—æ³•\n\t- æ¯”è¾ƒå¸¸è§çš„åº”ç”¨å°±æ˜¯ç”¨äºæå–å›¾ç‰‡çš„ä¸»è‰²è°ƒç”¨äºä¸Šè‰²é…è‰²,å½“ç„¶ä¹Ÿå¯ä»¥ç”¨äºå›¾åƒåˆ†å‰²\n\t- ä¸»æµç®—æ³•\n\t\t- ä¸¤ä¸ªå¤§æ–¹å‘\n\t\t- **åœ¨é¢œè‰²ç©ºé—´åˆç†åœ°é€‰å–é‡‡æ ·ç‚¹æ¥æ„é€ é¢œè‰²è¡¨ï¼Œä½¿å¾—å‡è‰²åçš„å›¾åƒå’ŒåŸå›¾å°½å¯èƒ½åœ°æ¥è¿‘**\n\t\t\t- ç›´æ¥é‡åŒ–\n\t\t\t\t- å¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£\n\t\t\t- ç»Ÿè®¡é‡åŒ–\n\t\t\t\t- æ ¸å¿ƒï¼šè°ƒæ•´ç›´æ–¹å›¾ä½¿å¾—ç´¯ç§¯åˆ†å¸ƒæ›²çº¿å‘ˆçº¿æ€§ï¼Œä»è€Œä½¿å›¾åƒåƒç´ ç‚¹çš„äº®åº¦å€¼å°½å¯èƒ½å‡åŒ€åœ°åˆ†å¸ƒ\n\t\t\t\t- åˆ©ç”¨åŸå›¾çš„ç›´æ–¹å›¾æ¥å¼•å¯¼é‡‡æ ·ç‚¹çš„é€‰å–ï¼Œä½¿å¾—æ¯ä¸ªé‡‡æ ·ç‚¹å¯ä»¥å¤§è‡´è¦†ç›–ç›¸åŒæ•°é‡çš„åƒç´ ç‚¹\n\t\t\t\t- å¯¹æ¯ä¸ªé¢œè‰²é€šé“å»ºç«‹ç›´æ–¹å›¾ï¼Œç„¶åæ ¹æ®è¿™äº›ç›´æ–¹å›¾å¯¹å„ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡‡æ ·ï¼Œåœ¨åƒç´ å€¼åˆ†å¸ƒå¤šçš„åŒºåŸŸè¿›è¡Œå¯†é›†é‡‡æ ·ï¼Œåˆ«çš„åŒºåŸŸç¨€ç–é‡‡æ ·ï¼Œå†åˆ©ç”¨è¿™äº›é‡‡æ ·ç‚¹æ¥ç»„åˆæˆæœ€ç»ˆçš„é¢œè‰²è¡¨ï¼ŒåŸå›¾ä¸­çš„æ¯ä¸ªåƒç´ ç‚¹ç”¨é¢œè‰²è¡¨ä¸­æœ€æ¥è¿‘çš„é¢œè‰²æ›¿æ¢æ‰\n\t\t\t- é¢œè‰²ç©ºé—´åˆ†å‰²(Median-Cut)\n\t\t\t\t- æ ¸å¿ƒï¼šåœ¨é¢œè‰²ç©ºé—´å»ºç«‹ä¸€æ£µäºŒå‰æ ‘ï¼Œé€šè¿‡ä¸æ–­åœ°ç»†åŒ–è¿™æ£µæ ‘æ¥è¿‘ä¼¼å¾—åˆ°ä¸€ä¸ªé¢œè‰²ä¸‰ç»´ç›´æ–¹å›¾ï¼Œç„¶åå†æ ¹æ®è¿™æ£µæ ‘æ¥åˆ†é…é‡‡æ ·ç‚¹\n\t\t\t\t- åŸºäºå›¾åƒé¢œè‰²æ ·æœ¬åˆ†å¸ƒçš„è‡ªé€‚åº”æ–¹æ³•ï¼Œä¸è®ºå›¾åƒä¸­é¢œè‰²æ ·æœ¬çš„åˆ†å¸ƒå¦‚ä½•ï¼Œæ€»æ˜¯å¯ä»¥ç”Ÿæˆä¸€ä¸ªå’Œé¢œè‰²æ ·æœ¬åˆ†å¸ƒåŒ¹é…è‰¯å¥½çš„é¢œè‰²è¡¨ï¼šåœ¨é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸå†…é‡‡æ ·ç‚¹åˆ†å¸ƒä¹Ÿç›¸å¯¹å¯†é›†ï¼Œå…¶ä»–åŒºåŸŸåˆ™åˆ†é…äº†è¾ƒå°‘çš„é‡‡æ ·ç‚¹ã€‚ä¸”ç›¸åŒæ•°ç›®çš„é¢œè‰²æ ·æœ¬æ€»æ˜¯ç”¨åŒæ ·æ•°é‡çš„é‡‡æ ·ç‚¹æ¥ä»£è¡¨ï¼Œæ‰€ä»¥é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸï¼Œé‡‡æ ·ç‚¹çš„æ•°é‡è‡ªç„¶å°±ä¼šå¤šï¼Œåä¹‹åˆ™ç›¸åº”çš„æ¯”è¾ƒå°‘\n\t\t\t\t- æœ€é‡è¦ã€åº”ç”¨æœ€å¹¿æ³›çš„å‡è‰²ç®—æ³•ä¹‹ä¸€\n\t\t\t- kå‡å€¼èšç±»(k-Means clustering)\n\t\t\t\t- æ ¸å¿ƒï¼šå°†åƒç´ æŒ‰é¢œè‰²çš„ç›¸ä¼¼ç¨‹åº¦å½’ç±»\n\t\t- **ä»ä¸€ä¸ªåˆå§‹çš„é¢œè‰²è¡¨å‡ºå‘ï¼Œé€šè¿‡ä¸æ–­ä¿®æ”¹é¢œè‰²è¡¨æ¥æ”¹å–„å‡è‰²æ•ˆæœ**\n\t\t\t- ç¥ç»ç½‘ç»œæ–¹æ³•(ANN)\n\t\t\t\t- é¢œè‰²è¡¨é€šè¿‡ç¥ç»å…ƒæ¥ç¼–ç ï¼Œé€šè¿‡ç¼“æ…¢çš„è°ƒèŠ‚ç¥ç»å…ƒçš„é¢œè‰²å€¼ä»¥ä¿è¯æ•´ä¸ªç¥ç»ç½‘ç»œé€æ­¥æ”¶æ•›äºæœ€å°è¯¯å·®çŠ¶æ€ï¼ˆå³é€šè¿‡ç¥ç»ç½‘ç»œäº§ç”Ÿçš„å›¾åƒå’ŒåŸå›¾ä¹‹é—´è¯¯å·®æœ€å°ï¼‰\n## ç›´æ¥é‡åŒ–å®è·µ\n- é¦–å…ˆæˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€çœ‹getImageDataåçš„æ•°æ®\n\t- ![getImageDataæ•°æ®](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzljZjVjMjQzMDI0NmE0YjE0YzFlYmMzMjYwZDkwYTgwNTQzMDIucG5n?x-oss-process=image/format,png)\n\t- å¯ä»¥ç®€å•çœ‹ä½œæ˜¯å¤–å±‚å¾ªç¯ä¸ºrgbaçš„æ‰“å¹³äº†äºŒç»´æ•°ç»„\n- å¦‚æœæŒ‰æ»¡è¶³éœ€æ±‚åšï¼Œåªè¦ä¸€ä¸ªä¸»è‰²è°ƒçš„è¯ï¼Œå¯ä»¥æŠŠæ•´ä¸ªgetImageDataè·å¾—çš„æ•°æ®ï¼Œè¿›è¡Œå„ä¸ªé€šé“çš„å¹³å‡å€¼æ±‚å€¼ï¼Œå†æ‹¼æ¥ï¼Œåƒè¿™æ ·\n\t```javascript\n\tgetUniqueColor(imageData) {\n    let res_r = 0\n    let res_g = 0\n    let res_b = 0\n    let res_a = 0\n    for (let i = 0; i < imageData.length; i += 1) {\n      if (i % 4 === 0) {\n        res_r += imageData[i]\n      } else if (i % 4 === 1) {\n        res_g += imageData[i]\n      } else if (i % 4 === 2) {\n        res_b += imageData[i]\n      } else if (i % 4 === 3) {\n        res_a += imageData[i]\n      } \n    }\n    res_r = Math.round(res_r / (imageData.length / 4))\n    res_g =  Math.round(res_g / (imageData.length / 4))\n    res_b =  Math.round(res_b / (imageData.length / 4))\n    res_a =  Math.round(res_a / (imageData.length / 4))\n    console.log('res_r', res_r)\n    console.log('res_g', res_g)\n    console.log('res_b', res_b)\n    console.log('res_a', res_a)\n  },\n\t```\n\t- è¿è¡Œæˆªå›¾\n\t\t- ![æš´åŠ›æ³•æ±‚ä¸»è‰²è°ƒ](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzc4NzFiOTVmYzA4NWQ3NGQwNDc4OWY0ZWI5Yzc0YThmNzQ5OTYucG5n?x-oss-process=image/format,png)\n\t\t- æ— ç›¸å…³ç‚¹è¶Šå¤šï¼Œè¯¯å·®è¶Šå¤§ğŸ‘\n- æˆ‘ä»¬å¯ä»¥â€œå¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£â€\n\t```javascript\n\tconst COLOR_SIZE = 40 // å•ä½è‰²å—çš„å¤§å°ï¼ˆåƒç´ ä¸ªæ•°ï¼Œé»˜è®¤40ï¼‰ã€‚ä»¥å•ä½è‰²å—çš„å¹³å‡åƒç´ å€¼ä¸ºä½œä¸ºç»Ÿè®¡å•ä½\n\tconst LEVEL = 32 // è‰²æ·±ï¼Œé¢œè‰²åˆ†åŒºå‚æ•°ï¼ˆ0-255ï¼‰ï¼Œæ€»256ï¼Œ2^8ï¼Œå³8bitï¼Œ4ä¸ªé€šé“ï¼ˆrgbaï¼‰ï¼Œå³é»˜è®¤è‰²æ·±4*8bitï¼Œ32bit\n\t// åˆ†åŒºå—ï¼Œå¯ä»¥æ‹“å±•æ€§çš„æ±‚ä¸»è¦è‰²æ¿ï¼Œç”¨æ¥åšpalette\n    const mapData = that.getLevelData(imageData);\n    const colors = that.getMostColor(mapData);\n    if (!colors) {\n      return\n    } else {\n      const color = that.getAverageColor(colors)\n      console.log('color', color)\n    }\n\t```\n\t- å°†getImageDataæ•°æ®åˆ†æˆç‰¹å®šå¤§å°çš„åŒºå—ï¼Œåˆ†åˆ«ç®—å‡ºå„ä¸ªåŒºå—çš„averageColorï¼Œå†åˆ©ç”¨mapç‰¹æ€§ï¼Œå°†averageColorä½œkeyï¼Œcountå„ä¸ªaverageColorä¸ªæ•°\n\t\t```javascript\n\t\t  // è·å–æ¯æ®µçš„é¢œè‰²æ•°æ®\n\t\t  // æ ¹æ®åƒç´ æ•°æ®ï¼ŒæŒ‰å•ä½è‰²å—è¿›è¡Œåˆ‡å‰²\n\t\t  getLevelData(imageData) {\n\t\t    const len = imageData.length;\n\t\t    const mapData = {};\n\t\t    for (let i = 0; i < len; i += COLOR_SIZE * 4) {\n\t\t      const blockColor = this.getBlockColor(imageData, i); // è¯¥åŒºå—å¹³å‡rgba [{r,g,b,a}]æ•°æ®\n\t\t      // è·å–å„ä¸ªåŒºå—çš„å¹³å‡rgbaæ•°æ®ï¼Œå°†å„ä¸ªé€šé“çš„é¢œè‰²è¿›è¡ŒLEVELè‰²æ·±é™çº§\n\t\t      // æ ¹æ®r_g_b_a å»ºç«‹mapç´¢å¼•\n\t\t      const key = this.getColorLevel(blockColor);\n\t\t      !mapData[key] && (mapData[key] = []);\n\t\t      mapData[key].push(blockColor);\n\t\t    }\n\t\t    return mapData;\n\t\t  },\n\t\t\n\t\t  // è·å–å•ä½å—çš„å…¨éƒ¨è‰²å€¼\n\t\t  // å¹¶æ ¹æ®å…¨éƒ¨è‰²å€¼ï¼Œè®¡ç®—å¹³å‡è‰²å€¼\n\t\t  // å¤„ç†æœ€åè¾¹ç•Œå€¼ï¼Œå°äºCOLOR_SIZE\n\t\t  getBlockColor(imageData, start) {\n\t\t    let data = [],\n\t\t      count = COLOR_SIZE,\n\t\t      len = COLOR_SIZE * 4;\n\t\t    imageData.length <= start + len && (count = Math.floor((imageData.length - start - 1) / 4));\n\t\t    for (let i = 0; i < count; i += 4) {\n\t\t      data.push({\n\t\t        r: imageData[start + i + 0],\n\t\t        g: imageData[start + i + 1],\n\t\t        b: imageData[start + i + 2],\n\t\t        a: imageData[start + i + 3]\n\t\t      })\n\t\t    }\n\t\t    return this.getAverageColor(data);\n\t\t  },\n\t\t\n\t\t  // å–å‡ºå„ä¸ªé€šé“çš„å¹³å‡å€¼ï¼Œå³ä¸ºæ”¹è‰²å—çš„å¹³å‡è‰²å€¼\n\t\t  getAverageColor(colorArr) {\n\t\t    const len = colorArr.length;\n\t\t    let sr = 0, sg = 0, sb = 0, sa = 0;\n\t\t    colorArr.map(function (item) {\n\t\t      sr += item.r;\n\t\t      sg += item.g;\n\t\t      sb += item.b;\n\t\t      sa += item.a;\n\t\t    });\n\t\t    return {\n\t\t      r: Math.round(sr / len),\n\t\t      g: Math.round(sg / len),\n\t\t      b: Math.round(sb / len),\n\t\t      a: Math.round(sa / len)\n\t\t    }\n\t\t  },\n\t\t\n\t\t  getColorLevel(color) {\n\t\t    return this.getLevel(color.r) + '_' + this.getLevel(color.g) + '_' + this.getLevel(color.b) + '_' + this.getLevel(color.a)\n\t\t  },\n\t\t\n\t\t  // è‰²æ·±é™çº§\n\t\t  getLevel(value) {\n\t\t    return Math.round(value / LEVEL)\n\t\t  },\n\t\t```\n\t- æŠŠå‡ºç°æ¬¡æ•°æœ€å¤šçš„averageColoråŒºå—ï¼Œä½œä¸ºé‡‡æ ·åŒºå—ï¼Œå†è·å–ä¸€éaverageColorï¼Œå³æ˜¯æœ€ç»ˆä¸»è‰²è°ƒ\n\t\t```javascript\n\t\t  // æ ¹æ®è‰²å—é¢œè‰²ï¼Œè·å–\n\t\t  getMostColor(colorData) {\n\t\t    let rst = null, len = 0;\n\t\t    for (let key in colorData) {\n\t\t      console.log('colorData[key].length', colorData[key].length)\n\t\t      console.log('colorData[key].length', colorData[key])\n\t\t      console.log('colorData[key].length', key)\n\t\t      colorData[key].length > len && (\n\t\t        rst = colorData[key],\n\t\t        len = colorData[key].length\n\t\t      )\n\t\t    }\n\t\t    return rst;\n\t\t  },\n\t\t```\n\t- è¿è¡Œæˆªå›¾\n\t\t- ![åŒºå—è·å–ä¸»è‰²è°ƒ](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2ViYzI3MmNkNzU2NjNhODUxYmM2MWQ0MDE4OWJjZGI3NzQ5NDUucG5n?x-oss-process=image/format,png)\n\t\t- é¢œè‰²å¯ä¿¡åº¦æé«˜äº†å¾ˆå¤š\n## æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\n- æ ¸å¿ƒï¼šå°†**ä¸‰é€šé“è½¬æˆå•é€šé“**å³å¯\n\t```javascript\n\tlet greyImageData = that.greyTheImage(imageData)\n    wx.canvasPutImageData({\n      canvasId: 'myCanvas',\n      x: 150,\n      y: 0,\n      width: 150,\n      height: 100,\n      data: greyImageData,\n      success (res) {\n        console.log('canvasPutImageData it worked!')\n      }\n    })\n\n  greyTheImage(imageData) {\n      // imageDataæœ‰4ä¸ªé€šé“rgba\n      for (let i = 0; i < imageData.length; i += 4) {\n        let sum_rgb = 0\n        // ä½†æˆ‘ä»¬åªéœ€è¦rgbä¸‰é€šé“ï¼Œa-alphaé€šé“æ— ç”¨\n        for (let j = 0; j < 3; j += 1) {\n          sum_rgb = sum_rgb + imageData[i + j]\n        }\n        let grey = Math.round(sum_rgb / 3)\n        imageData[i] = grey\n        imageData[i + 1] = grey\n        imageData[i + 2] = grey\n      }\n      return imageData\n  },\n\t```\n- è¿è¡Œæˆªå›¾\n![åŒ»å­¦ç°è‰²å½±åƒ](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmNWJhNzk2OTJjOWEwOTA2MDNlMzkxMzBlMDRiZTY4MTAwNzcwLnBuZw?x-oss-process=image/format,png)\n\n## æ ¼å¼åŒ–rgbaè¾“å‡º\n- åƒè¿™æ ·![æ ¼å¼åŒ–rgbaè¾“å‡º](https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxNDVhYzM4YzQ1MjFkNDgzNGNkZGQ5NTNmNjQ1MWQ3NTI0NTkucG5n?x-oss-process=image/format,png)\n\t```javascript\n\t  // å¯¹æœ€ç»ˆé¢œè‰²çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–\n\t  /**\n\t   * result:{\n\t   *   hex:'#ffffff',            åå…­ä½å€¼\n\t   *   hexa:'#ffffff00',         åå…­ä½å€¼å¸¦alphaå€¼\n\t   *   rgb:'rgb(0,0,0)',         RGBå€¼\n\t   *   rgba:'rgba(0,0,0,0)'      RGBå€¼å¸¦alphaå€¼\n\t   * }\n\t   */\n\t\n\t  colorStrFormat(color) {\n\t    const rgba = 'rgba(' + color.r + ',' + color.g + ',' + color.b + ',' + (color.a / 255).toFixed(4).replace(/\\.*0+$/, '') + ')';\n\t    const rgb = 'rgb(' + color.r + ',' + color.g + ',' + color.b + ')';\n\t    const hex = '#' + this.Num2Hex(color.r) + this.Num2Hex(color.g) + this.Num2Hex(color.b);\n\t    const hexa = hex + this.Num2Hex(color.a);\n\t    return {\n\t      rgba: rgba,\n\t      rgb: rgb,\n\t      hex: hex,\n\t      hexa: hexa\n\t    }\n\t  },\n\t\n\t  Num2Hex(num) {\n\t    const hex = num.toString(16) + '';\n\t    if (hex.length < 2) {\n\t      return '0' + hex;\n\t    } else {\n\t      return hex;\n\t    }\n\t  },\n\t```\n## å‚è€ƒæ–‡çŒ®\n- [phg1024 JavaScriptå›¾åƒå¤„ç†(6) - å‡è‰²ç®—æ³•(Color Reduction)](https://blog.csdn.net/u012843346/article/details/16839649)\n- [è·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„æ’ä»¶](https://github.com/whoiam2007s/ImgMainColor)\n- å…¶å®ä¹Ÿå¯ä»¥åˆ©ç”¨ [CSSæ–°ç‰¹æ€§å»æ”¹å˜èƒŒæ™¯é¢œè‰²](https://blog.csdn.net/nanhupatar/article/details/82793637)ï¼Œæ¯”å¦‚é«˜æ–¯æ¨¡ç³Šç­‰æ¥è¾¾åˆ°ä¸šåŠ¡éœ€æ±‚\n## å†™åœ¨åé¢\n- å‘¨å…­å¬äº†ä¸€å¤© John Lennon æ­Œæ›²ã€è¿™ä¹Ÿæ˜¯æˆ‘æ‹–æ›´çš„åŸå› ğŸ˜¶ ç¾¡æ…•ä»–å’Œ Yoko é‚£æ®µä¼Šç”¸å›­èˆ¬çš„çˆ±æƒ…ï¼Œä»–å¯¹ Yoko çš„ç—´çˆ±ï¼Œä»–å’Œæ¯äº²çš„ä¸¤æ¬¡åˆ†åˆ«æ„ŸåŒèº«å—ï¼ŒBeatlesåœ¨ä¸€èµ·åšéŸ³ä¹çš„æ¬¢ä¹ï¼Œä»–å¯¹ Sean çš„å® æººçˆ¶çˆ±ï¼Œä½†ä»–çš„äººç”Ÿå´åœ¨ä¸€æ¬¡æªæ€åæˆ›ç„¶è€Œæ­¢ï¼Œå¿ƒç—› å¿ƒç—› ğŸŒ§\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n---\n","slug":"å¾®ä¿¡å°ç¨‹åº-è·å–å›¾ç‰‡ä¸»è‰²è°ƒ","published":1,"updated":"2020-10-27T15:21:11.266Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u8f003afw9k08d916ki","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>æ˜¯çš„æˆ‘è¦å¼€å§‹åšï¼šæ ¹æ®å›¾ç‰‡çš„ä¸»è‰²è°ƒæ¥æ”¹å˜ä¸€ä¸‹é¡µé¢èƒŒæ™¯é¢œè‰²äº†ğŸ™†</li>\n<li>è®°å½•ä¸€ä¸‹ï¼Œè‡ªå·±ç¢°åˆ°çš„é—®é¢˜ä»¥åŠæ€è€ƒ</li>\n<li><a href=\"https://github.com/Ele-Peng/miniprogram-main-color\" target=\"_blank\" rel=\"noopener\">miniprogram-main-color å®Œæ•´ä»£ç  ç‚¹å‡»ä¸€ä¸‹</a> æ¬¢è¿å¤§å®¶å»starğŸ˜˜</li>\n</ul>\n<hr>\n<h2 id=\"å¼€å‘å‡†å¤‡\"><a href=\"#å¼€å‘å‡†å¤‡\" class=\"headerlink\" title=\"å¼€å‘å‡†å¤‡\"></a>å¼€å‘å‡†å¤‡</h2><ul>\n<li>ç†ä¸€ä¸‹æ€è·¯<ol>\n<li>å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvas</li>\n<li>é€šè¿‡canvasçš„getImageDataè·å–å›¾ç‰‡çš„åƒç´ æ•°æ®<ul>\n<li><a href=\"https://blog.csdn.net/Elle_Peng/article/details/105030971\" target=\"_blank\" rel=\"noopener\">canvas 2d ä¸æ—§ç‰ˆ canvas å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasçš„ä¸¤ç§æ–¹æ³•å®è·µ</a></li>\n</ul>\n</li>\n<li>åˆ†æç›®å‰ä¸»è¦ç”¨äºè·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„ç®—æ³•ï¼Œå¹¶å®è·µ</li>\n<li>å¾—åˆ°ä¸»è¦è‰²è°ƒï¼Œå†å°†rgbè½¬æ¢æˆhsbï¼Œå¹¶å¯¹bå€¼ï¼Œè¿›è¡Œä¿®æ”¹ï¼Œåˆ¶ä½œæ¸å˜ï¼Œå·¦ä¾§35ï¼Œå³ä¾§15<a id=\"more\"></a>\n<ul>\n<li>å—¯ï¼Œç¥æˆ‘æˆåŠŸ<h2 id=\"é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯-å‡è‰²ç®—æ³•\"><a href=\"#é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯-å‡è‰²ç®—æ³•\" class=\"headerlink\" title=\"é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•\"></a>é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•</h2></li>\n<li><a href=\"http://www.360doc.com/content/17/0417/19/41797635_646363886.shtml\" target=\"_blank\" rel=\"noopener\">é¢œè‰²ç©ºé—´ RGB CMY HSV HSL LAB</a></li>\n<li>å›¾ç‰‡é¢œè‰²é‡åŒ–ç®—æ³•</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>æ¯”è¾ƒå¸¸è§çš„åº”ç”¨å°±æ˜¯ç”¨äºæå–å›¾ç‰‡çš„ä¸»è‰²è°ƒç”¨äºä¸Šè‰²é…è‰²,å½“ç„¶ä¹Ÿå¯ä»¥ç”¨äºå›¾åƒåˆ†å‰²</li>\n<li>ä¸»æµç®—æ³•<ul>\n<li>ä¸¤ä¸ªå¤§æ–¹å‘</li>\n<li><strong>åœ¨é¢œè‰²ç©ºé—´åˆç†åœ°é€‰å–é‡‡æ ·ç‚¹æ¥æ„é€ é¢œè‰²è¡¨ï¼Œä½¿å¾—å‡è‰²åçš„å›¾åƒå’ŒåŸå›¾å°½å¯èƒ½åœ°æ¥è¿‘</strong><ul>\n<li>ç›´æ¥é‡åŒ–<ul>\n<li>å¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£</li>\n</ul>\n</li>\n<li>ç»Ÿè®¡é‡åŒ–<ul>\n<li>æ ¸å¿ƒï¼šè°ƒæ•´ç›´æ–¹å›¾ä½¿å¾—ç´¯ç§¯åˆ†å¸ƒæ›²çº¿å‘ˆçº¿æ€§ï¼Œä»è€Œä½¿å›¾åƒåƒç´ ç‚¹çš„äº®åº¦å€¼å°½å¯èƒ½å‡åŒ€åœ°åˆ†å¸ƒ</li>\n<li>åˆ©ç”¨åŸå›¾çš„ç›´æ–¹å›¾æ¥å¼•å¯¼é‡‡æ ·ç‚¹çš„é€‰å–ï¼Œä½¿å¾—æ¯ä¸ªé‡‡æ ·ç‚¹å¯ä»¥å¤§è‡´è¦†ç›–ç›¸åŒæ•°é‡çš„åƒç´ ç‚¹</li>\n<li>å¯¹æ¯ä¸ªé¢œè‰²é€šé“å»ºç«‹ç›´æ–¹å›¾ï¼Œç„¶åæ ¹æ®è¿™äº›ç›´æ–¹å›¾å¯¹å„ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡‡æ ·ï¼Œåœ¨åƒç´ å€¼åˆ†å¸ƒå¤šçš„åŒºåŸŸè¿›è¡Œå¯†é›†é‡‡æ ·ï¼Œåˆ«çš„åŒºåŸŸç¨€ç–é‡‡æ ·ï¼Œå†åˆ©ç”¨è¿™äº›é‡‡æ ·ç‚¹æ¥ç»„åˆæˆæœ€ç»ˆçš„é¢œè‰²è¡¨ï¼ŒåŸå›¾ä¸­çš„æ¯ä¸ªåƒç´ ç‚¹ç”¨é¢œè‰²è¡¨ä¸­æœ€æ¥è¿‘çš„é¢œè‰²æ›¿æ¢æ‰</li>\n</ul>\n</li>\n<li>é¢œè‰²ç©ºé—´åˆ†å‰²(Median-Cut)<ul>\n<li>æ ¸å¿ƒï¼šåœ¨é¢œè‰²ç©ºé—´å»ºç«‹ä¸€æ£µäºŒå‰æ ‘ï¼Œé€šè¿‡ä¸æ–­åœ°ç»†åŒ–è¿™æ£µæ ‘æ¥è¿‘ä¼¼å¾—åˆ°ä¸€ä¸ªé¢œè‰²ä¸‰ç»´ç›´æ–¹å›¾ï¼Œç„¶åå†æ ¹æ®è¿™æ£µæ ‘æ¥åˆ†é…é‡‡æ ·ç‚¹</li>\n<li>åŸºäºå›¾åƒé¢œè‰²æ ·æœ¬åˆ†å¸ƒçš„è‡ªé€‚åº”æ–¹æ³•ï¼Œä¸è®ºå›¾åƒä¸­é¢œè‰²æ ·æœ¬çš„åˆ†å¸ƒå¦‚ä½•ï¼Œæ€»æ˜¯å¯ä»¥ç”Ÿæˆä¸€ä¸ªå’Œé¢œè‰²æ ·æœ¬åˆ†å¸ƒåŒ¹é…è‰¯å¥½çš„é¢œè‰²è¡¨ï¼šåœ¨é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸå†…é‡‡æ ·ç‚¹åˆ†å¸ƒä¹Ÿç›¸å¯¹å¯†é›†ï¼Œå…¶ä»–åŒºåŸŸåˆ™åˆ†é…äº†è¾ƒå°‘çš„é‡‡æ ·ç‚¹ã€‚ä¸”ç›¸åŒæ•°ç›®çš„é¢œè‰²æ ·æœ¬æ€»æ˜¯ç”¨åŒæ ·æ•°é‡çš„é‡‡æ ·ç‚¹æ¥ä»£è¡¨ï¼Œæ‰€ä»¥é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸï¼Œé‡‡æ ·ç‚¹çš„æ•°é‡è‡ªç„¶å°±ä¼šå¤šï¼Œåä¹‹åˆ™ç›¸åº”çš„æ¯”è¾ƒå°‘</li>\n<li>æœ€é‡è¦ã€åº”ç”¨æœ€å¹¿æ³›çš„å‡è‰²ç®—æ³•ä¹‹ä¸€</li>\n</ul>\n</li>\n<li>kå‡å€¼èšç±»(k-Means clustering)<ul>\n<li>æ ¸å¿ƒï¼šå°†åƒç´ æŒ‰é¢œè‰²çš„ç›¸ä¼¼ç¨‹åº¦å½’ç±»</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>ä»ä¸€ä¸ªåˆå§‹çš„é¢œè‰²è¡¨å‡ºå‘ï¼Œé€šè¿‡ä¸æ–­ä¿®æ”¹é¢œè‰²è¡¨æ¥æ”¹å–„å‡è‰²æ•ˆæœ</strong><ul>\n<li>ç¥ç»ç½‘ç»œæ–¹æ³•(ANN)<ul>\n<li>é¢œè‰²è¡¨é€šè¿‡ç¥ç»å…ƒæ¥ç¼–ç ï¼Œé€šè¿‡ç¼“æ…¢çš„è°ƒèŠ‚ç¥ç»å…ƒçš„é¢œè‰²å€¼ä»¥ä¿è¯æ•´ä¸ªç¥ç»ç½‘ç»œé€æ­¥æ”¶æ•›äºæœ€å°è¯¯å·®çŠ¶æ€ï¼ˆå³é€šè¿‡ç¥ç»ç½‘ç»œäº§ç”Ÿçš„å›¾åƒå’ŒåŸå›¾ä¹‹é—´è¯¯å·®æœ€å°ï¼‰<h2 id=\"ç›´æ¥é‡åŒ–å®è·µ\"><a href=\"#ç›´æ¥é‡åŒ–å®è·µ\" class=\"headerlink\" title=\"ç›´æ¥é‡åŒ–å®è·µ\"></a>ç›´æ¥é‡åŒ–å®è·µ</h2><ul>\n<li>é¦–å…ˆæˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€çœ‹getImageDataåçš„æ•°æ®</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzljZjVjMjQzMDI0NmE0YjE0YzFlYmMzMjYwZDkwYTgwNTQzMDIucG5n?x-oss-process=image/format,png\" alt=\"getImageDataæ•°æ®\"></li>\n<li>å¯ä»¥ç®€å•çœ‹ä½œæ˜¯å¤–å±‚å¾ªç¯ä¸ºrgbaçš„æ‰“å¹³äº†äºŒç»´æ•°ç»„<ul>\n<li>å¦‚æœæŒ‰æ»¡è¶³éœ€æ±‚åšï¼Œåªè¦ä¸€ä¸ªä¸»è‰²è°ƒçš„è¯ï¼Œå¯ä»¥æŠŠæ•´ä¸ªgetImageDataè·å¾—çš„æ•°æ®ï¼Œè¿›è¡Œå„ä¸ªé€šé“çš„å¹³å‡å€¼æ±‚å€¼ï¼Œå†æ‹¼æ¥ï¼Œåƒè¿™æ ·<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getUniqueColor(imageData) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_r = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_g = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_b = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_a = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; imageData.length; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">       res_r += imageData[i]</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">       res_g += imageData[i]</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">       res_b += imageData[i]</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">       res_a += imageData[i]</span><br><span class=\"line\">     &#125; </span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   res_r = <span class=\"built_in\">Math</span>.round(res_r / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   res_g =  <span class=\"built_in\">Math</span>.round(res_g / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   res_b =  <span class=\"built_in\">Math</span>.round(res_b / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   res_a =  <span class=\"built_in\">Math</span>.round(res_a / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_r'</span>, res_r)</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_g'</span>, res_g)</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_b'</span>, res_b)</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_a'</span>, res_a)</span><br><span class=\"line\"> &#125;,</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzc4NzFiOTVmYzA4NWQ3NGQwNDc4OWY0ZWI5Yzc0YThmNzQ5OTYucG5n?x-oss-process=image/format,png\" alt=\"æš´åŠ›æ³•æ±‚ä¸»è‰²è°ƒ\"></li>\n<li>æ— ç›¸å…³ç‚¹è¶Šå¤šï¼Œè¯¯å·®è¶Šå¤§ğŸ‘<ul>\n<li>æˆ‘ä»¬å¯ä»¥â€œå¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£â€<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> COLOR_SIZE = <span class=\"number\">40</span> <span class=\"comment\">// å•ä½è‰²å—çš„å¤§å°ï¼ˆåƒç´ ä¸ªæ•°ï¼Œé»˜è®¤40ï¼‰ã€‚ä»¥å•ä½è‰²å—çš„å¹³å‡åƒç´ å€¼ä¸ºä½œä¸ºç»Ÿè®¡å•ä½</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> LEVEL = <span class=\"number\">32</span> <span class=\"comment\">// è‰²æ·±ï¼Œé¢œè‰²åˆ†åŒºå‚æ•°ï¼ˆ0-255ï¼‰ï¼Œæ€»256ï¼Œ2^8ï¼Œå³8bitï¼Œ4ä¸ªé€šé“ï¼ˆrgbaï¼‰ï¼Œå³é»˜è®¤è‰²æ·±4*8bitï¼Œ32bit</span></span><br><span class=\"line\"><span class=\"comment\">// åˆ†åŒºå—ï¼Œå¯ä»¥æ‹“å±•æ€§çš„æ±‚ä¸»è¦è‰²æ¿ï¼Œç”¨æ¥åšpalette</span></span><br><span class=\"line\">   <span class=\"keyword\">const</span> mapData = that.getLevelData(imageData);</span><br><span class=\"line\">   <span class=\"keyword\">const</span> colors = that.getMostColor(mapData);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!colors) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">return</span></span><br><span class=\"line\">   &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">     <span class=\"keyword\">const</span> color = that.getAverageColor(colors)</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(<span class=\"string\">'color'</span>, color)</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å°†getImageDataæ•°æ®åˆ†æˆç‰¹å®šå¤§å°çš„åŒºå—ï¼Œåˆ†åˆ«ç®—å‡ºå„ä¸ªåŒºå—çš„averageColorï¼Œå†åˆ©ç”¨mapç‰¹æ€§ï¼Œå°†averageColorä½œkeyï¼Œcountå„ä¸ªaverageColorä¸ªæ•°  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è·å–æ¯æ®µçš„é¢œè‰²æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">// æ ¹æ®åƒç´ æ•°æ®ï¼ŒæŒ‰å•ä½è‰²å—è¿›è¡Œåˆ‡å‰²</span></span><br><span class=\"line\">getLevelData(imageData) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> len = imageData.length;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> mapData = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; len; i += COLOR_SIZE * <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> blockColor = <span class=\"keyword\">this</span>.getBlockColor(imageData, i); <span class=\"comment\">// è¯¥åŒºå—å¹³å‡rgba [&#123;r,g,b,a&#125;]æ•°æ®</span></span><br><span class=\"line\">    <span class=\"comment\">// è·å–å„ä¸ªåŒºå—çš„å¹³å‡rgbaæ•°æ®ï¼Œå°†å„ä¸ªé€šé“çš„é¢œè‰²è¿›è¡ŒLEVELè‰²æ·±é™çº§</span></span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®r_g_b_a å»ºç«‹mapç´¢å¼•</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> key = <span class=\"keyword\">this</span>.getColorLevel(blockColor);</span><br><span class=\"line\">    !mapData[key] &amp;&amp; (mapData[key] = []);</span><br><span class=\"line\">    mapData[key].push(blockColor);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> mapData;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">// è·å–å•ä½å—çš„å…¨éƒ¨è‰²å€¼</span></span><br><span class=\"line\"><span class=\"comment\">// å¹¶æ ¹æ®å…¨éƒ¨è‰²å€¼ï¼Œè®¡ç®—å¹³å‡è‰²å€¼</span></span><br><span class=\"line\"><span class=\"comment\">// å¤„ç†æœ€åè¾¹ç•Œå€¼ï¼Œå°äºCOLOR_SIZE</span></span><br><span class=\"line\">getBlockColor(imageData, start) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> data = [],</span><br><span class=\"line\">    count = COLOR_SIZE,</span><br><span class=\"line\">    len = COLOR_SIZE * <span class=\"number\">4</span>;</span><br><span class=\"line\">  imageData.length &lt;= start + len &amp;&amp; (count = <span class=\"built_in\">Math</span>.floor((imageData.length - start - <span class=\"number\">1</span>) / <span class=\"number\">4</span>));</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; count; i += <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">    data.push(&#123;</span><br><span class=\"line\">      r: imageData[start + i + <span class=\"number\">0</span>],</span><br><span class=\"line\">      g: imageData[start + i + <span class=\"number\">1</span>],</span><br><span class=\"line\">      b: imageData[start + i + <span class=\"number\">2</span>],</span><br><span class=\"line\">      a: imageData[start + i + <span class=\"number\">3</span>]</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.getAverageColor(data);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">// å–å‡ºå„ä¸ªé€šé“çš„å¹³å‡å€¼ï¼Œå³ä¸ºæ”¹è‰²å—çš„å¹³å‡è‰²å€¼</span></span><br><span class=\"line\">getAverageColor(colorArr) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> len = colorArr.length;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sr = <span class=\"number\">0</span>, sg = <span class=\"number\">0</span>, sb = <span class=\"number\">0</span>, sa = <span class=\"number\">0</span>;</span><br><span class=\"line\">  colorArr.map(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">item</span>) </span>&#123;</span><br><span class=\"line\">    sr += item.r;</span><br><span class=\"line\">    sg += item.g;</span><br><span class=\"line\">    sb += item.b;</span><br><span class=\"line\">    sa += item.a;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    r: <span class=\"built_in\">Math</span>.round(sr / len),</span><br><span class=\"line\">    g: <span class=\"built_in\">Math</span>.round(sg / len),</span><br><span class=\"line\">    b: <span class=\"built_in\">Math</span>.round(sb / len),</span><br><span class=\"line\">    a: <span class=\"built_in\">Math</span>.round(sa / len)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">getColorLevel(color) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.getLevel(color.r) + <span class=\"string\">'_'</span> + <span class=\"keyword\">this</span>.getLevel(color.g) + <span class=\"string\">'_'</span> + <span class=\"keyword\">this</span>.getLevel(color.b) + <span class=\"string\">'_'</span> + <span class=\"keyword\">this</span>.getLevel(color.a)</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">// è‰²æ·±é™çº§</span></span><br><span class=\"line\">getLevel(value) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.round(value / LEVEL)</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></li>\n<li>æŠŠå‡ºç°æ¬¡æ•°æœ€å¤šçš„averageColoråŒºå—ï¼Œä½œä¸ºé‡‡æ ·åŒºå—ï¼Œå†è·å–ä¸€éaverageColorï¼Œå³æ˜¯æœ€ç»ˆä¸»è‰²è°ƒ  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ ¹æ®è‰²å—é¢œè‰²ï¼Œè·å–</span></span><br><span class=\"line\">getMostColor(colorData) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> rst = <span class=\"literal\">null</span>, len = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> colorData) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'colorData[key].length'</span>, colorData[key].length)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'colorData[key].length'</span>, colorData[key])</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'colorData[key].length'</span>, key)</span><br><span class=\"line\">    colorData[key].length &gt; len &amp;&amp; (</span><br><span class=\"line\">      rst = colorData[key],</span><br><span class=\"line\">      len = colorData[key].length</span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rst;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2ViYzI3MmNkNzU2NjNhODUxYmM2MWQ0MDE4OWJjZGI3NzQ5NDUucG5n?x-oss-process=image/format,png\" alt=\"åŒºå—è·å–ä¸»è‰²è°ƒ\"></li>\n<li>é¢œè‰²å¯ä¿¡åº¦æé«˜äº†å¾ˆå¤š<h2 id=\"æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\"><a href=\"#æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\" class=\"headerlink\" title=\"æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\"></a>æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ</h2><ul>\n<li>æ ¸å¿ƒï¼šå°†<strong>ä¸‰é€šé“è½¬æˆå•é€šé“</strong>å³å¯<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> greyImageData = that.greyTheImage(imageData)</span><br><span class=\"line\">   wx.canvasPutImageData(&#123;</span><br><span class=\"line\">     canvasId: <span class=\"string\">'myCanvas'</span>,</span><br><span class=\"line\">     x: <span class=\"number\">150</span>,</span><br><span class=\"line\">     y: <span class=\"number\">0</span>,</span><br><span class=\"line\">     width: <span class=\"number\">150</span>,</span><br><span class=\"line\">     height: <span class=\"number\">100</span>,</span><br><span class=\"line\">     data: greyImageData,</span><br><span class=\"line\">     success (res) &#123;</span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(<span class=\"string\">'canvasPutImageData it worked!'</span>)</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"> greyTheImage(imageData) &#123;</span><br><span class=\"line\">     <span class=\"comment\">// imageDataæœ‰4ä¸ªé€šé“rgba</span></span><br><span class=\"line\">     <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; imageData.length; i += <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">let</span> sum_rgb = <span class=\"number\">0</span></span><br><span class=\"line\">       <span class=\"comment\">// ä½†æˆ‘ä»¬åªéœ€è¦rgbä¸‰é€šé“ï¼Œa-alphaé€šé“æ— ç”¨</span></span><br><span class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">3</span>; j += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">         sum_rgb = sum_rgb + imageData[i + j]</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">let</span> grey = <span class=\"built_in\">Math</span>.round(sum_rgb / <span class=\"number\">3</span>)</span><br><span class=\"line\">       imageData[i] = grey</span><br><span class=\"line\">       imageData[i + <span class=\"number\">1</span>] = grey</span><br><span class=\"line\">       imageData[i + <span class=\"number\">2</span>] = grey</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> imageData</span><br><span class=\"line\"> &#125;,</span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<br><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmNWJhNzk2OTJjOWEwOTA2MDNlMzkxMzBlMDRiZTY4MTAwNzcwLnBuZw?x-oss-process=image/format,png\" alt=\"åŒ»å­¦ç°è‰²å½±åƒ\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"æ ¼å¼åŒ–rgbaè¾“å‡º\"><a href=\"#æ ¼å¼åŒ–rgbaè¾“å‡º\" class=\"headerlink\" title=\"æ ¼å¼åŒ–rgbaè¾“å‡º\"></a>æ ¼å¼åŒ–rgbaè¾“å‡º</h2><ul>\n<li>åƒè¿™æ ·<img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxNDVhYzM4YzQ1MjFkNDgzNGNkZGQ5NTNmNjQ1MWQ3NTI0NTkucG5n?x-oss-process=image/format,png\" alt=\"æ ¼å¼åŒ–rgbaè¾“å‡º\">  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¯¹æœ€ç»ˆé¢œè‰²çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * result:&#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *   hex:'#ffffff',            åå…­ä½å€¼</span></span><br><span class=\"line\"><span class=\"comment\"> *   hexa:'#ffffff00',         åå…­ä½å€¼å¸¦alphaå€¼</span></span><br><span class=\"line\"><span class=\"comment\"> *   rgb:'rgb(0,0,0)',         RGBå€¼</span></span><br><span class=\"line\"><span class=\"comment\"> *   rgba:'rgba(0,0,0,0)'      RGBå€¼å¸¦alphaå€¼</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">colorStrFormat(color) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> rgba = <span class=\"string\">'rgba('</span> + color.r + <span class=\"string\">','</span> + color.g + <span class=\"string\">','</span> + color.b + <span class=\"string\">','</span> + (color.a / <span class=\"number\">255</span>).toFixed(<span class=\"number\">4</span>).replace(<span class=\"regexp\">/\\.*0+$/</span>, <span class=\"string\">''</span>) + <span class=\"string\">')'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> rgb = <span class=\"string\">'rgb('</span> + color.r + <span class=\"string\">','</span> + color.g + <span class=\"string\">','</span> + color.b + <span class=\"string\">')'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> hex = <span class=\"string\">'#'</span> + <span class=\"keyword\">this</span>.Num2Hex(color.r) + <span class=\"keyword\">this</span>.Num2Hex(color.g) + <span class=\"keyword\">this</span>.Num2Hex(color.b);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> hexa = hex + <span class=\"keyword\">this</span>.Num2Hex(color.a);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    rgba: rgba,</span><br><span class=\"line\">    rgb: rgb,</span><br><span class=\"line\">    hex: hex,</span><br><span class=\"line\">    hexa: hexa</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t</span><br><span class=\"line\">Num2Hex(num) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> hex = num.toString(<span class=\"number\">16</span>) + <span class=\"string\">''</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (hex.length &lt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'0'</span> + hex;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> hex;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2></li>\n<li><a href=\"https://blog.csdn.net/u012843346/article/details/16839649\" target=\"_blank\" rel=\"noopener\">phg1024 JavaScriptå›¾åƒå¤„ç†(6) - å‡è‰²ç®—æ³•(Color Reduction)</a></li>\n<li><a href=\"https://github.com/whoiam2007s/ImgMainColor\" target=\"_blank\" rel=\"noopener\">è·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„æ’ä»¶</a></li>\n<li>å…¶å®ä¹Ÿå¯ä»¥åˆ©ç”¨ <a href=\"https://blog.csdn.net/nanhupatar/article/details/82793637\" target=\"_blank\" rel=\"noopener\">CSSæ–°ç‰¹æ€§å»æ”¹å˜èƒŒæ™¯é¢œè‰²</a>ï¼Œæ¯”å¦‚é«˜æ–¯æ¨¡ç³Šç­‰æ¥è¾¾åˆ°ä¸šåŠ¡éœ€æ±‚<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2></li>\n<li>å‘¨å…­å¬äº†ä¸€å¤© John Lennon æ­Œæ›²ã€è¿™ä¹Ÿæ˜¯æˆ‘æ‹–æ›´çš„åŸå› ğŸ˜¶ ç¾¡æ…•ä»–å’Œ Yoko é‚£æ®µä¼Šç”¸å›­èˆ¬çš„çˆ±æƒ…ï¼Œä»–å¯¹ Yoko çš„ç—´çˆ±ï¼Œä»–å’Œæ¯äº²çš„ä¸¤æ¬¡åˆ†åˆ«æ„ŸåŒèº«å—ï¼ŒBeatlesåœ¨ä¸€èµ·åšéŸ³ä¹çš„æ¬¢ä¹ï¼Œä»–å¯¹ Sean çš„å® æººçˆ¶çˆ±ï¼Œä½†ä»–çš„äººç”Ÿå´åœ¨ä¸€æ¬¡æªæ€åæˆ›ç„¶è€Œæ­¢ï¼Œå¿ƒç—› å¿ƒç—› ğŸŒ§</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n<hr>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>æ˜¯çš„æˆ‘è¦å¼€å§‹åšï¼šæ ¹æ®å›¾ç‰‡çš„ä¸»è‰²è°ƒæ¥æ”¹å˜ä¸€ä¸‹é¡µé¢èƒŒæ™¯é¢œè‰²äº†ğŸ™†</li>\n<li>è®°å½•ä¸€ä¸‹ï¼Œè‡ªå·±ç¢°åˆ°çš„é—®é¢˜ä»¥åŠæ€è€ƒ</li>\n<li><a href=\"https://github.com/Ele-Peng/miniprogram-main-color\" target=\"_blank\" rel=\"noopener\">miniprogram-main-color å®Œæ•´ä»£ç  ç‚¹å‡»ä¸€ä¸‹</a> æ¬¢è¿å¤§å®¶å»starğŸ˜˜</li>\n</ul>\n<hr>\n<h2 id=\"å¼€å‘å‡†å¤‡\"><a href=\"#å¼€å‘å‡†å¤‡\" class=\"headerlink\" title=\"å¼€å‘å‡†å¤‡\"></a>å¼€å‘å‡†å¤‡</h2><ul>\n<li>ç†ä¸€ä¸‹æ€è·¯<ol>\n<li>å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvas</li>\n<li>é€šè¿‡canvasçš„getImageDataè·å–å›¾ç‰‡çš„åƒç´ æ•°æ®<ul>\n<li><a href=\"https://blog.csdn.net/Elle_Peng/article/details/105030971\" target=\"_blank\" rel=\"noopener\">canvas 2d ä¸æ—§ç‰ˆ canvas å°†ç½‘ç»œå›¾ç‰‡ç»˜åˆ¶è¿›canvasçš„ä¸¤ç§æ–¹æ³•å®è·µ</a></li>\n</ul>\n</li>\n<li>åˆ†æç›®å‰ä¸»è¦ç”¨äºè·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„ç®—æ³•ï¼Œå¹¶å®è·µ</li>\n<li>å¾—åˆ°ä¸»è¦è‰²è°ƒï¼Œå†å°†rgbè½¬æ¢æˆhsbï¼Œå¹¶å¯¹bå€¼ï¼Œè¿›è¡Œä¿®æ”¹ï¼Œåˆ¶ä½œæ¸å˜ï¼Œå·¦ä¾§35ï¼Œå³ä¾§15","more":"<ul>\n<li>å—¯ï¼Œç¥æˆ‘æˆåŠŸ<h2 id=\"é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯-å‡è‰²ç®—æ³•\"><a href=\"#é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯-å‡è‰²ç®—æ³•\" class=\"headerlink\" title=\"é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•\"></a>é¢œè‰²ç©ºé—´åŸºç¡€çŸ¥è¯†èƒŒæ™¯+å‡è‰²ç®—æ³•</h2></li>\n<li><a href=\"http://www.360doc.com/content/17/0417/19/41797635_646363886.shtml\" target=\"_blank\" rel=\"noopener\">é¢œè‰²ç©ºé—´ RGB CMY HSV HSL LAB</a></li>\n<li>å›¾ç‰‡é¢œè‰²é‡åŒ–ç®—æ³•</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>æ¯”è¾ƒå¸¸è§çš„åº”ç”¨å°±æ˜¯ç”¨äºæå–å›¾ç‰‡çš„ä¸»è‰²è°ƒç”¨äºä¸Šè‰²é…è‰²,å½“ç„¶ä¹Ÿå¯ä»¥ç”¨äºå›¾åƒåˆ†å‰²</li>\n<li>ä¸»æµç®—æ³•<ul>\n<li>ä¸¤ä¸ªå¤§æ–¹å‘</li>\n<li><strong>åœ¨é¢œè‰²ç©ºé—´åˆç†åœ°é€‰å–é‡‡æ ·ç‚¹æ¥æ„é€ é¢œè‰²è¡¨ï¼Œä½¿å¾—å‡è‰²åçš„å›¾åƒå’ŒåŸå›¾å°½å¯èƒ½åœ°æ¥è¿‘</strong><ul>\n<li>ç›´æ¥é‡åŒ–<ul>\n<li>å¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£</li>\n</ul>\n</li>\n<li>ç»Ÿè®¡é‡åŒ–<ul>\n<li>æ ¸å¿ƒï¼šè°ƒæ•´ç›´æ–¹å›¾ä½¿å¾—ç´¯ç§¯åˆ†å¸ƒæ›²çº¿å‘ˆçº¿æ€§ï¼Œä»è€Œä½¿å›¾åƒåƒç´ ç‚¹çš„äº®åº¦å€¼å°½å¯èƒ½å‡åŒ€åœ°åˆ†å¸ƒ</li>\n<li>åˆ©ç”¨åŸå›¾çš„ç›´æ–¹å›¾æ¥å¼•å¯¼é‡‡æ ·ç‚¹çš„é€‰å–ï¼Œä½¿å¾—æ¯ä¸ªé‡‡æ ·ç‚¹å¯ä»¥å¤§è‡´è¦†ç›–ç›¸åŒæ•°é‡çš„åƒç´ ç‚¹</li>\n<li>å¯¹æ¯ä¸ªé¢œè‰²é€šé“å»ºç«‹ç›´æ–¹å›¾ï¼Œç„¶åæ ¹æ®è¿™äº›ç›´æ–¹å›¾å¯¹å„ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡‡æ ·ï¼Œåœ¨åƒç´ å€¼åˆ†å¸ƒå¤šçš„åŒºåŸŸè¿›è¡Œå¯†é›†é‡‡æ ·ï¼Œåˆ«çš„åŒºåŸŸç¨€ç–é‡‡æ ·ï¼Œå†åˆ©ç”¨è¿™äº›é‡‡æ ·ç‚¹æ¥ç»„åˆæˆæœ€ç»ˆçš„é¢œè‰²è¡¨ï¼ŒåŸå›¾ä¸­çš„æ¯ä¸ªåƒç´ ç‚¹ç”¨é¢œè‰²è¡¨ä¸­æœ€æ¥è¿‘çš„é¢œè‰²æ›¿æ¢æ‰</li>\n</ul>\n</li>\n<li>é¢œè‰²ç©ºé—´åˆ†å‰²(Median-Cut)<ul>\n<li>æ ¸å¿ƒï¼šåœ¨é¢œè‰²ç©ºé—´å»ºç«‹ä¸€æ£µäºŒå‰æ ‘ï¼Œé€šè¿‡ä¸æ–­åœ°ç»†åŒ–è¿™æ£µæ ‘æ¥è¿‘ä¼¼å¾—åˆ°ä¸€ä¸ªé¢œè‰²ä¸‰ç»´ç›´æ–¹å›¾ï¼Œç„¶åå†æ ¹æ®è¿™æ£µæ ‘æ¥åˆ†é…é‡‡æ ·ç‚¹</li>\n<li>åŸºäºå›¾åƒé¢œè‰²æ ·æœ¬åˆ†å¸ƒçš„è‡ªé€‚åº”æ–¹æ³•ï¼Œä¸è®ºå›¾åƒä¸­é¢œè‰²æ ·æœ¬çš„åˆ†å¸ƒå¦‚ä½•ï¼Œæ€»æ˜¯å¯ä»¥ç”Ÿæˆä¸€ä¸ªå’Œé¢œè‰²æ ·æœ¬åˆ†å¸ƒåŒ¹é…è‰¯å¥½çš„é¢œè‰²è¡¨ï¼šåœ¨é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸå†…é‡‡æ ·ç‚¹åˆ†å¸ƒä¹Ÿç›¸å¯¹å¯†é›†ï¼Œå…¶ä»–åŒºåŸŸåˆ™åˆ†é…äº†è¾ƒå°‘çš„é‡‡æ ·ç‚¹ã€‚ä¸”ç›¸åŒæ•°ç›®çš„é¢œè‰²æ ·æœ¬æ€»æ˜¯ç”¨åŒæ ·æ•°é‡çš„é‡‡æ ·ç‚¹æ¥ä»£è¡¨ï¼Œæ‰€ä»¥é¢œè‰²æ ·æœ¬åˆ†å¸ƒå¯†é›†çš„åŒºåŸŸï¼Œé‡‡æ ·ç‚¹çš„æ•°é‡è‡ªç„¶å°±ä¼šå¤šï¼Œåä¹‹åˆ™ç›¸åº”çš„æ¯”è¾ƒå°‘</li>\n<li>æœ€é‡è¦ã€åº”ç”¨æœ€å¹¿æ³›çš„å‡è‰²ç®—æ³•ä¹‹ä¸€</li>\n</ul>\n</li>\n<li>kå‡å€¼èšç±»(k-Means clustering)<ul>\n<li>æ ¸å¿ƒï¼šå°†åƒç´ æŒ‰é¢œè‰²çš„ç›¸ä¼¼ç¨‹åº¦å½’ç±»</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>ä»ä¸€ä¸ªåˆå§‹çš„é¢œè‰²è¡¨å‡ºå‘ï¼Œé€šè¿‡ä¸æ–­ä¿®æ”¹é¢œè‰²è¡¨æ¥æ”¹å–„å‡è‰²æ•ˆæœ</strong><ul>\n<li>ç¥ç»ç½‘ç»œæ–¹æ³•(ANN)<ul>\n<li>é¢œè‰²è¡¨é€šè¿‡ç¥ç»å…ƒæ¥ç¼–ç ï¼Œé€šè¿‡ç¼“æ…¢çš„è°ƒèŠ‚ç¥ç»å…ƒçš„é¢œè‰²å€¼ä»¥ä¿è¯æ•´ä¸ªç¥ç»ç½‘ç»œé€æ­¥æ”¶æ•›äºæœ€å°è¯¯å·®çŠ¶æ€ï¼ˆå³é€šè¿‡ç¥ç»ç½‘ç»œäº§ç”Ÿçš„å›¾åƒå’ŒåŸå›¾ä¹‹é—´è¯¯å·®æœ€å°ï¼‰<h2 id=\"ç›´æ¥é‡åŒ–å®è·µ\"><a href=\"#ç›´æ¥é‡åŒ–å®è·µ\" class=\"headerlink\" title=\"ç›´æ¥é‡åŒ–å®è·µ\"></a>ç›´æ¥é‡åŒ–å®è·µ</h2><ul>\n<li>é¦–å…ˆæˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€çœ‹getImageDataåçš„æ•°æ®</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzljZjVjMjQzMDI0NmE0YjE0YzFlYmMzMjYwZDkwYTgwNTQzMDIucG5n?x-oss-process=image/format,png\" alt=\"getImageDataæ•°æ®\"></li>\n<li>å¯ä»¥ç®€å•çœ‹ä½œæ˜¯å¤–å±‚å¾ªç¯ä¸ºrgbaçš„æ‰“å¹³äº†äºŒç»´æ•°ç»„<ul>\n<li>å¦‚æœæŒ‰æ»¡è¶³éœ€æ±‚åšï¼Œåªè¦ä¸€ä¸ªä¸»è‰²è°ƒçš„è¯ï¼Œå¯ä»¥æŠŠæ•´ä¸ªgetImageDataè·å¾—çš„æ•°æ®ï¼Œè¿›è¡Œå„ä¸ªé€šé“çš„å¹³å‡å€¼æ±‚å€¼ï¼Œå†æ‹¼æ¥ï¼Œåƒè¿™æ ·<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getUniqueColor(imageData) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_r = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_g = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_b = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> res_a = <span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; imageData.length; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">       res_r += imageData[i]</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">       res_g += imageData[i]</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">       res_b += imageData[i]</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (i % <span class=\"number\">4</span> === <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">       res_a += imageData[i]</span><br><span class=\"line\">     &#125; </span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   res_r = <span class=\"built_in\">Math</span>.round(res_r / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   res_g =  <span class=\"built_in\">Math</span>.round(res_g / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   res_b =  <span class=\"built_in\">Math</span>.round(res_b / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   res_a =  <span class=\"built_in\">Math</span>.round(res_a / (imageData.length / <span class=\"number\">4</span>))</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_r'</span>, res_r)</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_g'</span>, res_g)</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_b'</span>, res_b)</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'res_a'</span>, res_a)</span><br><span class=\"line\"> &#125;,</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzc4NzFiOTVmYzA4NWQ3NGQwNDc4OWY0ZWI5Yzc0YThmNzQ5OTYucG5n?x-oss-process=image/format,png\" alt=\"æš´åŠ›æ³•æ±‚ä¸»è‰²è°ƒ\"></li>\n<li>æ— ç›¸å…³ç‚¹è¶Šå¤šï¼Œè¯¯å·®è¶Šå¤§ğŸ‘<ul>\n<li>æˆ‘ä»¬å¯ä»¥â€œå¯¹æ¯ä¸ªé¢œè‰²é€šé“å•ç‹¬é‡æ–°é‡‡æ ·ï¼Œå°†æ¯ä¸ªé€šé“çš„è‰²é˜¶ä»256å‡å°‘åˆ°æŸä¸ªæŒ‡å®šçš„æ•°å­—ã€‚è¿™æ ·å¾—åˆ°ä¸€ä¸ªæ–°çš„å°çš„å¤šçš„é¢œè‰²ç©ºé—´ï¼Œè€ŒåŸå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ å°†è¢«ç”¨åœ¨æ–°çš„é¢œè‰²ç©ºé—´ä¸­çš„æœ€è¿‘é‚»å–ä»£â€<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> COLOR_SIZE = <span class=\"number\">40</span> <span class=\"comment\">// å•ä½è‰²å—çš„å¤§å°ï¼ˆåƒç´ ä¸ªæ•°ï¼Œé»˜è®¤40ï¼‰ã€‚ä»¥å•ä½è‰²å—çš„å¹³å‡åƒç´ å€¼ä¸ºä½œä¸ºç»Ÿè®¡å•ä½</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> LEVEL = <span class=\"number\">32</span> <span class=\"comment\">// è‰²æ·±ï¼Œé¢œè‰²åˆ†åŒºå‚æ•°ï¼ˆ0-255ï¼‰ï¼Œæ€»256ï¼Œ2^8ï¼Œå³8bitï¼Œ4ä¸ªé€šé“ï¼ˆrgbaï¼‰ï¼Œå³é»˜è®¤è‰²æ·±4*8bitï¼Œ32bit</span></span><br><span class=\"line\"><span class=\"comment\">// åˆ†åŒºå—ï¼Œå¯ä»¥æ‹“å±•æ€§çš„æ±‚ä¸»è¦è‰²æ¿ï¼Œç”¨æ¥åšpalette</span></span><br><span class=\"line\">   <span class=\"keyword\">const</span> mapData = that.getLevelData(imageData);</span><br><span class=\"line\">   <span class=\"keyword\">const</span> colors = that.getMostColor(mapData);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!colors) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">return</span></span><br><span class=\"line\">   &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">     <span class=\"keyword\">const</span> color = that.getAverageColor(colors)</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(<span class=\"string\">'color'</span>, color)</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å°†getImageDataæ•°æ®åˆ†æˆç‰¹å®šå¤§å°çš„åŒºå—ï¼Œåˆ†åˆ«ç®—å‡ºå„ä¸ªåŒºå—çš„averageColorï¼Œå†åˆ©ç”¨mapç‰¹æ€§ï¼Œå°†averageColorä½œkeyï¼Œcountå„ä¸ªaverageColorä¸ªæ•°  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è·å–æ¯æ®µçš„é¢œè‰²æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">// æ ¹æ®åƒç´ æ•°æ®ï¼ŒæŒ‰å•ä½è‰²å—è¿›è¡Œåˆ‡å‰²</span></span><br><span class=\"line\">getLevelData(imageData) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> len = imageData.length;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> mapData = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; len; i += COLOR_SIZE * <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> blockColor = <span class=\"keyword\">this</span>.getBlockColor(imageData, i); <span class=\"comment\">// è¯¥åŒºå—å¹³å‡rgba [&#123;r,g,b,a&#125;]æ•°æ®</span></span><br><span class=\"line\">    <span class=\"comment\">// è·å–å„ä¸ªåŒºå—çš„å¹³å‡rgbaæ•°æ®ï¼Œå°†å„ä¸ªé€šé“çš„é¢œè‰²è¿›è¡ŒLEVELè‰²æ·±é™çº§</span></span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®r_g_b_a å»ºç«‹mapç´¢å¼•</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> key = <span class=\"keyword\">this</span>.getColorLevel(blockColor);</span><br><span class=\"line\">    !mapData[key] &amp;&amp; (mapData[key] = []);</span><br><span class=\"line\">    mapData[key].push(blockColor);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> mapData;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">// è·å–å•ä½å—çš„å…¨éƒ¨è‰²å€¼</span></span><br><span class=\"line\"><span class=\"comment\">// å¹¶æ ¹æ®å…¨éƒ¨è‰²å€¼ï¼Œè®¡ç®—å¹³å‡è‰²å€¼</span></span><br><span class=\"line\"><span class=\"comment\">// å¤„ç†æœ€åè¾¹ç•Œå€¼ï¼Œå°äºCOLOR_SIZE</span></span><br><span class=\"line\">getBlockColor(imageData, start) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> data = [],</span><br><span class=\"line\">    count = COLOR_SIZE,</span><br><span class=\"line\">    len = COLOR_SIZE * <span class=\"number\">4</span>;</span><br><span class=\"line\">  imageData.length &lt;= start + len &amp;&amp; (count = <span class=\"built_in\">Math</span>.floor((imageData.length - start - <span class=\"number\">1</span>) / <span class=\"number\">4</span>));</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; count; i += <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">    data.push(&#123;</span><br><span class=\"line\">      r: imageData[start + i + <span class=\"number\">0</span>],</span><br><span class=\"line\">      g: imageData[start + i + <span class=\"number\">1</span>],</span><br><span class=\"line\">      b: imageData[start + i + <span class=\"number\">2</span>],</span><br><span class=\"line\">      a: imageData[start + i + <span class=\"number\">3</span>]</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.getAverageColor(data);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">// å–å‡ºå„ä¸ªé€šé“çš„å¹³å‡å€¼ï¼Œå³ä¸ºæ”¹è‰²å—çš„å¹³å‡è‰²å€¼</span></span><br><span class=\"line\">getAverageColor(colorArr) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> len = colorArr.length;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sr = <span class=\"number\">0</span>, sg = <span class=\"number\">0</span>, sb = <span class=\"number\">0</span>, sa = <span class=\"number\">0</span>;</span><br><span class=\"line\">  colorArr.map(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">item</span>) </span>&#123;</span><br><span class=\"line\">    sr += item.r;</span><br><span class=\"line\">    sg += item.g;</span><br><span class=\"line\">    sb += item.b;</span><br><span class=\"line\">    sa += item.a;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    r: <span class=\"built_in\">Math</span>.round(sr / len),</span><br><span class=\"line\">    g: <span class=\"built_in\">Math</span>.round(sg / len),</span><br><span class=\"line\">    b: <span class=\"built_in\">Math</span>.round(sb / len),</span><br><span class=\"line\">    a: <span class=\"built_in\">Math</span>.round(sa / len)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">getColorLevel(color) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.getLevel(color.r) + <span class=\"string\">'_'</span> + <span class=\"keyword\">this</span>.getLevel(color.g) + <span class=\"string\">'_'</span> + <span class=\"keyword\">this</span>.getLevel(color.b) + <span class=\"string\">'_'</span> + <span class=\"keyword\">this</span>.getLevel(color.a)</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">// è‰²æ·±é™çº§</span></span><br><span class=\"line\">getLevel(value) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.round(value / LEVEL)</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></li>\n<li>æŠŠå‡ºç°æ¬¡æ•°æœ€å¤šçš„averageColoråŒºå—ï¼Œä½œä¸ºé‡‡æ ·åŒºå—ï¼Œå†è·å–ä¸€éaverageColorï¼Œå³æ˜¯æœ€ç»ˆä¸»è‰²è°ƒ  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ ¹æ®è‰²å—é¢œè‰²ï¼Œè·å–</span></span><br><span class=\"line\">getMostColor(colorData) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> rst = <span class=\"literal\">null</span>, len = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> colorData) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'colorData[key].length'</span>, colorData[key].length)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'colorData[key].length'</span>, colorData[key])</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'colorData[key].length'</span>, key)</span><br><span class=\"line\">    colorData[key].length &gt; len &amp;&amp; (</span><br><span class=\"line\">      rst = colorData[key],</span><br><span class=\"line\">      len = colorData[key].length</span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rst;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<ul>\n<li><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2ViYzI3MmNkNzU2NjNhODUxYmM2MWQ0MDE4OWJjZGI3NzQ5NDUucG5n?x-oss-process=image/format,png\" alt=\"åŒºå—è·å–ä¸»è‰²è°ƒ\"></li>\n<li>é¢œè‰²å¯ä¿¡åº¦æé«˜äº†å¾ˆå¤š<h2 id=\"æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\"><a href=\"#æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\" class=\"headerlink\" title=\"æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ\"></a>æ‹“å±•å®è·µ-åŒ»å­¦ç°è‰²å½±åƒ</h2><ul>\n<li>æ ¸å¿ƒï¼šå°†<strong>ä¸‰é€šé“è½¬æˆå•é€šé“</strong>å³å¯<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> greyImageData = that.greyTheImage(imageData)</span><br><span class=\"line\">   wx.canvasPutImageData(&#123;</span><br><span class=\"line\">     canvasId: <span class=\"string\">'myCanvas'</span>,</span><br><span class=\"line\">     x: <span class=\"number\">150</span>,</span><br><span class=\"line\">     y: <span class=\"number\">0</span>,</span><br><span class=\"line\">     width: <span class=\"number\">150</span>,</span><br><span class=\"line\">     height: <span class=\"number\">100</span>,</span><br><span class=\"line\">     data: greyImageData,</span><br><span class=\"line\">     success (res) &#123;</span><br><span class=\"line\">       <span class=\"built_in\">console</span>.log(<span class=\"string\">'canvasPutImageData it worked!'</span>)</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"> greyTheImage(imageData) &#123;</span><br><span class=\"line\">     <span class=\"comment\">// imageDataæœ‰4ä¸ªé€šé“rgba</span></span><br><span class=\"line\">     <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; imageData.length; i += <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">let</span> sum_rgb = <span class=\"number\">0</span></span><br><span class=\"line\">       <span class=\"comment\">// ä½†æˆ‘ä»¬åªéœ€è¦rgbä¸‰é€šé“ï¼Œa-alphaé€šé“æ— ç”¨</span></span><br><span class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">3</span>; j += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">         sum_rgb = sum_rgb + imageData[i + j]</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">let</span> grey = <span class=\"built_in\">Math</span>.round(sum_rgb / <span class=\"number\">3</span>)</span><br><span class=\"line\">       imageData[i] = grey</span><br><span class=\"line\">       imageData[i + <span class=\"number\">1</span>] = grey</span><br><span class=\"line\">       imageData[i + <span class=\"number\">2</span>] = grey</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> imageData</span><br><span class=\"line\"> &#125;,</span><br></pre></td></tr></table></figure></li>\n<li>è¿è¡Œæˆªå›¾<br><img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlLzhmNWJhNzk2OTJjOWEwOTA2MDNlMzkxMzBlMDRiZTY4MTAwNzcwLnBuZw?x-oss-process=image/format,png\" alt=\"åŒ»å­¦ç°è‰²å½±åƒ\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"æ ¼å¼åŒ–rgbaè¾“å‡º\"><a href=\"#æ ¼å¼åŒ–rgbaè¾“å‡º\" class=\"headerlink\" title=\"æ ¼å¼åŒ–rgbaè¾“å‡º\"></a>æ ¼å¼åŒ–rgbaè¾“å‡º</h2><ul>\n<li>åƒè¿™æ ·<img src=\"https://imgconvert.csdnimg.cn/aHR0cDovL3AwLm1laXR1YW4ubmV0L215dmlkZW9kaXN0cmlidXRlL2YxNDVhYzM4YzQ1MjFkNDgzNGNkZGQ5NTNmNjQ1MWQ3NTI0NTkucG5n?x-oss-process=image/format,png\" alt=\"æ ¼å¼åŒ–rgbaè¾“å‡º\">  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¯¹æœ€ç»ˆé¢œè‰²çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * result:&#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *   hex:'#ffffff',            åå…­ä½å€¼</span></span><br><span class=\"line\"><span class=\"comment\"> *   hexa:'#ffffff00',         åå…­ä½å€¼å¸¦alphaå€¼</span></span><br><span class=\"line\"><span class=\"comment\"> *   rgb:'rgb(0,0,0)',         RGBå€¼</span></span><br><span class=\"line\"><span class=\"comment\"> *   rgba:'rgba(0,0,0,0)'      RGBå€¼å¸¦alphaå€¼</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">colorStrFormat(color) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> rgba = <span class=\"string\">'rgba('</span> + color.r + <span class=\"string\">','</span> + color.g + <span class=\"string\">','</span> + color.b + <span class=\"string\">','</span> + (color.a / <span class=\"number\">255</span>).toFixed(<span class=\"number\">4</span>).replace(<span class=\"regexp\">/\\.*0+$/</span>, <span class=\"string\">''</span>) + <span class=\"string\">')'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> rgb = <span class=\"string\">'rgb('</span> + color.r + <span class=\"string\">','</span> + color.g + <span class=\"string\">','</span> + color.b + <span class=\"string\">')'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> hex = <span class=\"string\">'#'</span> + <span class=\"keyword\">this</span>.Num2Hex(color.r) + <span class=\"keyword\">this</span>.Num2Hex(color.g) + <span class=\"keyword\">this</span>.Num2Hex(color.b);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> hexa = hex + <span class=\"keyword\">this</span>.Num2Hex(color.a);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    rgba: rgba,</span><br><span class=\"line\">    rgb: rgb,</span><br><span class=\"line\">    hex: hex,</span><br><span class=\"line\">    hexa: hexa</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">\t</span><br><span class=\"line\">Num2Hex(num) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> hex = num.toString(<span class=\"number\">16</span>) + <span class=\"string\">''</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (hex.length &lt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'0'</span> + hex;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> hex;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2></li>\n<li><a href=\"https://blog.csdn.net/u012843346/article/details/16839649\" target=\"_blank\" rel=\"noopener\">phg1024 JavaScriptå›¾åƒå¤„ç†(6) - å‡è‰²ç®—æ³•(Color Reduction)</a></li>\n<li><a href=\"https://github.com/whoiam2007s/ImgMainColor\" target=\"_blank\" rel=\"noopener\">è·å–å›¾ç‰‡ä¸»è‰²è°ƒçš„æ’ä»¶</a></li>\n<li>å…¶å®ä¹Ÿå¯ä»¥åˆ©ç”¨ <a href=\"https://blog.csdn.net/nanhupatar/article/details/82793637\" target=\"_blank\" rel=\"noopener\">CSSæ–°ç‰¹æ€§å»æ”¹å˜èƒŒæ™¯é¢œè‰²</a>ï¼Œæ¯”å¦‚é«˜æ–¯æ¨¡ç³Šç­‰æ¥è¾¾åˆ°ä¸šåŠ¡éœ€æ±‚<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2></li>\n<li>å‘¨å…­å¬äº†ä¸€å¤© John Lennon æ­Œæ›²ã€è¿™ä¹Ÿæ˜¯æˆ‘æ‹–æ›´çš„åŸå› ğŸ˜¶ ç¾¡æ…•ä»–å’Œ Yoko é‚£æ®µä¼Šç”¸å›­èˆ¬çš„çˆ±æƒ…ï¼Œä»–å¯¹ Yoko çš„ç—´çˆ±ï¼Œä»–å’Œæ¯äº²çš„ä¸¤æ¬¡åˆ†åˆ«æ„ŸåŒèº«å—ï¼ŒBeatlesåœ¨ä¸€èµ·åšéŸ³ä¹çš„æ¬¢ä¹ï¼Œä»–å¯¹ Sean çš„å® æººçˆ¶çˆ±ï¼Œä½†ä»–çš„äººç”Ÿå´åœ¨ä¸€æ¬¡æªæ€åæˆ›ç„¶è€Œæ­¢ï¼Œå¿ƒç—› å¿ƒç—› ğŸŒ§</li>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n<hr>"},{"title":"ç¼–ç¨‹è¯­è¨€é€šè¯†","date":"2020-04-20T03:18:20.000Z","description":["ç¼–ç¨‹è¯­è¨€é€šè¯†"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## è¯­è¨€æŒ‰è¯­æ³•åˆ†ç±»\n\n- éå½¢å¼è¯­è¨€\n\t- ä¸­æ–‡ã€è‹±æ–‡\n- å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰**è¿½æº¯**19ä¸–çºª50å¹´ä»£\n\t- 0å‹ æ— é™åˆ¶æ–‡æ³•\n\t- 1å‹ ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•\n\t- 2å‹ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•\n\t\t- å¤§éƒ¨åˆ†è®¡ç®—æœºè¯­è¨€ä¸»ä½“ä¸Šéƒ½æ˜¯ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•\n\t\t- æ¯”å¦‚Javascriptå°±æ˜¯ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ï¼Œä¼šåœ¨æŸäº›ç‚¹ï¼Œè¿åä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•åŸåˆ™ï¼ˆgetï¼‰\n\t- 3å‹ æ­£åˆ™æ–‡æ³•\n<!-- more -->\n\n## ç†è§£å½¢å¼è¯­è¨€\n### äº§ç”Ÿå¼ï¼ˆBNF -- Backus-Naur Formï¼‰\n- ç”¨å°–æ‹¬å·æ‹¬èµ·æ¥çš„åç§°æ¥è¡¨ç¤ºè¯­æ³•ç»“æ„å\n- è¯­æ³•ç»“æ„åˆ†æˆåŸºç¡€ç»“æ„å’Œéœ€è¦ç”¨å…¶ä»–è¯­æ³•ç»“æ„å®šä¹‰çš„å¤åˆç»“æ„\n\t- åŸºç¡€ç»“æ„ç§°ç»ˆç»“ç¬¦\n\t- å¤åˆç»“æ„ç§°éç»ˆç»“ç¬¦\n- å¼•å·å’Œä¸­é—´çš„å­—ç¬¦è¡¨ç¤ºç»ˆç»“ç¬¦\n- å¯ä»¥æœ‰æ‹¬å·\n- * è¡¨ç¤ºé‡å¤å¤šæ¬¡\n- | è¡¨ç¤ºæˆ–\n- + è¡¨ç¤ºè‡³å°‘ä¸€æ¬¡\n\n#### BNF è¡¨ç¤º å››åˆ™è¿ç®—\n- åŠ æ³•ï¼Œå…è®¸è¿åŠ \n\t- &lt;Number&gt;::= \"0\" | \"1\" | \"2\" | \"3\" | ... | \"9\"\n\t- &lt;DecimalNumber&gt;::= \"0\" | ((\"1\" | \"2\" | \"3\" | ... \"9\") &lt;Number&gt;*)\n\t- &lt;AddtiveExpression&gt;::= &lt;DecimalNumber&gt; \"+\" &lt;DecimalNumber&gt;\n\t- æ”¯æŒå¤šä¸ªè¿åŠ ï¼Œé‡‡ç”¨é€’å½’ï¼š\n\t\t- &lt;AddtiveExpression&gt;::= &lt;AddtiveExpression&gt; \"+\" &lt;DecimalNumber&gt;\n\t- æœ€ç»ˆï¼š\n\t\t- &lt;AddtiveExpression&gt;::= &lt;DecimalNumber&gt; | &lt;AddtiveExpression&gt; \"+\" &lt;DecimalNumber&gt;\n- ä¹˜æ³•\n\t- &lt;MultiplecativeExpression&gt;::= &lt;DecimalNumber&gt; | &lt; MultiplecativeExpression&gt; \"*\" &lt;DecimalNumber&gt;\n\t- 1 + 2 * 3\n\t\t- åŠ æ³•è¡¨è¾¾å¼ï¼Œæ˜¯ç”±ä¸¤ä¸ªä¹˜æ³•è¡¨è¾¾å¼åŠ èµ·æ¥çš„\n\t\t- 1 * 1 + 2 * 3\n\t\t- å› æ­¤**åŠ æ³•è¡¨ç¤ºæˆ**\n\t\t\t\n\t\t\t> &lt;AddtiveExpression&gt;::= &lt; MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; \"+\" &lt;DecimalNumber&gt;\n- LogicExpression\n\t\n\t> &lt;LogicExpression&gt;::= &lt;AddtiveExpression&gt; | \n\t\t&lt;LogicExpression&gt; \"||\" &lt;AddtiveExpression&gt; |\n\t\t&lt;LogicExpression&gt; \"&&\" &lt;AddtiveExpression&gt;\n- é™¤æ³•\n\t\n\t> &lt;MultiplecativeExpression&gt;::= &lt;DecimalNumber&gt; | &lt; MultiplecativeExpression&gt; \"/\" &lt;DecimalNumber&gt;\n- å‡æ³•\n\n\t> &lt;AddtiveExpression&gt;::= &lt;MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; \"-\" &lt;MultiplecativeExpression&gt;\n- å¸¦æ‹¬å·çš„å››åˆ™è¿ç®—\n\t- æ‹¬å·\n\t\n\t\t> &lt;PrimaryExpression&lt;::= &lt;DecimalNumber&lt; | \"(\" | &lt;LogicExpression&lt; | \")\"\n\t- ä¹˜æ³•è¡¨è¾¾å¼ä¾¿å¯ä»¥å˜æˆ\n\t\t\n\t\t> &lt;MultiplecativeExpression&gt;::= &lt;PrimaryExpression&gt; | &lt; MultiplecativeExpression&gt; \"*\" &lt; PrimaryExpression&gt;\n\t- é™¤æ³•ï¼ŒåŒç†ä¹˜æ³•ï¼Œæ¢ç¬¦å·\n\t\n\t\t> &lt;MultiplecativeExpression&gt;::= &lt;PrimaryExpression&gt; | &lt; MultiplecativeExpression&gt; \"/\" &lt; PrimaryExpression&gt;\n\t- åŠ å‡\n\t\t\n\t\t> &lt;AddtiveExpression&gt;::= &lt;MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; \"+\" &lt;MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; \"-\" &lt;MultiplecativeExpression&gt;\n\t\t\n#### é€šè¿‡ BNF ç†è§£å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰\n- 0å‹ æ— é™åˆ¶æ–‡æ³•\n\t- ?::=?\n- 1å‹ ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•\n\t- <span style=\"color: red\">?</span>&lt;A&gt;<span style=\"color:blue\">?</span>::=<span style=\"color: red\">?</span>&lt;B&gt;<span style=\"color:blue\">?</span>\n\n\t\n\t\t```javascript\n\t\t{\n\t\t  get a { return 1},\n\t\t  get: 1\n\t\t}\n\t\t```\n\t- 1ï¼‰ç±»ä¼¼å…³é”®å­—ï¼Œ 2ï¼‰get: å±æ€§\n- 2å‹ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•\n\t- &lt;A&gt;::=?\n\t- 2 ** 1 ** 2\n- 3å‹ æ­£åˆ™æ–‡æ³•ï¼Œåªå…è®¸å·¦é€’å½’ï¼ˆJavascriptåœ¨**å‡ºç°å‰ï¼Œä¸€ç›´éµå¾ªç€å·¦é€’å½’ï¼‰\n\t- &lt;A&gt;::=&lt;A&gt;?\n\t- &lt;A&gt;::=?&lt;A&gt;<span style=\"color: red\">x</span>\n\t- Javascript è¡¨è¾¾å¼å¤§éƒ¨åˆ†åœ¨3å‹\n\t- ** å³ç»“åˆ\n\t\n\t\t```javascript\n\t\t2 ** 2 --> 4\n\t\t2 ** (2 ** 3) --> 256\n\t\t```\n\t\t- **\n\t\t\n\t\t\t> &lt;ExpExpression&gt; = &lt;MulticativeExpression&gt; | &lt;MulticativeExpression&gt; \"**\" &lt;ExpExpression&gt;\n\n\t\n#### optional æ­£åˆ™è¡¨è¾¾å¼+ BNF è¡¨ç¤ºå››åˆ™è¿ç®—\n\n### å…¶ä»–äº§ç”Ÿå¼\n- EBNF ABNF Customized\n\t- ![ECMA-Script EBNF](http://p1.meituan.net/myvideodistribute/1d1c7542767173de3c87f7a9e00a445763429.png)\n\n### ç°ä»£è¯­è¨€è¯­è¨€çš„ç‰¹ä¾‹\n- C++ï¼Œ* å¯èƒ½è¡¨ç¤ºä¹˜å·æˆ–è€…æŒ‡é’ˆï¼Œå…·ä½“æ˜¯å“ªä¸ªï¼Œå–å†³äºæ˜Ÿå·å‰é¢çš„æ ‡è¯†ç¬¦æ˜¯å¦è¢«å£°æ˜ä¸ºç±»å‹\n\t- éå½¢å¼è¯è¯­è¨€ï¼Œè¯­æ³•ä¸è¯­ä¹‰ç›¸å…³ï¼Œ* å¯ä»¥åœ¨å¾ˆæ—©ä¹‹å‰å‡ºç°\n- VBä¸­ï¼Œ &lt; å¯èƒ½æ˜¯å°äºå·ï¼Œä¹Ÿå¯èƒ½æ˜¯ XML ç›´æ¥é‡çš„å¼€å§‹ï¼Œå–å†³äºå½“å‰ä½ç½®æ˜¯å¦å¯ä»¥æ¥å— XML ç›´æ¥é‡\n\t- 1å‹ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•\n- Pythonï¼Œè¡Œé¦–çš„ tab ç¬¦å’Œç©ºæ ¼ä¼šæ ¹æ®ä¸Šä¸€è¡Œçš„è¡Œé¦–ç©ºç™½ä»¥ä¸€å®šè§„åˆ™è¢«å¤„ç†æˆè™šæ‹Ÿç»ˆç»“ç¬¦ indent æˆ–è€… dedent \n- Javascriptï¼Œ/ å¯èƒ½æ˜¯é™¤å·ï¼Œä¹Ÿå¯èƒ½æ˜¯æ­£åˆ™è¡¨è¾¾å¼å¼€å¤´ï¼Œå¤„ç†æ–¹å¼ç±»ä¼¼äºVBï¼Œå­—ç¬¦ä¸²æ¨¡æ¿ä¸­ä¹Ÿéœ€è¦ç‰¹æ®Šå¤„ç†},è¿˜æœ‰è‡ªåŠ¨æ’å…¥åˆ†å·è§„åˆ™\n\t- åŒ VB / JSX\n\n## è¯­è¨€çš„åˆ†ç±»\n\n### å›¾çµå®Œå¤‡æ€§\n- å›¾çµæœºï¼ˆå‡¡æ˜¯å¯è®¡ç®—çš„ï¼Œéƒ½èƒ½è®¡ç®—å‡ºæ¥ï¼‰\n- å›¾çµå®Œå¤‡æ€§\n\t- å‘½ä»¤å¼ -- å›¾çµæœº\n\t\t- goto\n\t\t- if å’Œ while\n\t- å£°æ˜å¼ -- lambda\n\t\t- é€’å½’\n\n### åŠ¨æ€ä¸é™æ€\n- åŠ¨æ€ï¼š\n\t- åœ¨ç”¨æˆ·çš„è®¾å¤‡/åœ¨çº¿æœåŠ¡å™¨ä¸Š\n\t- äº§å“å®é™…è¿è¡Œæ—¶\n\t- Runtime\n- é™æ€\n\t- åœ¨ç¨‹åºå‘˜çš„è®¾å¤‡ä¸Š\n\t- äº§å“å¼€å‘æ—¶\n\t- Compiletime\n\t\n#### ç±»å‹ç³»ç»Ÿ In é™æ€è¯­è¨€\n- åŠ¨æ€ç±»å‹ç³»ç»Ÿå’Œé™æ€ç±»å‹ç³»ç»Ÿ\n\t- ä¸æ˜¯è¯´ Typescript æ‰æœ‰ç±»å‹ç³»ç»Ÿï¼Œè€Œæ˜¯å®ƒæ‰æœ‰é™æ€ç±»å‹ç³»ç»Ÿ\n- å¼ºç±»å‹å’Œå¼±ç±»å‹\n\t- String + Number\n\t\t- äº§ç”Ÿäº†éšå¼çš„ç±»å‹è½¬æ¢\n\t- String == Boolean\n\t- C++ æœ‰éšå¼è½¬æ¢ï¼Œå¼±ç±»å‹\n- å¤åˆç±»å‹\n\t- ç»“æ„ä½“\n\t- **å‡½æ•°ç­¾å**\n\t\t- å‚æ•°åˆ—è¡¨ + è¿”å›å€¼ç±»å‹\n- å­ç±»å‹\n\t- é€†å˜/åå˜\n\t\t- åå˜ --&gt; å‡¡æ˜¯èƒ½ç”¨åˆ°Array&lt;Parent&gt;çš„åœ°æ–¹ï¼Œéƒ½èƒ½ç”¨Array&lt;Child&gt;\n\t\t- é€†å˜ --&gt; å‡¡æ˜¯èƒ½ç”¨åˆ°Array&lt;Child&gt;çš„åœ°æ–¹ï¼Œéƒ½èƒ½ç”¨Array&lt;Parent&gt;\n\n## ä¸€èˆ¬å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€\n### Atom\n### Expression\n### Statement è¯­å¥\n### Structure\n### Program\n","source":"_posts/ç¼–ç¨‹è¯­è¨€é€šè¯†.md","raw":"---\ntitle: ç¼–ç¨‹è¯­è¨€é€šè¯†\ndate: 2020-04-20 11:18:20\ntags: \n- å‰ç«¯æ¦‚å¿µ\ncategories:\n- å‰ç«¯æ¦‚å¿µ\ndescription:\n- ç¼–ç¨‹è¯­è¨€é€šè¯†\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## è¯­è¨€æŒ‰è¯­æ³•åˆ†ç±»\n\n- éå½¢å¼è¯­è¨€\n\t- ä¸­æ–‡ã€è‹±æ–‡\n- å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰**è¿½æº¯**19ä¸–çºª50å¹´ä»£\n\t- 0å‹ æ— é™åˆ¶æ–‡æ³•\n\t- 1å‹ ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•\n\t- 2å‹ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•\n\t\t- å¤§éƒ¨åˆ†è®¡ç®—æœºè¯­è¨€ä¸»ä½“ä¸Šéƒ½æ˜¯ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•\n\t\t- æ¯”å¦‚Javascriptå°±æ˜¯ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ï¼Œä¼šåœ¨æŸäº›ç‚¹ï¼Œè¿åä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•åŸåˆ™ï¼ˆgetï¼‰\n\t- 3å‹ æ­£åˆ™æ–‡æ³•\n<!-- more -->\n\n## ç†è§£å½¢å¼è¯­è¨€\n### äº§ç”Ÿå¼ï¼ˆBNF -- Backus-Naur Formï¼‰\n- ç”¨å°–æ‹¬å·æ‹¬èµ·æ¥çš„åç§°æ¥è¡¨ç¤ºè¯­æ³•ç»“æ„å\n- è¯­æ³•ç»“æ„åˆ†æˆåŸºç¡€ç»“æ„å’Œéœ€è¦ç”¨å…¶ä»–è¯­æ³•ç»“æ„å®šä¹‰çš„å¤åˆç»“æ„\n\t- åŸºç¡€ç»“æ„ç§°ç»ˆç»“ç¬¦\n\t- å¤åˆç»“æ„ç§°éç»ˆç»“ç¬¦\n- å¼•å·å’Œä¸­é—´çš„å­—ç¬¦è¡¨ç¤ºç»ˆç»“ç¬¦\n- å¯ä»¥æœ‰æ‹¬å·\n- * è¡¨ç¤ºé‡å¤å¤šæ¬¡\n- | è¡¨ç¤ºæˆ–\n- + è¡¨ç¤ºè‡³å°‘ä¸€æ¬¡\n\n#### BNF è¡¨ç¤º å››åˆ™è¿ç®—\n- åŠ æ³•ï¼Œå…è®¸è¿åŠ \n\t- &lt;Number&gt;::= \"0\" | \"1\" | \"2\" | \"3\" | ... | \"9\"\n\t- &lt;DecimalNumber&gt;::= \"0\" | ((\"1\" | \"2\" | \"3\" | ... \"9\") &lt;Number&gt;*)\n\t- &lt;AddtiveExpression&gt;::= &lt;DecimalNumber&gt; \"+\" &lt;DecimalNumber&gt;\n\t- æ”¯æŒå¤šä¸ªè¿åŠ ï¼Œé‡‡ç”¨é€’å½’ï¼š\n\t\t- &lt;AddtiveExpression&gt;::= &lt;AddtiveExpression&gt; \"+\" &lt;DecimalNumber&gt;\n\t- æœ€ç»ˆï¼š\n\t\t- &lt;AddtiveExpression&gt;::= &lt;DecimalNumber&gt; | &lt;AddtiveExpression&gt; \"+\" &lt;DecimalNumber&gt;\n- ä¹˜æ³•\n\t- &lt;MultiplecativeExpression&gt;::= &lt;DecimalNumber&gt; | &lt; MultiplecativeExpression&gt; \"*\" &lt;DecimalNumber&gt;\n\t- 1 + 2 * 3\n\t\t- åŠ æ³•è¡¨è¾¾å¼ï¼Œæ˜¯ç”±ä¸¤ä¸ªä¹˜æ³•è¡¨è¾¾å¼åŠ èµ·æ¥çš„\n\t\t- 1 * 1 + 2 * 3\n\t\t- å› æ­¤**åŠ æ³•è¡¨ç¤ºæˆ**\n\t\t\t\n\t\t\t> &lt;AddtiveExpression&gt;::= &lt; MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; \"+\" &lt;DecimalNumber&gt;\n- LogicExpression\n\t\n\t> &lt;LogicExpression&gt;::= &lt;AddtiveExpression&gt; | \n\t\t&lt;LogicExpression&gt; \"||\" &lt;AddtiveExpression&gt; |\n\t\t&lt;LogicExpression&gt; \"&&\" &lt;AddtiveExpression&gt;\n- é™¤æ³•\n\t\n\t> &lt;MultiplecativeExpression&gt;::= &lt;DecimalNumber&gt; | &lt; MultiplecativeExpression&gt; \"/\" &lt;DecimalNumber&gt;\n- å‡æ³•\n\n\t> &lt;AddtiveExpression&gt;::= &lt;MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; \"-\" &lt;MultiplecativeExpression&gt;\n- å¸¦æ‹¬å·çš„å››åˆ™è¿ç®—\n\t- æ‹¬å·\n\t\n\t\t> &lt;PrimaryExpression&lt;::= &lt;DecimalNumber&lt; | \"(\" | &lt;LogicExpression&lt; | \")\"\n\t- ä¹˜æ³•è¡¨è¾¾å¼ä¾¿å¯ä»¥å˜æˆ\n\t\t\n\t\t> &lt;MultiplecativeExpression&gt;::= &lt;PrimaryExpression&gt; | &lt; MultiplecativeExpression&gt; \"*\" &lt; PrimaryExpression&gt;\n\t- é™¤æ³•ï¼ŒåŒç†ä¹˜æ³•ï¼Œæ¢ç¬¦å·\n\t\n\t\t> &lt;MultiplecativeExpression&gt;::= &lt;PrimaryExpression&gt; | &lt; MultiplecativeExpression&gt; \"/\" &lt; PrimaryExpression&gt;\n\t- åŠ å‡\n\t\t\n\t\t> &lt;AddtiveExpression&gt;::= &lt;MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; \"+\" &lt;MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; \"-\" &lt;MultiplecativeExpression&gt;\n\t\t\n#### é€šè¿‡ BNF ç†è§£å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰\n- 0å‹ æ— é™åˆ¶æ–‡æ³•\n\t- ?::=?\n- 1å‹ ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•\n\t- <span style=\"color: red\">?</span>&lt;A&gt;<span style=\"color:blue\">?</span>::=<span style=\"color: red\">?</span>&lt;B&gt;<span style=\"color:blue\">?</span>\n\n\t\n\t\t```javascript\n\t\t{\n\t\t  get a { return 1},\n\t\t  get: 1\n\t\t}\n\t\t```\n\t- 1ï¼‰ç±»ä¼¼å…³é”®å­—ï¼Œ 2ï¼‰get: å±æ€§\n- 2å‹ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•\n\t- &lt;A&gt;::=?\n\t- 2 ** 1 ** 2\n- 3å‹ æ­£åˆ™æ–‡æ³•ï¼Œåªå…è®¸å·¦é€’å½’ï¼ˆJavascriptåœ¨**å‡ºç°å‰ï¼Œä¸€ç›´éµå¾ªç€å·¦é€’å½’ï¼‰\n\t- &lt;A&gt;::=&lt;A&gt;?\n\t- &lt;A&gt;::=?&lt;A&gt;<span style=\"color: red\">x</span>\n\t- Javascript è¡¨è¾¾å¼å¤§éƒ¨åˆ†åœ¨3å‹\n\t- ** å³ç»“åˆ\n\t\n\t\t```javascript\n\t\t2 ** 2 --> 4\n\t\t2 ** (2 ** 3) --> 256\n\t\t```\n\t\t- **\n\t\t\n\t\t\t> &lt;ExpExpression&gt; = &lt;MulticativeExpression&gt; | &lt;MulticativeExpression&gt; \"**\" &lt;ExpExpression&gt;\n\n\t\n#### optional æ­£åˆ™è¡¨è¾¾å¼+ BNF è¡¨ç¤ºå››åˆ™è¿ç®—\n\n### å…¶ä»–äº§ç”Ÿå¼\n- EBNF ABNF Customized\n\t- ![ECMA-Script EBNF](http://p1.meituan.net/myvideodistribute/1d1c7542767173de3c87f7a9e00a445763429.png)\n\n### ç°ä»£è¯­è¨€è¯­è¨€çš„ç‰¹ä¾‹\n- C++ï¼Œ* å¯èƒ½è¡¨ç¤ºä¹˜å·æˆ–è€…æŒ‡é’ˆï¼Œå…·ä½“æ˜¯å“ªä¸ªï¼Œå–å†³äºæ˜Ÿå·å‰é¢çš„æ ‡è¯†ç¬¦æ˜¯å¦è¢«å£°æ˜ä¸ºç±»å‹\n\t- éå½¢å¼è¯è¯­è¨€ï¼Œè¯­æ³•ä¸è¯­ä¹‰ç›¸å…³ï¼Œ* å¯ä»¥åœ¨å¾ˆæ—©ä¹‹å‰å‡ºç°\n- VBä¸­ï¼Œ &lt; å¯èƒ½æ˜¯å°äºå·ï¼Œä¹Ÿå¯èƒ½æ˜¯ XML ç›´æ¥é‡çš„å¼€å§‹ï¼Œå–å†³äºå½“å‰ä½ç½®æ˜¯å¦å¯ä»¥æ¥å— XML ç›´æ¥é‡\n\t- 1å‹ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•\n- Pythonï¼Œè¡Œé¦–çš„ tab ç¬¦å’Œç©ºæ ¼ä¼šæ ¹æ®ä¸Šä¸€è¡Œçš„è¡Œé¦–ç©ºç™½ä»¥ä¸€å®šè§„åˆ™è¢«å¤„ç†æˆè™šæ‹Ÿç»ˆç»“ç¬¦ indent æˆ–è€… dedent \n- Javascriptï¼Œ/ å¯èƒ½æ˜¯é™¤å·ï¼Œä¹Ÿå¯èƒ½æ˜¯æ­£åˆ™è¡¨è¾¾å¼å¼€å¤´ï¼Œå¤„ç†æ–¹å¼ç±»ä¼¼äºVBï¼Œå­—ç¬¦ä¸²æ¨¡æ¿ä¸­ä¹Ÿéœ€è¦ç‰¹æ®Šå¤„ç†},è¿˜æœ‰è‡ªåŠ¨æ’å…¥åˆ†å·è§„åˆ™\n\t- åŒ VB / JSX\n\n## è¯­è¨€çš„åˆ†ç±»\n\n### å›¾çµå®Œå¤‡æ€§\n- å›¾çµæœºï¼ˆå‡¡æ˜¯å¯è®¡ç®—çš„ï¼Œéƒ½èƒ½è®¡ç®—å‡ºæ¥ï¼‰\n- å›¾çµå®Œå¤‡æ€§\n\t- å‘½ä»¤å¼ -- å›¾çµæœº\n\t\t- goto\n\t\t- if å’Œ while\n\t- å£°æ˜å¼ -- lambda\n\t\t- é€’å½’\n\n### åŠ¨æ€ä¸é™æ€\n- åŠ¨æ€ï¼š\n\t- åœ¨ç”¨æˆ·çš„è®¾å¤‡/åœ¨çº¿æœåŠ¡å™¨ä¸Š\n\t- äº§å“å®é™…è¿è¡Œæ—¶\n\t- Runtime\n- é™æ€\n\t- åœ¨ç¨‹åºå‘˜çš„è®¾å¤‡ä¸Š\n\t- äº§å“å¼€å‘æ—¶\n\t- Compiletime\n\t\n#### ç±»å‹ç³»ç»Ÿ In é™æ€è¯­è¨€\n- åŠ¨æ€ç±»å‹ç³»ç»Ÿå’Œé™æ€ç±»å‹ç³»ç»Ÿ\n\t- ä¸æ˜¯è¯´ Typescript æ‰æœ‰ç±»å‹ç³»ç»Ÿï¼Œè€Œæ˜¯å®ƒæ‰æœ‰é™æ€ç±»å‹ç³»ç»Ÿ\n- å¼ºç±»å‹å’Œå¼±ç±»å‹\n\t- String + Number\n\t\t- äº§ç”Ÿäº†éšå¼çš„ç±»å‹è½¬æ¢\n\t- String == Boolean\n\t- C++ æœ‰éšå¼è½¬æ¢ï¼Œå¼±ç±»å‹\n- å¤åˆç±»å‹\n\t- ç»“æ„ä½“\n\t- **å‡½æ•°ç­¾å**\n\t\t- å‚æ•°åˆ—è¡¨ + è¿”å›å€¼ç±»å‹\n- å­ç±»å‹\n\t- é€†å˜/åå˜\n\t\t- åå˜ --&gt; å‡¡æ˜¯èƒ½ç”¨åˆ°Array&lt;Parent&gt;çš„åœ°æ–¹ï¼Œéƒ½èƒ½ç”¨Array&lt;Child&gt;\n\t\t- é€†å˜ --&gt; å‡¡æ˜¯èƒ½ç”¨åˆ°Array&lt;Child&gt;çš„åœ°æ–¹ï¼Œéƒ½èƒ½ç”¨Array&lt;Parent&gt;\n\n## ä¸€èˆ¬å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€\n### Atom\n### Expression\n### Statement è¯­å¥\n### Structure\n### Program\n","slug":"ç¼–ç¨‹è¯­è¨€é€šè¯†","published":1,"updated":"2020-10-27T15:21:11.267Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u8g003ffw9k6q7fekvh","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"è¯­è¨€æŒ‰è¯­æ³•åˆ†ç±»\"><a href=\"#è¯­è¨€æŒ‰è¯­æ³•åˆ†ç±»\" class=\"headerlink\" title=\"è¯­è¨€æŒ‰è¯­æ³•åˆ†ç±»\"></a>è¯­è¨€æŒ‰è¯­æ³•åˆ†ç±»</h2><ul>\n<li>éå½¢å¼è¯­è¨€<ul>\n<li>ä¸­æ–‡ã€è‹±æ–‡</li>\n</ul>\n</li>\n<li>å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰<strong>è¿½æº¯</strong>19ä¸–çºª50å¹´ä»£<ul>\n<li>0å‹ æ— é™åˆ¶æ–‡æ³•</li>\n<li>1å‹ ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•</li>\n<li>2å‹ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•<ul>\n<li>å¤§éƒ¨åˆ†è®¡ç®—æœºè¯­è¨€ä¸»ä½“ä¸Šéƒ½æ˜¯ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•</li>\n<li>æ¯”å¦‚Javascriptå°±æ˜¯ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ï¼Œä¼šåœ¨æŸäº›ç‚¹ï¼Œè¿åä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•åŸåˆ™ï¼ˆgetï¼‰</li>\n</ul>\n</li>\n<li>3å‹ æ­£åˆ™æ–‡æ³•<a id=\"more\"></a>\n\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ç†è§£å½¢å¼è¯­è¨€\"><a href=\"#ç†è§£å½¢å¼è¯­è¨€\" class=\"headerlink\" title=\"ç†è§£å½¢å¼è¯­è¨€\"></a>ç†è§£å½¢å¼è¯­è¨€</h2><h3 id=\"äº§ç”Ÿå¼ï¼ˆBNF-â€“-Backus-Naur-Formï¼‰\"><a href=\"#äº§ç”Ÿå¼ï¼ˆBNF-â€“-Backus-Naur-Formï¼‰\" class=\"headerlink\" title=\"äº§ç”Ÿå¼ï¼ˆBNF â€“ Backus-Naur Formï¼‰\"></a>äº§ç”Ÿå¼ï¼ˆBNF â€“ Backus-Naur Formï¼‰</h3><ul>\n<li>ç”¨å°–æ‹¬å·æ‹¬èµ·æ¥çš„åç§°æ¥è¡¨ç¤ºè¯­æ³•ç»“æ„å</li>\n<li>è¯­æ³•ç»“æ„åˆ†æˆåŸºç¡€ç»“æ„å’Œéœ€è¦ç”¨å…¶ä»–è¯­æ³•ç»“æ„å®šä¹‰çš„å¤åˆç»“æ„<ul>\n<li>åŸºç¡€ç»“æ„ç§°ç»ˆç»“ç¬¦</li>\n<li>å¤åˆç»“æ„ç§°éç»ˆç»“ç¬¦</li>\n</ul>\n</li>\n<li>å¼•å·å’Œä¸­é—´çš„å­—ç¬¦è¡¨ç¤ºç»ˆç»“ç¬¦</li>\n<li>å¯ä»¥æœ‰æ‹¬å·</li>\n<li><ul>\n<li>è¡¨ç¤ºé‡å¤å¤šæ¬¡</li>\n</ul>\n</li>\n<li>| è¡¨ç¤ºæˆ–</li>\n<li><ul>\n<li>è¡¨ç¤ºè‡³å°‘ä¸€æ¬¡</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"BNF-è¡¨ç¤º-å››åˆ™è¿ç®—\"><a href=\"#BNF-è¡¨ç¤º-å››åˆ™è¿ç®—\" class=\"headerlink\" title=\"BNF è¡¨ç¤º å››åˆ™è¿ç®—\"></a>BNF è¡¨ç¤º å››åˆ™è¿ç®—</h4><ul>\n<li><p>åŠ æ³•ï¼Œå…è®¸è¿åŠ </p>\n<ul>\n<li>&lt;Number&gt;::= â€œ0â€ | â€œ1â€ | â€œ2â€ | â€œ3â€ | â€¦ | â€œ9â€</li>\n<li>&lt;DecimalNumber&gt;::= â€œ0â€ | ((â€œ1â€ | â€œ2â€ | â€œ3â€ | â€¦ â€œ9â€) &lt;Number&gt;*)</li>\n<li>&lt;AddtiveExpression&gt;::= &lt;DecimalNumber&gt; â€œ+â€ &lt;DecimalNumber&gt;</li>\n<li>æ”¯æŒå¤šä¸ªè¿åŠ ï¼Œé‡‡ç”¨é€’å½’ï¼š<ul>\n<li>&lt;AddtiveExpression&gt;::= &lt;AddtiveExpression&gt; â€œ+â€ &lt;DecimalNumber&gt;</li>\n</ul>\n</li>\n<li>æœ€ç»ˆï¼š<ul>\n<li>&lt;AddtiveExpression&gt;::= &lt;DecimalNumber&gt; | &lt;AddtiveExpression&gt; â€œ+â€ &lt;DecimalNumber&gt;</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ä¹˜æ³•</p>\n<ul>\n<li><p>&lt;MultiplecativeExpression&gt;::= &lt;DecimalNumber&gt; | &lt; MultiplecativeExpression&gt; â€œ*â€ &lt;DecimalNumber&gt;</p>\n</li>\n<li><p>1 + 2 * 3</p>\n<ul>\n<li><p>åŠ æ³•è¡¨è¾¾å¼ï¼Œæ˜¯ç”±ä¸¤ä¸ªä¹˜æ³•è¡¨è¾¾å¼åŠ èµ·æ¥çš„</p>\n</li>\n<li><p>1 * 1 + 2 * 3</p>\n</li>\n<li><p>å› æ­¤<strong>åŠ æ³•è¡¨ç¤ºæˆ</strong></p>\n<blockquote>\n<p>&lt;AddtiveExpression&gt;::= &lt; MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; â€œ+â€ &lt;DecimalNumber&gt;</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>LogicExpression</p>\n<blockquote>\n<p>&lt;LogicExpression&gt;::= &lt;AddtiveExpression&gt; | </p>\n<pre><code>&amp;lt;LogicExpression&amp;gt; &quot;||&quot; &amp;lt;AddtiveExpression&amp;gt; |\n&amp;lt;LogicExpression&amp;gt; &quot;&amp;&amp;&quot; &amp;lt;AddtiveExpression&amp;gt;</code></pre></blockquote>\n</li>\n<li><p>é™¤æ³•</p>\n<blockquote>\n<p>&lt;MultiplecativeExpression&gt;::= &lt;DecimalNumber&gt; | &lt; MultiplecativeExpression&gt; â€œ/â€œ &lt;DecimalNumber&gt;</p>\n</blockquote>\n</li>\n<li><p>å‡æ³•</p>\n<blockquote>\n<p>&lt;AddtiveExpression&gt;::= &lt;MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; â€œ-â€œ &lt;MultiplecativeExpression&gt;</p>\n</blockquote>\n</li>\n<li><p>å¸¦æ‹¬å·çš„å››åˆ™è¿ç®—</p>\n<ul>\n<li><p>æ‹¬å·</p>\n<blockquote>\n<p>&lt;PrimaryExpression&lt;::= &lt;DecimalNumber&lt; | â€œ(â€œ | &lt;LogicExpression&lt; | â€œ)â€</p>\n</blockquote>\n</li>\n<li><p>ä¹˜æ³•è¡¨è¾¾å¼ä¾¿å¯ä»¥å˜æˆ</p>\n<blockquote>\n<p>&lt;MultiplecativeExpression&gt;::= &lt;PrimaryExpression&gt; | &lt; MultiplecativeExpression&gt; â€œ*â€ &lt; PrimaryExpression&gt;</p>\n</blockquote>\n</li>\n<li><p>é™¤æ³•ï¼ŒåŒç†ä¹˜æ³•ï¼Œæ¢ç¬¦å·</p>\n<blockquote>\n<p>&lt;MultiplecativeExpression&gt;::= &lt;PrimaryExpression&gt; | &lt; MultiplecativeExpression&gt; â€œ/â€œ &lt; PrimaryExpression&gt;</p>\n</blockquote>\n</li>\n<li><p>åŠ å‡</p>\n<blockquote>\n<p>&lt;AddtiveExpression&gt;::= &lt;MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; â€œ+â€ &lt;MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; â€œ-â€œ &lt;MultiplecativeExpression&gt;</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"é€šè¿‡-BNF-ç†è§£å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰\"><a href=\"#é€šè¿‡-BNF-ç†è§£å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰\" class=\"headerlink\" title=\"é€šè¿‡ BNF ç†è§£å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰\"></a>é€šè¿‡ BNF ç†è§£å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰</h4><ul>\n<li>0å‹ æ— é™åˆ¶æ–‡æ³•<ul>\n<li>?::=?</li>\n</ul>\n</li>\n<li>1å‹ ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•<ul>\n<li><span style=\"color: red\">?</span>&lt;A&gt;<span style=\"color:blue\">?</span>::=<span style=\"color: red\">?</span>&lt;B&gt;<span style=\"color:blue\">?</span></li>\n</ul>\n</li>\n</ul>\n<pre><code>    <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"keyword\">get</span> a &#123; <span class=\"keyword\">return</span> <span class=\"number\">1</span>&#125;,</span><br><span class=\"line\">  <span class=\"keyword\">get</span>: 1</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n- 1ï¼‰ç±»ä¼¼å…³é”®å­—ï¼Œ 2ï¼‰get: å±æ€§</code></pre><ul>\n<li><p>2å‹ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•</p>\n<ul>\n<li>&lt;A&gt;::=?</li>\n<li>2 ** 1 ** 2</li>\n</ul>\n</li>\n<li><p>3å‹ æ­£åˆ™æ–‡æ³•ï¼Œåªå…è®¸å·¦é€’å½’ï¼ˆJavascriptåœ¨**å‡ºç°å‰ï¼Œä¸€ç›´éµå¾ªç€å·¦é€’å½’ï¼‰</p>\n<ul>\n<li><p>&lt;A&gt;::=&lt;A&gt;?</p>\n</li>\n<li><p>&lt;A&gt;::=?&lt;A&gt;<span style=\"color: red\">x</span></p>\n</li>\n<li><p>Javascript è¡¨è¾¾å¼å¤§éƒ¨åˆ†åœ¨3å‹</p>\n</li>\n<li><p>** å³ç»“åˆ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">2</span> ** <span class=\"number\">2</span> --&gt; <span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"number\">2</span> ** (<span class=\"number\">2</span> ** <span class=\"number\">3</span>) --&gt; <span class=\"number\">256</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>**</p>\n<blockquote>\n<p>&lt;ExpExpression&gt; = &lt;MulticativeExpression&gt; | &lt;MulticativeExpression&gt; â€œ**â€ &lt;ExpExpression&gt;</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"optional-æ­£åˆ™è¡¨è¾¾å¼-BNF-è¡¨ç¤ºå››åˆ™è¿ç®—\"><a href=\"#optional-æ­£åˆ™è¡¨è¾¾å¼-BNF-è¡¨ç¤ºå››åˆ™è¿ç®—\" class=\"headerlink\" title=\"optional æ­£åˆ™è¡¨è¾¾å¼+ BNF è¡¨ç¤ºå››åˆ™è¿ç®—\"></a>optional æ­£åˆ™è¡¨è¾¾å¼+ BNF è¡¨ç¤ºå››åˆ™è¿ç®—</h4><h3 id=\"å…¶ä»–äº§ç”Ÿå¼\"><a href=\"#å…¶ä»–äº§ç”Ÿå¼\" class=\"headerlink\" title=\"å…¶ä»–äº§ç”Ÿå¼\"></a>å…¶ä»–äº§ç”Ÿå¼</h3><ul>\n<li>EBNF ABNF Customized<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/1d1c7542767173de3c87f7a9e00a445763429.png\" alt=\"ECMA-Script EBNF\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç°ä»£è¯­è¨€è¯­è¨€çš„ç‰¹ä¾‹\"><a href=\"#ç°ä»£è¯­è¨€è¯­è¨€çš„ç‰¹ä¾‹\" class=\"headerlink\" title=\"ç°ä»£è¯­è¨€è¯­è¨€çš„ç‰¹ä¾‹\"></a>ç°ä»£è¯­è¨€è¯­è¨€çš„ç‰¹ä¾‹</h3><ul>\n<li>C++ï¼Œ* å¯èƒ½è¡¨ç¤ºä¹˜å·æˆ–è€…æŒ‡é’ˆï¼Œå…·ä½“æ˜¯å“ªä¸ªï¼Œå–å†³äºæ˜Ÿå·å‰é¢çš„æ ‡è¯†ç¬¦æ˜¯å¦è¢«å£°æ˜ä¸ºç±»å‹<ul>\n<li>éå½¢å¼è¯è¯­è¨€ï¼Œè¯­æ³•ä¸è¯­ä¹‰ç›¸å…³ï¼Œ* å¯ä»¥åœ¨å¾ˆæ—©ä¹‹å‰å‡ºç°</li>\n</ul>\n</li>\n<li>VBä¸­ï¼Œ &lt; å¯èƒ½æ˜¯å°äºå·ï¼Œä¹Ÿå¯èƒ½æ˜¯ XML ç›´æ¥é‡çš„å¼€å§‹ï¼Œå–å†³äºå½“å‰ä½ç½®æ˜¯å¦å¯ä»¥æ¥å— XML ç›´æ¥é‡<ul>\n<li>1å‹ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•</li>\n</ul>\n</li>\n<li>Pythonï¼Œè¡Œé¦–çš„ tab ç¬¦å’Œç©ºæ ¼ä¼šæ ¹æ®ä¸Šä¸€è¡Œçš„è¡Œé¦–ç©ºç™½ä»¥ä¸€å®šè§„åˆ™è¢«å¤„ç†æˆè™šæ‹Ÿç»ˆç»“ç¬¦ indent æˆ–è€… dedent </li>\n<li>Javascriptï¼Œ/ å¯èƒ½æ˜¯é™¤å·ï¼Œä¹Ÿå¯èƒ½æ˜¯æ­£åˆ™è¡¨è¾¾å¼å¼€å¤´ï¼Œå¤„ç†æ–¹å¼ç±»ä¼¼äºVBï¼Œå­—ç¬¦ä¸²æ¨¡æ¿ä¸­ä¹Ÿéœ€è¦ç‰¹æ®Šå¤„ç†},è¿˜æœ‰è‡ªåŠ¨æ’å…¥åˆ†å·è§„åˆ™<ul>\n<li>åŒ VB / JSX</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"è¯­è¨€çš„åˆ†ç±»\"><a href=\"#è¯­è¨€çš„åˆ†ç±»\" class=\"headerlink\" title=\"è¯­è¨€çš„åˆ†ç±»\"></a>è¯­è¨€çš„åˆ†ç±»</h2><h3 id=\"å›¾çµå®Œå¤‡æ€§\"><a href=\"#å›¾çµå®Œå¤‡æ€§\" class=\"headerlink\" title=\"å›¾çµå®Œå¤‡æ€§\"></a>å›¾çµå®Œå¤‡æ€§</h3><ul>\n<li>å›¾çµæœºï¼ˆå‡¡æ˜¯å¯è®¡ç®—çš„ï¼Œéƒ½èƒ½è®¡ç®—å‡ºæ¥ï¼‰</li>\n<li>å›¾çµå®Œå¤‡æ€§<ul>\n<li>å‘½ä»¤å¼ â€“ å›¾çµæœº<ul>\n<li>goto</li>\n<li>if å’Œ while</li>\n</ul>\n</li>\n<li>å£°æ˜å¼ â€“ lambda<ul>\n<li>é€’å½’</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"åŠ¨æ€ä¸é™æ€\"><a href=\"#åŠ¨æ€ä¸é™æ€\" class=\"headerlink\" title=\"åŠ¨æ€ä¸é™æ€\"></a>åŠ¨æ€ä¸é™æ€</h3><ul>\n<li>åŠ¨æ€ï¼š<ul>\n<li>åœ¨ç”¨æˆ·çš„è®¾å¤‡/åœ¨çº¿æœåŠ¡å™¨ä¸Š</li>\n<li>äº§å“å®é™…è¿è¡Œæ—¶</li>\n<li>Runtime</li>\n</ul>\n</li>\n<li>é™æ€<ul>\n<li>åœ¨ç¨‹åºå‘˜çš„è®¾å¤‡ä¸Š</li>\n<li>äº§å“å¼€å‘æ—¶</li>\n<li>Compiletime</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ç±»å‹ç³»ç»Ÿ-In-é™æ€è¯­è¨€\"><a href=\"#ç±»å‹ç³»ç»Ÿ-In-é™æ€è¯­è¨€\" class=\"headerlink\" title=\"ç±»å‹ç³»ç»Ÿ In é™æ€è¯­è¨€\"></a>ç±»å‹ç³»ç»Ÿ In é™æ€è¯­è¨€</h4><ul>\n<li>åŠ¨æ€ç±»å‹ç³»ç»Ÿå’Œé™æ€ç±»å‹ç³»ç»Ÿ<ul>\n<li>ä¸æ˜¯è¯´ Typescript æ‰æœ‰ç±»å‹ç³»ç»Ÿï¼Œè€Œæ˜¯å®ƒæ‰æœ‰é™æ€ç±»å‹ç³»ç»Ÿ</li>\n</ul>\n</li>\n<li>å¼ºç±»å‹å’Œå¼±ç±»å‹<ul>\n<li>String + Number<ul>\n<li>äº§ç”Ÿäº†éšå¼çš„ç±»å‹è½¬æ¢</li>\n</ul>\n</li>\n<li>String == Boolean</li>\n<li>C++ æœ‰éšå¼è½¬æ¢ï¼Œå¼±ç±»å‹</li>\n</ul>\n</li>\n<li>å¤åˆç±»å‹<ul>\n<li>ç»“æ„ä½“</li>\n<li><strong>å‡½æ•°ç­¾å</strong><ul>\n<li>å‚æ•°åˆ—è¡¨ + è¿”å›å€¼ç±»å‹</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å­ç±»å‹<ul>\n<li>é€†å˜/åå˜<ul>\n<li>åå˜ â€“&gt; å‡¡æ˜¯èƒ½ç”¨åˆ°Array&lt;Parent&gt;çš„åœ°æ–¹ï¼Œéƒ½èƒ½ç”¨Array&lt;Child&gt;</li>\n<li>é€†å˜ â€“&gt; å‡¡æ˜¯èƒ½ç”¨åˆ°Array&lt;Child&gt;çš„åœ°æ–¹ï¼Œéƒ½èƒ½ç”¨Array&lt;Parent&gt;</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ä¸€èˆ¬å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€\"><a href=\"#ä¸€èˆ¬å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€\" class=\"headerlink\" title=\"ä¸€èˆ¬å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€\"></a>ä¸€èˆ¬å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€</h2><h3 id=\"Atom\"><a href=\"#Atom\" class=\"headerlink\" title=\"Atom\"></a>Atom</h3><h3 id=\"Expression\"><a href=\"#Expression\" class=\"headerlink\" title=\"Expression\"></a>Expression</h3><h3 id=\"Statement-è¯­å¥\"><a href=\"#Statement-è¯­å¥\" class=\"headerlink\" title=\"Statement è¯­å¥\"></a>Statement è¯­å¥</h3><h3 id=\"Structure\"><a href=\"#Structure\" class=\"headerlink\" title=\"Structure\"></a>Structure</h3><h3 id=\"Program\"><a href=\"#Program\" class=\"headerlink\" title=\"Program\"></a>Program</h3>","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"è¯­è¨€æŒ‰è¯­æ³•åˆ†ç±»\"><a href=\"#è¯­è¨€æŒ‰è¯­æ³•åˆ†ç±»\" class=\"headerlink\" title=\"è¯­è¨€æŒ‰è¯­æ³•åˆ†ç±»\"></a>è¯­è¨€æŒ‰è¯­æ³•åˆ†ç±»</h2><ul>\n<li>éå½¢å¼è¯­è¨€<ul>\n<li>ä¸­æ–‡ã€è‹±æ–‡</li>\n</ul>\n</li>\n<li>å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰<strong>è¿½æº¯</strong>19ä¸–çºª50å¹´ä»£<ul>\n<li>0å‹ æ— é™åˆ¶æ–‡æ³•</li>\n<li>1å‹ ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•</li>\n<li>2å‹ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•<ul>\n<li>å¤§éƒ¨åˆ†è®¡ç®—æœºè¯­è¨€ä¸»ä½“ä¸Šéƒ½æ˜¯ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•</li>\n<li>æ¯”å¦‚Javascriptå°±æ˜¯ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ï¼Œä¼šåœ¨æŸäº›ç‚¹ï¼Œè¿åä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•åŸåˆ™ï¼ˆgetï¼‰</li>\n</ul>\n</li>\n<li>3å‹ æ­£åˆ™æ–‡æ³•","more":"</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ç†è§£å½¢å¼è¯­è¨€\"><a href=\"#ç†è§£å½¢å¼è¯­è¨€\" class=\"headerlink\" title=\"ç†è§£å½¢å¼è¯­è¨€\"></a>ç†è§£å½¢å¼è¯­è¨€</h2><h3 id=\"äº§ç”Ÿå¼ï¼ˆBNF-â€“-Backus-Naur-Formï¼‰\"><a href=\"#äº§ç”Ÿå¼ï¼ˆBNF-â€“-Backus-Naur-Formï¼‰\" class=\"headerlink\" title=\"äº§ç”Ÿå¼ï¼ˆBNF â€“ Backus-Naur Formï¼‰\"></a>äº§ç”Ÿå¼ï¼ˆBNF â€“ Backus-Naur Formï¼‰</h3><ul>\n<li>ç”¨å°–æ‹¬å·æ‹¬èµ·æ¥çš„åç§°æ¥è¡¨ç¤ºè¯­æ³•ç»“æ„å</li>\n<li>è¯­æ³•ç»“æ„åˆ†æˆåŸºç¡€ç»“æ„å’Œéœ€è¦ç”¨å…¶ä»–è¯­æ³•ç»“æ„å®šä¹‰çš„å¤åˆç»“æ„<ul>\n<li>åŸºç¡€ç»“æ„ç§°ç»ˆç»“ç¬¦</li>\n<li>å¤åˆç»“æ„ç§°éç»ˆç»“ç¬¦</li>\n</ul>\n</li>\n<li>å¼•å·å’Œä¸­é—´çš„å­—ç¬¦è¡¨ç¤ºç»ˆç»“ç¬¦</li>\n<li>å¯ä»¥æœ‰æ‹¬å·</li>\n<li><ul>\n<li>è¡¨ç¤ºé‡å¤å¤šæ¬¡</li>\n</ul>\n</li>\n<li>| è¡¨ç¤ºæˆ–</li>\n<li><ul>\n<li>è¡¨ç¤ºè‡³å°‘ä¸€æ¬¡</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"BNF-è¡¨ç¤º-å››åˆ™è¿ç®—\"><a href=\"#BNF-è¡¨ç¤º-å››åˆ™è¿ç®—\" class=\"headerlink\" title=\"BNF è¡¨ç¤º å››åˆ™è¿ç®—\"></a>BNF è¡¨ç¤º å››åˆ™è¿ç®—</h4><ul>\n<li><p>åŠ æ³•ï¼Œå…è®¸è¿åŠ </p>\n<ul>\n<li>&lt;Number&gt;::= â€œ0â€ | â€œ1â€ | â€œ2â€ | â€œ3â€ | â€¦ | â€œ9â€</li>\n<li>&lt;DecimalNumber&gt;::= â€œ0â€ | ((â€œ1â€ | â€œ2â€ | â€œ3â€ | â€¦ â€œ9â€) &lt;Number&gt;*)</li>\n<li>&lt;AddtiveExpression&gt;::= &lt;DecimalNumber&gt; â€œ+â€ &lt;DecimalNumber&gt;</li>\n<li>æ”¯æŒå¤šä¸ªè¿åŠ ï¼Œé‡‡ç”¨é€’å½’ï¼š<ul>\n<li>&lt;AddtiveExpression&gt;::= &lt;AddtiveExpression&gt; â€œ+â€ &lt;DecimalNumber&gt;</li>\n</ul>\n</li>\n<li>æœ€ç»ˆï¼š<ul>\n<li>&lt;AddtiveExpression&gt;::= &lt;DecimalNumber&gt; | &lt;AddtiveExpression&gt; â€œ+â€ &lt;DecimalNumber&gt;</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ä¹˜æ³•</p>\n<ul>\n<li><p>&lt;MultiplecativeExpression&gt;::= &lt;DecimalNumber&gt; | &lt; MultiplecativeExpression&gt; â€œ*â€ &lt;DecimalNumber&gt;</p>\n</li>\n<li><p>1 + 2 * 3</p>\n<ul>\n<li><p>åŠ æ³•è¡¨è¾¾å¼ï¼Œæ˜¯ç”±ä¸¤ä¸ªä¹˜æ³•è¡¨è¾¾å¼åŠ èµ·æ¥çš„</p>\n</li>\n<li><p>1 * 1 + 2 * 3</p>\n</li>\n<li><p>å› æ­¤<strong>åŠ æ³•è¡¨ç¤ºæˆ</strong></p>\n<blockquote>\n<p>&lt;AddtiveExpression&gt;::= &lt; MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; â€œ+â€ &lt;DecimalNumber&gt;</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>LogicExpression</p>\n<blockquote>\n<p>&lt;LogicExpression&gt;::= &lt;AddtiveExpression&gt; | </p>\n<pre><code>&amp;lt;LogicExpression&amp;gt; &quot;||&quot; &amp;lt;AddtiveExpression&amp;gt; |\n&amp;lt;LogicExpression&amp;gt; &quot;&amp;&amp;&quot; &amp;lt;AddtiveExpression&amp;gt;</code></pre></blockquote>\n</li>\n<li><p>é™¤æ³•</p>\n<blockquote>\n<p>&lt;MultiplecativeExpression&gt;::= &lt;DecimalNumber&gt; | &lt; MultiplecativeExpression&gt; â€œ/â€œ &lt;DecimalNumber&gt;</p>\n</blockquote>\n</li>\n<li><p>å‡æ³•</p>\n<blockquote>\n<p>&lt;AddtiveExpression&gt;::= &lt;MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; â€œ-â€œ &lt;MultiplecativeExpression&gt;</p>\n</blockquote>\n</li>\n<li><p>å¸¦æ‹¬å·çš„å››åˆ™è¿ç®—</p>\n<ul>\n<li><p>æ‹¬å·</p>\n<blockquote>\n<p>&lt;PrimaryExpression&lt;::= &lt;DecimalNumber&lt; | â€œ(â€œ | &lt;LogicExpression&lt; | â€œ)â€</p>\n</blockquote>\n</li>\n<li><p>ä¹˜æ³•è¡¨è¾¾å¼ä¾¿å¯ä»¥å˜æˆ</p>\n<blockquote>\n<p>&lt;MultiplecativeExpression&gt;::= &lt;PrimaryExpression&gt; | &lt; MultiplecativeExpression&gt; â€œ*â€ &lt; PrimaryExpression&gt;</p>\n</blockquote>\n</li>\n<li><p>é™¤æ³•ï¼ŒåŒç†ä¹˜æ³•ï¼Œæ¢ç¬¦å·</p>\n<blockquote>\n<p>&lt;MultiplecativeExpression&gt;::= &lt;PrimaryExpression&gt; | &lt; MultiplecativeExpression&gt; â€œ/â€œ &lt; PrimaryExpression&gt;</p>\n</blockquote>\n</li>\n<li><p>åŠ å‡</p>\n<blockquote>\n<p>&lt;AddtiveExpression&gt;::= &lt;MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; â€œ+â€ &lt;MultiplecativeExpression&gt; | &lt; AddtiveExpression&gt; â€œ-â€œ &lt;MultiplecativeExpression&gt;</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"é€šè¿‡-BNF-ç†è§£å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰\"><a href=\"#é€šè¿‡-BNF-ç†è§£å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰\" class=\"headerlink\" title=\"é€šè¿‡ BNF ç†è§£å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰\"></a>é€šè¿‡ BNF ç†è§£å½¢å¼è¯­è¨€ï¼ˆä¹”å§†æ–¯åŸºè°±ç³»ï¼‰</h4><ul>\n<li>0å‹ æ— é™åˆ¶æ–‡æ³•<ul>\n<li>?::=?</li>\n</ul>\n</li>\n<li>1å‹ ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•<ul>\n<li><span style=\"color: red\">?</span>&lt;A&gt;<span style=\"color:blue\">?</span>::=<span style=\"color: red\">?</span>&lt;B&gt;<span style=\"color:blue\">?</span></li>\n</ul>\n</li>\n</ul>\n<pre><code>    <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"keyword\">get</span> a &#123; <span class=\"keyword\">return</span> <span class=\"number\">1</span>&#125;,</span><br><span class=\"line\">  <span class=\"keyword\">get</span>: 1</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n- 1ï¼‰ç±»ä¼¼å…³é”®å­—ï¼Œ 2ï¼‰get: å±æ€§</code></pre><ul>\n<li><p>2å‹ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•</p>\n<ul>\n<li>&lt;A&gt;::=?</li>\n<li>2 ** 1 ** 2</li>\n</ul>\n</li>\n<li><p>3å‹ æ­£åˆ™æ–‡æ³•ï¼Œåªå…è®¸å·¦é€’å½’ï¼ˆJavascriptåœ¨**å‡ºç°å‰ï¼Œä¸€ç›´éµå¾ªç€å·¦é€’å½’ï¼‰</p>\n<ul>\n<li><p>&lt;A&gt;::=&lt;A&gt;?</p>\n</li>\n<li><p>&lt;A&gt;::=?&lt;A&gt;<span style=\"color: red\">x</span></p>\n</li>\n<li><p>Javascript è¡¨è¾¾å¼å¤§éƒ¨åˆ†åœ¨3å‹</p>\n</li>\n<li><p>** å³ç»“åˆ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">2</span> ** <span class=\"number\">2</span> --&gt; <span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"number\">2</span> ** (<span class=\"number\">2</span> ** <span class=\"number\">3</span>) --&gt; <span class=\"number\">256</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>**</p>\n<blockquote>\n<p>&lt;ExpExpression&gt; = &lt;MulticativeExpression&gt; | &lt;MulticativeExpression&gt; â€œ**â€ &lt;ExpExpression&gt;</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"optional-æ­£åˆ™è¡¨è¾¾å¼-BNF-è¡¨ç¤ºå››åˆ™è¿ç®—\"><a href=\"#optional-æ­£åˆ™è¡¨è¾¾å¼-BNF-è¡¨ç¤ºå››åˆ™è¿ç®—\" class=\"headerlink\" title=\"optional æ­£åˆ™è¡¨è¾¾å¼+ BNF è¡¨ç¤ºå››åˆ™è¿ç®—\"></a>optional æ­£åˆ™è¡¨è¾¾å¼+ BNF è¡¨ç¤ºå››åˆ™è¿ç®—</h4><h3 id=\"å…¶ä»–äº§ç”Ÿå¼\"><a href=\"#å…¶ä»–äº§ç”Ÿå¼\" class=\"headerlink\" title=\"å…¶ä»–äº§ç”Ÿå¼\"></a>å…¶ä»–äº§ç”Ÿå¼</h3><ul>\n<li>EBNF ABNF Customized<ul>\n<li><img src=\"http://p1.meituan.net/myvideodistribute/1d1c7542767173de3c87f7a9e00a445763429.png\" alt=\"ECMA-Script EBNF\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç°ä»£è¯­è¨€è¯­è¨€çš„ç‰¹ä¾‹\"><a href=\"#ç°ä»£è¯­è¨€è¯­è¨€çš„ç‰¹ä¾‹\" class=\"headerlink\" title=\"ç°ä»£è¯­è¨€è¯­è¨€çš„ç‰¹ä¾‹\"></a>ç°ä»£è¯­è¨€è¯­è¨€çš„ç‰¹ä¾‹</h3><ul>\n<li>C++ï¼Œ* å¯èƒ½è¡¨ç¤ºä¹˜å·æˆ–è€…æŒ‡é’ˆï¼Œå…·ä½“æ˜¯å“ªä¸ªï¼Œå–å†³äºæ˜Ÿå·å‰é¢çš„æ ‡è¯†ç¬¦æ˜¯å¦è¢«å£°æ˜ä¸ºç±»å‹<ul>\n<li>éå½¢å¼è¯è¯­è¨€ï¼Œè¯­æ³•ä¸è¯­ä¹‰ç›¸å…³ï¼Œ* å¯ä»¥åœ¨å¾ˆæ—©ä¹‹å‰å‡ºç°</li>\n</ul>\n</li>\n<li>VBä¸­ï¼Œ &lt; å¯èƒ½æ˜¯å°äºå·ï¼Œä¹Ÿå¯èƒ½æ˜¯ XML ç›´æ¥é‡çš„å¼€å§‹ï¼Œå–å†³äºå½“å‰ä½ç½®æ˜¯å¦å¯ä»¥æ¥å— XML ç›´æ¥é‡<ul>\n<li>1å‹ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•</li>\n</ul>\n</li>\n<li>Pythonï¼Œè¡Œé¦–çš„ tab ç¬¦å’Œç©ºæ ¼ä¼šæ ¹æ®ä¸Šä¸€è¡Œçš„è¡Œé¦–ç©ºç™½ä»¥ä¸€å®šè§„åˆ™è¢«å¤„ç†æˆè™šæ‹Ÿç»ˆç»“ç¬¦ indent æˆ–è€… dedent </li>\n<li>Javascriptï¼Œ/ å¯èƒ½æ˜¯é™¤å·ï¼Œä¹Ÿå¯èƒ½æ˜¯æ­£åˆ™è¡¨è¾¾å¼å¼€å¤´ï¼Œå¤„ç†æ–¹å¼ç±»ä¼¼äºVBï¼Œå­—ç¬¦ä¸²æ¨¡æ¿ä¸­ä¹Ÿéœ€è¦ç‰¹æ®Šå¤„ç†},è¿˜æœ‰è‡ªåŠ¨æ’å…¥åˆ†å·è§„åˆ™<ul>\n<li>åŒ VB / JSX</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"è¯­è¨€çš„åˆ†ç±»\"><a href=\"#è¯­è¨€çš„åˆ†ç±»\" class=\"headerlink\" title=\"è¯­è¨€çš„åˆ†ç±»\"></a>è¯­è¨€çš„åˆ†ç±»</h2><h3 id=\"å›¾çµå®Œå¤‡æ€§\"><a href=\"#å›¾çµå®Œå¤‡æ€§\" class=\"headerlink\" title=\"å›¾çµå®Œå¤‡æ€§\"></a>å›¾çµå®Œå¤‡æ€§</h3><ul>\n<li>å›¾çµæœºï¼ˆå‡¡æ˜¯å¯è®¡ç®—çš„ï¼Œéƒ½èƒ½è®¡ç®—å‡ºæ¥ï¼‰</li>\n<li>å›¾çµå®Œå¤‡æ€§<ul>\n<li>å‘½ä»¤å¼ â€“ å›¾çµæœº<ul>\n<li>goto</li>\n<li>if å’Œ while</li>\n</ul>\n</li>\n<li>å£°æ˜å¼ â€“ lambda<ul>\n<li>é€’å½’</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"åŠ¨æ€ä¸é™æ€\"><a href=\"#åŠ¨æ€ä¸é™æ€\" class=\"headerlink\" title=\"åŠ¨æ€ä¸é™æ€\"></a>åŠ¨æ€ä¸é™æ€</h3><ul>\n<li>åŠ¨æ€ï¼š<ul>\n<li>åœ¨ç”¨æˆ·çš„è®¾å¤‡/åœ¨çº¿æœåŠ¡å™¨ä¸Š</li>\n<li>äº§å“å®é™…è¿è¡Œæ—¶</li>\n<li>Runtime</li>\n</ul>\n</li>\n<li>é™æ€<ul>\n<li>åœ¨ç¨‹åºå‘˜çš„è®¾å¤‡ä¸Š</li>\n<li>äº§å“å¼€å‘æ—¶</li>\n<li>Compiletime</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ç±»å‹ç³»ç»Ÿ-In-é™æ€è¯­è¨€\"><a href=\"#ç±»å‹ç³»ç»Ÿ-In-é™æ€è¯­è¨€\" class=\"headerlink\" title=\"ç±»å‹ç³»ç»Ÿ In é™æ€è¯­è¨€\"></a>ç±»å‹ç³»ç»Ÿ In é™æ€è¯­è¨€</h4><ul>\n<li>åŠ¨æ€ç±»å‹ç³»ç»Ÿå’Œé™æ€ç±»å‹ç³»ç»Ÿ<ul>\n<li>ä¸æ˜¯è¯´ Typescript æ‰æœ‰ç±»å‹ç³»ç»Ÿï¼Œè€Œæ˜¯å®ƒæ‰æœ‰é™æ€ç±»å‹ç³»ç»Ÿ</li>\n</ul>\n</li>\n<li>å¼ºç±»å‹å’Œå¼±ç±»å‹<ul>\n<li>String + Number<ul>\n<li>äº§ç”Ÿäº†éšå¼çš„ç±»å‹è½¬æ¢</li>\n</ul>\n</li>\n<li>String == Boolean</li>\n<li>C++ æœ‰éšå¼è½¬æ¢ï¼Œå¼±ç±»å‹</li>\n</ul>\n</li>\n<li>å¤åˆç±»å‹<ul>\n<li>ç»“æ„ä½“</li>\n<li><strong>å‡½æ•°ç­¾å</strong><ul>\n<li>å‚æ•°åˆ—è¡¨ + è¿”å›å€¼ç±»å‹</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å­ç±»å‹<ul>\n<li>é€†å˜/åå˜<ul>\n<li>åå˜ â€“&gt; å‡¡æ˜¯èƒ½ç”¨åˆ°Array&lt;Parent&gt;çš„åœ°æ–¹ï¼Œéƒ½èƒ½ç”¨Array&lt;Child&gt;</li>\n<li>é€†å˜ â€“&gt; å‡¡æ˜¯èƒ½ç”¨åˆ°Array&lt;Child&gt;çš„åœ°æ–¹ï¼Œéƒ½èƒ½ç”¨Array&lt;Parent&gt;</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ä¸€èˆ¬å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€\"><a href=\"#ä¸€èˆ¬å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€\" class=\"headerlink\" title=\"ä¸€èˆ¬å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€\"></a>ä¸€èˆ¬å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€</h2><h3 id=\"Atom\"><a href=\"#Atom\" class=\"headerlink\" title=\"Atom\"></a>Atom</h3><h3 id=\"Expression\"><a href=\"#Expression\" class=\"headerlink\" title=\"Expression\"></a>Expression</h3><h3 id=\"Statement-è¯­å¥\"><a href=\"#Statement-è¯­å¥\" class=\"headerlink\" title=\"Statement è¯­å¥\"></a>Statement è¯­å¥</h3><h3 id=\"Structure\"><a href=\"#Structure\" class=\"headerlink\" title=\"Structure\"></a>Structure</h3><h3 id=\"Program\"><a href=\"#Program\" class=\"headerlink\" title=\"Program\"></a>Program</h3>"},{"title":"ã€æœªå®Œã€‘è®¡ç®—æœºå›¾å½¢å­¦åˆæ¢","date":"2020-04-15T01:42:45.000Z","description":["è®°å½• è®¡ç®—æœºå›¾å½¢å­¦ æ–¹é¢çš„å­¦ä¹ è¿‡ç¨‹ğŸ¤”"],"_content":"\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- è®°å½• è®¡ç®—æœºå›¾å½¢å­¦ æ–¹é¢çš„å­¦ä¹ è¿‡ç¨‹ğŸ¤”\n\n <!-- more -->\n\n## ä¸»è¦æ¦‚å¿µ\n- å‰ç«¯ä¸å›¾å½¢å­¦\n\t- shader\n- å›¾å½¢å­¦åº”ç”¨åœºæ™¯\n\t- Image\n\t\t- patternï¼ˆå¤šç”¨äºèƒŒæ™¯ï¼‰\n\t\t- photo\n\t\t- shape\n\t- æ¥è‡ªæ•°å­¦çš„å›¾å½¢--åˆ†å½¢\n\t- æ¥è‡ªç‰©ç†çš„å›¾å½¢--å…‰çš„è¡å°„\n\t\t- ç›¸å˜\n\t\t- ç»¿å¹•\n\t\t\t- PNG24 --> 2å¼  jpg\n\t\t- 3Dæ•ˆæœ\n\t\t\t- three.js\n\t\t\t- babylon.js\n- å›¾å½¢å­¦åŸºç¡€è®¾æ–½\n\t- \n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/è®¡ç®—æœºå›¾å½¢å­¦åˆæ¢.md","raw":"---\ntitle: ã€æœªå®Œã€‘è®¡ç®—æœºå›¾å½¢å­¦åˆæ¢\ndate: 2020-04-15 09:42:45\ntags:\n- è®¡ç®—æœºå›¾å½¢å­¦\ncategories:\n- è®¡ç®—æœºå›¾å½¢å­¦\ndescription:\n- è®°å½• è®¡ç®—æœºå›¾å½¢å­¦ æ–¹é¢çš„å­¦ä¹ è¿‡ç¨‹ğŸ¤”\n---\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- è®°å½• è®¡ç®—æœºå›¾å½¢å­¦ æ–¹é¢çš„å­¦ä¹ è¿‡ç¨‹ğŸ¤”\n\n <!-- more -->\n\n## ä¸»è¦æ¦‚å¿µ\n- å‰ç«¯ä¸å›¾å½¢å­¦\n\t- shader\n- å›¾å½¢å­¦åº”ç”¨åœºæ™¯\n\t- Image\n\t\t- patternï¼ˆå¤šç”¨äºèƒŒæ™¯ï¼‰\n\t\t- photo\n\t\t- shape\n\t- æ¥è‡ªæ•°å­¦çš„å›¾å½¢--åˆ†å½¢\n\t- æ¥è‡ªç‰©ç†çš„å›¾å½¢--å…‰çš„è¡å°„\n\t\t- ç›¸å˜\n\t\t- ç»¿å¹•\n\t\t\t- PNG24 --> 2å¼  jpg\n\t\t- 3Dæ•ˆæœ\n\t\t\t- three.js\n\t\t\t- babylon.js\n- å›¾å½¢å­¦åŸºç¡€è®¾æ–½\n\t- \n\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"è®¡ç®—æœºå›¾å½¢å­¦åˆæ¢","published":1,"updated":"2020-10-27T15:21:11.267Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u8h003ifw9k2rj37rzc","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li><p>è®°å½• è®¡ç®—æœºå›¾å½¢å­¦ æ–¹é¢çš„å­¦ä¹ è¿‡ç¨‹ğŸ¤”</p>\n<a id=\"more\"></a>\n\n</li>\n</ul>\n<h2 id=\"ä¸»è¦æ¦‚å¿µ\"><a href=\"#ä¸»è¦æ¦‚å¿µ\" class=\"headerlink\" title=\"ä¸»è¦æ¦‚å¿µ\"></a>ä¸»è¦æ¦‚å¿µ</h2><ul>\n<li>å‰ç«¯ä¸å›¾å½¢å­¦<ul>\n<li>shader</li>\n</ul>\n</li>\n<li>å›¾å½¢å­¦åº”ç”¨åœºæ™¯<ul>\n<li>Image<ul>\n<li>patternï¼ˆå¤šç”¨äºèƒŒæ™¯ï¼‰</li>\n<li>photo</li>\n<li>shape</li>\n</ul>\n</li>\n<li>æ¥è‡ªæ•°å­¦çš„å›¾å½¢â€“åˆ†å½¢</li>\n<li>æ¥è‡ªç‰©ç†çš„å›¾å½¢â€“å…‰çš„è¡å°„<ul>\n<li>ç›¸å˜</li>\n<li>ç»¿å¹•<ul>\n<li>PNG24 â€“&gt; 2å¼  jpg</li>\n</ul>\n</li>\n<li>3Dæ•ˆæœ<ul>\n<li>three.js</li>\n<li>babylon.js</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><h2 id=\"å›¾å½¢å­¦åŸºç¡€è®¾æ–½\"><a href=\"#å›¾å½¢å­¦åŸºç¡€è®¾æ–½\" class=\"headerlink\" title=\"å›¾å½¢å­¦åŸºç¡€è®¾æ–½\"></a>å›¾å½¢å­¦åŸºç¡€è®¾æ–½</h2></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li><p>è®°å½• è®¡ç®—æœºå›¾å½¢å­¦ æ–¹é¢çš„å­¦ä¹ è¿‡ç¨‹ğŸ¤”</p>","more":"</li>\n</ul>\n<h2 id=\"ä¸»è¦æ¦‚å¿µ\"><a href=\"#ä¸»è¦æ¦‚å¿µ\" class=\"headerlink\" title=\"ä¸»è¦æ¦‚å¿µ\"></a>ä¸»è¦æ¦‚å¿µ</h2><ul>\n<li>å‰ç«¯ä¸å›¾å½¢å­¦<ul>\n<li>shader</li>\n</ul>\n</li>\n<li>å›¾å½¢å­¦åº”ç”¨åœºæ™¯<ul>\n<li>Image<ul>\n<li>patternï¼ˆå¤šç”¨äºèƒŒæ™¯ï¼‰</li>\n<li>photo</li>\n<li>shape</li>\n</ul>\n</li>\n<li>æ¥è‡ªæ•°å­¦çš„å›¾å½¢â€“åˆ†å½¢</li>\n<li>æ¥è‡ªç‰©ç†çš„å›¾å½¢â€“å…‰çš„è¡å°„<ul>\n<li>ç›¸å˜</li>\n<li>ç»¿å¹•<ul>\n<li>PNG24 â€“&gt; 2å¼  jpg</li>\n</ul>\n</li>\n<li>3Dæ•ˆæœ<ul>\n<li>three.js</li>\n<li>babylon.js</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><h2 id=\"å›¾å½¢å­¦åŸºç¡€è®¾æ–½\"><a href=\"#å›¾å½¢å­¦åŸºç¡€è®¾æ–½\" class=\"headerlink\" title=\"å›¾å½¢å­¦åŸºç¡€è®¾æ–½\"></a>å›¾å½¢å­¦åŸºç¡€è®¾æ–½</h2></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"è‡ªå·±çš„å‰ç«¯çŸ¥è¯†ä½“ç³»","date":"2020-04-12T14:48:53.000Z","description":["ç†ä¸€ä¸‹è‡ªå·±çš„æŠ€æœ¯ä½“ç³»å§"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- ç†ä¸€ä¸‹è‡ªå·±çš„æŠ€æœ¯ä½“ç³»å§\n\n<!-- more -->\n\n## æŠ€æœ¯ä½“ç³»è„‘å›¾\n- ![æŠ€æœ¯ä½“ç³»è„‘å›¾](http://p0.meituan.net/myvideodistribute/49daa01a2bbdab251434a26a618376c53934435.png)\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","source":"_posts/è‡ªå·±çš„å‰ç«¯çŸ¥è¯†ä½“ç³».md","raw":"---\ntitle: è‡ªå·±çš„å‰ç«¯çŸ¥è¯†ä½“ç³»\ndate: 2020-04-12 22:48:53\ntags: \n- å‰ç«¯æ¦‚å¿µ\ncategories:\n- å‰ç«¯æ¦‚å¿µ\ndescription:\n- ç†ä¸€ä¸‹è‡ªå·±çš„æŠ€æœ¯ä½“ç³»å§\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- ç†ä¸€ä¸‹è‡ªå·±çš„æŠ€æœ¯ä½“ç³»å§\n\n<!-- more -->\n\n## æŠ€æœ¯ä½“ç³»è„‘å›¾\n- ![æŠ€æœ¯ä½“ç³»è„‘å›¾](http://p0.meituan.net/myvideodistribute/49daa01a2bbdab251434a26a618376c53934435.png)\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n","slug":"è‡ªå·±çš„å‰ç«¯çŸ¥è¯†ä½“ç³»","published":1,"updated":"2020-10-27T15:21:11.267Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u8j003nfw9k1wtr46i6","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>ç†ä¸€ä¸‹è‡ªå·±çš„æŠ€æœ¯ä½“ç³»å§</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"æŠ€æœ¯ä½“ç³»è„‘å›¾\"><a href=\"#æŠ€æœ¯ä½“ç³»è„‘å›¾\" class=\"headerlink\" title=\"æŠ€æœ¯ä½“ç³»è„‘å›¾\"></a>æŠ€æœ¯ä½“ç³»è„‘å›¾</h2><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/49daa01a2bbdab251434a26a618376c53934435.png\" alt=\"æŠ€æœ¯ä½“ç³»è„‘å›¾\"></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>ç†ä¸€ä¸‹è‡ªå·±çš„æŠ€æœ¯ä½“ç³»å§</li>\n</ul>","more":"<h2 id=\"æŠ€æœ¯ä½“ç³»è„‘å›¾\"><a href=\"#æŠ€æœ¯ä½“ç³»è„‘å›¾\" class=\"headerlink\" title=\"æŠ€æœ¯ä½“ç³»è„‘å›¾\"></a>æŠ€æœ¯ä½“ç³»è„‘å›¾</h2><ul>\n<li><img src=\"http://p0.meituan.net/myvideodistribute/49daa01a2bbdab251434a26a618376c53934435.png\" alt=\"æŠ€æœ¯ä½“ç³»è„‘å›¾\"></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"è‰²å½©ç©ºé—´","date":"2020-08-23T09:38:22.000Z","description":["WebGL"],"_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- æåˆ°è‰²å½©ï¼Œå³ä½¿æ˜¯åˆšæœ‰è¾¨çŸ¥èƒ½åŠ›çš„å°æœ‹å‹ï¼Œä¹Ÿèƒ½è¯´ä¸Šå‡ å¥ï½\n- é‚£æˆ‘ä»¬å‰ç«¯å·¥ç¨‹å¸ˆï¼Œæ— è®ºå·¥ä½œè¿˜æ˜¯ç”Ÿæ´»ï¼Œæ¯å¤©éƒ½åœ¨ä¸å„ç§è‰²å½©æ‰“äº¤é“ï¼Œé‚£ä¾¿æ›´æœ‰å¿…è¦ç³»ç»Ÿåœ°äº†è§£å…³äºè‰²å½©æ–¹é¢çš„çŸ¥è¯†\n- æœ¬æ–‡å°†ä»å‰ç«¯è§’åº¦ï¼ŒèŠèŠè‰²å½©ç©ºé—´\n- æ ¹æ® [CSS Color Module Level 4](https://www.w3.org/TR/css-color-4/) æ ‡å‡†\n\n\t```\n\t<color> = <hex-color> | <named-color> | currentcolor | transparent\n\t          <rgb()> | <rgba()> | <hsl()> | <hsla()> | <hwb()> |\n\t          <lab()> | <lch()> | <gray()> |\n\t          <color()> | <device-cmyk()> |\n\t          <system-color>\n\t```\n\n<!-- more -->\n\n\n## named-color\n- [#named-color](https://www.w3.org/TR/css-color-4/#named-color)\n\n\n### transparent\n- [#transparent](https://www.w3.org/TR/css-color-4/#valdef-color-transparent)\n- [&lt;color&gt; = transparent å°ä¾‹å­](https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-1.html)\n\n\n## currentcolor\n- [#currentcolor](https://www.w3.org/TR/css-color-4/#valdef-color-currentcolor)\n- [&lt;color&gt; = currentcolor å°ä¾‹å­](https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-2.html)\n\n\n## system-color\n- [#system-colors](https://www.w3.org/TR/css-color-4/#css-system-colors)\n- [&lt;color&gt; = &lt;system-color&gt;å°ä¾‹å­](https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-3.html)\n\n<!-- è¿™äº›é›¶æ•£çš„ css color å±æ€§å€¼ç®€å•ä»‹ç»åˆ°è¿™ï¼Œåé¢æˆ‘ä»¬ç³»ç»Ÿçš„ä»‹ç»ä¸‹ï¼Œå‰©ä¸‹çš„å‡ ç§è‰²å½©åˆ†ç±» -->\n\n\n## å‡è‰²æ³•æ··è‰²æ¨¡å‹ CMYK ä¸ åŠ è‰²æ³•æ··è‰²æ¨¡å‹ RGB\n### å‡è‰²æ³•æ··è‰²æ¨¡å‹ [CMYK](https://zh.wikipedia.org/wiki/%E5%8D%B0%E5%88%B7%E5%9B%9B%E5%88%86%E8%89%B2%E6%A8%A1%E5%BC%8F)\n- C - **C**yan - é’è‰²\n- M - **M**agenta - çº¢è‰²\n- Y - **Y**ellow - é»„è‰²\n- K - blac**K** - é»‘è‰²ï¼ˆé˜²æ­¢ä¸ RGB çš„ B å†²çªï¼‰\n- ä¸Šè¿‡ç¾æœ¯è¯¾ï¼Œåº”è¯¥å¬è¿‡â€œçº¢é»„è“â€ä¸‰åŸè‰²çš„è¯´æ³•ï¼Œä½†è¿™å’Œ CMYK ä¸å¤ªä¸€æ ·ï¼Œå®é™…ä¸Šï¼Œé¢œæ–™æ˜¾ç¤ºé¢œè‰²çš„åŸç†æ˜¯å®ƒå¸æ”¶äº†æ‰€æœ‰åˆ«çš„é¢œè‰²çš„å…‰ï¼Œåªåå°„ä¸€ç§é¢œè‰²ï¼Œæ‰€ä»¥é¢œæ–™ä¸‰åŸè‰²å…¶å®æ˜¯çº¢ã€ç»¿ã€è“çš„è¡¥è‰²ï¼Œä¹Ÿå°±æ˜¯ï¼šå“çº¢ã€é»„ã€é’ã€‚å› ä¸ºå®ƒä»¬è·Ÿçº¢ã€é»„ã€è“ç›¸è¿‘ï¼Œæ‰€ä»¥æœ‰äº†è¿™æ ·çš„è¯´æ³•ã€‚\n- ä¸ºä»€ä¹ˆä¼šæ¯”ä¸‰åŸè‰²å¤šäº†ä¸€è‰²å‘¢ï¼Ÿ\n\t- ä¸‰ç§é¢œè‰²è°ƒæˆé»‘è‰²ï¼Œ**è´µ**\n\t- ä¸”**ä¸æ˜¯çº¯ç²¹çš„é»‘**ï¼Œä¸‰è‰²ç­‰é‡ç›¸åŠ ä¹‹ååªèƒ½å½¢æˆä¸€ç§æ·±ç°æˆ–æ·±è¤ï¼ˆæˆ‘è¦äº”å½©æ–‘æ–“çš„é»‘\n\n### åŠ è‰²æ³•æ··è‰²æ¨¡å‹ [RGB](https://www.wikiwand.com/en/RGB_color_model)\n- æˆ‘ä»¬åœ¨ CSS æ ·å¼ä¸­çœ‹åˆ°çš„å½¢å¼å¦‚ #RRGGBB çš„é¢œè‰²ä»£ç ï¼Œå°±æ˜¯ RGB é¢œè‰²çš„åå…­è¿›åˆ¶è¡¨ç¤ºæ³•ï¼Œå…¶ä¸­ RRã€GGã€BB åˆ†åˆ«æ˜¯ä¸¤ä½åå…­è¿›åˆ¶æ•°å­—ï¼Œè¡¨ç¤ºçº¢ã€ç»¿ã€è“ä¸‰è‰²é€šé“çš„è‰²é˜¶ã€‚è‰²é˜¶å¯ä»¥è¡¨ç¤ºæŸä¸ªé€šé“çš„å¼ºå¼±ã€‚\n- ä½† RGB å¹¶ä¸èƒ½è¡¨ç¤ºäººçœ¼æ‰€è§çš„æ‰€æœ‰é¢œè‰²ï¼Œå®ƒåªèƒ½è¡¨ç¤ºä¸‹é¢çš„è¿™ä¸ªåŒºåŸŸ\n\n![äººçœ¼çœ‹åˆ°çš„é¢œè‰²vsRGBèƒ½è¡¨ç¤ºçš„é¢œè‰²](http://p1.meituan.net/myvideodistribute/a9c085522b90c1a0254ac3c64ac37728490575.png)\n\n- RGB å¯¹è‰²å½©çš„æè¿°ï¼Œå¯¹è®¡ç®—æœºå‹å¥½ï¼Œä½†ä¸å¤Ÿäººæ€§åŒ–\n- RGB æˆ‘ä»¬åªèƒ½å¤§è‡´åˆ¤æ–­å‡ºå®ƒåå‘äºçº¢è‰²ã€ç»¿è‰²è¿˜æ˜¯è“è‰²ï¼Œæˆ–è€…åœ¨é¢œè‰²ç«‹æ–¹ä½“çš„å¤§è‡´ä½ç½®ã€‚\n- ä»¥åŠå¯¹æ¯”ä¸¤ä¸ª RGB é¢œè‰²çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡å¯¹æ¯”å®ƒä»¬åœ¨ RGB ç«‹æ–¹ä½“ä¸­çš„ç›¸å¯¹è·ç¦»ï¼Œæ¥åˆ¤æ–­å®ƒä»¬çš„é¢œè‰²å·®å¼‚ã€‚ \n\n![RGB ç«‹æ–¹ä½“å‡ ä½•è¡¨ç¤º](http://p1.meituan.net/myvideodistribute/15a8b3e684bdfce7333105cc23ed332d239313.png)\n\n- ä½†æˆ‘ä»¬å¯¹è‰²å½©çš„è®¤è¯†å¾€å¾€å…ˆæ˜¯ï¼šé¢œè‰²æ˜¯ä»€ä¹ˆï¼Œé²œè‰³ä¸é²œè‰³ï¼Œäº®è¿˜æ˜¯æš—\n- and Itâ€™s not easy to to alter an RGB color to produce a lighter variant of the same hue.\n\t- è¿™åœ¨æˆ‘ä»¬å¼€å‘ä¸­ä¹Ÿååˆ†å¸¸è§ï¼Œæœ‰äº›æ—¶å€™è®¾è®¡å¸ˆå®šä¸‹è§†è§‰åŸºè°ƒå’Œä¸»è‰²ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æ•°æ®æƒ…å†µç”±å‰ç«¯åŠ¨æ€ç”Ÿæˆé¢œè‰²å€¼\n\n\n<!-- è¿‡æ¸¡åˆ° HSV HSL -->\n\n## HSL HSB&HSV\n- CSS å’Œ Canvas2D éƒ½å¯ä»¥ç›´æ¥æ”¯æŒ HSL é¢œè‰²ï¼Œåªæœ‰ WebGL éœ€è¦åš RGB2HSV è½¬æ¢ã€‚\n\n\n### HSL\n#### H - Hue - è‰²ç›¸ - 0-360Â°çš„åœ†å¿ƒè§’\n- H(hue)åˆ†é‡ï¼Œä»£è¡¨çš„æ˜¯äººçœ¼æ‰€èƒ½æ„ŸçŸ¥çš„é¢œè‰²èŒƒå›´ï¼Œè¿™äº›é¢œè‰²åˆ†å¸ƒåœ¨ä¸€ä¸ªå¹³é¢çš„è‰²ç›¸ç¯ä¸Šï¼Œå–å€¼èŒƒå›´æ˜¯0Â°åˆ°360Â°çš„åœ†å¿ƒè§’ï¼Œæ¯ä¸ªè§’åº¦å¯ä»¥ä»£è¡¨ä¸€ç§é¢œè‰²ã€‚\n- è‰²ç›¸å€¼çš„æ„ä¹‰åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸æ”¹å˜å…‰æ„Ÿçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ—‹è½¬è‰²ç›¸ç¯æ¥æ”¹å˜é¢œè‰²ã€‚\n- åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½è‰²ç›¸ç¯ä¸Šçš„å…­å¤§ä¸»è‰²ï¼Œç”¨ä½œåŸºæœ¬å‚ç…§ï¼š360Â°/0Â°çº¢ã€60Â°é»„ã€120Â°ç»¿ã€180Â°é’ã€240Â°è“ã€300Â°æ´‹çº¢ï¼Œå®ƒä»¬åœ¨è‰²ç›¸ç¯ä¸ŠæŒ‰ç…§60Â°åœ†å¿ƒè§’çš„é—´éš”æ’åˆ—ã€‚\n\n![HSL è‰²ç›¸ç¯](http://p0.meituan.net/myvideodistribute/01ed240165965600fde0a031d193f8c6325809.png)\n\n#### S - Saturation - é¥±å’Œåº¦ - 0\\~1 æˆ–è€… 0%\\~100% é—´çš„å€¼\n- å’Œé»‘ç™½æ²¡æœ‰å…³ç³»ï¼Œé¥±å’Œåº¦ä¸æ§åˆ¶é¢œè‰²ä¸­æ··å…¥é»‘ç™½çš„å¤šå¯¡\n- æ•°å€¼è¶Šå¤§ï¼Œé¢œè‰²ä¸­çš„ç°è‰²è¶Šå°‘ï¼Œé¢œè‰²è¶Šé²œè‰³ï¼Œå‘ˆç°ä¸€ç§ä»ç°åº¦åˆ°çº¯è‰²çš„å˜åŒ–ã€‚\n\n![HSL S](https://pic1.zhimg.com/80/v2-e606821a1171451b35f08b68aaf833b9_1440w.jpg?source=1940ef5c)\n\n\n#### L - Lightness - äº®åº¦ - 0\\~1 æˆ–è€… 0%\\~100% é—´çš„å€¼\n- æ§åˆ¶çº¯è‰²ä¸­çš„æ··å…¥çš„é»‘ç™½ä¸¤ç§é¢œè‰²\n- æ•°å€¼è¶Šå°ï¼Œè‰²å½©è¶Šæš—ï¼Œè¶Šæ¥è¿‘äºé»‘è‰²ï¼›æ•°å€¼è¶Šå¤§ï¼Œè‰²å½©è¶Šäº®ï¼Œè¶Šæ¥è¿‘äºç™½è‰²ã€‚\n\n![HSL L](https://picb.zhimg.com/80/v2-ef76260bcc83056006bf0376e9036b79_1440w.jpg?source=1940ef5c)\n\n### HSB & HSV\n- HSB åˆç§° HSV\n- [HSV è‰²è½®- WebGL å®ç°](https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-hsv-wheel.html)\n\t- åƒç´ åæ ‡è½¬æ¢ä¸ºæåæ ‡ï¼Œå†é™¤ä»¥ 2Ï€ï¼Œå°±èƒ½å¾—åˆ° HSV çš„ H å€¼\n\t- é¼ æ ‡ä½ç½®çš„ xã€y åæ ‡æ¥å†³å®š S å’Œ V çš„å€¼\n\n\n#### S - Saturation - é¥±å’Œåº¦ - 0\\~1 æˆ–è€… 0%\\~100%é—´çš„å€¼\n- æ§åˆ¶çº¯è‰²ä¸­æ··å…¥ç™½è‰²çš„é‡ï¼Œå€¼è¶Šå¤§ï¼Œç™½è‰²è¶Šå°‘ï¼Œé¢œè‰²è¶Šçº¯ï¼›\n\n\n\n#### B - Brightness - äº®åº¦ - 0\\~1 æˆ–è€… 0%\\~100%é—´çš„å€¼\n- æ§åˆ¶çº¯è‰²ä¸­æ··å…¥é»‘è‰²çš„é‡ï¼Œå€¼è¶Šå¤§ï¼Œé»‘è‰²è¶Šå°‘ï¼Œæ˜åº¦è¶Šé«˜\n\n### RGB ç«‹æ–¹ä½“è½¬æ¢æˆ HSL / HSV è¿‡ç¨‹\n![RGB ç«‹æ–¹ä½“è½¬æ¢æˆ HSL / HSV è¿‡ç¨‹](http://p0.meituan.net/myvideodistribute/719dd96f97590c2fc3041f661e3db30c200249.png)\n\n- æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªè¿‡ç¨‹ç®€å•ç†è§£æˆï¼Œå°† RGB é¢œè‰²çš„ç«‹æ–¹ä½“ä»ç›´è§’åæ ‡ç³»æŠ•å½±åˆ°æåæ ‡ç³»çš„åœ†æŸ±ä¸Š\n- HSVï¼ˆè‰²ç›¸ã€é¥±å’Œåº¦ã€æ˜åº¦ï¼‰åœ¨æ¦‚å¿µä¸Šå¯ä»¥è¢«è®¤ä¸ºæ˜¯é¢œè‰²çš„å€’åœ†é”¥ä½“ï¼ˆé»‘ç‚¹åœ¨ä¸‹é¡¶ç‚¹ï¼Œç™½è‰²åœ¨ä¸Šåº•é¢åœ†å¿ƒï¼‰\n\t- ![HSV æ¦‚å¿µå›¾](https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/HSV_cone.png/440px-HSV_cone.png)\n- HSL åœ¨æ¦‚å¿µä¸Šè¡¨ç¤ºäº†ä¸€ä¸ªåŒåœ†é”¥ä½“å’Œåœ†çƒä½“ï¼ˆç™½è‰²åœ¨ä¸Šé¡¶ç‚¹ï¼Œé»‘è‰²åœ¨ä¸‹é¡¶ç‚¹ï¼Œæœ€å¤§æ¨ªåˆ‡é¢çš„åœ†å¿ƒæ˜¯åŠç¨‹ç°è‰²ï¼‰\n\t- ![HSL æ¦‚å¿µå›¾](https://pic4.zhimg.com/80/v2-3df1e851938562c2a9d1c76cc8af23e2_1440w.jpg?source=1940ef5c)\n- æˆ‘ä»¬å¯ä»¥ä»ä¸‹å›¾æ¥å¯¹æ¯” HSL & HSV\n\t- ![HSL & HSV å¯¹æ¯”å›¾](https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/HSL_HSV_cylinder_color_solid_comparison.png/800px-HSL_HSV_cylinder_color_solid_comparison.png)\n\n- **ä½†å³ä½¿æˆ‘ä»¬å¯ä»¥å‡åŒ€åœ°ä¿®æ”¹æ¯ç»„çš„äº®åº¦å’Œé¥±å’Œåº¦ï¼Œç”±äºäººçœ¼å¯¹ä¸åŒé¢‘ç‡çš„å…‰çš„æ•æ„Ÿåº¦ä¸åŒï¼Œæˆ‘ä»¬ä»ç„¶ä¼šæ„Ÿè§‰æœ‰çš„é¢œè‰²çœ‹èµ·æ¥å’Œå…¶ä»–çš„é¢œè‰²å·®è·æ˜æ˜¾ï¼Œæœ‰çš„é¢œè‰²è¿˜æ˜¯æ²¡é‚£ä¹ˆæ˜æ˜¾**\n- çœ‹ä¸‹é¢çš„ä¾‹å­\n\n\t```javascript\n\tfor(let i = 0; i < 20; i++) {\n\t  ctx.fillStyle = `hsl(${Math.floor(i * 15)}, 50%, 50%)`;\n\t  ctx.beginPath();\n\t  ctx.arc((i - 10) * 20, 60, 10, 0, Math.PI * 2);\n\t  ctx.fill();\n\t}\n\t\n\tfor(let i = 0; i < 20; i++) {\n\t  ctx.fillStyle = `hsl(${Math.floor((i % 2 ? 60 : 210) + 3 * i)}, 50%, 50%)`;\n\t  ctx.beginPath();\n\t  ctx.arc((i - 10) * 20, -60, 10, 0, Math.PI * 2);\n\t  ctx.fill();\n\t}\n\t```\n\t- æˆ‘ä»¬ç»˜åˆ¶ä¸¤æ’ä¸åŒçš„åœ†ï¼Œè®©ç¬¬ä¸€æ’æ¯ä¸ªåœ†çš„è‰²ç›¸é—´éš”éƒ½æ˜¯ 15ï¼Œå†è®©ç¬¬äºŒæ’åœ†çš„é¢œè‰²åœ¨è‰²ç›¸ 60 å’Œ 210 é™„è¿‘ä¸¤ä¸¤äº¤é”™ã€‚\n\t- æœ€ç»ˆç”Ÿæˆæ•ˆæœå¦‚ä¸‹ï¼š\n\t\t- ![HSL è‰²ç›¸ä¿®æ”¹](https://static001.geekbang.org/resource/image/67/61/674ae06ae45050bb2e9840a1c081b661.jpeg)\n\t- å¯ä»¥çœ‹å‡ºï¼š\n\t\t- ç¬¬ä¸€æ’åœ†ä½ ä¼šå‘ç°ï¼Œè™½ç„¶å®ƒä»¬çš„è‰²ç›¸ç›¸å·®éƒ½æ˜¯ 15ï¼Œä½†æ˜¯ç›¸äº’ä¹‹é—´é¢œè‰²å˜åŒ–å¹¶ä¸æ˜¯å‡åŒ€çš„ï¼Œå°¤å…¶æ˜¯ä¸­é—´å‡ ä¸ªç»¿è‰²åœ†çš„é¢œè‰²æ¯”è¾ƒæ¥è¿‘ã€‚\n\t\t- ç¬¬äºŒæ’åœ†ï¼Œè™½ç„¶è¿™äº›åœ†çš„äº®åº¦éƒ½æ˜¯ 50%ï¼Œä½†æ˜¯è“è‰²å’Œç´«è‰²çš„åœ†çœ‹èµ·æ¥å°±æ˜¯ä¸å¦‚åç»¿åé»„çš„åœ†äº®ã€‚\n\n- å› æ­¤ï¼ŒHSL ä¾ç„¶ä¸æ˜¯æœ€å®Œç¾çš„è‰²å½©è¡¨ç¤ºæ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å»ºç«‹ä¸€å¥—ç¬¦åˆäººç±»è®¤çŸ¥çš„æ ‡å‡†ã€‚è¿™ä¸ªæ ‡å‡†å°½å¯èƒ½åœ°æ»¡è¶³ä¸€ä¸‹ 2 ä¸ªåŸåˆ™\n\t- äººçœ¼çœ‹åˆ°çš„è‰²å·® = é¢œè‰²å‘é‡é—´çš„æ¬§æ°è·ç¦»\n\t- ç›¸åŒçš„äº®åº¦ï¼Œèƒ½è®©äººæ„Ÿè§‰äº®åº¦ç›¸åŒ\n\n<!-- äºæ˜¯ CIE Lab è¯ç”Ÿäº† -->\n\n\n## CIE Lab /  CIE Lch\n- [Labè‰²å½©ç©ºé—´](https://zh.wikipedia.org/wiki/Lab%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4)ï¼ˆè‹±è¯­ï¼šLab color spaceï¼‰æ˜¯é¢œè‰²-å¯¹ç«‹ç©ºé—´ï¼Œå¸¦æœ‰ç»´åº¦Lè¡¨ç¤ºäº®åº¦ï¼Œaå’Œbè¡¨ç¤ºé¢œè‰²å¯¹ç«‹ç»´åº¦ï¼ŒåŸºäºäº†éçº¿æ€§å‹ç¼©çš„CIE XYZè‰²å½©ç©ºé—´åæ ‡ã€‚\n- CIE Lab æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ç‚¹æ˜¯ï¼Œç›®å‰è¿˜æ²¡æœ‰èƒ½æ”¯æŒ CIE Lab çš„å›¾å½¢ç³»ç»Ÿï¼Œä½†[è§„èŒƒ](https://www.w3.org/TR/css-color-4/#funcdef-lab)ä¸­å·²ç»ç»™å‡ºäº† Lab é¢œè‰²å€¼çš„å®šä¹‰\n\t\n\t```\n\tlab() = lab( <percentage> <number> <number> [ / <alpha-value> ]? )\n\tlch() = lch( <percentage> <number> <hue> [ / <alpha-value> ]? )\n\t```\n\t\n- ä¸”ä¸€äº› JavaScript åº“ä¹Ÿå·²ç»å¯ä»¥ç›´æ¥å¤„ç† Lab é¢œè‰²ç©ºé—´äº†ï¼Œå¦‚ [d3-color](https://d3js.org.cn/document/d3-color/)\t\n\t- æˆ‘ä»¬å¯ä»¥é€šè¿‡ [Lab color picker](https://bl.ocks.org/mbostock/9f37cc207c0cb166921b) æ¥äº†è§£ä¸‰ä¸ªé¢œè‰²ä¹‹å‰çš„ç›¸äº’ä½œç”¨\n\n\t```javascript\n\tfor(let i = 0; i < 20; i++) {\n\t  const c = d3.lab(30, i * 15 - 150, i * 15 - 150).rgb();\n\t  ctx.fillStyle = `rgb(${c.r}, ${c.g}, ${c.b})`;\n\t  ctx.beginPath();\n\t  ctx.arc((i - 10) * 20, 60, 10, 0, Math.PI * 2);\n\t  ctx.fill();\n\t}\n\t\n\tfor(let i = 0; i < 20; i++) {\n\t  const c = d3.lab(i * 5, 80, 80).rgb();\n\t  ctx.fillStyle = `rgb(${c.r}, ${c.g}, ${c.b})`;\n\t  ctx.beginPath();\n\t  ctx.arc((i - 10) * 20, -60, 10, 0, Math.PI * 2);\n\t  ctx.fill();\n\t}\n\t```\n\t- è¿™ä¸ªä¾‹å­ä¸ HSL çš„ä¾‹å­ä¸€æ ·ï¼Œä¹Ÿæ˜¯æ˜¾ç¤ºä¸¤æ’åœ†å½¢ã€‚\n\t\t- ç¬¬ä¸€æ’ç›¸é‚»åœ†å½¢ä¹‹é—´çš„ lab è‰²å€¼çš„æ¬§æ°ç©ºé—´è·ç¦»ç›¸åŒ\n\t\t- ç¬¬äºŒæ’ç›¸é‚»åœ†å½¢ä¹‹é—´çš„äº®åº¦æŒ‰ 5 é˜¶çš„æ–¹å¼é€’å¢\n\t- ![d3 lab demo](https://static001.geekbang.org/resource/image/9c/92/9c0898db90d53fe4fd3e6b3c83043d92.jpeg)\n- å¯ä»¥çœ‹å‡ºï¼Œåœ¨ä»¥ CIELab æ–¹å¼å‘ˆç°çš„è‰²å½©å˜åŒ–ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®çš„æ•°å€¼å’Œäººçœ¼æ„ŸçŸ¥çš„ä¸€è‡´æ€§æ¯”è¾ƒå¼ºã€‚\n- è‡³æ­¤ï¼Œè§„èŒƒä¸­å‡ºç°çš„è‰²å½©ç©ºé—´è¡¨ç¤ºæ–¹æ³•å·²ç»ä»‹ç»å®Œäº†ã€‚\n\n\n### [Cubehelix](http://www.mrao.cam.ac.uk/~dag/CUBEHELIX/) è‰²ç›˜\n<!-- æœ€åï¼Œæˆ‘ä»¬å†æ¥è¯´ä¸€ç§ç‰¹æ®Šçš„é¢œè‰²è¡¨ç¤ºæ³• -->\n- å®ƒçš„åŸç†å°±æ˜¯åœ¨ RGB çš„ç«‹æ–¹ä¸­æ„å»ºä¸€æ®µèºæ—‹çº¿ï¼Œè®©è‰²ç›¸éšç€äº®åº¦å¢åŠ èºæ—‹å˜æ¢ã€‚\n- ![Cubehelix èºæ—‹çº¿åŸç†](https://static001.geekbang.org/resource/image/28/0c/281b8bbdeebyy0f3e62c80278267150c.jpg)\n- æˆ‘ä»¬å¯ä»¥ç”¨ [cubehelix](https://www.npmjs.com/package/cubehelix) å†™ä¸€ä¸ªé¢œè‰²éšç€é•¿åº¦å˜åŒ–çš„é•¿åº¦\n\t- é¦–å…ˆï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ cubehelix å‡½æ•°åˆ›å»ºä¸€ä¸ª color æ˜ å°„ã€‚\n\t\t- cubehelix å‡½æ•°æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªè‰²ç›˜æ˜ å°„å‡½æ•°ã€‚è¿™ä¸ªè¿”å›å‡½æ•°çš„å‚æ•°èŒƒå›´æ˜¯ 0 åˆ° 1ï¼Œå½“å®ƒä»å°åˆ°å¤§ä¾æ¬¡æ”¹å˜çš„æ—¶å€™ï¼Œä¸ä»…é¢œè‰²ä¼šä¾æ¬¡æ”¹å˜ï¼Œäº®åº¦ä¹Ÿä¼šä¾æ¬¡å¢å¼ºã€‚\n\t- ç„¶åï¼Œæˆ‘ä»¬ç”¨æ­£å¼¦å‡½æ•°æ¥æ¨¡æ‹Ÿæ•°æ®çš„å‘¨æœŸæ€§å˜åŒ–ï¼Œé€šè¿‡ color è·å–å½“å‰çš„é¢œè‰²å€¼ï¼Œå†æŠŠé¢œè‰²å€¼èµ‹ç»™ ctx.fillStyleï¼Œé¢œè‰²å°±èƒ½æ˜¾ç¤ºå‡ºæ¥äº†ã€‚\n\t- æœ€åï¼Œæˆ‘ä»¬ç”¨ rect å°†æŸ±çŠ¶å›¾ç”»å‡ºæ¥ï¼Œç”¨ requestAnimationFrame å®ç°åŠ¨ç”»å°±å¯ä»¥äº† ã€‚\n\n\t\n\t\n```javascript\nimport {cubehelix} from 'cubehelix';\n\t\nconst canvas = document.querySelector('canvas');\nconst ctx = canvas.getContext('2d');\n\t\nctx.translate(0, 256);\nctx.scale(1, -1);\n\t\nconst color = cubehelix(); // æ„é€ cubehelixè‰²ç›˜é¢œè‰²æ˜ å°„å‡½æ•°\nconst T = 2000;\n\t\nfunction update(t) {\n  const p = 0.5 + 0.5 * Math.sin(t / T);\n  ctx.clearRect(0, -256, 512, 512);\n  const {r, g, b} = color(p);\n  ctx.fillStyle = `rgb(${255 * r},${255 * g},${255 * b})`;\n  ctx.beginPath();\n  ctx.rect(20, -20, 480 * p, 40);\n  ctx.fill();\n  window.ctx = ctx;\n  requestAnimationFrame(update);\n}\n\t\nupdate(0);\n```\n\t\n- ![Cubehelix rect](https://static001.geekbang.org/resource/image/4d/ef/4d71b84fc3282e84a98141e444f658ef.gif)\n\n### Coverting\n- [hsl-to-rgb](https://www.w3.org/TR/css-color-4/#hsl-to-rgb)\n- [rgb-to-lab](https://www.w3.org/TR/css-color-4/#rgb-to-lab)\n- [lab-to-rgb](https://www.w3.org/TR/css-color-4/#lab-to-rgb)\n- [lab-to-lch](https://www.w3.org/TR/css-color-4/#lab-to-lch)\n- [lch-to-lab](https://www.w3.org/TR/css-color-4/#lch-to-lab)\n- [Sample code for color conversions](https://www.w3.org/TR/css-color-4/#color-conversion-code)\n\n\n## å‚è€ƒèµ„æ–™\n- [CSS Color Module Level 4](https://www.w3.org/TR/css-color-4/)\n- [wikipedia HSL&HSV](https://en.wikipedia.org/wiki/HSL_and_HSV)\n- [çŸ¥ä¹-è‰²å½©ç©ºé—´ä¸­çš„ HSLã€HSVã€HSB æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ](https://www.zhihu.com/question/22077462)\n- [d3-color](https://d3js.org.cn/document/d3-color/#api-reference)\n- [Cubehelix](http://www.mrao.cam.ac.uk/~dag/CUBEHELIX/)\n- [Cubehelixé¢œè‰²è¡¨ç®—æ³•](https://zhuanlan.zhihu.com/p/121055691)\n- [wikipedia Labè‰²å½©ç©ºé—´](https://zh.wikipedia.org/wiki/Lab%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4)\n- [JSå®ç°RGB-HSL-HSBç›¸äº’è½¬æ¢](http://wsyks.github.io/2017/03/17/JS%E5%AE%9E%E7%8E%B0RGB-HSL-HSB%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2/)\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n\n\n\n","source":"_posts/é¢œè‰²ç©ºé—´.md","raw":"---\ntitle: 'è‰²å½©ç©ºé—´'\ndate: 2020-08-23 17:38:22\ntags: \n- writing\n- WebGL\ncategories:\n- WebGL\ndescription:\n- WebGL\n\n\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- æåˆ°è‰²å½©ï¼Œå³ä½¿æ˜¯åˆšæœ‰è¾¨çŸ¥èƒ½åŠ›çš„å°æœ‹å‹ï¼Œä¹Ÿèƒ½è¯´ä¸Šå‡ å¥ï½\n- é‚£æˆ‘ä»¬å‰ç«¯å·¥ç¨‹å¸ˆï¼Œæ— è®ºå·¥ä½œè¿˜æ˜¯ç”Ÿæ´»ï¼Œæ¯å¤©éƒ½åœ¨ä¸å„ç§è‰²å½©æ‰“äº¤é“ï¼Œé‚£ä¾¿æ›´æœ‰å¿…è¦ç³»ç»Ÿåœ°äº†è§£å…³äºè‰²å½©æ–¹é¢çš„çŸ¥è¯†\n- æœ¬æ–‡å°†ä»å‰ç«¯è§’åº¦ï¼ŒèŠèŠè‰²å½©ç©ºé—´\n- æ ¹æ® [CSS Color Module Level 4](https://www.w3.org/TR/css-color-4/) æ ‡å‡†\n\n\t```\n\t<color> = <hex-color> | <named-color> | currentcolor | transparent\n\t          <rgb()> | <rgba()> | <hsl()> | <hsla()> | <hwb()> |\n\t          <lab()> | <lch()> | <gray()> |\n\t          <color()> | <device-cmyk()> |\n\t          <system-color>\n\t```\n\n<!-- more -->\n\n\n## named-color\n- [#named-color](https://www.w3.org/TR/css-color-4/#named-color)\n\n\n### transparent\n- [#transparent](https://www.w3.org/TR/css-color-4/#valdef-color-transparent)\n- [&lt;color&gt; = transparent å°ä¾‹å­](https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-1.html)\n\n\n## currentcolor\n- [#currentcolor](https://www.w3.org/TR/css-color-4/#valdef-color-currentcolor)\n- [&lt;color&gt; = currentcolor å°ä¾‹å­](https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-2.html)\n\n\n## system-color\n- [#system-colors](https://www.w3.org/TR/css-color-4/#css-system-colors)\n- [&lt;color&gt; = &lt;system-color&gt;å°ä¾‹å­](https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-3.html)\n\n<!-- è¿™äº›é›¶æ•£çš„ css color å±æ€§å€¼ç®€å•ä»‹ç»åˆ°è¿™ï¼Œåé¢æˆ‘ä»¬ç³»ç»Ÿçš„ä»‹ç»ä¸‹ï¼Œå‰©ä¸‹çš„å‡ ç§è‰²å½©åˆ†ç±» -->\n\n\n## å‡è‰²æ³•æ··è‰²æ¨¡å‹ CMYK ä¸ åŠ è‰²æ³•æ··è‰²æ¨¡å‹ RGB\n### å‡è‰²æ³•æ··è‰²æ¨¡å‹ [CMYK](https://zh.wikipedia.org/wiki/%E5%8D%B0%E5%88%B7%E5%9B%9B%E5%88%86%E8%89%B2%E6%A8%A1%E5%BC%8F)\n- C - **C**yan - é’è‰²\n- M - **M**agenta - çº¢è‰²\n- Y - **Y**ellow - é»„è‰²\n- K - blac**K** - é»‘è‰²ï¼ˆé˜²æ­¢ä¸ RGB çš„ B å†²çªï¼‰\n- ä¸Šè¿‡ç¾æœ¯è¯¾ï¼Œåº”è¯¥å¬è¿‡â€œçº¢é»„è“â€ä¸‰åŸè‰²çš„è¯´æ³•ï¼Œä½†è¿™å’Œ CMYK ä¸å¤ªä¸€æ ·ï¼Œå®é™…ä¸Šï¼Œé¢œæ–™æ˜¾ç¤ºé¢œè‰²çš„åŸç†æ˜¯å®ƒå¸æ”¶äº†æ‰€æœ‰åˆ«çš„é¢œè‰²çš„å…‰ï¼Œåªåå°„ä¸€ç§é¢œè‰²ï¼Œæ‰€ä»¥é¢œæ–™ä¸‰åŸè‰²å…¶å®æ˜¯çº¢ã€ç»¿ã€è“çš„è¡¥è‰²ï¼Œä¹Ÿå°±æ˜¯ï¼šå“çº¢ã€é»„ã€é’ã€‚å› ä¸ºå®ƒä»¬è·Ÿçº¢ã€é»„ã€è“ç›¸è¿‘ï¼Œæ‰€ä»¥æœ‰äº†è¿™æ ·çš„è¯´æ³•ã€‚\n- ä¸ºä»€ä¹ˆä¼šæ¯”ä¸‰åŸè‰²å¤šäº†ä¸€è‰²å‘¢ï¼Ÿ\n\t- ä¸‰ç§é¢œè‰²è°ƒæˆé»‘è‰²ï¼Œ**è´µ**\n\t- ä¸”**ä¸æ˜¯çº¯ç²¹çš„é»‘**ï¼Œä¸‰è‰²ç­‰é‡ç›¸åŠ ä¹‹ååªèƒ½å½¢æˆä¸€ç§æ·±ç°æˆ–æ·±è¤ï¼ˆæˆ‘è¦äº”å½©æ–‘æ–“çš„é»‘\n\n### åŠ è‰²æ³•æ··è‰²æ¨¡å‹ [RGB](https://www.wikiwand.com/en/RGB_color_model)\n- æˆ‘ä»¬åœ¨ CSS æ ·å¼ä¸­çœ‹åˆ°çš„å½¢å¼å¦‚ #RRGGBB çš„é¢œè‰²ä»£ç ï¼Œå°±æ˜¯ RGB é¢œè‰²çš„åå…­è¿›åˆ¶è¡¨ç¤ºæ³•ï¼Œå…¶ä¸­ RRã€GGã€BB åˆ†åˆ«æ˜¯ä¸¤ä½åå…­è¿›åˆ¶æ•°å­—ï¼Œè¡¨ç¤ºçº¢ã€ç»¿ã€è“ä¸‰è‰²é€šé“çš„è‰²é˜¶ã€‚è‰²é˜¶å¯ä»¥è¡¨ç¤ºæŸä¸ªé€šé“çš„å¼ºå¼±ã€‚\n- ä½† RGB å¹¶ä¸èƒ½è¡¨ç¤ºäººçœ¼æ‰€è§çš„æ‰€æœ‰é¢œè‰²ï¼Œå®ƒåªèƒ½è¡¨ç¤ºä¸‹é¢çš„è¿™ä¸ªåŒºåŸŸ\n\n![äººçœ¼çœ‹åˆ°çš„é¢œè‰²vsRGBèƒ½è¡¨ç¤ºçš„é¢œè‰²](http://p1.meituan.net/myvideodistribute/a9c085522b90c1a0254ac3c64ac37728490575.png)\n\n- RGB å¯¹è‰²å½©çš„æè¿°ï¼Œå¯¹è®¡ç®—æœºå‹å¥½ï¼Œä½†ä¸å¤Ÿäººæ€§åŒ–\n- RGB æˆ‘ä»¬åªèƒ½å¤§è‡´åˆ¤æ–­å‡ºå®ƒåå‘äºçº¢è‰²ã€ç»¿è‰²è¿˜æ˜¯è“è‰²ï¼Œæˆ–è€…åœ¨é¢œè‰²ç«‹æ–¹ä½“çš„å¤§è‡´ä½ç½®ã€‚\n- ä»¥åŠå¯¹æ¯”ä¸¤ä¸ª RGB é¢œè‰²çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡å¯¹æ¯”å®ƒä»¬åœ¨ RGB ç«‹æ–¹ä½“ä¸­çš„ç›¸å¯¹è·ç¦»ï¼Œæ¥åˆ¤æ–­å®ƒä»¬çš„é¢œè‰²å·®å¼‚ã€‚ \n\n![RGB ç«‹æ–¹ä½“å‡ ä½•è¡¨ç¤º](http://p1.meituan.net/myvideodistribute/15a8b3e684bdfce7333105cc23ed332d239313.png)\n\n- ä½†æˆ‘ä»¬å¯¹è‰²å½©çš„è®¤è¯†å¾€å¾€å…ˆæ˜¯ï¼šé¢œè‰²æ˜¯ä»€ä¹ˆï¼Œé²œè‰³ä¸é²œè‰³ï¼Œäº®è¿˜æ˜¯æš—\n- and Itâ€™s not easy to to alter an RGB color to produce a lighter variant of the same hue.\n\t- è¿™åœ¨æˆ‘ä»¬å¼€å‘ä¸­ä¹Ÿååˆ†å¸¸è§ï¼Œæœ‰äº›æ—¶å€™è®¾è®¡å¸ˆå®šä¸‹è§†è§‰åŸºè°ƒå’Œä¸»è‰²ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æ•°æ®æƒ…å†µç”±å‰ç«¯åŠ¨æ€ç”Ÿæˆé¢œè‰²å€¼\n\n\n<!-- è¿‡æ¸¡åˆ° HSV HSL -->\n\n## HSL HSB&HSV\n- CSS å’Œ Canvas2D éƒ½å¯ä»¥ç›´æ¥æ”¯æŒ HSL é¢œè‰²ï¼Œåªæœ‰ WebGL éœ€è¦åš RGB2HSV è½¬æ¢ã€‚\n\n\n### HSL\n#### H - Hue - è‰²ç›¸ - 0-360Â°çš„åœ†å¿ƒè§’\n- H(hue)åˆ†é‡ï¼Œä»£è¡¨çš„æ˜¯äººçœ¼æ‰€èƒ½æ„ŸçŸ¥çš„é¢œè‰²èŒƒå›´ï¼Œè¿™äº›é¢œè‰²åˆ†å¸ƒåœ¨ä¸€ä¸ªå¹³é¢çš„è‰²ç›¸ç¯ä¸Šï¼Œå–å€¼èŒƒå›´æ˜¯0Â°åˆ°360Â°çš„åœ†å¿ƒè§’ï¼Œæ¯ä¸ªè§’åº¦å¯ä»¥ä»£è¡¨ä¸€ç§é¢œè‰²ã€‚\n- è‰²ç›¸å€¼çš„æ„ä¹‰åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸æ”¹å˜å…‰æ„Ÿçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ—‹è½¬è‰²ç›¸ç¯æ¥æ”¹å˜é¢œè‰²ã€‚\n- åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½è‰²ç›¸ç¯ä¸Šçš„å…­å¤§ä¸»è‰²ï¼Œç”¨ä½œåŸºæœ¬å‚ç…§ï¼š360Â°/0Â°çº¢ã€60Â°é»„ã€120Â°ç»¿ã€180Â°é’ã€240Â°è“ã€300Â°æ´‹çº¢ï¼Œå®ƒä»¬åœ¨è‰²ç›¸ç¯ä¸ŠæŒ‰ç…§60Â°åœ†å¿ƒè§’çš„é—´éš”æ’åˆ—ã€‚\n\n![HSL è‰²ç›¸ç¯](http://p0.meituan.net/myvideodistribute/01ed240165965600fde0a031d193f8c6325809.png)\n\n#### S - Saturation - é¥±å’Œåº¦ - 0\\~1 æˆ–è€… 0%\\~100% é—´çš„å€¼\n- å’Œé»‘ç™½æ²¡æœ‰å…³ç³»ï¼Œé¥±å’Œåº¦ä¸æ§åˆ¶é¢œè‰²ä¸­æ··å…¥é»‘ç™½çš„å¤šå¯¡\n- æ•°å€¼è¶Šå¤§ï¼Œé¢œè‰²ä¸­çš„ç°è‰²è¶Šå°‘ï¼Œé¢œè‰²è¶Šé²œè‰³ï¼Œå‘ˆç°ä¸€ç§ä»ç°åº¦åˆ°çº¯è‰²çš„å˜åŒ–ã€‚\n\n![HSL S](https://pic1.zhimg.com/80/v2-e606821a1171451b35f08b68aaf833b9_1440w.jpg?source=1940ef5c)\n\n\n#### L - Lightness - äº®åº¦ - 0\\~1 æˆ–è€… 0%\\~100% é—´çš„å€¼\n- æ§åˆ¶çº¯è‰²ä¸­çš„æ··å…¥çš„é»‘ç™½ä¸¤ç§é¢œè‰²\n- æ•°å€¼è¶Šå°ï¼Œè‰²å½©è¶Šæš—ï¼Œè¶Šæ¥è¿‘äºé»‘è‰²ï¼›æ•°å€¼è¶Šå¤§ï¼Œè‰²å½©è¶Šäº®ï¼Œè¶Šæ¥è¿‘äºç™½è‰²ã€‚\n\n![HSL L](https://picb.zhimg.com/80/v2-ef76260bcc83056006bf0376e9036b79_1440w.jpg?source=1940ef5c)\n\n### HSB & HSV\n- HSB åˆç§° HSV\n- [HSV è‰²è½®- WebGL å®ç°](https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-hsv-wheel.html)\n\t- åƒç´ åæ ‡è½¬æ¢ä¸ºæåæ ‡ï¼Œå†é™¤ä»¥ 2Ï€ï¼Œå°±èƒ½å¾—åˆ° HSV çš„ H å€¼\n\t- é¼ æ ‡ä½ç½®çš„ xã€y åæ ‡æ¥å†³å®š S å’Œ V çš„å€¼\n\n\n#### S - Saturation - é¥±å’Œåº¦ - 0\\~1 æˆ–è€… 0%\\~100%é—´çš„å€¼\n- æ§åˆ¶çº¯è‰²ä¸­æ··å…¥ç™½è‰²çš„é‡ï¼Œå€¼è¶Šå¤§ï¼Œç™½è‰²è¶Šå°‘ï¼Œé¢œè‰²è¶Šçº¯ï¼›\n\n\n\n#### B - Brightness - äº®åº¦ - 0\\~1 æˆ–è€… 0%\\~100%é—´çš„å€¼\n- æ§åˆ¶çº¯è‰²ä¸­æ··å…¥é»‘è‰²çš„é‡ï¼Œå€¼è¶Šå¤§ï¼Œé»‘è‰²è¶Šå°‘ï¼Œæ˜åº¦è¶Šé«˜\n\n### RGB ç«‹æ–¹ä½“è½¬æ¢æˆ HSL / HSV è¿‡ç¨‹\n![RGB ç«‹æ–¹ä½“è½¬æ¢æˆ HSL / HSV è¿‡ç¨‹](http://p0.meituan.net/myvideodistribute/719dd96f97590c2fc3041f661e3db30c200249.png)\n\n- æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªè¿‡ç¨‹ç®€å•ç†è§£æˆï¼Œå°† RGB é¢œè‰²çš„ç«‹æ–¹ä½“ä»ç›´è§’åæ ‡ç³»æŠ•å½±åˆ°æåæ ‡ç³»çš„åœ†æŸ±ä¸Š\n- HSVï¼ˆè‰²ç›¸ã€é¥±å’Œåº¦ã€æ˜åº¦ï¼‰åœ¨æ¦‚å¿µä¸Šå¯ä»¥è¢«è®¤ä¸ºæ˜¯é¢œè‰²çš„å€’åœ†é”¥ä½“ï¼ˆé»‘ç‚¹åœ¨ä¸‹é¡¶ç‚¹ï¼Œç™½è‰²åœ¨ä¸Šåº•é¢åœ†å¿ƒï¼‰\n\t- ![HSV æ¦‚å¿µå›¾](https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/HSV_cone.png/440px-HSV_cone.png)\n- HSL åœ¨æ¦‚å¿µä¸Šè¡¨ç¤ºäº†ä¸€ä¸ªåŒåœ†é”¥ä½“å’Œåœ†çƒä½“ï¼ˆç™½è‰²åœ¨ä¸Šé¡¶ç‚¹ï¼Œé»‘è‰²åœ¨ä¸‹é¡¶ç‚¹ï¼Œæœ€å¤§æ¨ªåˆ‡é¢çš„åœ†å¿ƒæ˜¯åŠç¨‹ç°è‰²ï¼‰\n\t- ![HSL æ¦‚å¿µå›¾](https://pic4.zhimg.com/80/v2-3df1e851938562c2a9d1c76cc8af23e2_1440w.jpg?source=1940ef5c)\n- æˆ‘ä»¬å¯ä»¥ä»ä¸‹å›¾æ¥å¯¹æ¯” HSL & HSV\n\t- ![HSL & HSV å¯¹æ¯”å›¾](https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/HSL_HSV_cylinder_color_solid_comparison.png/800px-HSL_HSV_cylinder_color_solid_comparison.png)\n\n- **ä½†å³ä½¿æˆ‘ä»¬å¯ä»¥å‡åŒ€åœ°ä¿®æ”¹æ¯ç»„çš„äº®åº¦å’Œé¥±å’Œåº¦ï¼Œç”±äºäººçœ¼å¯¹ä¸åŒé¢‘ç‡çš„å…‰çš„æ•æ„Ÿåº¦ä¸åŒï¼Œæˆ‘ä»¬ä»ç„¶ä¼šæ„Ÿè§‰æœ‰çš„é¢œè‰²çœ‹èµ·æ¥å’Œå…¶ä»–çš„é¢œè‰²å·®è·æ˜æ˜¾ï¼Œæœ‰çš„é¢œè‰²è¿˜æ˜¯æ²¡é‚£ä¹ˆæ˜æ˜¾**\n- çœ‹ä¸‹é¢çš„ä¾‹å­\n\n\t```javascript\n\tfor(let i = 0; i < 20; i++) {\n\t  ctx.fillStyle = `hsl(${Math.floor(i * 15)}, 50%, 50%)`;\n\t  ctx.beginPath();\n\t  ctx.arc((i - 10) * 20, 60, 10, 0, Math.PI * 2);\n\t  ctx.fill();\n\t}\n\t\n\tfor(let i = 0; i < 20; i++) {\n\t  ctx.fillStyle = `hsl(${Math.floor((i % 2 ? 60 : 210) + 3 * i)}, 50%, 50%)`;\n\t  ctx.beginPath();\n\t  ctx.arc((i - 10) * 20, -60, 10, 0, Math.PI * 2);\n\t  ctx.fill();\n\t}\n\t```\n\t- æˆ‘ä»¬ç»˜åˆ¶ä¸¤æ’ä¸åŒçš„åœ†ï¼Œè®©ç¬¬ä¸€æ’æ¯ä¸ªåœ†çš„è‰²ç›¸é—´éš”éƒ½æ˜¯ 15ï¼Œå†è®©ç¬¬äºŒæ’åœ†çš„é¢œè‰²åœ¨è‰²ç›¸ 60 å’Œ 210 é™„è¿‘ä¸¤ä¸¤äº¤é”™ã€‚\n\t- æœ€ç»ˆç”Ÿæˆæ•ˆæœå¦‚ä¸‹ï¼š\n\t\t- ![HSL è‰²ç›¸ä¿®æ”¹](https://static001.geekbang.org/resource/image/67/61/674ae06ae45050bb2e9840a1c081b661.jpeg)\n\t- å¯ä»¥çœ‹å‡ºï¼š\n\t\t- ç¬¬ä¸€æ’åœ†ä½ ä¼šå‘ç°ï¼Œè™½ç„¶å®ƒä»¬çš„è‰²ç›¸ç›¸å·®éƒ½æ˜¯ 15ï¼Œä½†æ˜¯ç›¸äº’ä¹‹é—´é¢œè‰²å˜åŒ–å¹¶ä¸æ˜¯å‡åŒ€çš„ï¼Œå°¤å…¶æ˜¯ä¸­é—´å‡ ä¸ªç»¿è‰²åœ†çš„é¢œè‰²æ¯”è¾ƒæ¥è¿‘ã€‚\n\t\t- ç¬¬äºŒæ’åœ†ï¼Œè™½ç„¶è¿™äº›åœ†çš„äº®åº¦éƒ½æ˜¯ 50%ï¼Œä½†æ˜¯è“è‰²å’Œç´«è‰²çš„åœ†çœ‹èµ·æ¥å°±æ˜¯ä¸å¦‚åç»¿åé»„çš„åœ†äº®ã€‚\n\n- å› æ­¤ï¼ŒHSL ä¾ç„¶ä¸æ˜¯æœ€å®Œç¾çš„è‰²å½©è¡¨ç¤ºæ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å»ºç«‹ä¸€å¥—ç¬¦åˆäººç±»è®¤çŸ¥çš„æ ‡å‡†ã€‚è¿™ä¸ªæ ‡å‡†å°½å¯èƒ½åœ°æ»¡è¶³ä¸€ä¸‹ 2 ä¸ªåŸåˆ™\n\t- äººçœ¼çœ‹åˆ°çš„è‰²å·® = é¢œè‰²å‘é‡é—´çš„æ¬§æ°è·ç¦»\n\t- ç›¸åŒçš„äº®åº¦ï¼Œèƒ½è®©äººæ„Ÿè§‰äº®åº¦ç›¸åŒ\n\n<!-- äºæ˜¯ CIE Lab è¯ç”Ÿäº† -->\n\n\n## CIE Lab /  CIE Lch\n- [Labè‰²å½©ç©ºé—´](https://zh.wikipedia.org/wiki/Lab%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4)ï¼ˆè‹±è¯­ï¼šLab color spaceï¼‰æ˜¯é¢œè‰²-å¯¹ç«‹ç©ºé—´ï¼Œå¸¦æœ‰ç»´åº¦Lè¡¨ç¤ºäº®åº¦ï¼Œaå’Œbè¡¨ç¤ºé¢œè‰²å¯¹ç«‹ç»´åº¦ï¼ŒåŸºäºäº†éçº¿æ€§å‹ç¼©çš„CIE XYZè‰²å½©ç©ºé—´åæ ‡ã€‚\n- CIE Lab æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ç‚¹æ˜¯ï¼Œç›®å‰è¿˜æ²¡æœ‰èƒ½æ”¯æŒ CIE Lab çš„å›¾å½¢ç³»ç»Ÿï¼Œä½†[è§„èŒƒ](https://www.w3.org/TR/css-color-4/#funcdef-lab)ä¸­å·²ç»ç»™å‡ºäº† Lab é¢œè‰²å€¼çš„å®šä¹‰\n\t\n\t```\n\tlab() = lab( <percentage> <number> <number> [ / <alpha-value> ]? )\n\tlch() = lch( <percentage> <number> <hue> [ / <alpha-value> ]? )\n\t```\n\t\n- ä¸”ä¸€äº› JavaScript åº“ä¹Ÿå·²ç»å¯ä»¥ç›´æ¥å¤„ç† Lab é¢œè‰²ç©ºé—´äº†ï¼Œå¦‚ [d3-color](https://d3js.org.cn/document/d3-color/)\t\n\t- æˆ‘ä»¬å¯ä»¥é€šè¿‡ [Lab color picker](https://bl.ocks.org/mbostock/9f37cc207c0cb166921b) æ¥äº†è§£ä¸‰ä¸ªé¢œè‰²ä¹‹å‰çš„ç›¸äº’ä½œç”¨\n\n\t```javascript\n\tfor(let i = 0; i < 20; i++) {\n\t  const c = d3.lab(30, i * 15 - 150, i * 15 - 150).rgb();\n\t  ctx.fillStyle = `rgb(${c.r}, ${c.g}, ${c.b})`;\n\t  ctx.beginPath();\n\t  ctx.arc((i - 10) * 20, 60, 10, 0, Math.PI * 2);\n\t  ctx.fill();\n\t}\n\t\n\tfor(let i = 0; i < 20; i++) {\n\t  const c = d3.lab(i * 5, 80, 80).rgb();\n\t  ctx.fillStyle = `rgb(${c.r}, ${c.g}, ${c.b})`;\n\t  ctx.beginPath();\n\t  ctx.arc((i - 10) * 20, -60, 10, 0, Math.PI * 2);\n\t  ctx.fill();\n\t}\n\t```\n\t- è¿™ä¸ªä¾‹å­ä¸ HSL çš„ä¾‹å­ä¸€æ ·ï¼Œä¹Ÿæ˜¯æ˜¾ç¤ºä¸¤æ’åœ†å½¢ã€‚\n\t\t- ç¬¬ä¸€æ’ç›¸é‚»åœ†å½¢ä¹‹é—´çš„ lab è‰²å€¼çš„æ¬§æ°ç©ºé—´è·ç¦»ç›¸åŒ\n\t\t- ç¬¬äºŒæ’ç›¸é‚»åœ†å½¢ä¹‹é—´çš„äº®åº¦æŒ‰ 5 é˜¶çš„æ–¹å¼é€’å¢\n\t- ![d3 lab demo](https://static001.geekbang.org/resource/image/9c/92/9c0898db90d53fe4fd3e6b3c83043d92.jpeg)\n- å¯ä»¥çœ‹å‡ºï¼Œåœ¨ä»¥ CIELab æ–¹å¼å‘ˆç°çš„è‰²å½©å˜åŒ–ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®çš„æ•°å€¼å’Œäººçœ¼æ„ŸçŸ¥çš„ä¸€è‡´æ€§æ¯”è¾ƒå¼ºã€‚\n- è‡³æ­¤ï¼Œè§„èŒƒä¸­å‡ºç°çš„è‰²å½©ç©ºé—´è¡¨ç¤ºæ–¹æ³•å·²ç»ä»‹ç»å®Œäº†ã€‚\n\n\n### [Cubehelix](http://www.mrao.cam.ac.uk/~dag/CUBEHELIX/) è‰²ç›˜\n<!-- æœ€åï¼Œæˆ‘ä»¬å†æ¥è¯´ä¸€ç§ç‰¹æ®Šçš„é¢œè‰²è¡¨ç¤ºæ³• -->\n- å®ƒçš„åŸç†å°±æ˜¯åœ¨ RGB çš„ç«‹æ–¹ä¸­æ„å»ºä¸€æ®µèºæ—‹çº¿ï¼Œè®©è‰²ç›¸éšç€äº®åº¦å¢åŠ èºæ—‹å˜æ¢ã€‚\n- ![Cubehelix èºæ—‹çº¿åŸç†](https://static001.geekbang.org/resource/image/28/0c/281b8bbdeebyy0f3e62c80278267150c.jpg)\n- æˆ‘ä»¬å¯ä»¥ç”¨ [cubehelix](https://www.npmjs.com/package/cubehelix) å†™ä¸€ä¸ªé¢œè‰²éšç€é•¿åº¦å˜åŒ–çš„é•¿åº¦\n\t- é¦–å…ˆï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ cubehelix å‡½æ•°åˆ›å»ºä¸€ä¸ª color æ˜ å°„ã€‚\n\t\t- cubehelix å‡½æ•°æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªè‰²ç›˜æ˜ å°„å‡½æ•°ã€‚è¿™ä¸ªè¿”å›å‡½æ•°çš„å‚æ•°èŒƒå›´æ˜¯ 0 åˆ° 1ï¼Œå½“å®ƒä»å°åˆ°å¤§ä¾æ¬¡æ”¹å˜çš„æ—¶å€™ï¼Œä¸ä»…é¢œè‰²ä¼šä¾æ¬¡æ”¹å˜ï¼Œäº®åº¦ä¹Ÿä¼šä¾æ¬¡å¢å¼ºã€‚\n\t- ç„¶åï¼Œæˆ‘ä»¬ç”¨æ­£å¼¦å‡½æ•°æ¥æ¨¡æ‹Ÿæ•°æ®çš„å‘¨æœŸæ€§å˜åŒ–ï¼Œé€šè¿‡ color è·å–å½“å‰çš„é¢œè‰²å€¼ï¼Œå†æŠŠé¢œè‰²å€¼èµ‹ç»™ ctx.fillStyleï¼Œé¢œè‰²å°±èƒ½æ˜¾ç¤ºå‡ºæ¥äº†ã€‚\n\t- æœ€åï¼Œæˆ‘ä»¬ç”¨ rect å°†æŸ±çŠ¶å›¾ç”»å‡ºæ¥ï¼Œç”¨ requestAnimationFrame å®ç°åŠ¨ç”»å°±å¯ä»¥äº† ã€‚\n\n\t\n\t\n```javascript\nimport {cubehelix} from 'cubehelix';\n\t\nconst canvas = document.querySelector('canvas');\nconst ctx = canvas.getContext('2d');\n\t\nctx.translate(0, 256);\nctx.scale(1, -1);\n\t\nconst color = cubehelix(); // æ„é€ cubehelixè‰²ç›˜é¢œè‰²æ˜ å°„å‡½æ•°\nconst T = 2000;\n\t\nfunction update(t) {\n  const p = 0.5 + 0.5 * Math.sin(t / T);\n  ctx.clearRect(0, -256, 512, 512);\n  const {r, g, b} = color(p);\n  ctx.fillStyle = `rgb(${255 * r},${255 * g},${255 * b})`;\n  ctx.beginPath();\n  ctx.rect(20, -20, 480 * p, 40);\n  ctx.fill();\n  window.ctx = ctx;\n  requestAnimationFrame(update);\n}\n\t\nupdate(0);\n```\n\t\n- ![Cubehelix rect](https://static001.geekbang.org/resource/image/4d/ef/4d71b84fc3282e84a98141e444f658ef.gif)\n\n### Coverting\n- [hsl-to-rgb](https://www.w3.org/TR/css-color-4/#hsl-to-rgb)\n- [rgb-to-lab](https://www.w3.org/TR/css-color-4/#rgb-to-lab)\n- [lab-to-rgb](https://www.w3.org/TR/css-color-4/#lab-to-rgb)\n- [lab-to-lch](https://www.w3.org/TR/css-color-4/#lab-to-lch)\n- [lch-to-lab](https://www.w3.org/TR/css-color-4/#lch-to-lab)\n- [Sample code for color conversions](https://www.w3.org/TR/css-color-4/#color-conversion-code)\n\n\n## å‚è€ƒèµ„æ–™\n- [CSS Color Module Level 4](https://www.w3.org/TR/css-color-4/)\n- [wikipedia HSL&HSV](https://en.wikipedia.org/wiki/HSL_and_HSV)\n- [çŸ¥ä¹-è‰²å½©ç©ºé—´ä¸­çš„ HSLã€HSVã€HSB æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ](https://www.zhihu.com/question/22077462)\n- [d3-color](https://d3js.org.cn/document/d3-color/#api-reference)\n- [Cubehelix](http://www.mrao.cam.ac.uk/~dag/CUBEHELIX/)\n- [Cubehelixé¢œè‰²è¡¨ç®—æ³•](https://zhuanlan.zhihu.com/p/121055691)\n- [wikipedia Labè‰²å½©ç©ºé—´](https://zh.wikipedia.org/wiki/Lab%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4)\n- [JSå®ç°RGB-HSL-HSBç›¸äº’è½¬æ¢](http://wsyks.github.io/2017/03/17/JS%E5%AE%9E%E7%8E%B0RGB-HSL-HSB%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2/)\n\n## å†™åœ¨åé¢\n- ç¥å¤§å®¶å¤šå¤šå‘è´¢\n\n\n\n","slug":"é¢œè‰²ç©ºé—´","published":1,"updated":"2020-10-27T15:21:11.267Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u8j003qfw9k8hr10r3n","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li><p>æåˆ°è‰²å½©ï¼Œå³ä½¿æ˜¯åˆšæœ‰è¾¨çŸ¥èƒ½åŠ›çš„å°æœ‹å‹ï¼Œä¹Ÿèƒ½è¯´ä¸Šå‡ å¥ï½</p>\n</li>\n<li><p>é‚£æˆ‘ä»¬å‰ç«¯å·¥ç¨‹å¸ˆï¼Œæ— è®ºå·¥ä½œè¿˜æ˜¯ç”Ÿæ´»ï¼Œæ¯å¤©éƒ½åœ¨ä¸å„ç§è‰²å½©æ‰“äº¤é“ï¼Œé‚£ä¾¿æ›´æœ‰å¿…è¦ç³»ç»Ÿåœ°äº†è§£å…³äºè‰²å½©æ–¹é¢çš„çŸ¥è¯†</p>\n</li>\n<li><p>æœ¬æ–‡å°†ä»å‰ç«¯è§’åº¦ï¼ŒèŠèŠè‰²å½©ç©ºé—´</p>\n</li>\n<li><p>æ ¹æ® <a href=\"https://www.w3.org/TR/css-color-4/\" target=\"_blank\" rel=\"noopener\">CSS Color Module Level 4</a> æ ‡å‡†</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;color&gt; &#x3D; &lt;hex-color&gt; | &lt;named-color&gt; | currentcolor | transparent</span><br><span class=\"line\">          &lt;rgb()&gt; | &lt;rgba()&gt; | &lt;hsl()&gt; | &lt;hsla()&gt; | &lt;hwb()&gt; |</span><br><span class=\"line\">          &lt;lab()&gt; | &lt;lch()&gt; | &lt;gray()&gt; |</span><br><span class=\"line\">          &lt;color()&gt; | &lt;device-cmyk()&gt; |</span><br><span class=\"line\">          &lt;system-color&gt;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<a id=\"more\"></a>\n\n\n<h2 id=\"named-color\"><a href=\"#named-color\" class=\"headerlink\" title=\"named-color\"></a>named-color</h2><ul>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#named-color\" target=\"_blank\" rel=\"noopener\">#named-color</a></li>\n</ul>\n<h3 id=\"transparent\"><a href=\"#transparent\" class=\"headerlink\" title=\"transparent\"></a>transparent</h3><ul>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#valdef-color-transparent\" target=\"_blank\" rel=\"noopener\">#transparent</a></li>\n<li><a href=\"https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-1.html\" target=\"_blank\" rel=\"noopener\">&lt;color&gt; = transparent å°ä¾‹å­</a></li>\n</ul>\n<h2 id=\"currentcolor\"><a href=\"#currentcolor\" class=\"headerlink\" title=\"currentcolor\"></a>currentcolor</h2><ul>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#valdef-color-currentcolor\" target=\"_blank\" rel=\"noopener\">#currentcolor</a></li>\n<li><a href=\"https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-2.html\" target=\"_blank\" rel=\"noopener\">&lt;color&gt; = currentcolor å°ä¾‹å­</a></li>\n</ul>\n<h2 id=\"system-color\"><a href=\"#system-color\" class=\"headerlink\" title=\"system-color\"></a>system-color</h2><ul>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#css-system-colors\" target=\"_blank\" rel=\"noopener\">#system-colors</a></li>\n<li><a href=\"https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-3.html\" target=\"_blank\" rel=\"noopener\">&lt;color&gt; = &lt;system-color&gt;å°ä¾‹å­</a></li>\n</ul>\n<!-- è¿™äº›é›¶æ•£çš„ css color å±æ€§å€¼ç®€å•ä»‹ç»åˆ°è¿™ï¼Œåé¢æˆ‘ä»¬ç³»ç»Ÿçš„ä»‹ç»ä¸‹ï¼Œå‰©ä¸‹çš„å‡ ç§è‰²å½©åˆ†ç±» -->\n\n\n<h2 id=\"å‡è‰²æ³•æ··è‰²æ¨¡å‹-CMYK-ä¸-åŠ è‰²æ³•æ··è‰²æ¨¡å‹-RGB\"><a href=\"#å‡è‰²æ³•æ··è‰²æ¨¡å‹-CMYK-ä¸-åŠ è‰²æ³•æ··è‰²æ¨¡å‹-RGB\" class=\"headerlink\" title=\"å‡è‰²æ³•æ··è‰²æ¨¡å‹ CMYK ä¸ åŠ è‰²æ³•æ··è‰²æ¨¡å‹ RGB\"></a>å‡è‰²æ³•æ··è‰²æ¨¡å‹ CMYK ä¸ åŠ è‰²æ³•æ··è‰²æ¨¡å‹ RGB</h2><h3 id=\"å‡è‰²æ³•æ··è‰²æ¨¡å‹-CMYK\"><a href=\"#å‡è‰²æ³•æ··è‰²æ¨¡å‹-CMYK\" class=\"headerlink\" title=\"å‡è‰²æ³•æ··è‰²æ¨¡å‹ CMYK\"></a>å‡è‰²æ³•æ··è‰²æ¨¡å‹ <a href=\"https://zh.wikipedia.org/wiki/%E5%8D%B0%E5%88%B7%E5%9B%9B%E5%88%86%E8%89%B2%E6%A8%A1%E5%BC%8F\" target=\"_blank\" rel=\"noopener\">CMYK</a></h3><ul>\n<li>C - <strong>C</strong>yan - é’è‰²</li>\n<li>M - <strong>M</strong>agenta - çº¢è‰²</li>\n<li>Y - <strong>Y</strong>ellow - é»„è‰²</li>\n<li>K - blac<strong>K</strong> - é»‘è‰²ï¼ˆé˜²æ­¢ä¸ RGB çš„ B å†²çªï¼‰</li>\n<li>ä¸Šè¿‡ç¾æœ¯è¯¾ï¼Œåº”è¯¥å¬è¿‡â€œçº¢é»„è“â€ä¸‰åŸè‰²çš„è¯´æ³•ï¼Œä½†è¿™å’Œ CMYK ä¸å¤ªä¸€æ ·ï¼Œå®é™…ä¸Šï¼Œé¢œæ–™æ˜¾ç¤ºé¢œè‰²çš„åŸç†æ˜¯å®ƒå¸æ”¶äº†æ‰€æœ‰åˆ«çš„é¢œè‰²çš„å…‰ï¼Œåªåå°„ä¸€ç§é¢œè‰²ï¼Œæ‰€ä»¥é¢œæ–™ä¸‰åŸè‰²å…¶å®æ˜¯çº¢ã€ç»¿ã€è“çš„è¡¥è‰²ï¼Œä¹Ÿå°±æ˜¯ï¼šå“çº¢ã€é»„ã€é’ã€‚å› ä¸ºå®ƒä»¬è·Ÿçº¢ã€é»„ã€è“ç›¸è¿‘ï¼Œæ‰€ä»¥æœ‰äº†è¿™æ ·çš„è¯´æ³•ã€‚</li>\n<li>ä¸ºä»€ä¹ˆä¼šæ¯”ä¸‰åŸè‰²å¤šäº†ä¸€è‰²å‘¢ï¼Ÿ<ul>\n<li>ä¸‰ç§é¢œè‰²è°ƒæˆé»‘è‰²ï¼Œ<strong>è´µ</strong></li>\n<li>ä¸”<strong>ä¸æ˜¯çº¯ç²¹çš„é»‘</strong>ï¼Œä¸‰è‰²ç­‰é‡ç›¸åŠ ä¹‹ååªèƒ½å½¢æˆä¸€ç§æ·±ç°æˆ–æ·±è¤ï¼ˆæˆ‘è¦äº”å½©æ–‘æ–“çš„é»‘</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"åŠ è‰²æ³•æ··è‰²æ¨¡å‹-RGB\"><a href=\"#åŠ è‰²æ³•æ··è‰²æ¨¡å‹-RGB\" class=\"headerlink\" title=\"åŠ è‰²æ³•æ··è‰²æ¨¡å‹ RGB\"></a>åŠ è‰²æ³•æ··è‰²æ¨¡å‹ <a href=\"https://www.wikiwand.com/en/RGB_color_model\" target=\"_blank\" rel=\"noopener\">RGB</a></h3><ul>\n<li>æˆ‘ä»¬åœ¨ CSS æ ·å¼ä¸­çœ‹åˆ°çš„å½¢å¼å¦‚ #RRGGBB çš„é¢œè‰²ä»£ç ï¼Œå°±æ˜¯ RGB é¢œè‰²çš„åå…­è¿›åˆ¶è¡¨ç¤ºæ³•ï¼Œå…¶ä¸­ RRã€GGã€BB åˆ†åˆ«æ˜¯ä¸¤ä½åå…­è¿›åˆ¶æ•°å­—ï¼Œè¡¨ç¤ºçº¢ã€ç»¿ã€è“ä¸‰è‰²é€šé“çš„è‰²é˜¶ã€‚è‰²é˜¶å¯ä»¥è¡¨ç¤ºæŸä¸ªé€šé“çš„å¼ºå¼±ã€‚</li>\n<li>ä½† RGB å¹¶ä¸èƒ½è¡¨ç¤ºäººçœ¼æ‰€è§çš„æ‰€æœ‰é¢œè‰²ï¼Œå®ƒåªèƒ½è¡¨ç¤ºä¸‹é¢çš„è¿™ä¸ªåŒºåŸŸ</li>\n</ul>\n<p><img src=\"http://p1.meituan.net/myvideodistribute/a9c085522b90c1a0254ac3c64ac37728490575.png\" alt=\"äººçœ¼çœ‹åˆ°çš„é¢œè‰²vsRGBèƒ½è¡¨ç¤ºçš„é¢œè‰²\"></p>\n<ul>\n<li>RGB å¯¹è‰²å½©çš„æè¿°ï¼Œå¯¹è®¡ç®—æœºå‹å¥½ï¼Œä½†ä¸å¤Ÿäººæ€§åŒ–</li>\n<li>RGB æˆ‘ä»¬åªèƒ½å¤§è‡´åˆ¤æ–­å‡ºå®ƒåå‘äºçº¢è‰²ã€ç»¿è‰²è¿˜æ˜¯è“è‰²ï¼Œæˆ–è€…åœ¨é¢œè‰²ç«‹æ–¹ä½“çš„å¤§è‡´ä½ç½®ã€‚</li>\n<li>ä»¥åŠå¯¹æ¯”ä¸¤ä¸ª RGB é¢œè‰²çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡å¯¹æ¯”å®ƒä»¬åœ¨ RGB ç«‹æ–¹ä½“ä¸­çš„ç›¸å¯¹è·ç¦»ï¼Œæ¥åˆ¤æ–­å®ƒä»¬çš„é¢œè‰²å·®å¼‚ã€‚ </li>\n</ul>\n<p><img src=\"http://p1.meituan.net/myvideodistribute/15a8b3e684bdfce7333105cc23ed332d239313.png\" alt=\"RGB ç«‹æ–¹ä½“å‡ ä½•è¡¨ç¤º\"></p>\n<ul>\n<li>ä½†æˆ‘ä»¬å¯¹è‰²å½©çš„è®¤è¯†å¾€å¾€å…ˆæ˜¯ï¼šé¢œè‰²æ˜¯ä»€ä¹ˆï¼Œé²œè‰³ä¸é²œè‰³ï¼Œäº®è¿˜æ˜¯æš—</li>\n<li>and Itâ€™s not easy to to alter an RGB color to produce a lighter variant of the same hue.<ul>\n<li>è¿™åœ¨æˆ‘ä»¬å¼€å‘ä¸­ä¹Ÿååˆ†å¸¸è§ï¼Œæœ‰äº›æ—¶å€™è®¾è®¡å¸ˆå®šä¸‹è§†è§‰åŸºè°ƒå’Œä¸»è‰²ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æ•°æ®æƒ…å†µç”±å‰ç«¯åŠ¨æ€ç”Ÿæˆé¢œè‰²å€¼</li>\n</ul>\n</li>\n</ul>\n<!-- è¿‡æ¸¡åˆ° HSV HSL -->\n\n<h2 id=\"HSL-HSB-amp-HSV\"><a href=\"#HSL-HSB-amp-HSV\" class=\"headerlink\" title=\"HSL HSB&amp;HSV\"></a>HSL HSB&amp;HSV</h2><ul>\n<li>CSS å’Œ Canvas2D éƒ½å¯ä»¥ç›´æ¥æ”¯æŒ HSL é¢œè‰²ï¼Œåªæœ‰ WebGL éœ€è¦åš RGB2HSV è½¬æ¢ã€‚</li>\n</ul>\n<h3 id=\"HSL\"><a href=\"#HSL\" class=\"headerlink\" title=\"HSL\"></a>HSL</h3><h4 id=\"H-Hue-è‰²ç›¸-0-360Â°çš„åœ†å¿ƒè§’\"><a href=\"#H-Hue-è‰²ç›¸-0-360Â°çš„åœ†å¿ƒè§’\" class=\"headerlink\" title=\"H - Hue - è‰²ç›¸ - 0-360Â°çš„åœ†å¿ƒè§’\"></a>H - Hue - è‰²ç›¸ - 0-360Â°çš„åœ†å¿ƒè§’</h4><ul>\n<li>H(hue)åˆ†é‡ï¼Œä»£è¡¨çš„æ˜¯äººçœ¼æ‰€èƒ½æ„ŸçŸ¥çš„é¢œè‰²èŒƒå›´ï¼Œè¿™äº›é¢œè‰²åˆ†å¸ƒåœ¨ä¸€ä¸ªå¹³é¢çš„è‰²ç›¸ç¯ä¸Šï¼Œå–å€¼èŒƒå›´æ˜¯0Â°åˆ°360Â°çš„åœ†å¿ƒè§’ï¼Œæ¯ä¸ªè§’åº¦å¯ä»¥ä»£è¡¨ä¸€ç§é¢œè‰²ã€‚</li>\n<li>è‰²ç›¸å€¼çš„æ„ä¹‰åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸æ”¹å˜å…‰æ„Ÿçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ—‹è½¬è‰²ç›¸ç¯æ¥æ”¹å˜é¢œè‰²ã€‚</li>\n<li>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½è‰²ç›¸ç¯ä¸Šçš„å…­å¤§ä¸»è‰²ï¼Œç”¨ä½œåŸºæœ¬å‚ç…§ï¼š360Â°/0Â°çº¢ã€60Â°é»„ã€120Â°ç»¿ã€180Â°é’ã€240Â°è“ã€300Â°æ´‹çº¢ï¼Œå®ƒä»¬åœ¨è‰²ç›¸ç¯ä¸ŠæŒ‰ç…§60Â°åœ†å¿ƒè§’çš„é—´éš”æ’åˆ—ã€‚</li>\n</ul>\n<p><img src=\"http://p0.meituan.net/myvideodistribute/01ed240165965600fde0a031d193f8c6325809.png\" alt=\"HSL è‰²ç›¸ç¯\"></p>\n<h4 id=\"S-Saturation-é¥±å’Œåº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼\"><a href=\"#S-Saturation-é¥±å’Œåº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼\" class=\"headerlink\" title=\"S - Saturation - é¥±å’Œåº¦ - 0~1 æˆ–è€… 0%~100% é—´çš„å€¼\"></a>S - Saturation - é¥±å’Œåº¦ - 0~1 æˆ–è€… 0%~100% é—´çš„å€¼</h4><ul>\n<li>å’Œé»‘ç™½æ²¡æœ‰å…³ç³»ï¼Œé¥±å’Œåº¦ä¸æ§åˆ¶é¢œè‰²ä¸­æ··å…¥é»‘ç™½çš„å¤šå¯¡</li>\n<li>æ•°å€¼è¶Šå¤§ï¼Œé¢œè‰²ä¸­çš„ç°è‰²è¶Šå°‘ï¼Œé¢œè‰²è¶Šé²œè‰³ï¼Œå‘ˆç°ä¸€ç§ä»ç°åº¦åˆ°çº¯è‰²çš„å˜åŒ–ã€‚</li>\n</ul>\n<p><img src=\"https://pic1.zhimg.com/80/v2-e606821a1171451b35f08b68aaf833b9_1440w.jpg?source=1940ef5c\" alt=\"HSL S\"></p>\n<h4 id=\"L-Lightness-äº®åº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼\"><a href=\"#L-Lightness-äº®åº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼\" class=\"headerlink\" title=\"L - Lightness - äº®åº¦ - 0~1 æˆ–è€… 0%~100% é—´çš„å€¼\"></a>L - Lightness - äº®åº¦ - 0~1 æˆ–è€… 0%~100% é—´çš„å€¼</h4><ul>\n<li>æ§åˆ¶çº¯è‰²ä¸­çš„æ··å…¥çš„é»‘ç™½ä¸¤ç§é¢œè‰²</li>\n<li>æ•°å€¼è¶Šå°ï¼Œè‰²å½©è¶Šæš—ï¼Œè¶Šæ¥è¿‘äºé»‘è‰²ï¼›æ•°å€¼è¶Šå¤§ï¼Œè‰²å½©è¶Šäº®ï¼Œè¶Šæ¥è¿‘äºç™½è‰²ã€‚</li>\n</ul>\n<p><img src=\"https://picb.zhimg.com/80/v2-ef76260bcc83056006bf0376e9036b79_1440w.jpg?source=1940ef5c\" alt=\"HSL L\"></p>\n<h3 id=\"HSB-amp-HSV\"><a href=\"#HSB-amp-HSV\" class=\"headerlink\" title=\"HSB &amp; HSV\"></a>HSB &amp; HSV</h3><ul>\n<li>HSB åˆç§° HSV</li>\n<li><a href=\"https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-hsv-wheel.html\" target=\"_blank\" rel=\"noopener\">HSV è‰²è½®- WebGL å®ç°</a><ul>\n<li>åƒç´ åæ ‡è½¬æ¢ä¸ºæåæ ‡ï¼Œå†é™¤ä»¥ 2Ï€ï¼Œå°±èƒ½å¾—åˆ° HSV çš„ H å€¼</li>\n<li>é¼ æ ‡ä½ç½®çš„ xã€y åæ ‡æ¥å†³å®š S å’Œ V çš„å€¼</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"S-Saturation-é¥±å’Œåº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼-1\"><a href=\"#S-Saturation-é¥±å’Œåº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼-1\" class=\"headerlink\" title=\"S - Saturation - é¥±å’Œåº¦ - 0~1 æˆ–è€… 0%~100%é—´çš„å€¼\"></a>S - Saturation - é¥±å’Œåº¦ - 0~1 æˆ–è€… 0%~100%é—´çš„å€¼</h4><ul>\n<li>æ§åˆ¶çº¯è‰²ä¸­æ··å…¥ç™½è‰²çš„é‡ï¼Œå€¼è¶Šå¤§ï¼Œç™½è‰²è¶Šå°‘ï¼Œé¢œè‰²è¶Šçº¯ï¼›</li>\n</ul>\n<h4 id=\"B-Brightness-äº®åº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼\"><a href=\"#B-Brightness-äº®åº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼\" class=\"headerlink\" title=\"B - Brightness - äº®åº¦ - 0~1 æˆ–è€… 0%~100%é—´çš„å€¼\"></a>B - Brightness - äº®åº¦ - 0~1 æˆ–è€… 0%~100%é—´çš„å€¼</h4><ul>\n<li>æ§åˆ¶çº¯è‰²ä¸­æ··å…¥é»‘è‰²çš„é‡ï¼Œå€¼è¶Šå¤§ï¼Œé»‘è‰²è¶Šå°‘ï¼Œæ˜åº¦è¶Šé«˜</li>\n</ul>\n<h3 id=\"RGB-ç«‹æ–¹ä½“è½¬æ¢æˆ-HSL-HSV-è¿‡ç¨‹\"><a href=\"#RGB-ç«‹æ–¹ä½“è½¬æ¢æˆ-HSL-HSV-è¿‡ç¨‹\" class=\"headerlink\" title=\"RGB ç«‹æ–¹ä½“è½¬æ¢æˆ HSL / HSV è¿‡ç¨‹\"></a>RGB ç«‹æ–¹ä½“è½¬æ¢æˆ HSL / HSV è¿‡ç¨‹</h3><p><img src=\"http://p0.meituan.net/myvideodistribute/719dd96f97590c2fc3041f661e3db30c200249.png\" alt=\"RGB ç«‹æ–¹ä½“è½¬æ¢æˆ HSL / HSV è¿‡ç¨‹\"></p>\n<ul>\n<li><p>æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªè¿‡ç¨‹ç®€å•ç†è§£æˆï¼Œå°† RGB é¢œè‰²çš„ç«‹æ–¹ä½“ä»ç›´è§’åæ ‡ç³»æŠ•å½±åˆ°æåæ ‡ç³»çš„åœ†æŸ±ä¸Š</p>\n</li>\n<li><p>HSVï¼ˆè‰²ç›¸ã€é¥±å’Œåº¦ã€æ˜åº¦ï¼‰åœ¨æ¦‚å¿µä¸Šå¯ä»¥è¢«è®¤ä¸ºæ˜¯é¢œè‰²çš„å€’åœ†é”¥ä½“ï¼ˆé»‘ç‚¹åœ¨ä¸‹é¡¶ç‚¹ï¼Œç™½è‰²åœ¨ä¸Šåº•é¢åœ†å¿ƒï¼‰</p>\n<ul>\n<li><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/HSV_cone.png/440px-HSV_cone.png\" alt=\"HSV æ¦‚å¿µå›¾\"></li>\n</ul>\n</li>\n<li><p>HSL åœ¨æ¦‚å¿µä¸Šè¡¨ç¤ºäº†ä¸€ä¸ªåŒåœ†é”¥ä½“å’Œåœ†çƒä½“ï¼ˆç™½è‰²åœ¨ä¸Šé¡¶ç‚¹ï¼Œé»‘è‰²åœ¨ä¸‹é¡¶ç‚¹ï¼Œæœ€å¤§æ¨ªåˆ‡é¢çš„åœ†å¿ƒæ˜¯åŠç¨‹ç°è‰²ï¼‰</p>\n<ul>\n<li><img src=\"https://pic4.zhimg.com/80/v2-3df1e851938562c2a9d1c76cc8af23e2_1440w.jpg?source=1940ef5c\" alt=\"HSL æ¦‚å¿µå›¾\"></li>\n</ul>\n</li>\n<li><p>æˆ‘ä»¬å¯ä»¥ä»ä¸‹å›¾æ¥å¯¹æ¯” HSL &amp; HSV</p>\n<ul>\n<li><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/HSL_HSV_cylinder_color_solid_comparison.png/800px-HSL_HSV_cylinder_color_solid_comparison.png\" alt=\"HSL &amp; HSV å¯¹æ¯”å›¾\"></li>\n</ul>\n</li>\n<li><p><strong>ä½†å³ä½¿æˆ‘ä»¬å¯ä»¥å‡åŒ€åœ°ä¿®æ”¹æ¯ç»„çš„äº®åº¦å’Œé¥±å’Œåº¦ï¼Œç”±äºäººçœ¼å¯¹ä¸åŒé¢‘ç‡çš„å…‰çš„æ•æ„Ÿåº¦ä¸åŒï¼Œæˆ‘ä»¬ä»ç„¶ä¼šæ„Ÿè§‰æœ‰çš„é¢œè‰²çœ‹èµ·æ¥å’Œå…¶ä»–çš„é¢œè‰²å·®è·æ˜æ˜¾ï¼Œæœ‰çš„é¢œè‰²è¿˜æ˜¯æ²¡é‚£ä¹ˆæ˜æ˜¾</strong></p>\n</li>\n<li><p>çœ‹ä¸‹é¢çš„ä¾‹å­</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">20</span>; i++) &#123;</span><br><span class=\"line\">  ctx.fillStyle = <span class=\"string\">`hsl(<span class=\"subst\">$&#123;<span class=\"built_in\">Math</span>.floor(i * <span class=\"number\">15</span>)&#125;</span>, 50%, 50%)`</span>;</span><br><span class=\"line\">  ctx.beginPath();</span><br><span class=\"line\">  ctx.arc((i - <span class=\"number\">10</span>) * <span class=\"number\">20</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>, <span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.PI * <span class=\"number\">2</span>);</span><br><span class=\"line\">  ctx.fill();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">20</span>; i++) &#123;</span><br><span class=\"line\">  ctx.fillStyle = <span class=\"string\">`hsl(<span class=\"subst\">$&#123;<span class=\"built_in\">Math</span>.floor((i % <span class=\"number\">2</span> ? <span class=\"number\">60</span> : <span class=\"number\">210</span>) + <span class=\"number\">3</span> * i)&#125;</span>, 50%, 50%)`</span>;</span><br><span class=\"line\">  ctx.beginPath();</span><br><span class=\"line\">  ctx.arc((i - <span class=\"number\">10</span>) * <span class=\"number\">20</span>, <span class=\"number\">-60</span>, <span class=\"number\">10</span>, <span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.PI * <span class=\"number\">2</span>);</span><br><span class=\"line\">  ctx.fill();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>æˆ‘ä»¬ç»˜åˆ¶ä¸¤æ’ä¸åŒçš„åœ†ï¼Œè®©ç¬¬ä¸€æ’æ¯ä¸ªåœ†çš„è‰²ç›¸é—´éš”éƒ½æ˜¯ 15ï¼Œå†è®©ç¬¬äºŒæ’åœ†çš„é¢œè‰²åœ¨è‰²ç›¸ 60 å’Œ 210 é™„è¿‘ä¸¤ä¸¤äº¤é”™ã€‚</li>\n<li>æœ€ç»ˆç”Ÿæˆæ•ˆæœå¦‚ä¸‹ï¼š<ul>\n<li><img src=\"https://static001.geekbang.org/resource/image/67/61/674ae06ae45050bb2e9840a1c081b661.jpeg\" alt=\"HSL è‰²ç›¸ä¿®æ”¹\"></li>\n</ul>\n</li>\n<li>å¯ä»¥çœ‹å‡ºï¼š<ul>\n<li>ç¬¬ä¸€æ’åœ†ä½ ä¼šå‘ç°ï¼Œè™½ç„¶å®ƒä»¬çš„è‰²ç›¸ç›¸å·®éƒ½æ˜¯ 15ï¼Œä½†æ˜¯ç›¸äº’ä¹‹é—´é¢œè‰²å˜åŒ–å¹¶ä¸æ˜¯å‡åŒ€çš„ï¼Œå°¤å…¶æ˜¯ä¸­é—´å‡ ä¸ªç»¿è‰²åœ†çš„é¢œè‰²æ¯”è¾ƒæ¥è¿‘ã€‚</li>\n<li>ç¬¬äºŒæ’åœ†ï¼Œè™½ç„¶è¿™äº›åœ†çš„äº®åº¦éƒ½æ˜¯ 50%ï¼Œä½†æ˜¯è“è‰²å’Œç´«è‰²çš„åœ†çœ‹èµ·æ¥å°±æ˜¯ä¸å¦‚åç»¿åé»„çš„åœ†äº®ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å› æ­¤ï¼ŒHSL ä¾ç„¶ä¸æ˜¯æœ€å®Œç¾çš„è‰²å½©è¡¨ç¤ºæ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å»ºç«‹ä¸€å¥—ç¬¦åˆäººç±»è®¤çŸ¥çš„æ ‡å‡†ã€‚è¿™ä¸ªæ ‡å‡†å°½å¯èƒ½åœ°æ»¡è¶³ä¸€ä¸‹ 2 ä¸ªåŸåˆ™</p>\n<ul>\n<li>äººçœ¼çœ‹åˆ°çš„è‰²å·® = é¢œè‰²å‘é‡é—´çš„æ¬§æ°è·ç¦»</li>\n<li>ç›¸åŒçš„äº®åº¦ï¼Œèƒ½è®©äººæ„Ÿè§‰äº®åº¦ç›¸åŒ</li>\n</ul>\n</li>\n</ul>\n<!-- äºæ˜¯ CIE Lab è¯ç”Ÿäº† -->\n\n\n<h2 id=\"CIE-Lab-CIE-Lch\"><a href=\"#CIE-Lab-CIE-Lch\" class=\"headerlink\" title=\"CIE Lab /  CIE Lch\"></a>CIE Lab /  CIE Lch</h2><ul>\n<li><p><a href=\"https://zh.wikipedia.org/wiki/Lab%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4\" target=\"_blank\" rel=\"noopener\">Labè‰²å½©ç©ºé—´</a>ï¼ˆè‹±è¯­ï¼šLab color spaceï¼‰æ˜¯é¢œè‰²-å¯¹ç«‹ç©ºé—´ï¼Œå¸¦æœ‰ç»´åº¦Lè¡¨ç¤ºäº®åº¦ï¼Œaå’Œbè¡¨ç¤ºé¢œè‰²å¯¹ç«‹ç»´åº¦ï¼ŒåŸºäºäº†éçº¿æ€§å‹ç¼©çš„CIE XYZè‰²å½©ç©ºé—´åæ ‡ã€‚</p>\n</li>\n<li><p>CIE Lab æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ç‚¹æ˜¯ï¼Œç›®å‰è¿˜æ²¡æœ‰èƒ½æ”¯æŒ CIE Lab çš„å›¾å½¢ç³»ç»Ÿï¼Œä½†<a href=\"https://www.w3.org/TR/css-color-4/#funcdef-lab\" target=\"_blank\" rel=\"noopener\">è§„èŒƒ</a>ä¸­å·²ç»ç»™å‡ºäº† Lab é¢œè‰²å€¼çš„å®šä¹‰</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lab() &#x3D; lab( &lt;percentage&gt; &lt;number&gt; &lt;number&gt; [ &#x2F; &lt;alpha-value&gt; ]? )</span><br><span class=\"line\">lch() &#x3D; lch( &lt;percentage&gt; &lt;number&gt; &lt;hue&gt; [ &#x2F; &lt;alpha-value&gt; ]? )</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ä¸”ä¸€äº› JavaScript åº“ä¹Ÿå·²ç»å¯ä»¥ç›´æ¥å¤„ç† Lab é¢œè‰²ç©ºé—´äº†ï¼Œå¦‚ <a href=\"https://d3js.org.cn/document/d3-color/\" target=\"_blank\" rel=\"noopener\">d3-color</a>    </p>\n<ul>\n<li><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <a href=\"https://bl.ocks.org/mbostock/9f37cc207c0cb166921b\" target=\"_blank\" rel=\"noopener\">Lab color picker</a> æ¥äº†è§£ä¸‰ä¸ªé¢œè‰²ä¹‹å‰çš„ç›¸äº’ä½œç”¨</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">20</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> c = d3.lab(<span class=\"number\">30</span>, i * <span class=\"number\">15</span> - <span class=\"number\">150</span>, i * <span class=\"number\">15</span> - <span class=\"number\">150</span>).rgb();</span><br><span class=\"line\">  ctx.fillStyle = <span class=\"string\">`rgb(<span class=\"subst\">$&#123;c.r&#125;</span>, <span class=\"subst\">$&#123;c.g&#125;</span>, <span class=\"subst\">$&#123;c.b&#125;</span>)`</span>;</span><br><span class=\"line\">  ctx.beginPath();</span><br><span class=\"line\">  ctx.arc((i - <span class=\"number\">10</span>) * <span class=\"number\">20</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>, <span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.PI * <span class=\"number\">2</span>);</span><br><span class=\"line\">  ctx.fill();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">20</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> c = d3.lab(i * <span class=\"number\">5</span>, <span class=\"number\">80</span>, <span class=\"number\">80</span>).rgb();</span><br><span class=\"line\">  ctx.fillStyle = <span class=\"string\">`rgb(<span class=\"subst\">$&#123;c.r&#125;</span>, <span class=\"subst\">$&#123;c.g&#125;</span>, <span class=\"subst\">$&#123;c.b&#125;</span>)`</span>;</span><br><span class=\"line\">  ctx.beginPath();</span><br><span class=\"line\">  ctx.arc((i - <span class=\"number\">10</span>) * <span class=\"number\">20</span>, <span class=\"number\">-60</span>, <span class=\"number\">10</span>, <span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.PI * <span class=\"number\">2</span>);</span><br><span class=\"line\">  ctx.fill();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>è¿™ä¸ªä¾‹å­ä¸ HSL çš„ä¾‹å­ä¸€æ ·ï¼Œä¹Ÿæ˜¯æ˜¾ç¤ºä¸¤æ’åœ†å½¢ã€‚</p>\n<ul>\n<li>ç¬¬ä¸€æ’ç›¸é‚»åœ†å½¢ä¹‹é—´çš„ lab è‰²å€¼çš„æ¬§æ°ç©ºé—´è·ç¦»ç›¸åŒ</li>\n<li>ç¬¬äºŒæ’ç›¸é‚»åœ†å½¢ä¹‹é—´çš„äº®åº¦æŒ‰ 5 é˜¶çš„æ–¹å¼é€’å¢</li>\n</ul>\n</li>\n<li><p><img src=\"https://static001.geekbang.org/resource/image/9c/92/9c0898db90d53fe4fd3e6b3c83043d92.jpeg\" alt=\"d3 lab demo\"></p>\n</li>\n</ul>\n</li>\n<li><p>å¯ä»¥çœ‹å‡ºï¼Œåœ¨ä»¥ CIELab æ–¹å¼å‘ˆç°çš„è‰²å½©å˜åŒ–ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®çš„æ•°å€¼å’Œäººçœ¼æ„ŸçŸ¥çš„ä¸€è‡´æ€§æ¯”è¾ƒå¼ºã€‚</p>\n</li>\n<li><p>è‡³æ­¤ï¼Œè§„èŒƒä¸­å‡ºç°çš„è‰²å½©ç©ºé—´è¡¨ç¤ºæ–¹æ³•å·²ç»ä»‹ç»å®Œäº†ã€‚</p>\n</li>\n</ul>\n<h3 id=\"Cubehelix-è‰²ç›˜\"><a href=\"#Cubehelix-è‰²ç›˜\" class=\"headerlink\" title=\"Cubehelix è‰²ç›˜\"></a><a href=\"http://www.mrao.cam.ac.uk/~dag/CUBEHELIX/\" target=\"_blank\" rel=\"noopener\">Cubehelix</a> è‰²ç›˜</h3><!-- æœ€åï¼Œæˆ‘ä»¬å†æ¥è¯´ä¸€ç§ç‰¹æ®Šçš„é¢œè‰²è¡¨ç¤ºæ³• -->\n<ul>\n<li>å®ƒçš„åŸç†å°±æ˜¯åœ¨ RGB çš„ç«‹æ–¹ä¸­æ„å»ºä¸€æ®µèºæ—‹çº¿ï¼Œè®©è‰²ç›¸éšç€äº®åº¦å¢åŠ èºæ—‹å˜æ¢ã€‚</li>\n<li><img src=\"https://static001.geekbang.org/resource/image/28/0c/281b8bbdeebyy0f3e62c80278267150c.jpg\" alt=\"Cubehelix èºæ—‹çº¿åŸç†\"></li>\n<li>æˆ‘ä»¬å¯ä»¥ç”¨ <a href=\"https://www.npmjs.com/package/cubehelix\" target=\"_blank\" rel=\"noopener\">cubehelix</a> å†™ä¸€ä¸ªé¢œè‰²éšç€é•¿åº¦å˜åŒ–çš„é•¿åº¦<ul>\n<li>é¦–å…ˆï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ cubehelix å‡½æ•°åˆ›å»ºä¸€ä¸ª color æ˜ å°„ã€‚<ul>\n<li>cubehelix å‡½æ•°æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªè‰²ç›˜æ˜ å°„å‡½æ•°ã€‚è¿™ä¸ªè¿”å›å‡½æ•°çš„å‚æ•°èŒƒå›´æ˜¯ 0 åˆ° 1ï¼Œå½“å®ƒä»å°åˆ°å¤§ä¾æ¬¡æ”¹å˜çš„æ—¶å€™ï¼Œä¸ä»…é¢œè‰²ä¼šä¾æ¬¡æ”¹å˜ï¼Œäº®åº¦ä¹Ÿä¼šä¾æ¬¡å¢å¼ºã€‚</li>\n</ul>\n</li>\n<li>ç„¶åï¼Œæˆ‘ä»¬ç”¨æ­£å¼¦å‡½æ•°æ¥æ¨¡æ‹Ÿæ•°æ®çš„å‘¨æœŸæ€§å˜åŒ–ï¼Œé€šè¿‡ color è·å–å½“å‰çš„é¢œè‰²å€¼ï¼Œå†æŠŠé¢œè‰²å€¼èµ‹ç»™ ctx.fillStyleï¼Œé¢œè‰²å°±èƒ½æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</li>\n<li>æœ€åï¼Œæˆ‘ä»¬ç”¨ rect å°†æŸ±çŠ¶å›¾ç”»å‡ºæ¥ï¼Œç”¨ requestAnimationFrame å®ç°åŠ¨ç”»å°±å¯ä»¥äº† ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;cubehelix&#125; <span class=\"keyword\">from</span> <span class=\"string\">'cubehelix'</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"keyword\">const</span> canvas = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'canvas'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\">ctx.translate(<span class=\"number\">0</span>, <span class=\"number\">256</span>);</span><br><span class=\"line\">ctx.scale(<span class=\"number\">1</span>, <span class=\"number\">-1</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"keyword\">const</span> color = cubehelix(); <span class=\"comment\">// æ„é€ cubehelixè‰²ç›˜é¢œè‰²æ˜ å°„å‡½æ•°</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> T = <span class=\"number\">2000</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"number\">0.5</span> + <span class=\"number\">0.5</span> * <span class=\"built_in\">Math</span>.sin(t / T);</span><br><span class=\"line\">  ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">-256</span>, <span class=\"number\">512</span>, <span class=\"number\">512</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;r, g, b&#125; = color(p);</span><br><span class=\"line\">  ctx.fillStyle = <span class=\"string\">`rgb(<span class=\"subst\">$&#123;<span class=\"number\">255</span> * r&#125;</span>,<span class=\"subst\">$&#123;<span class=\"number\">255</span> * g&#125;</span>,<span class=\"subst\">$&#123;<span class=\"number\">255</span> * b&#125;</span>)`</span>;</span><br><span class=\"line\">  ctx.beginPath();</span><br><span class=\"line\">  ctx.rect(<span class=\"number\">20</span>, <span class=\"number\">-20</span>, <span class=\"number\">480</span> * p, <span class=\"number\">40</span>);</span><br><span class=\"line\">  ctx.fill();</span><br><span class=\"line\">  <span class=\"built_in\">window</span>.ctx = ctx;</span><br><span class=\"line\">  requestAnimationFrame(update);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">update(<span class=\"number\">0</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><img src=\"https://static001.geekbang.org/resource/image/4d/ef/4d71b84fc3282e84a98141e444f658ef.gif\" alt=\"Cubehelix rect\"></li>\n</ul>\n<h3 id=\"Coverting\"><a href=\"#Coverting\" class=\"headerlink\" title=\"Coverting\"></a>Coverting</h3><ul>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#hsl-to-rgb\" target=\"_blank\" rel=\"noopener\">hsl-to-rgb</a></li>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#rgb-to-lab\" target=\"_blank\" rel=\"noopener\">rgb-to-lab</a></li>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#lab-to-rgb\" target=\"_blank\" rel=\"noopener\">lab-to-rgb</a></li>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#lab-to-lch\" target=\"_blank\" rel=\"noopener\">lab-to-lch</a></li>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#lch-to-lab\" target=\"_blank\" rel=\"noopener\">lch-to-lab</a></li>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#color-conversion-code\" target=\"_blank\" rel=\"noopener\">Sample code for color conversions</a></li>\n</ul>\n<h2 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h2><ul>\n<li><a href=\"https://www.w3.org/TR/css-color-4/\" target=\"_blank\" rel=\"noopener\">CSS Color Module Level 4</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/HSL_and_HSV\" target=\"_blank\" rel=\"noopener\">wikipedia HSL&amp;HSV</a></li>\n<li><a href=\"https://www.zhihu.com/question/22077462\" target=\"_blank\" rel=\"noopener\">çŸ¥ä¹-è‰²å½©ç©ºé—´ä¸­çš„ HSLã€HSVã€HSB æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li>\n<li><a href=\"https://d3js.org.cn/document/d3-color/#api-reference\" target=\"_blank\" rel=\"noopener\">d3-color</a></li>\n<li><a href=\"http://www.mrao.cam.ac.uk/~dag/CUBEHELIX/\" target=\"_blank\" rel=\"noopener\">Cubehelix</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/121055691\" target=\"_blank\" rel=\"noopener\">Cubehelixé¢œè‰²è¡¨ç®—æ³•</a></li>\n<li><a href=\"https://zh.wikipedia.org/wiki/Lab%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4\" target=\"_blank\" rel=\"noopener\">wikipedia Labè‰²å½©ç©ºé—´</a></li>\n<li><a href=\"http://wsyks.github.io/2017/03/17/JS%E5%AE%9E%E7%8E%B0RGB-HSL-HSB%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2/\" target=\"_blank\" rel=\"noopener\">JSå®ç°RGB-HSL-HSBç›¸äº’è½¬æ¢</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>\n","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li><p>æåˆ°è‰²å½©ï¼Œå³ä½¿æ˜¯åˆšæœ‰è¾¨çŸ¥èƒ½åŠ›çš„å°æœ‹å‹ï¼Œä¹Ÿèƒ½è¯´ä¸Šå‡ å¥ï½</p>\n</li>\n<li><p>é‚£æˆ‘ä»¬å‰ç«¯å·¥ç¨‹å¸ˆï¼Œæ— è®ºå·¥ä½œè¿˜æ˜¯ç”Ÿæ´»ï¼Œæ¯å¤©éƒ½åœ¨ä¸å„ç§è‰²å½©æ‰“äº¤é“ï¼Œé‚£ä¾¿æ›´æœ‰å¿…è¦ç³»ç»Ÿåœ°äº†è§£å…³äºè‰²å½©æ–¹é¢çš„çŸ¥è¯†</p>\n</li>\n<li><p>æœ¬æ–‡å°†ä»å‰ç«¯è§’åº¦ï¼ŒèŠèŠè‰²å½©ç©ºé—´</p>\n</li>\n<li><p>æ ¹æ® <a href=\"https://www.w3.org/TR/css-color-4/\" target=\"_blank\" rel=\"noopener\">CSS Color Module Level 4</a> æ ‡å‡†</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;color&gt; &#x3D; &lt;hex-color&gt; | &lt;named-color&gt; | currentcolor | transparent</span><br><span class=\"line\">          &lt;rgb()&gt; | &lt;rgba()&gt; | &lt;hsl()&gt; | &lt;hsla()&gt; | &lt;hwb()&gt; |</span><br><span class=\"line\">          &lt;lab()&gt; | &lt;lch()&gt; | &lt;gray()&gt; |</span><br><span class=\"line\">          &lt;color()&gt; | &lt;device-cmyk()&gt; |</span><br><span class=\"line\">          &lt;system-color&gt;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>","more":"<h2 id=\"named-color\"><a href=\"#named-color\" class=\"headerlink\" title=\"named-color\"></a>named-color</h2><ul>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#named-color\" target=\"_blank\" rel=\"noopener\">#named-color</a></li>\n</ul>\n<h3 id=\"transparent\"><a href=\"#transparent\" class=\"headerlink\" title=\"transparent\"></a>transparent</h3><ul>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#valdef-color-transparent\" target=\"_blank\" rel=\"noopener\">#transparent</a></li>\n<li><a href=\"https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-1.html\" target=\"_blank\" rel=\"noopener\">&lt;color&gt; = transparent å°ä¾‹å­</a></li>\n</ul>\n<h2 id=\"currentcolor\"><a href=\"#currentcolor\" class=\"headerlink\" title=\"currentcolor\"></a>currentcolor</h2><ul>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#valdef-color-currentcolor\" target=\"_blank\" rel=\"noopener\">#currentcolor</a></li>\n<li><a href=\"https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-2.html\" target=\"_blank\" rel=\"noopener\">&lt;color&gt; = currentcolor å°ä¾‹å­</a></li>\n</ul>\n<h2 id=\"system-color\"><a href=\"#system-color\" class=\"headerlink\" title=\"system-color\"></a>system-color</h2><ul>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#css-system-colors\" target=\"_blank\" rel=\"noopener\">#system-colors</a></li>\n<li><a href=\"https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-3.html\" target=\"_blank\" rel=\"noopener\">&lt;color&gt; = &lt;system-color&gt;å°ä¾‹å­</a></li>\n</ul>\n<!-- è¿™äº›é›¶æ•£çš„ css color å±æ€§å€¼ç®€å•ä»‹ç»åˆ°è¿™ï¼Œåé¢æˆ‘ä»¬ç³»ç»Ÿçš„ä»‹ç»ä¸‹ï¼Œå‰©ä¸‹çš„å‡ ç§è‰²å½©åˆ†ç±» -->\n\n\n<h2 id=\"å‡è‰²æ³•æ··è‰²æ¨¡å‹-CMYK-ä¸-åŠ è‰²æ³•æ··è‰²æ¨¡å‹-RGB\"><a href=\"#å‡è‰²æ³•æ··è‰²æ¨¡å‹-CMYK-ä¸-åŠ è‰²æ³•æ··è‰²æ¨¡å‹-RGB\" class=\"headerlink\" title=\"å‡è‰²æ³•æ··è‰²æ¨¡å‹ CMYK ä¸ åŠ è‰²æ³•æ··è‰²æ¨¡å‹ RGB\"></a>å‡è‰²æ³•æ··è‰²æ¨¡å‹ CMYK ä¸ åŠ è‰²æ³•æ··è‰²æ¨¡å‹ RGB</h2><h3 id=\"å‡è‰²æ³•æ··è‰²æ¨¡å‹-CMYK\"><a href=\"#å‡è‰²æ³•æ··è‰²æ¨¡å‹-CMYK\" class=\"headerlink\" title=\"å‡è‰²æ³•æ··è‰²æ¨¡å‹ CMYK\"></a>å‡è‰²æ³•æ··è‰²æ¨¡å‹ <a href=\"https://zh.wikipedia.org/wiki/%E5%8D%B0%E5%88%B7%E5%9B%9B%E5%88%86%E8%89%B2%E6%A8%A1%E5%BC%8F\" target=\"_blank\" rel=\"noopener\">CMYK</a></h3><ul>\n<li>C - <strong>C</strong>yan - é’è‰²</li>\n<li>M - <strong>M</strong>agenta - çº¢è‰²</li>\n<li>Y - <strong>Y</strong>ellow - é»„è‰²</li>\n<li>K - blac<strong>K</strong> - é»‘è‰²ï¼ˆé˜²æ­¢ä¸ RGB çš„ B å†²çªï¼‰</li>\n<li>ä¸Šè¿‡ç¾æœ¯è¯¾ï¼Œåº”è¯¥å¬è¿‡â€œçº¢é»„è“â€ä¸‰åŸè‰²çš„è¯´æ³•ï¼Œä½†è¿™å’Œ CMYK ä¸å¤ªä¸€æ ·ï¼Œå®é™…ä¸Šï¼Œé¢œæ–™æ˜¾ç¤ºé¢œè‰²çš„åŸç†æ˜¯å®ƒå¸æ”¶äº†æ‰€æœ‰åˆ«çš„é¢œè‰²çš„å…‰ï¼Œåªåå°„ä¸€ç§é¢œè‰²ï¼Œæ‰€ä»¥é¢œæ–™ä¸‰åŸè‰²å…¶å®æ˜¯çº¢ã€ç»¿ã€è“çš„è¡¥è‰²ï¼Œä¹Ÿå°±æ˜¯ï¼šå“çº¢ã€é»„ã€é’ã€‚å› ä¸ºå®ƒä»¬è·Ÿçº¢ã€é»„ã€è“ç›¸è¿‘ï¼Œæ‰€ä»¥æœ‰äº†è¿™æ ·çš„è¯´æ³•ã€‚</li>\n<li>ä¸ºä»€ä¹ˆä¼šæ¯”ä¸‰åŸè‰²å¤šäº†ä¸€è‰²å‘¢ï¼Ÿ<ul>\n<li>ä¸‰ç§é¢œè‰²è°ƒæˆé»‘è‰²ï¼Œ<strong>è´µ</strong></li>\n<li>ä¸”<strong>ä¸æ˜¯çº¯ç²¹çš„é»‘</strong>ï¼Œä¸‰è‰²ç­‰é‡ç›¸åŠ ä¹‹ååªèƒ½å½¢æˆä¸€ç§æ·±ç°æˆ–æ·±è¤ï¼ˆæˆ‘è¦äº”å½©æ–‘æ–“çš„é»‘</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"åŠ è‰²æ³•æ··è‰²æ¨¡å‹-RGB\"><a href=\"#åŠ è‰²æ³•æ··è‰²æ¨¡å‹-RGB\" class=\"headerlink\" title=\"åŠ è‰²æ³•æ··è‰²æ¨¡å‹ RGB\"></a>åŠ è‰²æ³•æ··è‰²æ¨¡å‹ <a href=\"https://www.wikiwand.com/en/RGB_color_model\" target=\"_blank\" rel=\"noopener\">RGB</a></h3><ul>\n<li>æˆ‘ä»¬åœ¨ CSS æ ·å¼ä¸­çœ‹åˆ°çš„å½¢å¼å¦‚ #RRGGBB çš„é¢œè‰²ä»£ç ï¼Œå°±æ˜¯ RGB é¢œè‰²çš„åå…­è¿›åˆ¶è¡¨ç¤ºæ³•ï¼Œå…¶ä¸­ RRã€GGã€BB åˆ†åˆ«æ˜¯ä¸¤ä½åå…­è¿›åˆ¶æ•°å­—ï¼Œè¡¨ç¤ºçº¢ã€ç»¿ã€è“ä¸‰è‰²é€šé“çš„è‰²é˜¶ã€‚è‰²é˜¶å¯ä»¥è¡¨ç¤ºæŸä¸ªé€šé“çš„å¼ºå¼±ã€‚</li>\n<li>ä½† RGB å¹¶ä¸èƒ½è¡¨ç¤ºäººçœ¼æ‰€è§çš„æ‰€æœ‰é¢œè‰²ï¼Œå®ƒåªèƒ½è¡¨ç¤ºä¸‹é¢çš„è¿™ä¸ªåŒºåŸŸ</li>\n</ul>\n<p><img src=\"http://p1.meituan.net/myvideodistribute/a9c085522b90c1a0254ac3c64ac37728490575.png\" alt=\"äººçœ¼çœ‹åˆ°çš„é¢œè‰²vsRGBèƒ½è¡¨ç¤ºçš„é¢œè‰²\"></p>\n<ul>\n<li>RGB å¯¹è‰²å½©çš„æè¿°ï¼Œå¯¹è®¡ç®—æœºå‹å¥½ï¼Œä½†ä¸å¤Ÿäººæ€§åŒ–</li>\n<li>RGB æˆ‘ä»¬åªèƒ½å¤§è‡´åˆ¤æ–­å‡ºå®ƒåå‘äºçº¢è‰²ã€ç»¿è‰²è¿˜æ˜¯è“è‰²ï¼Œæˆ–è€…åœ¨é¢œè‰²ç«‹æ–¹ä½“çš„å¤§è‡´ä½ç½®ã€‚</li>\n<li>ä»¥åŠå¯¹æ¯”ä¸¤ä¸ª RGB é¢œè‰²çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡å¯¹æ¯”å®ƒä»¬åœ¨ RGB ç«‹æ–¹ä½“ä¸­çš„ç›¸å¯¹è·ç¦»ï¼Œæ¥åˆ¤æ–­å®ƒä»¬çš„é¢œè‰²å·®å¼‚ã€‚ </li>\n</ul>\n<p><img src=\"http://p1.meituan.net/myvideodistribute/15a8b3e684bdfce7333105cc23ed332d239313.png\" alt=\"RGB ç«‹æ–¹ä½“å‡ ä½•è¡¨ç¤º\"></p>\n<ul>\n<li>ä½†æˆ‘ä»¬å¯¹è‰²å½©çš„è®¤è¯†å¾€å¾€å…ˆæ˜¯ï¼šé¢œè‰²æ˜¯ä»€ä¹ˆï¼Œé²œè‰³ä¸é²œè‰³ï¼Œäº®è¿˜æ˜¯æš—</li>\n<li>and Itâ€™s not easy to to alter an RGB color to produce a lighter variant of the same hue.<ul>\n<li>è¿™åœ¨æˆ‘ä»¬å¼€å‘ä¸­ä¹Ÿååˆ†å¸¸è§ï¼Œæœ‰äº›æ—¶å€™è®¾è®¡å¸ˆå®šä¸‹è§†è§‰åŸºè°ƒå’Œä¸»è‰²ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æ•°æ®æƒ…å†µç”±å‰ç«¯åŠ¨æ€ç”Ÿæˆé¢œè‰²å€¼</li>\n</ul>\n</li>\n</ul>\n<!-- è¿‡æ¸¡åˆ° HSV HSL -->\n\n<h2 id=\"HSL-HSB-amp-HSV\"><a href=\"#HSL-HSB-amp-HSV\" class=\"headerlink\" title=\"HSL HSB&amp;HSV\"></a>HSL HSB&amp;HSV</h2><ul>\n<li>CSS å’Œ Canvas2D éƒ½å¯ä»¥ç›´æ¥æ”¯æŒ HSL é¢œè‰²ï¼Œåªæœ‰ WebGL éœ€è¦åš RGB2HSV è½¬æ¢ã€‚</li>\n</ul>\n<h3 id=\"HSL\"><a href=\"#HSL\" class=\"headerlink\" title=\"HSL\"></a>HSL</h3><h4 id=\"H-Hue-è‰²ç›¸-0-360Â°çš„åœ†å¿ƒè§’\"><a href=\"#H-Hue-è‰²ç›¸-0-360Â°çš„åœ†å¿ƒè§’\" class=\"headerlink\" title=\"H - Hue - è‰²ç›¸ - 0-360Â°çš„åœ†å¿ƒè§’\"></a>H - Hue - è‰²ç›¸ - 0-360Â°çš„åœ†å¿ƒè§’</h4><ul>\n<li>H(hue)åˆ†é‡ï¼Œä»£è¡¨çš„æ˜¯äººçœ¼æ‰€èƒ½æ„ŸçŸ¥çš„é¢œè‰²èŒƒå›´ï¼Œè¿™äº›é¢œè‰²åˆ†å¸ƒåœ¨ä¸€ä¸ªå¹³é¢çš„è‰²ç›¸ç¯ä¸Šï¼Œå–å€¼èŒƒå›´æ˜¯0Â°åˆ°360Â°çš„åœ†å¿ƒè§’ï¼Œæ¯ä¸ªè§’åº¦å¯ä»¥ä»£è¡¨ä¸€ç§é¢œè‰²ã€‚</li>\n<li>è‰²ç›¸å€¼çš„æ„ä¹‰åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸æ”¹å˜å…‰æ„Ÿçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ—‹è½¬è‰²ç›¸ç¯æ¥æ”¹å˜é¢œè‰²ã€‚</li>\n<li>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½è‰²ç›¸ç¯ä¸Šçš„å…­å¤§ä¸»è‰²ï¼Œç”¨ä½œåŸºæœ¬å‚ç…§ï¼š360Â°/0Â°çº¢ã€60Â°é»„ã€120Â°ç»¿ã€180Â°é’ã€240Â°è“ã€300Â°æ´‹çº¢ï¼Œå®ƒä»¬åœ¨è‰²ç›¸ç¯ä¸ŠæŒ‰ç…§60Â°åœ†å¿ƒè§’çš„é—´éš”æ’åˆ—ã€‚</li>\n</ul>\n<p><img src=\"http://p0.meituan.net/myvideodistribute/01ed240165965600fde0a031d193f8c6325809.png\" alt=\"HSL è‰²ç›¸ç¯\"></p>\n<h4 id=\"S-Saturation-é¥±å’Œåº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼\"><a href=\"#S-Saturation-é¥±å’Œåº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼\" class=\"headerlink\" title=\"S - Saturation - é¥±å’Œåº¦ - 0~1 æˆ–è€… 0%~100% é—´çš„å€¼\"></a>S - Saturation - é¥±å’Œåº¦ - 0~1 æˆ–è€… 0%~100% é—´çš„å€¼</h4><ul>\n<li>å’Œé»‘ç™½æ²¡æœ‰å…³ç³»ï¼Œé¥±å’Œåº¦ä¸æ§åˆ¶é¢œè‰²ä¸­æ··å…¥é»‘ç™½çš„å¤šå¯¡</li>\n<li>æ•°å€¼è¶Šå¤§ï¼Œé¢œè‰²ä¸­çš„ç°è‰²è¶Šå°‘ï¼Œé¢œè‰²è¶Šé²œè‰³ï¼Œå‘ˆç°ä¸€ç§ä»ç°åº¦åˆ°çº¯è‰²çš„å˜åŒ–ã€‚</li>\n</ul>\n<p><img src=\"https://pic1.zhimg.com/80/v2-e606821a1171451b35f08b68aaf833b9_1440w.jpg?source=1940ef5c\" alt=\"HSL S\"></p>\n<h4 id=\"L-Lightness-äº®åº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼\"><a href=\"#L-Lightness-äº®åº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼\" class=\"headerlink\" title=\"L - Lightness - äº®åº¦ - 0~1 æˆ–è€… 0%~100% é—´çš„å€¼\"></a>L - Lightness - äº®åº¦ - 0~1 æˆ–è€… 0%~100% é—´çš„å€¼</h4><ul>\n<li>æ§åˆ¶çº¯è‰²ä¸­çš„æ··å…¥çš„é»‘ç™½ä¸¤ç§é¢œè‰²</li>\n<li>æ•°å€¼è¶Šå°ï¼Œè‰²å½©è¶Šæš—ï¼Œè¶Šæ¥è¿‘äºé»‘è‰²ï¼›æ•°å€¼è¶Šå¤§ï¼Œè‰²å½©è¶Šäº®ï¼Œè¶Šæ¥è¿‘äºç™½è‰²ã€‚</li>\n</ul>\n<p><img src=\"https://picb.zhimg.com/80/v2-ef76260bcc83056006bf0376e9036b79_1440w.jpg?source=1940ef5c\" alt=\"HSL L\"></p>\n<h3 id=\"HSB-amp-HSV\"><a href=\"#HSB-amp-HSV\" class=\"headerlink\" title=\"HSB &amp; HSV\"></a>HSB &amp; HSV</h3><ul>\n<li>HSB åˆç§° HSV</li>\n<li><a href=\"https://github.com/Ele-Peng/data-visualization/blob/master/color/CSS-Color-Module-Level-4-demo-hsv-wheel.html\" target=\"_blank\" rel=\"noopener\">HSV è‰²è½®- WebGL å®ç°</a><ul>\n<li>åƒç´ åæ ‡è½¬æ¢ä¸ºæåæ ‡ï¼Œå†é™¤ä»¥ 2Ï€ï¼Œå°±èƒ½å¾—åˆ° HSV çš„ H å€¼</li>\n<li>é¼ æ ‡ä½ç½®çš„ xã€y åæ ‡æ¥å†³å®š S å’Œ V çš„å€¼</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"S-Saturation-é¥±å’Œåº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼-1\"><a href=\"#S-Saturation-é¥±å’Œåº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼-1\" class=\"headerlink\" title=\"S - Saturation - é¥±å’Œåº¦ - 0~1 æˆ–è€… 0%~100%é—´çš„å€¼\"></a>S - Saturation - é¥±å’Œåº¦ - 0~1 æˆ–è€… 0%~100%é—´çš„å€¼</h4><ul>\n<li>æ§åˆ¶çº¯è‰²ä¸­æ··å…¥ç™½è‰²çš„é‡ï¼Œå€¼è¶Šå¤§ï¼Œç™½è‰²è¶Šå°‘ï¼Œé¢œè‰²è¶Šçº¯ï¼›</li>\n</ul>\n<h4 id=\"B-Brightness-äº®åº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼\"><a href=\"#B-Brightness-äº®åº¦-0-1-æˆ–è€…-0-100-é—´çš„å€¼\" class=\"headerlink\" title=\"B - Brightness - äº®åº¦ - 0~1 æˆ–è€… 0%~100%é—´çš„å€¼\"></a>B - Brightness - äº®åº¦ - 0~1 æˆ–è€… 0%~100%é—´çš„å€¼</h4><ul>\n<li>æ§åˆ¶çº¯è‰²ä¸­æ··å…¥é»‘è‰²çš„é‡ï¼Œå€¼è¶Šå¤§ï¼Œé»‘è‰²è¶Šå°‘ï¼Œæ˜åº¦è¶Šé«˜</li>\n</ul>\n<h3 id=\"RGB-ç«‹æ–¹ä½“è½¬æ¢æˆ-HSL-HSV-è¿‡ç¨‹\"><a href=\"#RGB-ç«‹æ–¹ä½“è½¬æ¢æˆ-HSL-HSV-è¿‡ç¨‹\" class=\"headerlink\" title=\"RGB ç«‹æ–¹ä½“è½¬æ¢æˆ HSL / HSV è¿‡ç¨‹\"></a>RGB ç«‹æ–¹ä½“è½¬æ¢æˆ HSL / HSV è¿‡ç¨‹</h3><p><img src=\"http://p0.meituan.net/myvideodistribute/719dd96f97590c2fc3041f661e3db30c200249.png\" alt=\"RGB ç«‹æ–¹ä½“è½¬æ¢æˆ HSL / HSV è¿‡ç¨‹\"></p>\n<ul>\n<li><p>æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªè¿‡ç¨‹ç®€å•ç†è§£æˆï¼Œå°† RGB é¢œè‰²çš„ç«‹æ–¹ä½“ä»ç›´è§’åæ ‡ç³»æŠ•å½±åˆ°æåæ ‡ç³»çš„åœ†æŸ±ä¸Š</p>\n</li>\n<li><p>HSVï¼ˆè‰²ç›¸ã€é¥±å’Œåº¦ã€æ˜åº¦ï¼‰åœ¨æ¦‚å¿µä¸Šå¯ä»¥è¢«è®¤ä¸ºæ˜¯é¢œè‰²çš„å€’åœ†é”¥ä½“ï¼ˆé»‘ç‚¹åœ¨ä¸‹é¡¶ç‚¹ï¼Œç™½è‰²åœ¨ä¸Šåº•é¢åœ†å¿ƒï¼‰</p>\n<ul>\n<li><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/HSV_cone.png/440px-HSV_cone.png\" alt=\"HSV æ¦‚å¿µå›¾\"></li>\n</ul>\n</li>\n<li><p>HSL åœ¨æ¦‚å¿µä¸Šè¡¨ç¤ºäº†ä¸€ä¸ªåŒåœ†é”¥ä½“å’Œåœ†çƒä½“ï¼ˆç™½è‰²åœ¨ä¸Šé¡¶ç‚¹ï¼Œé»‘è‰²åœ¨ä¸‹é¡¶ç‚¹ï¼Œæœ€å¤§æ¨ªåˆ‡é¢çš„åœ†å¿ƒæ˜¯åŠç¨‹ç°è‰²ï¼‰</p>\n<ul>\n<li><img src=\"https://pic4.zhimg.com/80/v2-3df1e851938562c2a9d1c76cc8af23e2_1440w.jpg?source=1940ef5c\" alt=\"HSL æ¦‚å¿µå›¾\"></li>\n</ul>\n</li>\n<li><p>æˆ‘ä»¬å¯ä»¥ä»ä¸‹å›¾æ¥å¯¹æ¯” HSL &amp; HSV</p>\n<ul>\n<li><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/HSL_HSV_cylinder_color_solid_comparison.png/800px-HSL_HSV_cylinder_color_solid_comparison.png\" alt=\"HSL &amp; HSV å¯¹æ¯”å›¾\"></li>\n</ul>\n</li>\n<li><p><strong>ä½†å³ä½¿æˆ‘ä»¬å¯ä»¥å‡åŒ€åœ°ä¿®æ”¹æ¯ç»„çš„äº®åº¦å’Œé¥±å’Œåº¦ï¼Œç”±äºäººçœ¼å¯¹ä¸åŒé¢‘ç‡çš„å…‰çš„æ•æ„Ÿåº¦ä¸åŒï¼Œæˆ‘ä»¬ä»ç„¶ä¼šæ„Ÿè§‰æœ‰çš„é¢œè‰²çœ‹èµ·æ¥å’Œå…¶ä»–çš„é¢œè‰²å·®è·æ˜æ˜¾ï¼Œæœ‰çš„é¢œè‰²è¿˜æ˜¯æ²¡é‚£ä¹ˆæ˜æ˜¾</strong></p>\n</li>\n<li><p>çœ‹ä¸‹é¢çš„ä¾‹å­</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">20</span>; i++) &#123;</span><br><span class=\"line\">  ctx.fillStyle = <span class=\"string\">`hsl(<span class=\"subst\">$&#123;<span class=\"built_in\">Math</span>.floor(i * <span class=\"number\">15</span>)&#125;</span>, 50%, 50%)`</span>;</span><br><span class=\"line\">  ctx.beginPath();</span><br><span class=\"line\">  ctx.arc((i - <span class=\"number\">10</span>) * <span class=\"number\">20</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>, <span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.PI * <span class=\"number\">2</span>);</span><br><span class=\"line\">  ctx.fill();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">20</span>; i++) &#123;</span><br><span class=\"line\">  ctx.fillStyle = <span class=\"string\">`hsl(<span class=\"subst\">$&#123;<span class=\"built_in\">Math</span>.floor((i % <span class=\"number\">2</span> ? <span class=\"number\">60</span> : <span class=\"number\">210</span>) + <span class=\"number\">3</span> * i)&#125;</span>, 50%, 50%)`</span>;</span><br><span class=\"line\">  ctx.beginPath();</span><br><span class=\"line\">  ctx.arc((i - <span class=\"number\">10</span>) * <span class=\"number\">20</span>, <span class=\"number\">-60</span>, <span class=\"number\">10</span>, <span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.PI * <span class=\"number\">2</span>);</span><br><span class=\"line\">  ctx.fill();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>æˆ‘ä»¬ç»˜åˆ¶ä¸¤æ’ä¸åŒçš„åœ†ï¼Œè®©ç¬¬ä¸€æ’æ¯ä¸ªåœ†çš„è‰²ç›¸é—´éš”éƒ½æ˜¯ 15ï¼Œå†è®©ç¬¬äºŒæ’åœ†çš„é¢œè‰²åœ¨è‰²ç›¸ 60 å’Œ 210 é™„è¿‘ä¸¤ä¸¤äº¤é”™ã€‚</li>\n<li>æœ€ç»ˆç”Ÿæˆæ•ˆæœå¦‚ä¸‹ï¼š<ul>\n<li><img src=\"https://static001.geekbang.org/resource/image/67/61/674ae06ae45050bb2e9840a1c081b661.jpeg\" alt=\"HSL è‰²ç›¸ä¿®æ”¹\"></li>\n</ul>\n</li>\n<li>å¯ä»¥çœ‹å‡ºï¼š<ul>\n<li>ç¬¬ä¸€æ’åœ†ä½ ä¼šå‘ç°ï¼Œè™½ç„¶å®ƒä»¬çš„è‰²ç›¸ç›¸å·®éƒ½æ˜¯ 15ï¼Œä½†æ˜¯ç›¸äº’ä¹‹é—´é¢œè‰²å˜åŒ–å¹¶ä¸æ˜¯å‡åŒ€çš„ï¼Œå°¤å…¶æ˜¯ä¸­é—´å‡ ä¸ªç»¿è‰²åœ†çš„é¢œè‰²æ¯”è¾ƒæ¥è¿‘ã€‚</li>\n<li>ç¬¬äºŒæ’åœ†ï¼Œè™½ç„¶è¿™äº›åœ†çš„äº®åº¦éƒ½æ˜¯ 50%ï¼Œä½†æ˜¯è“è‰²å’Œç´«è‰²çš„åœ†çœ‹èµ·æ¥å°±æ˜¯ä¸å¦‚åç»¿åé»„çš„åœ†äº®ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å› æ­¤ï¼ŒHSL ä¾ç„¶ä¸æ˜¯æœ€å®Œç¾çš„è‰²å½©è¡¨ç¤ºæ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å»ºç«‹ä¸€å¥—ç¬¦åˆäººç±»è®¤çŸ¥çš„æ ‡å‡†ã€‚è¿™ä¸ªæ ‡å‡†å°½å¯èƒ½åœ°æ»¡è¶³ä¸€ä¸‹ 2 ä¸ªåŸåˆ™</p>\n<ul>\n<li>äººçœ¼çœ‹åˆ°çš„è‰²å·® = é¢œè‰²å‘é‡é—´çš„æ¬§æ°è·ç¦»</li>\n<li>ç›¸åŒçš„äº®åº¦ï¼Œèƒ½è®©äººæ„Ÿè§‰äº®åº¦ç›¸åŒ</li>\n</ul>\n</li>\n</ul>\n<!-- äºæ˜¯ CIE Lab è¯ç”Ÿäº† -->\n\n\n<h2 id=\"CIE-Lab-CIE-Lch\"><a href=\"#CIE-Lab-CIE-Lch\" class=\"headerlink\" title=\"CIE Lab /  CIE Lch\"></a>CIE Lab /  CIE Lch</h2><ul>\n<li><p><a href=\"https://zh.wikipedia.org/wiki/Lab%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4\" target=\"_blank\" rel=\"noopener\">Labè‰²å½©ç©ºé—´</a>ï¼ˆè‹±è¯­ï¼šLab color spaceï¼‰æ˜¯é¢œè‰²-å¯¹ç«‹ç©ºé—´ï¼Œå¸¦æœ‰ç»´åº¦Lè¡¨ç¤ºäº®åº¦ï¼Œaå’Œbè¡¨ç¤ºé¢œè‰²å¯¹ç«‹ç»´åº¦ï¼ŒåŸºäºäº†éçº¿æ€§å‹ç¼©çš„CIE XYZè‰²å½©ç©ºé—´åæ ‡ã€‚</p>\n</li>\n<li><p>CIE Lab æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ç‚¹æ˜¯ï¼Œç›®å‰è¿˜æ²¡æœ‰èƒ½æ”¯æŒ CIE Lab çš„å›¾å½¢ç³»ç»Ÿï¼Œä½†<a href=\"https://www.w3.org/TR/css-color-4/#funcdef-lab\" target=\"_blank\" rel=\"noopener\">è§„èŒƒ</a>ä¸­å·²ç»ç»™å‡ºäº† Lab é¢œè‰²å€¼çš„å®šä¹‰</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lab() &#x3D; lab( &lt;percentage&gt; &lt;number&gt; &lt;number&gt; [ &#x2F; &lt;alpha-value&gt; ]? )</span><br><span class=\"line\">lch() &#x3D; lch( &lt;percentage&gt; &lt;number&gt; &lt;hue&gt; [ &#x2F; &lt;alpha-value&gt; ]? )</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ä¸”ä¸€äº› JavaScript åº“ä¹Ÿå·²ç»å¯ä»¥ç›´æ¥å¤„ç† Lab é¢œè‰²ç©ºé—´äº†ï¼Œå¦‚ <a href=\"https://d3js.org.cn/document/d3-color/\" target=\"_blank\" rel=\"noopener\">d3-color</a>    </p>\n<ul>\n<li><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <a href=\"https://bl.ocks.org/mbostock/9f37cc207c0cb166921b\" target=\"_blank\" rel=\"noopener\">Lab color picker</a> æ¥äº†è§£ä¸‰ä¸ªé¢œè‰²ä¹‹å‰çš„ç›¸äº’ä½œç”¨</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">20</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> c = d3.lab(<span class=\"number\">30</span>, i * <span class=\"number\">15</span> - <span class=\"number\">150</span>, i * <span class=\"number\">15</span> - <span class=\"number\">150</span>).rgb();</span><br><span class=\"line\">  ctx.fillStyle = <span class=\"string\">`rgb(<span class=\"subst\">$&#123;c.r&#125;</span>, <span class=\"subst\">$&#123;c.g&#125;</span>, <span class=\"subst\">$&#123;c.b&#125;</span>)`</span>;</span><br><span class=\"line\">  ctx.beginPath();</span><br><span class=\"line\">  ctx.arc((i - <span class=\"number\">10</span>) * <span class=\"number\">20</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>, <span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.PI * <span class=\"number\">2</span>);</span><br><span class=\"line\">  ctx.fill();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">20</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> c = d3.lab(i * <span class=\"number\">5</span>, <span class=\"number\">80</span>, <span class=\"number\">80</span>).rgb();</span><br><span class=\"line\">  ctx.fillStyle = <span class=\"string\">`rgb(<span class=\"subst\">$&#123;c.r&#125;</span>, <span class=\"subst\">$&#123;c.g&#125;</span>, <span class=\"subst\">$&#123;c.b&#125;</span>)`</span>;</span><br><span class=\"line\">  ctx.beginPath();</span><br><span class=\"line\">  ctx.arc((i - <span class=\"number\">10</span>) * <span class=\"number\">20</span>, <span class=\"number\">-60</span>, <span class=\"number\">10</span>, <span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.PI * <span class=\"number\">2</span>);</span><br><span class=\"line\">  ctx.fill();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>è¿™ä¸ªä¾‹å­ä¸ HSL çš„ä¾‹å­ä¸€æ ·ï¼Œä¹Ÿæ˜¯æ˜¾ç¤ºä¸¤æ’åœ†å½¢ã€‚</p>\n<ul>\n<li>ç¬¬ä¸€æ’ç›¸é‚»åœ†å½¢ä¹‹é—´çš„ lab è‰²å€¼çš„æ¬§æ°ç©ºé—´è·ç¦»ç›¸åŒ</li>\n<li>ç¬¬äºŒæ’ç›¸é‚»åœ†å½¢ä¹‹é—´çš„äº®åº¦æŒ‰ 5 é˜¶çš„æ–¹å¼é€’å¢</li>\n</ul>\n</li>\n<li><p><img src=\"https://static001.geekbang.org/resource/image/9c/92/9c0898db90d53fe4fd3e6b3c83043d92.jpeg\" alt=\"d3 lab demo\"></p>\n</li>\n</ul>\n</li>\n<li><p>å¯ä»¥çœ‹å‡ºï¼Œåœ¨ä»¥ CIELab æ–¹å¼å‘ˆç°çš„è‰²å½©å˜åŒ–ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®çš„æ•°å€¼å’Œäººçœ¼æ„ŸçŸ¥çš„ä¸€è‡´æ€§æ¯”è¾ƒå¼ºã€‚</p>\n</li>\n<li><p>è‡³æ­¤ï¼Œè§„èŒƒä¸­å‡ºç°çš„è‰²å½©ç©ºé—´è¡¨ç¤ºæ–¹æ³•å·²ç»ä»‹ç»å®Œäº†ã€‚</p>\n</li>\n</ul>\n<h3 id=\"Cubehelix-è‰²ç›˜\"><a href=\"#Cubehelix-è‰²ç›˜\" class=\"headerlink\" title=\"Cubehelix è‰²ç›˜\"></a><a href=\"http://www.mrao.cam.ac.uk/~dag/CUBEHELIX/\" target=\"_blank\" rel=\"noopener\">Cubehelix</a> è‰²ç›˜</h3><!-- æœ€åï¼Œæˆ‘ä»¬å†æ¥è¯´ä¸€ç§ç‰¹æ®Šçš„é¢œè‰²è¡¨ç¤ºæ³• -->\n<ul>\n<li>å®ƒçš„åŸç†å°±æ˜¯åœ¨ RGB çš„ç«‹æ–¹ä¸­æ„å»ºä¸€æ®µèºæ—‹çº¿ï¼Œè®©è‰²ç›¸éšç€äº®åº¦å¢åŠ èºæ—‹å˜æ¢ã€‚</li>\n<li><img src=\"https://static001.geekbang.org/resource/image/28/0c/281b8bbdeebyy0f3e62c80278267150c.jpg\" alt=\"Cubehelix èºæ—‹çº¿åŸç†\"></li>\n<li>æˆ‘ä»¬å¯ä»¥ç”¨ <a href=\"https://www.npmjs.com/package/cubehelix\" target=\"_blank\" rel=\"noopener\">cubehelix</a> å†™ä¸€ä¸ªé¢œè‰²éšç€é•¿åº¦å˜åŒ–çš„é•¿åº¦<ul>\n<li>é¦–å…ˆï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ cubehelix å‡½æ•°åˆ›å»ºä¸€ä¸ª color æ˜ å°„ã€‚<ul>\n<li>cubehelix å‡½æ•°æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªè‰²ç›˜æ˜ å°„å‡½æ•°ã€‚è¿™ä¸ªè¿”å›å‡½æ•°çš„å‚æ•°èŒƒå›´æ˜¯ 0 åˆ° 1ï¼Œå½“å®ƒä»å°åˆ°å¤§ä¾æ¬¡æ”¹å˜çš„æ—¶å€™ï¼Œä¸ä»…é¢œè‰²ä¼šä¾æ¬¡æ”¹å˜ï¼Œäº®åº¦ä¹Ÿä¼šä¾æ¬¡å¢å¼ºã€‚</li>\n</ul>\n</li>\n<li>ç„¶åï¼Œæˆ‘ä»¬ç”¨æ­£å¼¦å‡½æ•°æ¥æ¨¡æ‹Ÿæ•°æ®çš„å‘¨æœŸæ€§å˜åŒ–ï¼Œé€šè¿‡ color è·å–å½“å‰çš„é¢œè‰²å€¼ï¼Œå†æŠŠé¢œè‰²å€¼èµ‹ç»™ ctx.fillStyleï¼Œé¢œè‰²å°±èƒ½æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</li>\n<li>æœ€åï¼Œæˆ‘ä»¬ç”¨ rect å°†æŸ±çŠ¶å›¾ç”»å‡ºæ¥ï¼Œç”¨ requestAnimationFrame å®ç°åŠ¨ç”»å°±å¯ä»¥äº† ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;cubehelix&#125; <span class=\"keyword\">from</span> <span class=\"string\">'cubehelix'</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"keyword\">const</span> canvas = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'canvas'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\">ctx.translate(<span class=\"number\">0</span>, <span class=\"number\">256</span>);</span><br><span class=\"line\">ctx.scale(<span class=\"number\">1</span>, <span class=\"number\">-1</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"keyword\">const</span> color = cubehelix(); <span class=\"comment\">// æ„é€ cubehelixè‰²ç›˜é¢œè‰²æ˜ å°„å‡½æ•°</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> T = <span class=\"number\">2000</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> p = <span class=\"number\">0.5</span> + <span class=\"number\">0.5</span> * <span class=\"built_in\">Math</span>.sin(t / T);</span><br><span class=\"line\">  ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">-256</span>, <span class=\"number\">512</span>, <span class=\"number\">512</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;r, g, b&#125; = color(p);</span><br><span class=\"line\">  ctx.fillStyle = <span class=\"string\">`rgb(<span class=\"subst\">$&#123;<span class=\"number\">255</span> * r&#125;</span>,<span class=\"subst\">$&#123;<span class=\"number\">255</span> * g&#125;</span>,<span class=\"subst\">$&#123;<span class=\"number\">255</span> * b&#125;</span>)`</span>;</span><br><span class=\"line\">  ctx.beginPath();</span><br><span class=\"line\">  ctx.rect(<span class=\"number\">20</span>, <span class=\"number\">-20</span>, <span class=\"number\">480</span> * p, <span class=\"number\">40</span>);</span><br><span class=\"line\">  ctx.fill();</span><br><span class=\"line\">  <span class=\"built_in\">window</span>.ctx = ctx;</span><br><span class=\"line\">  requestAnimationFrame(update);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">update(<span class=\"number\">0</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><img src=\"https://static001.geekbang.org/resource/image/4d/ef/4d71b84fc3282e84a98141e444f658ef.gif\" alt=\"Cubehelix rect\"></li>\n</ul>\n<h3 id=\"Coverting\"><a href=\"#Coverting\" class=\"headerlink\" title=\"Coverting\"></a>Coverting</h3><ul>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#hsl-to-rgb\" target=\"_blank\" rel=\"noopener\">hsl-to-rgb</a></li>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#rgb-to-lab\" target=\"_blank\" rel=\"noopener\">rgb-to-lab</a></li>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#lab-to-rgb\" target=\"_blank\" rel=\"noopener\">lab-to-rgb</a></li>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#lab-to-lch\" target=\"_blank\" rel=\"noopener\">lab-to-lch</a></li>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#lch-to-lab\" target=\"_blank\" rel=\"noopener\">lch-to-lab</a></li>\n<li><a href=\"https://www.w3.org/TR/css-color-4/#color-conversion-code\" target=\"_blank\" rel=\"noopener\">Sample code for color conversions</a></li>\n</ul>\n<h2 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h2><ul>\n<li><a href=\"https://www.w3.org/TR/css-color-4/\" target=\"_blank\" rel=\"noopener\">CSS Color Module Level 4</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/HSL_and_HSV\" target=\"_blank\" rel=\"noopener\">wikipedia HSL&amp;HSV</a></li>\n<li><a href=\"https://www.zhihu.com/question/22077462\" target=\"_blank\" rel=\"noopener\">çŸ¥ä¹-è‰²å½©ç©ºé—´ä¸­çš„ HSLã€HSVã€HSB æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li>\n<li><a href=\"https://d3js.org.cn/document/d3-color/#api-reference\" target=\"_blank\" rel=\"noopener\">d3-color</a></li>\n<li><a href=\"http://www.mrao.cam.ac.uk/~dag/CUBEHELIX/\" target=\"_blank\" rel=\"noopener\">Cubehelix</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/121055691\" target=\"_blank\" rel=\"noopener\">Cubehelixé¢œè‰²è¡¨ç®—æ³•</a></li>\n<li><a href=\"https://zh.wikipedia.org/wiki/Lab%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4\" target=\"_blank\" rel=\"noopener\">wikipedia Labè‰²å½©ç©ºé—´</a></li>\n<li><a href=\"http://wsyks.github.io/2017/03/17/JS%E5%AE%9E%E7%8E%B0RGB-HSL-HSB%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2/\" target=\"_blank\" rel=\"noopener\">JSå®ç°RGB-HSL-HSBç›¸äº’è½¬æ¢</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><ul>\n<li>ç¥å¤§å®¶å¤šå¤šå‘è´¢</li>\n</ul>"},{"title":"ç®—æ³•æ¨¡æ¿","date":"2020-09-24T15:46:30.000Z","_content":"\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- å¸¸è§ç®—æ³•æ¨¡æ¿ï¼ˆè‡ªå·±æ€»ç»“ï¼Œéå®˜æ–¹ï¼‰\n\n<!-- more -->\n\n## æ•°æ®ç»“æ„\n### æ•°ç»„\n- [26. åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹](https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/)\n- [66. åŠ ä¸€](https://leetcode-cn.com/problems/plus-one/)\n- [88. åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„](https://leetcode-cn.com/problems/merge-sorted-array/)\n- [122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/)\n- [455. åˆ†å‘é¥¼å¹²](https://leetcode-cn.com/problems/assign-cookies/)\n- [âœ¨189. æ—‹è½¬æ•°ç»„](https://leetcode-cn.com/problems/rotate-array/)\n- [âœ¨264. ä¸‘æ•°-ii](https://leetcode-cn.com/problems/ugly-number-ii/)\n- [874. æ¨¡æ‹Ÿè¡Œèµ°æœºå™¨äºº](https://leetcode-cn.com/problems/walking-robot-simulation/)\n\n### é“¾è¡¨\n- [âœ¨141. ç¯å½¢é“¾è¡¨-i](https://leetcode-cn.com/problems/linked-list-cycle/)\n- [âœ¨142. ç¯å½¢é“¾è¡¨-ii](https://leetcode-cn.com/problems/linked-list-cycle-ii/)\n- [âœ¨206. åè½¬é“¾è¡¨](https://leetcode-cn.com/problems/reverse-linked-list/)\n\n\n### æ ˆ\n- [20. æœ‰æ•ˆçš„æ‹¬å·](https://leetcode-cn.com/problems/valid-parentheses/)\n- [155. æœ€å°æ ˆ](https://leetcode-cn.com/problems/min-stack/)\n\n### é˜Ÿåˆ—\n- [622. è®¾è®¡å¾ªç¯é˜Ÿåˆ—](https://leetcode-cn.com/problems/design-circular-queue/)\n- [ğŸ¤”641. è®¾è®¡å¾ªç¯åŒç«¯é˜Ÿåˆ—](https://leetcode-cn.com/problems/design-circular-deque/)\n\n### Hash \n- [1. ä¸¤æ•°ä¹‹å’Œ](https://leetcode-cn.com/problems/two-sum/)\n- [49. å­—æ¯å¼‚ä½è¯åˆ†ç»„](https://leetcode-cn.com/problems/group-anagrams/)\n- [169. å¤šæ•°å…ƒç´ ](https://leetcode-cn.com/problems/majority-element/)\n- [242. æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯](https://leetcode-cn.com/problems/valid-anagram/)\n- [860. æŸ æª¬æ°´æ‰¾é›¶](https://leetcode-cn.com/problems/lemonade-change/)\n\n### [æ»‘åŠ¨çª—å£](https://leetcode-cn.com/problems/sliding-window-maximum/solution/239-hua-dong-chuang-kou-zui-da-zhi-by-alexer-660/)\n- [âœ¨239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼](https://leetcode-cn.com/problems/sliding-window-maximum/)\n- \n\n### æ ‘\n- [21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨](https://leetcode-cn.com/problems/merge-two-sorted-lists/)\n- [24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹](https://leetcode-cn.com/problems/swap-nodes-in-pairs/)\n- [ğŸ’‰25. kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨](https://leetcode-cn.com/problems/reverse-nodes-in-k-group/)\n- [ğŸ’‰92. åè½¬é“¾è¡¨](https://leetcode-cn.com/problems/reverse-linked-list-ii/)\n- [100. ç›¸åŒçš„æ ‘](https://leetcode-cn.com/problems/same-tree/)\n- [222. å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°](https://leetcode-cn.com/problems/count-complete-tree-nodes/)\n- [700. äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢](https://leetcode-cn.com/problems/search-in-a-binary-search-tree/)\n- [701. äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ](https://leetcode-cn.com/problems/insert-into-a-binary-search-tree/)\n- [âœ¨297. äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–](https://leetcode-cn.com/problems/serialize-and-deserialize-binary-tree/)\n- [âœ¨226. ç¿»è½¬äºŒå‰æ ‘](https://leetcode-cn.com/problems/invert-binary-tree/)\n- [âœ¨116. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ](https://leetcode-cn.com/problems/populating-next-right-pointers-in-each-node/)\n- [âœ¨98. éªŒè¯äºŒå‰æœç´¢æ ‘](https://leetcode-cn.com/problems/validate-binary-search-tree/)\n- [âœ¨112. è·¯ç»æ€»å’Œ](https://leetcode-cn.com/problems/path-sum/)\n- [âœ¨104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦](https://leetcode-cn.com/problems/maximum-depth-of-binary-tree/)\n- [âœ¨111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦](https://leetcode-cn.com/problems/minimum-depth-of-binary-tree/)\n- [âœ¨450. åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹](https://leetcode-cn.com/problems/delete-node-in-a-bst/)\n- [âœ¨105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/)\n- [âœ¨106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://leetcode-cn.com/problems/construct-binary-tree-from-inorder-and-postorder-traversal/)\n- [âœ¨236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/)\n- [ğŸ¤”ï¸114. äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨](https://leetcode-cn.com/problems/flatten-binary-tree-to-linked-list/)\n- [âœ¨144. äºŒå‰æ ‘çš„å‰åºéå†](https://leetcode-cn.com/problems/binary-tree-preorder-traversal/)\n- [âœ¨94. äºŒå‰æ ‘çš„ä¸­åºéå†](https://leetcode-cn.com/problems/binary-tree-inorder-traversal/)\n- [âœ¨145. äºŒå‰æ ‘çš„ååºéå†](https://leetcode-cn.com/problems/binary-tree-postorder-traversal/)\n- [âœ¨102. äºŒå‰æ ‘çš„å±‚åºéå†](https://leetcode-cn.com/problems/binary-tree-level-order-traversal/)\n- [âœ¨589. Nå‰æ ‘çš„å‰åºéå†](https://leetcode-cn.com/problems/n-ary-tree-preorder-traversal/)\n- [âœ¨590. Nå‰æ ‘çš„ååºéå†](https://leetcode-cn.com/problems/n-ary-tree-postorder-traversal/)\n- [âœ¨429. Nå‰æ ‘çš„å±‚åºéå†](https://leetcode-cn.com/problems/n-ary-tree-level-order-traversal/)\n\n## å‰ç¼€å’Œ\n- [âœ¨560. å’Œä¸ºkçš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-sum-equals-k/)\n\n## å•è°ƒæ ˆ\n- [42. æ¥é›¨æ°´](https://leetcode-cn.com/problems/trapping-rain-water/)\n- [84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/)\n- [âœ¨496. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ -i](https://leetcode-cn.com/problems/next-greater-element-i/)\n- [âœ¨503. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ -ii](https://leetcode-cn.com/problems/next-greater-element-ii/)\n- [âœ¨739. æ¯æ—¥æ¸©åº¦](https://leetcode-cn.com/problems/daily-temperatures/)\n\n\n```javascript\n// 84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢\n// å•è°ƒæ ˆ\nvar largestRectangleArea = function(heights) {\n  let area = 0;\n  let stack = [];\n  let current = 0;\n  heights = [0, ...heights, 0];\n  while (current < heights.length) {\n    // æ ˆä¸ä¸ºç©º ä¸” å½“å‰å…ƒç´  è¦ å¤§äº æ ˆé¡¶å…ƒç´ \n    // æ‰èƒ½è¢«æ¡†ä½\n    while(stack.length && heights[current] < heights[stack[stack.length - 1]]) {\n      let h = heights[stack[stack.length - 1]];\n      stack.pop();\n      if (!stack.length) break;\n      area = Math.max(area, (current - stack[stack.length - 1] - 1) * h)\n    }\n    stack.push(current);\n    current ++;\n  }\n  return area;\n};\n\n\n\nlet stack = [];\nlet current = 0;\nwhile(current < nums.length) {\n    // è¿™æ˜¯å•è°ƒé€’å¢æ ˆï¼Œè§†æƒ…å†µè€Œå®šï¼Œå½“å‰å…ƒç´ æ˜¯å¦å¤§äºæ ˆé¡¶å…ƒç´ \n    while(stack.length && nums[current] < nums[stack[stack.length -1]]) {\n        let base = nums[stack[stack.length -1]];\n        stack.pop();\n        if (!stack.length) break;\n        // some code ...\n    }\n    stack.push(current);\n    current ++;\n}\n```\n\n\n## åŒæŒ‡é’ˆ\n- [1. ä¸¤æ•°ä¹‹å’Œ](https://leetcode-cn.com/problems/two-sum/)\n- [11. ç››æœ€å¤šæ°´çš„å®¹å™¨](https://leetcode-cn.com/problems/container-with-most-water/)\n- [âœ¨15. ä¸‰æ•°ä¹‹å’Œ](https://leetcode-cn.com/problems/3sum/)\n- [26. åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹](https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/)\n- [42. æ¥é›¨æ°´](https://leetcode-cn.com/problems/trapping-rain-water/)\n- [âœ¨283. ç§»åŠ¨é›¶](https://leetcode-cn.com/problems/move-zeroes/)\n\n```javascript\nlet max = 0;\nfor (let i = 0, j = nums.length - 1; i !== j; ) {\n    max = Math.max(max, Math.min(nums[i], nums[j]) * (j - i)) ;\n    if (nums[i] < nums[j]) {\n        i ++;\n    } else {\n        j --;\n    }\n}\nreturn max;\n```\n\n### åŒæŒ‡é’ˆæš´åŠ›\n- [84. æŸ±çŠ¶å›¾ä¸­çš„æœ€å¤§çŸ©å½¢](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/)\n\n```javascript\nvar largestRectangleArea = function(heights) {\n    if (!heights.length) return 0;\n    let area = 0;\n    for (let i = 0; i < heights.length; i ++) {\n      let leftIndex = i;\n      let rightIndex = i;\n      let h = heights[i]; // åŸºå‡†ç‚¹ï¼Œå¾€å‰å¾€åéå†æ±‚è§£\n      while(heights[leftIndex - 1] >= h) {\n        leftIndex --;\n      }\n      while(heights[rightIndex + 1] >= h) {\n        rightIndex ++;\n      }\n      let distance = rightIndex - leftIndex + 1;\n      area = Math.max(area, distance * h);\n    }\n    return area;\n};\n\n\n// let max = 0;\nlet leftMax = 0;\nlet rightMax = 0;\nfor (let i = 0, j = nums.length - 1; i !== j; ) {\n    if (nums[i] < nums[j]) {\n        if (leftMax < nums[i]) {\n            leftMax = nums[i];\n        } else {\n            // some code ...\n        }\n        i ++;\n    } else {\n        if (rightMax < nums[j]) {\n            rightMax = nums[j];\n        } else {\n            // some code ...\n        }\n        j --;\n    }\n}\n```\n\n## é€’å½’\n- [70. çˆ¬æ¥¼æ¢¯](https://leetcode-cn.com/problems/climbing-stairs/)\n\n```javascript\nfunction recursion(level, param1, param2, ...) {\n\t// recursion terminator\n\tif (level > MAX_LEVEL) {\n\t\tprocrss_result;\n\t\treturn ;\n\t}\n\t\n\t// process logic in current level\n\tprocess(level, data ... );\n\t\n\t// drill down\n\trecursion(level + 1, new param1, new param2, ... );\n\t\n\t// reverse the current level status if needed\n}\n```\n\n\n## åˆ†æ²»\n\n```javascript \nfunction divideConquer(problem, param1, param2, ... ) {\n\t// recursion terminator\n\tif (!problem) {\n\t\tprint_result;\n\t\treturn ;\n\t}\n\t\n\t// prepare data\n\tdata = prepareData(problem);\n\tsubProblems = splitProblem(problem, data);\n\t\n\t// conquer subProblems\n\tsubResult1 = divideConquer(subProblems[0], newParam1, new Param2, ... );\n\tsubResult2 = divideConquer(subProblems[1], newParam1, new Param2, ... );\n\tsubResult3 = divideConquer(subProblems[2], newParam1, new Param2, ... );\n\t...\n\t\n\t// process and generate the final result\n\tresult = processResult(subResult1, subResult2, subResult3, ... );\n\t\n\t// revert the current level status\n}\n```\n\n\n## [DFS + å›æº¯](https://leetcode-cn.com/problems/permutations/solution/hui-su-suan-fa-python-dai-ma-java-dai-ma-by-liweiw/)\n- [17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ](https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/)\n- [22. æ‹¬å·ç”Ÿæˆ](https://leetcode-cn.com/problems/generate-parentheses/)\n- [46. å…¨æ’åˆ—-i](https://leetcode-cn.com/problems/permutations/)\n- [47. å…¨æ’åˆ—-ii](https://leetcode-cn.com/problems/permutations-ii/)\n- [51. Nçš‡å](https://leetcode-cn.com/problems/n-queens/)\n- [77. ç»„åˆ](https://leetcode-cn.com/problems/combinations/)\n\n\n## æ·±åº¦ä¼˜å…ˆæœç´¢\n- [55. è·³è·ƒæ¸¸æˆ](https://leetcode-cn.com/problems/jump-game/)\n\n```javascript\nfunction dfs(node) {\n\tif (node in visited) {\n\t\t// already visited\n\t\treturn ;\n\t}\n\t\n\tvisited.add(node);\n\t\n\t// process current node\n\t// ...\n\t// logic here\n\t\n\tdfs(node.left);\n\tdfs(node.right);\n}\n```\n\n### DFS ä»£ç  - é€’å½’å†™æ³•\n```javascript\nconst visited = new Set;\n\nfunction dfs(node, visited) {\n\tif (node in visited) {\n\t\t// already visited\n\t\treturn ;\n\t}\t\n\t\n\tvisited.add(node);\n\t\n\t// process current  node here\n\t...\n\tfor (nextNode in node.children) {\n\t\tif (!nextNode in visited) {\n\t\t\tdfs(nextNode, visited);\n\t\t}\n\t}\n}\n\n```\n\n### DFS ä»£ç  - éé€’å½’å†™æ³•\n\n```javascript\nfunction dfs(root) {\n\tif (!root) return [];\n\tconst visited = new Set;\n\tconst stack = [root];\n\t\n\twhile (stack.length) {\n\t\tlet node = stack.pop();\n\t\tvisited.add(node);\n\t\t\n\t\tprocess(node);\n\t\tnodes = generateRelatedNodes(node);\n\t\tstack.push(nodes);\n\t}\n\t\n\t// other processing work\n}\n```\n\n\n## BFS\n- [127. å•è¯æ¥é¾™-i](https://leetcode-cn.com/problems/word-ladder/)\n- [752. æ‰“å¼€è½¬ç›˜é”](https://leetcode-cn.com/problems/open-the-lock/)\n- [126. å•è¯æ¥é¾™-ii](https://leetcode-cn.com/problems/word-ladder-ii/)\n- [200. å²›å±¿æ•°é‡](https://leetcode-cn.com/problems/number-of-islands/)\n- [529. æ‰«é›·æ¸¸æˆ](https://leetcode-cn.com/problems/minesweeper/)\n\n```javascript\nfunction BFS(graph, start, end) {\n\tconst queue = [];\n\tqueue.push([start]);\n\tconst visited = new Set;\n\tvisited.add(start);\n\t\n\twhile (queue.length) {\n\t\tlet node = queue.shift();\n\t\tvisited.add(node);\n\t\t\n\t\tprocess(node);\n\t\tnodes = generateRelatedNodes(node);\n\t\tqueue.push(nodes);\n\t}\n\t\n\t// other processing work\n}\n```\n\n## äºŒåˆ†æŸ¥æ‰¾\n- [153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/)\n\t- [é¢˜è§£](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/solution/er-fen-cha-zhao-wei-shi-yao-zuo-you-bu-dui-cheng-z/)\n- [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/)\n\n\n```javascript\nlet left = 0, right = arr.length - 1;\n\nwhile (left < = right) {\n\tlet mid = (left + right) / 2;\n\tif (arr[mid] === target) {\n\t\t// find the target\n\t\tbreak or return result;\n\t} else if (arr[mid] < target) {\n\t\tleft = mid + 1;\n\t} else {\n\t\tright = mid - 1;\n\t}\n}\n```\n\n## ç»„åˆ\n- [77. ç»„åˆ](https://leetcode-cn.com/problems/combinations/)\n\n\n```javascript\nvar combine = function (n, k) {\n\tlet res = [];\n\tlet start = 1, path = [];\n\tcombineHelper(n, k, start, res, path);\n\treturn res;\n}\n/**\n * \n * @param {*} n 1 ... n æ•°ç»„ 1 ~ n\n * @param {*} k å– k ä¸ªæ•°\n * @param {*} start ä»å“ªä¸ªå¼€å§‹å–ï¼ˆä¸ä»æ•°ç»„ä¸‹æ ‡0å¼€å§‹ï¼‰\n * @param {*} res ç»“æœé›†\n * @param {*} path å•ä¸ªç»“æœ\n */\nvar combineHelper = function (n, k, start, res, path) {\n\t// recursion terminator\n\tif (path.length === k) {\n\t\tres.push(path.slice()); // å¤‡ä»½ä¸€ä»½\n\t}\n\t\n\t// logic process\n\tfor (let i = start; i <= n; i ++) { // æ•°ç»„ä¸º 1 ï½ nï¼Œæ‰€ä»¥ç»ˆæ­¢æ¡ä»¶ i <= n;ï¼ˆè§†æƒ…å†µè€Œå®šï¼‰\n\t\tpath.push(i); // é€‰\n\t\t// drill down\n\t\tcombineHelper(n. k, i + 1, res, path);\n\t\tpath.pop(); // ä¸é€‰\n\t}\n}\n```\n\n## æ’åˆ—\n- [46. å…¨æ’åˆ—-i](https://leetcode-cn.com/problems/permutations/)\n- [47. å…¨æ’åˆ—-ii](https://leetcode-cn.com/problems/permutations-ii/)\n\n```javascript\nvar permute = function(nums) {\n\tlet res = [];\n\tlet path =[];\n\tlet usedNum = {};\n\tpermuteHelper(nums, res, path, usedNum);\n\treturn res;\n};\n\n/**\n * \n * @param {*} nums ç”¨äºæ’åˆ—çš„æ•°ç»„\n * @param {*} res ç»“æœé›†\n * @param {*} path å•ä¸ªç»“æœ\n * @param {*} usedNum ä½¿ç”¨è¿‡çš„æ•°å­—\n */\n \n \n\nvar permuteHelper = function(nums, res, path, usedNum) {\n\t// recursion terminator\n\tif (path.length === nums.length) {\n    // å˜é‡ path æ‰€æŒ‡å‘çš„åˆ—è¡¨ åœ¨æ·±åº¦ä¼˜å…ˆéå†çš„è¿‡ç¨‹ä¸­åªæœ‰ä¸€ä»½ ï¼Œæ·±åº¦ä¼˜å…ˆéå†å®Œæˆä»¥åï¼Œå›åˆ°äº†æ ¹ç»“ç‚¹ï¼Œæˆä¸ºç©ºåˆ—è¡¨ã€‚\n\t\tres.push(path.slice());\n\t}\n\t\n\t// current level logic \n\tfor (let i = 0; i < nums.length; i ++) {\n\t\tif (usedNum[nums[i]] !== void 0) {\n\t\t\tcontinue;\n\t\t}\n\t\tpath.push(nums[i]); // é€‰ä¸­\n\t\tusedNum[nums[i]] = truel;\n\t\t\n\t\t// drill down\n\t\tpermuteHelper(nums, res, path, usedNum);\n\t\t\n\t\tpath.pop(); // æœªé€‰ä¸­\n\t\tusedNum[nums[i]] = false; // æ’¤é”€ä½¿ç”¨è®°å½•\n\t}\n};\n\n```\n\n\n```javascript\n\nvar permuteUnique = function(nums) {\n  let res = [];\n  let defaultNum = {};\n  // ç»Ÿè®¡å­—ç¬¦å‡ºç°ä¸ªæ•°\n  for (let i = 0; i < nums.length; i ++) {\n    defaultNum[nums[i]] ? defaultNum[nums[i]] ++ : defaultNum[nums[i]] = 1;\n  }\n  let usedNum = {... defaultNum};\n  nums = nums.sort();\n  permuteUniqueHelper(nums, res, [], usedNum);\n  return res;\n};\n/**\n * \n * @param {*} nums ä¼ å…¥çš„å¯ä½¿ç”¨æ•°ç»„\n * @param {*} res ç»“æœ\n * @param {*} path å½“å‰å±‚ç»“æœ\n * @param {*} usedNum ä½¿ç”¨è¿‡çš„map\n */\nvar permuteUniqueHelper = function(nums, res, path, usedNum) {\n  // recursion terminator\n  if (path.length === nums.length) {\n    res.push(path.slice());\n    return ;\n  }\n  // current level logic\n  for (let i = 0; i < nums.length; i ++) {\n    if (nums[i - 1] == nums[i] && i - 1 >= 0 && usedNum[nums[i]]) { // é¿å…äº§ç”Ÿé‡å¤çš„æ’åˆ—\n      continue;\n    }\n    if (usedNum[nums[i]] !== void 0 && usedNum[nums[i]] === 0) continue;\n    usedNum[nums[i]] --; // ä½¿ç”¨æ¬¡æ•°å‡ä¸€\n    path.push(nums[i]);\n    \n    // drill down\n    permuteUniqueHelper(nums, res, path, usedNum);\n    \n    path.pop();\n    usedNum[nums[i]] ++; // æ’¤é”€ä½¿ç”¨è®°å½• \n  }\n};\n```\n\n## åŠ¨æ€è§„åˆ’\n- [âœ¨300. æœ€é•¿ä¸Šå‡å­åºåˆ—](https://leetcode-cn.com/problems/longest-increasing-subsequence/)\n- [âœ¨322 é›¶é’±å…‘æ¢](https://leetcode-cn.com/problems/coin-change/)\n\n## åšå¼ˆè®º\n- [292. Nimæ¸¸æˆ](https://leetcode-cn.com/problems/nim-game/)\n- [877. çŸ³å­æ¸¸æˆ](https://leetcode-cn.com/problems/stone-game/)\n\n\n## å†™åœ¨åé¢","source":"_posts/ç®—æ³•æ¨¡æ¿.md","raw":"---\ntitle: ç®—æ³•æ¨¡æ¿\ndate: 2020-09-24 23:46:30\ntags:\n---\n\n\n\n<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n## å†™åœ¨å‰é¢\n- å¸¸è§ç®—æ³•æ¨¡æ¿ï¼ˆè‡ªå·±æ€»ç»“ï¼Œéå®˜æ–¹ï¼‰\n\n<!-- more -->\n\n## æ•°æ®ç»“æ„\n### æ•°ç»„\n- [26. åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹](https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/)\n- [66. åŠ ä¸€](https://leetcode-cn.com/problems/plus-one/)\n- [88. åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„](https://leetcode-cn.com/problems/merge-sorted-array/)\n- [122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/)\n- [455. åˆ†å‘é¥¼å¹²](https://leetcode-cn.com/problems/assign-cookies/)\n- [âœ¨189. æ—‹è½¬æ•°ç»„](https://leetcode-cn.com/problems/rotate-array/)\n- [âœ¨264. ä¸‘æ•°-ii](https://leetcode-cn.com/problems/ugly-number-ii/)\n- [874. æ¨¡æ‹Ÿè¡Œèµ°æœºå™¨äºº](https://leetcode-cn.com/problems/walking-robot-simulation/)\n\n### é“¾è¡¨\n- [âœ¨141. ç¯å½¢é“¾è¡¨-i](https://leetcode-cn.com/problems/linked-list-cycle/)\n- [âœ¨142. ç¯å½¢é“¾è¡¨-ii](https://leetcode-cn.com/problems/linked-list-cycle-ii/)\n- [âœ¨206. åè½¬é“¾è¡¨](https://leetcode-cn.com/problems/reverse-linked-list/)\n\n\n### æ ˆ\n- [20. æœ‰æ•ˆçš„æ‹¬å·](https://leetcode-cn.com/problems/valid-parentheses/)\n- [155. æœ€å°æ ˆ](https://leetcode-cn.com/problems/min-stack/)\n\n### é˜Ÿåˆ—\n- [622. è®¾è®¡å¾ªç¯é˜Ÿåˆ—](https://leetcode-cn.com/problems/design-circular-queue/)\n- [ğŸ¤”641. è®¾è®¡å¾ªç¯åŒç«¯é˜Ÿåˆ—](https://leetcode-cn.com/problems/design-circular-deque/)\n\n### Hash \n- [1. ä¸¤æ•°ä¹‹å’Œ](https://leetcode-cn.com/problems/two-sum/)\n- [49. å­—æ¯å¼‚ä½è¯åˆ†ç»„](https://leetcode-cn.com/problems/group-anagrams/)\n- [169. å¤šæ•°å…ƒç´ ](https://leetcode-cn.com/problems/majority-element/)\n- [242. æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯](https://leetcode-cn.com/problems/valid-anagram/)\n- [860. æŸ æª¬æ°´æ‰¾é›¶](https://leetcode-cn.com/problems/lemonade-change/)\n\n### [æ»‘åŠ¨çª—å£](https://leetcode-cn.com/problems/sliding-window-maximum/solution/239-hua-dong-chuang-kou-zui-da-zhi-by-alexer-660/)\n- [âœ¨239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼](https://leetcode-cn.com/problems/sliding-window-maximum/)\n- \n\n### æ ‘\n- [21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨](https://leetcode-cn.com/problems/merge-two-sorted-lists/)\n- [24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹](https://leetcode-cn.com/problems/swap-nodes-in-pairs/)\n- [ğŸ’‰25. kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨](https://leetcode-cn.com/problems/reverse-nodes-in-k-group/)\n- [ğŸ’‰92. åè½¬é“¾è¡¨](https://leetcode-cn.com/problems/reverse-linked-list-ii/)\n- [100. ç›¸åŒçš„æ ‘](https://leetcode-cn.com/problems/same-tree/)\n- [222. å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°](https://leetcode-cn.com/problems/count-complete-tree-nodes/)\n- [700. äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢](https://leetcode-cn.com/problems/search-in-a-binary-search-tree/)\n- [701. äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ](https://leetcode-cn.com/problems/insert-into-a-binary-search-tree/)\n- [âœ¨297. äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–](https://leetcode-cn.com/problems/serialize-and-deserialize-binary-tree/)\n- [âœ¨226. ç¿»è½¬äºŒå‰æ ‘](https://leetcode-cn.com/problems/invert-binary-tree/)\n- [âœ¨116. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ](https://leetcode-cn.com/problems/populating-next-right-pointers-in-each-node/)\n- [âœ¨98. éªŒè¯äºŒå‰æœç´¢æ ‘](https://leetcode-cn.com/problems/validate-binary-search-tree/)\n- [âœ¨112. è·¯ç»æ€»å’Œ](https://leetcode-cn.com/problems/path-sum/)\n- [âœ¨104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦](https://leetcode-cn.com/problems/maximum-depth-of-binary-tree/)\n- [âœ¨111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦](https://leetcode-cn.com/problems/minimum-depth-of-binary-tree/)\n- [âœ¨450. åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹](https://leetcode-cn.com/problems/delete-node-in-a-bst/)\n- [âœ¨105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/)\n- [âœ¨106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://leetcode-cn.com/problems/construct-binary-tree-from-inorder-and-postorder-traversal/)\n- [âœ¨236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/)\n- [ğŸ¤”ï¸114. äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨](https://leetcode-cn.com/problems/flatten-binary-tree-to-linked-list/)\n- [âœ¨144. äºŒå‰æ ‘çš„å‰åºéå†](https://leetcode-cn.com/problems/binary-tree-preorder-traversal/)\n- [âœ¨94. äºŒå‰æ ‘çš„ä¸­åºéå†](https://leetcode-cn.com/problems/binary-tree-inorder-traversal/)\n- [âœ¨145. äºŒå‰æ ‘çš„ååºéå†](https://leetcode-cn.com/problems/binary-tree-postorder-traversal/)\n- [âœ¨102. äºŒå‰æ ‘çš„å±‚åºéå†](https://leetcode-cn.com/problems/binary-tree-level-order-traversal/)\n- [âœ¨589. Nå‰æ ‘çš„å‰åºéå†](https://leetcode-cn.com/problems/n-ary-tree-preorder-traversal/)\n- [âœ¨590. Nå‰æ ‘çš„ååºéå†](https://leetcode-cn.com/problems/n-ary-tree-postorder-traversal/)\n- [âœ¨429. Nå‰æ ‘çš„å±‚åºéå†](https://leetcode-cn.com/problems/n-ary-tree-level-order-traversal/)\n\n## å‰ç¼€å’Œ\n- [âœ¨560. å’Œä¸ºkçš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-sum-equals-k/)\n\n## å•è°ƒæ ˆ\n- [42. æ¥é›¨æ°´](https://leetcode-cn.com/problems/trapping-rain-water/)\n- [84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/)\n- [âœ¨496. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ -i](https://leetcode-cn.com/problems/next-greater-element-i/)\n- [âœ¨503. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ -ii](https://leetcode-cn.com/problems/next-greater-element-ii/)\n- [âœ¨739. æ¯æ—¥æ¸©åº¦](https://leetcode-cn.com/problems/daily-temperatures/)\n\n\n```javascript\n// 84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢\n// å•è°ƒæ ˆ\nvar largestRectangleArea = function(heights) {\n  let area = 0;\n  let stack = [];\n  let current = 0;\n  heights = [0, ...heights, 0];\n  while (current < heights.length) {\n    // æ ˆä¸ä¸ºç©º ä¸” å½“å‰å…ƒç´  è¦ å¤§äº æ ˆé¡¶å…ƒç´ \n    // æ‰èƒ½è¢«æ¡†ä½\n    while(stack.length && heights[current] < heights[stack[stack.length - 1]]) {\n      let h = heights[stack[stack.length - 1]];\n      stack.pop();\n      if (!stack.length) break;\n      area = Math.max(area, (current - stack[stack.length - 1] - 1) * h)\n    }\n    stack.push(current);\n    current ++;\n  }\n  return area;\n};\n\n\n\nlet stack = [];\nlet current = 0;\nwhile(current < nums.length) {\n    // è¿™æ˜¯å•è°ƒé€’å¢æ ˆï¼Œè§†æƒ…å†µè€Œå®šï¼Œå½“å‰å…ƒç´ æ˜¯å¦å¤§äºæ ˆé¡¶å…ƒç´ \n    while(stack.length && nums[current] < nums[stack[stack.length -1]]) {\n        let base = nums[stack[stack.length -1]];\n        stack.pop();\n        if (!stack.length) break;\n        // some code ...\n    }\n    stack.push(current);\n    current ++;\n}\n```\n\n\n## åŒæŒ‡é’ˆ\n- [1. ä¸¤æ•°ä¹‹å’Œ](https://leetcode-cn.com/problems/two-sum/)\n- [11. ç››æœ€å¤šæ°´çš„å®¹å™¨](https://leetcode-cn.com/problems/container-with-most-water/)\n- [âœ¨15. ä¸‰æ•°ä¹‹å’Œ](https://leetcode-cn.com/problems/3sum/)\n- [26. åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹](https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/)\n- [42. æ¥é›¨æ°´](https://leetcode-cn.com/problems/trapping-rain-water/)\n- [âœ¨283. ç§»åŠ¨é›¶](https://leetcode-cn.com/problems/move-zeroes/)\n\n```javascript\nlet max = 0;\nfor (let i = 0, j = nums.length - 1; i !== j; ) {\n    max = Math.max(max, Math.min(nums[i], nums[j]) * (j - i)) ;\n    if (nums[i] < nums[j]) {\n        i ++;\n    } else {\n        j --;\n    }\n}\nreturn max;\n```\n\n### åŒæŒ‡é’ˆæš´åŠ›\n- [84. æŸ±çŠ¶å›¾ä¸­çš„æœ€å¤§çŸ©å½¢](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/)\n\n```javascript\nvar largestRectangleArea = function(heights) {\n    if (!heights.length) return 0;\n    let area = 0;\n    for (let i = 0; i < heights.length; i ++) {\n      let leftIndex = i;\n      let rightIndex = i;\n      let h = heights[i]; // åŸºå‡†ç‚¹ï¼Œå¾€å‰å¾€åéå†æ±‚è§£\n      while(heights[leftIndex - 1] >= h) {\n        leftIndex --;\n      }\n      while(heights[rightIndex + 1] >= h) {\n        rightIndex ++;\n      }\n      let distance = rightIndex - leftIndex + 1;\n      area = Math.max(area, distance * h);\n    }\n    return area;\n};\n\n\n// let max = 0;\nlet leftMax = 0;\nlet rightMax = 0;\nfor (let i = 0, j = nums.length - 1; i !== j; ) {\n    if (nums[i] < nums[j]) {\n        if (leftMax < nums[i]) {\n            leftMax = nums[i];\n        } else {\n            // some code ...\n        }\n        i ++;\n    } else {\n        if (rightMax < nums[j]) {\n            rightMax = nums[j];\n        } else {\n            // some code ...\n        }\n        j --;\n    }\n}\n```\n\n## é€’å½’\n- [70. çˆ¬æ¥¼æ¢¯](https://leetcode-cn.com/problems/climbing-stairs/)\n\n```javascript\nfunction recursion(level, param1, param2, ...) {\n\t// recursion terminator\n\tif (level > MAX_LEVEL) {\n\t\tprocrss_result;\n\t\treturn ;\n\t}\n\t\n\t// process logic in current level\n\tprocess(level, data ... );\n\t\n\t// drill down\n\trecursion(level + 1, new param1, new param2, ... );\n\t\n\t// reverse the current level status if needed\n}\n```\n\n\n## åˆ†æ²»\n\n```javascript \nfunction divideConquer(problem, param1, param2, ... ) {\n\t// recursion terminator\n\tif (!problem) {\n\t\tprint_result;\n\t\treturn ;\n\t}\n\t\n\t// prepare data\n\tdata = prepareData(problem);\n\tsubProblems = splitProblem(problem, data);\n\t\n\t// conquer subProblems\n\tsubResult1 = divideConquer(subProblems[0], newParam1, new Param2, ... );\n\tsubResult2 = divideConquer(subProblems[1], newParam1, new Param2, ... );\n\tsubResult3 = divideConquer(subProblems[2], newParam1, new Param2, ... );\n\t...\n\t\n\t// process and generate the final result\n\tresult = processResult(subResult1, subResult2, subResult3, ... );\n\t\n\t// revert the current level status\n}\n```\n\n\n## [DFS + å›æº¯](https://leetcode-cn.com/problems/permutations/solution/hui-su-suan-fa-python-dai-ma-java-dai-ma-by-liweiw/)\n- [17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ](https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/)\n- [22. æ‹¬å·ç”Ÿæˆ](https://leetcode-cn.com/problems/generate-parentheses/)\n- [46. å…¨æ’åˆ—-i](https://leetcode-cn.com/problems/permutations/)\n- [47. å…¨æ’åˆ—-ii](https://leetcode-cn.com/problems/permutations-ii/)\n- [51. Nçš‡å](https://leetcode-cn.com/problems/n-queens/)\n- [77. ç»„åˆ](https://leetcode-cn.com/problems/combinations/)\n\n\n## æ·±åº¦ä¼˜å…ˆæœç´¢\n- [55. è·³è·ƒæ¸¸æˆ](https://leetcode-cn.com/problems/jump-game/)\n\n```javascript\nfunction dfs(node) {\n\tif (node in visited) {\n\t\t// already visited\n\t\treturn ;\n\t}\n\t\n\tvisited.add(node);\n\t\n\t// process current node\n\t// ...\n\t// logic here\n\t\n\tdfs(node.left);\n\tdfs(node.right);\n}\n```\n\n### DFS ä»£ç  - é€’å½’å†™æ³•\n```javascript\nconst visited = new Set;\n\nfunction dfs(node, visited) {\n\tif (node in visited) {\n\t\t// already visited\n\t\treturn ;\n\t}\t\n\t\n\tvisited.add(node);\n\t\n\t// process current  node here\n\t...\n\tfor (nextNode in node.children) {\n\t\tif (!nextNode in visited) {\n\t\t\tdfs(nextNode, visited);\n\t\t}\n\t}\n}\n\n```\n\n### DFS ä»£ç  - éé€’å½’å†™æ³•\n\n```javascript\nfunction dfs(root) {\n\tif (!root) return [];\n\tconst visited = new Set;\n\tconst stack = [root];\n\t\n\twhile (stack.length) {\n\t\tlet node = stack.pop();\n\t\tvisited.add(node);\n\t\t\n\t\tprocess(node);\n\t\tnodes = generateRelatedNodes(node);\n\t\tstack.push(nodes);\n\t}\n\t\n\t// other processing work\n}\n```\n\n\n## BFS\n- [127. å•è¯æ¥é¾™-i](https://leetcode-cn.com/problems/word-ladder/)\n- [752. æ‰“å¼€è½¬ç›˜é”](https://leetcode-cn.com/problems/open-the-lock/)\n- [126. å•è¯æ¥é¾™-ii](https://leetcode-cn.com/problems/word-ladder-ii/)\n- [200. å²›å±¿æ•°é‡](https://leetcode-cn.com/problems/number-of-islands/)\n- [529. æ‰«é›·æ¸¸æˆ](https://leetcode-cn.com/problems/minesweeper/)\n\n```javascript\nfunction BFS(graph, start, end) {\n\tconst queue = [];\n\tqueue.push([start]);\n\tconst visited = new Set;\n\tvisited.add(start);\n\t\n\twhile (queue.length) {\n\t\tlet node = queue.shift();\n\t\tvisited.add(node);\n\t\t\n\t\tprocess(node);\n\t\tnodes = generateRelatedNodes(node);\n\t\tqueue.push(nodes);\n\t}\n\t\n\t// other processing work\n}\n```\n\n## äºŒåˆ†æŸ¥æ‰¾\n- [153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/)\n\t- [é¢˜è§£](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/solution/er-fen-cha-zhao-wei-shi-yao-zuo-you-bu-dui-cheng-z/)\n- [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/)\n\n\n```javascript\nlet left = 0, right = arr.length - 1;\n\nwhile (left < = right) {\n\tlet mid = (left + right) / 2;\n\tif (arr[mid] === target) {\n\t\t// find the target\n\t\tbreak or return result;\n\t} else if (arr[mid] < target) {\n\t\tleft = mid + 1;\n\t} else {\n\t\tright = mid - 1;\n\t}\n}\n```\n\n## ç»„åˆ\n- [77. ç»„åˆ](https://leetcode-cn.com/problems/combinations/)\n\n\n```javascript\nvar combine = function (n, k) {\n\tlet res = [];\n\tlet start = 1, path = [];\n\tcombineHelper(n, k, start, res, path);\n\treturn res;\n}\n/**\n * \n * @param {*} n 1 ... n æ•°ç»„ 1 ~ n\n * @param {*} k å– k ä¸ªæ•°\n * @param {*} start ä»å“ªä¸ªå¼€å§‹å–ï¼ˆä¸ä»æ•°ç»„ä¸‹æ ‡0å¼€å§‹ï¼‰\n * @param {*} res ç»“æœé›†\n * @param {*} path å•ä¸ªç»“æœ\n */\nvar combineHelper = function (n, k, start, res, path) {\n\t// recursion terminator\n\tif (path.length === k) {\n\t\tres.push(path.slice()); // å¤‡ä»½ä¸€ä»½\n\t}\n\t\n\t// logic process\n\tfor (let i = start; i <= n; i ++) { // æ•°ç»„ä¸º 1 ï½ nï¼Œæ‰€ä»¥ç»ˆæ­¢æ¡ä»¶ i <= n;ï¼ˆè§†æƒ…å†µè€Œå®šï¼‰\n\t\tpath.push(i); // é€‰\n\t\t// drill down\n\t\tcombineHelper(n. k, i + 1, res, path);\n\t\tpath.pop(); // ä¸é€‰\n\t}\n}\n```\n\n## æ’åˆ—\n- [46. å…¨æ’åˆ—-i](https://leetcode-cn.com/problems/permutations/)\n- [47. å…¨æ’åˆ—-ii](https://leetcode-cn.com/problems/permutations-ii/)\n\n```javascript\nvar permute = function(nums) {\n\tlet res = [];\n\tlet path =[];\n\tlet usedNum = {};\n\tpermuteHelper(nums, res, path, usedNum);\n\treturn res;\n};\n\n/**\n * \n * @param {*} nums ç”¨äºæ’åˆ—çš„æ•°ç»„\n * @param {*} res ç»“æœé›†\n * @param {*} path å•ä¸ªç»“æœ\n * @param {*} usedNum ä½¿ç”¨è¿‡çš„æ•°å­—\n */\n \n \n\nvar permuteHelper = function(nums, res, path, usedNum) {\n\t// recursion terminator\n\tif (path.length === nums.length) {\n    // å˜é‡ path æ‰€æŒ‡å‘çš„åˆ—è¡¨ åœ¨æ·±åº¦ä¼˜å…ˆéå†çš„è¿‡ç¨‹ä¸­åªæœ‰ä¸€ä»½ ï¼Œæ·±åº¦ä¼˜å…ˆéå†å®Œæˆä»¥åï¼Œå›åˆ°äº†æ ¹ç»“ç‚¹ï¼Œæˆä¸ºç©ºåˆ—è¡¨ã€‚\n\t\tres.push(path.slice());\n\t}\n\t\n\t// current level logic \n\tfor (let i = 0; i < nums.length; i ++) {\n\t\tif (usedNum[nums[i]] !== void 0) {\n\t\t\tcontinue;\n\t\t}\n\t\tpath.push(nums[i]); // é€‰ä¸­\n\t\tusedNum[nums[i]] = truel;\n\t\t\n\t\t// drill down\n\t\tpermuteHelper(nums, res, path, usedNum);\n\t\t\n\t\tpath.pop(); // æœªé€‰ä¸­\n\t\tusedNum[nums[i]] = false; // æ’¤é”€ä½¿ç”¨è®°å½•\n\t}\n};\n\n```\n\n\n```javascript\n\nvar permuteUnique = function(nums) {\n  let res = [];\n  let defaultNum = {};\n  // ç»Ÿè®¡å­—ç¬¦å‡ºç°ä¸ªæ•°\n  for (let i = 0; i < nums.length; i ++) {\n    defaultNum[nums[i]] ? defaultNum[nums[i]] ++ : defaultNum[nums[i]] = 1;\n  }\n  let usedNum = {... defaultNum};\n  nums = nums.sort();\n  permuteUniqueHelper(nums, res, [], usedNum);\n  return res;\n};\n/**\n * \n * @param {*} nums ä¼ å…¥çš„å¯ä½¿ç”¨æ•°ç»„\n * @param {*} res ç»“æœ\n * @param {*} path å½“å‰å±‚ç»“æœ\n * @param {*} usedNum ä½¿ç”¨è¿‡çš„map\n */\nvar permuteUniqueHelper = function(nums, res, path, usedNum) {\n  // recursion terminator\n  if (path.length === nums.length) {\n    res.push(path.slice());\n    return ;\n  }\n  // current level logic\n  for (let i = 0; i < nums.length; i ++) {\n    if (nums[i - 1] == nums[i] && i - 1 >= 0 && usedNum[nums[i]]) { // é¿å…äº§ç”Ÿé‡å¤çš„æ’åˆ—\n      continue;\n    }\n    if (usedNum[nums[i]] !== void 0 && usedNum[nums[i]] === 0) continue;\n    usedNum[nums[i]] --; // ä½¿ç”¨æ¬¡æ•°å‡ä¸€\n    path.push(nums[i]);\n    \n    // drill down\n    permuteUniqueHelper(nums, res, path, usedNum);\n    \n    path.pop();\n    usedNum[nums[i]] ++; // æ’¤é”€ä½¿ç”¨è®°å½• \n  }\n};\n```\n\n## åŠ¨æ€è§„åˆ’\n- [âœ¨300. æœ€é•¿ä¸Šå‡å­åºåˆ—](https://leetcode-cn.com/problems/longest-increasing-subsequence/)\n- [âœ¨322 é›¶é’±å…‘æ¢](https://leetcode-cn.com/problems/coin-change/)\n\n## åšå¼ˆè®º\n- [292. Nimæ¸¸æˆ](https://leetcode-cn.com/problems/nim-game/)\n- [877. çŸ³å­æ¸¸æˆ](https://leetcode-cn.com/problems/stone-game/)\n\n\n## å†™åœ¨åé¢","slug":"ç®—æ³•æ¨¡æ¿","published":1,"updated":"2020-10-29T15:13:51.882Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckguz3u8l003vfw9k6fk0h8zu","content":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å¸¸è§ç®—æ³•æ¨¡æ¿ï¼ˆè‡ªå·±æ€»ç»“ï¼Œéå®˜æ–¹ï¼‰</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"æ•°æ®ç»“æ„\"><a href=\"#æ•°æ®ç»“æ„\" class=\"headerlink\" title=\"æ•°æ®ç»“æ„\"></a>æ•°æ®ç»“æ„</h2><h3 id=\"æ•°ç»„\"><a href=\"#æ•°ç»„\" class=\"headerlink\" title=\"æ•°ç»„\"></a>æ•°ç»„</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/\" target=\"_blank\" rel=\"noopener\">26. åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/plus-one/\" target=\"_blank\" rel=\"noopener\">66. åŠ ä¸€</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/merge-sorted-array/\" target=\"_blank\" rel=\"noopener\">88. åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/\" target=\"_blank\" rel=\"noopener\">122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/assign-cookies/\" target=\"_blank\" rel=\"noopener\">455. åˆ†å‘é¥¼å¹²</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/rotate-array/\" target=\"_blank\" rel=\"noopener\">âœ¨189. æ—‹è½¬æ•°ç»„</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/ugly-number-ii/\" target=\"_blank\" rel=\"noopener\">âœ¨264. ä¸‘æ•°-ii</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/walking-robot-simulation/\" target=\"_blank\" rel=\"noopener\">874. æ¨¡æ‹Ÿè¡Œèµ°æœºå™¨äºº</a></li>\n</ul>\n<h3 id=\"é“¾è¡¨\"><a href=\"#é“¾è¡¨\" class=\"headerlink\" title=\"é“¾è¡¨\"></a>é“¾è¡¨</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/linked-list-cycle/\" target=\"_blank\" rel=\"noopener\">âœ¨141. ç¯å½¢é“¾è¡¨-i</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/linked-list-cycle-ii/\" target=\"_blank\" rel=\"noopener\">âœ¨142. ç¯å½¢é“¾è¡¨-ii</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/reverse-linked-list/\" target=\"_blank\" rel=\"noopener\">âœ¨206. åè½¬é“¾è¡¨</a></li>\n</ul>\n<h3 id=\"æ ˆ\"><a href=\"#æ ˆ\" class=\"headerlink\" title=\"æ ˆ\"></a>æ ˆ</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/valid-parentheses/\" target=\"_blank\" rel=\"noopener\">20. æœ‰æ•ˆçš„æ‹¬å·</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/min-stack/\" target=\"_blank\" rel=\"noopener\">155. æœ€å°æ ˆ</a></li>\n</ul>\n<h3 id=\"é˜Ÿåˆ—\"><a href=\"#é˜Ÿåˆ—\" class=\"headerlink\" title=\"é˜Ÿåˆ—\"></a>é˜Ÿåˆ—</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/design-circular-queue/\" target=\"_blank\" rel=\"noopener\">622. è®¾è®¡å¾ªç¯é˜Ÿåˆ—</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/design-circular-deque/\" target=\"_blank\" rel=\"noopener\">ğŸ¤”641. è®¾è®¡å¾ªç¯åŒç«¯é˜Ÿåˆ—</a></li>\n</ul>\n<h3 id=\"Hash\"><a href=\"#Hash\" class=\"headerlink\" title=\"Hash\"></a>Hash</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">1. ä¸¤æ•°ä¹‹å’Œ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/group-anagrams/\" target=\"_blank\" rel=\"noopener\">49. å­—æ¯å¼‚ä½è¯åˆ†ç»„</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/majority-element/\" target=\"_blank\" rel=\"noopener\">169. å¤šæ•°å…ƒç´ </a></li>\n<li><a href=\"https://leetcode-cn.com/problems/valid-anagram/\" target=\"_blank\" rel=\"noopener\">242. æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/lemonade-change/\" target=\"_blank\" rel=\"noopener\">860. æŸ æª¬æ°´æ‰¾é›¶</a></li>\n</ul>\n<h3 id=\"æ»‘åŠ¨çª—å£\"><a href=\"#æ»‘åŠ¨çª—å£\" class=\"headerlink\" title=\"æ»‘åŠ¨çª—å£\"></a><a href=\"https://leetcode-cn.com/problems/sliding-window-maximum/solution/239-hua-dong-chuang-kou-zui-da-zhi-by-alexer-660/\" target=\"_blank\" rel=\"noopener\">æ»‘åŠ¨çª—å£</a></h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/sliding-window-maximum/\" target=\"_blank\" rel=\"noopener\">âœ¨239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼</a></li>\n<li></li>\n</ul>\n<h3 id=\"æ ‘\"><a href=\"#æ ‘\" class=\"headerlink\" title=\"æ ‘\"></a>æ ‘</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/merge-two-sorted-lists/\" target=\"_blank\" rel=\"noopener\">21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/swap-nodes-in-pairs/\" target=\"_blank\" rel=\"noopener\">24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/reverse-nodes-in-k-group/\" target=\"_blank\" rel=\"noopener\">ğŸ’‰25. kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/reverse-linked-list-ii/\" target=\"_blank\" rel=\"noopener\">ğŸ’‰92. åè½¬é“¾è¡¨</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/same-tree/\" target=\"_blank\" rel=\"noopener\">100. ç›¸åŒçš„æ ‘</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/count-complete-tree-nodes/\" target=\"_blank\" rel=\"noopener\">222. å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/search-in-a-binary-search-tree/\" target=\"_blank\" rel=\"noopener\">700. äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/insert-into-a-binary-search-tree/\" target=\"_blank\" rel=\"noopener\">701. äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/serialize-and-deserialize-binary-tree/\" target=\"_blank\" rel=\"noopener\">âœ¨297. äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/invert-binary-tree/\" target=\"_blank\" rel=\"noopener\">âœ¨226. ç¿»è½¬äºŒå‰æ ‘</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/populating-next-right-pointers-in-each-node/\" target=\"_blank\" rel=\"noopener\">âœ¨116. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/validate-binary-search-tree/\" target=\"_blank\" rel=\"noopener\">âœ¨98. éªŒè¯äºŒå‰æœç´¢æ ‘</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/path-sum/\" target=\"_blank\" rel=\"noopener\">âœ¨112. è·¯ç»æ€»å’Œ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/maximum-depth-of-binary-tree/\" target=\"_blank\" rel=\"noopener\">âœ¨104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/minimum-depth-of-binary-tree/\" target=\"_blank\" rel=\"noopener\">âœ¨111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/delete-node-in-a-bst/\" target=\"_blank\" rel=\"noopener\">âœ¨450. åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/construct-binary-tree-from-inorder-and-postorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/\" target=\"_blank\" rel=\"noopener\">âœ¨236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/flatten-binary-tree-to-linked-list/\" target=\"_blank\" rel=\"noopener\">ğŸ¤”ï¸114. äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/binary-tree-preorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨144. äºŒå‰æ ‘çš„å‰åºéå†</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/binary-tree-inorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨94. äºŒå‰æ ‘çš„ä¸­åºéå†</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/binary-tree-postorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨145. äºŒå‰æ ‘çš„ååºéå†</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/binary-tree-level-order-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨102. äºŒå‰æ ‘çš„å±‚åºéå†</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/n-ary-tree-preorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨589. Nå‰æ ‘çš„å‰åºéå†</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/n-ary-tree-postorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨590. Nå‰æ ‘çš„ååºéå†</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/n-ary-tree-level-order-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨429. Nå‰æ ‘çš„å±‚åºéå†</a></li>\n</ul>\n<h2 id=\"å‰ç¼€å’Œ\"><a href=\"#å‰ç¼€å’Œ\" class=\"headerlink\" title=\"å‰ç¼€å’Œ\"></a>å‰ç¼€å’Œ</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/subarray-sum-equals-k/\" target=\"_blank\" rel=\"noopener\">âœ¨560. å’Œä¸ºkçš„å­æ•°ç»„</a></li>\n</ul>\n<h2 id=\"å•è°ƒæ ˆ\"><a href=\"#å•è°ƒæ ˆ\" class=\"headerlink\" title=\"å•è°ƒæ ˆ\"></a>å•è°ƒæ ˆ</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/trapping-rain-water/\" target=\"_blank\" rel=\"noopener\">42. æ¥é›¨æ°´</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/largest-rectangle-in-histogram/\" target=\"_blank\" rel=\"noopener\">84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/next-greater-element-i/\" target=\"_blank\" rel=\"noopener\">âœ¨496. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ -i</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/next-greater-element-ii/\" target=\"_blank\" rel=\"noopener\">âœ¨503. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ -ii</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/daily-temperatures/\" target=\"_blank\" rel=\"noopener\">âœ¨739. æ¯æ—¥æ¸©åº¦</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢</span></span><br><span class=\"line\"><span class=\"comment\">// å•è°ƒæ ˆ</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> largestRectangleArea = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">heights</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> area = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> stack = [];</span><br><span class=\"line\">  <span class=\"keyword\">let</span> current = <span class=\"number\">0</span>;</span><br><span class=\"line\">  heights = [<span class=\"number\">0</span>, ...heights, <span class=\"number\">0</span>];</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (current &lt; heights.length) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ ˆä¸ä¸ºç©º ä¸” å½“å‰å…ƒç´  è¦ å¤§äº æ ˆé¡¶å…ƒç´ </span></span><br><span class=\"line\">    <span class=\"comment\">// æ‰èƒ½è¢«æ¡†ä½</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(stack.length &amp;&amp; heights[current] &lt; heights[stack[stack.length - <span class=\"number\">1</span>]]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> h = heights[stack[stack.length - <span class=\"number\">1</span>]];</span><br><span class=\"line\">      stack.pop();</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!stack.length) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      area = <span class=\"built_in\">Math</span>.max(area, (current - stack[stack.length - <span class=\"number\">1</span>] - <span class=\"number\">1</span>) * h)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    stack.push(current);</span><br><span class=\"line\">    current ++;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> area;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> stack = [];</span><br><span class=\"line\"><span class=\"keyword\">let</span> current = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">while</span>(current &lt; nums.length) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¿™æ˜¯å•è°ƒé€’å¢æ ˆï¼Œè§†æƒ…å†µè€Œå®šï¼Œå½“å‰å…ƒç´ æ˜¯å¦å¤§äºæ ˆé¡¶å…ƒç´ </span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(stack.length &amp;&amp; nums[current] &lt; nums[stack[stack.length <span class=\"number\">-1</span>]]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> base = nums[stack[stack.length <span class=\"number\">-1</span>]];</span><br><span class=\"line\">        stack.pop();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!stack.length) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"comment\">// some code ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    stack.push(current);</span><br><span class=\"line\">    current ++;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"åŒæŒ‡é’ˆ\"><a href=\"#åŒæŒ‡é’ˆ\" class=\"headerlink\" title=\"åŒæŒ‡é’ˆ\"></a>åŒæŒ‡é’ˆ</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">1. ä¸¤æ•°ä¹‹å’Œ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/container-with-most-water/\" target=\"_blank\" rel=\"noopener\">11. ç››æœ€å¤šæ°´çš„å®¹å™¨</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/3sum/\" target=\"_blank\" rel=\"noopener\">âœ¨15. ä¸‰æ•°ä¹‹å’Œ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/\" target=\"_blank\" rel=\"noopener\">26. åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/trapping-rain-water/\" target=\"_blank\" rel=\"noopener\">42. æ¥é›¨æ°´</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/move-zeroes/\" target=\"_blank\" rel=\"noopener\">âœ¨283. ç§»åŠ¨é›¶</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> max = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, j = nums.length - <span class=\"number\">1</span>; i !== j; ) &#123;</span><br><span class=\"line\">    max = <span class=\"built_in\">Math</span>.max(max, <span class=\"built_in\">Math</span>.min(nums[i], nums[j]) * (j - i)) ;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nums[i] &lt; nums[j]) &#123;</span><br><span class=\"line\">        i ++;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        j --;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">return</span> max;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åŒæŒ‡é’ˆæš´åŠ›\"><a href=\"#åŒæŒ‡é’ˆæš´åŠ›\" class=\"headerlink\" title=\"åŒæŒ‡é’ˆæš´åŠ›\"></a>åŒæŒ‡é’ˆæš´åŠ›</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/largest-rectangle-in-histogram/\" target=\"_blank\" rel=\"noopener\">84. æŸ±çŠ¶å›¾ä¸­çš„æœ€å¤§çŸ©å½¢</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> largestRectangleArea = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">heights</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!heights.length) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> area = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; heights.length; i ++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> leftIndex = i;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> rightIndex = i;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> h = heights[i]; <span class=\"comment\">// åŸºå‡†ç‚¹ï¼Œå¾€å‰å¾€åéå†æ±‚è§£</span></span><br><span class=\"line\">      <span class=\"keyword\">while</span>(heights[leftIndex - <span class=\"number\">1</span>] &gt;= h) &#123;</span><br><span class=\"line\">        leftIndex --;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">while</span>(heights[rightIndex + <span class=\"number\">1</span>] &gt;= h) &#123;</span><br><span class=\"line\">        rightIndex ++;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> distance = rightIndex - leftIndex + <span class=\"number\">1</span>;</span><br><span class=\"line\">      area = <span class=\"built_in\">Math</span>.max(area, distance * h);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> area;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// let max = 0;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> leftMax = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> rightMax = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, j = nums.length - <span class=\"number\">1</span>; i !== j; ) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nums[i] &lt; nums[j]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (leftMax &lt; nums[i]) &#123;</span><br><span class=\"line\">            leftMax = nums[i];</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// some code ...</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        i ++;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (rightMax &lt; nums[j]) &#123;</span><br><span class=\"line\">            rightMax = nums[j];</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// some code ...</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        j --;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"é€’å½’\"><a href=\"#é€’å½’\" class=\"headerlink\" title=\"é€’å½’\"></a>é€’å½’</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/climbing-stairs/\" target=\"_blank\" rel=\"noopener\">70. çˆ¬æ¥¼æ¢¯</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">recursion</span>(<span class=\"params\">level, param1, param2, ...</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// recursion terminator</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (level &gt; MAX_LEVEL) &#123;</span><br><span class=\"line\">\t\tprocrss_result;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> ;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// process logic in current level</span></span><br><span class=\"line\">\tprocess(level, data ... );</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// drill down</span></span><br><span class=\"line\">\trecursion(level + <span class=\"number\">1</span>, <span class=\"keyword\">new</span> param1, <span class=\"keyword\">new</span> param2, ... );</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// reverse the current level status if needed</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"åˆ†æ²»\"><a href=\"#åˆ†æ²»\" class=\"headerlink\" title=\"åˆ†æ²»\"></a>åˆ†æ²»</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">divideConquer</span>(<span class=\"params\">problem, param1, param2, ... </span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// recursion terminator</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!problem) &#123;</span><br><span class=\"line\">\t\tprint_result;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> ;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// prepare data</span></span><br><span class=\"line\">\tdata = prepareData(problem);</span><br><span class=\"line\">\tsubProblems = splitProblem(problem, data);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// conquer subProblems</span></span><br><span class=\"line\">\tsubResult1 = divideConquer(subProblems[<span class=\"number\">0</span>], newParam1, <span class=\"keyword\">new</span> Param2, ... );</span><br><span class=\"line\">\tsubResult2 = divideConquer(subProblems[<span class=\"number\">1</span>], newParam1, <span class=\"keyword\">new</span> Param2, ... );</span><br><span class=\"line\">\tsubResult3 = divideConquer(subProblems[<span class=\"number\">2</span>], newParam1, <span class=\"keyword\">new</span> Param2, ... );</span><br><span class=\"line\">\t...</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// process and generate the final result</span></span><br><span class=\"line\">\tresult = processResult(subResult1, subResult2, subResult3, ... );</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// revert the current level status</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"DFS-å›æº¯\"><a href=\"#DFS-å›æº¯\" class=\"headerlink\" title=\"DFS + å›æº¯\"></a><a href=\"https://leetcode-cn.com/problems/permutations/solution/hui-su-suan-fa-python-dai-ma-java-dai-ma-by-liweiw/\" target=\"_blank\" rel=\"noopener\">DFS + å›æº¯</a></h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/\" target=\"_blank\" rel=\"noopener\">17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/generate-parentheses/\" target=\"_blank\" rel=\"noopener\">22. æ‹¬å·ç”Ÿæˆ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/permutations/\" target=\"_blank\" rel=\"noopener\">46. å…¨æ’åˆ—-i</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/permutations-ii/\" target=\"_blank\" rel=\"noopener\">47. å…¨æ’åˆ—-ii</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/n-queens/\" target=\"_blank\" rel=\"noopener\">51. Nçš‡å</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/combinations/\" target=\"_blank\" rel=\"noopener\">77. ç»„åˆ</a></li>\n</ul>\n<h2 id=\"æ·±åº¦ä¼˜å…ˆæœç´¢\"><a href=\"#æ·±åº¦ä¼˜å…ˆæœç´¢\" class=\"headerlink\" title=\"æ·±åº¦ä¼˜å…ˆæœç´¢\"></a>æ·±åº¦ä¼˜å…ˆæœç´¢</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/jump-game/\" target=\"_blank\" rel=\"noopener\">55. è·³è·ƒæ¸¸æˆ</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dfs</span>(<span class=\"params\">node</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (node <span class=\"keyword\">in</span> visited) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// already visited</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> ;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tvisited.add(node);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// process current node</span></span><br><span class=\"line\">\t<span class=\"comment\">// ...</span></span><br><span class=\"line\">\t<span class=\"comment\">// logic here</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\tdfs(node.left);</span><br><span class=\"line\">\tdfs(node.right);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"DFS-ä»£ç -é€’å½’å†™æ³•\"><a href=\"#DFS-ä»£ç -é€’å½’å†™æ³•\" class=\"headerlink\" title=\"DFS ä»£ç  - é€’å½’å†™æ³•\"></a>DFS ä»£ç  - é€’å½’å†™æ³•</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> visited = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dfs</span>(<span class=\"params\">node, visited</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (node <span class=\"keyword\">in</span> visited) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// already visited</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> ;</span><br><span class=\"line\">\t&#125;\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tvisited.add(node);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// process current  node here</span></span><br><span class=\"line\">\t...</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (nextNode <span class=\"keyword\">in</span> node.children) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!nextNode <span class=\"keyword\">in</span> visited) &#123;</span><br><span class=\"line\">\t\t\tdfs(nextNode, visited);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"DFS-ä»£ç -éé€’å½’å†™æ³•\"><a href=\"#DFS-ä»£ç -éé€’å½’å†™æ³•\" class=\"headerlink\" title=\"DFS ä»£ç  - éé€’å½’å†™æ³•\"></a>DFS ä»£ç  - éé€’å½’å†™æ³•</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dfs</span>(<span class=\"params\">root</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!root) <span class=\"keyword\">return</span> [];</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> visited = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> stack = [root];</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (stack.length) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> node = stack.pop();</span><br><span class=\"line\">\t\tvisited.add(node);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tprocess(node);</span><br><span class=\"line\">\t\tnodes = generateRelatedNodes(node);</span><br><span class=\"line\">\t\tstack.push(nodes);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// other processing work</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"BFS\"><a href=\"#BFS\" class=\"headerlink\" title=\"BFS\"></a>BFS</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/word-ladder/\" target=\"_blank\" rel=\"noopener\">127. å•è¯æ¥é¾™-i</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/open-the-lock/\" target=\"_blank\" rel=\"noopener\">752. æ‰“å¼€è½¬ç›˜é”</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/word-ladder-ii/\" target=\"_blank\" rel=\"noopener\">126. å•è¯æ¥é¾™-ii</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/number-of-islands/\" target=\"_blank\" rel=\"noopener\">200. å²›å±¿æ•°é‡</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/minesweeper/\" target=\"_blank\" rel=\"noopener\">529. æ‰«é›·æ¸¸æˆ</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">BFS</span>(<span class=\"params\">graph, start, end</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> queue = [];</span><br><span class=\"line\">\tqueue.push([start]);</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> visited = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>;</span><br><span class=\"line\">\tvisited.add(start);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (queue.length) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> node = queue.shift();</span><br><span class=\"line\">\t\tvisited.add(node);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tprocess(node);</span><br><span class=\"line\">\t\tnodes = generateRelatedNodes(node);</span><br><span class=\"line\">\t\tqueue.push(nodes);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// other processing work</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"äºŒåˆ†æŸ¥æ‰¾\"><a href=\"#äºŒåˆ†æŸ¥æ‰¾\" class=\"headerlink\" title=\"äºŒåˆ†æŸ¥æ‰¾\"></a>äºŒåˆ†æŸ¥æ‰¾</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/\" target=\"_blank\" rel=\"noopener\">153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼</a><ul>\n<li><a href=\"https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/solution/er-fen-cha-zhao-wei-shi-yao-zuo-you-bu-dui-cheng-z/\" target=\"_blank\" rel=\"noopener\">é¢˜è§£</a></li>\n</ul>\n</li>\n<li><a href=\"https://leetcode-cn.com/problems/search-in-rotated-sorted-array/\" target=\"_blank\" rel=\"noopener\">33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> left = <span class=\"number\">0</span>, right = arr.length - <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> (left &lt; = right) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> mid = (left + right) / <span class=\"number\">2</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (arr[mid] === target) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// find the target</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span> or <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (arr[mid] &lt; target) &#123;</span><br><span class=\"line\">\t\tleft = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\tright = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ç»„åˆ\"><a href=\"#ç»„åˆ\" class=\"headerlink\" title=\"ç»„åˆ\"></a>ç»„åˆ</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/combinations/\" target=\"_blank\" rel=\"noopener\">77. ç»„åˆ</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> combine = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">n, k</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> res = [];</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> start = <span class=\"number\">1</span>, path = [];</span><br><span class=\"line\">\tcombineHelper(n, k, start, res, path);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>n 1 ... n æ•°ç»„ 1 ~ n</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>k å– k ä¸ªæ•°</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>start ä»å“ªä¸ªå¼€å§‹å–ï¼ˆä¸ä»æ•°ç»„ä¸‹æ ‡0å¼€å§‹ï¼‰</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>res ç»“æœé›†</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>path å•ä¸ªç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> combineHelper = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">n, k, start, res, path</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// recursion terminator</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (path.length === k) &#123;</span><br><span class=\"line\">\t\tres.push(path.slice()); <span class=\"comment\">// å¤‡ä»½ä¸€ä»½</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// logic process</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = start; i &lt;= n; i ++) &#123; <span class=\"comment\">// æ•°ç»„ä¸º 1 ï½ nï¼Œæ‰€ä»¥ç»ˆæ­¢æ¡ä»¶ i &lt;= n;ï¼ˆè§†æƒ…å†µè€Œå®šï¼‰</span></span><br><span class=\"line\">\t\tpath.push(i); <span class=\"comment\">// é€‰</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// drill down</span></span><br><span class=\"line\">\t\tcombineHelper(n. k, i + <span class=\"number\">1</span>, res, path);</span><br><span class=\"line\">\t\tpath.pop(); <span class=\"comment\">// ä¸é€‰</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ’åˆ—\"><a href=\"#æ’åˆ—\" class=\"headerlink\" title=\"æ’åˆ—\"></a>æ’åˆ—</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/permutations/\" target=\"_blank\" rel=\"noopener\">46. å…¨æ’åˆ—-i</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/permutations-ii/\" target=\"_blank\" rel=\"noopener\">47. å…¨æ’åˆ—-ii</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> permute = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">nums</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> res = [];</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> path =[];</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> usedNum = &#123;&#125;;</span><br><span class=\"line\">\tpermuteHelper(nums, res, path, usedNum);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>nums ç”¨äºæ’åˆ—çš„æ•°ç»„</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>res ç»“æœé›†</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>path å•ä¸ªç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>usedNum ä½¿ç”¨è¿‡çš„æ•°å­—</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> permuteHelper = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">nums, res, path, usedNum</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// recursion terminator</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (path.length === nums.length) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å˜é‡ path æ‰€æŒ‡å‘çš„åˆ—è¡¨ åœ¨æ·±åº¦ä¼˜å…ˆéå†çš„è¿‡ç¨‹ä¸­åªæœ‰ä¸€ä»½ ï¼Œæ·±åº¦ä¼˜å…ˆéå†å®Œæˆä»¥åï¼Œå›åˆ°äº†æ ¹ç»“ç‚¹ï¼Œæˆä¸ºç©ºåˆ—è¡¨ã€‚</span></span><br><span class=\"line\">\t\tres.push(path.slice());</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// current level logic </span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; nums.length; i ++) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (usedNum[nums[i]] !== <span class=\"keyword\">void</span> <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tpath.push(nums[i]); <span class=\"comment\">// é€‰ä¸­</span></span><br><span class=\"line\">\t\tusedNum[nums[i]] = truel;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">// drill down</span></span><br><span class=\"line\">\t\tpermuteHelper(nums, res, path, usedNum);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tpath.pop(); <span class=\"comment\">// æœªé€‰ä¸­</span></span><br><span class=\"line\">\t\tusedNum[nums[i]] = <span class=\"literal\">false</span>; <span class=\"comment\">// æ’¤é”€ä½¿ç”¨è®°å½•</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> permuteUnique = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">nums</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = [];</span><br><span class=\"line\">  <span class=\"keyword\">let</span> defaultNum = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"comment\">// ç»Ÿè®¡å­—ç¬¦å‡ºç°ä¸ªæ•°</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; nums.length; i ++) &#123;</span><br><span class=\"line\">    defaultNum[nums[i]] ? defaultNum[nums[i]] ++ : defaultNum[nums[i]] = <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> usedNum = &#123;... defaultNum&#125;;</span><br><span class=\"line\">  nums = nums.sort();</span><br><span class=\"line\">  permuteUniqueHelper(nums, res, [], usedNum);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>nums ä¼ å…¥çš„å¯ä½¿ç”¨æ•°ç»„</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>res ç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>path å½“å‰å±‚ç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>usedNum ä½¿ç”¨è¿‡çš„map</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> permuteUniqueHelper = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">nums, res, path, usedNum</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// recursion terminator</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (path.length === nums.length) &#123;</span><br><span class=\"line\">    res.push(path.slice());</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// current level logic</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; nums.length; i ++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nums[i - <span class=\"number\">1</span>] == nums[i] &amp;&amp; i - <span class=\"number\">1</span> &gt;= <span class=\"number\">0</span> &amp;&amp; usedNum[nums[i]]) &#123; <span class=\"comment\">// é¿å…äº§ç”Ÿé‡å¤çš„æ’åˆ—</span></span><br><span class=\"line\">      <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (usedNum[nums[i]] !== <span class=\"keyword\">void</span> <span class=\"number\">0</span> &amp;&amp; usedNum[nums[i]] === <span class=\"number\">0</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">    usedNum[nums[i]] --; <span class=\"comment\">// ä½¿ç”¨æ¬¡æ•°å‡ä¸€</span></span><br><span class=\"line\">    path.push(nums[i]);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// drill down</span></span><br><span class=\"line\">    permuteUniqueHelper(nums, res, path, usedNum);</span><br><span class=\"line\">    </span><br><span class=\"line\">    path.pop();</span><br><span class=\"line\">    usedNum[nums[i]] ++; <span class=\"comment\">// æ’¤é”€ä½¿ç”¨è®°å½• </span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"åŠ¨æ€è§„åˆ’\"><a href=\"#åŠ¨æ€è§„åˆ’\" class=\"headerlink\" title=\"åŠ¨æ€è§„åˆ’\"></a>åŠ¨æ€è§„åˆ’</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/longest-increasing-subsequence/\" target=\"_blank\" rel=\"noopener\">âœ¨300. æœ€é•¿ä¸Šå‡å­åºåˆ—</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/coin-change/\" target=\"_blank\" rel=\"noopener\">âœ¨322 é›¶é’±å…‘æ¢</a></li>\n</ul>\n<h2 id=\"åšå¼ˆè®º\"><a href=\"#åšå¼ˆè®º\" class=\"headerlink\" title=\"åšå¼ˆè®º\"></a>åšå¼ˆè®º</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/nim-game/\" target=\"_blank\" rel=\"noopener\">292. Nimæ¸¸æˆ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/stone-game/\" target=\"_blank\" rel=\"noopener\">877. çŸ³å­æ¸¸æˆ</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2>","site":{"data":{}},"excerpt":"<style  type=\"text/css\">\n.lx-entry a {\n    color: #191919;\n    padding: 2px 0 1px 0;\n    text-decoration: none;\n    background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n    transition: background-position 120ms ease-in-out, padding 120ms ease-in-out;\n    background-size: 100% 200%;\n    background-position: 0 0;\n    word-break: break-word;\n}\n\n.lx-entry a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), rgba(247,65,65,.761) calc(50% - 9px), rgba(247,65,65,.761) 100% );\n  background-position: 0 100%;\n}\n\n.post-button a:hover {\n  background-image: linear-gradient( transparent 0%, transparent calc(50% - 9px), transparent calc(50% - 9px), transparent 100% ) !important;\n  background-position: 0 100% !important;\n  outline: none !important;\n  text-decoration: none !important;\n}\n</style>\n\n<h2 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h2><ul>\n<li>å¸¸è§ç®—æ³•æ¨¡æ¿ï¼ˆè‡ªå·±æ€»ç»“ï¼Œéå®˜æ–¹ï¼‰</li>\n</ul>","more":"<h2 id=\"æ•°æ®ç»“æ„\"><a href=\"#æ•°æ®ç»“æ„\" class=\"headerlink\" title=\"æ•°æ®ç»“æ„\"></a>æ•°æ®ç»“æ„</h2><h3 id=\"æ•°ç»„\"><a href=\"#æ•°ç»„\" class=\"headerlink\" title=\"æ•°ç»„\"></a>æ•°ç»„</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/\" target=\"_blank\" rel=\"noopener\">26. åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/plus-one/\" target=\"_blank\" rel=\"noopener\">66. åŠ ä¸€</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/merge-sorted-array/\" target=\"_blank\" rel=\"noopener\">88. åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/\" target=\"_blank\" rel=\"noopener\">122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/assign-cookies/\" target=\"_blank\" rel=\"noopener\">455. åˆ†å‘é¥¼å¹²</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/rotate-array/\" target=\"_blank\" rel=\"noopener\">âœ¨189. æ—‹è½¬æ•°ç»„</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/ugly-number-ii/\" target=\"_blank\" rel=\"noopener\">âœ¨264. ä¸‘æ•°-ii</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/walking-robot-simulation/\" target=\"_blank\" rel=\"noopener\">874. æ¨¡æ‹Ÿè¡Œèµ°æœºå™¨äºº</a></li>\n</ul>\n<h3 id=\"é“¾è¡¨\"><a href=\"#é“¾è¡¨\" class=\"headerlink\" title=\"é“¾è¡¨\"></a>é“¾è¡¨</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/linked-list-cycle/\" target=\"_blank\" rel=\"noopener\">âœ¨141. ç¯å½¢é“¾è¡¨-i</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/linked-list-cycle-ii/\" target=\"_blank\" rel=\"noopener\">âœ¨142. ç¯å½¢é“¾è¡¨-ii</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/reverse-linked-list/\" target=\"_blank\" rel=\"noopener\">âœ¨206. åè½¬é“¾è¡¨</a></li>\n</ul>\n<h3 id=\"æ ˆ\"><a href=\"#æ ˆ\" class=\"headerlink\" title=\"æ ˆ\"></a>æ ˆ</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/valid-parentheses/\" target=\"_blank\" rel=\"noopener\">20. æœ‰æ•ˆçš„æ‹¬å·</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/min-stack/\" target=\"_blank\" rel=\"noopener\">155. æœ€å°æ ˆ</a></li>\n</ul>\n<h3 id=\"é˜Ÿåˆ—\"><a href=\"#é˜Ÿåˆ—\" class=\"headerlink\" title=\"é˜Ÿåˆ—\"></a>é˜Ÿåˆ—</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/design-circular-queue/\" target=\"_blank\" rel=\"noopener\">622. è®¾è®¡å¾ªç¯é˜Ÿåˆ—</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/design-circular-deque/\" target=\"_blank\" rel=\"noopener\">ğŸ¤”641. è®¾è®¡å¾ªç¯åŒç«¯é˜Ÿåˆ—</a></li>\n</ul>\n<h3 id=\"Hash\"><a href=\"#Hash\" class=\"headerlink\" title=\"Hash\"></a>Hash</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">1. ä¸¤æ•°ä¹‹å’Œ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/group-anagrams/\" target=\"_blank\" rel=\"noopener\">49. å­—æ¯å¼‚ä½è¯åˆ†ç»„</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/majority-element/\" target=\"_blank\" rel=\"noopener\">169. å¤šæ•°å…ƒç´ </a></li>\n<li><a href=\"https://leetcode-cn.com/problems/valid-anagram/\" target=\"_blank\" rel=\"noopener\">242. æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/lemonade-change/\" target=\"_blank\" rel=\"noopener\">860. æŸ æª¬æ°´æ‰¾é›¶</a></li>\n</ul>\n<h3 id=\"æ»‘åŠ¨çª—å£\"><a href=\"#æ»‘åŠ¨çª—å£\" class=\"headerlink\" title=\"æ»‘åŠ¨çª—å£\"></a><a href=\"https://leetcode-cn.com/problems/sliding-window-maximum/solution/239-hua-dong-chuang-kou-zui-da-zhi-by-alexer-660/\" target=\"_blank\" rel=\"noopener\">æ»‘åŠ¨çª—å£</a></h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/sliding-window-maximum/\" target=\"_blank\" rel=\"noopener\">âœ¨239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼</a></li>\n<li></li>\n</ul>\n<h3 id=\"æ ‘\"><a href=\"#æ ‘\" class=\"headerlink\" title=\"æ ‘\"></a>æ ‘</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/merge-two-sorted-lists/\" target=\"_blank\" rel=\"noopener\">21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/swap-nodes-in-pairs/\" target=\"_blank\" rel=\"noopener\">24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/reverse-nodes-in-k-group/\" target=\"_blank\" rel=\"noopener\">ğŸ’‰25. kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/reverse-linked-list-ii/\" target=\"_blank\" rel=\"noopener\">ğŸ’‰92. åè½¬é“¾è¡¨</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/same-tree/\" target=\"_blank\" rel=\"noopener\">100. ç›¸åŒçš„æ ‘</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/count-complete-tree-nodes/\" target=\"_blank\" rel=\"noopener\">222. å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/search-in-a-binary-search-tree/\" target=\"_blank\" rel=\"noopener\">700. äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/insert-into-a-binary-search-tree/\" target=\"_blank\" rel=\"noopener\">701. äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/serialize-and-deserialize-binary-tree/\" target=\"_blank\" rel=\"noopener\">âœ¨297. äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/invert-binary-tree/\" target=\"_blank\" rel=\"noopener\">âœ¨226. ç¿»è½¬äºŒå‰æ ‘</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/populating-next-right-pointers-in-each-node/\" target=\"_blank\" rel=\"noopener\">âœ¨116. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/validate-binary-search-tree/\" target=\"_blank\" rel=\"noopener\">âœ¨98. éªŒè¯äºŒå‰æœç´¢æ ‘</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/path-sum/\" target=\"_blank\" rel=\"noopener\">âœ¨112. è·¯ç»æ€»å’Œ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/maximum-depth-of-binary-tree/\" target=\"_blank\" rel=\"noopener\">âœ¨104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/minimum-depth-of-binary-tree/\" target=\"_blank\" rel=\"noopener\">âœ¨111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/delete-node-in-a-bst/\" target=\"_blank\" rel=\"noopener\">âœ¨450. åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/construct-binary-tree-from-inorder-and-postorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/\" target=\"_blank\" rel=\"noopener\">âœ¨236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/flatten-binary-tree-to-linked-list/\" target=\"_blank\" rel=\"noopener\">ğŸ¤”ï¸114. äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/binary-tree-preorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨144. äºŒå‰æ ‘çš„å‰åºéå†</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/binary-tree-inorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨94. äºŒå‰æ ‘çš„ä¸­åºéå†</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/binary-tree-postorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨145. äºŒå‰æ ‘çš„ååºéå†</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/binary-tree-level-order-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨102. äºŒå‰æ ‘çš„å±‚åºéå†</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/n-ary-tree-preorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨589. Nå‰æ ‘çš„å‰åºéå†</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/n-ary-tree-postorder-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨590. Nå‰æ ‘çš„ååºéå†</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/n-ary-tree-level-order-traversal/\" target=\"_blank\" rel=\"noopener\">âœ¨429. Nå‰æ ‘çš„å±‚åºéå†</a></li>\n</ul>\n<h2 id=\"å‰ç¼€å’Œ\"><a href=\"#å‰ç¼€å’Œ\" class=\"headerlink\" title=\"å‰ç¼€å’Œ\"></a>å‰ç¼€å’Œ</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/subarray-sum-equals-k/\" target=\"_blank\" rel=\"noopener\">âœ¨560. å’Œä¸ºkçš„å­æ•°ç»„</a></li>\n</ul>\n<h2 id=\"å•è°ƒæ ˆ\"><a href=\"#å•è°ƒæ ˆ\" class=\"headerlink\" title=\"å•è°ƒæ ˆ\"></a>å•è°ƒæ ˆ</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/trapping-rain-water/\" target=\"_blank\" rel=\"noopener\">42. æ¥é›¨æ°´</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/largest-rectangle-in-histogram/\" target=\"_blank\" rel=\"noopener\">84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/next-greater-element-i/\" target=\"_blank\" rel=\"noopener\">âœ¨496. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ -i</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/next-greater-element-ii/\" target=\"_blank\" rel=\"noopener\">âœ¨503. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ -ii</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/daily-temperatures/\" target=\"_blank\" rel=\"noopener\">âœ¨739. æ¯æ—¥æ¸©åº¦</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢</span></span><br><span class=\"line\"><span class=\"comment\">// å•è°ƒæ ˆ</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> largestRectangleArea = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">heights</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> area = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> stack = [];</span><br><span class=\"line\">  <span class=\"keyword\">let</span> current = <span class=\"number\">0</span>;</span><br><span class=\"line\">  heights = [<span class=\"number\">0</span>, ...heights, <span class=\"number\">0</span>];</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (current &lt; heights.length) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ ˆä¸ä¸ºç©º ä¸” å½“å‰å…ƒç´  è¦ å¤§äº æ ˆé¡¶å…ƒç´ </span></span><br><span class=\"line\">    <span class=\"comment\">// æ‰èƒ½è¢«æ¡†ä½</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(stack.length &amp;&amp; heights[current] &lt; heights[stack[stack.length - <span class=\"number\">1</span>]]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> h = heights[stack[stack.length - <span class=\"number\">1</span>]];</span><br><span class=\"line\">      stack.pop();</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!stack.length) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      area = <span class=\"built_in\">Math</span>.max(area, (current - stack[stack.length - <span class=\"number\">1</span>] - <span class=\"number\">1</span>) * h)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    stack.push(current);</span><br><span class=\"line\">    current ++;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> area;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> stack = [];</span><br><span class=\"line\"><span class=\"keyword\">let</span> current = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">while</span>(current &lt; nums.length) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¿™æ˜¯å•è°ƒé€’å¢æ ˆï¼Œè§†æƒ…å†µè€Œå®šï¼Œå½“å‰å…ƒç´ æ˜¯å¦å¤§äºæ ˆé¡¶å…ƒç´ </span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(stack.length &amp;&amp; nums[current] &lt; nums[stack[stack.length <span class=\"number\">-1</span>]]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> base = nums[stack[stack.length <span class=\"number\">-1</span>]];</span><br><span class=\"line\">        stack.pop();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!stack.length) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"comment\">// some code ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    stack.push(current);</span><br><span class=\"line\">    current ++;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"åŒæŒ‡é’ˆ\"><a href=\"#åŒæŒ‡é’ˆ\" class=\"headerlink\" title=\"åŒæŒ‡é’ˆ\"></a>åŒæŒ‡é’ˆ</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">1. ä¸¤æ•°ä¹‹å’Œ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/container-with-most-water/\" target=\"_blank\" rel=\"noopener\">11. ç››æœ€å¤šæ°´çš„å®¹å™¨</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/3sum/\" target=\"_blank\" rel=\"noopener\">âœ¨15. ä¸‰æ•°ä¹‹å’Œ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/\" target=\"_blank\" rel=\"noopener\">26. åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/trapping-rain-water/\" target=\"_blank\" rel=\"noopener\">42. æ¥é›¨æ°´</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/move-zeroes/\" target=\"_blank\" rel=\"noopener\">âœ¨283. ç§»åŠ¨é›¶</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> max = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, j = nums.length - <span class=\"number\">1</span>; i !== j; ) &#123;</span><br><span class=\"line\">    max = <span class=\"built_in\">Math</span>.max(max, <span class=\"built_in\">Math</span>.min(nums[i], nums[j]) * (j - i)) ;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nums[i] &lt; nums[j]) &#123;</span><br><span class=\"line\">        i ++;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        j --;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">return</span> max;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åŒæŒ‡é’ˆæš´åŠ›\"><a href=\"#åŒæŒ‡é’ˆæš´åŠ›\" class=\"headerlink\" title=\"åŒæŒ‡é’ˆæš´åŠ›\"></a>åŒæŒ‡é’ˆæš´åŠ›</h3><ul>\n<li><a href=\"https://leetcode-cn.com/problems/largest-rectangle-in-histogram/\" target=\"_blank\" rel=\"noopener\">84. æŸ±çŠ¶å›¾ä¸­çš„æœ€å¤§çŸ©å½¢</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> largestRectangleArea = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">heights</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!heights.length) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> area = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; heights.length; i ++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> leftIndex = i;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> rightIndex = i;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> h = heights[i]; <span class=\"comment\">// åŸºå‡†ç‚¹ï¼Œå¾€å‰å¾€åéå†æ±‚è§£</span></span><br><span class=\"line\">      <span class=\"keyword\">while</span>(heights[leftIndex - <span class=\"number\">1</span>] &gt;= h) &#123;</span><br><span class=\"line\">        leftIndex --;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">while</span>(heights[rightIndex + <span class=\"number\">1</span>] &gt;= h) &#123;</span><br><span class=\"line\">        rightIndex ++;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> distance = rightIndex - leftIndex + <span class=\"number\">1</span>;</span><br><span class=\"line\">      area = <span class=\"built_in\">Math</span>.max(area, distance * h);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> area;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// let max = 0;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> leftMax = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> rightMax = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, j = nums.length - <span class=\"number\">1</span>; i !== j; ) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nums[i] &lt; nums[j]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (leftMax &lt; nums[i]) &#123;</span><br><span class=\"line\">            leftMax = nums[i];</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// some code ...</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        i ++;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (rightMax &lt; nums[j]) &#123;</span><br><span class=\"line\">            rightMax = nums[j];</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// some code ...</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        j --;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"é€’å½’\"><a href=\"#é€’å½’\" class=\"headerlink\" title=\"é€’å½’\"></a>é€’å½’</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/climbing-stairs/\" target=\"_blank\" rel=\"noopener\">70. çˆ¬æ¥¼æ¢¯</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">recursion</span>(<span class=\"params\">level, param1, param2, ...</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// recursion terminator</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (level &gt; MAX_LEVEL) &#123;</span><br><span class=\"line\">\t\tprocrss_result;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> ;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// process logic in current level</span></span><br><span class=\"line\">\tprocess(level, data ... );</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// drill down</span></span><br><span class=\"line\">\trecursion(level + <span class=\"number\">1</span>, <span class=\"keyword\">new</span> param1, <span class=\"keyword\">new</span> param2, ... );</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// reverse the current level status if needed</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"åˆ†æ²»\"><a href=\"#åˆ†æ²»\" class=\"headerlink\" title=\"åˆ†æ²»\"></a>åˆ†æ²»</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">divideConquer</span>(<span class=\"params\">problem, param1, param2, ... </span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// recursion terminator</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!problem) &#123;</span><br><span class=\"line\">\t\tprint_result;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> ;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// prepare data</span></span><br><span class=\"line\">\tdata = prepareData(problem);</span><br><span class=\"line\">\tsubProblems = splitProblem(problem, data);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// conquer subProblems</span></span><br><span class=\"line\">\tsubResult1 = divideConquer(subProblems[<span class=\"number\">0</span>], newParam1, <span class=\"keyword\">new</span> Param2, ... );</span><br><span class=\"line\">\tsubResult2 = divideConquer(subProblems[<span class=\"number\">1</span>], newParam1, <span class=\"keyword\">new</span> Param2, ... );</span><br><span class=\"line\">\tsubResult3 = divideConquer(subProblems[<span class=\"number\">2</span>], newParam1, <span class=\"keyword\">new</span> Param2, ... );</span><br><span class=\"line\">\t...</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// process and generate the final result</span></span><br><span class=\"line\">\tresult = processResult(subResult1, subResult2, subResult3, ... );</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// revert the current level status</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"DFS-å›æº¯\"><a href=\"#DFS-å›æº¯\" class=\"headerlink\" title=\"DFS + å›æº¯\"></a><a href=\"https://leetcode-cn.com/problems/permutations/solution/hui-su-suan-fa-python-dai-ma-java-dai-ma-by-liweiw/\" target=\"_blank\" rel=\"noopener\">DFS + å›æº¯</a></h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/\" target=\"_blank\" rel=\"noopener\">17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/generate-parentheses/\" target=\"_blank\" rel=\"noopener\">22. æ‹¬å·ç”Ÿæˆ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/permutations/\" target=\"_blank\" rel=\"noopener\">46. å…¨æ’åˆ—-i</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/permutations-ii/\" target=\"_blank\" rel=\"noopener\">47. å…¨æ’åˆ—-ii</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/n-queens/\" target=\"_blank\" rel=\"noopener\">51. Nçš‡å</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/combinations/\" target=\"_blank\" rel=\"noopener\">77. ç»„åˆ</a></li>\n</ul>\n<h2 id=\"æ·±åº¦ä¼˜å…ˆæœç´¢\"><a href=\"#æ·±åº¦ä¼˜å…ˆæœç´¢\" class=\"headerlink\" title=\"æ·±åº¦ä¼˜å…ˆæœç´¢\"></a>æ·±åº¦ä¼˜å…ˆæœç´¢</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/jump-game/\" target=\"_blank\" rel=\"noopener\">55. è·³è·ƒæ¸¸æˆ</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dfs</span>(<span class=\"params\">node</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (node <span class=\"keyword\">in</span> visited) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// already visited</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> ;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tvisited.add(node);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// process current node</span></span><br><span class=\"line\">\t<span class=\"comment\">// ...</span></span><br><span class=\"line\">\t<span class=\"comment\">// logic here</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\tdfs(node.left);</span><br><span class=\"line\">\tdfs(node.right);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"DFS-ä»£ç -é€’å½’å†™æ³•\"><a href=\"#DFS-ä»£ç -é€’å½’å†™æ³•\" class=\"headerlink\" title=\"DFS ä»£ç  - é€’å½’å†™æ³•\"></a>DFS ä»£ç  - é€’å½’å†™æ³•</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> visited = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dfs</span>(<span class=\"params\">node, visited</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (node <span class=\"keyword\">in</span> visited) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// already visited</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> ;</span><br><span class=\"line\">\t&#125;\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tvisited.add(node);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// process current  node here</span></span><br><span class=\"line\">\t...</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (nextNode <span class=\"keyword\">in</span> node.children) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!nextNode <span class=\"keyword\">in</span> visited) &#123;</span><br><span class=\"line\">\t\t\tdfs(nextNode, visited);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"DFS-ä»£ç -éé€’å½’å†™æ³•\"><a href=\"#DFS-ä»£ç -éé€’å½’å†™æ³•\" class=\"headerlink\" title=\"DFS ä»£ç  - éé€’å½’å†™æ³•\"></a>DFS ä»£ç  - éé€’å½’å†™æ³•</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dfs</span>(<span class=\"params\">root</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!root) <span class=\"keyword\">return</span> [];</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> visited = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> stack = [root];</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (stack.length) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> node = stack.pop();</span><br><span class=\"line\">\t\tvisited.add(node);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tprocess(node);</span><br><span class=\"line\">\t\tnodes = generateRelatedNodes(node);</span><br><span class=\"line\">\t\tstack.push(nodes);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// other processing work</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"BFS\"><a href=\"#BFS\" class=\"headerlink\" title=\"BFS\"></a>BFS</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/word-ladder/\" target=\"_blank\" rel=\"noopener\">127. å•è¯æ¥é¾™-i</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/open-the-lock/\" target=\"_blank\" rel=\"noopener\">752. æ‰“å¼€è½¬ç›˜é”</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/word-ladder-ii/\" target=\"_blank\" rel=\"noopener\">126. å•è¯æ¥é¾™-ii</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/number-of-islands/\" target=\"_blank\" rel=\"noopener\">200. å²›å±¿æ•°é‡</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/minesweeper/\" target=\"_blank\" rel=\"noopener\">529. æ‰«é›·æ¸¸æˆ</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">BFS</span>(<span class=\"params\">graph, start, end</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> queue = [];</span><br><span class=\"line\">\tqueue.push([start]);</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> visited = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>;</span><br><span class=\"line\">\tvisited.add(start);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (queue.length) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> node = queue.shift();</span><br><span class=\"line\">\t\tvisited.add(node);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tprocess(node);</span><br><span class=\"line\">\t\tnodes = generateRelatedNodes(node);</span><br><span class=\"line\">\t\tqueue.push(nodes);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// other processing work</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"äºŒåˆ†æŸ¥æ‰¾\"><a href=\"#äºŒåˆ†æŸ¥æ‰¾\" class=\"headerlink\" title=\"äºŒåˆ†æŸ¥æ‰¾\"></a>äºŒåˆ†æŸ¥æ‰¾</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/\" target=\"_blank\" rel=\"noopener\">153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼</a><ul>\n<li><a href=\"https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/solution/er-fen-cha-zhao-wei-shi-yao-zuo-you-bu-dui-cheng-z/\" target=\"_blank\" rel=\"noopener\">é¢˜è§£</a></li>\n</ul>\n</li>\n<li><a href=\"https://leetcode-cn.com/problems/search-in-rotated-sorted-array/\" target=\"_blank\" rel=\"noopener\">33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> left = <span class=\"number\">0</span>, right = arr.length - <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> (left &lt; = right) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> mid = (left + right) / <span class=\"number\">2</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (arr[mid] === target) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// find the target</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span> or <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (arr[mid] &lt; target) &#123;</span><br><span class=\"line\">\t\tleft = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\tright = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ç»„åˆ\"><a href=\"#ç»„åˆ\" class=\"headerlink\" title=\"ç»„åˆ\"></a>ç»„åˆ</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/combinations/\" target=\"_blank\" rel=\"noopener\">77. ç»„åˆ</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> combine = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">n, k</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> res = [];</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> start = <span class=\"number\">1</span>, path = [];</span><br><span class=\"line\">\tcombineHelper(n, k, start, res, path);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>n 1 ... n æ•°ç»„ 1 ~ n</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>k å– k ä¸ªæ•°</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>start ä»å“ªä¸ªå¼€å§‹å–ï¼ˆä¸ä»æ•°ç»„ä¸‹æ ‡0å¼€å§‹ï¼‰</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>res ç»“æœé›†</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>path å•ä¸ªç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> combineHelper = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">n, k, start, res, path</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// recursion terminator</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (path.length === k) &#123;</span><br><span class=\"line\">\t\tres.push(path.slice()); <span class=\"comment\">// å¤‡ä»½ä¸€ä»½</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// logic process</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = start; i &lt;= n; i ++) &#123; <span class=\"comment\">// æ•°ç»„ä¸º 1 ï½ nï¼Œæ‰€ä»¥ç»ˆæ­¢æ¡ä»¶ i &lt;= n;ï¼ˆè§†æƒ…å†µè€Œå®šï¼‰</span></span><br><span class=\"line\">\t\tpath.push(i); <span class=\"comment\">// é€‰</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// drill down</span></span><br><span class=\"line\">\t\tcombineHelper(n. k, i + <span class=\"number\">1</span>, res, path);</span><br><span class=\"line\">\t\tpath.pop(); <span class=\"comment\">// ä¸é€‰</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ’åˆ—\"><a href=\"#æ’åˆ—\" class=\"headerlink\" title=\"æ’åˆ—\"></a>æ’åˆ—</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/permutations/\" target=\"_blank\" rel=\"noopener\">46. å…¨æ’åˆ—-i</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/permutations-ii/\" target=\"_blank\" rel=\"noopener\">47. å…¨æ’åˆ—-ii</a></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> permute = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">nums</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> res = [];</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> path =[];</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> usedNum = &#123;&#125;;</span><br><span class=\"line\">\tpermuteHelper(nums, res, path, usedNum);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>nums ç”¨äºæ’åˆ—çš„æ•°ç»„</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>res ç»“æœé›†</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>path å•ä¸ªç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>usedNum ä½¿ç”¨è¿‡çš„æ•°å­—</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> permuteHelper = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">nums, res, path, usedNum</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// recursion terminator</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (path.length === nums.length) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å˜é‡ path æ‰€æŒ‡å‘çš„åˆ—è¡¨ åœ¨æ·±åº¦ä¼˜å…ˆéå†çš„è¿‡ç¨‹ä¸­åªæœ‰ä¸€ä»½ ï¼Œæ·±åº¦ä¼˜å…ˆéå†å®Œæˆä»¥åï¼Œå›åˆ°äº†æ ¹ç»“ç‚¹ï¼Œæˆä¸ºç©ºåˆ—è¡¨ã€‚</span></span><br><span class=\"line\">\t\tres.push(path.slice());</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// current level logic </span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; nums.length; i ++) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (usedNum[nums[i]] !== <span class=\"keyword\">void</span> <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tpath.push(nums[i]); <span class=\"comment\">// é€‰ä¸­</span></span><br><span class=\"line\">\t\tusedNum[nums[i]] = truel;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">// drill down</span></span><br><span class=\"line\">\t\tpermuteHelper(nums, res, path, usedNum);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tpath.pop(); <span class=\"comment\">// æœªé€‰ä¸­</span></span><br><span class=\"line\">\t\tusedNum[nums[i]] = <span class=\"literal\">false</span>; <span class=\"comment\">// æ’¤é”€ä½¿ç”¨è®°å½•</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> permuteUnique = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">nums</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = [];</span><br><span class=\"line\">  <span class=\"keyword\">let</span> defaultNum = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"comment\">// ç»Ÿè®¡å­—ç¬¦å‡ºç°ä¸ªæ•°</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; nums.length; i ++) &#123;</span><br><span class=\"line\">    defaultNum[nums[i]] ? defaultNum[nums[i]] ++ : defaultNum[nums[i]] = <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> usedNum = &#123;... defaultNum&#125;;</span><br><span class=\"line\">  nums = nums.sort();</span><br><span class=\"line\">  permuteUniqueHelper(nums, res, [], usedNum);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>nums ä¼ å…¥çš„å¯ä½¿ç”¨æ•°ç»„</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>res ç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>path å½“å‰å±‚ç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> </span>usedNum ä½¿ç”¨è¿‡çš„map</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> permuteUniqueHelper = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">nums, res, path, usedNum</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// recursion terminator</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (path.length === nums.length) &#123;</span><br><span class=\"line\">    res.push(path.slice());</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// current level logic</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; nums.length; i ++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nums[i - <span class=\"number\">1</span>] == nums[i] &amp;&amp; i - <span class=\"number\">1</span> &gt;= <span class=\"number\">0</span> &amp;&amp; usedNum[nums[i]]) &#123; <span class=\"comment\">// é¿å…äº§ç”Ÿé‡å¤çš„æ’åˆ—</span></span><br><span class=\"line\">      <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (usedNum[nums[i]] !== <span class=\"keyword\">void</span> <span class=\"number\">0</span> &amp;&amp; usedNum[nums[i]] === <span class=\"number\">0</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">    usedNum[nums[i]] --; <span class=\"comment\">// ä½¿ç”¨æ¬¡æ•°å‡ä¸€</span></span><br><span class=\"line\">    path.push(nums[i]);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// drill down</span></span><br><span class=\"line\">    permuteUniqueHelper(nums, res, path, usedNum);</span><br><span class=\"line\">    </span><br><span class=\"line\">    path.pop();</span><br><span class=\"line\">    usedNum[nums[i]] ++; <span class=\"comment\">// æ’¤é”€ä½¿ç”¨è®°å½• </span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"åŠ¨æ€è§„åˆ’\"><a href=\"#åŠ¨æ€è§„åˆ’\" class=\"headerlink\" title=\"åŠ¨æ€è§„åˆ’\"></a>åŠ¨æ€è§„åˆ’</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/longest-increasing-subsequence/\" target=\"_blank\" rel=\"noopener\">âœ¨300. æœ€é•¿ä¸Šå‡å­åºåˆ—</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/coin-change/\" target=\"_blank\" rel=\"noopener\">âœ¨322 é›¶é’±å…‘æ¢</a></li>\n</ul>\n<h2 id=\"åšå¼ˆè®º\"><a href=\"#åšå¼ˆè®º\" class=\"headerlink\" title=\"åšå¼ˆè®º\"></a>åšå¼ˆè®º</h2><ul>\n<li><a href=\"https://leetcode-cn.com/problems/nim-game/\" target=\"_blank\" rel=\"noopener\">292. Nimæ¸¸æˆ</a></li>\n<li><a href=\"https://leetcode-cn.com/problems/stone-game/\" target=\"_blank\" rel=\"noopener\">877. çŸ³å­æ¸¸æˆ</a></li>\n</ul>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2>"}],"PostAsset":[],"PostCategory":[{"post_id":"ckguz3u7g0005fw9kd9cb0e96","category_id":"ckguz3u7e0002fw9kao1q4kny","_id":"ckguz3u7k000dfw9kaxu6flya"},{"post_id":"ckguz3u770000fw9k06nafxd3","category_id":"ckguz3u7e0002fw9kao1q4kny","_id":"ckguz3u7m000ifw9khcjr5f63"},{"post_id":"ckguz3u7h0006fw9k7g704mj8","category_id":"ckguz3u7e0002fw9kao1q4kny","_id":"ckguz3u7n000lfw9k444wbpds"},{"post_id":"ckguz3u7c0001fw9kgmglhsy6","category_id":"ckguz3u7h0007fw9kat728nsp","_id":"ckguz3u7o000pfw9k0pbl3x8w"},{"post_id":"ckguz3u7f0004fw9k7u2uasaw","category_id":"ckguz3u7e0002fw9kao1q4kny","_id":"ckguz3u7p000sfw9k9ba76mb8"},{"post_id":"ckguz3u7o000ofw9kcrz71f4q","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u7s000zfw9k3v5m2zsi"},{"post_id":"ckguz3u7i000afw9k32qj3r80","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u7t0014fw9kb8yh5txy"},{"post_id":"ckguz3u7q000wfw9k8u16116d","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u7u0017fw9kcf0108ep"},{"post_id":"ckguz3u7j000cfw9kc35p4l47","category_id":"ckguz3u7p000tfw9kd3ukcang","_id":"ckguz3u7v001bfw9k43t9cacz"},{"post_id":"ckguz3u7r000yfw9kagfb0puk","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u7w001ffw9k3ygm8b3m"},{"post_id":"ckguz3u7s0013fw9ka0z6et1n","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u7x001ifw9k0ztnajmq"},{"post_id":"ckguz3u7m000hfw9k2ht63p3y","category_id":"ckguz3u7p000tfw9kd3ukcang","_id":"ckguz3u7y001nfw9k0c0tc0av"},{"post_id":"ckguz3u7t0016fw9k8z4x6drm","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u7z001qfw9kadzx4qui"},{"post_id":"ckguz3u7u001afw9kcxti76h5","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u80001ufw9k822ybij6"},{"post_id":"ckguz3u7n000kfw9k94zs4eqo","category_id":"ckguz3u7u0019fw9k84yj9416","_id":"ckguz3u82001yfw9kcq7496az"},{"post_id":"ckguz3u7w001efw9k2ornd2tx","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u830022fw9kermgehpy"},{"post_id":"ckguz3u7y001mfw9kexdw32ns","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u840026fw9kftwfequj"},{"post_id":"ckguz3u7x001hfw9kexv00bb9","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u850029fw9kg3ixfqxz"},{"post_id":"ckguz3u7p000rfw9k612tao3m","category_id":"ckguz3u7x001jfw9kf8k184p3","_id":"ckguz3u86002dfw9kfbfn6uvi"},{"post_id":"ckguz3u830021fw9kf1x24tlz","category_id":"ckguz3u80001vfw9k443kan23","_id":"ckguz3u87002hfw9ka280c8l1"},{"post_id":"ckguz3u7y001pfw9k6l5d5rsc","category_id":"ckguz3u80001vfw9k443kan23","_id":"ckguz3u88002lfw9kbskbexgv"},{"post_id":"ckguz3u830024fw9ke8p4exav","category_id":"ckguz3u80001vfw9k443kan23","_id":"ckguz3u89002ofw9kei0y8670"},{"post_id":"ckguz3u7z001tfw9kcrdn236z","category_id":"ckguz3u80001vfw9k443kan23","_id":"ckguz3u8a002sfw9k7bt0fx9a"},{"post_id":"ckguz3u840028fw9kg7g434e7","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u8b002wfw9kgwcteih7"},{"post_id":"ckguz3u80001xfw9k7m920c47","category_id":"ckguz3u80001vfw9k443kan23","_id":"ckguz3u8d0030fw9kgwlwgutc"},{"post_id":"ckguz3u88002jfw9k3ssi5rso","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u8e0034fw9k2m9vdzk8"},{"post_id":"ckguz3u87002gfw9k1uscb42a","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u8f0038fw9k3y0mbevr"},{"post_id":"ckguz3u85002bfw9k1wji5m9o","category_id":"ckguz3u88002kfw9kd4ahf71y","_id":"ckguz3u8f003bfw9k8tx16zo1"},{"post_id":"ckguz3u8b002vfw9kglfrf0c5","category_id":"ckguz3u7p000tfw9kd3ukcang","_id":"ckguz3u8h003gfw9k0enf71h2"},{"post_id":"ckguz3u89002nfw9k2fy725x8","category_id":"ckguz3u8b002ufw9k69l4hswg","_id":"ckguz3u8i003jfw9kgmkvcbdl"},{"post_id":"ckguz3u8a002rfw9kfz05gcdr","category_id":"ckguz3u8d0033fw9k5wzjhr18","_id":"ckguz3u8j003ofw9k18q5aazw"},{"post_id":"ckguz3u8g003ffw9k6q7fekvh","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u8k003rfw9kb5yx0ob5"},{"post_id":"ckguz3u8c002zfw9k8fbh5p92","category_id":"ckguz3u8g003dfw9k835wd20g","_id":"ckguz3u8l003wfw9kax9b38ub"},{"post_id":"ckguz3u8j003nfw9k1wtr46i6","category_id":"ckguz3u7n000mfw9k4nefb8a5","_id":"ckguz3u8l003yfw9k2ib82k2m"},{"post_id":"ckguz3u8e0037fw9k5n5v4rmd","category_id":"ckguz3u8g003dfw9k835wd20g","_id":"ckguz3u8m0042fw9k530z6zh2"},{"post_id":"ckguz3u8f003afw9k08d916ki","category_id":"ckguz3u8g003dfw9k835wd20g","_id":"ckguz3u8m0044fw9k8mv3h2zj"},{"post_id":"ckguz3u8h003ifw9k2rj37rzc","category_id":"ckguz3u8l003zfw9keg8tbrvy","_id":"ckguz3u8o0049fw9kfvnjggj5"},{"post_id":"ckguz3u8j003qfw9k8hr10r3n","category_id":"ckguz3u8m0046fw9k042ffki8","_id":"ckguz3u8q004cfw9k9pxz70mn"}],"PostTag":[{"post_id":"ckguz3u7g0005fw9kd9cb0e96","tag_id":"ckguz3u7f0003fw9kfyi9cecx","_id":"ckguz3u7i0009fw9khqw15nzw"},{"post_id":"ckguz3u770000fw9k06nafxd3","tag_id":"ckguz3u7f0003fw9kfyi9cecx","_id":"ckguz3u7j000bfw9kdwpq4bto"},{"post_id":"ckguz3u7h0006fw9k7g704mj8","tag_id":"ckguz3u7f0003fw9kfyi9cecx","_id":"ckguz3u7l000gfw9k9n3i8mnd"},{"post_id":"ckguz3u7c0001fw9kgmglhsy6","tag_id":"ckguz3u7i0008fw9k0qtsefov","_id":"ckguz3u7m000jfw9kbvjwaqos"},{"post_id":"ckguz3u7f0004fw9k7u2uasaw","tag_id":"ckguz3u7f0003fw9kfyi9cecx","_id":"ckguz3u7o000qfw9ke8oucmb4"},{"post_id":"ckguz3u7o000ofw9kcrz71f4q","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u7q000vfw9k53bdhral"},{"post_id":"ckguz3u7i000afw9k32qj3r80","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u7r000xfw9kd3zm8g34"},{"post_id":"ckguz3u7q000wfw9k8u16116d","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u7s0010fw9k49fpesi6"},{"post_id":"ckguz3u7r000yfw9kagfb0puk","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u7t0015fw9kf1sd522q"},{"post_id":"ckguz3u7s0013fw9ka0z6et1n","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u7u0018fw9k6xwtcbr5"},{"post_id":"ckguz3u7t0016fw9k8z4x6drm","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u7v001dfw9k1jj78a9d"},{"post_id":"ckguz3u7j000cfw9kc35p4l47","tag_id":"ckguz3u7p000ufw9ka121g80p","_id":"ckguz3u7w001gfw9kaje95ltv"},{"post_id":"ckguz3u7j000cfw9kc35p4l47","tag_id":"ckguz3u7s0012fw9k1byq0o90","_id":"ckguz3u7y001lfw9k2za57zpr"},{"post_id":"ckguz3u7u001afw9kcxti76h5","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u7y001ofw9k07iu7s74"},{"post_id":"ckguz3u7m000hfw9k2ht63p3y","tag_id":"ckguz3u7s0012fw9k1byq0o90","_id":"ckguz3u7z001sfw9k0idkhhgj"},{"post_id":"ckguz3u7y001mfw9kexdw32ns","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u80001wfw9kbome0urt"},{"post_id":"ckguz3u7n000kfw9k94zs4eqo","tag_id":"ckguz3u7x001kfw9k1p8cb1w9","_id":"ckguz3u830020fw9k4qes9x4i"},{"post_id":"ckguz3u7p000rfw9k612tao3m","tag_id":"ckguz3u7z001rfw9kb70rh0ze","_id":"ckguz3u830023fw9k07yd5pgz"},{"post_id":"ckguz3u7w001efw9k2ornd2tx","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u85002afw9kb9ri7rdy"},{"post_id":"ckguz3u7w001efw9k2ornd2tx","tag_id":"ckguz3u82001zfw9ka17jfi15","_id":"ckguz3u86002efw9k65237499"},{"post_id":"ckguz3u7x001hfw9kexv00bb9","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u87002ifw9k74gb2vfp"},{"post_id":"ckguz3u7x001hfw9kexv00bb9","tag_id":"ckguz3u82001zfw9ka17jfi15","_id":"ckguz3u89002mfw9k7wew8von"},{"post_id":"ckguz3u87002gfw9k1uscb42a","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u8a002qfw9ka2xtcj0a"},{"post_id":"ckguz3u87002gfw9k1uscb42a","tag_id":"ckguz3u7s0012fw9k1byq0o90","_id":"ckguz3u8b002tfw9k21ypdner"},{"post_id":"ckguz3u88002jfw9k3ssi5rso","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u8c002yfw9k8wbr1ek6"},{"post_id":"ckguz3u88002jfw9k3ssi5rso","tag_id":"ckguz3u7s0012fw9k1byq0o90","_id":"ckguz3u8d0031fw9k9ciabp5e"},{"post_id":"ckguz3u7y001pfw9k6l5d5rsc","tag_id":"ckguz3u86002ffw9k6zahcptr","_id":"ckguz3u8e0036fw9k0l292vkd"},{"post_id":"ckguz3u7z001tfw9kcrdn236z","tag_id":"ckguz3u86002ffw9k6zahcptr","_id":"ckguz3u8f0039fw9k1va8a8hh"},{"post_id":"ckguz3u8b002vfw9kglfrf0c5","tag_id":"ckguz3u7s0012fw9k1byq0o90","_id":"ckguz3u8g003efw9k4x5v1gie"},{"post_id":"ckguz3u80001xfw9k7m920c47","tag_id":"ckguz3u86002ffw9k6zahcptr","_id":"ckguz3u8h003hfw9k6zn869n7"},{"post_id":"ckguz3u830021fw9kf1x24tlz","tag_id":"ckguz3u86002ffw9k6zahcptr","_id":"ckguz3u8i003mfw9k0zgeggru"},{"post_id":"ckguz3u8g003ffw9k6q7fekvh","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u8j003pfw9k6l3hdgw6"},{"post_id":"ckguz3u830024fw9ke8p4exav","tag_id":"ckguz3u86002ffw9k6zahcptr","_id":"ckguz3u8k003ufw9k4e5d1h1y"},{"post_id":"ckguz3u8j003nfw9k1wtr46i6","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u8l003xfw9k8s0d033i"},{"post_id":"ckguz3u840028fw9kg7g434e7","tag_id":"ckguz3u7n000nfw9k8lpge0i7","_id":"ckguz3u8m0041fw9k4b1e42r6"},{"post_id":"ckguz3u840028fw9kg7g434e7","tag_id":"ckguz3u8i003kfw9kaynz34zu","_id":"ckguz3u8m0043fw9kcixi41nx"},{"post_id":"ckguz3u85002bfw9k1wji5m9o","tag_id":"ckguz3u8k003sfw9ka4go8qz1","_id":"ckguz3u8m0045fw9k1sashyec"},{"post_id":"ckguz3u89002nfw9k2fy725x8","tag_id":"ckguz3u8m0040fw9kgdgwhwae","_id":"ckguz3u8n0048fw9k4jct5u8d"},{"post_id":"ckguz3u8a002rfw9kfz05gcdr","tag_id":"ckguz3u8m0047fw9k822kfgur","_id":"ckguz3u8q004bfw9kff7kcdc1"},{"post_id":"ckguz3u8c002zfw9k8fbh5p92","tag_id":"ckguz3u8o004afw9kbkjo9wiw","_id":"ckguz3u8q004efw9k3p0k8wzz"},{"post_id":"ckguz3u8e0037fw9k5n5v4rmd","tag_id":"ckguz3u8o004afw9kbkjo9wiw","_id":"ckguz3u8r004gfw9kh5nk6iik"},{"post_id":"ckguz3u8f003afw9k08d916ki","tag_id":"ckguz3u8o004afw9kbkjo9wiw","_id":"ckguz3u8r004ifw9k1c51etwr"},{"post_id":"ckguz3u8h003ifw9k2rj37rzc","tag_id":"ckguz3u8r004hfw9k8v2k66ks","_id":"ckguz3u8r004kfw9k4y3fezmg"},{"post_id":"ckguz3u8j003qfw9k8hr10r3n","tag_id":"ckguz3u7p000ufw9ka121g80p","_id":"ckguz3u8s004lfw9k8jk46s1m"},{"post_id":"ckguz3u8j003qfw9k8hr10r3n","tag_id":"ckguz3u8r004jfw9k7b6x20ty","_id":"ckguz3u8s004mfw9kcigu8gvx"}],"Tag":[{"name":"CSS","_id":"ckguz3u7f0003fw9kfyi9cecx"},{"name":"é˜…è¯»","_id":"ckguz3u7i0008fw9k0qtsefov"},{"name":"å‰ç«¯æ¦‚å¿µ","_id":"ckguz3u7n000nfw9k8lpge0i7"},{"name":"writing","_id":"ckguz3u7p000ufw9ka121g80p"},{"name":"ç®—æ³•","_id":"ckguz3u7s0012fw9k1byq0o90"},{"name":"Javascript","_id":"ckguz3u7x001kfw9k1p8cb1w9"},{"name":"HTML","_id":"ckguz3u7z001rfw9kb70rh0ze"},{"name":"æ­£åˆ™è¡¨è¾¾å¼","_id":"ckguz3u82001zfw9ka17jfi15"},{"name":"æµè§ˆå™¨","_id":"ckguz3u86002ffw9k6zahcptr"},{"name":"UTF-8","_id":"ckguz3u8i003kfw9kaynz34zu"},{"name":"react","_id":"ckguz3u8k003sfw9ka4go8qz1"},{"name":"è®¡ç®—æœºç½‘ç»œ","_id":"ckguz3u8m0040fw9kgdgwhwae"},{"name":"æ€§èƒ½ç›‘æ§","_id":"ckguz3u8m0047fw9k822kfgur"},{"name":"å¾®ä¿¡å°ç¨‹åº","_id":"ckguz3u8o004afw9kbkjo9wiw"},{"name":"è®¡ç®—æœºå›¾å½¢å­¦","_id":"ckguz3u8r004hfw9k8v2k66ks"},{"name":"WebGL","_id":"ckguz3u8r004jfw9k7b6x20ty"}]}}